var G9=Object.defineProperty;var $9=(t,e,n)=>e in t?G9(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n;var uE=(t,e,n)=>$9(t,typeof e!="symbol"?e+"":e,n);function K9(t,e){for(var n=0;n<e.length;n++){const r=e[n];if(typeof r!="string"&&!Array.isArray(r)){for(const i in r)if(i!=="default"&&!(i in t)){const a=Object.getOwnPropertyDescriptor(r,i);a&&Object.defineProperty(t,i,a.get?a:{enumerable:!0,get:()=>r[i]})}}}return Object.freeze(Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}))}(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))r(i);new MutationObserver(i=>{for(const a of i)if(a.type==="childList")for(const s of a.addedNodes)s.tagName==="LINK"&&s.rel==="modulepreload"&&r(s)}).observe(document,{childList:!0,subtree:!0});function n(i){const a={};return i.integrity&&(a.integrity=i.integrity),i.referrerPolicy&&(a.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?a.credentials="include":i.crossOrigin==="anonymous"?a.credentials="omit":a.credentials="same-origin",a}function r(i){if(i.ep)return;i.ep=!0;const a=n(i);fetch(i.href,a)}})();function Vo(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var cE={exports:{}},ep={};/**
 * @license React
 * react-jsx-runtime.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var UR;function W9(){if(UR)return ep;UR=1;var t=Symbol.for("react.transitional.element"),e=Symbol.for("react.fragment");function n(r,i,a){var s=null;if(a!==void 0&&(s=""+a),i.key!==void 0&&(s=""+i.key),"key"in i){a={};for(var l in i)l!=="key"&&(a[l]=i[l])}else a=i;return i=a.ref,{$$typeof:t,type:r,key:s,ref:i!==void 0?i:null,props:a}}return ep.Fragment=e,ep.jsx=n,ep.jsxs=n,ep}var FR;function Y9(){return FR||(FR=1,cE.exports=W9()),cE.exports}var f=Y9(),dE={exports:{}},mt={};/**
 * @license React
 * react.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var BR;function Z9(){if(BR)return mt;BR=1;var t=Symbol.for("react.transitional.element"),e=Symbol.for("react.portal"),n=Symbol.for("react.fragment"),r=Symbol.for("react.strict_mode"),i=Symbol.for("react.profiler"),a=Symbol.for("react.consumer"),s=Symbol.for("react.context"),l=Symbol.for("react.forward_ref"),c=Symbol.for("react.suspense"),h=Symbol.for("react.memo"),p=Symbol.for("react.lazy"),g=Symbol.for("react.activity"),x=Symbol.iterator;function b(X){return X===null||typeof X!="object"?null:(X=x&&X[x]||X["@@iterator"],typeof X=="function"?X:null)}var C={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},A=Object.assign,D={};function R(X,ue,be){this.props=X,this.context=ue,this.refs=D,this.updater=be||C}R.prototype.isReactComponent={},R.prototype.setState=function(X,ue){if(typeof X!="object"&&typeof X!="function"&&X!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,X,ue,"setState")},R.prototype.forceUpdate=function(X){this.updater.enqueueForceUpdate(this,X,"forceUpdate")};function j(){}j.prototype=R.prototype;function O(X,ue,be){this.props=X,this.context=ue,this.refs=D,this.updater=be||C}var q=O.prototype=new j;q.constructor=O,A(q,R.prototype),q.isPureReactComponent=!0;var $=Array.isArray;function H(){}var U={H:null,A:null,T:null,S:null},z=Object.prototype.hasOwnProperty;function B(X,ue,be){var Ce=be.ref;return{$$typeof:t,type:X,key:ue,ref:Ce!==void 0?Ce:null,props:be}}function Z(X,ue){return B(X.type,ue,X.props)}function K(X){return typeof X=="object"&&X!==null&&X.$$typeof===t}function J(X){var ue={"=":"=0",":":"=2"};return"$"+X.replace(/[=:]/g,function(be){return ue[be]})}var G=/\/+/g;function Se(X,ue){return typeof X=="object"&&X!==null&&X.key!=null?J(""+X.key):ue.toString(36)}function Oe(X){switch(X.status){case"fulfilled":return X.value;case"rejected":throw X.reason;default:switch(typeof X.status=="string"?X.then(H,H):(X.status="pending",X.then(function(ue){X.status==="pending"&&(X.status="fulfilled",X.value=ue)},function(ue){X.status==="pending"&&(X.status="rejected",X.reason=ue)})),X.status){case"fulfilled":return X.value;case"rejected":throw X.reason}}throw X}function ee(X,ue,be,Ce,je){var Ve=typeof X;(Ve==="undefined"||Ve==="boolean")&&(X=null);var Ze=!1;if(X===null)Ze=!0;else switch(Ve){case"bigint":case"string":case"number":Ze=!0;break;case"object":switch(X.$$typeof){case t:case e:Ze=!0;break;case p:return Ze=X._init,ee(Ze(X._payload),ue,be,Ce,je)}}if(Ze)return je=je(X),Ze=Ce===""?"."+Se(X,0):Ce,$(je)?(be="",Ze!=null&&(be=Ze.replace(G,"$&/")+"/"),ee(je,ue,be,"",function(st){return st})):je!=null&&(K(je)&&(je=Z(je,be+(je.key==null||X&&X.key===je.key?"":(""+je.key).replace(G,"$&/")+"/")+Ze)),ue.push(je)),1;Ze=0;var It=Ce===""?".":Ce+":";if($(X))for(var Te=0;Te<X.length;Te++)Ce=X[Te],Ve=It+Se(Ce,Te),Ze+=ee(Ce,ue,be,Ve,je);else if(Te=b(X),typeof Te=="function")for(X=Te.call(X),Te=0;!(Ce=X.next()).done;)Ce=Ce.value,Ve=It+Se(Ce,Te++),Ze+=ee(Ce,ue,be,Ve,je);else if(Ve==="object"){if(typeof X.then=="function")return ee(Oe(X),ue,be,Ce,je);throw ue=String(X),Error("Objects are not valid as a React child (found: "+(ue==="[object Object]"?"object with keys {"+Object.keys(X).join(", ")+"}":ue)+"). If you meant to render a collection of children, use an array instead.")}return Ze}function re(X,ue,be){if(X==null)return X;var Ce=[],je=0;return ee(X,Ce,"","",function(Ve){return ue.call(be,Ve,je++)}),Ce}function le(X){if(X._status===-1){var ue=X._result;ue=ue(),ue.then(function(be){(X._status===0||X._status===-1)&&(X._status=1,X._result=be)},function(be){(X._status===0||X._status===-1)&&(X._status=2,X._result=be)}),X._status===-1&&(X._status=0,X._result=ue)}if(X._status===1)return X._result.default;throw X._result}var Ne=typeof reportError=="function"?reportError:function(X){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var ue=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof X=="object"&&X!==null&&typeof X.message=="string"?String(X.message):String(X),error:X});if(!window.dispatchEvent(ue))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",X);return}console.error(X)},Pe={map:re,forEach:function(X,ue,be){re(X,function(){ue.apply(this,arguments)},be)},count:function(X){var ue=0;return re(X,function(){ue++}),ue},toArray:function(X){return re(X,function(ue){return ue})||[]},only:function(X){if(!K(X))throw Error("React.Children.only expected to receive a single React element child.");return X}};return mt.Activity=g,mt.Children=Pe,mt.Component=R,mt.Fragment=n,mt.Profiler=i,mt.PureComponent=O,mt.StrictMode=r,mt.Suspense=c,mt.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=U,mt.__COMPILER_RUNTIME={__proto__:null,c:function(X){return U.H.useMemoCache(X)}},mt.cache=function(X){return function(){return X.apply(null,arguments)}},mt.cacheSignal=function(){return null},mt.cloneElement=function(X,ue,be){if(X==null)throw Error("The argument must be a React element, but you passed "+X+".");var Ce=A({},X.props),je=X.key;if(ue!=null)for(Ve in ue.key!==void 0&&(je=""+ue.key),ue)!z.call(ue,Ve)||Ve==="key"||Ve==="__self"||Ve==="__source"||Ve==="ref"&&ue.ref===void 0||(Ce[Ve]=ue[Ve]);var Ve=arguments.length-2;if(Ve===1)Ce.children=be;else if(1<Ve){for(var Ze=Array(Ve),It=0;It<Ve;It++)Ze[It]=arguments[It+2];Ce.children=Ze}return B(X.type,je,Ce)},mt.createContext=function(X){return X={$$typeof:s,_currentValue:X,_currentValue2:X,_threadCount:0,Provider:null,Consumer:null},X.Provider=X,X.Consumer={$$typeof:a,_context:X},X},mt.createElement=function(X,ue,be){var Ce,je={},Ve=null;if(ue!=null)for(Ce in ue.key!==void 0&&(Ve=""+ue.key),ue)z.call(ue,Ce)&&Ce!=="key"&&Ce!=="__self"&&Ce!=="__source"&&(je[Ce]=ue[Ce]);var Ze=arguments.length-2;if(Ze===1)je.children=be;else if(1<Ze){for(var It=Array(Ze),Te=0;Te<Ze;Te++)It[Te]=arguments[Te+2];je.children=It}if(X&&X.defaultProps)for(Ce in Ze=X.defaultProps,Ze)je[Ce]===void 0&&(je[Ce]=Ze[Ce]);return B(X,Ve,je)},mt.createRef=function(){return{current:null}},mt.forwardRef=function(X){return{$$typeof:l,render:X}},mt.isValidElement=K,mt.lazy=function(X){return{$$typeof:p,_payload:{_status:-1,_result:X},_init:le}},mt.memo=function(X,ue){return{$$typeof:h,type:X,compare:ue===void 0?null:ue}},mt.startTransition=function(X){var ue=U.T,be={};U.T=be;try{var Ce=X(),je=U.S;je!==null&&je(be,Ce),typeof Ce=="object"&&Ce!==null&&typeof Ce.then=="function"&&Ce.then(H,Ne)}catch(Ve){Ne(Ve)}finally{ue!==null&&be.types!==null&&(ue.types=be.types),U.T=ue}},mt.unstable_useCacheRefresh=function(){return U.H.useCacheRefresh()},mt.use=function(X){return U.H.use(X)},mt.useActionState=function(X,ue,be){return U.H.useActionState(X,ue,be)},mt.useCallback=function(X,ue){return U.H.useCallback(X,ue)},mt.useContext=function(X){return U.H.useContext(X)},mt.useDebugValue=function(){},mt.useDeferredValue=function(X,ue){return U.H.useDeferredValue(X,ue)},mt.useEffect=function(X,ue){return U.H.useEffect(X,ue)},mt.useEffectEvent=function(X){return U.H.useEffectEvent(X)},mt.useId=function(){return U.H.useId()},mt.useImperativeHandle=function(X,ue,be){return U.H.useImperativeHandle(X,ue,be)},mt.useInsertionEffect=function(X,ue){return U.H.useInsertionEffect(X,ue)},mt.useLayoutEffect=function(X,ue){return U.H.useLayoutEffect(X,ue)},mt.useMemo=function(X,ue){return U.H.useMemo(X,ue)},mt.useOptimistic=function(X,ue){return U.H.useOptimistic(X,ue)},mt.useReducer=function(X,ue,be){return U.H.useReducer(X,ue,be)},mt.useRef=function(X){return U.H.useRef(X)},mt.useState=function(X){return U.H.useState(X)},mt.useSyncExternalStore=function(X,ue,be){return U.H.useSyncExternalStore(X,ue,be)},mt.useTransition=function(){return U.H.useTransition()},mt.version="19.2.0",mt}var zR;function Kh(){return zR||(zR=1,dE.exports=Z9()),dE.exports}var N=Kh();const gh=Vo(N),J9=K9({__proto__:null,default:gh},[N]);var fE={exports:{}},tp={},hE={exports:{}},mE={};/**
 * @license React
 * scheduler.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var qR;function Q9(){return qR||(qR=1,(function(t){function e(ee,re){var le=ee.length;ee.push(re);e:for(;0<le;){var Ne=le-1>>>1,Pe=ee[Ne];if(0<i(Pe,re))ee[Ne]=re,ee[le]=Pe,le=Ne;else break e}}function n(ee){return ee.length===0?null:ee[0]}function r(ee){if(ee.length===0)return null;var re=ee[0],le=ee.pop();if(le!==re){ee[0]=le;e:for(var Ne=0,Pe=ee.length,X=Pe>>>1;Ne<X;){var ue=2*(Ne+1)-1,be=ee[ue],Ce=ue+1,je=ee[Ce];if(0>i(be,le))Ce<Pe&&0>i(je,be)?(ee[Ne]=je,ee[Ce]=le,Ne=Ce):(ee[Ne]=be,ee[ue]=le,Ne=ue);else if(Ce<Pe&&0>i(je,le))ee[Ne]=je,ee[Ce]=le,Ne=Ce;else break e}}return re}function i(ee,re){var le=ee.sortIndex-re.sortIndex;return le!==0?le:ee.id-re.id}if(t.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var a=performance;t.unstable_now=function(){return a.now()}}else{var s=Date,l=s.now();t.unstable_now=function(){return s.now()-l}}var c=[],h=[],p=1,g=null,x=3,b=!1,C=!1,A=!1,D=!1,R=typeof setTimeout=="function"?setTimeout:null,j=typeof clearTimeout=="function"?clearTimeout:null,O=typeof setImmediate<"u"?setImmediate:null;function q(ee){for(var re=n(h);re!==null;){if(re.callback===null)r(h);else if(re.startTime<=ee)r(h),re.sortIndex=re.expirationTime,e(c,re);else break;re=n(h)}}function $(ee){if(A=!1,q(ee),!C)if(n(c)!==null)C=!0,H||(H=!0,J());else{var re=n(h);re!==null&&Oe($,re.startTime-ee)}}var H=!1,U=-1,z=5,B=-1;function Z(){return D?!0:!(t.unstable_now()-B<z)}function K(){if(D=!1,H){var ee=t.unstable_now();B=ee;var re=!0;try{e:{C=!1,A&&(A=!1,j(U),U=-1),b=!0;var le=x;try{t:{for(q(ee),g=n(c);g!==null&&!(g.expirationTime>ee&&Z());){var Ne=g.callback;if(typeof Ne=="function"){g.callback=null,x=g.priorityLevel;var Pe=Ne(g.expirationTime<=ee);if(ee=t.unstable_now(),typeof Pe=="function"){g.callback=Pe,q(ee),re=!0;break t}g===n(c)&&r(c),q(ee)}else r(c);g=n(c)}if(g!==null)re=!0;else{var X=n(h);X!==null&&Oe($,X.startTime-ee),re=!1}}break e}finally{g=null,x=le,b=!1}re=void 0}}finally{re?J():H=!1}}}var J;if(typeof O=="function")J=function(){O(K)};else if(typeof MessageChannel<"u"){var G=new MessageChannel,Se=G.port2;G.port1.onmessage=K,J=function(){Se.postMessage(null)}}else J=function(){R(K,0)};function Oe(ee,re){U=R(function(){ee(t.unstable_now())},re)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(ee){ee.callback=null},t.unstable_forceFrameRate=function(ee){0>ee||125<ee?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):z=0<ee?Math.floor(1e3/ee):5},t.unstable_getCurrentPriorityLevel=function(){return x},t.unstable_next=function(ee){switch(x){case 1:case 2:case 3:var re=3;break;default:re=x}var le=x;x=re;try{return ee()}finally{x=le}},t.unstable_requestPaint=function(){D=!0},t.unstable_runWithPriority=function(ee,re){switch(ee){case 1:case 2:case 3:case 4:case 5:break;default:ee=3}var le=x;x=ee;try{return re()}finally{x=le}},t.unstable_scheduleCallback=function(ee,re,le){var Ne=t.unstable_now();switch(typeof le=="object"&&le!==null?(le=le.delay,le=typeof le=="number"&&0<le?Ne+le:Ne):le=Ne,ee){case 1:var Pe=-1;break;case 2:Pe=250;break;case 5:Pe=1073741823;break;case 4:Pe=1e4;break;default:Pe=5e3}return Pe=le+Pe,ee={id:p++,callback:re,priorityLevel:ee,startTime:le,expirationTime:Pe,sortIndex:-1},le>Ne?(ee.sortIndex=le,e(h,ee),n(c)===null&&ee===n(h)&&(A?(j(U),U=-1):A=!0,Oe($,le-Ne))):(ee.sortIndex=Pe,e(c,ee),C||b||(C=!0,H||(H=!0,J()))),ee},t.unstable_shouldYield=Z,t.unstable_wrapCallback=function(ee){var re=x;return function(){var le=x;x=re;try{return ee.apply(this,arguments)}finally{x=le}}}})(mE)),mE}var HR;function X9(){return HR||(HR=1,hE.exports=Q9()),hE.exports}var pE={exports:{}},pi={};/**
 * @license React
 * react-dom.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var GR;function eH(){if(GR)return pi;GR=1;var t=Kh();function e(c){var h="https://react.dev/errors/"+c;if(1<arguments.length){h+="?args[]="+encodeURIComponent(arguments[1]);for(var p=2;p<arguments.length;p++)h+="&args[]="+encodeURIComponent(arguments[p])}return"Minified React error #"+c+"; visit "+h+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function n(){}var r={d:{f:n,r:function(){throw Error(e(522))},D:n,C:n,L:n,m:n,X:n,S:n,M:n},p:0,findDOMNode:null},i=Symbol.for("react.portal");function a(c,h,p){var g=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:i,key:g==null?null:""+g,children:c,containerInfo:h,implementation:p}}var s=t.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function l(c,h){if(c==="font")return"";if(typeof h=="string")return h==="use-credentials"?h:""}return pi.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=r,pi.createPortal=function(c,h){var p=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!h||h.nodeType!==1&&h.nodeType!==9&&h.nodeType!==11)throw Error(e(299));return a(c,h,null,p)},pi.flushSync=function(c){var h=s.T,p=r.p;try{if(s.T=null,r.p=2,c)return c()}finally{s.T=h,r.p=p,r.d.f()}},pi.preconnect=function(c,h){typeof c=="string"&&(h?(h=h.crossOrigin,h=typeof h=="string"?h==="use-credentials"?h:"":void 0):h=null,r.d.C(c,h))},pi.prefetchDNS=function(c){typeof c=="string"&&r.d.D(c)},pi.preinit=function(c,h){if(typeof c=="string"&&h&&typeof h.as=="string"){var p=h.as,g=l(p,h.crossOrigin),x=typeof h.integrity=="string"?h.integrity:void 0,b=typeof h.fetchPriority=="string"?h.fetchPriority:void 0;p==="style"?r.d.S(c,typeof h.precedence=="string"?h.precedence:void 0,{crossOrigin:g,integrity:x,fetchPriority:b}):p==="script"&&r.d.X(c,{crossOrigin:g,integrity:x,fetchPriority:b,nonce:typeof h.nonce=="string"?h.nonce:void 0})}},pi.preinitModule=function(c,h){if(typeof c=="string")if(typeof h=="object"&&h!==null){if(h.as==null||h.as==="script"){var p=l(h.as,h.crossOrigin);r.d.M(c,{crossOrigin:p,integrity:typeof h.integrity=="string"?h.integrity:void 0,nonce:typeof h.nonce=="string"?h.nonce:void 0})}}else h==null&&r.d.M(c)},pi.preload=function(c,h){if(typeof c=="string"&&typeof h=="object"&&h!==null&&typeof h.as=="string"){var p=h.as,g=l(p,h.crossOrigin);r.d.L(c,p,{crossOrigin:g,integrity:typeof h.integrity=="string"?h.integrity:void 0,nonce:typeof h.nonce=="string"?h.nonce:void 0,type:typeof h.type=="string"?h.type:void 0,fetchPriority:typeof h.fetchPriority=="string"?h.fetchPriority:void 0,referrerPolicy:typeof h.referrerPolicy=="string"?h.referrerPolicy:void 0,imageSrcSet:typeof h.imageSrcSet=="string"?h.imageSrcSet:void 0,imageSizes:typeof h.imageSizes=="string"?h.imageSizes:void 0,media:typeof h.media=="string"?h.media:void 0})}},pi.preloadModule=function(c,h){if(typeof c=="string")if(h){var p=l(h.as,h.crossOrigin);r.d.m(c,{as:typeof h.as=="string"&&h.as!=="script"?h.as:void 0,crossOrigin:p,integrity:typeof h.integrity=="string"?h.integrity:void 0})}else r.d.m(c)},pi.requestFormReset=function(c){r.d.r(c)},pi.unstable_batchedUpdates=function(c,h){return c(h)},pi.useFormState=function(c,h,p){return s.H.useFormState(c,h,p)},pi.useFormStatus=function(){return s.H.useHostTransitionStatus()},pi.version="19.2.0",pi}var $R;function Q4(){if($R)return pE.exports;$R=1;function t(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(t)}catch(e){console.error(e)}}return t(),pE.exports=eH(),pE.exports}/**
 * @license React
 * react-dom-client.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var KR;function tH(){if(KR)return tp;KR=1;var t=X9(),e=Kh(),n=Q4();function r(o){var u="https://react.dev/errors/"+o;if(1<arguments.length){u+="?args[]="+encodeURIComponent(arguments[1]);for(var m=2;m<arguments.length;m++)u+="&args[]="+encodeURIComponent(arguments[m])}return"Minified React error #"+o+"; visit "+u+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function i(o){return!(!o||o.nodeType!==1&&o.nodeType!==9&&o.nodeType!==11)}function a(o){var u=o,m=o;if(o.alternate)for(;u.return;)u=u.return;else{o=u;do u=o,(u.flags&4098)!==0&&(m=u.return),o=u.return;while(o)}return u.tag===3?m:null}function s(o){if(o.tag===13){var u=o.memoizedState;if(u===null&&(o=o.alternate,o!==null&&(u=o.memoizedState)),u!==null)return u.dehydrated}return null}function l(o){if(o.tag===31){var u=o.memoizedState;if(u===null&&(o=o.alternate,o!==null&&(u=o.memoizedState)),u!==null)return u.dehydrated}return null}function c(o){if(a(o)!==o)throw Error(r(188))}function h(o){var u=o.alternate;if(!u){if(u=a(o),u===null)throw Error(r(188));return u!==o?null:o}for(var m=o,v=u;;){var S=m.return;if(S===null)break;var I=S.alternate;if(I===null){if(v=S.return,v!==null){m=v;continue}break}if(S.child===I.child){for(I=S.child;I;){if(I===m)return c(S),o;if(I===v)return c(S),u;I=I.sibling}throw Error(r(188))}if(m.return!==v.return)m=S,v=I;else{for(var V=!1,Y=S.child;Y;){if(Y===m){V=!0,m=S,v=I;break}if(Y===v){V=!0,v=S,m=I;break}Y=Y.sibling}if(!V){for(Y=I.child;Y;){if(Y===m){V=!0,m=I,v=S;break}if(Y===v){V=!0,v=I,m=S;break}Y=Y.sibling}if(!V)throw Error(r(189))}}if(m.alternate!==v)throw Error(r(190))}if(m.tag!==3)throw Error(r(188));return m.stateNode.current===m?o:u}function p(o){var u=o.tag;if(u===5||u===26||u===27||u===6)return o;for(o=o.child;o!==null;){if(u=p(o),u!==null)return u;o=o.sibling}return null}var g=Object.assign,x=Symbol.for("react.element"),b=Symbol.for("react.transitional.element"),C=Symbol.for("react.portal"),A=Symbol.for("react.fragment"),D=Symbol.for("react.strict_mode"),R=Symbol.for("react.profiler"),j=Symbol.for("react.consumer"),O=Symbol.for("react.context"),q=Symbol.for("react.forward_ref"),$=Symbol.for("react.suspense"),H=Symbol.for("react.suspense_list"),U=Symbol.for("react.memo"),z=Symbol.for("react.lazy"),B=Symbol.for("react.activity"),Z=Symbol.for("react.memo_cache_sentinel"),K=Symbol.iterator;function J(o){return o===null||typeof o!="object"?null:(o=K&&o[K]||o["@@iterator"],typeof o=="function"?o:null)}var G=Symbol.for("react.client.reference");function Se(o){if(o==null)return null;if(typeof o=="function")return o.$$typeof===G?null:o.displayName||o.name||null;if(typeof o=="string")return o;switch(o){case A:return"Fragment";case R:return"Profiler";case D:return"StrictMode";case $:return"Suspense";case H:return"SuspenseList";case B:return"Activity"}if(typeof o=="object")switch(o.$$typeof){case C:return"Portal";case O:return o.displayName||"Context";case j:return(o._context.displayName||"Context")+".Consumer";case q:var u=o.render;return o=o.displayName,o||(o=u.displayName||u.name||"",o=o!==""?"ForwardRef("+o+")":"ForwardRef"),o;case U:return u=o.displayName||null,u!==null?u:Se(o.type)||"Memo";case z:u=o._payload,o=o._init;try{return Se(o(u))}catch{}}return null}var Oe=Array.isArray,ee=e.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,re=n.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,le={pending:!1,data:null,method:null,action:null},Ne=[],Pe=-1;function X(o){return{current:o}}function ue(o){0>Pe||(o.current=Ne[Pe],Ne[Pe]=null,Pe--)}function be(o,u){Pe++,Ne[Pe]=o.current,o.current=u}var Ce=X(null),je=X(null),Ve=X(null),Ze=X(null);function It(o,u){switch(be(Ve,u),be(je,o),be(Ce,null),u.nodeType){case 9:case 11:o=(o=u.documentElement)&&(o=o.namespaceURI)?lR(o):0;break;default:if(o=u.tagName,u=u.namespaceURI)u=lR(u),o=uR(u,o);else switch(o){case"svg":o=1;break;case"math":o=2;break;default:o=0}}ue(Ce),be(Ce,o)}function Te(){ue(Ce),ue(je),ue(Ve)}function st(o){o.memoizedState!==null&&be(Ze,o);var u=Ce.current,m=uR(u,o.type);u!==m&&(be(je,o),be(Ce,m))}function lt(o){je.current===o&&(ue(Ce),ue(je)),Ze.current===o&&(ue(Ze),Zm._currentValue=le)}var he,gt;function dt(o){if(he===void 0)try{throw Error()}catch(m){var u=m.stack.trim().match(/\n( *(at )?)/);he=u&&u[1]||"",gt=-1<m.stack.indexOf(`
    at`)?" (<anonymous>)":-1<m.stack.indexOf("@")?"@unknown:0:0":""}return`
`+he+o+gt}var yn=!1;function sn(o,u){if(!o||yn)return"";yn=!0;var m=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var v={DetermineComponentFrameRoot:function(){try{if(u){var Re=function(){throw Error()};if(Object.defineProperty(Re.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(Re,[])}catch(_e){var ye=_e}Reflect.construct(o,[],Re)}else{try{Re.call()}catch(_e){ye=_e}o.call(Re.prototype)}}else{try{throw Error()}catch(_e){ye=_e}(Re=o())&&typeof Re.catch=="function"&&Re.catch(function(){})}}catch(_e){if(_e&&ye&&typeof _e.stack=="string")return[_e.stack,ye.stack]}return[null,null]}};v.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var S=Object.getOwnPropertyDescriptor(v.DetermineComponentFrameRoot,"name");S&&S.configurable&&Object.defineProperty(v.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var I=v.DetermineComponentFrameRoot(),V=I[0],Y=I[1];if(V&&Y){var ne=V.split(`
`),me=Y.split(`
`);for(S=v=0;v<ne.length&&!ne[v].includes("DetermineComponentFrameRoot");)v++;for(;S<me.length&&!me[S].includes("DetermineComponentFrameRoot");)S++;if(v===ne.length||S===me.length)for(v=ne.length-1,S=me.length-1;1<=v&&0<=S&&ne[v]!==me[S];)S--;for(;1<=v&&0<=S;v--,S--)if(ne[v]!==me[S]){if(v!==1||S!==1)do if(v--,S--,0>S||ne[v]!==me[S]){var Ae=`
`+ne[v].replace(" at new "," at ");return o.displayName&&Ae.includes("<anonymous>")&&(Ae=Ae.replace("<anonymous>",o.displayName)),Ae}while(1<=v&&0<=S);break}}}finally{yn=!1,Error.prepareStackTrace=m}return(m=o?o.displayName||o.name:"")?dt(m):""}function tr(o,u){switch(o.tag){case 26:case 27:case 5:return dt(o.type);case 16:return dt("Lazy");case 13:return o.child!==u&&u!==null?dt("Suspense Fallback"):dt("Suspense");case 19:return dt("SuspenseList");case 0:case 15:return sn(o.type,!1);case 11:return sn(o.type.render,!1);case 1:return sn(o.type,!0);case 31:return dt("Activity");default:return""}}function jr(o){try{var u="",m=null;do u+=tr(o,m),m=o,o=o.return;while(o);return u}catch(v){return`
Error generating stack: `+v.message+`
`+v.stack}}var In=Object.prototype.hasOwnProperty,Nn=t.unstable_scheduleCallback,qi=t.unstable_cancelCallback,Zl=t.unstable_shouldYield,Ys=t.unstable_requestPaint,Tr=t.unstable_now,xs=t.unstable_getCurrentPriorityLevel,_s=t.unstable_ImmediatePriority,Zs=t.unstable_UserBlockingPriority,pa=t.unstable_NormalPriority,Tc=t.unstable_LowPriority,qo=t.unstable_IdlePriority,Js=t.log,Sc=t.unstable_setDisableYieldValue,Ni=null,$n=null;function si(o){if(typeof Js=="function"&&Sc(o),$n&&typeof $n.setStrictMode=="function")try{$n.setStrictMode(Ni,o)}catch{}}var Pn=Math.clz32?Math.clz32:Ac,bs=Math.log,Ho=Math.LN2;function Ac(o){return o>>>=0,o===0?32:31-(bs(o)/Ho|0)|0}var Hi=256,ws=262144,Dn=4194304;function ga(o){var u=o&42;if(u!==0)return u;switch(o&-o){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:return o&261888;case 262144:case 524288:case 1048576:case 2097152:return o&3932160;case 4194304:case 8388608:case 16777216:case 33554432:return o&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return o}}function ya(o,u,m){var v=o.pendingLanes;if(v===0)return 0;var S=0,I=o.suspendedLanes,V=o.pingedLanes;o=o.warmLanes;var Y=v&134217727;return Y!==0?(v=Y&~I,v!==0?S=ga(v):(V&=Y,V!==0?S=ga(V):m||(m=Y&~o,m!==0&&(S=ga(m))))):(Y=v&~I,Y!==0?S=ga(Y):V!==0?S=ga(V):m||(m=v&~o,m!==0&&(S=ga(m)))),S===0?0:u!==0&&u!==S&&(u&I)===0&&(I=S&-S,m=u&-u,I>=m||I===32&&(m&4194048)!==0)?u:S}function Gi(o,u){return(o.pendingLanes&~(o.suspendedLanes&~o.pingedLanes)&u)===0}function Jd(o,u){switch(o){case 1:case 2:case 4:case 8:case 64:return u+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return u+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function Cc(){var o=Dn;return Dn<<=1,(Dn&62914560)===0&&(Dn=4194304),o}function va(o){for(var u=[],m=0;31>m;m++)u.push(o);return u}function Ka(o,u){o.pendingLanes|=u,u!==268435456&&(o.suspendedLanes=0,o.pingedLanes=0,o.warmLanes=0)}function Qd(o,u,m,v,S,I){var V=o.pendingLanes;o.pendingLanes=m,o.suspendedLanes=0,o.pingedLanes=0,o.warmLanes=0,o.expiredLanes&=m,o.entangledLanes&=m,o.errorRecoveryDisabledLanes&=m,o.shellSuspendCounter=0;var Y=o.entanglements,ne=o.expirationTimes,me=o.hiddenUpdates;for(m=V&~m;0<m;){var Ae=31-Pn(m),Re=1<<Ae;Y[Ae]=0,ne[Ae]=-1;var ye=me[Ae];if(ye!==null)for(me[Ae]=null,Ae=0;Ae<ye.length;Ae++){var _e=ye[Ae];_e!==null&&(_e.lane&=-536870913)}m&=~Re}v!==0&&Qs(o,v,0),I!==0&&S===0&&o.tag!==0&&(o.suspendedLanes|=I&~(V&~u))}function Qs(o,u,m){o.pendingLanes|=u,o.suspendedLanes&=~u;var v=31-Pn(u);o.entangledLanes|=u,o.entanglements[v]=o.entanglements[v]|1073741824|m&261930}function Go(o,u){var m=o.entangledLanes|=u;for(o=o.entanglements;m;){var v=31-Pn(m),S=1<<v;S&u|o[v]&u&&(o[v]|=u),m&=~S}}function xe(o,u){var m=u&-u;return m=(m&42)!==0?1:we(m),(m&(o.suspendedLanes|u))!==0?0:m}function we(o){switch(o){case 2:o=1;break;case 8:o=4;break;case 32:o=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:o=128;break;case 268435456:o=134217728;break;default:o=0}return o}function ae(o){return o&=-o,2<o?8<o?(o&134217727)!==0?32:268435456:8:2}function tt(){var o=re.p;return o!==0?o:(o=window.event,o===void 0?32:RR(o.type))}function Xe(o,u){var m=re.p;try{return re.p=o,u()}finally{re.p=m}}var yt=Math.random().toString(36).slice(2),_t="__reactFiber$"+yt,Jt="__reactProps$"+yt,fr="__reactContainer$"+yt,Kn="__reactEvents$"+yt,Wt="__reactListeners$"+yt,oi="__reactHandles$"+yt,Xs="__reactResources$"+yt,$i="__reactMarker$"+yt;function eo(o){delete o[_t],delete o[Jt],delete o[Kn],delete o[Wt],delete o[oi]}function Pi(o){var u=o[_t];if(u)return u;for(var m=o.parentNode;m;){if(u=m[fr]||m[_t]){if(m=u.alternate,u.child!==null||m!==null&&m.child!==null)for(o=gR(o);o!==null;){if(m=o[_t])return m;o=gR(o)}return u}o=m,m=o.parentNode}return null}function li(o){if(o=o[_t]||o[fr]){var u=o.tag;if(u===5||u===6||u===13||u===31||u===26||u===27||u===3)return o}return null}function nr(o){var u=o.tag;if(u===5||u===26||u===27||u===6)return o.stateNode;throw Error(r(33))}function Ki(o){var u=o[Xs];return u||(u=o[Xs]={hoistableStyles:new Map,hoistableScripts:new Map}),u}function Rn(o){o[$i]=!0}var to=new Set,Sr={};function Wa(o,u){Wi(o,u),Wi(o+"Capture",u)}function Wi(o,u){for(Sr[o]=u,o=0;o<u.length;o++)to.add(u[o])}var Es=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),Jl={},Ql={};function no(o){return In.call(Ql,o)?!0:In.call(Jl,o)?!1:Es.test(o)?Ql[o]=!0:(Jl[o]=!0,!1)}function wt(o,u,m){if(no(u))if(m===null)o.removeAttribute(u);else{switch(typeof m){case"undefined":case"function":case"symbol":o.removeAttribute(u);return;case"boolean":var v=u.toLowerCase().slice(0,5);if(v!=="data-"&&v!=="aria-"){o.removeAttribute(u);return}}o.setAttribute(u,""+m)}}function Tt(o,u,m){if(m===null)o.removeAttribute(u);else{switch(typeof m){case"undefined":case"function":case"symbol":case"boolean":o.removeAttribute(u);return}o.setAttribute(u,""+m)}}function bn(o,u,m,v){if(v===null)o.removeAttribute(m);else{switch(typeof v){case"undefined":case"function":case"symbol":case"boolean":o.removeAttribute(m);return}o.setAttributeNS(u,m,""+v)}}function wn(o){switch(typeof o){case"bigint":case"boolean":case"number":case"string":case"undefined":return o;case"object":return o;default:return""}}function Di(o){var u=o.type;return(o=o.nodeName)&&o.toLowerCase()==="input"&&(u==="checkbox"||u==="radio")}function $o(o,u,m){var v=Object.getOwnPropertyDescriptor(o.constructor.prototype,u);if(!o.hasOwnProperty(u)&&typeof v<"u"&&typeof v.get=="function"&&typeof v.set=="function"){var S=v.get,I=v.set;return Object.defineProperty(o,u,{configurable:!0,get:function(){return S.call(this)},set:function(V){m=""+V,I.call(this,V)}}),Object.defineProperty(o,u,{enumerable:v.enumerable}),{getValue:function(){return m},setValue:function(V){m=""+V},stopTracking:function(){o._valueTracker=null,delete o[u]}}}}function He(o){if(!o._valueTracker){var u=Di(o)?"checked":"value";o._valueTracker=$o(o,u,""+o[u])}}function Qt(o){if(!o)return!1;var u=o._valueTracker;if(!u)return!0;var m=u.getValue(),v="";return o&&(v=Di(o)?o.checked?"true":"false":o.value),o=v,o!==m?(u.setValue(o),!0):!1}function Yi(o){if(o=o||(typeof document<"u"?document:void 0),typeof o>"u")return null;try{return o.activeElement||o.body}catch{return o.body}}var Ya=/[\n"\\]/g;function dn(o){return o.replace(Ya,function(u){return"\\"+u.charCodeAt(0).toString(16)+" "})}function Xl(o,u,m,v,S,I,V,Y){o.name="",V!=null&&typeof V!="function"&&typeof V!="symbol"&&typeof V!="boolean"?o.type=V:o.removeAttribute("type"),u!=null?V==="number"?(u===0&&o.value===""||o.value!=u)&&(o.value=""+wn(u)):o.value!==""+wn(u)&&(o.value=""+wn(u)):V!=="submit"&&V!=="reset"||o.removeAttribute("value"),u!=null?xa(o,V,wn(u)):m!=null?xa(o,V,wn(m)):v!=null&&o.removeAttribute("value"),S==null&&I!=null&&(o.defaultChecked=!!I),S!=null&&(o.checked=S&&typeof S!="function"&&typeof S!="symbol"),Y!=null&&typeof Y!="function"&&typeof Y!="symbol"&&typeof Y!="boolean"?o.name=""+wn(Y):o.removeAttribute("name")}function Ko(o,u,m,v,S,I,V,Y){if(I!=null&&typeof I!="function"&&typeof I!="symbol"&&typeof I!="boolean"&&(o.type=I),u!=null||m!=null){if(!(I!=="submit"&&I!=="reset"||u!=null)){He(o);return}m=m!=null?""+wn(m):"",u=u!=null?""+wn(u):m,Y||u===o.value||(o.value=u),o.defaultValue=u}v=v??S,v=typeof v!="function"&&typeof v!="symbol"&&!!v,o.checked=Y?o.checked:!!v,o.defaultChecked=!!v,V!=null&&typeof V!="function"&&typeof V!="symbol"&&typeof V!="boolean"&&(o.name=V),He(o)}function xa(o,u,m){u==="number"&&Yi(o.ownerDocument)===o||o.defaultValue===""+m||(o.defaultValue=""+m)}function Xt(o,u,m,v){if(o=o.options,u){u={};for(var S=0;S<m.length;S++)u["$"+m[S]]=!0;for(m=0;m<o.length;m++)S=u.hasOwnProperty("$"+o[m].value),o[m].selected!==S&&(o[m].selected=S),S&&v&&(o[m].defaultSelected=!0)}else{for(m=""+wn(m),u=null,S=0;S<o.length;S++){if(o[S].value===m){o[S].selected=!0,v&&(o[S].defaultSelected=!0);return}u!==null||o[S].disabled||(u=o[S])}u!==null&&(u.selected=!0)}}function Za(o,u,m){if(u!=null&&(u=""+wn(u),u!==o.value&&(o.value=u),m==null)){o.defaultValue!==u&&(o.defaultValue=u);return}o.defaultValue=m!=null?""+wn(m):""}function Zi(o,u,m,v){if(u==null){if(v!=null){if(m!=null)throw Error(r(92));if(Oe(v)){if(1<v.length)throw Error(r(93));v=v[0]}m=v}m==null&&(m=""),u=m}m=wn(u),o.defaultValue=m,v=o.textContent,v===m&&v!==""&&v!==null&&(o.value=v),He(o)}function hr(o,u){if(u){var m=o.firstChild;if(m&&m===o.lastChild&&m.nodeType===3){m.nodeValue=u;return}}o.textContent=u}var eu=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function Ts(o,u,m){var v=u.indexOf("--")===0;m==null||typeof m=="boolean"||m===""?v?o.setProperty(u,""):u==="float"?o.cssFloat="":o[u]="":v?o.setProperty(u,m):typeof m!="number"||m===0||eu.has(u)?u==="float"?o.cssFloat=m:o[u]=(""+m).trim():o[u]=m+"px"}function Wo(o,u,m){if(u!=null&&typeof u!="object")throw Error(r(62));if(o=o.style,m!=null){for(var v in m)!m.hasOwnProperty(v)||u!=null&&u.hasOwnProperty(v)||(v.indexOf("--")===0?o.setProperty(v,""):v==="float"?o.cssFloat="":o[v]="");for(var S in u)v=u[S],u.hasOwnProperty(S)&&m[S]!==v&&Ts(o,S,v)}else for(var I in u)u.hasOwnProperty(I)&&Ts(o,I,u[I])}function ro(o){if(o.indexOf("-")===-1)return!1;switch(o){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Yo=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),Ja=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function io(o){return Ja.test(""+o)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":o}function ui(){}var tu=null;function ci(o){return o=o.target||o.srcElement||window,o.correspondingUseElement&&(o=o.correspondingUseElement),o.nodeType===3?o.parentNode:o}var ao=null,at=null;function Lr(o){var u=li(o);if(u&&(o=u.stateNode)){var m=o[Jt]||null;e:switch(o=u.stateNode,u.type){case"input":if(Xl(o,m.value,m.defaultValue,m.defaultValue,m.checked,m.defaultChecked,m.type,m.name),u=m.name,m.type==="radio"&&u!=null){for(m=o;m.parentNode;)m=m.parentNode;for(m=m.querySelectorAll('input[name="'+dn(""+u)+'"][type="radio"]'),u=0;u<m.length;u++){var v=m[u];if(v!==o&&v.form===o.form){var S=v[Jt]||null;if(!S)throw Error(r(90));Xl(v,S.value,S.defaultValue,S.defaultValue,S.checked,S.defaultChecked,S.type,S.name)}}for(u=0;u<m.length;u++)v=m[u],v.form===o.form&&Qt(v)}break e;case"textarea":Za(o,m.value,m.defaultValue);break e;case"select":u=m.value,u!=null&&Xt(o,!!m.multiple,u,!1)}}}var Vt=!1;function Ss(o,u,m){if(Vt)return o(u,m);Vt=!0;try{var v=o(u);return v}finally{if(Vt=!1,(ao!==null||at!==null)&&(Yy(),ao&&(u=ao,o=at,at=ao=null,Lr(u),o)))for(u=0;u<o.length;u++)Lr(o[u])}}function Ri(o,u){var m=o.stateNode;if(m===null)return null;var v=m[Jt]||null;if(v===null)return null;m=v[u];e:switch(u){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(v=!v.disabled)||(o=o.type,v=!(o==="button"||o==="input"||o==="select"||o==="textarea")),o=!v;break e;default:o=!1}if(o)return null;if(m&&typeof m!="function")throw Error(r(231,u,typeof m));return m}var di=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),As=!1;if(di)try{var Nt={};Object.defineProperty(Nt,"passive",{get:function(){As=!0}}),window.addEventListener("test",Nt,Nt),window.removeEventListener("test",Nt,Nt)}catch{As=!1}var Ji=null,Cs=null,En=null;function _a(){if(En)return En;var o,u=Cs,m=u.length,v,S="value"in Ji?Ji.value:Ji.textContent,I=S.length;for(o=0;o<m&&u[o]===S[o];o++);var V=m-o;for(v=1;v<=V&&u[m-v]===S[I-v];v++);return En=S.slice(o,1<v?1-v:void 0)}function so(o){var u=o.keyCode;return"charCode"in o?(o=o.charCode,o===0&&u===13&&(o=13)):o=u,o===10&&(o=13),32<=o||o===13?o:0}function Qa(){return!0}function ba(){return!1}function mr(o){function u(m,v,S,I,V){this._reactName=m,this._targetInst=S,this.type=v,this.nativeEvent=I,this.target=V,this.currentTarget=null;for(var Y in o)o.hasOwnProperty(Y)&&(m=o[Y],this[Y]=m?m(I):I[Y]);return this.isDefaultPrevented=(I.defaultPrevented!=null?I.defaultPrevented:I.returnValue===!1)?Qa:ba,this.isPropagationStopped=ba,this}return g(u.prototype,{preventDefault:function(){this.defaultPrevented=!0;var m=this.nativeEvent;m&&(m.preventDefault?m.preventDefault():typeof m.returnValue!="unknown"&&(m.returnValue=!1),this.isDefaultPrevented=Qa)},stopPropagation:function(){var m=this.nativeEvent;m&&(m.stopPropagation?m.stopPropagation():typeof m.cancelBubble!="unknown"&&(m.cancelBubble=!0),this.isPropagationStopped=Qa)},persist:function(){},isPersistent:Qa}),u}var wa={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(o){return o.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Xa=mr(wa),Is=g({},wa,{view:0,detail:0}),bt=mr(Is),oo,Vr,fi,Zo=g({},Is,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:lo,button:0,buttons:0,relatedTarget:function(o){return o.relatedTarget===void 0?o.fromElement===o.srcElement?o.toElement:o.fromElement:o.relatedTarget},movementX:function(o){return"movementX"in o?o.movementX:(o!==fi&&(fi&&o.type==="mousemove"?(oo=o.screenX-fi.screenX,Vr=o.screenY-fi.screenY):Vr=oo=0,fi=o),oo)},movementY:function(o){return"movementY"in o?o.movementY:Vr}}),Ic=mr(Zo),Ns=g({},Zo,{dataTransfer:0}),Xd=mr(Ns),Nc=g({},Is,{relatedTarget:0}),Jo=mr(Nc),Pc=g({},wa,{animationName:0,elapsedTime:0,pseudoElement:0}),nu=mr(Pc),ru=g({},wa,{clipboardData:function(o){return"clipboardData"in o?o.clipboardData:window.clipboardData}}),ki=mr(ru),ef=g({},wa,{data:0}),Ea=mr(ef),Ta={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},Dc={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Rc={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function iu(o){var u=this.nativeEvent;return u.getModifierState?u.getModifierState(o):(o=Rc[o])?!!u[o]:!1}function lo(){return iu}var Ur=g({},Is,{key:function(o){if(o.key){var u=Ta[o.key]||o.key;if(u!=="Unidentified")return u}return o.type==="keypress"?(o=so(o),o===13?"Enter":String.fromCharCode(o)):o.type==="keydown"||o.type==="keyup"?Dc[o.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:lo,charCode:function(o){return o.type==="keypress"?so(o):0},keyCode:function(o){return o.type==="keydown"||o.type==="keyup"?o.keyCode:0},which:function(o){return o.type==="keypress"?so(o):o.type==="keydown"||o.type==="keyup"?o.keyCode:0}}),kc=mr(Ur),tf=g({},Zo,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Ps=mr(tf),E=g({},Is,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:lo}),k=mr(E),F=g({},wa,{propertyName:0,elapsedTime:0,pseudoElement:0}),Q=mr(F),ce=g({},Zo,{deltaX:function(o){return"deltaX"in o?o.deltaX:"wheelDeltaX"in o?-o.wheelDeltaX:0},deltaY:function(o){return"deltaY"in o?o.deltaY:"wheelDeltaY"in o?-o.wheelDeltaY:"wheelDelta"in o?-o.wheelDelta:0},deltaZ:0,deltaMode:0}),ve=mr(ce),Ue=g({},wa,{newState:0,oldState:0}),ct=mr(Ue),Mt=[9,13,27,32],Ot=di&&"CompositionEvent"in window,fn=null;di&&"documentMode"in document&&(fn=document.documentMode);var Qi=di&&"TextEvent"in window&&!fn,Xi=di&&(!Ot||fn&&8<fn&&11>=fn),Mi=" ",Sa=!1;function Qo(o,u){switch(o){case"keyup":return Mt.indexOf(u.keyCode)!==-1;case"keydown":return u.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Xo(o){return o=o.detail,typeof o=="object"&&"data"in o?o.data:null}var au=!1;function Aa(o,u){switch(o){case"compositionend":return Xo(u);case"keypress":return u.which!==32?null:(Sa=!0,Mi);case"textInput":return o=u.data,o===Mi&&Sa?null:o;default:return null}}function su(o,u){if(au)return o==="compositionend"||!Ot&&Qo(o,u)?(o=_a(),En=Cs=Ji=null,au=!1,o):null;switch(o){case"paste":return null;case"keypress":if(!(u.ctrlKey||u.altKey||u.metaKey)||u.ctrlKey&&u.altKey){if(u.char&&1<u.char.length)return u.char;if(u.which)return String.fromCharCode(u.which)}return null;case"compositionend":return Xi&&u.locale!=="ko"?null:u.data;default:return null}}var Cb={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function es(o){var u=o&&o.nodeName&&o.nodeName.toLowerCase();return u==="input"?!!Cb[o.type]:u==="textarea"}function fy(o,u,m,v){ao?at?at.push(v):at=[v]:ao=v,u=nv(u,"onChange"),0<u.length&&(m=new Xa("onChange","change",null,m,v),o.push({event:m,listeners:u}))}var ts=null,Mc=null;function Oc(o){nR(o,0)}function jc(o){var u=nr(o);if(Qt(u))return o}function Lc(o,u){if(o==="change")return u}var hy=!1;if(di){var ns;if(di){var ou="oninput"in document;if(!ou){var my=document.createElement("div");my.setAttribute("oninput","return;"),ou=typeof my.oninput=="function"}ns=ou}else ns=!1;hy=ns&&(!document.documentMode||9<document.documentMode)}function nf(){ts&&(ts.detachEvent("onpropertychange",py),Mc=ts=null)}function py(o){if(o.propertyName==="value"&&jc(Mc)){var u=[];fy(u,Mc,o,ci(o)),Ss(Oc,u)}}function Ds(o,u,m){o==="focusin"?(nf(),ts=u,Mc=m,ts.attachEvent("onpropertychange",py)):o==="focusout"&&nf()}function Ib(o){if(o==="selectionchange"||o==="keyup"||o==="keydown")return jc(Mc)}function lu(o,u){if(o==="click")return jc(u)}function Nb(o,u){if(o==="input"||o==="change")return jc(u)}function Rs(o,u){return o===u&&(o!==0||1/o===1/u)||o!==o&&u!==u}var Fr=typeof Object.is=="function"?Object.is:Rs;function uu(o,u){if(Fr(o,u))return!0;if(typeof o!="object"||o===null||typeof u!="object"||u===null)return!1;var m=Object.keys(o),v=Object.keys(u);if(m.length!==v.length)return!1;for(v=0;v<m.length;v++){var S=m[v];if(!In.call(u,S)||!Fr(o[S],u[S]))return!1}return!0}function rf(o){for(;o&&o.firstChild;)o=o.firstChild;return o}function Vc(o,u){var m=rf(o);o=0;for(var v;m;){if(m.nodeType===3){if(v=o+m.textContent.length,o<=u&&v>=u)return{node:m,offset:u-o};o=v}e:{for(;m;){if(m.nextSibling){m=m.nextSibling;break e}m=m.parentNode}m=void 0}m=rf(m)}}function af(o,u){return o&&u?o===u?!0:o&&o.nodeType===3?!1:u&&u.nodeType===3?af(o,u.parentNode):"contains"in o?o.contains(u):o.compareDocumentPosition?!!(o.compareDocumentPosition(u)&16):!1:!1}function Uc(o){o=o!=null&&o.ownerDocument!=null&&o.ownerDocument.defaultView!=null?o.ownerDocument.defaultView:window;for(var u=Yi(o.document);u instanceof o.HTMLIFrameElement;){try{var m=typeof u.contentWindow.location.href=="string"}catch{m=!1}if(m)o=u.contentWindow;else break;u=Yi(o.document)}return u}function uo(o){var u=o&&o.nodeName&&o.nodeName.toLowerCase();return u&&(u==="input"&&(o.type==="text"||o.type==="search"||o.type==="tel"||o.type==="url"||o.type==="password")||u==="textarea"||o.contentEditable==="true")}var sf=di&&"documentMode"in document&&11>=document.documentMode,co=null,of=null,Fc=null,cu=!1;function gy(o,u,m){var v=m.window===m?m.document:m.nodeType===9?m:m.ownerDocument;cu||co==null||co!==Yi(v)||(v=co,"selectionStart"in v&&uo(v)?v={start:v.selectionStart,end:v.selectionEnd}:(v=(v.ownerDocument&&v.ownerDocument.defaultView||window).getSelection(),v={anchorNode:v.anchorNode,anchorOffset:v.anchorOffset,focusNode:v.focusNode,focusOffset:v.focusOffset}),Fc&&uu(Fc,v)||(Fc=v,v=nv(of,"onSelect"),0<v.length&&(u=new Xa("onSelect","select",null,u,m),o.push({event:u,listeners:v}),u.target=co)))}function fo(o,u){var m={};return m[o.toLowerCase()]=u.toLowerCase(),m["Webkit"+o]="webkit"+u,m["Moz"+o]="moz"+u,m}var du={animationend:fo("Animation","AnimationEnd"),animationiteration:fo("Animation","AnimationIteration"),animationstart:fo("Animation","AnimationStart"),transitionrun:fo("Transition","TransitionRun"),transitionstart:fo("Transition","TransitionStart"),transitioncancel:fo("Transition","TransitionCancel"),transitionend:fo("Transition","TransitionEnd")},lf={},yy={};di&&(yy=document.createElement("div").style,"AnimationEvent"in window||(delete du.animationend.animation,delete du.animationiteration.animation,delete du.animationstart.animation),"TransitionEvent"in window||delete du.transitionend.transition);function Br(o){if(lf[o])return lf[o];if(!du[o])return o;var u=du[o],m;for(m in u)if(u.hasOwnProperty(m)&&m in yy)return lf[o]=u[m];return o}var Bc=Br("animationend"),vy=Br("animationiteration"),zc=Br("animationstart"),Pb=Br("transitionrun"),xy=Br("transitionstart"),Db=Br("transitioncancel"),fu=Br("transitionend"),_y=new Map,ho="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");ho.push("scrollEnd");function ea(o,u){_y.set(o,u),Wa(u,[o])}var qc=typeof reportError=="function"?reportError:function(o){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var u=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof o=="object"&&o!==null&&typeof o.message=="string"?String(o.message):String(o),error:o});if(!window.dispatchEvent(u))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",o);return}console.error(o)},ta=[],hi=0,uf=0;function Hc(){for(var o=hi,u=uf=hi=0;u<o;){var m=ta[u];ta[u++]=null;var v=ta[u];ta[u++]=null;var S=ta[u];ta[u++]=null;var I=ta[u];if(ta[u++]=null,v!==null&&S!==null){var V=v.pending;V===null?S.next=S:(S.next=V.next,V.next=S),v.pending=S}I!==0&&hu(m,S,I)}}function mo(o,u,m,v){ta[hi++]=o,ta[hi++]=u,ta[hi++]=m,ta[hi++]=v,uf|=v,o.lanes|=v,o=o.alternate,o!==null&&(o.lanes|=v)}function vm(o,u,m,v){return mo(o,u,m,v),Gc(o)}function rs(o,u){return mo(o,null,null,u),Gc(o)}function hu(o,u,m){o.lanes|=m;var v=o.alternate;v!==null&&(v.lanes|=m);for(var S=!1,I=o.return;I!==null;)I.childLanes|=m,v=I.alternate,v!==null&&(v.childLanes|=m),I.tag===22&&(o=I.stateNode,o===null||o._visibility&1||(S=!0)),o=I,I=I.return;return o.tag===3?(I=o.stateNode,S&&u!==null&&(S=31-Pn(m),o=I.hiddenUpdates,v=o[S],v===null?o[S]=[u]:v.push(u),u.lane=m|536870912),I):null}function Gc(o){if(50<qm)throw qm=0,kw=null,Error(r(185));for(var u=o.return;u!==null;)o=u,u=o.return;return o.tag===3?o.stateNode:null}var el={};function Rb(o,u,m,v){this.tag=o,this.key=m,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=u,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=v,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function mi(o,u,m,v){return new Rb(o,u,m,v)}function cf(o){return o=o.prototype,!(!o||!o.isReactComponent)}function is(o,u){var m=o.alternate;return m===null?(m=mi(o.tag,u,o.key,o.mode),m.elementType=o.elementType,m.type=o.type,m.stateNode=o.stateNode,m.alternate=o,o.alternate=m):(m.pendingProps=u,m.type=o.type,m.flags=0,m.subtreeFlags=0,m.deletions=null),m.flags=o.flags&65011712,m.childLanes=o.childLanes,m.lanes=o.lanes,m.child=o.child,m.memoizedProps=o.memoizedProps,m.memoizedState=o.memoizedState,m.updateQueue=o.updateQueue,u=o.dependencies,m.dependencies=u===null?null:{lanes:u.lanes,firstContext:u.firstContext},m.sibling=o.sibling,m.index=o.index,m.ref=o.ref,m.refCleanup=o.refCleanup,m}function xm(o,u){o.flags&=65011714;var m=o.alternate;return m===null?(o.childLanes=0,o.lanes=u,o.child=null,o.subtreeFlags=0,o.memoizedProps=null,o.memoizedState=null,o.updateQueue=null,o.dependencies=null,o.stateNode=null):(o.childLanes=m.childLanes,o.lanes=m.lanes,o.child=m.child,o.subtreeFlags=0,o.deletions=null,o.memoizedProps=m.memoizedProps,o.memoizedState=m.memoizedState,o.updateQueue=m.updateQueue,o.type=m.type,u=m.dependencies,o.dependencies=u===null?null:{lanes:u.lanes,firstContext:u.firstContext}),o}function $c(o,u,m,v,S,I){var V=0;if(v=o,typeof o=="function")cf(o)&&(V=1);else if(typeof o=="string")V=k9(o,m,Ce.current)?26:o==="html"||o==="head"||o==="body"?27:5;else e:switch(o){case B:return o=mi(31,m,u,S),o.elementType=B,o.lanes=I,o;case A:return tl(m.children,S,I,u);case D:V=8,S|=24;break;case R:return o=mi(12,m,u,S|2),o.elementType=R,o.lanes=I,o;case $:return o=mi(13,m,u,S),o.elementType=$,o.lanes=I,o;case H:return o=mi(19,m,u,S),o.elementType=H,o.lanes=I,o;default:if(typeof o=="object"&&o!==null)switch(o.$$typeof){case O:V=10;break e;case j:V=9;break e;case q:V=11;break e;case U:V=14;break e;case z:V=16,v=null;break e}V=29,m=Error(r(130,o===null?"null":typeof o,"")),v=null}return u=mi(V,m,u,S),u.elementType=o,u.type=v,u.lanes=I,u}function tl(o,u,m,v){return o=mi(7,o,v,u),o.lanes=m,o}function df(o,u,m){return o=mi(6,o,null,u),o.lanes=m,o}function _m(o){var u=mi(18,null,null,0);return u.stateNode=o,u}function bm(o,u,m){return u=mi(4,o.children!==null?o.children:[],o.key,u),u.lanes=m,u.stateNode={containerInfo:o.containerInfo,pendingChildren:null,implementation:o.implementation},u}var d=new WeakMap;function y(o,u){if(typeof o=="object"&&o!==null){var m=d.get(o);return m!==void 0?m:(u={value:o,source:u,stack:jr(u)},d.set(o,u),u)}return{value:o,source:u,stack:jr(u)}}var T=[],P=0,M=null,W=0,te=[],oe=0,ge=null,De=1,Fe="";function nt(o,u){T[P++]=W,T[P++]=M,M=o,W=u}function vt(o,u,m){te[oe++]=De,te[oe++]=Fe,te[oe++]=ge,ge=o;var v=De;o=Fe;var S=32-Pn(v)-1;v&=~(1<<S),m+=1;var I=32-Pn(u)+S;if(30<I){var V=S-S%5;I=(v&(1<<V)-1).toString(32),v>>=V,S-=V,De=1<<32-Pn(u)+S|m<<S|v,Fe=I+o}else De=1<<I|m<<S|v,Fe=o}function Ar(o){o.return!==null&&(nt(o,1),vt(o,1,0))}function Wn(o){for(;o===M;)M=T[--P],T[P]=null,W=T[--P],T[P]=null;for(;o===ge;)ge=te[--oe],te[oe]=null,Fe=te[--oe],te[oe]=null,De=te[--oe],te[oe]=null}function Oi(o,u){te[oe++]=De,te[oe++]=Fe,te[oe++]=ge,De=u.id,Fe=u.overflow,ge=o}var Bt=null,zt=null,St=!1,po=null,na=!1,ff=Error(r(519));function go(o){var u=Error(r(418,1<arguments.length&&arguments[1]!==void 0&&arguments[1]?"text":"HTML",""));throw Kc(y(u,o)),ff}function wm(o){var u=o.stateNode,m=o.type,v=o.memoizedProps;switch(u[_t]=o,u[Jt]=v,m){case"dialog":Ct("cancel",u),Ct("close",u);break;case"iframe":case"object":case"embed":Ct("load",u);break;case"video":case"audio":for(m=0;m<Gm.length;m++)Ct(Gm[m],u);break;case"source":Ct("error",u);break;case"img":case"image":case"link":Ct("error",u),Ct("load",u);break;case"details":Ct("toggle",u);break;case"input":Ct("invalid",u),Ko(u,v.value,v.defaultValue,v.checked,v.defaultChecked,v.type,v.name,!0);break;case"select":Ct("invalid",u);break;case"textarea":Ct("invalid",u),Zi(u,v.value,v.defaultValue,v.children)}m=v.children,typeof m!="string"&&typeof m!="number"&&typeof m!="bigint"||u.textContent===""+m||v.suppressHydrationWarning===!0||sR(u.textContent,m)?(v.popover!=null&&(Ct("beforetoggle",u),Ct("toggle",u)),v.onScroll!=null&&Ct("scroll",u),v.onScrollEnd!=null&&Ct("scrollend",u),v.onClick!=null&&(u.onclick=ui),u=!0):u=!1,u||go(o,!0)}function qn(o){for(Bt=o.return;Bt;)switch(Bt.tag){case 5:case 31:case 13:na=!1;return;case 27:case 3:na=!0;return;default:Bt=Bt.return}}function ks(o){if(o!==Bt)return!1;if(!St)return qn(o),St=!0,!1;var u=o.tag,m;if((m=u!==3&&u!==27)&&((m=u===5)&&(m=o.type,m=!(m!=="form"&&m!=="button")||Ww(o.type,o.memoizedProps)),m=!m),m&&zt&&go(o),qn(o),u===13){if(o=o.memoizedState,o=o!==null?o.dehydrated:null,!o)throw Error(r(317));zt=pR(o)}else if(u===31){if(o=o.memoizedState,o=o!==null?o.dehydrated:null,!o)throw Error(r(317));zt=pR(o)}else u===27?(u=zt,Cu(o.type)?(o=Xw,Xw=null,zt=o):zt=u):zt=Bt?ss(o.stateNode.nextSibling):null;return!0}function nl(){zt=Bt=null,St=!1}function Em(){var o=po;return o!==null&&(sa===null?sa=o:sa.push.apply(sa,o),po=null),o}function Kc(o){po===null?po=[o]:po.push(o)}var Wc=X(null),yo=null,Ms=null;function mu(o,u,m){be(Wc,u._currentValue),u._currentValue=m}function rl(o){o._currentValue=Wc.current,ue(Wc)}function kb(o,u,m){for(;o!==null;){var v=o.alternate;if((o.childLanes&u)!==u?(o.childLanes|=u,v!==null&&(v.childLanes|=u)):v!==null&&(v.childLanes&u)!==u&&(v.childLanes|=u),o===m)break;o=o.return}}function Mb(o,u,m,v){var S=o.child;for(S!==null&&(S.return=o);S!==null;){var I=S.dependencies;if(I!==null){var V=S.child;I=I.firstContext;e:for(;I!==null;){var Y=I;I=S;for(var ne=0;ne<u.length;ne++)if(Y.context===u[ne]){I.lanes|=m,Y=I.alternate,Y!==null&&(Y.lanes|=m),kb(I.return,m,o),v||(V=null);break e}I=Y.next}}else if(S.tag===18){if(V=S.return,V===null)throw Error(r(341));V.lanes|=m,I=V.alternate,I!==null&&(I.lanes|=m),kb(V,m,o),V=null}else V=S.child;if(V!==null)V.return=S;else for(V=S;V!==null;){if(V===o){V=null;break}if(S=V.sibling,S!==null){S.return=V.return,V=S;break}V=V.return}S=V}}function hf(o,u,m,v){o=null;for(var S=u,I=!1;S!==null;){if(!I){if((S.flags&524288)!==0)I=!0;else if((S.flags&262144)!==0)break}if(S.tag===10){var V=S.alternate;if(V===null)throw Error(r(387));if(V=V.memoizedProps,V!==null){var Y=S.type;Fr(S.pendingProps.value,V.value)||(o!==null?o.push(Y):o=[Y])}}else if(S===Ze.current){if(V=S.alternate,V===null)throw Error(r(387));V.memoizedState.memoizedState!==S.memoizedState.memoizedState&&(o!==null?o.push(Zm):o=[Zm])}S=S.return}o!==null&&Mb(u,o,m,v),u.flags|=262144}function by(o){for(o=o.firstContext;o!==null;){if(!Fr(o.context._currentValue,o.memoizedValue))return!0;o=o.next}return!1}function Yc(o){yo=o,Ms=null,o=o.dependencies,o!==null&&(o.firstContext=null)}function Jr(o){return GN(yo,o)}function wy(o,u){return yo===null&&Yc(o),GN(o,u)}function GN(o,u){var m=u._currentValue;if(u={context:u,memoizedValue:m,next:null},Ms===null){if(o===null)throw Error(r(308));Ms=u,o.dependencies={lanes:0,firstContext:u},o.flags|=524288}else Ms=Ms.next=u;return m}var N8=typeof AbortController<"u"?AbortController:function(){var o=[],u=this.signal={aborted:!1,addEventListener:function(m,v){o.push(v)}};this.abort=function(){u.aborted=!0,o.forEach(function(m){return m()})}},P8=t.unstable_scheduleCallback,D8=t.unstable_NormalPriority,pr={$$typeof:O,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function Ob(){return{controller:new N8,data:new Map,refCount:0}}function Tm(o){o.refCount--,o.refCount===0&&P8(D8,function(){o.controller.abort()})}var Sm=null,jb=0,mf=0,pf=null;function R8(o,u){if(Sm===null){var m=Sm=[];jb=0,mf=Uw(),pf={status:"pending",value:void 0,then:function(v){m.push(v)}}}return jb++,u.then($N,$N),u}function $N(){if(--jb===0&&Sm!==null){pf!==null&&(pf.status="fulfilled");var o=Sm;Sm=null,mf=0,pf=null;for(var u=0;u<o.length;u++)(0,o[u])()}}function k8(o,u){var m=[],v={status:"pending",value:null,reason:null,then:function(S){m.push(S)}};return o.then(function(){v.status="fulfilled",v.value=u;for(var S=0;S<m.length;S++)(0,m[S])(u)},function(S){for(v.status="rejected",v.reason=S,S=0;S<m.length;S++)(0,m[S])(void 0)}),v}var KN=ee.S;ee.S=function(o,u){PD=Tr(),typeof u=="object"&&u!==null&&typeof u.then=="function"&&R8(o,u),KN!==null&&KN(o,u)};var Zc=X(null);function Lb(){var o=Zc.current;return o!==null?o:hn.pooledCache}function Ey(o,u){u===null?be(Zc,Zc.current):be(Zc,u.pool)}function WN(){var o=Lb();return o===null?null:{parent:pr._currentValue,pool:o}}var gf=Error(r(460)),Vb=Error(r(474)),Ty=Error(r(542)),Sy={then:function(){}};function YN(o){return o=o.status,o==="fulfilled"||o==="rejected"}function ZN(o,u,m){switch(m=o[m],m===void 0?o.push(u):m!==u&&(u.then(ui,ui),u=m),u.status){case"fulfilled":return u.value;case"rejected":throw o=u.reason,QN(o),o;default:if(typeof u.status=="string")u.then(ui,ui);else{if(o=hn,o!==null&&100<o.shellSuspendCounter)throw Error(r(482));o=u,o.status="pending",o.then(function(v){if(u.status==="pending"){var S=u;S.status="fulfilled",S.value=v}},function(v){if(u.status==="pending"){var S=u;S.status="rejected",S.reason=v}})}switch(u.status){case"fulfilled":return u.value;case"rejected":throw o=u.reason,QN(o),o}throw Qc=u,gf}}function Jc(o){try{var u=o._init;return u(o._payload)}catch(m){throw m!==null&&typeof m=="object"&&typeof m.then=="function"?(Qc=m,gf):m}}var Qc=null;function JN(){if(Qc===null)throw Error(r(459));var o=Qc;return Qc=null,o}function QN(o){if(o===gf||o===Ty)throw Error(r(483))}var yf=null,Am=0;function Ay(o){var u=Am;return Am+=1,yf===null&&(yf=[]),ZN(yf,o,u)}function Cm(o,u){u=u.props.ref,o.ref=u!==void 0?u:null}function Cy(o,u){throw u.$$typeof===x?Error(r(525)):(o=Object.prototype.toString.call(u),Error(r(31,o==="[object Object]"?"object with keys {"+Object.keys(u).join(", ")+"}":o)))}function XN(o){function u(se,ie){if(o){var fe=se.deletions;fe===null?(se.deletions=[ie],se.flags|=16):fe.push(ie)}}function m(se,ie){if(!o)return null;for(;ie!==null;)u(se,ie),ie=ie.sibling;return null}function v(se){for(var ie=new Map;se!==null;)se.key!==null?ie.set(se.key,se):ie.set(se.index,se),se=se.sibling;return ie}function S(se,ie){return se=is(se,ie),se.index=0,se.sibling=null,se}function I(se,ie,fe){return se.index=fe,o?(fe=se.alternate,fe!==null?(fe=fe.index,fe<ie?(se.flags|=67108866,ie):fe):(se.flags|=67108866,ie)):(se.flags|=1048576,ie)}function V(se){return o&&se.alternate===null&&(se.flags|=67108866),se}function Y(se,ie,fe,Ie){return ie===null||ie.tag!==6?(ie=df(fe,se.mode,Ie),ie.return=se,ie):(ie=S(ie,fe),ie.return=se,ie)}function ne(se,ie,fe,Ie){var it=fe.type;return it===A?Ae(se,ie,fe.props.children,Ie,fe.key):ie!==null&&(ie.elementType===it||typeof it=="object"&&it!==null&&it.$$typeof===z&&Jc(it)===ie.type)?(ie=S(ie,fe.props),Cm(ie,fe),ie.return=se,ie):(ie=$c(fe.type,fe.key,fe.props,null,se.mode,Ie),Cm(ie,fe),ie.return=se,ie)}function me(se,ie,fe,Ie){return ie===null||ie.tag!==4||ie.stateNode.containerInfo!==fe.containerInfo||ie.stateNode.implementation!==fe.implementation?(ie=bm(fe,se.mode,Ie),ie.return=se,ie):(ie=S(ie,fe.children||[]),ie.return=se,ie)}function Ae(se,ie,fe,Ie,it){return ie===null||ie.tag!==7?(ie=tl(fe,se.mode,Ie,it),ie.return=se,ie):(ie=S(ie,fe),ie.return=se,ie)}function Re(se,ie,fe){if(typeof ie=="string"&&ie!==""||typeof ie=="number"||typeof ie=="bigint")return ie=df(""+ie,se.mode,fe),ie.return=se,ie;if(typeof ie=="object"&&ie!==null){switch(ie.$$typeof){case b:return fe=$c(ie.type,ie.key,ie.props,null,se.mode,fe),Cm(fe,ie),fe.return=se,fe;case C:return ie=bm(ie,se.mode,fe),ie.return=se,ie;case z:return ie=Jc(ie),Re(se,ie,fe)}if(Oe(ie)||J(ie))return ie=tl(ie,se.mode,fe,null),ie.return=se,ie;if(typeof ie.then=="function")return Re(se,Ay(ie),fe);if(ie.$$typeof===O)return Re(se,wy(se,ie),fe);Cy(se,ie)}return null}function ye(se,ie,fe,Ie){var it=ie!==null?ie.key:null;if(typeof fe=="string"&&fe!==""||typeof fe=="number"||typeof fe=="bigint")return it!==null?null:Y(se,ie,""+fe,Ie);if(typeof fe=="object"&&fe!==null){switch(fe.$$typeof){case b:return fe.key===it?ne(se,ie,fe,Ie):null;case C:return fe.key===it?me(se,ie,fe,Ie):null;case z:return fe=Jc(fe),ye(se,ie,fe,Ie)}if(Oe(fe)||J(fe))return it!==null?null:Ae(se,ie,fe,Ie,null);if(typeof fe.then=="function")return ye(se,ie,Ay(fe),Ie);if(fe.$$typeof===O)return ye(se,ie,wy(se,fe),Ie);Cy(se,fe)}return null}function _e(se,ie,fe,Ie,it){if(typeof Ie=="string"&&Ie!==""||typeof Ie=="number"||typeof Ie=="bigint")return se=se.get(fe)||null,Y(ie,se,""+Ie,it);if(typeof Ie=="object"&&Ie!==null){switch(Ie.$$typeof){case b:return se=se.get(Ie.key===null?fe:Ie.key)||null,ne(ie,se,Ie,it);case C:return se=se.get(Ie.key===null?fe:Ie.key)||null,me(ie,se,Ie,it);case z:return Ie=Jc(Ie),_e(se,ie,fe,Ie,it)}if(Oe(Ie)||J(Ie))return se=se.get(fe)||null,Ae(ie,se,Ie,it,null);if(typeof Ie.then=="function")return _e(se,ie,fe,Ay(Ie),it);if(Ie.$$typeof===O)return _e(se,ie,fe,wy(ie,Ie),it);Cy(ie,Ie)}return null}function We(se,ie,fe,Ie){for(var it=null,qt=null,et=ie,xt=ie=0,Dt=null;et!==null&&xt<fe.length;xt++){et.index>xt?(Dt=et,et=null):Dt=et.sibling;var Ht=ye(se,et,fe[xt],Ie);if(Ht===null){et===null&&(et=Dt);break}o&&et&&Ht.alternate===null&&u(se,et),ie=I(Ht,ie,xt),qt===null?it=Ht:qt.sibling=Ht,qt=Ht,et=Dt}if(xt===fe.length)return m(se,et),St&&nt(se,xt),it;if(et===null){for(;xt<fe.length;xt++)et=Re(se,fe[xt],Ie),et!==null&&(ie=I(et,ie,xt),qt===null?it=et:qt.sibling=et,qt=et);return St&&nt(se,xt),it}for(et=v(et);xt<fe.length;xt++)Dt=_e(et,se,xt,fe[xt],Ie),Dt!==null&&(o&&Dt.alternate!==null&&et.delete(Dt.key===null?xt:Dt.key),ie=I(Dt,ie,xt),qt===null?it=Dt:qt.sibling=Dt,qt=Dt);return o&&et.forEach(function(Ru){return u(se,Ru)}),St&&nt(se,xt),it}function ot(se,ie,fe,Ie){if(fe==null)throw Error(r(151));for(var it=null,qt=null,et=ie,xt=ie=0,Dt=null,Ht=fe.next();et!==null&&!Ht.done;xt++,Ht=fe.next()){et.index>xt?(Dt=et,et=null):Dt=et.sibling;var Ru=ye(se,et,Ht.value,Ie);if(Ru===null){et===null&&(et=Dt);break}o&&et&&Ru.alternate===null&&u(se,et),ie=I(Ru,ie,xt),qt===null?it=Ru:qt.sibling=Ru,qt=Ru,et=Dt}if(Ht.done)return m(se,et),St&&nt(se,xt),it;if(et===null){for(;!Ht.done;xt++,Ht=fe.next())Ht=Re(se,Ht.value,Ie),Ht!==null&&(ie=I(Ht,ie,xt),qt===null?it=Ht:qt.sibling=Ht,qt=Ht);return St&&nt(se,xt),it}for(et=v(et);!Ht.done;xt++,Ht=fe.next())Ht=_e(et,se,xt,Ht.value,Ie),Ht!==null&&(o&&Ht.alternate!==null&&et.delete(Ht.key===null?xt:Ht.key),ie=I(Ht,ie,xt),qt===null?it=Ht:qt.sibling=Ht,qt=Ht);return o&&et.forEach(function(H9){return u(se,H9)}),St&&nt(se,xt),it}function un(se,ie,fe,Ie){if(typeof fe=="object"&&fe!==null&&fe.type===A&&fe.key===null&&(fe=fe.props.children),typeof fe=="object"&&fe!==null){switch(fe.$$typeof){case b:e:{for(var it=fe.key;ie!==null;){if(ie.key===it){if(it=fe.type,it===A){if(ie.tag===7){m(se,ie.sibling),Ie=S(ie,fe.props.children),Ie.return=se,se=Ie;break e}}else if(ie.elementType===it||typeof it=="object"&&it!==null&&it.$$typeof===z&&Jc(it)===ie.type){m(se,ie.sibling),Ie=S(ie,fe.props),Cm(Ie,fe),Ie.return=se,se=Ie;break e}m(se,ie);break}else u(se,ie);ie=ie.sibling}fe.type===A?(Ie=tl(fe.props.children,se.mode,Ie,fe.key),Ie.return=se,se=Ie):(Ie=$c(fe.type,fe.key,fe.props,null,se.mode,Ie),Cm(Ie,fe),Ie.return=se,se=Ie)}return V(se);case C:e:{for(it=fe.key;ie!==null;){if(ie.key===it)if(ie.tag===4&&ie.stateNode.containerInfo===fe.containerInfo&&ie.stateNode.implementation===fe.implementation){m(se,ie.sibling),Ie=S(ie,fe.children||[]),Ie.return=se,se=Ie;break e}else{m(se,ie);break}else u(se,ie);ie=ie.sibling}Ie=bm(fe,se.mode,Ie),Ie.return=se,se=Ie}return V(se);case z:return fe=Jc(fe),un(se,ie,fe,Ie)}if(Oe(fe))return We(se,ie,fe,Ie);if(J(fe)){if(it=J(fe),typeof it!="function")throw Error(r(150));return fe=it.call(fe),ot(se,ie,fe,Ie)}if(typeof fe.then=="function")return un(se,ie,Ay(fe),Ie);if(fe.$$typeof===O)return un(se,ie,wy(se,fe),Ie);Cy(se,fe)}return typeof fe=="string"&&fe!==""||typeof fe=="number"||typeof fe=="bigint"?(fe=""+fe,ie!==null&&ie.tag===6?(m(se,ie.sibling),Ie=S(ie,fe),Ie.return=se,se=Ie):(m(se,ie),Ie=df(fe,se.mode,Ie),Ie.return=se,se=Ie),V(se)):m(se,ie)}return function(se,ie,fe,Ie){try{Am=0;var it=un(se,ie,fe,Ie);return yf=null,it}catch(et){if(et===gf||et===Ty)throw et;var qt=mi(29,et,null,se.mode);return qt.lanes=Ie,qt.return=se,qt}finally{}}}var Xc=XN(!0),eP=XN(!1),pu=!1;function Ub(o){o.updateQueue={baseState:o.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function Fb(o,u){o=o.updateQueue,u.updateQueue===o&&(u.updateQueue={baseState:o.baseState,firstBaseUpdate:o.firstBaseUpdate,lastBaseUpdate:o.lastBaseUpdate,shared:o.shared,callbacks:null})}function gu(o){return{lane:o,tag:0,payload:null,callback:null,next:null}}function yu(o,u,m){var v=o.updateQueue;if(v===null)return null;if(v=v.shared,(Yt&2)!==0){var S=v.pending;return S===null?u.next=u:(u.next=S.next,S.next=u),v.pending=u,u=Gc(o),hu(o,null,m),u}return mo(o,v,u,m),Gc(o)}function Im(o,u,m){if(u=u.updateQueue,u!==null&&(u=u.shared,(m&4194048)!==0)){var v=u.lanes;v&=o.pendingLanes,m|=v,u.lanes=m,Go(o,m)}}function Bb(o,u){var m=o.updateQueue,v=o.alternate;if(v!==null&&(v=v.updateQueue,m===v)){var S=null,I=null;if(m=m.firstBaseUpdate,m!==null){do{var V={lane:m.lane,tag:m.tag,payload:m.payload,callback:null,next:null};I===null?S=I=V:I=I.next=V,m=m.next}while(m!==null);I===null?S=I=u:I=I.next=u}else S=I=u;m={baseState:v.baseState,firstBaseUpdate:S,lastBaseUpdate:I,shared:v.shared,callbacks:v.callbacks},o.updateQueue=m;return}o=m.lastBaseUpdate,o===null?m.firstBaseUpdate=u:o.next=u,m.lastBaseUpdate=u}var zb=!1;function Nm(){if(zb){var o=pf;if(o!==null)throw o}}function Pm(o,u,m,v){zb=!1;var S=o.updateQueue;pu=!1;var I=S.firstBaseUpdate,V=S.lastBaseUpdate,Y=S.shared.pending;if(Y!==null){S.shared.pending=null;var ne=Y,me=ne.next;ne.next=null,V===null?I=me:V.next=me,V=ne;var Ae=o.alternate;Ae!==null&&(Ae=Ae.updateQueue,Y=Ae.lastBaseUpdate,Y!==V&&(Y===null?Ae.firstBaseUpdate=me:Y.next=me,Ae.lastBaseUpdate=ne))}if(I!==null){var Re=S.baseState;V=0,Ae=me=ne=null,Y=I;do{var ye=Y.lane&-536870913,_e=ye!==Y.lane;if(_e?(Pt&ye)===ye:(v&ye)===ye){ye!==0&&ye===mf&&(zb=!0),Ae!==null&&(Ae=Ae.next={lane:0,tag:Y.tag,payload:Y.payload,callback:null,next:null});e:{var We=o,ot=Y;ye=u;var un=m;switch(ot.tag){case 1:if(We=ot.payload,typeof We=="function"){Re=We.call(un,Re,ye);break e}Re=We;break e;case 3:We.flags=We.flags&-65537|128;case 0:if(We=ot.payload,ye=typeof We=="function"?We.call(un,Re,ye):We,ye==null)break e;Re=g({},Re,ye);break e;case 2:pu=!0}}ye=Y.callback,ye!==null&&(o.flags|=64,_e&&(o.flags|=8192),_e=S.callbacks,_e===null?S.callbacks=[ye]:_e.push(ye))}else _e={lane:ye,tag:Y.tag,payload:Y.payload,callback:Y.callback,next:null},Ae===null?(me=Ae=_e,ne=Re):Ae=Ae.next=_e,V|=ye;if(Y=Y.next,Y===null){if(Y=S.shared.pending,Y===null)break;_e=Y,Y=_e.next,_e.next=null,S.lastBaseUpdate=_e,S.shared.pending=null}}while(!0);Ae===null&&(ne=Re),S.baseState=ne,S.firstBaseUpdate=me,S.lastBaseUpdate=Ae,I===null&&(S.shared.lanes=0),wu|=V,o.lanes=V,o.memoizedState=Re}}function tP(o,u){if(typeof o!="function")throw Error(r(191,o));o.call(u)}function nP(o,u){var m=o.callbacks;if(m!==null)for(o.callbacks=null,o=0;o<m.length;o++)tP(m[o],u)}var vf=X(null),Iy=X(0);function rP(o,u){o=fl,be(Iy,o),be(vf,u),fl=o|u.baseLanes}function qb(){be(Iy,fl),be(vf,vf.current)}function Hb(){fl=Iy.current,ue(vf),ue(Iy)}var Ca=X(null),as=null;function vu(o){var u=o.alternate;be(rr,rr.current&1),be(Ca,o),as===null&&(u===null||vf.current!==null||u.memoizedState!==null)&&(as=o)}function Gb(o){be(rr,rr.current),be(Ca,o),as===null&&(as=o)}function iP(o){o.tag===22?(be(rr,rr.current),be(Ca,o),as===null&&(as=o)):xu()}function xu(){be(rr,rr.current),be(Ca,Ca.current)}function Ia(o){ue(Ca),as===o&&(as=null),ue(rr)}var rr=X(0);function Ny(o){for(var u=o;u!==null;){if(u.tag===13){var m=u.memoizedState;if(m!==null&&(m=m.dehydrated,m===null||Jw(m)||Qw(m)))return u}else if(u.tag===19&&(u.memoizedProps.revealOrder==="forwards"||u.memoizedProps.revealOrder==="backwards"||u.memoizedProps.revealOrder==="unstable_legacy-backwards"||u.memoizedProps.revealOrder==="together")){if((u.flags&128)!==0)return u}else if(u.child!==null){u.child.return=u,u=u.child;continue}if(u===o)break;for(;u.sibling===null;){if(u.return===null||u.return===o)return null;u=u.return}u.sibling.return=u.return,u=u.sibling}return null}var il=0,pt=null,on=null,gr=null,Py=!1,xf=!1,ed=!1,Dy=0,Dm=0,_f=null,M8=0;function Yn(){throw Error(r(321))}function $b(o,u){if(u===null)return!1;for(var m=0;m<u.length&&m<o.length;m++)if(!Fr(o[m],u[m]))return!1;return!0}function Kb(o,u,m,v,S,I){return il=I,pt=u,u.memoizedState=null,u.updateQueue=null,u.lanes=0,ee.H=o===null||o.memoizedState===null?BP:lw,ed=!1,I=m(v,S),ed=!1,xf&&(I=sP(u,m,v,S)),aP(o),I}function aP(o){ee.H=Mm;var u=on!==null&&on.next!==null;if(il=0,gr=on=pt=null,Py=!1,Dm=0,_f=null,u)throw Error(r(300));o===null||yr||(o=o.dependencies,o!==null&&by(o)&&(yr=!0))}function sP(o,u,m,v){pt=o;var S=0;do{if(xf&&(_f=null),Dm=0,xf=!1,25<=S)throw Error(r(301));if(S+=1,gr=on=null,o.updateQueue!=null){var I=o.updateQueue;I.lastEffect=null,I.events=null,I.stores=null,I.memoCache!=null&&(I.memoCache.index=0)}ee.H=zP,I=u(m,v)}while(xf);return I}function O8(){var o=ee.H,u=o.useState()[0];return u=typeof u.then=="function"?Rm(u):u,o=o.useState()[0],(on!==null?on.memoizedState:null)!==o&&(pt.flags|=1024),u}function Wb(){var o=Dy!==0;return Dy=0,o}function Yb(o,u,m){u.updateQueue=o.updateQueue,u.flags&=-2053,o.lanes&=~m}function Zb(o){if(Py){for(o=o.memoizedState;o!==null;){var u=o.queue;u!==null&&(u.pending=null),o=o.next}Py=!1}il=0,gr=on=pt=null,xf=!1,Dm=Dy=0,_f=null}function ji(){var o={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return gr===null?pt.memoizedState=gr=o:gr=gr.next=o,gr}function ir(){if(on===null){var o=pt.alternate;o=o!==null?o.memoizedState:null}else o=on.next;var u=gr===null?pt.memoizedState:gr.next;if(u!==null)gr=u,on=o;else{if(o===null)throw pt.alternate===null?Error(r(467)):Error(r(310));on=o,o={memoizedState:on.memoizedState,baseState:on.baseState,baseQueue:on.baseQueue,queue:on.queue,next:null},gr===null?pt.memoizedState=gr=o:gr=gr.next=o}return gr}function Ry(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function Rm(o){var u=Dm;return Dm+=1,_f===null&&(_f=[]),o=ZN(_f,o,u),u=pt,(gr===null?u.memoizedState:gr.next)===null&&(u=u.alternate,ee.H=u===null||u.memoizedState===null?BP:lw),o}function ky(o){if(o!==null&&typeof o=="object"){if(typeof o.then=="function")return Rm(o);if(o.$$typeof===O)return Jr(o)}throw Error(r(438,String(o)))}function Jb(o){var u=null,m=pt.updateQueue;if(m!==null&&(u=m.memoCache),u==null){var v=pt.alternate;v!==null&&(v=v.updateQueue,v!==null&&(v=v.memoCache,v!=null&&(u={data:v.data.map(function(S){return S.slice()}),index:0})))}if(u==null&&(u={data:[],index:0}),m===null&&(m=Ry(),pt.updateQueue=m),m.memoCache=u,m=u.data[u.index],m===void 0)for(m=u.data[u.index]=Array(o),v=0;v<o;v++)m[v]=Z;return u.index++,m}function al(o,u){return typeof u=="function"?u(o):u}function My(o){var u=ir();return Qb(u,on,o)}function Qb(o,u,m){var v=o.queue;if(v===null)throw Error(r(311));v.lastRenderedReducer=m;var S=o.baseQueue,I=v.pending;if(I!==null){if(S!==null){var V=S.next;S.next=I.next,I.next=V}u.baseQueue=S=I,v.pending=null}if(I=o.baseState,S===null)o.memoizedState=I;else{u=S.next;var Y=V=null,ne=null,me=u,Ae=!1;do{var Re=me.lane&-536870913;if(Re!==me.lane?(Pt&Re)===Re:(il&Re)===Re){var ye=me.revertLane;if(ye===0)ne!==null&&(ne=ne.next={lane:0,revertLane:0,gesture:null,action:me.action,hasEagerState:me.hasEagerState,eagerState:me.eagerState,next:null}),Re===mf&&(Ae=!0);else if((il&ye)===ye){me=me.next,ye===mf&&(Ae=!0);continue}else Re={lane:0,revertLane:me.revertLane,gesture:null,action:me.action,hasEagerState:me.hasEagerState,eagerState:me.eagerState,next:null},ne===null?(Y=ne=Re,V=I):ne=ne.next=Re,pt.lanes|=ye,wu|=ye;Re=me.action,ed&&m(I,Re),I=me.hasEagerState?me.eagerState:m(I,Re)}else ye={lane:Re,revertLane:me.revertLane,gesture:me.gesture,action:me.action,hasEagerState:me.hasEagerState,eagerState:me.eagerState,next:null},ne===null?(Y=ne=ye,V=I):ne=ne.next=ye,pt.lanes|=Re,wu|=Re;me=me.next}while(me!==null&&me!==u);if(ne===null?V=I:ne.next=Y,!Fr(I,o.memoizedState)&&(yr=!0,Ae&&(m=pf,m!==null)))throw m;o.memoizedState=I,o.baseState=V,o.baseQueue=ne,v.lastRenderedState=I}return S===null&&(v.lanes=0),[o.memoizedState,v.dispatch]}function Xb(o){var u=ir(),m=u.queue;if(m===null)throw Error(r(311));m.lastRenderedReducer=o;var v=m.dispatch,S=m.pending,I=u.memoizedState;if(S!==null){m.pending=null;var V=S=S.next;do I=o(I,V.action),V=V.next;while(V!==S);Fr(I,u.memoizedState)||(yr=!0),u.memoizedState=I,u.baseQueue===null&&(u.baseState=I),m.lastRenderedState=I}return[I,v]}function oP(o,u,m){var v=pt,S=ir(),I=St;if(I){if(m===void 0)throw Error(r(407));m=m()}else m=u();var V=!Fr((on||S).memoizedState,m);if(V&&(S.memoizedState=m,yr=!0),S=S.queue,nw(cP.bind(null,v,S,o),[o]),S.getSnapshot!==u||V||gr!==null&&gr.memoizedState.tag&1){if(v.flags|=2048,bf(9,{destroy:void 0},uP.bind(null,v,S,m,u),null),hn===null)throw Error(r(349));I||(il&127)!==0||lP(v,u,m)}return m}function lP(o,u,m){o.flags|=16384,o={getSnapshot:u,value:m},u=pt.updateQueue,u===null?(u=Ry(),pt.updateQueue=u,u.stores=[o]):(m=u.stores,m===null?u.stores=[o]:m.push(o))}function uP(o,u,m,v){u.value=m,u.getSnapshot=v,dP(u)&&fP(o)}function cP(o,u,m){return m(function(){dP(u)&&fP(o)})}function dP(o){var u=o.getSnapshot;o=o.value;try{var m=u();return!Fr(o,m)}catch{return!0}}function fP(o){var u=rs(o,2);u!==null&&oa(u,o,2)}function ew(o){var u=ji();if(typeof o=="function"){var m=o;if(o=m(),ed){si(!0);try{m()}finally{si(!1)}}}return u.memoizedState=u.baseState=o,u.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:al,lastRenderedState:o},u}function hP(o,u,m,v){return o.baseState=m,Qb(o,on,typeof v=="function"?v:al)}function j8(o,u,m,v,S){if(Ly(o))throw Error(r(485));if(o=u.action,o!==null){var I={payload:S,action:o,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(V){I.listeners.push(V)}};ee.T!==null?m(!0):I.isTransition=!1,v(I),m=u.pending,m===null?(I.next=u.pending=I,mP(u,I)):(I.next=m.next,u.pending=m.next=I)}}function mP(o,u){var m=u.action,v=u.payload,S=o.state;if(u.isTransition){var I=ee.T,V={};ee.T=V;try{var Y=m(S,v),ne=ee.S;ne!==null&&ne(V,Y),pP(o,u,Y)}catch(me){tw(o,u,me)}finally{I!==null&&V.types!==null&&(I.types=V.types),ee.T=I}}else try{I=m(S,v),pP(o,u,I)}catch(me){tw(o,u,me)}}function pP(o,u,m){m!==null&&typeof m=="object"&&typeof m.then=="function"?m.then(function(v){gP(o,u,v)},function(v){return tw(o,u,v)}):gP(o,u,m)}function gP(o,u,m){u.status="fulfilled",u.value=m,yP(u),o.state=m,u=o.pending,u!==null&&(m=u.next,m===u?o.pending=null:(m=m.next,u.next=m,mP(o,m)))}function tw(o,u,m){var v=o.pending;if(o.pending=null,v!==null){v=v.next;do u.status="rejected",u.reason=m,yP(u),u=u.next;while(u!==v)}o.action=null}function yP(o){o=o.listeners;for(var u=0;u<o.length;u++)(0,o[u])()}function vP(o,u){return u}function xP(o,u){if(St){var m=hn.formState;if(m!==null){e:{var v=pt;if(St){if(zt){t:{for(var S=zt,I=na;S.nodeType!==8;){if(!I){S=null;break t}if(S=ss(S.nextSibling),S===null){S=null;break t}}I=S.data,S=I==="F!"||I==="F"?S:null}if(S){zt=ss(S.nextSibling),v=S.data==="F!";break e}}go(v)}v=!1}v&&(u=m[0])}}return m=ji(),m.memoizedState=m.baseState=u,v={pending:null,lanes:0,dispatch:null,lastRenderedReducer:vP,lastRenderedState:u},m.queue=v,m=VP.bind(null,pt,v),v.dispatch=m,v=ew(!1),I=ow.bind(null,pt,!1,v.queue),v=ji(),S={state:u,dispatch:null,action:o,pending:null},v.queue=S,m=j8.bind(null,pt,S,I,m),S.dispatch=m,v.memoizedState=o,[u,m,!1]}function _P(o){var u=ir();return bP(u,on,o)}function bP(o,u,m){if(u=Qb(o,u,vP)[0],o=My(al)[0],typeof u=="object"&&u!==null&&typeof u.then=="function")try{var v=Rm(u)}catch(V){throw V===gf?Ty:V}else v=u;u=ir();var S=u.queue,I=S.dispatch;return m!==u.memoizedState&&(pt.flags|=2048,bf(9,{destroy:void 0},L8.bind(null,S,m),null)),[v,I,o]}function L8(o,u){o.action=u}function wP(o){var u=ir(),m=on;if(m!==null)return bP(u,m,o);ir(),u=u.memoizedState,m=ir();var v=m.queue.dispatch;return m.memoizedState=o,[u,v,!1]}function bf(o,u,m,v){return o={tag:o,create:m,deps:v,inst:u,next:null},u=pt.updateQueue,u===null&&(u=Ry(),pt.updateQueue=u),m=u.lastEffect,m===null?u.lastEffect=o.next=o:(v=m.next,m.next=o,o.next=v,u.lastEffect=o),o}function EP(){return ir().memoizedState}function Oy(o,u,m,v){var S=ji();pt.flags|=o,S.memoizedState=bf(1|u,{destroy:void 0},m,v===void 0?null:v)}function jy(o,u,m,v){var S=ir();v=v===void 0?null:v;var I=S.memoizedState.inst;on!==null&&v!==null&&$b(v,on.memoizedState.deps)?S.memoizedState=bf(u,I,m,v):(pt.flags|=o,S.memoizedState=bf(1|u,I,m,v))}function TP(o,u){Oy(8390656,8,o,u)}function nw(o,u){jy(2048,8,o,u)}function V8(o){pt.flags|=4;var u=pt.updateQueue;if(u===null)u=Ry(),pt.updateQueue=u,u.events=[o];else{var m=u.events;m===null?u.events=[o]:m.push(o)}}function SP(o){var u=ir().memoizedState;return V8({ref:u,nextImpl:o}),function(){if((Yt&2)!==0)throw Error(r(440));return u.impl.apply(void 0,arguments)}}function AP(o,u){return jy(4,2,o,u)}function CP(o,u){return jy(4,4,o,u)}function IP(o,u){if(typeof u=="function"){o=o();var m=u(o);return function(){typeof m=="function"?m():u(null)}}if(u!=null)return o=o(),u.current=o,function(){u.current=null}}function NP(o,u,m){m=m!=null?m.concat([o]):null,jy(4,4,IP.bind(null,u,o),m)}function rw(){}function PP(o,u){var m=ir();u=u===void 0?null:u;var v=m.memoizedState;return u!==null&&$b(u,v[1])?v[0]:(m.memoizedState=[o,u],o)}function DP(o,u){var m=ir();u=u===void 0?null:u;var v=m.memoizedState;if(u!==null&&$b(u,v[1]))return v[0];if(v=o(),ed){si(!0);try{o()}finally{si(!1)}}return m.memoizedState=[v,u],v}function iw(o,u,m){return m===void 0||(il&1073741824)!==0&&(Pt&261930)===0?o.memoizedState=u:(o.memoizedState=m,o=RD(),pt.lanes|=o,wu|=o,m)}function RP(o,u,m,v){return Fr(m,u)?m:vf.current!==null?(o=iw(o,m,v),Fr(o,u)||(yr=!0),o):(il&42)===0||(il&1073741824)!==0&&(Pt&261930)===0?(yr=!0,o.memoizedState=m):(o=RD(),pt.lanes|=o,wu|=o,u)}function kP(o,u,m,v,S){var I=re.p;re.p=I!==0&&8>I?I:8;var V=ee.T,Y={};ee.T=Y,ow(o,!1,u,m);try{var ne=S(),me=ee.S;if(me!==null&&me(Y,ne),ne!==null&&typeof ne=="object"&&typeof ne.then=="function"){var Ae=k8(ne,v);km(o,u,Ae,Da(o))}else km(o,u,v,Da(o))}catch(Re){km(o,u,{then:function(){},status:"rejected",reason:Re},Da())}finally{re.p=I,V!==null&&Y.types!==null&&(V.types=Y.types),ee.T=V}}function U8(){}function aw(o,u,m,v){if(o.tag!==5)throw Error(r(476));var S=MP(o).queue;kP(o,S,u,le,m===null?U8:function(){return OP(o),m(v)})}function MP(o){var u=o.memoizedState;if(u!==null)return u;u={memoizedState:le,baseState:le,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:al,lastRenderedState:le},next:null};var m={};return u.next={memoizedState:m,baseState:m,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:al,lastRenderedState:m},next:null},o.memoizedState=u,o=o.alternate,o!==null&&(o.memoizedState=u),u}function OP(o){var u=MP(o);u.next===null&&(u=o.alternate.memoizedState),km(o,u.next.queue,{},Da())}function sw(){return Jr(Zm)}function jP(){return ir().memoizedState}function LP(){return ir().memoizedState}function F8(o){for(var u=o.return;u!==null;){switch(u.tag){case 24:case 3:var m=Da();o=gu(m);var v=yu(u,o,m);v!==null&&(oa(v,u,m),Im(v,u,m)),u={cache:Ob()},o.payload=u;return}u=u.return}}function B8(o,u,m){var v=Da();m={lane:v,revertLane:0,gesture:null,action:m,hasEagerState:!1,eagerState:null,next:null},Ly(o)?UP(u,m):(m=vm(o,u,m,v),m!==null&&(oa(m,o,v),FP(m,u,v)))}function VP(o,u,m){var v=Da();km(o,u,m,v)}function km(o,u,m,v){var S={lane:v,revertLane:0,gesture:null,action:m,hasEagerState:!1,eagerState:null,next:null};if(Ly(o))UP(u,S);else{var I=o.alternate;if(o.lanes===0&&(I===null||I.lanes===0)&&(I=u.lastRenderedReducer,I!==null))try{var V=u.lastRenderedState,Y=I(V,m);if(S.hasEagerState=!0,S.eagerState=Y,Fr(Y,V))return mo(o,u,S,0),hn===null&&Hc(),!1}catch{}finally{}if(m=vm(o,u,S,v),m!==null)return oa(m,o,v),FP(m,u,v),!0}return!1}function ow(o,u,m,v){if(v={lane:2,revertLane:Uw(),gesture:null,action:v,hasEagerState:!1,eagerState:null,next:null},Ly(o)){if(u)throw Error(r(479))}else u=vm(o,m,v,2),u!==null&&oa(u,o,2)}function Ly(o){var u=o.alternate;return o===pt||u!==null&&u===pt}function UP(o,u){xf=Py=!0;var m=o.pending;m===null?u.next=u:(u.next=m.next,m.next=u),o.pending=u}function FP(o,u,m){if((m&4194048)!==0){var v=u.lanes;v&=o.pendingLanes,m|=v,u.lanes=m,Go(o,m)}}var Mm={readContext:Jr,use:ky,useCallback:Yn,useContext:Yn,useEffect:Yn,useImperativeHandle:Yn,useLayoutEffect:Yn,useInsertionEffect:Yn,useMemo:Yn,useReducer:Yn,useRef:Yn,useState:Yn,useDebugValue:Yn,useDeferredValue:Yn,useTransition:Yn,useSyncExternalStore:Yn,useId:Yn,useHostTransitionStatus:Yn,useFormState:Yn,useActionState:Yn,useOptimistic:Yn,useMemoCache:Yn,useCacheRefresh:Yn};Mm.useEffectEvent=Yn;var BP={readContext:Jr,use:ky,useCallback:function(o,u){return ji().memoizedState=[o,u===void 0?null:u],o},useContext:Jr,useEffect:TP,useImperativeHandle:function(o,u,m){m=m!=null?m.concat([o]):null,Oy(4194308,4,IP.bind(null,u,o),m)},useLayoutEffect:function(o,u){return Oy(4194308,4,o,u)},useInsertionEffect:function(o,u){Oy(4,2,o,u)},useMemo:function(o,u){var m=ji();u=u===void 0?null:u;var v=o();if(ed){si(!0);try{o()}finally{si(!1)}}return m.memoizedState=[v,u],v},useReducer:function(o,u,m){var v=ji();if(m!==void 0){var S=m(u);if(ed){si(!0);try{m(u)}finally{si(!1)}}}else S=u;return v.memoizedState=v.baseState=S,o={pending:null,lanes:0,dispatch:null,lastRenderedReducer:o,lastRenderedState:S},v.queue=o,o=o.dispatch=B8.bind(null,pt,o),[v.memoizedState,o]},useRef:function(o){var u=ji();return o={current:o},u.memoizedState=o},useState:function(o){o=ew(o);var u=o.queue,m=VP.bind(null,pt,u);return u.dispatch=m,[o.memoizedState,m]},useDebugValue:rw,useDeferredValue:function(o,u){var m=ji();return iw(m,o,u)},useTransition:function(){var o=ew(!1);return o=kP.bind(null,pt,o.queue,!0,!1),ji().memoizedState=o,[!1,o]},useSyncExternalStore:function(o,u,m){var v=pt,S=ji();if(St){if(m===void 0)throw Error(r(407));m=m()}else{if(m=u(),hn===null)throw Error(r(349));(Pt&127)!==0||lP(v,u,m)}S.memoizedState=m;var I={value:m,getSnapshot:u};return S.queue=I,TP(cP.bind(null,v,I,o),[o]),v.flags|=2048,bf(9,{destroy:void 0},uP.bind(null,v,I,m,u),null),m},useId:function(){var o=ji(),u=hn.identifierPrefix;if(St){var m=Fe,v=De;m=(v&~(1<<32-Pn(v)-1)).toString(32)+m,u="_"+u+"R_"+m,m=Dy++,0<m&&(u+="H"+m.toString(32)),u+="_"}else m=M8++,u="_"+u+"r_"+m.toString(32)+"_";return o.memoizedState=u},useHostTransitionStatus:sw,useFormState:xP,useActionState:xP,useOptimistic:function(o){var u=ji();u.memoizedState=u.baseState=o;var m={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return u.queue=m,u=ow.bind(null,pt,!0,m),m.dispatch=u,[o,u]},useMemoCache:Jb,useCacheRefresh:function(){return ji().memoizedState=F8.bind(null,pt)},useEffectEvent:function(o){var u=ji(),m={impl:o};return u.memoizedState=m,function(){if((Yt&2)!==0)throw Error(r(440));return m.impl.apply(void 0,arguments)}}},lw={readContext:Jr,use:ky,useCallback:PP,useContext:Jr,useEffect:nw,useImperativeHandle:NP,useInsertionEffect:AP,useLayoutEffect:CP,useMemo:DP,useReducer:My,useRef:EP,useState:function(){return My(al)},useDebugValue:rw,useDeferredValue:function(o,u){var m=ir();return RP(m,on.memoizedState,o,u)},useTransition:function(){var o=My(al)[0],u=ir().memoizedState;return[typeof o=="boolean"?o:Rm(o),u]},useSyncExternalStore:oP,useId:jP,useHostTransitionStatus:sw,useFormState:_P,useActionState:_P,useOptimistic:function(o,u){var m=ir();return hP(m,on,o,u)},useMemoCache:Jb,useCacheRefresh:LP};lw.useEffectEvent=SP;var zP={readContext:Jr,use:ky,useCallback:PP,useContext:Jr,useEffect:nw,useImperativeHandle:NP,useInsertionEffect:AP,useLayoutEffect:CP,useMemo:DP,useReducer:Xb,useRef:EP,useState:function(){return Xb(al)},useDebugValue:rw,useDeferredValue:function(o,u){var m=ir();return on===null?iw(m,o,u):RP(m,on.memoizedState,o,u)},useTransition:function(){var o=Xb(al)[0],u=ir().memoizedState;return[typeof o=="boolean"?o:Rm(o),u]},useSyncExternalStore:oP,useId:jP,useHostTransitionStatus:sw,useFormState:wP,useActionState:wP,useOptimistic:function(o,u){var m=ir();return on!==null?hP(m,on,o,u):(m.baseState=o,[o,m.queue.dispatch])},useMemoCache:Jb,useCacheRefresh:LP};zP.useEffectEvent=SP;function uw(o,u,m,v){u=o.memoizedState,m=m(v,u),m=m==null?u:g({},u,m),o.memoizedState=m,o.lanes===0&&(o.updateQueue.baseState=m)}var cw={enqueueSetState:function(o,u,m){o=o._reactInternals;var v=Da(),S=gu(v);S.payload=u,m!=null&&(S.callback=m),u=yu(o,S,v),u!==null&&(oa(u,o,v),Im(u,o,v))},enqueueReplaceState:function(o,u,m){o=o._reactInternals;var v=Da(),S=gu(v);S.tag=1,S.payload=u,m!=null&&(S.callback=m),u=yu(o,S,v),u!==null&&(oa(u,o,v),Im(u,o,v))},enqueueForceUpdate:function(o,u){o=o._reactInternals;var m=Da(),v=gu(m);v.tag=2,u!=null&&(v.callback=u),u=yu(o,v,m),u!==null&&(oa(u,o,m),Im(u,o,m))}};function qP(o,u,m,v,S,I,V){return o=o.stateNode,typeof o.shouldComponentUpdate=="function"?o.shouldComponentUpdate(v,I,V):u.prototype&&u.prototype.isPureReactComponent?!uu(m,v)||!uu(S,I):!0}function HP(o,u,m,v){o=u.state,typeof u.componentWillReceiveProps=="function"&&u.componentWillReceiveProps(m,v),typeof u.UNSAFE_componentWillReceiveProps=="function"&&u.UNSAFE_componentWillReceiveProps(m,v),u.state!==o&&cw.enqueueReplaceState(u,u.state,null)}function td(o,u){var m=u;if("ref"in u){m={};for(var v in u)v!=="ref"&&(m[v]=u[v])}if(o=o.defaultProps){m===u&&(m=g({},m));for(var S in o)m[S]===void 0&&(m[S]=o[S])}return m}function GP(o){qc(o)}function $P(o){console.error(o)}function KP(o){qc(o)}function Vy(o,u){try{var m=o.onUncaughtError;m(u.value,{componentStack:u.stack})}catch(v){setTimeout(function(){throw v})}}function WP(o,u,m){try{var v=o.onCaughtError;v(m.value,{componentStack:m.stack,errorBoundary:u.tag===1?u.stateNode:null})}catch(S){setTimeout(function(){throw S})}}function dw(o,u,m){return m=gu(m),m.tag=3,m.payload={element:null},m.callback=function(){Vy(o,u)},m}function YP(o){return o=gu(o),o.tag=3,o}function ZP(o,u,m,v){var S=m.type.getDerivedStateFromError;if(typeof S=="function"){var I=v.value;o.payload=function(){return S(I)},o.callback=function(){WP(u,m,v)}}var V=m.stateNode;V!==null&&typeof V.componentDidCatch=="function"&&(o.callback=function(){WP(u,m,v),typeof S!="function"&&(Eu===null?Eu=new Set([this]):Eu.add(this));var Y=v.stack;this.componentDidCatch(v.value,{componentStack:Y!==null?Y:""})})}function z8(o,u,m,v,S){if(m.flags|=32768,v!==null&&typeof v=="object"&&typeof v.then=="function"){if(u=m.alternate,u!==null&&hf(u,m,S,!0),m=Ca.current,m!==null){switch(m.tag){case 31:case 13:return as===null?Zy():m.alternate===null&&Zn===0&&(Zn=3),m.flags&=-257,m.flags|=65536,m.lanes=S,v===Sy?m.flags|=16384:(u=m.updateQueue,u===null?m.updateQueue=new Set([v]):u.add(v),jw(o,v,S)),!1;case 22:return m.flags|=65536,v===Sy?m.flags|=16384:(u=m.updateQueue,u===null?(u={transitions:null,markerInstances:null,retryQueue:new Set([v])},m.updateQueue=u):(m=u.retryQueue,m===null?u.retryQueue=new Set([v]):m.add(v)),jw(o,v,S)),!1}throw Error(r(435,m.tag))}return jw(o,v,S),Zy(),!1}if(St)return u=Ca.current,u!==null?((u.flags&65536)===0&&(u.flags|=256),u.flags|=65536,u.lanes=S,v!==ff&&(o=Error(r(422),{cause:v}),Kc(y(o,m)))):(v!==ff&&(u=Error(r(423),{cause:v}),Kc(y(u,m))),o=o.current.alternate,o.flags|=65536,S&=-S,o.lanes|=S,v=y(v,m),S=dw(o.stateNode,v,S),Bb(o,S),Zn!==4&&(Zn=2)),!1;var I=Error(r(520),{cause:v});if(I=y(I,m),zm===null?zm=[I]:zm.push(I),Zn!==4&&(Zn=2),u===null)return!0;v=y(v,m),m=u;do{switch(m.tag){case 3:return m.flags|=65536,o=S&-S,m.lanes|=o,o=dw(m.stateNode,v,o),Bb(m,o),!1;case 1:if(u=m.type,I=m.stateNode,(m.flags&128)===0&&(typeof u.getDerivedStateFromError=="function"||I!==null&&typeof I.componentDidCatch=="function"&&(Eu===null||!Eu.has(I))))return m.flags|=65536,S&=-S,m.lanes|=S,S=YP(S),ZP(S,o,m,v),Bb(m,S),!1}m=m.return}while(m!==null);return!1}var fw=Error(r(461)),yr=!1;function Qr(o,u,m,v){u.child=o===null?eP(u,null,m,v):Xc(u,o.child,m,v)}function JP(o,u,m,v,S){m=m.render;var I=u.ref;if("ref"in v){var V={};for(var Y in v)Y!=="ref"&&(V[Y]=v[Y])}else V=v;return Yc(u),v=Kb(o,u,m,V,I,S),Y=Wb(),o!==null&&!yr?(Yb(o,u,S),sl(o,u,S)):(St&&Y&&Ar(u),u.flags|=1,Qr(o,u,v,S),u.child)}function QP(o,u,m,v,S){if(o===null){var I=m.type;return typeof I=="function"&&!cf(I)&&I.defaultProps===void 0&&m.compare===null?(u.tag=15,u.type=I,XP(o,u,I,v,S)):(o=$c(m.type,null,v,u,u.mode,S),o.ref=u.ref,o.return=u,u.child=o)}if(I=o.child,!_w(o,S)){var V=I.memoizedProps;if(m=m.compare,m=m!==null?m:uu,m(V,v)&&o.ref===u.ref)return sl(o,u,S)}return u.flags|=1,o=is(I,v),o.ref=u.ref,o.return=u,u.child=o}function XP(o,u,m,v,S){if(o!==null){var I=o.memoizedProps;if(uu(I,v)&&o.ref===u.ref)if(yr=!1,u.pendingProps=v=I,_w(o,S))(o.flags&131072)!==0&&(yr=!0);else return u.lanes=o.lanes,sl(o,u,S)}return hw(o,u,m,v,S)}function eD(o,u,m,v){var S=v.children,I=o!==null?o.memoizedState:null;if(o===null&&u.stateNode===null&&(u.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),v.mode==="hidden"){if((u.flags&128)!==0){if(I=I!==null?I.baseLanes|m:m,o!==null){for(v=u.child=o.child,S=0;v!==null;)S=S|v.lanes|v.childLanes,v=v.sibling;v=S&~I}else v=0,u.child=null;return tD(o,u,I,m,v)}if((m&536870912)!==0)u.memoizedState={baseLanes:0,cachePool:null},o!==null&&Ey(u,I!==null?I.cachePool:null),I!==null?rP(u,I):qb(),iP(u);else return v=u.lanes=536870912,tD(o,u,I!==null?I.baseLanes|m:m,m,v)}else I!==null?(Ey(u,I.cachePool),rP(u,I),xu(),u.memoizedState=null):(o!==null&&Ey(u,null),qb(),xu());return Qr(o,u,S,m),u.child}function Om(o,u){return o!==null&&o.tag===22||u.stateNode!==null||(u.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),u.sibling}function tD(o,u,m,v,S){var I=Lb();return I=I===null?null:{parent:pr._currentValue,pool:I},u.memoizedState={baseLanes:m,cachePool:I},o!==null&&Ey(u,null),qb(),iP(u),o!==null&&hf(o,u,v,!0),u.childLanes=S,null}function Uy(o,u){return u=By({mode:u.mode,children:u.children},o.mode),u.ref=o.ref,o.child=u,u.return=o,u}function nD(o,u,m){return Xc(u,o.child,null,m),o=Uy(u,u.pendingProps),o.flags|=2,Ia(u),u.memoizedState=null,o}function q8(o,u,m){var v=u.pendingProps,S=(u.flags&128)!==0;if(u.flags&=-129,o===null){if(St){if(v.mode==="hidden")return o=Uy(u,v),u.lanes=536870912,Om(null,o);if(Gb(u),(o=zt)?(o=mR(o,na),o=o!==null&&o.data==="&"?o:null,o!==null&&(u.memoizedState={dehydrated:o,treeContext:ge!==null?{id:De,overflow:Fe}:null,retryLane:536870912,hydrationErrors:null},m=_m(o),m.return=u,u.child=m,Bt=u,zt=null)):o=null,o===null)throw go(u);return u.lanes=536870912,null}return Uy(u,v)}var I=o.memoizedState;if(I!==null){var V=I.dehydrated;if(Gb(u),S)if(u.flags&256)u.flags&=-257,u=nD(o,u,m);else if(u.memoizedState!==null)u.child=o.child,u.flags|=128,u=null;else throw Error(r(558));else if(yr||hf(o,u,m,!1),S=(m&o.childLanes)!==0,yr||S){if(v=hn,v!==null&&(V=xe(v,m),V!==0&&V!==I.retryLane))throw I.retryLane=V,rs(o,V),oa(v,o,V),fw;Zy(),u=nD(o,u,m)}else o=I.treeContext,zt=ss(V.nextSibling),Bt=u,St=!0,po=null,na=!1,o!==null&&Oi(u,o),u=Uy(u,v),u.flags|=4096;return u}return o=is(o.child,{mode:v.mode,children:v.children}),o.ref=u.ref,u.child=o,o.return=u,o}function Fy(o,u){var m=u.ref;if(m===null)o!==null&&o.ref!==null&&(u.flags|=4194816);else{if(typeof m!="function"&&typeof m!="object")throw Error(r(284));(o===null||o.ref!==m)&&(u.flags|=4194816)}}function hw(o,u,m,v,S){return Yc(u),m=Kb(o,u,m,v,void 0,S),v=Wb(),o!==null&&!yr?(Yb(o,u,S),sl(o,u,S)):(St&&v&&Ar(u),u.flags|=1,Qr(o,u,m,S),u.child)}function rD(o,u,m,v,S,I){return Yc(u),u.updateQueue=null,m=sP(u,v,m,S),aP(o),v=Wb(),o!==null&&!yr?(Yb(o,u,I),sl(o,u,I)):(St&&v&&Ar(u),u.flags|=1,Qr(o,u,m,I),u.child)}function iD(o,u,m,v,S){if(Yc(u),u.stateNode===null){var I=el,V=m.contextType;typeof V=="object"&&V!==null&&(I=Jr(V)),I=new m(v,I),u.memoizedState=I.state!==null&&I.state!==void 0?I.state:null,I.updater=cw,u.stateNode=I,I._reactInternals=u,I=u.stateNode,I.props=v,I.state=u.memoizedState,I.refs={},Ub(u),V=m.contextType,I.context=typeof V=="object"&&V!==null?Jr(V):el,I.state=u.memoizedState,V=m.getDerivedStateFromProps,typeof V=="function"&&(uw(u,m,V,v),I.state=u.memoizedState),typeof m.getDerivedStateFromProps=="function"||typeof I.getSnapshotBeforeUpdate=="function"||typeof I.UNSAFE_componentWillMount!="function"&&typeof I.componentWillMount!="function"||(V=I.state,typeof I.componentWillMount=="function"&&I.componentWillMount(),typeof I.UNSAFE_componentWillMount=="function"&&I.UNSAFE_componentWillMount(),V!==I.state&&cw.enqueueReplaceState(I,I.state,null),Pm(u,v,I,S),Nm(),I.state=u.memoizedState),typeof I.componentDidMount=="function"&&(u.flags|=4194308),v=!0}else if(o===null){I=u.stateNode;var Y=u.memoizedProps,ne=td(m,Y);I.props=ne;var me=I.context,Ae=m.contextType;V=el,typeof Ae=="object"&&Ae!==null&&(V=Jr(Ae));var Re=m.getDerivedStateFromProps;Ae=typeof Re=="function"||typeof I.getSnapshotBeforeUpdate=="function",Y=u.pendingProps!==Y,Ae||typeof I.UNSAFE_componentWillReceiveProps!="function"&&typeof I.componentWillReceiveProps!="function"||(Y||me!==V)&&HP(u,I,v,V),pu=!1;var ye=u.memoizedState;I.state=ye,Pm(u,v,I,S),Nm(),me=u.memoizedState,Y||ye!==me||pu?(typeof Re=="function"&&(uw(u,m,Re,v),me=u.memoizedState),(ne=pu||qP(u,m,ne,v,ye,me,V))?(Ae||typeof I.UNSAFE_componentWillMount!="function"&&typeof I.componentWillMount!="function"||(typeof I.componentWillMount=="function"&&I.componentWillMount(),typeof I.UNSAFE_componentWillMount=="function"&&I.UNSAFE_componentWillMount()),typeof I.componentDidMount=="function"&&(u.flags|=4194308)):(typeof I.componentDidMount=="function"&&(u.flags|=4194308),u.memoizedProps=v,u.memoizedState=me),I.props=v,I.state=me,I.context=V,v=ne):(typeof I.componentDidMount=="function"&&(u.flags|=4194308),v=!1)}else{I=u.stateNode,Fb(o,u),V=u.memoizedProps,Ae=td(m,V),I.props=Ae,Re=u.pendingProps,ye=I.context,me=m.contextType,ne=el,typeof me=="object"&&me!==null&&(ne=Jr(me)),Y=m.getDerivedStateFromProps,(me=typeof Y=="function"||typeof I.getSnapshotBeforeUpdate=="function")||typeof I.UNSAFE_componentWillReceiveProps!="function"&&typeof I.componentWillReceiveProps!="function"||(V!==Re||ye!==ne)&&HP(u,I,v,ne),pu=!1,ye=u.memoizedState,I.state=ye,Pm(u,v,I,S),Nm();var _e=u.memoizedState;V!==Re||ye!==_e||pu||o!==null&&o.dependencies!==null&&by(o.dependencies)?(typeof Y=="function"&&(uw(u,m,Y,v),_e=u.memoizedState),(Ae=pu||qP(u,m,Ae,v,ye,_e,ne)||o!==null&&o.dependencies!==null&&by(o.dependencies))?(me||typeof I.UNSAFE_componentWillUpdate!="function"&&typeof I.componentWillUpdate!="function"||(typeof I.componentWillUpdate=="function"&&I.componentWillUpdate(v,_e,ne),typeof I.UNSAFE_componentWillUpdate=="function"&&I.UNSAFE_componentWillUpdate(v,_e,ne)),typeof I.componentDidUpdate=="function"&&(u.flags|=4),typeof I.getSnapshotBeforeUpdate=="function"&&(u.flags|=1024)):(typeof I.componentDidUpdate!="function"||V===o.memoizedProps&&ye===o.memoizedState||(u.flags|=4),typeof I.getSnapshotBeforeUpdate!="function"||V===o.memoizedProps&&ye===o.memoizedState||(u.flags|=1024),u.memoizedProps=v,u.memoizedState=_e),I.props=v,I.state=_e,I.context=ne,v=Ae):(typeof I.componentDidUpdate!="function"||V===o.memoizedProps&&ye===o.memoizedState||(u.flags|=4),typeof I.getSnapshotBeforeUpdate!="function"||V===o.memoizedProps&&ye===o.memoizedState||(u.flags|=1024),v=!1)}return I=v,Fy(o,u),v=(u.flags&128)!==0,I||v?(I=u.stateNode,m=v&&typeof m.getDerivedStateFromError!="function"?null:I.render(),u.flags|=1,o!==null&&v?(u.child=Xc(u,o.child,null,S),u.child=Xc(u,null,m,S)):Qr(o,u,m,S),u.memoizedState=I.state,o=u.child):o=sl(o,u,S),o}function aD(o,u,m,v){return nl(),u.flags|=256,Qr(o,u,m,v),u.child}var mw={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function pw(o){return{baseLanes:o,cachePool:WN()}}function gw(o,u,m){return o=o!==null?o.childLanes&~m:0,u&&(o|=Pa),o}function sD(o,u,m){var v=u.pendingProps,S=!1,I=(u.flags&128)!==0,V;if((V=I)||(V=o!==null&&o.memoizedState===null?!1:(rr.current&2)!==0),V&&(S=!0,u.flags&=-129),V=(u.flags&32)!==0,u.flags&=-33,o===null){if(St){if(S?vu(u):xu(),(o=zt)?(o=mR(o,na),o=o!==null&&o.data!=="&"?o:null,o!==null&&(u.memoizedState={dehydrated:o,treeContext:ge!==null?{id:De,overflow:Fe}:null,retryLane:536870912,hydrationErrors:null},m=_m(o),m.return=u,u.child=m,Bt=u,zt=null)):o=null,o===null)throw go(u);return Qw(o)?u.lanes=32:u.lanes=536870912,null}var Y=v.children;return v=v.fallback,S?(xu(),S=u.mode,Y=By({mode:"hidden",children:Y},S),v=tl(v,S,m,null),Y.return=u,v.return=u,Y.sibling=v,u.child=Y,v=u.child,v.memoizedState=pw(m),v.childLanes=gw(o,V,m),u.memoizedState=mw,Om(null,v)):(vu(u),yw(u,Y))}var ne=o.memoizedState;if(ne!==null&&(Y=ne.dehydrated,Y!==null)){if(I)u.flags&256?(vu(u),u.flags&=-257,u=vw(o,u,m)):u.memoizedState!==null?(xu(),u.child=o.child,u.flags|=128,u=null):(xu(),Y=v.fallback,S=u.mode,v=By({mode:"visible",children:v.children},S),Y=tl(Y,S,m,null),Y.flags|=2,v.return=u,Y.return=u,v.sibling=Y,u.child=v,Xc(u,o.child,null,m),v=u.child,v.memoizedState=pw(m),v.childLanes=gw(o,V,m),u.memoizedState=mw,u=Om(null,v));else if(vu(u),Qw(Y)){if(V=Y.nextSibling&&Y.nextSibling.dataset,V)var me=V.dgst;V=me,v=Error(r(419)),v.stack="",v.digest=V,Kc({value:v,source:null,stack:null}),u=vw(o,u,m)}else if(yr||hf(o,u,m,!1),V=(m&o.childLanes)!==0,yr||V){if(V=hn,V!==null&&(v=xe(V,m),v!==0&&v!==ne.retryLane))throw ne.retryLane=v,rs(o,v),oa(V,o,v),fw;Jw(Y)||Zy(),u=vw(o,u,m)}else Jw(Y)?(u.flags|=192,u.child=o.child,u=null):(o=ne.treeContext,zt=ss(Y.nextSibling),Bt=u,St=!0,po=null,na=!1,o!==null&&Oi(u,o),u=yw(u,v.children),u.flags|=4096);return u}return S?(xu(),Y=v.fallback,S=u.mode,ne=o.child,me=ne.sibling,v=is(ne,{mode:"hidden",children:v.children}),v.subtreeFlags=ne.subtreeFlags&65011712,me!==null?Y=is(me,Y):(Y=tl(Y,S,m,null),Y.flags|=2),Y.return=u,v.return=u,v.sibling=Y,u.child=v,Om(null,v),v=u.child,Y=o.child.memoizedState,Y===null?Y=pw(m):(S=Y.cachePool,S!==null?(ne=pr._currentValue,S=S.parent!==ne?{parent:ne,pool:ne}:S):S=WN(),Y={baseLanes:Y.baseLanes|m,cachePool:S}),v.memoizedState=Y,v.childLanes=gw(o,V,m),u.memoizedState=mw,Om(o.child,v)):(vu(u),m=o.child,o=m.sibling,m=is(m,{mode:"visible",children:v.children}),m.return=u,m.sibling=null,o!==null&&(V=u.deletions,V===null?(u.deletions=[o],u.flags|=16):V.push(o)),u.child=m,u.memoizedState=null,m)}function yw(o,u){return u=By({mode:"visible",children:u},o.mode),u.return=o,o.child=u}function By(o,u){return o=mi(22,o,null,u),o.lanes=0,o}function vw(o,u,m){return Xc(u,o.child,null,m),o=yw(u,u.pendingProps.children),o.flags|=2,u.memoizedState=null,o}function oD(o,u,m){o.lanes|=u;var v=o.alternate;v!==null&&(v.lanes|=u),kb(o.return,u,m)}function xw(o,u,m,v,S,I){var V=o.memoizedState;V===null?o.memoizedState={isBackwards:u,rendering:null,renderingStartTime:0,last:v,tail:m,tailMode:S,treeForkCount:I}:(V.isBackwards=u,V.rendering=null,V.renderingStartTime=0,V.last=v,V.tail=m,V.tailMode=S,V.treeForkCount=I)}function lD(o,u,m){var v=u.pendingProps,S=v.revealOrder,I=v.tail;v=v.children;var V=rr.current,Y=(V&2)!==0;if(Y?(V=V&1|2,u.flags|=128):V&=1,be(rr,V),Qr(o,u,v,m),v=St?W:0,!Y&&o!==null&&(o.flags&128)!==0)e:for(o=u.child;o!==null;){if(o.tag===13)o.memoizedState!==null&&oD(o,m,u);else if(o.tag===19)oD(o,m,u);else if(o.child!==null){o.child.return=o,o=o.child;continue}if(o===u)break e;for(;o.sibling===null;){if(o.return===null||o.return===u)break e;o=o.return}o.sibling.return=o.return,o=o.sibling}switch(S){case"forwards":for(m=u.child,S=null;m!==null;)o=m.alternate,o!==null&&Ny(o)===null&&(S=m),m=m.sibling;m=S,m===null?(S=u.child,u.child=null):(S=m.sibling,m.sibling=null),xw(u,!1,S,m,I,v);break;case"backwards":case"unstable_legacy-backwards":for(m=null,S=u.child,u.child=null;S!==null;){if(o=S.alternate,o!==null&&Ny(o)===null){u.child=S;break}o=S.sibling,S.sibling=m,m=S,S=o}xw(u,!0,m,null,I,v);break;case"together":xw(u,!1,null,null,void 0,v);break;default:u.memoizedState=null}return u.child}function sl(o,u,m){if(o!==null&&(u.dependencies=o.dependencies),wu|=u.lanes,(m&u.childLanes)===0)if(o!==null){if(hf(o,u,m,!1),(m&u.childLanes)===0)return null}else return null;if(o!==null&&u.child!==o.child)throw Error(r(153));if(u.child!==null){for(o=u.child,m=is(o,o.pendingProps),u.child=m,m.return=u;o.sibling!==null;)o=o.sibling,m=m.sibling=is(o,o.pendingProps),m.return=u;m.sibling=null}return u.child}function _w(o,u){return(o.lanes&u)!==0?!0:(o=o.dependencies,!!(o!==null&&by(o)))}function H8(o,u,m){switch(u.tag){case 3:It(u,u.stateNode.containerInfo),mu(u,pr,o.memoizedState.cache),nl();break;case 27:case 5:st(u);break;case 4:It(u,u.stateNode.containerInfo);break;case 10:mu(u,u.type,u.memoizedProps.value);break;case 31:if(u.memoizedState!==null)return u.flags|=128,Gb(u),null;break;case 13:var v=u.memoizedState;if(v!==null)return v.dehydrated!==null?(vu(u),u.flags|=128,null):(m&u.child.childLanes)!==0?sD(o,u,m):(vu(u),o=sl(o,u,m),o!==null?o.sibling:null);vu(u);break;case 19:var S=(o.flags&128)!==0;if(v=(m&u.childLanes)!==0,v||(hf(o,u,m,!1),v=(m&u.childLanes)!==0),S){if(v)return lD(o,u,m);u.flags|=128}if(S=u.memoizedState,S!==null&&(S.rendering=null,S.tail=null,S.lastEffect=null),be(rr,rr.current),v)break;return null;case 22:return u.lanes=0,eD(o,u,m,u.pendingProps);case 24:mu(u,pr,o.memoizedState.cache)}return sl(o,u,m)}function uD(o,u,m){if(o!==null)if(o.memoizedProps!==u.pendingProps)yr=!0;else{if(!_w(o,m)&&(u.flags&128)===0)return yr=!1,H8(o,u,m);yr=(o.flags&131072)!==0}else yr=!1,St&&(u.flags&1048576)!==0&&vt(u,W,u.index);switch(u.lanes=0,u.tag){case 16:e:{var v=u.pendingProps;if(o=Jc(u.elementType),u.type=o,typeof o=="function")cf(o)?(v=td(o,v),u.tag=1,u=iD(null,u,o,v,m)):(u.tag=0,u=hw(null,u,o,v,m));else{if(o!=null){var S=o.$$typeof;if(S===q){u.tag=11,u=JP(null,u,o,v,m);break e}else if(S===U){u.tag=14,u=QP(null,u,o,v,m);break e}}throw u=Se(o)||o,Error(r(306,u,""))}}return u;case 0:return hw(o,u,u.type,u.pendingProps,m);case 1:return v=u.type,S=td(v,u.pendingProps),iD(o,u,v,S,m);case 3:e:{if(It(u,u.stateNode.containerInfo),o===null)throw Error(r(387));v=u.pendingProps;var I=u.memoizedState;S=I.element,Fb(o,u),Pm(u,v,null,m);var V=u.memoizedState;if(v=V.cache,mu(u,pr,v),v!==I.cache&&Mb(u,[pr],m,!0),Nm(),v=V.element,I.isDehydrated)if(I={element:v,isDehydrated:!1,cache:V.cache},u.updateQueue.baseState=I,u.memoizedState=I,u.flags&256){u=aD(o,u,v,m);break e}else if(v!==S){S=y(Error(r(424)),u),Kc(S),u=aD(o,u,v,m);break e}else{switch(o=u.stateNode.containerInfo,o.nodeType){case 9:o=o.body;break;default:o=o.nodeName==="HTML"?o.ownerDocument.body:o}for(zt=ss(o.firstChild),Bt=u,St=!0,po=null,na=!0,m=eP(u,null,v,m),u.child=m;m;)m.flags=m.flags&-3|4096,m=m.sibling}else{if(nl(),v===S){u=sl(o,u,m);break e}Qr(o,u,v,m)}u=u.child}return u;case 26:return Fy(o,u),o===null?(m=_R(u.type,null,u.pendingProps,null))?u.memoizedState=m:St||(m=u.type,o=u.pendingProps,v=rv(Ve.current).createElement(m),v[_t]=u,v[Jt]=o,Xr(v,m,o),Rn(v),u.stateNode=v):u.memoizedState=_R(u.type,o.memoizedProps,u.pendingProps,o.memoizedState),null;case 27:return st(u),o===null&&St&&(v=u.stateNode=yR(u.type,u.pendingProps,Ve.current),Bt=u,na=!0,S=zt,Cu(u.type)?(Xw=S,zt=ss(v.firstChild)):zt=S),Qr(o,u,u.pendingProps.children,m),Fy(o,u),o===null&&(u.flags|=4194304),u.child;case 5:return o===null&&St&&((S=v=zt)&&(v=_9(v,u.type,u.pendingProps,na),v!==null?(u.stateNode=v,Bt=u,zt=ss(v.firstChild),na=!1,S=!0):S=!1),S||go(u)),st(u),S=u.type,I=u.pendingProps,V=o!==null?o.memoizedProps:null,v=I.children,Ww(S,I)?v=null:V!==null&&Ww(S,V)&&(u.flags|=32),u.memoizedState!==null&&(S=Kb(o,u,O8,null,null,m),Zm._currentValue=S),Fy(o,u),Qr(o,u,v,m),u.child;case 6:return o===null&&St&&((o=m=zt)&&(m=b9(m,u.pendingProps,na),m!==null?(u.stateNode=m,Bt=u,zt=null,o=!0):o=!1),o||go(u)),null;case 13:return sD(o,u,m);case 4:return It(u,u.stateNode.containerInfo),v=u.pendingProps,o===null?u.child=Xc(u,null,v,m):Qr(o,u,v,m),u.child;case 11:return JP(o,u,u.type,u.pendingProps,m);case 7:return Qr(o,u,u.pendingProps,m),u.child;case 8:return Qr(o,u,u.pendingProps.children,m),u.child;case 12:return Qr(o,u,u.pendingProps.children,m),u.child;case 10:return v=u.pendingProps,mu(u,u.type,v.value),Qr(o,u,v.children,m),u.child;case 9:return S=u.type._context,v=u.pendingProps.children,Yc(u),S=Jr(S),v=v(S),u.flags|=1,Qr(o,u,v,m),u.child;case 14:return QP(o,u,u.type,u.pendingProps,m);case 15:return XP(o,u,u.type,u.pendingProps,m);case 19:return lD(o,u,m);case 31:return q8(o,u,m);case 22:return eD(o,u,m,u.pendingProps);case 24:return Yc(u),v=Jr(pr),o===null?(S=Lb(),S===null&&(S=hn,I=Ob(),S.pooledCache=I,I.refCount++,I!==null&&(S.pooledCacheLanes|=m),S=I),u.memoizedState={parent:v,cache:S},Ub(u),mu(u,pr,S)):((o.lanes&m)!==0&&(Fb(o,u),Pm(u,null,null,m),Nm()),S=o.memoizedState,I=u.memoizedState,S.parent!==v?(S={parent:v,cache:v},u.memoizedState=S,u.lanes===0&&(u.memoizedState=u.updateQueue.baseState=S),mu(u,pr,v)):(v=I.cache,mu(u,pr,v),v!==S.cache&&Mb(u,[pr],m,!0))),Qr(o,u,u.pendingProps.children,m),u.child;case 29:throw u.pendingProps}throw Error(r(156,u.tag))}function ol(o){o.flags|=4}function bw(o,u,m,v,S){if((u=(o.mode&32)!==0)&&(u=!1),u){if(o.flags|=16777216,(S&335544128)===S)if(o.stateNode.complete)o.flags|=8192;else if(jD())o.flags|=8192;else throw Qc=Sy,Vb}else o.flags&=-16777217}function cD(o,u){if(u.type!=="stylesheet"||(u.state.loading&4)!==0)o.flags&=-16777217;else if(o.flags|=16777216,!SR(u))if(jD())o.flags|=8192;else throw Qc=Sy,Vb}function zy(o,u){u!==null&&(o.flags|=4),o.flags&16384&&(u=o.tag!==22?Cc():536870912,o.lanes|=u,Sf|=u)}function jm(o,u){if(!St)switch(o.tailMode){case"hidden":u=o.tail;for(var m=null;u!==null;)u.alternate!==null&&(m=u),u=u.sibling;m===null?o.tail=null:m.sibling=null;break;case"collapsed":m=o.tail;for(var v=null;m!==null;)m.alternate!==null&&(v=m),m=m.sibling;v===null?u||o.tail===null?o.tail=null:o.tail.sibling=null:v.sibling=null}}function Tn(o){var u=o.alternate!==null&&o.alternate.child===o.child,m=0,v=0;if(u)for(var S=o.child;S!==null;)m|=S.lanes|S.childLanes,v|=S.subtreeFlags&65011712,v|=S.flags&65011712,S.return=o,S=S.sibling;else for(S=o.child;S!==null;)m|=S.lanes|S.childLanes,v|=S.subtreeFlags,v|=S.flags,S.return=o,S=S.sibling;return o.subtreeFlags|=v,o.childLanes=m,u}function G8(o,u,m){var v=u.pendingProps;switch(Wn(u),u.tag){case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Tn(u),null;case 1:return Tn(u),null;case 3:return m=u.stateNode,v=null,o!==null&&(v=o.memoizedState.cache),u.memoizedState.cache!==v&&(u.flags|=2048),rl(pr),Te(),m.pendingContext&&(m.context=m.pendingContext,m.pendingContext=null),(o===null||o.child===null)&&(ks(u)?ol(u):o===null||o.memoizedState.isDehydrated&&(u.flags&256)===0||(u.flags|=1024,Em())),Tn(u),null;case 26:var S=u.type,I=u.memoizedState;return o===null?(ol(u),I!==null?(Tn(u),cD(u,I)):(Tn(u),bw(u,S,null,v,m))):I?I!==o.memoizedState?(ol(u),Tn(u),cD(u,I)):(Tn(u),u.flags&=-16777217):(o=o.memoizedProps,o!==v&&ol(u),Tn(u),bw(u,S,o,v,m)),null;case 27:if(lt(u),m=Ve.current,S=u.type,o!==null&&u.stateNode!=null)o.memoizedProps!==v&&ol(u);else{if(!v){if(u.stateNode===null)throw Error(r(166));return Tn(u),null}o=Ce.current,ks(u)?wm(u):(o=yR(S,v,m),u.stateNode=o,ol(u))}return Tn(u),null;case 5:if(lt(u),S=u.type,o!==null&&u.stateNode!=null)o.memoizedProps!==v&&ol(u);else{if(!v){if(u.stateNode===null)throw Error(r(166));return Tn(u),null}if(I=Ce.current,ks(u))wm(u);else{var V=rv(Ve.current);switch(I){case 1:I=V.createElementNS("http://www.w3.org/2000/svg",S);break;case 2:I=V.createElementNS("http://www.w3.org/1998/Math/MathML",S);break;default:switch(S){case"svg":I=V.createElementNS("http://www.w3.org/2000/svg",S);break;case"math":I=V.createElementNS("http://www.w3.org/1998/Math/MathML",S);break;case"script":I=V.createElement("div"),I.innerHTML="<script><\/script>",I=I.removeChild(I.firstChild);break;case"select":I=typeof v.is=="string"?V.createElement("select",{is:v.is}):V.createElement("select"),v.multiple?I.multiple=!0:v.size&&(I.size=v.size);break;default:I=typeof v.is=="string"?V.createElement(S,{is:v.is}):V.createElement(S)}}I[_t]=u,I[Jt]=v;e:for(V=u.child;V!==null;){if(V.tag===5||V.tag===6)I.appendChild(V.stateNode);else if(V.tag!==4&&V.tag!==27&&V.child!==null){V.child.return=V,V=V.child;continue}if(V===u)break e;for(;V.sibling===null;){if(V.return===null||V.return===u)break e;V=V.return}V.sibling.return=V.return,V=V.sibling}u.stateNode=I;e:switch(Xr(I,S,v),S){case"button":case"input":case"select":case"textarea":v=!!v.autoFocus;break e;case"img":v=!0;break e;default:v=!1}v&&ol(u)}}return Tn(u),bw(u,u.type,o===null?null:o.memoizedProps,u.pendingProps,m),null;case 6:if(o&&u.stateNode!=null)o.memoizedProps!==v&&ol(u);else{if(typeof v!="string"&&u.stateNode===null)throw Error(r(166));if(o=Ve.current,ks(u)){if(o=u.stateNode,m=u.memoizedProps,v=null,S=Bt,S!==null)switch(S.tag){case 27:case 5:v=S.memoizedProps}o[_t]=u,o=!!(o.nodeValue===m||v!==null&&v.suppressHydrationWarning===!0||sR(o.nodeValue,m)),o||go(u,!0)}else o=rv(o).createTextNode(v),o[_t]=u,u.stateNode=o}return Tn(u),null;case 31:if(m=u.memoizedState,o===null||o.memoizedState!==null){if(v=ks(u),m!==null){if(o===null){if(!v)throw Error(r(318));if(o=u.memoizedState,o=o!==null?o.dehydrated:null,!o)throw Error(r(557));o[_t]=u}else nl(),(u.flags&128)===0&&(u.memoizedState=null),u.flags|=4;Tn(u),o=!1}else m=Em(),o!==null&&o.memoizedState!==null&&(o.memoizedState.hydrationErrors=m),o=!0;if(!o)return u.flags&256?(Ia(u),u):(Ia(u),null);if((u.flags&128)!==0)throw Error(r(558))}return Tn(u),null;case 13:if(v=u.memoizedState,o===null||o.memoizedState!==null&&o.memoizedState.dehydrated!==null){if(S=ks(u),v!==null&&v.dehydrated!==null){if(o===null){if(!S)throw Error(r(318));if(S=u.memoizedState,S=S!==null?S.dehydrated:null,!S)throw Error(r(317));S[_t]=u}else nl(),(u.flags&128)===0&&(u.memoizedState=null),u.flags|=4;Tn(u),S=!1}else S=Em(),o!==null&&o.memoizedState!==null&&(o.memoizedState.hydrationErrors=S),S=!0;if(!S)return u.flags&256?(Ia(u),u):(Ia(u),null)}return Ia(u),(u.flags&128)!==0?(u.lanes=m,u):(m=v!==null,o=o!==null&&o.memoizedState!==null,m&&(v=u.child,S=null,v.alternate!==null&&v.alternate.memoizedState!==null&&v.alternate.memoizedState.cachePool!==null&&(S=v.alternate.memoizedState.cachePool.pool),I=null,v.memoizedState!==null&&v.memoizedState.cachePool!==null&&(I=v.memoizedState.cachePool.pool),I!==S&&(v.flags|=2048)),m!==o&&m&&(u.child.flags|=8192),zy(u,u.updateQueue),Tn(u),null);case 4:return Te(),o===null&&qw(u.stateNode.containerInfo),Tn(u),null;case 10:return rl(u.type),Tn(u),null;case 19:if(ue(rr),v=u.memoizedState,v===null)return Tn(u),null;if(S=(u.flags&128)!==0,I=v.rendering,I===null)if(S)jm(v,!1);else{if(Zn!==0||o!==null&&(o.flags&128)!==0)for(o=u.child;o!==null;){if(I=Ny(o),I!==null){for(u.flags|=128,jm(v,!1),o=I.updateQueue,u.updateQueue=o,zy(u,o),u.subtreeFlags=0,o=m,m=u.child;m!==null;)xm(m,o),m=m.sibling;return be(rr,rr.current&1|2),St&&nt(u,v.treeForkCount),u.child}o=o.sibling}v.tail!==null&&Tr()>Ky&&(u.flags|=128,S=!0,jm(v,!1),u.lanes=4194304)}else{if(!S)if(o=Ny(I),o!==null){if(u.flags|=128,S=!0,o=o.updateQueue,u.updateQueue=o,zy(u,o),jm(v,!0),v.tail===null&&v.tailMode==="hidden"&&!I.alternate&&!St)return Tn(u),null}else 2*Tr()-v.renderingStartTime>Ky&&m!==536870912&&(u.flags|=128,S=!0,jm(v,!1),u.lanes=4194304);v.isBackwards?(I.sibling=u.child,u.child=I):(o=v.last,o!==null?o.sibling=I:u.child=I,v.last=I)}return v.tail!==null?(o=v.tail,v.rendering=o,v.tail=o.sibling,v.renderingStartTime=Tr(),o.sibling=null,m=rr.current,be(rr,S?m&1|2:m&1),St&&nt(u,v.treeForkCount),o):(Tn(u),null);case 22:case 23:return Ia(u),Hb(),v=u.memoizedState!==null,o!==null?o.memoizedState!==null!==v&&(u.flags|=8192):v&&(u.flags|=8192),v?(m&536870912)!==0&&(u.flags&128)===0&&(Tn(u),u.subtreeFlags&6&&(u.flags|=8192)):Tn(u),m=u.updateQueue,m!==null&&zy(u,m.retryQueue),m=null,o!==null&&o.memoizedState!==null&&o.memoizedState.cachePool!==null&&(m=o.memoizedState.cachePool.pool),v=null,u.memoizedState!==null&&u.memoizedState.cachePool!==null&&(v=u.memoizedState.cachePool.pool),v!==m&&(u.flags|=2048),o!==null&&ue(Zc),null;case 24:return m=null,o!==null&&(m=o.memoizedState.cache),u.memoizedState.cache!==m&&(u.flags|=2048),rl(pr),Tn(u),null;case 25:return null;case 30:return null}throw Error(r(156,u.tag))}function $8(o,u){switch(Wn(u),u.tag){case 1:return o=u.flags,o&65536?(u.flags=o&-65537|128,u):null;case 3:return rl(pr),Te(),o=u.flags,(o&65536)!==0&&(o&128)===0?(u.flags=o&-65537|128,u):null;case 26:case 27:case 5:return lt(u),null;case 31:if(u.memoizedState!==null){if(Ia(u),u.alternate===null)throw Error(r(340));nl()}return o=u.flags,o&65536?(u.flags=o&-65537|128,u):null;case 13:if(Ia(u),o=u.memoizedState,o!==null&&o.dehydrated!==null){if(u.alternate===null)throw Error(r(340));nl()}return o=u.flags,o&65536?(u.flags=o&-65537|128,u):null;case 19:return ue(rr),null;case 4:return Te(),null;case 10:return rl(u.type),null;case 22:case 23:return Ia(u),Hb(),o!==null&&ue(Zc),o=u.flags,o&65536?(u.flags=o&-65537|128,u):null;case 24:return rl(pr),null;case 25:return null;default:return null}}function dD(o,u){switch(Wn(u),u.tag){case 3:rl(pr),Te();break;case 26:case 27:case 5:lt(u);break;case 4:Te();break;case 31:u.memoizedState!==null&&Ia(u);break;case 13:Ia(u);break;case 19:ue(rr);break;case 10:rl(u.type);break;case 22:case 23:Ia(u),Hb(),o!==null&&ue(Zc);break;case 24:rl(pr)}}function Lm(o,u){try{var m=u.updateQueue,v=m!==null?m.lastEffect:null;if(v!==null){var S=v.next;m=S;do{if((m.tag&o)===o){v=void 0;var I=m.create,V=m.inst;v=I(),V.destroy=v}m=m.next}while(m!==S)}}catch(Y){tn(u,u.return,Y)}}function _u(o,u,m){try{var v=u.updateQueue,S=v!==null?v.lastEffect:null;if(S!==null){var I=S.next;v=I;do{if((v.tag&o)===o){var V=v.inst,Y=V.destroy;if(Y!==void 0){V.destroy=void 0,S=u;var ne=m,me=Y;try{me()}catch(Ae){tn(S,ne,Ae)}}}v=v.next}while(v!==I)}}catch(Ae){tn(u,u.return,Ae)}}function fD(o){var u=o.updateQueue;if(u!==null){var m=o.stateNode;try{nP(u,m)}catch(v){tn(o,o.return,v)}}}function hD(o,u,m){m.props=td(o.type,o.memoizedProps),m.state=o.memoizedState;try{m.componentWillUnmount()}catch(v){tn(o,u,v)}}function Vm(o,u){try{var m=o.ref;if(m!==null){switch(o.tag){case 26:case 27:case 5:var v=o.stateNode;break;case 30:v=o.stateNode;break;default:v=o.stateNode}typeof m=="function"?o.refCleanup=m(v):m.current=v}}catch(S){tn(o,u,S)}}function vo(o,u){var m=o.ref,v=o.refCleanup;if(m!==null)if(typeof v=="function")try{v()}catch(S){tn(o,u,S)}finally{o.refCleanup=null,o=o.alternate,o!=null&&(o.refCleanup=null)}else if(typeof m=="function")try{m(null)}catch(S){tn(o,u,S)}else m.current=null}function mD(o){var u=o.type,m=o.memoizedProps,v=o.stateNode;try{e:switch(u){case"button":case"input":case"select":case"textarea":m.autoFocus&&v.focus();break e;case"img":m.src?v.src=m.src:m.srcSet&&(v.srcset=m.srcSet)}}catch(S){tn(o,o.return,S)}}function ww(o,u,m){try{var v=o.stateNode;m9(v,o.type,m,u),v[Jt]=u}catch(S){tn(o,o.return,S)}}function pD(o){return o.tag===5||o.tag===3||o.tag===26||o.tag===27&&Cu(o.type)||o.tag===4}function Ew(o){e:for(;;){for(;o.sibling===null;){if(o.return===null||pD(o.return))return null;o=o.return}for(o.sibling.return=o.return,o=o.sibling;o.tag!==5&&o.tag!==6&&o.tag!==18;){if(o.tag===27&&Cu(o.type)||o.flags&2||o.child===null||o.tag===4)continue e;o.child.return=o,o=o.child}if(!(o.flags&2))return o.stateNode}}function Tw(o,u,m){var v=o.tag;if(v===5||v===6)o=o.stateNode,u?(m.nodeType===9?m.body:m.nodeName==="HTML"?m.ownerDocument.body:m).insertBefore(o,u):(u=m.nodeType===9?m.body:m.nodeName==="HTML"?m.ownerDocument.body:m,u.appendChild(o),m=m._reactRootContainer,m!=null||u.onclick!==null||(u.onclick=ui));else if(v!==4&&(v===27&&Cu(o.type)&&(m=o.stateNode,u=null),o=o.child,o!==null))for(Tw(o,u,m),o=o.sibling;o!==null;)Tw(o,u,m),o=o.sibling}function qy(o,u,m){var v=o.tag;if(v===5||v===6)o=o.stateNode,u?m.insertBefore(o,u):m.appendChild(o);else if(v!==4&&(v===27&&Cu(o.type)&&(m=o.stateNode),o=o.child,o!==null))for(qy(o,u,m),o=o.sibling;o!==null;)qy(o,u,m),o=o.sibling}function gD(o){var u=o.stateNode,m=o.memoizedProps;try{for(var v=o.type,S=u.attributes;S.length;)u.removeAttributeNode(S[0]);Xr(u,v,m),u[_t]=o,u[Jt]=m}catch(I){tn(o,o.return,I)}}var ll=!1,vr=!1,Sw=!1,yD=typeof WeakSet=="function"?WeakSet:Set,zr=null;function K8(o,u){if(o=o.containerInfo,$w=cv,o=Uc(o),uo(o)){if("selectionStart"in o)var m={start:o.selectionStart,end:o.selectionEnd};else e:{m=(m=o.ownerDocument)&&m.defaultView||window;var v=m.getSelection&&m.getSelection();if(v&&v.rangeCount!==0){m=v.anchorNode;var S=v.anchorOffset,I=v.focusNode;v=v.focusOffset;try{m.nodeType,I.nodeType}catch{m=null;break e}var V=0,Y=-1,ne=-1,me=0,Ae=0,Re=o,ye=null;t:for(;;){for(var _e;Re!==m||S!==0&&Re.nodeType!==3||(Y=V+S),Re!==I||v!==0&&Re.nodeType!==3||(ne=V+v),Re.nodeType===3&&(V+=Re.nodeValue.length),(_e=Re.firstChild)!==null;)ye=Re,Re=_e;for(;;){if(Re===o)break t;if(ye===m&&++me===S&&(Y=V),ye===I&&++Ae===v&&(ne=V),(_e=Re.nextSibling)!==null)break;Re=ye,ye=Re.parentNode}Re=_e}m=Y===-1||ne===-1?null:{start:Y,end:ne}}else m=null}m=m||{start:0,end:0}}else m=null;for(Kw={focusedElem:o,selectionRange:m},cv=!1,zr=u;zr!==null;)if(u=zr,o=u.child,(u.subtreeFlags&1028)!==0&&o!==null)o.return=u,zr=o;else for(;zr!==null;){switch(u=zr,I=u.alternate,o=u.flags,u.tag){case 0:if((o&4)!==0&&(o=u.updateQueue,o=o!==null?o.events:null,o!==null))for(m=0;m<o.length;m++)S=o[m],S.ref.impl=S.nextImpl;break;case 11:case 15:break;case 1:if((o&1024)!==0&&I!==null){o=void 0,m=u,S=I.memoizedProps,I=I.memoizedState,v=m.stateNode;try{var We=td(m.type,S);o=v.getSnapshotBeforeUpdate(We,I),v.__reactInternalSnapshotBeforeUpdate=o}catch(ot){tn(m,m.return,ot)}}break;case 3:if((o&1024)!==0){if(o=u.stateNode.containerInfo,m=o.nodeType,m===9)Zw(o);else if(m===1)switch(o.nodeName){case"HEAD":case"HTML":case"BODY":Zw(o);break;default:o.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((o&1024)!==0)throw Error(r(163))}if(o=u.sibling,o!==null){o.return=u.return,zr=o;break}zr=u.return}}function vD(o,u,m){var v=m.flags;switch(m.tag){case 0:case 11:case 15:cl(o,m),v&4&&Lm(5,m);break;case 1:if(cl(o,m),v&4)if(o=m.stateNode,u===null)try{o.componentDidMount()}catch(V){tn(m,m.return,V)}else{var S=td(m.type,u.memoizedProps);u=u.memoizedState;try{o.componentDidUpdate(S,u,o.__reactInternalSnapshotBeforeUpdate)}catch(V){tn(m,m.return,V)}}v&64&&fD(m),v&512&&Vm(m,m.return);break;case 3:if(cl(o,m),v&64&&(o=m.updateQueue,o!==null)){if(u=null,m.child!==null)switch(m.child.tag){case 27:case 5:u=m.child.stateNode;break;case 1:u=m.child.stateNode}try{nP(o,u)}catch(V){tn(m,m.return,V)}}break;case 27:u===null&&v&4&&gD(m);case 26:case 5:cl(o,m),u===null&&v&4&&mD(m),v&512&&Vm(m,m.return);break;case 12:cl(o,m);break;case 31:cl(o,m),v&4&&bD(o,m);break;case 13:cl(o,m),v&4&&wD(o,m),v&64&&(o=m.memoizedState,o!==null&&(o=o.dehydrated,o!==null&&(m=n9.bind(null,m),w9(o,m))));break;case 22:if(v=m.memoizedState!==null||ll,!v){u=u!==null&&u.memoizedState!==null||vr,S=ll;var I=vr;ll=v,(vr=u)&&!I?dl(o,m,(m.subtreeFlags&8772)!==0):cl(o,m),ll=S,vr=I}break;case 30:break;default:cl(o,m)}}function xD(o){var u=o.alternate;u!==null&&(o.alternate=null,xD(u)),o.child=null,o.deletions=null,o.sibling=null,o.tag===5&&(u=o.stateNode,u!==null&&eo(u)),o.stateNode=null,o.return=null,o.dependencies=null,o.memoizedProps=null,o.memoizedState=null,o.pendingProps=null,o.stateNode=null,o.updateQueue=null}var kn=null,ra=!1;function ul(o,u,m){for(m=m.child;m!==null;)_D(o,u,m),m=m.sibling}function _D(o,u,m){if($n&&typeof $n.onCommitFiberUnmount=="function")try{$n.onCommitFiberUnmount(Ni,m)}catch{}switch(m.tag){case 26:vr||vo(m,u),ul(o,u,m),m.memoizedState?m.memoizedState.count--:m.stateNode&&(m=m.stateNode,m.parentNode.removeChild(m));break;case 27:vr||vo(m,u);var v=kn,S=ra;Cu(m.type)&&(kn=m.stateNode,ra=!1),ul(o,u,m),Km(m.stateNode),kn=v,ra=S;break;case 5:vr||vo(m,u);case 6:if(v=kn,S=ra,kn=null,ul(o,u,m),kn=v,ra=S,kn!==null)if(ra)try{(kn.nodeType===9?kn.body:kn.nodeName==="HTML"?kn.ownerDocument.body:kn).removeChild(m.stateNode)}catch(I){tn(m,u,I)}else try{kn.removeChild(m.stateNode)}catch(I){tn(m,u,I)}break;case 18:kn!==null&&(ra?(o=kn,fR(o.nodeType===9?o.body:o.nodeName==="HTML"?o.ownerDocument.body:o,m.stateNode),kf(o)):fR(kn,m.stateNode));break;case 4:v=kn,S=ra,kn=m.stateNode.containerInfo,ra=!0,ul(o,u,m),kn=v,ra=S;break;case 0:case 11:case 14:case 15:_u(2,m,u),vr||_u(4,m,u),ul(o,u,m);break;case 1:vr||(vo(m,u),v=m.stateNode,typeof v.componentWillUnmount=="function"&&hD(m,u,v)),ul(o,u,m);break;case 21:ul(o,u,m);break;case 22:vr=(v=vr)||m.memoizedState!==null,ul(o,u,m),vr=v;break;default:ul(o,u,m)}}function bD(o,u){if(u.memoizedState===null&&(o=u.alternate,o!==null&&(o=o.memoizedState,o!==null))){o=o.dehydrated;try{kf(o)}catch(m){tn(u,u.return,m)}}}function wD(o,u){if(u.memoizedState===null&&(o=u.alternate,o!==null&&(o=o.memoizedState,o!==null&&(o=o.dehydrated,o!==null))))try{kf(o)}catch(m){tn(u,u.return,m)}}function W8(o){switch(o.tag){case 31:case 13:case 19:var u=o.stateNode;return u===null&&(u=o.stateNode=new yD),u;case 22:return o=o.stateNode,u=o._retryCache,u===null&&(u=o._retryCache=new yD),u;default:throw Error(r(435,o.tag))}}function Hy(o,u){var m=W8(o);u.forEach(function(v){if(!m.has(v)){m.add(v);var S=r9.bind(null,o,v);v.then(S,S)}})}function ia(o,u){var m=u.deletions;if(m!==null)for(var v=0;v<m.length;v++){var S=m[v],I=o,V=u,Y=V;e:for(;Y!==null;){switch(Y.tag){case 27:if(Cu(Y.type)){kn=Y.stateNode,ra=!1;break e}break;case 5:kn=Y.stateNode,ra=!1;break e;case 3:case 4:kn=Y.stateNode.containerInfo,ra=!0;break e}Y=Y.return}if(kn===null)throw Error(r(160));_D(I,V,S),kn=null,ra=!1,I=S.alternate,I!==null&&(I.return=null),S.return=null}if(u.subtreeFlags&13886)for(u=u.child;u!==null;)ED(u,o),u=u.sibling}var Os=null;function ED(o,u){var m=o.alternate,v=o.flags;switch(o.tag){case 0:case 11:case 14:case 15:ia(u,o),aa(o),v&4&&(_u(3,o,o.return),Lm(3,o),_u(5,o,o.return));break;case 1:ia(u,o),aa(o),v&512&&(vr||m===null||vo(m,m.return)),v&64&&ll&&(o=o.updateQueue,o!==null&&(v=o.callbacks,v!==null&&(m=o.shared.hiddenCallbacks,o.shared.hiddenCallbacks=m===null?v:m.concat(v))));break;case 26:var S=Os;if(ia(u,o),aa(o),v&512&&(vr||m===null||vo(m,m.return)),v&4){var I=m!==null?m.memoizedState:null;if(v=o.memoizedState,m===null)if(v===null)if(o.stateNode===null){e:{v=o.type,m=o.memoizedProps,S=S.ownerDocument||S;t:switch(v){case"title":I=S.getElementsByTagName("title")[0],(!I||I[$i]||I[_t]||I.namespaceURI==="http://www.w3.org/2000/svg"||I.hasAttribute("itemprop"))&&(I=S.createElement(v),S.head.insertBefore(I,S.querySelector("head > title"))),Xr(I,v,m),I[_t]=o,Rn(I),v=I;break e;case"link":var V=ER("link","href",S).get(v+(m.href||""));if(V){for(var Y=0;Y<V.length;Y++)if(I=V[Y],I.getAttribute("href")===(m.href==null||m.href===""?null:m.href)&&I.getAttribute("rel")===(m.rel==null?null:m.rel)&&I.getAttribute("title")===(m.title==null?null:m.title)&&I.getAttribute("crossorigin")===(m.crossOrigin==null?null:m.crossOrigin)){V.splice(Y,1);break t}}I=S.createElement(v),Xr(I,v,m),S.head.appendChild(I);break;case"meta":if(V=ER("meta","content",S).get(v+(m.content||""))){for(Y=0;Y<V.length;Y++)if(I=V[Y],I.getAttribute("content")===(m.content==null?null:""+m.content)&&I.getAttribute("name")===(m.name==null?null:m.name)&&I.getAttribute("property")===(m.property==null?null:m.property)&&I.getAttribute("http-equiv")===(m.httpEquiv==null?null:m.httpEquiv)&&I.getAttribute("charset")===(m.charSet==null?null:m.charSet)){V.splice(Y,1);break t}}I=S.createElement(v),Xr(I,v,m),S.head.appendChild(I);break;default:throw Error(r(468,v))}I[_t]=o,Rn(I),v=I}o.stateNode=v}else TR(S,o.type,o.stateNode);else o.stateNode=wR(S,v,o.memoizedProps);else I!==v?(I===null?m.stateNode!==null&&(m=m.stateNode,m.parentNode.removeChild(m)):I.count--,v===null?TR(S,o.type,o.stateNode):wR(S,v,o.memoizedProps)):v===null&&o.stateNode!==null&&ww(o,o.memoizedProps,m.memoizedProps)}break;case 27:ia(u,o),aa(o),v&512&&(vr||m===null||vo(m,m.return)),m!==null&&v&4&&ww(o,o.memoizedProps,m.memoizedProps);break;case 5:if(ia(u,o),aa(o),v&512&&(vr||m===null||vo(m,m.return)),o.flags&32){S=o.stateNode;try{hr(S,"")}catch(We){tn(o,o.return,We)}}v&4&&o.stateNode!=null&&(S=o.memoizedProps,ww(o,S,m!==null?m.memoizedProps:S)),v&1024&&(Sw=!0);break;case 6:if(ia(u,o),aa(o),v&4){if(o.stateNode===null)throw Error(r(162));v=o.memoizedProps,m=o.stateNode;try{m.nodeValue=v}catch(We){tn(o,o.return,We)}}break;case 3:if(sv=null,S=Os,Os=iv(u.containerInfo),ia(u,o),Os=S,aa(o),v&4&&m!==null&&m.memoizedState.isDehydrated)try{kf(u.containerInfo)}catch(We){tn(o,o.return,We)}Sw&&(Sw=!1,TD(o));break;case 4:v=Os,Os=iv(o.stateNode.containerInfo),ia(u,o),aa(o),Os=v;break;case 12:ia(u,o),aa(o);break;case 31:ia(u,o),aa(o),v&4&&(v=o.updateQueue,v!==null&&(o.updateQueue=null,Hy(o,v)));break;case 13:ia(u,o),aa(o),o.child.flags&8192&&o.memoizedState!==null!=(m!==null&&m.memoizedState!==null)&&($y=Tr()),v&4&&(v=o.updateQueue,v!==null&&(o.updateQueue=null,Hy(o,v)));break;case 22:S=o.memoizedState!==null;var ne=m!==null&&m.memoizedState!==null,me=ll,Ae=vr;if(ll=me||S,vr=Ae||ne,ia(u,o),vr=Ae,ll=me,aa(o),v&8192)e:for(u=o.stateNode,u._visibility=S?u._visibility&-2:u._visibility|1,S&&(m===null||ne||ll||vr||nd(o)),m=null,u=o;;){if(u.tag===5||u.tag===26){if(m===null){ne=m=u;try{if(I=ne.stateNode,S)V=I.style,typeof V.setProperty=="function"?V.setProperty("display","none","important"):V.display="none";else{Y=ne.stateNode;var Re=ne.memoizedProps.style,ye=Re!=null&&Re.hasOwnProperty("display")?Re.display:null;Y.style.display=ye==null||typeof ye=="boolean"?"":(""+ye).trim()}}catch(We){tn(ne,ne.return,We)}}}else if(u.tag===6){if(m===null){ne=u;try{ne.stateNode.nodeValue=S?"":ne.memoizedProps}catch(We){tn(ne,ne.return,We)}}}else if(u.tag===18){if(m===null){ne=u;try{var _e=ne.stateNode;S?hR(_e,!0):hR(ne.stateNode,!1)}catch(We){tn(ne,ne.return,We)}}}else if((u.tag!==22&&u.tag!==23||u.memoizedState===null||u===o)&&u.child!==null){u.child.return=u,u=u.child;continue}if(u===o)break e;for(;u.sibling===null;){if(u.return===null||u.return===o)break e;m===u&&(m=null),u=u.return}m===u&&(m=null),u.sibling.return=u.return,u=u.sibling}v&4&&(v=o.updateQueue,v!==null&&(m=v.retryQueue,m!==null&&(v.retryQueue=null,Hy(o,m))));break;case 19:ia(u,o),aa(o),v&4&&(v=o.updateQueue,v!==null&&(o.updateQueue=null,Hy(o,v)));break;case 30:break;case 21:break;default:ia(u,o),aa(o)}}function aa(o){var u=o.flags;if(u&2){try{for(var m,v=o.return;v!==null;){if(pD(v)){m=v;break}v=v.return}if(m==null)throw Error(r(160));switch(m.tag){case 27:var S=m.stateNode,I=Ew(o);qy(o,I,S);break;case 5:var V=m.stateNode;m.flags&32&&(hr(V,""),m.flags&=-33);var Y=Ew(o);qy(o,Y,V);break;case 3:case 4:var ne=m.stateNode.containerInfo,me=Ew(o);Tw(o,me,ne);break;default:throw Error(r(161))}}catch(Ae){tn(o,o.return,Ae)}o.flags&=-3}u&4096&&(o.flags&=-4097)}function TD(o){if(o.subtreeFlags&1024)for(o=o.child;o!==null;){var u=o;TD(u),u.tag===5&&u.flags&1024&&u.stateNode.reset(),o=o.sibling}}function cl(o,u){if(u.subtreeFlags&8772)for(u=u.child;u!==null;)vD(o,u.alternate,u),u=u.sibling}function nd(o){for(o=o.child;o!==null;){var u=o;switch(u.tag){case 0:case 11:case 14:case 15:_u(4,u,u.return),nd(u);break;case 1:vo(u,u.return);var m=u.stateNode;typeof m.componentWillUnmount=="function"&&hD(u,u.return,m),nd(u);break;case 27:Km(u.stateNode);case 26:case 5:vo(u,u.return),nd(u);break;case 22:u.memoizedState===null&&nd(u);break;case 30:nd(u);break;default:nd(u)}o=o.sibling}}function dl(o,u,m){for(m=m&&(u.subtreeFlags&8772)!==0,u=u.child;u!==null;){var v=u.alternate,S=o,I=u,V=I.flags;switch(I.tag){case 0:case 11:case 15:dl(S,I,m),Lm(4,I);break;case 1:if(dl(S,I,m),v=I,S=v.stateNode,typeof S.componentDidMount=="function")try{S.componentDidMount()}catch(me){tn(v,v.return,me)}if(v=I,S=v.updateQueue,S!==null){var Y=v.stateNode;try{var ne=S.shared.hiddenCallbacks;if(ne!==null)for(S.shared.hiddenCallbacks=null,S=0;S<ne.length;S++)tP(ne[S],Y)}catch(me){tn(v,v.return,me)}}m&&V&64&&fD(I),Vm(I,I.return);break;case 27:gD(I);case 26:case 5:dl(S,I,m),m&&v===null&&V&4&&mD(I),Vm(I,I.return);break;case 12:dl(S,I,m);break;case 31:dl(S,I,m),m&&V&4&&bD(S,I);break;case 13:dl(S,I,m),m&&V&4&&wD(S,I);break;case 22:I.memoizedState===null&&dl(S,I,m),Vm(I,I.return);break;case 30:break;default:dl(S,I,m)}u=u.sibling}}function Aw(o,u){var m=null;o!==null&&o.memoizedState!==null&&o.memoizedState.cachePool!==null&&(m=o.memoizedState.cachePool.pool),o=null,u.memoizedState!==null&&u.memoizedState.cachePool!==null&&(o=u.memoizedState.cachePool.pool),o!==m&&(o!=null&&o.refCount++,m!=null&&Tm(m))}function Cw(o,u){o=null,u.alternate!==null&&(o=u.alternate.memoizedState.cache),u=u.memoizedState.cache,u!==o&&(u.refCount++,o!=null&&Tm(o))}function js(o,u,m,v){if(u.subtreeFlags&10256)for(u=u.child;u!==null;)SD(o,u,m,v),u=u.sibling}function SD(o,u,m,v){var S=u.flags;switch(u.tag){case 0:case 11:case 15:js(o,u,m,v),S&2048&&Lm(9,u);break;case 1:js(o,u,m,v);break;case 3:js(o,u,m,v),S&2048&&(o=null,u.alternate!==null&&(o=u.alternate.memoizedState.cache),u=u.memoizedState.cache,u!==o&&(u.refCount++,o!=null&&Tm(o)));break;case 12:if(S&2048){js(o,u,m,v),o=u.stateNode;try{var I=u.memoizedProps,V=I.id,Y=I.onPostCommit;typeof Y=="function"&&Y(V,u.alternate===null?"mount":"update",o.passiveEffectDuration,-0)}catch(ne){tn(u,u.return,ne)}}else js(o,u,m,v);break;case 31:js(o,u,m,v);break;case 13:js(o,u,m,v);break;case 23:break;case 22:I=u.stateNode,V=u.alternate,u.memoizedState!==null?I._visibility&2?js(o,u,m,v):Um(o,u):I._visibility&2?js(o,u,m,v):(I._visibility|=2,wf(o,u,m,v,(u.subtreeFlags&10256)!==0||!1)),S&2048&&Aw(V,u);break;case 24:js(o,u,m,v),S&2048&&Cw(u.alternate,u);break;default:js(o,u,m,v)}}function wf(o,u,m,v,S){for(S=S&&((u.subtreeFlags&10256)!==0||!1),u=u.child;u!==null;){var I=o,V=u,Y=m,ne=v,me=V.flags;switch(V.tag){case 0:case 11:case 15:wf(I,V,Y,ne,S),Lm(8,V);break;case 23:break;case 22:var Ae=V.stateNode;V.memoizedState!==null?Ae._visibility&2?wf(I,V,Y,ne,S):Um(I,V):(Ae._visibility|=2,wf(I,V,Y,ne,S)),S&&me&2048&&Aw(V.alternate,V);break;case 24:wf(I,V,Y,ne,S),S&&me&2048&&Cw(V.alternate,V);break;default:wf(I,V,Y,ne,S)}u=u.sibling}}function Um(o,u){if(u.subtreeFlags&10256)for(u=u.child;u!==null;){var m=o,v=u,S=v.flags;switch(v.tag){case 22:Um(m,v),S&2048&&Aw(v.alternate,v);break;case 24:Um(m,v),S&2048&&Cw(v.alternate,v);break;default:Um(m,v)}u=u.sibling}}var Fm=8192;function Ef(o,u,m){if(o.subtreeFlags&Fm)for(o=o.child;o!==null;)AD(o,u,m),o=o.sibling}function AD(o,u,m){switch(o.tag){case 26:Ef(o,u,m),o.flags&Fm&&o.memoizedState!==null&&M9(m,Os,o.memoizedState,o.memoizedProps);break;case 5:Ef(o,u,m);break;case 3:case 4:var v=Os;Os=iv(o.stateNode.containerInfo),Ef(o,u,m),Os=v;break;case 22:o.memoizedState===null&&(v=o.alternate,v!==null&&v.memoizedState!==null?(v=Fm,Fm=16777216,Ef(o,u,m),Fm=v):Ef(o,u,m));break;default:Ef(o,u,m)}}function CD(o){var u=o.alternate;if(u!==null&&(o=u.child,o!==null)){u.child=null;do u=o.sibling,o.sibling=null,o=u;while(o!==null)}}function Bm(o){var u=o.deletions;if((o.flags&16)!==0){if(u!==null)for(var m=0;m<u.length;m++){var v=u[m];zr=v,ND(v,o)}CD(o)}if(o.subtreeFlags&10256)for(o=o.child;o!==null;)ID(o),o=o.sibling}function ID(o){switch(o.tag){case 0:case 11:case 15:Bm(o),o.flags&2048&&_u(9,o,o.return);break;case 3:Bm(o);break;case 12:Bm(o);break;case 22:var u=o.stateNode;o.memoizedState!==null&&u._visibility&2&&(o.return===null||o.return.tag!==13)?(u._visibility&=-3,Gy(o)):Bm(o);break;default:Bm(o)}}function Gy(o){var u=o.deletions;if((o.flags&16)!==0){if(u!==null)for(var m=0;m<u.length;m++){var v=u[m];zr=v,ND(v,o)}CD(o)}for(o=o.child;o!==null;){switch(u=o,u.tag){case 0:case 11:case 15:_u(8,u,u.return),Gy(u);break;case 22:m=u.stateNode,m._visibility&2&&(m._visibility&=-3,Gy(u));break;default:Gy(u)}o=o.sibling}}function ND(o,u){for(;zr!==null;){var m=zr;switch(m.tag){case 0:case 11:case 15:_u(8,m,u);break;case 23:case 22:if(m.memoizedState!==null&&m.memoizedState.cachePool!==null){var v=m.memoizedState.cachePool.pool;v!=null&&v.refCount++}break;case 24:Tm(m.memoizedState.cache)}if(v=m.child,v!==null)v.return=m,zr=v;else e:for(m=o;zr!==null;){v=zr;var S=v.sibling,I=v.return;if(xD(v),v===m){zr=null;break e}if(S!==null){S.return=I,zr=S;break e}zr=I}}}var Y8={getCacheForType:function(o){var u=Jr(pr),m=u.data.get(o);return m===void 0&&(m=o(),u.data.set(o,m)),m},cacheSignal:function(){return Jr(pr).controller.signal}},Z8=typeof WeakMap=="function"?WeakMap:Map,Yt=0,hn=null,At=null,Pt=0,en=0,Na=null,bu=!1,Tf=!1,Iw=!1,fl=0,Zn=0,wu=0,rd=0,Nw=0,Pa=0,Sf=0,zm=null,sa=null,Pw=!1,$y=0,PD=0,Ky=1/0,Wy=null,Eu=null,Cr=0,Tu=null,Af=null,hl=0,Dw=0,Rw=null,DD=null,qm=0,kw=null;function Da(){return(Yt&2)!==0&&Pt!==0?Pt&-Pt:ee.T!==null?Uw():tt()}function RD(){if(Pa===0)if((Pt&536870912)===0||St){var o=ws;ws<<=1,(ws&3932160)===0&&(ws=262144),Pa=o}else Pa=536870912;return o=Ca.current,o!==null&&(o.flags|=32),Pa}function oa(o,u,m){(o===hn&&(en===2||en===9)||o.cancelPendingCommit!==null)&&(Cf(o,0),Su(o,Pt,Pa,!1)),Ka(o,m),((Yt&2)===0||o!==hn)&&(o===hn&&((Yt&2)===0&&(rd|=m),Zn===4&&Su(o,Pt,Pa,!1)),xo(o))}function kD(o,u,m){if((Yt&6)!==0)throw Error(r(327));var v=!m&&(u&127)===0&&(u&o.expiredLanes)===0||Gi(o,u),S=v?X8(o,u):Ow(o,u,!0),I=v;do{if(S===0){Tf&&!v&&Su(o,u,0,!1);break}else{if(m=o.current.alternate,I&&!J8(m)){S=Ow(o,u,!1),I=!1;continue}if(S===2){if(I=u,o.errorRecoveryDisabledLanes&I)var V=0;else V=o.pendingLanes&-536870913,V=V!==0?V:V&536870912?536870912:0;if(V!==0){u=V;e:{var Y=o;S=zm;var ne=Y.current.memoizedState.isDehydrated;if(ne&&(Cf(Y,V).flags|=256),V=Ow(Y,V,!1),V!==2){if(Iw&&!ne){Y.errorRecoveryDisabledLanes|=I,rd|=I,S=4;break e}I=sa,sa=S,I!==null&&(sa===null?sa=I:sa.push.apply(sa,I))}S=V}if(I=!1,S!==2)continue}}if(S===1){Cf(o,0),Su(o,u,0,!0);break}e:{switch(v=o,I=S,I){case 0:case 1:throw Error(r(345));case 4:if((u&4194048)!==u)break;case 6:Su(v,u,Pa,!bu);break e;case 2:sa=null;break;case 3:case 5:break;default:throw Error(r(329))}if((u&62914560)===u&&(S=$y+300-Tr(),10<S)){if(Su(v,u,Pa,!bu),ya(v,0,!0)!==0)break e;hl=u,v.timeoutHandle=cR(MD.bind(null,v,m,sa,Wy,Pw,u,Pa,rd,Sf,bu,I,"Throttled",-0,0),S);break e}MD(v,m,sa,Wy,Pw,u,Pa,rd,Sf,bu,I,null,-0,0)}}break}while(!0);xo(o)}function MD(o,u,m,v,S,I,V,Y,ne,me,Ae,Re,ye,_e){if(o.timeoutHandle=-1,Re=u.subtreeFlags,Re&8192||(Re&16785408)===16785408){Re={stylesheets:null,count:0,imgCount:0,imgBytes:0,suspenseyImages:[],waitingForImages:!0,waitingForViewTransition:!1,unsuspend:ui},AD(u,I,Re);var We=(I&62914560)===I?$y-Tr():(I&4194048)===I?PD-Tr():0;if(We=O9(Re,We),We!==null){hl=I,o.cancelPendingCommit=We(zD.bind(null,o,u,I,m,v,S,V,Y,ne,Ae,Re,null,ye,_e)),Su(o,I,V,!me);return}}zD(o,u,I,m,v,S,V,Y,ne)}function J8(o){for(var u=o;;){var m=u.tag;if((m===0||m===11||m===15)&&u.flags&16384&&(m=u.updateQueue,m!==null&&(m=m.stores,m!==null)))for(var v=0;v<m.length;v++){var S=m[v],I=S.getSnapshot;S=S.value;try{if(!Fr(I(),S))return!1}catch{return!1}}if(m=u.child,u.subtreeFlags&16384&&m!==null)m.return=u,u=m;else{if(u===o)break;for(;u.sibling===null;){if(u.return===null||u.return===o)return!0;u=u.return}u.sibling.return=u.return,u=u.sibling}}return!0}function Su(o,u,m,v){u&=~Nw,u&=~rd,o.suspendedLanes|=u,o.pingedLanes&=~u,v&&(o.warmLanes|=u),v=o.expirationTimes;for(var S=u;0<S;){var I=31-Pn(S),V=1<<I;v[I]=-1,S&=~V}m!==0&&Qs(o,m,u)}function Yy(){return(Yt&6)===0?(Hm(0),!1):!0}function Mw(){if(At!==null){if(en===0)var o=At.return;else o=At,Ms=yo=null,Zb(o),yf=null,Am=0,o=At;for(;o!==null;)dD(o.alternate,o),o=o.return;At=null}}function Cf(o,u){var m=o.timeoutHandle;m!==-1&&(o.timeoutHandle=-1,y9(m)),m=o.cancelPendingCommit,m!==null&&(o.cancelPendingCommit=null,m()),hl=0,Mw(),hn=o,At=m=is(o.current,null),Pt=u,en=0,Na=null,bu=!1,Tf=Gi(o,u),Iw=!1,Sf=Pa=Nw=rd=wu=Zn=0,sa=zm=null,Pw=!1,(u&8)!==0&&(u|=u&32);var v=o.entangledLanes;if(v!==0)for(o=o.entanglements,v&=u;0<v;){var S=31-Pn(v),I=1<<S;u|=o[S],v&=~I}return fl=u,Hc(),m}function OD(o,u){pt=null,ee.H=Mm,u===gf||u===Ty?(u=JN(),en=3):u===Vb?(u=JN(),en=4):en=u===fw?8:u!==null&&typeof u=="object"&&typeof u.then=="function"?6:1,Na=u,At===null&&(Zn=1,Vy(o,y(u,o.current)))}function jD(){var o=Ca.current;return o===null?!0:(Pt&4194048)===Pt?as===null:(Pt&62914560)===Pt||(Pt&536870912)!==0?o===as:!1}function LD(){var o=ee.H;return ee.H=Mm,o===null?Mm:o}function VD(){var o=ee.A;return ee.A=Y8,o}function Zy(){Zn=4,bu||(Pt&4194048)!==Pt&&Ca.current!==null||(Tf=!0),(wu&134217727)===0&&(rd&134217727)===0||hn===null||Su(hn,Pt,Pa,!1)}function Ow(o,u,m){var v=Yt;Yt|=2;var S=LD(),I=VD();(hn!==o||Pt!==u)&&(Wy=null,Cf(o,u)),u=!1;var V=Zn;e:do try{if(en!==0&&At!==null){var Y=At,ne=Na;switch(en){case 8:Mw(),V=6;break e;case 3:case 2:case 9:case 6:Ca.current===null&&(u=!0);var me=en;if(en=0,Na=null,If(o,Y,ne,me),m&&Tf){V=0;break e}break;default:me=en,en=0,Na=null,If(o,Y,ne,me)}}Q8(),V=Zn;break}catch(Ae){OD(o,Ae)}while(!0);return u&&o.shellSuspendCounter++,Ms=yo=null,Yt=v,ee.H=S,ee.A=I,At===null&&(hn=null,Pt=0,Hc()),V}function Q8(){for(;At!==null;)UD(At)}function X8(o,u){var m=Yt;Yt|=2;var v=LD(),S=VD();hn!==o||Pt!==u?(Wy=null,Ky=Tr()+500,Cf(o,u)):Tf=Gi(o,u);e:do try{if(en!==0&&At!==null){u=At;var I=Na;t:switch(en){case 1:en=0,Na=null,If(o,u,I,1);break;case 2:case 9:if(YN(I)){en=0,Na=null,FD(u);break}u=function(){en!==2&&en!==9||hn!==o||(en=7),xo(o)},I.then(u,u);break e;case 3:en=7;break e;case 4:en=5;break e;case 7:YN(I)?(en=0,Na=null,FD(u)):(en=0,Na=null,If(o,u,I,7));break;case 5:var V=null;switch(At.tag){case 26:V=At.memoizedState;case 5:case 27:var Y=At;if(V?SR(V):Y.stateNode.complete){en=0,Na=null;var ne=Y.sibling;if(ne!==null)At=ne;else{var me=Y.return;me!==null?(At=me,Jy(me)):At=null}break t}}en=0,Na=null,If(o,u,I,5);break;case 6:en=0,Na=null,If(o,u,I,6);break;case 8:Mw(),Zn=6;break e;default:throw Error(r(462))}}e9();break}catch(Ae){OD(o,Ae)}while(!0);return Ms=yo=null,ee.H=v,ee.A=S,Yt=m,At!==null?0:(hn=null,Pt=0,Hc(),Zn)}function e9(){for(;At!==null&&!Zl();)UD(At)}function UD(o){var u=uD(o.alternate,o,fl);o.memoizedProps=o.pendingProps,u===null?Jy(o):At=u}function FD(o){var u=o,m=u.alternate;switch(u.tag){case 15:case 0:u=rD(m,u,u.pendingProps,u.type,void 0,Pt);break;case 11:u=rD(m,u,u.pendingProps,u.type.render,u.ref,Pt);break;case 5:Zb(u);default:dD(m,u),u=At=xm(u,fl),u=uD(m,u,fl)}o.memoizedProps=o.pendingProps,u===null?Jy(o):At=u}function If(o,u,m,v){Ms=yo=null,Zb(u),yf=null,Am=0;var S=u.return;try{if(z8(o,S,u,m,Pt)){Zn=1,Vy(o,y(m,o.current)),At=null;return}}catch(I){if(S!==null)throw At=S,I;Zn=1,Vy(o,y(m,o.current)),At=null;return}u.flags&32768?(St||v===1?o=!0:Tf||(Pt&536870912)!==0?o=!1:(bu=o=!0,(v===2||v===9||v===3||v===6)&&(v=Ca.current,v!==null&&v.tag===13&&(v.flags|=16384))),BD(u,o)):Jy(u)}function Jy(o){var u=o;do{if((u.flags&32768)!==0){BD(u,bu);return}o=u.return;var m=G8(u.alternate,u,fl);if(m!==null){At=m;return}if(u=u.sibling,u!==null){At=u;return}At=u=o}while(u!==null);Zn===0&&(Zn=5)}function BD(o,u){do{var m=$8(o.alternate,o);if(m!==null){m.flags&=32767,At=m;return}if(m=o.return,m!==null&&(m.flags|=32768,m.subtreeFlags=0,m.deletions=null),!u&&(o=o.sibling,o!==null)){At=o;return}At=o=m}while(o!==null);Zn=6,At=null}function zD(o,u,m,v,S,I,V,Y,ne){o.cancelPendingCommit=null;do Qy();while(Cr!==0);if((Yt&6)!==0)throw Error(r(327));if(u!==null){if(u===o.current)throw Error(r(177));if(I=u.lanes|u.childLanes,I|=uf,Qd(o,m,I,V,Y,ne),o===hn&&(At=hn=null,Pt=0),Af=u,Tu=o,hl=m,Dw=I,Rw=S,DD=v,(u.subtreeFlags&10256)!==0||(u.flags&10256)!==0?(o.callbackNode=null,o.callbackPriority=0,i9(pa,function(){return KD(),null})):(o.callbackNode=null,o.callbackPriority=0),v=(u.flags&13878)!==0,(u.subtreeFlags&13878)!==0||v){v=ee.T,ee.T=null,S=re.p,re.p=2,V=Yt,Yt|=4;try{K8(o,u,m)}finally{Yt=V,re.p=S,ee.T=v}}Cr=1,qD(),HD(),GD()}}function qD(){if(Cr===1){Cr=0;var o=Tu,u=Af,m=(u.flags&13878)!==0;if((u.subtreeFlags&13878)!==0||m){m=ee.T,ee.T=null;var v=re.p;re.p=2;var S=Yt;Yt|=4;try{ED(u,o);var I=Kw,V=Uc(o.containerInfo),Y=I.focusedElem,ne=I.selectionRange;if(V!==Y&&Y&&Y.ownerDocument&&af(Y.ownerDocument.documentElement,Y)){if(ne!==null&&uo(Y)){var me=ne.start,Ae=ne.end;if(Ae===void 0&&(Ae=me),"selectionStart"in Y)Y.selectionStart=me,Y.selectionEnd=Math.min(Ae,Y.value.length);else{var Re=Y.ownerDocument||document,ye=Re&&Re.defaultView||window;if(ye.getSelection){var _e=ye.getSelection(),We=Y.textContent.length,ot=Math.min(ne.start,We),un=ne.end===void 0?ot:Math.min(ne.end,We);!_e.extend&&ot>un&&(V=un,un=ot,ot=V);var se=Vc(Y,ot),ie=Vc(Y,un);if(se&&ie&&(_e.rangeCount!==1||_e.anchorNode!==se.node||_e.anchorOffset!==se.offset||_e.focusNode!==ie.node||_e.focusOffset!==ie.offset)){var fe=Re.createRange();fe.setStart(se.node,se.offset),_e.removeAllRanges(),ot>un?(_e.addRange(fe),_e.extend(ie.node,ie.offset)):(fe.setEnd(ie.node,ie.offset),_e.addRange(fe))}}}}for(Re=[],_e=Y;_e=_e.parentNode;)_e.nodeType===1&&Re.push({element:_e,left:_e.scrollLeft,top:_e.scrollTop});for(typeof Y.focus=="function"&&Y.focus(),Y=0;Y<Re.length;Y++){var Ie=Re[Y];Ie.element.scrollLeft=Ie.left,Ie.element.scrollTop=Ie.top}}cv=!!$w,Kw=$w=null}finally{Yt=S,re.p=v,ee.T=m}}o.current=u,Cr=2}}function HD(){if(Cr===2){Cr=0;var o=Tu,u=Af,m=(u.flags&8772)!==0;if((u.subtreeFlags&8772)!==0||m){m=ee.T,ee.T=null;var v=re.p;re.p=2;var S=Yt;Yt|=4;try{vD(o,u.alternate,u)}finally{Yt=S,re.p=v,ee.T=m}}Cr=3}}function GD(){if(Cr===4||Cr===3){Cr=0,Ys();var o=Tu,u=Af,m=hl,v=DD;(u.subtreeFlags&10256)!==0||(u.flags&10256)!==0?Cr=5:(Cr=0,Af=Tu=null,$D(o,o.pendingLanes));var S=o.pendingLanes;if(S===0&&(Eu=null),ae(m),u=u.stateNode,$n&&typeof $n.onCommitFiberRoot=="function")try{$n.onCommitFiberRoot(Ni,u,void 0,(u.current.flags&128)===128)}catch{}if(v!==null){u=ee.T,S=re.p,re.p=2,ee.T=null;try{for(var I=o.onRecoverableError,V=0;V<v.length;V++){var Y=v[V];I(Y.value,{componentStack:Y.stack})}}finally{ee.T=u,re.p=S}}(hl&3)!==0&&Qy(),xo(o),S=o.pendingLanes,(m&261930)!==0&&(S&42)!==0?o===kw?qm++:(qm=0,kw=o):qm=0,Hm(0)}}function $D(o,u){(o.pooledCacheLanes&=u)===0&&(u=o.pooledCache,u!=null&&(o.pooledCache=null,Tm(u)))}function Qy(){return qD(),HD(),GD(),KD()}function KD(){if(Cr!==5)return!1;var o=Tu,u=Dw;Dw=0;var m=ae(hl),v=ee.T,S=re.p;try{re.p=32>m?32:m,ee.T=null,m=Rw,Rw=null;var I=Tu,V=hl;if(Cr=0,Af=Tu=null,hl=0,(Yt&6)!==0)throw Error(r(331));var Y=Yt;if(Yt|=4,ID(I.current),SD(I,I.current,V,m),Yt=Y,Hm(0,!1),$n&&typeof $n.onPostCommitFiberRoot=="function")try{$n.onPostCommitFiberRoot(Ni,I)}catch{}return!0}finally{re.p=S,ee.T=v,$D(o,u)}}function WD(o,u,m){u=y(m,u),u=dw(o.stateNode,u,2),o=yu(o,u,2),o!==null&&(Ka(o,2),xo(o))}function tn(o,u,m){if(o.tag===3)WD(o,o,m);else for(;u!==null;){if(u.tag===3){WD(u,o,m);break}else if(u.tag===1){var v=u.stateNode;if(typeof u.type.getDerivedStateFromError=="function"||typeof v.componentDidCatch=="function"&&(Eu===null||!Eu.has(v))){o=y(m,o),m=YP(2),v=yu(u,m,2),v!==null&&(ZP(m,v,u,o),Ka(v,2),xo(v));break}}u=u.return}}function jw(o,u,m){var v=o.pingCache;if(v===null){v=o.pingCache=new Z8;var S=new Set;v.set(u,S)}else S=v.get(u),S===void 0&&(S=new Set,v.set(u,S));S.has(m)||(Iw=!0,S.add(m),o=t9.bind(null,o,u,m),u.then(o,o))}function t9(o,u,m){var v=o.pingCache;v!==null&&v.delete(u),o.pingedLanes|=o.suspendedLanes&m,o.warmLanes&=~m,hn===o&&(Pt&m)===m&&(Zn===4||Zn===3&&(Pt&62914560)===Pt&&300>Tr()-$y?(Yt&2)===0&&Cf(o,0):Nw|=m,Sf===Pt&&(Sf=0)),xo(o)}function YD(o,u){u===0&&(u=Cc()),o=rs(o,u),o!==null&&(Ka(o,u),xo(o))}function n9(o){var u=o.memoizedState,m=0;u!==null&&(m=u.retryLane),YD(o,m)}function r9(o,u){var m=0;switch(o.tag){case 31:case 13:var v=o.stateNode,S=o.memoizedState;S!==null&&(m=S.retryLane);break;case 19:v=o.stateNode;break;case 22:v=o.stateNode._retryCache;break;default:throw Error(r(314))}v!==null&&v.delete(u),YD(o,m)}function i9(o,u){return Nn(o,u)}var Xy=null,Nf=null,Lw=!1,ev=!1,Vw=!1,Au=0;function xo(o){o!==Nf&&o.next===null&&(Nf===null?Xy=Nf=o:Nf=Nf.next=o),ev=!0,Lw||(Lw=!0,s9())}function Hm(o,u){if(!Vw&&ev){Vw=!0;do for(var m=!1,v=Xy;v!==null;){if(o!==0){var S=v.pendingLanes;if(S===0)var I=0;else{var V=v.suspendedLanes,Y=v.pingedLanes;I=(1<<31-Pn(42|o)+1)-1,I&=S&~(V&~Y),I=I&201326741?I&201326741|1:I?I|2:0}I!==0&&(m=!0,XD(v,I))}else I=Pt,I=ya(v,v===hn?I:0,v.cancelPendingCommit!==null||v.timeoutHandle!==-1),(I&3)===0||Gi(v,I)||(m=!0,XD(v,I));v=v.next}while(m);Vw=!1}}function a9(){ZD()}function ZD(){ev=Lw=!1;var o=0;Au!==0&&g9()&&(o=Au);for(var u=Tr(),m=null,v=Xy;v!==null;){var S=v.next,I=JD(v,u);I===0?(v.next=null,m===null?Xy=S:m.next=S,S===null&&(Nf=m)):(m=v,(o!==0||(I&3)!==0)&&(ev=!0)),v=S}Cr!==0&&Cr!==5||Hm(o),Au!==0&&(Au=0)}function JD(o,u){for(var m=o.suspendedLanes,v=o.pingedLanes,S=o.expirationTimes,I=o.pendingLanes&-62914561;0<I;){var V=31-Pn(I),Y=1<<V,ne=S[V];ne===-1?((Y&m)===0||(Y&v)!==0)&&(S[V]=Jd(Y,u)):ne<=u&&(o.expiredLanes|=Y),I&=~Y}if(u=hn,m=Pt,m=ya(o,o===u?m:0,o.cancelPendingCommit!==null||o.timeoutHandle!==-1),v=o.callbackNode,m===0||o===u&&(en===2||en===9)||o.cancelPendingCommit!==null)return v!==null&&v!==null&&qi(v),o.callbackNode=null,o.callbackPriority=0;if((m&3)===0||Gi(o,m)){if(u=m&-m,u===o.callbackPriority)return u;switch(v!==null&&qi(v),ae(m)){case 2:case 8:m=Zs;break;case 32:m=pa;break;case 268435456:m=qo;break;default:m=pa}return v=QD.bind(null,o),m=Nn(m,v),o.callbackPriority=u,o.callbackNode=m,u}return v!==null&&v!==null&&qi(v),o.callbackPriority=2,o.callbackNode=null,2}function QD(o,u){if(Cr!==0&&Cr!==5)return o.callbackNode=null,o.callbackPriority=0,null;var m=o.callbackNode;if(Qy()&&o.callbackNode!==m)return null;var v=Pt;return v=ya(o,o===hn?v:0,o.cancelPendingCommit!==null||o.timeoutHandle!==-1),v===0?null:(kD(o,v,u),JD(o,Tr()),o.callbackNode!=null&&o.callbackNode===m?QD.bind(null,o):null)}function XD(o,u){if(Qy())return null;kD(o,u,!0)}function s9(){v9(function(){(Yt&6)!==0?Nn(_s,a9):ZD()})}function Uw(){if(Au===0){var o=mf;o===0&&(o=Hi,Hi<<=1,(Hi&261888)===0&&(Hi=256)),Au=o}return Au}function eR(o){return o==null||typeof o=="symbol"||typeof o=="boolean"?null:typeof o=="function"?o:io(""+o)}function tR(o,u){var m=u.ownerDocument.createElement("input");return m.name=u.name,m.value=u.value,o.id&&m.setAttribute("form",o.id),u.parentNode.insertBefore(m,u),o=new FormData(o),m.parentNode.removeChild(m),o}function o9(o,u,m,v,S){if(u==="submit"&&m&&m.stateNode===S){var I=eR((S[Jt]||null).action),V=v.submitter;V&&(u=(u=V[Jt]||null)?eR(u.formAction):V.getAttribute("formAction"),u!==null&&(I=u,V=null));var Y=new Xa("action","action",null,v,S);o.push({event:Y,listeners:[{instance:null,listener:function(){if(v.defaultPrevented){if(Au!==0){var ne=V?tR(S,V):new FormData(S);aw(m,{pending:!0,data:ne,method:S.method,action:I},null,ne)}}else typeof I=="function"&&(Y.preventDefault(),ne=V?tR(S,V):new FormData(S),aw(m,{pending:!0,data:ne,method:S.method,action:I},I,ne))},currentTarget:S}]})}}for(var Fw=0;Fw<ho.length;Fw++){var Bw=ho[Fw],l9=Bw.toLowerCase(),u9=Bw[0].toUpperCase()+Bw.slice(1);ea(l9,"on"+u9)}ea(Bc,"onAnimationEnd"),ea(vy,"onAnimationIteration"),ea(zc,"onAnimationStart"),ea("dblclick","onDoubleClick"),ea("focusin","onFocus"),ea("focusout","onBlur"),ea(Pb,"onTransitionRun"),ea(xy,"onTransitionStart"),ea(Db,"onTransitionCancel"),ea(fu,"onTransitionEnd"),Wi("onMouseEnter",["mouseout","mouseover"]),Wi("onMouseLeave",["mouseout","mouseover"]),Wi("onPointerEnter",["pointerout","pointerover"]),Wi("onPointerLeave",["pointerout","pointerover"]),Wa("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),Wa("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),Wa("onBeforeInput",["compositionend","keypress","textInput","paste"]),Wa("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),Wa("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),Wa("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Gm="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),c9=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(Gm));function nR(o,u){u=(u&4)!==0;for(var m=0;m<o.length;m++){var v=o[m],S=v.event;v=v.listeners;e:{var I=void 0;if(u)for(var V=v.length-1;0<=V;V--){var Y=v[V],ne=Y.instance,me=Y.currentTarget;if(Y=Y.listener,ne!==I&&S.isPropagationStopped())break e;I=Y,S.currentTarget=me;try{I(S)}catch(Ae){qc(Ae)}S.currentTarget=null,I=ne}else for(V=0;V<v.length;V++){if(Y=v[V],ne=Y.instance,me=Y.currentTarget,Y=Y.listener,ne!==I&&S.isPropagationStopped())break e;I=Y,S.currentTarget=me;try{I(S)}catch(Ae){qc(Ae)}S.currentTarget=null,I=ne}}}}function Ct(o,u){var m=u[Kn];m===void 0&&(m=u[Kn]=new Set);var v=o+"__bubble";m.has(v)||(rR(u,o,2,!1),m.add(v))}function zw(o,u,m){var v=0;u&&(v|=4),rR(m,o,v,u)}var tv="_reactListening"+Math.random().toString(36).slice(2);function qw(o){if(!o[tv]){o[tv]=!0,to.forEach(function(m){m!=="selectionchange"&&(c9.has(m)||zw(m,!1,o),zw(m,!0,o))});var u=o.nodeType===9?o:o.ownerDocument;u===null||u[tv]||(u[tv]=!0,zw("selectionchange",!1,u))}}function rR(o,u,m,v){switch(RR(u)){case 2:var S=V9;break;case 8:S=U9;break;default:S=iE}m=S.bind(null,u,m,o),S=void 0,!As||u!=="touchstart"&&u!=="touchmove"&&u!=="wheel"||(S=!0),v?S!==void 0?o.addEventListener(u,m,{capture:!0,passive:S}):o.addEventListener(u,m,!0):S!==void 0?o.addEventListener(u,m,{passive:S}):o.addEventListener(u,m,!1)}function Hw(o,u,m,v,S){var I=v;if((u&1)===0&&(u&2)===0&&v!==null)e:for(;;){if(v===null)return;var V=v.tag;if(V===3||V===4){var Y=v.stateNode.containerInfo;if(Y===S)break;if(V===4)for(V=v.return;V!==null;){var ne=V.tag;if((ne===3||ne===4)&&V.stateNode.containerInfo===S)return;V=V.return}for(;Y!==null;){if(V=Pi(Y),V===null)return;if(ne=V.tag,ne===5||ne===6||ne===26||ne===27){v=I=V;continue e}Y=Y.parentNode}}v=v.return}Ss(function(){var me=I,Ae=ci(m),Re=[];e:{var ye=_y.get(o);if(ye!==void 0){var _e=Xa,We=o;switch(o){case"keypress":if(so(m)===0)break e;case"keydown":case"keyup":_e=kc;break;case"focusin":We="focus",_e=Jo;break;case"focusout":We="blur",_e=Jo;break;case"beforeblur":case"afterblur":_e=Jo;break;case"click":if(m.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":_e=Ic;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":_e=Xd;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":_e=k;break;case Bc:case vy:case zc:_e=nu;break;case fu:_e=Q;break;case"scroll":case"scrollend":_e=bt;break;case"wheel":_e=ve;break;case"copy":case"cut":case"paste":_e=ki;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":_e=Ps;break;case"toggle":case"beforetoggle":_e=ct}var ot=(u&4)!==0,un=!ot&&(o==="scroll"||o==="scrollend"),se=ot?ye!==null?ye+"Capture":null:ye;ot=[];for(var ie=me,fe;ie!==null;){var Ie=ie;if(fe=Ie.stateNode,Ie=Ie.tag,Ie!==5&&Ie!==26&&Ie!==27||fe===null||se===null||(Ie=Ri(ie,se),Ie!=null&&ot.push($m(ie,Ie,fe))),un)break;ie=ie.return}0<ot.length&&(ye=new _e(ye,We,null,m,Ae),Re.push({event:ye,listeners:ot}))}}if((u&7)===0){e:{if(ye=o==="mouseover"||o==="pointerover",_e=o==="mouseout"||o==="pointerout",ye&&m!==tu&&(We=m.relatedTarget||m.fromElement)&&(Pi(We)||We[fr]))break e;if((_e||ye)&&(ye=Ae.window===Ae?Ae:(ye=Ae.ownerDocument)?ye.defaultView||ye.parentWindow:window,_e?(We=m.relatedTarget||m.toElement,_e=me,We=We?Pi(We):null,We!==null&&(un=a(We),ot=We.tag,We!==un||ot!==5&&ot!==27&&ot!==6)&&(We=null)):(_e=null,We=me),_e!==We)){if(ot=Ic,Ie="onMouseLeave",se="onMouseEnter",ie="mouse",(o==="pointerout"||o==="pointerover")&&(ot=Ps,Ie="onPointerLeave",se="onPointerEnter",ie="pointer"),un=_e==null?ye:nr(_e),fe=We==null?ye:nr(We),ye=new ot(Ie,ie+"leave",_e,m,Ae),ye.target=un,ye.relatedTarget=fe,Ie=null,Pi(Ae)===me&&(ot=new ot(se,ie+"enter",We,m,Ae),ot.target=fe,ot.relatedTarget=un,Ie=ot),un=Ie,_e&&We)t:{for(ot=d9,se=_e,ie=We,fe=0,Ie=se;Ie;Ie=ot(Ie))fe++;Ie=0;for(var it=ie;it;it=ot(it))Ie++;for(;0<fe-Ie;)se=ot(se),fe--;for(;0<Ie-fe;)ie=ot(ie),Ie--;for(;fe--;){if(se===ie||ie!==null&&se===ie.alternate){ot=se;break t}se=ot(se),ie=ot(ie)}ot=null}else ot=null;_e!==null&&iR(Re,ye,_e,ot,!1),We!==null&&un!==null&&iR(Re,un,We,ot,!0)}}e:{if(ye=me?nr(me):window,_e=ye.nodeName&&ye.nodeName.toLowerCase(),_e==="select"||_e==="input"&&ye.type==="file")var qt=Lc;else if(es(ye))if(hy)qt=Nb;else{qt=Ib;var et=Ds}else _e=ye.nodeName,!_e||_e.toLowerCase()!=="input"||ye.type!=="checkbox"&&ye.type!=="radio"?me&&ro(me.elementType)&&(qt=Lc):qt=lu;if(qt&&(qt=qt(o,me))){fy(Re,qt,m,Ae);break e}et&&et(o,ye,me),o==="focusout"&&me&&ye.type==="number"&&me.memoizedProps.value!=null&&xa(ye,"number",ye.value)}switch(et=me?nr(me):window,o){case"focusin":(es(et)||et.contentEditable==="true")&&(co=et,of=me,Fc=null);break;case"focusout":Fc=of=co=null;break;case"mousedown":cu=!0;break;case"contextmenu":case"mouseup":case"dragend":cu=!1,gy(Re,m,Ae);break;case"selectionchange":if(sf)break;case"keydown":case"keyup":gy(Re,m,Ae)}var xt;if(Ot)e:{switch(o){case"compositionstart":var Dt="onCompositionStart";break e;case"compositionend":Dt="onCompositionEnd";break e;case"compositionupdate":Dt="onCompositionUpdate";break e}Dt=void 0}else au?Qo(o,m)&&(Dt="onCompositionEnd"):o==="keydown"&&m.keyCode===229&&(Dt="onCompositionStart");Dt&&(Xi&&m.locale!=="ko"&&(au||Dt!=="onCompositionStart"?Dt==="onCompositionEnd"&&au&&(xt=_a()):(Ji=Ae,Cs="value"in Ji?Ji.value:Ji.textContent,au=!0)),et=nv(me,Dt),0<et.length&&(Dt=new Ea(Dt,o,null,m,Ae),Re.push({event:Dt,listeners:et}),xt?Dt.data=xt:(xt=Xo(m),xt!==null&&(Dt.data=xt)))),(xt=Qi?Aa(o,m):su(o,m))&&(Dt=nv(me,"onBeforeInput"),0<Dt.length&&(et=new Ea("onBeforeInput","beforeinput",null,m,Ae),Re.push({event:et,listeners:Dt}),et.data=xt)),o9(Re,o,me,m,Ae)}nR(Re,u)})}function $m(o,u,m){return{instance:o,listener:u,currentTarget:m}}function nv(o,u){for(var m=u+"Capture",v=[];o!==null;){var S=o,I=S.stateNode;if(S=S.tag,S!==5&&S!==26&&S!==27||I===null||(S=Ri(o,m),S!=null&&v.unshift($m(o,S,I)),S=Ri(o,u),S!=null&&v.push($m(o,S,I))),o.tag===3)return v;o=o.return}return[]}function d9(o){if(o===null)return null;do o=o.return;while(o&&o.tag!==5&&o.tag!==27);return o||null}function iR(o,u,m,v,S){for(var I=u._reactName,V=[];m!==null&&m!==v;){var Y=m,ne=Y.alternate,me=Y.stateNode;if(Y=Y.tag,ne!==null&&ne===v)break;Y!==5&&Y!==26&&Y!==27||me===null||(ne=me,S?(me=Ri(m,I),me!=null&&V.unshift($m(m,me,ne))):S||(me=Ri(m,I),me!=null&&V.push($m(m,me,ne)))),m=m.return}V.length!==0&&o.push({event:u,listeners:V})}var f9=/\r\n?/g,h9=/\u0000|\uFFFD/g;function aR(o){return(typeof o=="string"?o:""+o).replace(f9,`
`).replace(h9,"")}function sR(o,u){return u=aR(u),aR(o)===u}function ln(o,u,m,v,S,I){switch(m){case"children":typeof v=="string"?u==="body"||u==="textarea"&&v===""||hr(o,v):(typeof v=="number"||typeof v=="bigint")&&u!=="body"&&hr(o,""+v);break;case"className":Tt(o,"class",v);break;case"tabIndex":Tt(o,"tabindex",v);break;case"dir":case"role":case"viewBox":case"width":case"height":Tt(o,m,v);break;case"style":Wo(o,v,I);break;case"data":if(u!=="object"){Tt(o,"data",v);break}case"src":case"href":if(v===""&&(u!=="a"||m!=="href")){o.removeAttribute(m);break}if(v==null||typeof v=="function"||typeof v=="symbol"||typeof v=="boolean"){o.removeAttribute(m);break}v=io(""+v),o.setAttribute(m,v);break;case"action":case"formAction":if(typeof v=="function"){o.setAttribute(m,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof I=="function"&&(m==="formAction"?(u!=="input"&&ln(o,u,"name",S.name,S,null),ln(o,u,"formEncType",S.formEncType,S,null),ln(o,u,"formMethod",S.formMethod,S,null),ln(o,u,"formTarget",S.formTarget,S,null)):(ln(o,u,"encType",S.encType,S,null),ln(o,u,"method",S.method,S,null),ln(o,u,"target",S.target,S,null)));if(v==null||typeof v=="symbol"||typeof v=="boolean"){o.removeAttribute(m);break}v=io(""+v),o.setAttribute(m,v);break;case"onClick":v!=null&&(o.onclick=ui);break;case"onScroll":v!=null&&Ct("scroll",o);break;case"onScrollEnd":v!=null&&Ct("scrollend",o);break;case"dangerouslySetInnerHTML":if(v!=null){if(typeof v!="object"||!("__html"in v))throw Error(r(61));if(m=v.__html,m!=null){if(S.children!=null)throw Error(r(60));o.innerHTML=m}}break;case"multiple":o.multiple=v&&typeof v!="function"&&typeof v!="symbol";break;case"muted":o.muted=v&&typeof v!="function"&&typeof v!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(v==null||typeof v=="function"||typeof v=="boolean"||typeof v=="symbol"){o.removeAttribute("xlink:href");break}m=io(""+v),o.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",m);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":v!=null&&typeof v!="function"&&typeof v!="symbol"?o.setAttribute(m,""+v):o.removeAttribute(m);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":v&&typeof v!="function"&&typeof v!="symbol"?o.setAttribute(m,""):o.removeAttribute(m);break;case"capture":case"download":v===!0?o.setAttribute(m,""):v!==!1&&v!=null&&typeof v!="function"&&typeof v!="symbol"?o.setAttribute(m,v):o.removeAttribute(m);break;case"cols":case"rows":case"size":case"span":v!=null&&typeof v!="function"&&typeof v!="symbol"&&!isNaN(v)&&1<=v?o.setAttribute(m,v):o.removeAttribute(m);break;case"rowSpan":case"start":v==null||typeof v=="function"||typeof v=="symbol"||isNaN(v)?o.removeAttribute(m):o.setAttribute(m,v);break;case"popover":Ct("beforetoggle",o),Ct("toggle",o),wt(o,"popover",v);break;case"xlinkActuate":bn(o,"http://www.w3.org/1999/xlink","xlink:actuate",v);break;case"xlinkArcrole":bn(o,"http://www.w3.org/1999/xlink","xlink:arcrole",v);break;case"xlinkRole":bn(o,"http://www.w3.org/1999/xlink","xlink:role",v);break;case"xlinkShow":bn(o,"http://www.w3.org/1999/xlink","xlink:show",v);break;case"xlinkTitle":bn(o,"http://www.w3.org/1999/xlink","xlink:title",v);break;case"xlinkType":bn(o,"http://www.w3.org/1999/xlink","xlink:type",v);break;case"xmlBase":bn(o,"http://www.w3.org/XML/1998/namespace","xml:base",v);break;case"xmlLang":bn(o,"http://www.w3.org/XML/1998/namespace","xml:lang",v);break;case"xmlSpace":bn(o,"http://www.w3.org/XML/1998/namespace","xml:space",v);break;case"is":wt(o,"is",v);break;case"innerText":case"textContent":break;default:(!(2<m.length)||m[0]!=="o"&&m[0]!=="O"||m[1]!=="n"&&m[1]!=="N")&&(m=Yo.get(m)||m,wt(o,m,v))}}function Gw(o,u,m,v,S,I){switch(m){case"style":Wo(o,v,I);break;case"dangerouslySetInnerHTML":if(v!=null){if(typeof v!="object"||!("__html"in v))throw Error(r(61));if(m=v.__html,m!=null){if(S.children!=null)throw Error(r(60));o.innerHTML=m}}break;case"children":typeof v=="string"?hr(o,v):(typeof v=="number"||typeof v=="bigint")&&hr(o,""+v);break;case"onScroll":v!=null&&Ct("scroll",o);break;case"onScrollEnd":v!=null&&Ct("scrollend",o);break;case"onClick":v!=null&&(o.onclick=ui);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!Sr.hasOwnProperty(m))e:{if(m[0]==="o"&&m[1]==="n"&&(S=m.endsWith("Capture"),u=m.slice(2,S?m.length-7:void 0),I=o[Jt]||null,I=I!=null?I[m]:null,typeof I=="function"&&o.removeEventListener(u,I,S),typeof v=="function")){typeof I!="function"&&I!==null&&(m in o?o[m]=null:o.hasAttribute(m)&&o.removeAttribute(m)),o.addEventListener(u,v,S);break e}m in o?o[m]=v:v===!0?o.setAttribute(m,""):wt(o,m,v)}}}function Xr(o,u,m){switch(u){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":Ct("error",o),Ct("load",o);var v=!1,S=!1,I;for(I in m)if(m.hasOwnProperty(I)){var V=m[I];if(V!=null)switch(I){case"src":v=!0;break;case"srcSet":S=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(r(137,u));default:ln(o,u,I,V,m,null)}}S&&ln(o,u,"srcSet",m.srcSet,m,null),v&&ln(o,u,"src",m.src,m,null);return;case"input":Ct("invalid",o);var Y=I=V=S=null,ne=null,me=null;for(v in m)if(m.hasOwnProperty(v)){var Ae=m[v];if(Ae!=null)switch(v){case"name":S=Ae;break;case"type":V=Ae;break;case"checked":ne=Ae;break;case"defaultChecked":me=Ae;break;case"value":I=Ae;break;case"defaultValue":Y=Ae;break;case"children":case"dangerouslySetInnerHTML":if(Ae!=null)throw Error(r(137,u));break;default:ln(o,u,v,Ae,m,null)}}Ko(o,I,Y,ne,me,V,S,!1);return;case"select":Ct("invalid",o),v=V=I=null;for(S in m)if(m.hasOwnProperty(S)&&(Y=m[S],Y!=null))switch(S){case"value":I=Y;break;case"defaultValue":V=Y;break;case"multiple":v=Y;default:ln(o,u,S,Y,m,null)}u=I,m=V,o.multiple=!!v,u!=null?Xt(o,!!v,u,!1):m!=null&&Xt(o,!!v,m,!0);return;case"textarea":Ct("invalid",o),I=S=v=null;for(V in m)if(m.hasOwnProperty(V)&&(Y=m[V],Y!=null))switch(V){case"value":v=Y;break;case"defaultValue":S=Y;break;case"children":I=Y;break;case"dangerouslySetInnerHTML":if(Y!=null)throw Error(r(91));break;default:ln(o,u,V,Y,m,null)}Zi(o,v,S,I);return;case"option":for(ne in m)if(m.hasOwnProperty(ne)&&(v=m[ne],v!=null))switch(ne){case"selected":o.selected=v&&typeof v!="function"&&typeof v!="symbol";break;default:ln(o,u,ne,v,m,null)}return;case"dialog":Ct("beforetoggle",o),Ct("toggle",o),Ct("cancel",o),Ct("close",o);break;case"iframe":case"object":Ct("load",o);break;case"video":case"audio":for(v=0;v<Gm.length;v++)Ct(Gm[v],o);break;case"image":Ct("error",o),Ct("load",o);break;case"details":Ct("toggle",o);break;case"embed":case"source":case"link":Ct("error",o),Ct("load",o);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(me in m)if(m.hasOwnProperty(me)&&(v=m[me],v!=null))switch(me){case"children":case"dangerouslySetInnerHTML":throw Error(r(137,u));default:ln(o,u,me,v,m,null)}return;default:if(ro(u)){for(Ae in m)m.hasOwnProperty(Ae)&&(v=m[Ae],v!==void 0&&Gw(o,u,Ae,v,m,void 0));return}}for(Y in m)m.hasOwnProperty(Y)&&(v=m[Y],v!=null&&ln(o,u,Y,v,m,null))}function m9(o,u,m,v){switch(u){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var S=null,I=null,V=null,Y=null,ne=null,me=null,Ae=null;for(_e in m){var Re=m[_e];if(m.hasOwnProperty(_e)&&Re!=null)switch(_e){case"checked":break;case"value":break;case"defaultValue":ne=Re;default:v.hasOwnProperty(_e)||ln(o,u,_e,null,v,Re)}}for(var ye in v){var _e=v[ye];if(Re=m[ye],v.hasOwnProperty(ye)&&(_e!=null||Re!=null))switch(ye){case"type":I=_e;break;case"name":S=_e;break;case"checked":me=_e;break;case"defaultChecked":Ae=_e;break;case"value":V=_e;break;case"defaultValue":Y=_e;break;case"children":case"dangerouslySetInnerHTML":if(_e!=null)throw Error(r(137,u));break;default:_e!==Re&&ln(o,u,ye,_e,v,Re)}}Xl(o,V,Y,ne,me,Ae,I,S);return;case"select":_e=V=Y=ye=null;for(I in m)if(ne=m[I],m.hasOwnProperty(I)&&ne!=null)switch(I){case"value":break;case"multiple":_e=ne;default:v.hasOwnProperty(I)||ln(o,u,I,null,v,ne)}for(S in v)if(I=v[S],ne=m[S],v.hasOwnProperty(S)&&(I!=null||ne!=null))switch(S){case"value":ye=I;break;case"defaultValue":Y=I;break;case"multiple":V=I;default:I!==ne&&ln(o,u,S,I,v,ne)}u=Y,m=V,v=_e,ye!=null?Xt(o,!!m,ye,!1):!!v!=!!m&&(u!=null?Xt(o,!!m,u,!0):Xt(o,!!m,m?[]:"",!1));return;case"textarea":_e=ye=null;for(Y in m)if(S=m[Y],m.hasOwnProperty(Y)&&S!=null&&!v.hasOwnProperty(Y))switch(Y){case"value":break;case"children":break;default:ln(o,u,Y,null,v,S)}for(V in v)if(S=v[V],I=m[V],v.hasOwnProperty(V)&&(S!=null||I!=null))switch(V){case"value":ye=S;break;case"defaultValue":_e=S;break;case"children":break;case"dangerouslySetInnerHTML":if(S!=null)throw Error(r(91));break;default:S!==I&&ln(o,u,V,S,v,I)}Za(o,ye,_e);return;case"option":for(var We in m)if(ye=m[We],m.hasOwnProperty(We)&&ye!=null&&!v.hasOwnProperty(We))switch(We){case"selected":o.selected=!1;break;default:ln(o,u,We,null,v,ye)}for(ne in v)if(ye=v[ne],_e=m[ne],v.hasOwnProperty(ne)&&ye!==_e&&(ye!=null||_e!=null))switch(ne){case"selected":o.selected=ye&&typeof ye!="function"&&typeof ye!="symbol";break;default:ln(o,u,ne,ye,v,_e)}return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var ot in m)ye=m[ot],m.hasOwnProperty(ot)&&ye!=null&&!v.hasOwnProperty(ot)&&ln(o,u,ot,null,v,ye);for(me in v)if(ye=v[me],_e=m[me],v.hasOwnProperty(me)&&ye!==_e&&(ye!=null||_e!=null))switch(me){case"children":case"dangerouslySetInnerHTML":if(ye!=null)throw Error(r(137,u));break;default:ln(o,u,me,ye,v,_e)}return;default:if(ro(u)){for(var un in m)ye=m[un],m.hasOwnProperty(un)&&ye!==void 0&&!v.hasOwnProperty(un)&&Gw(o,u,un,void 0,v,ye);for(Ae in v)ye=v[Ae],_e=m[Ae],!v.hasOwnProperty(Ae)||ye===_e||ye===void 0&&_e===void 0||Gw(o,u,Ae,ye,v,_e);return}}for(var se in m)ye=m[se],m.hasOwnProperty(se)&&ye!=null&&!v.hasOwnProperty(se)&&ln(o,u,se,null,v,ye);for(Re in v)ye=v[Re],_e=m[Re],!v.hasOwnProperty(Re)||ye===_e||ye==null&&_e==null||ln(o,u,Re,ye,v,_e)}function oR(o){switch(o){case"css":case"script":case"font":case"img":case"image":case"input":case"link":return!0;default:return!1}}function p9(){if(typeof performance.getEntriesByType=="function"){for(var o=0,u=0,m=performance.getEntriesByType("resource"),v=0;v<m.length;v++){var S=m[v],I=S.transferSize,V=S.initiatorType,Y=S.duration;if(I&&Y&&oR(V)){for(V=0,Y=S.responseEnd,v+=1;v<m.length;v++){var ne=m[v],me=ne.startTime;if(me>Y)break;var Ae=ne.transferSize,Re=ne.initiatorType;Ae&&oR(Re)&&(ne=ne.responseEnd,V+=Ae*(ne<Y?1:(Y-me)/(ne-me)))}if(--v,u+=8*(I+V)/(S.duration/1e3),o++,10<o)break}}if(0<o)return u/o/1e6}return navigator.connection&&(o=navigator.connection.downlink,typeof o=="number")?o:5}var $w=null,Kw=null;function rv(o){return o.nodeType===9?o:o.ownerDocument}function lR(o){switch(o){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function uR(o,u){if(o===0)switch(u){case"svg":return 1;case"math":return 2;default:return 0}return o===1&&u==="foreignObject"?0:o}function Ww(o,u){return o==="textarea"||o==="noscript"||typeof u.children=="string"||typeof u.children=="number"||typeof u.children=="bigint"||typeof u.dangerouslySetInnerHTML=="object"&&u.dangerouslySetInnerHTML!==null&&u.dangerouslySetInnerHTML.__html!=null}var Yw=null;function g9(){var o=window.event;return o&&o.type==="popstate"?o===Yw?!1:(Yw=o,!0):(Yw=null,!1)}var cR=typeof setTimeout=="function"?setTimeout:void 0,y9=typeof clearTimeout=="function"?clearTimeout:void 0,dR=typeof Promise=="function"?Promise:void 0,v9=typeof queueMicrotask=="function"?queueMicrotask:typeof dR<"u"?function(o){return dR.resolve(null).then(o).catch(x9)}:cR;function x9(o){setTimeout(function(){throw o})}function Cu(o){return o==="head"}function fR(o,u){var m=u,v=0;do{var S=m.nextSibling;if(o.removeChild(m),S&&S.nodeType===8)if(m=S.data,m==="/$"||m==="/&"){if(v===0){o.removeChild(S),kf(u);return}v--}else if(m==="$"||m==="$?"||m==="$~"||m==="$!"||m==="&")v++;else if(m==="html")Km(o.ownerDocument.documentElement);else if(m==="head"){m=o.ownerDocument.head,Km(m);for(var I=m.firstChild;I;){var V=I.nextSibling,Y=I.nodeName;I[$i]||Y==="SCRIPT"||Y==="STYLE"||Y==="LINK"&&I.rel.toLowerCase()==="stylesheet"||m.removeChild(I),I=V}}else m==="body"&&Km(o.ownerDocument.body);m=S}while(m);kf(u)}function hR(o,u){var m=o;o=0;do{var v=m.nextSibling;if(m.nodeType===1?u?(m._stashedDisplay=m.style.display,m.style.display="none"):(m.style.display=m._stashedDisplay||"",m.getAttribute("style")===""&&m.removeAttribute("style")):m.nodeType===3&&(u?(m._stashedText=m.nodeValue,m.nodeValue=""):m.nodeValue=m._stashedText||""),v&&v.nodeType===8)if(m=v.data,m==="/$"){if(o===0)break;o--}else m!=="$"&&m!=="$?"&&m!=="$~"&&m!=="$!"||o++;m=v}while(m)}function Zw(o){var u=o.firstChild;for(u&&u.nodeType===10&&(u=u.nextSibling);u;){var m=u;switch(u=u.nextSibling,m.nodeName){case"HTML":case"HEAD":case"BODY":Zw(m),eo(m);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(m.rel.toLowerCase()==="stylesheet")continue}o.removeChild(m)}}function _9(o,u,m,v){for(;o.nodeType===1;){var S=m;if(o.nodeName.toLowerCase()!==u.toLowerCase()){if(!v&&(o.nodeName!=="INPUT"||o.type!=="hidden"))break}else if(v){if(!o[$i])switch(u){case"meta":if(!o.hasAttribute("itemprop"))break;return o;case"link":if(I=o.getAttribute("rel"),I==="stylesheet"&&o.hasAttribute("data-precedence"))break;if(I!==S.rel||o.getAttribute("href")!==(S.href==null||S.href===""?null:S.href)||o.getAttribute("crossorigin")!==(S.crossOrigin==null?null:S.crossOrigin)||o.getAttribute("title")!==(S.title==null?null:S.title))break;return o;case"style":if(o.hasAttribute("data-precedence"))break;return o;case"script":if(I=o.getAttribute("src"),(I!==(S.src==null?null:S.src)||o.getAttribute("type")!==(S.type==null?null:S.type)||o.getAttribute("crossorigin")!==(S.crossOrigin==null?null:S.crossOrigin))&&I&&o.hasAttribute("async")&&!o.hasAttribute("itemprop"))break;return o;default:return o}}else if(u==="input"&&o.type==="hidden"){var I=S.name==null?null:""+S.name;if(S.type==="hidden"&&o.getAttribute("name")===I)return o}else return o;if(o=ss(o.nextSibling),o===null)break}return null}function b9(o,u,m){if(u==="")return null;for(;o.nodeType!==3;)if((o.nodeType!==1||o.nodeName!=="INPUT"||o.type!=="hidden")&&!m||(o=ss(o.nextSibling),o===null))return null;return o}function mR(o,u){for(;o.nodeType!==8;)if((o.nodeType!==1||o.nodeName!=="INPUT"||o.type!=="hidden")&&!u||(o=ss(o.nextSibling),o===null))return null;return o}function Jw(o){return o.data==="$?"||o.data==="$~"}function Qw(o){return o.data==="$!"||o.data==="$?"&&o.ownerDocument.readyState!=="loading"}function w9(o,u){var m=o.ownerDocument;if(o.data==="$~")o._reactRetry=u;else if(o.data!=="$?"||m.readyState!=="loading")u();else{var v=function(){u(),m.removeEventListener("DOMContentLoaded",v)};m.addEventListener("DOMContentLoaded",v),o._reactRetry=v}}function ss(o){for(;o!=null;o=o.nextSibling){var u=o.nodeType;if(u===1||u===3)break;if(u===8){if(u=o.data,u==="$"||u==="$!"||u==="$?"||u==="$~"||u==="&"||u==="F!"||u==="F")break;if(u==="/$"||u==="/&")return null}}return o}var Xw=null;function pR(o){o=o.nextSibling;for(var u=0;o;){if(o.nodeType===8){var m=o.data;if(m==="/$"||m==="/&"){if(u===0)return ss(o.nextSibling);u--}else m!=="$"&&m!=="$!"&&m!=="$?"&&m!=="$~"&&m!=="&"||u++}o=o.nextSibling}return null}function gR(o){o=o.previousSibling;for(var u=0;o;){if(o.nodeType===8){var m=o.data;if(m==="$"||m==="$!"||m==="$?"||m==="$~"||m==="&"){if(u===0)return o;u--}else m!=="/$"&&m!=="/&"||u++}o=o.previousSibling}return null}function yR(o,u,m){switch(u=rv(m),o){case"html":if(o=u.documentElement,!o)throw Error(r(452));return o;case"head":if(o=u.head,!o)throw Error(r(453));return o;case"body":if(o=u.body,!o)throw Error(r(454));return o;default:throw Error(r(451))}}function Km(o){for(var u=o.attributes;u.length;)o.removeAttributeNode(u[0]);eo(o)}var os=new Map,vR=new Set;function iv(o){return typeof o.getRootNode=="function"?o.getRootNode():o.nodeType===9?o:o.ownerDocument}var ml=re.d;re.d={f:E9,r:T9,D:S9,C:A9,L:C9,m:I9,X:P9,S:N9,M:D9};function E9(){var o=ml.f(),u=Yy();return o||u}function T9(o){var u=li(o);u!==null&&u.tag===5&&u.type==="form"?OP(u):ml.r(o)}var Pf=typeof document>"u"?null:document;function xR(o,u,m){var v=Pf;if(v&&typeof u=="string"&&u){var S=dn(u);S='link[rel="'+o+'"][href="'+S+'"]',typeof m=="string"&&(S+='[crossorigin="'+m+'"]'),vR.has(S)||(vR.add(S),o={rel:o,crossOrigin:m,href:u},v.querySelector(S)===null&&(u=v.createElement("link"),Xr(u,"link",o),Rn(u),v.head.appendChild(u)))}}function S9(o){ml.D(o),xR("dns-prefetch",o,null)}function A9(o,u){ml.C(o,u),xR("preconnect",o,u)}function C9(o,u,m){ml.L(o,u,m);var v=Pf;if(v&&o&&u){var S='link[rel="preload"][as="'+dn(u)+'"]';u==="image"&&m&&m.imageSrcSet?(S+='[imagesrcset="'+dn(m.imageSrcSet)+'"]',typeof m.imageSizes=="string"&&(S+='[imagesizes="'+dn(m.imageSizes)+'"]')):S+='[href="'+dn(o)+'"]';var I=S;switch(u){case"style":I=Df(o);break;case"script":I=Rf(o)}os.has(I)||(o=g({rel:"preload",href:u==="image"&&m&&m.imageSrcSet?void 0:o,as:u},m),os.set(I,o),v.querySelector(S)!==null||u==="style"&&v.querySelector(Wm(I))||u==="script"&&v.querySelector(Ym(I))||(u=v.createElement("link"),Xr(u,"link",o),Rn(u),v.head.appendChild(u)))}}function I9(o,u){ml.m(o,u);var m=Pf;if(m&&o){var v=u&&typeof u.as=="string"?u.as:"script",S='link[rel="modulepreload"][as="'+dn(v)+'"][href="'+dn(o)+'"]',I=S;switch(v){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":I=Rf(o)}if(!os.has(I)&&(o=g({rel:"modulepreload",href:o},u),os.set(I,o),m.querySelector(S)===null)){switch(v){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(m.querySelector(Ym(I)))return}v=m.createElement("link"),Xr(v,"link",o),Rn(v),m.head.appendChild(v)}}}function N9(o,u,m){ml.S(o,u,m);var v=Pf;if(v&&o){var S=Ki(v).hoistableStyles,I=Df(o);u=u||"default";var V=S.get(I);if(!V){var Y={loading:0,preload:null};if(V=v.querySelector(Wm(I)))Y.loading=5;else{o=g({rel:"stylesheet",href:o,"data-precedence":u},m),(m=os.get(I))&&eE(o,m);var ne=V=v.createElement("link");Rn(ne),Xr(ne,"link",o),ne._p=new Promise(function(me,Ae){ne.onload=me,ne.onerror=Ae}),ne.addEventListener("load",function(){Y.loading|=1}),ne.addEventListener("error",function(){Y.loading|=2}),Y.loading|=4,av(V,u,v)}V={type:"stylesheet",instance:V,count:1,state:Y},S.set(I,V)}}}function P9(o,u){ml.X(o,u);var m=Pf;if(m&&o){var v=Ki(m).hoistableScripts,S=Rf(o),I=v.get(S);I||(I=m.querySelector(Ym(S)),I||(o=g({src:o,async:!0},u),(u=os.get(S))&&tE(o,u),I=m.createElement("script"),Rn(I),Xr(I,"link",o),m.head.appendChild(I)),I={type:"script",instance:I,count:1,state:null},v.set(S,I))}}function D9(o,u){ml.M(o,u);var m=Pf;if(m&&o){var v=Ki(m).hoistableScripts,S=Rf(o),I=v.get(S);I||(I=m.querySelector(Ym(S)),I||(o=g({src:o,async:!0,type:"module"},u),(u=os.get(S))&&tE(o,u),I=m.createElement("script"),Rn(I),Xr(I,"link",o),m.head.appendChild(I)),I={type:"script",instance:I,count:1,state:null},v.set(S,I))}}function _R(o,u,m,v){var S=(S=Ve.current)?iv(S):null;if(!S)throw Error(r(446));switch(o){case"meta":case"title":return null;case"style":return typeof m.precedence=="string"&&typeof m.href=="string"?(u=Df(m.href),m=Ki(S).hoistableStyles,v=m.get(u),v||(v={type:"style",instance:null,count:0,state:null},m.set(u,v)),v):{type:"void",instance:null,count:0,state:null};case"link":if(m.rel==="stylesheet"&&typeof m.href=="string"&&typeof m.precedence=="string"){o=Df(m.href);var I=Ki(S).hoistableStyles,V=I.get(o);if(V||(S=S.ownerDocument||S,V={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},I.set(o,V),(I=S.querySelector(Wm(o)))&&!I._p&&(V.instance=I,V.state.loading=5),os.has(o)||(m={rel:"preload",as:"style",href:m.href,crossOrigin:m.crossOrigin,integrity:m.integrity,media:m.media,hrefLang:m.hrefLang,referrerPolicy:m.referrerPolicy},os.set(o,m),I||R9(S,o,m,V.state))),u&&v===null)throw Error(r(528,""));return V}if(u&&v!==null)throw Error(r(529,""));return null;case"script":return u=m.async,m=m.src,typeof m=="string"&&u&&typeof u!="function"&&typeof u!="symbol"?(u=Rf(m),m=Ki(S).hoistableScripts,v=m.get(u),v||(v={type:"script",instance:null,count:0,state:null},m.set(u,v)),v):{type:"void",instance:null,count:0,state:null};default:throw Error(r(444,o))}}function Df(o){return'href="'+dn(o)+'"'}function Wm(o){return'link[rel="stylesheet"]['+o+"]"}function bR(o){return g({},o,{"data-precedence":o.precedence,precedence:null})}function R9(o,u,m,v){o.querySelector('link[rel="preload"][as="style"]['+u+"]")?v.loading=1:(u=o.createElement("link"),v.preload=u,u.addEventListener("load",function(){return v.loading|=1}),u.addEventListener("error",function(){return v.loading|=2}),Xr(u,"link",m),Rn(u),o.head.appendChild(u))}function Rf(o){return'[src="'+dn(o)+'"]'}function Ym(o){return"script[async]"+o}function wR(o,u,m){if(u.count++,u.instance===null)switch(u.type){case"style":var v=o.querySelector('style[data-href~="'+dn(m.href)+'"]');if(v)return u.instance=v,Rn(v),v;var S=g({},m,{"data-href":m.href,"data-precedence":m.precedence,href:null,precedence:null});return v=(o.ownerDocument||o).createElement("style"),Rn(v),Xr(v,"style",S),av(v,m.precedence,o),u.instance=v;case"stylesheet":S=Df(m.href);var I=o.querySelector(Wm(S));if(I)return u.state.loading|=4,u.instance=I,Rn(I),I;v=bR(m),(S=os.get(S))&&eE(v,S),I=(o.ownerDocument||o).createElement("link"),Rn(I);var V=I;return V._p=new Promise(function(Y,ne){V.onload=Y,V.onerror=ne}),Xr(I,"link",v),u.state.loading|=4,av(I,m.precedence,o),u.instance=I;case"script":return I=Rf(m.src),(S=o.querySelector(Ym(I)))?(u.instance=S,Rn(S),S):(v=m,(S=os.get(I))&&(v=g({},m),tE(v,S)),o=o.ownerDocument||o,S=o.createElement("script"),Rn(S),Xr(S,"link",v),o.head.appendChild(S),u.instance=S);case"void":return null;default:throw Error(r(443,u.type))}else u.type==="stylesheet"&&(u.state.loading&4)===0&&(v=u.instance,u.state.loading|=4,av(v,m.precedence,o));return u.instance}function av(o,u,m){for(var v=m.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),S=v.length?v[v.length-1]:null,I=S,V=0;V<v.length;V++){var Y=v[V];if(Y.dataset.precedence===u)I=Y;else if(I!==S)break}I?I.parentNode.insertBefore(o,I.nextSibling):(u=m.nodeType===9?m.head:m,u.insertBefore(o,u.firstChild))}function eE(o,u){o.crossOrigin==null&&(o.crossOrigin=u.crossOrigin),o.referrerPolicy==null&&(o.referrerPolicy=u.referrerPolicy),o.title==null&&(o.title=u.title)}function tE(o,u){o.crossOrigin==null&&(o.crossOrigin=u.crossOrigin),o.referrerPolicy==null&&(o.referrerPolicy=u.referrerPolicy),o.integrity==null&&(o.integrity=u.integrity)}var sv=null;function ER(o,u,m){if(sv===null){var v=new Map,S=sv=new Map;S.set(m,v)}else S=sv,v=S.get(m),v||(v=new Map,S.set(m,v));if(v.has(o))return v;for(v.set(o,null),m=m.getElementsByTagName(o),S=0;S<m.length;S++){var I=m[S];if(!(I[$i]||I[_t]||o==="link"&&I.getAttribute("rel")==="stylesheet")&&I.namespaceURI!=="http://www.w3.org/2000/svg"){var V=I.getAttribute(u)||"";V=o+V;var Y=v.get(V);Y?Y.push(I):v.set(V,[I])}}return v}function TR(o,u,m){o=o.ownerDocument||o,o.head.insertBefore(m,u==="title"?o.querySelector("head > title"):null)}function k9(o,u,m){if(m===1||u.itemProp!=null)return!1;switch(o){case"meta":case"title":return!0;case"style":if(typeof u.precedence!="string"||typeof u.href!="string"||u.href==="")break;return!0;case"link":if(typeof u.rel!="string"||typeof u.href!="string"||u.href===""||u.onLoad||u.onError)break;switch(u.rel){case"stylesheet":return o=u.disabled,typeof u.precedence=="string"&&o==null;default:return!0}case"script":if(u.async&&typeof u.async!="function"&&typeof u.async!="symbol"&&!u.onLoad&&!u.onError&&u.src&&typeof u.src=="string")return!0}return!1}function SR(o){return!(o.type==="stylesheet"&&(o.state.loading&3)===0)}function M9(o,u,m,v){if(m.type==="stylesheet"&&(typeof v.media!="string"||matchMedia(v.media).matches!==!1)&&(m.state.loading&4)===0){if(m.instance===null){var S=Df(v.href),I=u.querySelector(Wm(S));if(I){u=I._p,u!==null&&typeof u=="object"&&typeof u.then=="function"&&(o.count++,o=ov.bind(o),u.then(o,o)),m.state.loading|=4,m.instance=I,Rn(I);return}I=u.ownerDocument||u,v=bR(v),(S=os.get(S))&&eE(v,S),I=I.createElement("link"),Rn(I);var V=I;V._p=new Promise(function(Y,ne){V.onload=Y,V.onerror=ne}),Xr(I,"link",v),m.instance=I}o.stylesheets===null&&(o.stylesheets=new Map),o.stylesheets.set(m,u),(u=m.state.preload)&&(m.state.loading&3)===0&&(o.count++,m=ov.bind(o),u.addEventListener("load",m),u.addEventListener("error",m))}}var nE=0;function O9(o,u){return o.stylesheets&&o.count===0&&uv(o,o.stylesheets),0<o.count||0<o.imgCount?function(m){var v=setTimeout(function(){if(o.stylesheets&&uv(o,o.stylesheets),o.unsuspend){var I=o.unsuspend;o.unsuspend=null,I()}},6e4+u);0<o.imgBytes&&nE===0&&(nE=62500*p9());var S=setTimeout(function(){if(o.waitingForImages=!1,o.count===0&&(o.stylesheets&&uv(o,o.stylesheets),o.unsuspend)){var I=o.unsuspend;o.unsuspend=null,I()}},(o.imgBytes>nE?50:800)+u);return o.unsuspend=m,function(){o.unsuspend=null,clearTimeout(v),clearTimeout(S)}}:null}function ov(){if(this.count--,this.count===0&&(this.imgCount===0||!this.waitingForImages)){if(this.stylesheets)uv(this,this.stylesheets);else if(this.unsuspend){var o=this.unsuspend;this.unsuspend=null,o()}}}var lv=null;function uv(o,u){o.stylesheets=null,o.unsuspend!==null&&(o.count++,lv=new Map,u.forEach(j9,o),lv=null,ov.call(o))}function j9(o,u){if(!(u.state.loading&4)){var m=lv.get(o);if(m)var v=m.get(null);else{m=new Map,lv.set(o,m);for(var S=o.querySelectorAll("link[data-precedence],style[data-precedence]"),I=0;I<S.length;I++){var V=S[I];(V.nodeName==="LINK"||V.getAttribute("media")!=="not all")&&(m.set(V.dataset.precedence,V),v=V)}v&&m.set(null,v)}S=u.instance,V=S.getAttribute("data-precedence"),I=m.get(V)||v,I===v&&m.set(null,S),m.set(V,S),this.count++,v=ov.bind(this),S.addEventListener("load",v),S.addEventListener("error",v),I?I.parentNode.insertBefore(S,I.nextSibling):(o=o.nodeType===9?o.head:o,o.insertBefore(S,o.firstChild)),u.state.loading|=4}}var Zm={$$typeof:O,Provider:null,Consumer:null,_currentValue:le,_currentValue2:le,_threadCount:0};function L9(o,u,m,v,S,I,V,Y,ne){this.tag=1,this.containerInfo=o,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=va(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=va(0),this.hiddenUpdates=va(null),this.identifierPrefix=v,this.onUncaughtError=S,this.onCaughtError=I,this.onRecoverableError=V,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=ne,this.incompleteTransitions=new Map}function AR(o,u,m,v,S,I,V,Y,ne,me,Ae,Re){return o=new L9(o,u,m,V,ne,me,Ae,Re,Y),u=1,I===!0&&(u|=24),I=mi(3,null,null,u),o.current=I,I.stateNode=o,u=Ob(),u.refCount++,o.pooledCache=u,u.refCount++,I.memoizedState={element:v,isDehydrated:m,cache:u},Ub(I),o}function CR(o){return o?(o=el,o):el}function IR(o,u,m,v,S,I){S=CR(S),v.context===null?v.context=S:v.pendingContext=S,v=gu(u),v.payload={element:m},I=I===void 0?null:I,I!==null&&(v.callback=I),m=yu(o,v,u),m!==null&&(oa(m,o,u),Im(m,o,u))}function NR(o,u){if(o=o.memoizedState,o!==null&&o.dehydrated!==null){var m=o.retryLane;o.retryLane=m!==0&&m<u?m:u}}function rE(o,u){NR(o,u),(o=o.alternate)&&NR(o,u)}function PR(o){if(o.tag===13||o.tag===31){var u=rs(o,67108864);u!==null&&oa(u,o,67108864),rE(o,67108864)}}function DR(o){if(o.tag===13||o.tag===31){var u=Da();u=we(u);var m=rs(o,u);m!==null&&oa(m,o,u),rE(o,u)}}var cv=!0;function V9(o,u,m,v){var S=ee.T;ee.T=null;var I=re.p;try{re.p=2,iE(o,u,m,v)}finally{re.p=I,ee.T=S}}function U9(o,u,m,v){var S=ee.T;ee.T=null;var I=re.p;try{re.p=8,iE(o,u,m,v)}finally{re.p=I,ee.T=S}}function iE(o,u,m,v){if(cv){var S=aE(v);if(S===null)Hw(o,u,v,dv,m),kR(o,v);else if(B9(S,o,u,m,v))v.stopPropagation();else if(kR(o,v),u&4&&-1<F9.indexOf(o)){for(;S!==null;){var I=li(S);if(I!==null)switch(I.tag){case 3:if(I=I.stateNode,I.current.memoizedState.isDehydrated){var V=ga(I.pendingLanes);if(V!==0){var Y=I;for(Y.pendingLanes|=2,Y.entangledLanes|=2;V;){var ne=1<<31-Pn(V);Y.entanglements[1]|=ne,V&=~ne}xo(I),(Yt&6)===0&&(Ky=Tr()+500,Hm(0))}}break;case 31:case 13:Y=rs(I,2),Y!==null&&oa(Y,I,2),Yy(),rE(I,2)}if(I=aE(v),I===null&&Hw(o,u,v,dv,m),I===S)break;S=I}S!==null&&v.stopPropagation()}else Hw(o,u,v,null,m)}}function aE(o){return o=ci(o),sE(o)}var dv=null;function sE(o){if(dv=null,o=Pi(o),o!==null){var u=a(o);if(u===null)o=null;else{var m=u.tag;if(m===13){if(o=s(u),o!==null)return o;o=null}else if(m===31){if(o=l(u),o!==null)return o;o=null}else if(m===3){if(u.stateNode.current.memoizedState.isDehydrated)return u.tag===3?u.stateNode.containerInfo:null;o=null}else u!==o&&(o=null)}}return dv=o,null}function RR(o){switch(o){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(xs()){case _s:return 2;case Zs:return 8;case pa:case Tc:return 32;case qo:return 268435456;default:return 32}default:return 32}}var oE=!1,Iu=null,Nu=null,Pu=null,Jm=new Map,Qm=new Map,Du=[],F9="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function kR(o,u){switch(o){case"focusin":case"focusout":Iu=null;break;case"dragenter":case"dragleave":Nu=null;break;case"mouseover":case"mouseout":Pu=null;break;case"pointerover":case"pointerout":Jm.delete(u.pointerId);break;case"gotpointercapture":case"lostpointercapture":Qm.delete(u.pointerId)}}function Xm(o,u,m,v,S,I){return o===null||o.nativeEvent!==I?(o={blockedOn:u,domEventName:m,eventSystemFlags:v,nativeEvent:I,targetContainers:[S]},u!==null&&(u=li(u),u!==null&&PR(u)),o):(o.eventSystemFlags|=v,u=o.targetContainers,S!==null&&u.indexOf(S)===-1&&u.push(S),o)}function B9(o,u,m,v,S){switch(u){case"focusin":return Iu=Xm(Iu,o,u,m,v,S),!0;case"dragenter":return Nu=Xm(Nu,o,u,m,v,S),!0;case"mouseover":return Pu=Xm(Pu,o,u,m,v,S),!0;case"pointerover":var I=S.pointerId;return Jm.set(I,Xm(Jm.get(I)||null,o,u,m,v,S)),!0;case"gotpointercapture":return I=S.pointerId,Qm.set(I,Xm(Qm.get(I)||null,o,u,m,v,S)),!0}return!1}function MR(o){var u=Pi(o.target);if(u!==null){var m=a(u);if(m!==null){if(u=m.tag,u===13){if(u=s(m),u!==null){o.blockedOn=u,Xe(o.priority,function(){DR(m)});return}}else if(u===31){if(u=l(m),u!==null){o.blockedOn=u,Xe(o.priority,function(){DR(m)});return}}else if(u===3&&m.stateNode.current.memoizedState.isDehydrated){o.blockedOn=m.tag===3?m.stateNode.containerInfo:null;return}}}o.blockedOn=null}function fv(o){if(o.blockedOn!==null)return!1;for(var u=o.targetContainers;0<u.length;){var m=aE(o.nativeEvent);if(m===null){m=o.nativeEvent;var v=new m.constructor(m.type,m);tu=v,m.target.dispatchEvent(v),tu=null}else return u=li(m),u!==null&&PR(u),o.blockedOn=m,!1;u.shift()}return!0}function OR(o,u,m){fv(o)&&m.delete(u)}function z9(){oE=!1,Iu!==null&&fv(Iu)&&(Iu=null),Nu!==null&&fv(Nu)&&(Nu=null),Pu!==null&&fv(Pu)&&(Pu=null),Jm.forEach(OR),Qm.forEach(OR)}function hv(o,u){o.blockedOn===u&&(o.blockedOn=null,oE||(oE=!0,t.unstable_scheduleCallback(t.unstable_NormalPriority,z9)))}var mv=null;function jR(o){mv!==o&&(mv=o,t.unstable_scheduleCallback(t.unstable_NormalPriority,function(){mv===o&&(mv=null);for(var u=0;u<o.length;u+=3){var m=o[u],v=o[u+1],S=o[u+2];if(typeof v!="function"){if(sE(v||m)===null)continue;break}var I=li(m);I!==null&&(o.splice(u,3),u-=3,aw(I,{pending:!0,data:S,method:m.method,action:v},v,S))}}))}function kf(o){function u(ne){return hv(ne,o)}Iu!==null&&hv(Iu,o),Nu!==null&&hv(Nu,o),Pu!==null&&hv(Pu,o),Jm.forEach(u),Qm.forEach(u);for(var m=0;m<Du.length;m++){var v=Du[m];v.blockedOn===o&&(v.blockedOn=null)}for(;0<Du.length&&(m=Du[0],m.blockedOn===null);)MR(m),m.blockedOn===null&&Du.shift();if(m=(o.ownerDocument||o).$$reactFormReplay,m!=null)for(v=0;v<m.length;v+=3){var S=m[v],I=m[v+1],V=S[Jt]||null;if(typeof I=="function")V||jR(m);else if(V){var Y=null;if(I&&I.hasAttribute("formAction")){if(S=I,V=I[Jt]||null)Y=V.formAction;else if(sE(S)!==null)continue}else Y=V.action;typeof Y=="function"?m[v+1]=Y:(m.splice(v,3),v-=3),jR(m)}}}function LR(){function o(I){I.canIntercept&&I.info==="react-transition"&&I.intercept({handler:function(){return new Promise(function(V){return S=V})},focusReset:"manual",scroll:"manual"})}function u(){S!==null&&(S(),S=null),v||setTimeout(m,20)}function m(){if(!v&&!navigation.transition){var I=navigation.currentEntry;I&&I.url!=null&&navigation.navigate(I.url,{state:I.getState(),info:"react-transition",history:"replace"})}}if(typeof navigation=="object"){var v=!1,S=null;return navigation.addEventListener("navigate",o),navigation.addEventListener("navigatesuccess",u),navigation.addEventListener("navigateerror",u),setTimeout(m,100),function(){v=!0,navigation.removeEventListener("navigate",o),navigation.removeEventListener("navigatesuccess",u),navigation.removeEventListener("navigateerror",u),S!==null&&(S(),S=null)}}}function lE(o){this._internalRoot=o}pv.prototype.render=lE.prototype.render=function(o){var u=this._internalRoot;if(u===null)throw Error(r(409));var m=u.current,v=Da();IR(m,v,o,u,null,null)},pv.prototype.unmount=lE.prototype.unmount=function(){var o=this._internalRoot;if(o!==null){this._internalRoot=null;var u=o.containerInfo;IR(o.current,2,null,o,null,null),Yy(),u[fr]=null}};function pv(o){this._internalRoot=o}pv.prototype.unstable_scheduleHydration=function(o){if(o){var u=tt();o={blockedOn:null,target:o,priority:u};for(var m=0;m<Du.length&&u!==0&&u<Du[m].priority;m++);Du.splice(m,0,o),m===0&&MR(o)}};var VR=e.version;if(VR!=="19.2.0")throw Error(r(527,VR,"19.2.0"));re.findDOMNode=function(o){var u=o._reactInternals;if(u===void 0)throw typeof o.render=="function"?Error(r(188)):(o=Object.keys(o).join(","),Error(r(268,o)));return o=h(u),o=o!==null?p(o):null,o=o===null?null:o.stateNode,o};var q9={bundleType:0,version:"19.2.0",rendererPackageName:"react-dom",currentDispatcherRef:ee,reconcilerVersion:"19.2.0"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var gv=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!gv.isDisabled&&gv.supportsFiber)try{Ni=gv.inject(q9),$n=gv}catch{}}return tp.createRoot=function(o,u){if(!i(o))throw Error(r(299));var m=!1,v="",S=GP,I=$P,V=KP;return u!=null&&(u.unstable_strictMode===!0&&(m=!0),u.identifierPrefix!==void 0&&(v=u.identifierPrefix),u.onUncaughtError!==void 0&&(S=u.onUncaughtError),u.onCaughtError!==void 0&&(I=u.onCaughtError),u.onRecoverableError!==void 0&&(V=u.onRecoverableError)),u=AR(o,1,!1,null,null,m,v,null,S,I,V,LR),o[fr]=u.current,qw(o),new lE(u)},tp.hydrateRoot=function(o,u,m){if(!i(o))throw Error(r(299));var v=!1,S="",I=GP,V=$P,Y=KP,ne=null;return m!=null&&(m.unstable_strictMode===!0&&(v=!0),m.identifierPrefix!==void 0&&(S=m.identifierPrefix),m.onUncaughtError!==void 0&&(I=m.onUncaughtError),m.onCaughtError!==void 0&&(V=m.onCaughtError),m.onRecoverableError!==void 0&&(Y=m.onRecoverableError),m.formState!==void 0&&(ne=m.formState)),u=AR(o,1,!0,u,m??null,v,S,ne,I,V,Y,LR),u.context=CR(null),m=u.current,v=Da(),v=we(v),S=gu(v),S.callback=null,yu(m,S,v),m=v,u.current.lanes=m,Ka(u,m),xo(u),o[fr]=u.current,qw(o),new pv(u)},tp.version="19.2.0",tp}var WR;function nH(){if(WR)return fE.exports;WR=1;function t(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(t)}catch(e){console.error(e)}}return t(),fE.exports=tH(),fE.exports}var rH=nH();const iH=Vo(rH),aH=()=>{};var YR={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const X4=function(t){const e=[];let n=0;for(let r=0;r<t.length;r++){let i=t.charCodeAt(r);i<128?e[n++]=i:i<2048?(e[n++]=i>>6|192,e[n++]=i&63|128):(i&64512)===55296&&r+1<t.length&&(t.charCodeAt(r+1)&64512)===56320?(i=65536+((i&1023)<<10)+(t.charCodeAt(++r)&1023),e[n++]=i>>18|240,e[n++]=i>>12&63|128,e[n++]=i>>6&63|128,e[n++]=i&63|128):(e[n++]=i>>12|224,e[n++]=i>>6&63|128,e[n++]=i&63|128)}return e},sH=function(t){const e=[];let n=0,r=0;for(;n<t.length;){const i=t[n++];if(i<128)e[r++]=String.fromCharCode(i);else if(i>191&&i<224){const a=t[n++];e[r++]=String.fromCharCode((i&31)<<6|a&63)}else if(i>239&&i<365){const a=t[n++],s=t[n++],l=t[n++],c=((i&7)<<18|(a&63)<<12|(s&63)<<6|l&63)-65536;e[r++]=String.fromCharCode(55296+(c>>10)),e[r++]=String.fromCharCode(56320+(c&1023))}else{const a=t[n++],s=t[n++];e[r++]=String.fromCharCode((i&15)<<12|(a&63)<<6|s&63)}}return e.join("")},e3={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(t,e){if(!Array.isArray(t))throw Error("encodeByteArray takes an array as a parameter");this.init_();const n=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let i=0;i<t.length;i+=3){const a=t[i],s=i+1<t.length,l=s?t[i+1]:0,c=i+2<t.length,h=c?t[i+2]:0,p=a>>2,g=(a&3)<<4|l>>4;let x=(l&15)<<2|h>>6,b=h&63;c||(b=64,s||(x=64)),r.push(n[p],n[g],n[x],n[b])}return r.join("")},encodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(t):this.encodeByteArray(X4(t),e)},decodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(t):sH(this.decodeStringToByteArray(t,e))},decodeStringToByteArray(t,e){this.init_();const n=e?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let i=0;i<t.length;){const a=n[t.charAt(i++)],l=i<t.length?n[t.charAt(i)]:0;++i;const h=i<t.length?n[t.charAt(i)]:64;++i;const g=i<t.length?n[t.charAt(i)]:64;if(++i,a==null||l==null||h==null||g==null)throw new oH;const x=a<<2|l>>4;if(r.push(x),h!==64){const b=l<<4&240|h>>2;if(r.push(b),g!==64){const C=h<<6&192|g;r.push(C)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let t=0;t<this.ENCODED_VALS.length;t++)this.byteToCharMap_[t]=this.ENCODED_VALS.charAt(t),this.charToByteMap_[this.byteToCharMap_[t]]=t,this.byteToCharMapWebSafe_[t]=this.ENCODED_VALS_WEBSAFE.charAt(t),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[t]]=t,t>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(t)]=t,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(t)]=t)}}};class oH extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const lH=function(t){const e=X4(t);return e3.encodeByteArray(e,!0)},t3=function(t){return lH(t).replace(/\./g,"")},n3=function(t){try{return e3.decodeString(t,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function r3(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const uH=()=>r3().__FIREBASE_DEFAULTS__,cH=()=>{if(typeof process>"u"||typeof YR>"u")return;const t=YR.__FIREBASE_DEFAULTS__;if(t)return JSON.parse(t)},dH=()=>{if(typeof document>"u")return;let t;try{t=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=t&&n3(t[1]);return e&&JSON.parse(e)},Xx=()=>{try{return aH()||uH()||cH()||dH()}catch(t){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${t}`);return}},i3=t=>{var e,n;return(n=(e=Xx())==null?void 0:e.emulatorHosts)==null?void 0:n[t]},fH=t=>{const e=i3(t);if(!e)return;const n=e.lastIndexOf(":");if(n<=0||n+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const r=parseInt(e.substring(n+1),10);return e[0]==="["?[e.substring(1,n-1),r]:[e.substring(0,n),r]},a3=()=>{var t;return(t=Xx())==null?void 0:t.config},s3=t=>{var e;return(e=Xx())==null?void 0:e[`_${t}`]};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hH{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}wrapCallback(e){return(n,r)=>{n?this.reject(n):this.resolve(r),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(n):e(n,r))}}}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function hc(t){try{return(t.startsWith("http://")||t.startsWith("https://")?new URL(t).hostname:t).endsWith(".cloudworkstations.dev")}catch{return!1}}async function hA(t){return(await fetch(t,{credentials:"include"})).ok}const Sp={};function mH(){const t={prod:[],emulator:[]};for(const e of Object.keys(Sp))Sp[e]?t.emulator.push(e):t.prod.push(e);return t}function pH(t){let e=document.getElementById(t),n=!1;return e||(e=document.createElement("div"),e.setAttribute("id",t),n=!0),{created:n,element:e}}let ZR=!1;function o3(t,e){if(typeof window>"u"||typeof document>"u"||!hc(window.location.host)||Sp[t]===e||Sp[t]||ZR)return;Sp[t]=e;function n(x){return`__firebase__banner__${x}`}const r="__firebase__banner",a=mH().prod.length>0;function s(){const x=document.getElementById(r);x&&x.remove()}function l(x){x.style.display="flex",x.style.background="#7faaf0",x.style.position="fixed",x.style.bottom="5px",x.style.left="5px",x.style.padding=".5em",x.style.borderRadius="5px",x.style.alignItems="center"}function c(x,b){x.setAttribute("width","24"),x.setAttribute("id",b),x.setAttribute("height","24"),x.setAttribute("viewBox","0 0 24 24"),x.setAttribute("fill","none"),x.style.marginLeft="-6px"}function h(){const x=document.createElement("span");return x.style.cursor="pointer",x.style.marginLeft="16px",x.style.fontSize="24px",x.innerHTML=" &times;",x.onclick=()=>{ZR=!0,s()},x}function p(x,b){x.setAttribute("id",b),x.innerText="Learn more",x.href="https://firebase.google.com/docs/studio/preview-apps#preview-backend",x.setAttribute("target","__blank"),x.style.paddingLeft="5px",x.style.textDecoration="underline"}function g(){const x=pH(r),b=n("text"),C=document.getElementById(b)||document.createElement("span"),A=n("learnmore"),D=document.getElementById(A)||document.createElement("a"),R=n("preprendIcon"),j=document.getElementById(R)||document.createElementNS("http://www.w3.org/2000/svg","svg");if(x.created){const O=x.element;l(O),p(D,A);const q=h();c(j,R),O.append(j,C,D,q),document.body.appendChild(O)}a?(C.innerText="Preview backend disconnected.",j.innerHTML=`<g clip-path="url(#clip0_6013_33858)">
<path d="M4.8 17.6L12 5.6L19.2 17.6H4.8ZM6.91667 16.4H17.0833L12 7.93333L6.91667 16.4ZM12 15.6C12.1667 15.6 12.3056 15.5444 12.4167 15.4333C12.5389 15.3111 12.6 15.1667 12.6 15C12.6 14.8333 12.5389 14.6944 12.4167 14.5833C12.3056 14.4611 12.1667 14.4 12 14.4C11.8333 14.4 11.6889 14.4611 11.5667 14.5833C11.4556 14.6944 11.4 14.8333 11.4 15C11.4 15.1667 11.4556 15.3111 11.5667 15.4333C11.6889 15.5444 11.8333 15.6 12 15.6ZM11.4 13.6H12.6V10.4H11.4V13.6Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6013_33858">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`):(j.innerHTML=`<g clip-path="url(#clip0_6083_34804)">
<path d="M11.4 15.2H12.6V11.2H11.4V15.2ZM12 10C12.1667 10 12.3056 9.94444 12.4167 9.83333C12.5389 9.71111 12.6 9.56667 12.6 9.4C12.6 9.23333 12.5389 9.09444 12.4167 8.98333C12.3056 8.86111 12.1667 8.8 12 8.8C11.8333 8.8 11.6889 8.86111 11.5667 8.98333C11.4556 9.09444 11.4 9.23333 11.4 9.4C11.4 9.56667 11.4556 9.71111 11.5667 9.83333C11.6889 9.94444 11.8333 10 12 10ZM12 18.4C11.1222 18.4 10.2944 18.2333 9.51667 17.9C8.73889 17.5667 8.05556 17.1111 7.46667 16.5333C6.88889 15.9444 6.43333 15.2611 6.1 14.4833C5.76667 13.7056 5.6 12.8778 5.6 12C5.6 11.1111 5.76667 10.2833 6.1 9.51667C6.43333 8.73889 6.88889 8.06111 7.46667 7.48333C8.05556 6.89444 8.73889 6.43333 9.51667 6.1C10.2944 5.76667 11.1222 5.6 12 5.6C12.8889 5.6 13.7167 5.76667 14.4833 6.1C15.2611 6.43333 15.9389 6.89444 16.5167 7.48333C17.1056 8.06111 17.5667 8.73889 17.9 9.51667C18.2333 10.2833 18.4 11.1111 18.4 12C18.4 12.8778 18.2333 13.7056 17.9 14.4833C17.5667 15.2611 17.1056 15.9444 16.5167 16.5333C15.9389 17.1111 15.2611 17.5667 14.4833 17.9C13.7167 18.2333 12.8889 18.4 12 18.4ZM12 17.2C13.4444 17.2 14.6722 16.6944 15.6833 15.6833C16.6944 14.6722 17.2 13.4444 17.2 12C17.2 10.5556 16.6944 9.32778 15.6833 8.31667C14.6722 7.30555 13.4444 6.8 12 6.8C10.5556 6.8 9.32778 7.30555 8.31667 8.31667C7.30556 9.32778 6.8 10.5556 6.8 12C6.8 13.4444 7.30556 14.6722 8.31667 15.6833C9.32778 16.6944 10.5556 17.2 12 17.2Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6083_34804">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`,C.innerText="Preview backend running in this workspace."),C.setAttribute("id",b)}document.readyState==="loading"?window.addEventListener("DOMContentLoaded",g):g()}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Nr(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function gH(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(Nr())}function l3(){var e;const t=(e=Xx())==null?void 0:e.forceEnvironment;if(t==="node")return!0;if(t==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function yH(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function vH(){const t=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof t=="object"&&t.id!==void 0}function xH(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function _H(){const t=Nr();return t.indexOf("MSIE ")>=0||t.indexOf("Trident/")>=0}function u3(){return!l3()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function c3(){return!l3()&&!!navigator.userAgent&&(navigator.userAgent.includes("Safari")||navigator.userAgent.includes("WebKit"))&&!navigator.userAgent.includes("Chrome")}function d3(){try{return typeof indexedDB=="object"}catch{return!1}}function bH(){return new Promise((t,e)=>{try{let n=!0;const r="validate-browser-context-for-indexeddb-analytics-module",i=self.indexedDB.open(r);i.onsuccess=()=>{i.result.close(),n||self.indexedDB.deleteDatabase(r),t(!0)},i.onupgradeneeded=()=>{n=!1},i.onerror=()=>{var a;e(((a=i.error)==null?void 0:a.message)||"")}}catch(n){e(n)}})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const wH="FirebaseError";class Uo extends Error{constructor(e,n,r){super(n),this.code=e,this.customData=r,this.name=wH,Object.setPrototypeOf(this,Uo.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,_g.prototype.create)}}class _g{constructor(e,n,r){this.service=e,this.serviceName=n,this.errors=r}create(e,...n){const r=n[0]||{},i=`${this.service}/${e}`,a=this.errors[e],s=a?EH(a,r):"Error",l=`${this.serviceName}: ${s} (${i}).`;return new Uo(i,l,r)}}function EH(t,e){return t.replace(TH,(n,r)=>{const i=e[r];return i!=null?String(i):`<${r}?>`})}const TH=/\{\$([^}]+)}/g;function SH(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}function Ad(t,e){if(t===e)return!0;const n=Object.keys(t),r=Object.keys(e);for(const i of n){if(!r.includes(i))return!1;const a=t[i],s=e[i];if(JR(a)&&JR(s)){if(!Ad(a,s))return!1}else if(a!==s)return!1}for(const i of r)if(!n.includes(i))return!1;return!0}function JR(t){return t!==null&&typeof t=="object"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function bg(t){const e=[];for(const[n,r]of Object.entries(t))Array.isArray(r)?r.forEach(i=>{e.push(encodeURIComponent(n)+"="+encodeURIComponent(i))}):e.push(encodeURIComponent(n)+"="+encodeURIComponent(r));return e.length?"&"+e.join("&"):""}function gp(t){const e={};return t.replace(/^\?/,"").split("&").forEach(r=>{if(r){const[i,a]=r.split("=");e[decodeURIComponent(i)]=decodeURIComponent(a)}}),e}function yp(t){const e=t.indexOf("?");if(!e)return"";const n=t.indexOf("#",e);return t.substring(e,n>0?n:void 0)}function AH(t,e){const n=new CH(t,e);return n.subscribe.bind(n)}class CH{constructor(e,n){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=n,this.task.then(()=>{e(this)}).catch(r=>{this.error(r)})}next(e){this.forEachObserver(n=>{n.next(e)})}error(e){this.forEachObserver(n=>{n.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,n,r){let i;if(e===void 0&&n===void 0&&r===void 0)throw new Error("Missing Observer.");IH(e,["next","error","complete"])?i=e:i={next:e,error:n,complete:r},i.next===void 0&&(i.next=gE),i.error===void 0&&(i.error=gE),i.complete===void 0&&(i.complete=gE);const a=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?i.error(this.finalError):i.complete()}catch{}}),this.observers.push(i),a}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let n=0;n<this.observers.length;n++)this.sendOne(n,e)}sendOne(e,n){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{n(this.observers[e])}catch(r){typeof console<"u"&&console.error&&console.error(r)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function IH(t,e){if(typeof t!="object"||t===null)return!1;for(const n of e)if(n in t&&typeof t[n]=="function")return!0;return!1}function gE(){}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function xn(t){return t&&t._delegate?t._delegate:t}class tc{constructor(e,n,r){this.name=e,this.instanceFactory=n,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ad="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let NH=class{constructor(e,n){this.name=e,this.container=n,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const n=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(n)){const r=new hH;if(this.instancesDeferred.set(n,r),this.isInitialized(n)||this.shouldAutoInitialize())try{const i=this.getOrInitializeService({instanceIdentifier:n});i&&r.resolve(i)}catch{}}return this.instancesDeferred.get(n).promise}getImmediate(e){const n=this.normalizeInstanceIdentifier(e==null?void 0:e.identifier),r=(e==null?void 0:e.optional)??!1;if(this.isInitialized(n)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:n})}catch(i){if(r)return null;throw i}else{if(r)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(DH(e))try{this.getOrInitializeService({instanceIdentifier:ad})}catch{}for(const[n,r]of this.instancesDeferred.entries()){const i=this.normalizeInstanceIdentifier(n);try{const a=this.getOrInitializeService({instanceIdentifier:i});r.resolve(a)}catch{}}}}clearInstance(e=ad){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(n=>"INTERNAL"in n).map(n=>n.INTERNAL.delete()),...e.filter(n=>"_delete"in n).map(n=>n._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=ad){return this.instances.has(e)}getOptions(e=ad){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:n={}}=e,r=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(r))throw Error(`${this.name}(${r}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const i=this.getOrInitializeService({instanceIdentifier:r,options:n});for(const[a,s]of this.instancesDeferred.entries()){const l=this.normalizeInstanceIdentifier(a);r===l&&s.resolve(i)}return i}onInit(e,n){const r=this.normalizeInstanceIdentifier(n),i=this.onInitCallbacks.get(r)??new Set;i.add(e),this.onInitCallbacks.set(r,i);const a=this.instances.get(r);return a&&e(a,r),()=>{i.delete(e)}}invokeOnInitCallbacks(e,n){const r=this.onInitCallbacks.get(n);if(r)for(const i of r)try{i(e,n)}catch{}}getOrInitializeService({instanceIdentifier:e,options:n={}}){let r=this.instances.get(e);if(!r&&this.component&&(r=this.component.instanceFactory(this.container,{instanceIdentifier:PH(e),options:n}),this.instances.set(e,r),this.instancesOptions.set(e,n),this.invokeOnInitCallbacks(r,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,r)}catch{}return r||null}normalizeInstanceIdentifier(e=ad){return this.component?this.component.multipleInstances?e:ad:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}};function PH(t){return t===ad?void 0:t}function DH(t){return t.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class RH{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const n=this.getProvider(e.name);if(n.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);n.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const n=new NH(e,this);return this.providers.set(e,n),n}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Rt;(function(t){t[t.DEBUG=0]="DEBUG",t[t.VERBOSE=1]="VERBOSE",t[t.INFO=2]="INFO",t[t.WARN=3]="WARN",t[t.ERROR=4]="ERROR",t[t.SILENT=5]="SILENT"})(Rt||(Rt={}));const kH={debug:Rt.DEBUG,verbose:Rt.VERBOSE,info:Rt.INFO,warn:Rt.WARN,error:Rt.ERROR,silent:Rt.SILENT},MH=Rt.INFO,OH={[Rt.DEBUG]:"log",[Rt.VERBOSE]:"log",[Rt.INFO]:"info",[Rt.WARN]:"warn",[Rt.ERROR]:"error"},jH=(t,e,...n)=>{if(e<t.logLevel)return;const r=new Date().toISOString(),i=OH[e];if(i)console[i](`[${r}]  ${t.name}:`,...n);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};let mA=class{constructor(e){this.name=e,this._logLevel=MH,this._logHandler=jH,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in Rt))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?kH[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,Rt.DEBUG,...e),this._logHandler(this,Rt.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,Rt.VERBOSE,...e),this._logHandler(this,Rt.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,Rt.INFO,...e),this._logHandler(this,Rt.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,Rt.WARN,...e),this._logHandler(this,Rt.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,Rt.ERROR,...e),this._logHandler(this,Rt.ERROR,...e)}};const LH=(t,e)=>e.some(n=>t instanceof n);let QR,XR;function VH(){return QR||(QR=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function UH(){return XR||(XR=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const f3=new WeakMap,gS=new WeakMap,h3=new WeakMap,yE=new WeakMap,pA=new WeakMap;function FH(t){const e=new Promise((n,r)=>{const i=()=>{t.removeEventListener("success",a),t.removeEventListener("error",s)},a=()=>{n(Wu(t.result)),i()},s=()=>{r(t.error),i()};t.addEventListener("success",a),t.addEventListener("error",s)});return e.then(n=>{n instanceof IDBCursor&&f3.set(n,t)}).catch(()=>{}),pA.set(e,t),e}function BH(t){if(gS.has(t))return;const e=new Promise((n,r)=>{const i=()=>{t.removeEventListener("complete",a),t.removeEventListener("error",s),t.removeEventListener("abort",s)},a=()=>{n(),i()},s=()=>{r(t.error||new DOMException("AbortError","AbortError")),i()};t.addEventListener("complete",a),t.addEventListener("error",s),t.addEventListener("abort",s)});gS.set(t,e)}let yS={get(t,e,n){if(t instanceof IDBTransaction){if(e==="done")return gS.get(t);if(e==="objectStoreNames")return t.objectStoreNames||h3.get(t);if(e==="store")return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return Wu(t[e])},set(t,e,n){return t[e]=n,!0},has(t,e){return t instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in t}};function zH(t){yS=t(yS)}function qH(t){return t===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...n){const r=t.call(vE(this),e,...n);return h3.set(r,e.sort?e.sort():[e]),Wu(r)}:UH().includes(t)?function(...e){return t.apply(vE(this),e),Wu(f3.get(this))}:function(...e){return Wu(t.apply(vE(this),e))}}function HH(t){return typeof t=="function"?qH(t):(t instanceof IDBTransaction&&BH(t),LH(t,VH())?new Proxy(t,yS):t)}function Wu(t){if(t instanceof IDBRequest)return FH(t);if(yE.has(t))return yE.get(t);const e=HH(t);return e!==t&&(yE.set(t,e),pA.set(e,t)),e}const vE=t=>pA.get(t);function GH(t,e,{blocked:n,upgrade:r,blocking:i,terminated:a}={}){const s=indexedDB.open(t,e),l=Wu(s);return r&&s.addEventListener("upgradeneeded",c=>{r(Wu(s.result),c.oldVersion,c.newVersion,Wu(s.transaction),c)}),n&&s.addEventListener("blocked",c=>n(c.oldVersion,c.newVersion,c)),l.then(c=>{a&&c.addEventListener("close",()=>a()),i&&c.addEventListener("versionchange",h=>i(h.oldVersion,h.newVersion,h))}).catch(()=>{}),l}const $H=["get","getKey","getAll","getAllKeys","count"],KH=["put","add","delete","clear"],xE=new Map;function ek(t,e){if(!(t instanceof IDBDatabase&&!(e in t)&&typeof e=="string"))return;if(xE.get(e))return xE.get(e);const n=e.replace(/FromIndex$/,""),r=e!==n,i=KH.includes(n);if(!(n in(r?IDBIndex:IDBObjectStore).prototype)||!(i||$H.includes(n)))return;const a=async function(s,...l){const c=this.transaction(s,i?"readwrite":"readonly");let h=c.store;return r&&(h=h.index(l.shift())),(await Promise.all([h[n](...l),i&&c.done]))[0]};return xE.set(e,a),a}zH(t=>({...t,get:(e,n,r)=>ek(e,n)||t.get(e,n,r),has:(e,n)=>!!ek(e,n)||t.has(e,n)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class WH{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(n=>{if(YH(n)){const r=n.getImmediate();return`${r.library}/${r.version}`}else return null}).filter(n=>n).join(" ")}}function YH(t){const e=t.getComponent();return(e==null?void 0:e.type)==="VERSION"}const vS="@firebase/app",tk="0.14.6";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Il=new mA("@firebase/app"),ZH="@firebase/app-compat",JH="@firebase/analytics-compat",QH="@firebase/analytics",XH="@firebase/app-check-compat",eG="@firebase/app-check",tG="@firebase/auth",nG="@firebase/auth-compat",rG="@firebase/database",iG="@firebase/data-connect",aG="@firebase/database-compat",sG="@firebase/functions",oG="@firebase/functions-compat",lG="@firebase/installations",uG="@firebase/installations-compat",cG="@firebase/messaging",dG="@firebase/messaging-compat",fG="@firebase/performance",hG="@firebase/performance-compat",mG="@firebase/remote-config",pG="@firebase/remote-config-compat",gG="@firebase/storage",yG="@firebase/storage-compat",vG="@firebase/firestore",xG="@firebase/ai",_G="@firebase/firestore-compat",bG="firebase",wG="12.6.0";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const xS="[DEFAULT]",EG={[vS]:"fire-core",[ZH]:"fire-core-compat",[QH]:"fire-analytics",[JH]:"fire-analytics-compat",[eG]:"fire-app-check",[XH]:"fire-app-check-compat",[tG]:"fire-auth",[nG]:"fire-auth-compat",[rG]:"fire-rtdb",[iG]:"fire-data-connect",[aG]:"fire-rtdb-compat",[sG]:"fire-fn",[oG]:"fire-fn-compat",[lG]:"fire-iid",[uG]:"fire-iid-compat",[cG]:"fire-fcm",[dG]:"fire-fcm-compat",[fG]:"fire-perf",[hG]:"fire-perf-compat",[mG]:"fire-rc",[pG]:"fire-rc-compat",[gG]:"fire-gcs",[yG]:"fire-gcs-compat",[vG]:"fire-fst",[_G]:"fire-fst-compat",[xG]:"fire-vertex","fire-js":"fire-js",[bG]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const h0=new Map,TG=new Map,_S=new Map;function nk(t,e){try{t.container.addComponent(e)}catch(n){Il.debug(`Component ${e.name} failed to register with FirebaseApp ${t.name}`,n)}}function Cd(t){const e=t.name;if(_S.has(e))return Il.debug(`There were multiple attempts to register component ${e}.`),!1;_S.set(e,t);for(const n of h0.values())nk(n,t);for(const n of TG.values())nk(n,t);return!0}function e_(t,e){const n=t.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),t.container.getProvider(e)}function Ma(t){return t==null?!1:t.settings!==void 0}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const SG={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},Yu=new _g("app","Firebase",SG);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class AG{constructor(e,n,r){this._isDeleted=!1,this._options={...e},this._config={...n},this._name=n.name,this._automaticDataCollectionEnabled=n.automaticDataCollectionEnabled,this._container=r,this.container.addComponent(new tc("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw Yu.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Wh=wG;function m3(t,e={}){let n=t;typeof e!="object"&&(e={name:e});const r={name:xS,automaticDataCollectionEnabled:!0,...e},i=r.name;if(typeof i!="string"||!i)throw Yu.create("bad-app-name",{appName:String(i)});if(n||(n=a3()),!n)throw Yu.create("no-options");const a=h0.get(i);if(a){if(Ad(n,a.options)&&Ad(r,a.config))return a;throw Yu.create("duplicate-app",{appName:i})}const s=new RH(i);for(const c of _S.values())s.addComponent(c);const l=new AG(n,r,s);return h0.set(i,l),l}function p3(t=xS){const e=h0.get(t);if(!e&&t===xS&&a3())return m3();if(!e)throw Yu.create("no-app",{appName:t});return e}function Co(t,e,n){let r=EG[t]??t;n&&(r+=`-${n}`);const i=r.match(/\s|\//),a=e.match(/\s|\//);if(i||a){const s=[`Unable to register library "${r}" with version "${e}":`];i&&s.push(`library name "${r}" contains illegal characters (whitespace or "/")`),i&&a&&s.push("and"),a&&s.push(`version name "${e}" contains illegal characters (whitespace or "/")`),Il.warn(s.join(" "));return}Cd(new tc(`${r}-version`,()=>({library:r,version:e}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const CG="firebase-heartbeat-database",IG=1,Fp="firebase-heartbeat-store";let _E=null;function g3(){return _E||(_E=GH(CG,IG,{upgrade:(t,e)=>{switch(e){case 0:try{t.createObjectStore(Fp)}catch(n){console.warn(n)}}}}).catch(t=>{throw Yu.create("idb-open",{originalErrorMessage:t.message})})),_E}async function NG(t){try{const n=(await g3()).transaction(Fp),r=await n.objectStore(Fp).get(y3(t));return await n.done,r}catch(e){if(e instanceof Uo)Il.warn(e.message);else{const n=Yu.create("idb-get",{originalErrorMessage:e==null?void 0:e.message});Il.warn(n.message)}}}async function rk(t,e){try{const r=(await g3()).transaction(Fp,"readwrite");await r.objectStore(Fp).put(e,y3(t)),await r.done}catch(n){if(n instanceof Uo)Il.warn(n.message);else{const r=Yu.create("idb-set",{originalErrorMessage:n==null?void 0:n.message});Il.warn(r.message)}}}function y3(t){return`${t.name}!${t.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const PG=1024,DG=30;class RG{constructor(e){this.container=e,this._heartbeatsCache=null;const n=this.container.getProvider("app").getImmediate();this._storage=new MG(n),this._heartbeatsCachePromise=this._storage.read().then(r=>(this._heartbeatsCache=r,r))}async triggerHeartbeat(){var e,n;try{const i=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),a=ik();if(((e=this._heartbeatsCache)==null?void 0:e.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((n=this._heartbeatsCache)==null?void 0:n.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===a||this._heartbeatsCache.heartbeats.some(s=>s.date===a))return;if(this._heartbeatsCache.heartbeats.push({date:a,agent:i}),this._heartbeatsCache.heartbeats.length>DG){const s=OG(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(s,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(r){Il.warn(r)}}async getHeartbeatsHeader(){var e;try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((e=this._heartbeatsCache)==null?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const n=ik(),{heartbeatsToSend:r,unsentEntries:i}=kG(this._heartbeatsCache.heartbeats),a=t3(JSON.stringify({version:2,heartbeats:r}));return this._heartbeatsCache.lastSentHeartbeatDate=n,i.length>0?(this._heartbeatsCache.heartbeats=i,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),a}catch(n){return Il.warn(n),""}}}function ik(){return new Date().toISOString().substring(0,10)}function kG(t,e=PG){const n=[];let r=t.slice();for(const i of t){const a=n.find(s=>s.agent===i.agent);if(a){if(a.dates.push(i.date),ak(n)>e){a.dates.pop();break}}else if(n.push({agent:i.agent,dates:[i.date]}),ak(n)>e){n.pop();break}r=r.slice(1)}return{heartbeatsToSend:n,unsentEntries:r}}class MG{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return d3()?bH().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const n=await NG(this.app);return n!=null&&n.heartbeats?n:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){if(await this._canUseIndexedDBPromise){const r=await this.read();return rk(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??r.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){if(await this._canUseIndexedDBPromise){const r=await this.read();return rk(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??r.lastSentHeartbeatDate,heartbeats:[...r.heartbeats,...e.heartbeats]})}else return}}function ak(t){return t3(JSON.stringify({version:2,heartbeats:t})).length}function OG(t){if(t.length===0)return-1;let e=0,n=t[0].date;for(let r=1;r<t.length;r++)t[r].date<n&&(n=t[r].date,e=r);return e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function jG(t){Cd(new tc("platform-logger",e=>new WH(e),"PRIVATE")),Cd(new tc("heartbeat",e=>new RG(e),"PRIVATE")),Co(vS,tk,t),Co(vS,tk,"esm2020"),Co("fire-js","")}jG("");function v3(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const LG=v3,x3=new _g("auth","Firebase",v3());/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const m0=new mA("@firebase/auth");function VG(t,...e){m0.logLevel<=Rt.WARN&&m0.warn(`Auth (${Wh}): ${t}`,...e)}function Hv(t,...e){m0.logLevel<=Rt.ERROR&&m0.error(`Auth (${Wh}): ${t}`,...e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Gs(t,...e){throw gA(t,...e)}function Io(t,...e){return gA(t,...e)}function _3(t,e,n){const r={...LG(),[e]:n};return new _g("auth","Firebase",r).create(e,{appName:t.name})}function El(t){return _3(t,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function gA(t,...e){if(typeof t!="string"){const n=e[0],r=[...e.slice(1)];return r[0]&&(r[0].appName=t.name),t._errorFactory.create(n,...r)}return x3.create(t,...e)}function ut(t,e,...n){if(!t)throw gA(e,...n)}function vl(t){const e="INTERNAL ASSERTION FAILED: "+t;throw Hv(e),new Error(e)}function Nl(t,e){t||vl(e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function bS(){var t;return typeof self<"u"&&((t=self.location)==null?void 0:t.href)||""}function UG(){return sk()==="http:"||sk()==="https:"}function sk(){var t;return typeof self<"u"&&((t=self.location)==null?void 0:t.protocol)||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function FG(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(UG()||vH()||"connection"in navigator)?navigator.onLine:!0}function BG(){if(typeof navigator>"u")return null;const t=navigator;return t.languages&&t.languages[0]||t.language||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wg{constructor(e,n){this.shortDelay=e,this.longDelay=n,Nl(n>e,"Short delay should be less than long delay!"),this.isMobile=gH()||xH()}get(){return FG()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function yA(t,e){Nl(t.emulator,"Emulator should always be set here");const{url:n}=t.emulator;return e?`${n}${e.startsWith("/")?e.slice(1):e}`:n}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class b3{static initialize(e,n,r){this.fetchImpl=e,n&&(this.headersImpl=n),r&&(this.responseImpl=r)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;vl("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;vl("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;vl("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const zG={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const qG=["/v1/accounts:signInWithCustomToken","/v1/accounts:signInWithEmailLink","/v1/accounts:signInWithIdp","/v1/accounts:signInWithPassword","/v1/accounts:signInWithPhoneNumber","/v1/token"],HG=new wg(3e4,6e4);function mc(t,e){return t.tenantId&&!e.tenantId?{...e,tenantId:t.tenantId}:e}async function Fl(t,e,n,r,i={}){return w3(t,i,async()=>{let a={},s={};r&&(e==="GET"?s=r:a={body:JSON.stringify(r)});const l=bg({key:t.config.apiKey,...s}).slice(1),c=await t._getAdditionalHeaders();c["Content-Type"]="application/json",t.languageCode&&(c["X-Firebase-Locale"]=t.languageCode);const h={method:e,headers:c,...a};return yH()||(h.referrerPolicy="no-referrer"),t.emulatorConfig&&hc(t.emulatorConfig.host)&&(h.credentials="include"),b3.fetch()(await E3(t,t.config.apiHost,n,l),h)})}async function w3(t,e,n){t._canInitEmulator=!1;const r={...zG,...e};try{const i=new $G(t),a=await Promise.race([n(),i.promise]);i.clearNetworkTimeout();const s=await a.json();if("needConfirmation"in s)throw yv(t,"account-exists-with-different-credential",s);if(a.ok&&!("errorMessage"in s))return s;{const l=a.ok?s.errorMessage:s.error.message,[c,h]=l.split(" : ");if(c==="FEDERATED_USER_ID_ALREADY_LINKED")throw yv(t,"credential-already-in-use",s);if(c==="EMAIL_EXISTS")throw yv(t,"email-already-in-use",s);if(c==="USER_DISABLED")throw yv(t,"user-disabled",s);const p=r[c]||c.toLowerCase().replace(/[_\s]+/g,"-");if(h)throw _3(t,p,h);Gs(t,p)}}catch(i){if(i instanceof Uo)throw i;Gs(t,"network-request-failed",{message:String(i)})}}async function Eg(t,e,n,r,i={}){const a=await Fl(t,e,n,r,i);return"mfaPendingCredential"in a&&Gs(t,"multi-factor-auth-required",{_serverResponse:a}),a}async function E3(t,e,n,r){const i=`${e}${n}?${r}`,a=t,s=a.config.emulator?yA(t.config,i):`${t.config.apiScheme}://${i}`;return qG.includes(n)&&(await a._persistenceManagerAvailable,a._getPersistenceType()==="COOKIE")?a._getPersistence()._getFinalTarget(s).toString():s}function GG(t){switch(t){case"ENFORCE":return"ENFORCE";case"AUDIT":return"AUDIT";case"OFF":return"OFF";default:return"ENFORCEMENT_STATE_UNSPECIFIED"}}class $G{clearNetworkTimeout(){clearTimeout(this.timer)}constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((n,r)=>{this.timer=setTimeout(()=>r(Io(this.auth,"network-request-failed")),HG.get())})}}function yv(t,e,n){const r={appName:t.name};n.email&&(r.email=n.email),n.phoneNumber&&(r.phoneNumber=n.phoneNumber);const i=Io(t,e,r);return i.customData._tokenResponse=n,i}function ok(t){return t!==void 0&&t.enterprise!==void 0}class KG{constructor(e){if(this.siteKey="",this.recaptchaEnforcementState=[],e.recaptchaKey===void 0)throw new Error("recaptchaKey undefined");this.siteKey=e.recaptchaKey.split("/")[3],this.recaptchaEnforcementState=e.recaptchaEnforcementState}getProviderEnforcementState(e){if(!this.recaptchaEnforcementState||this.recaptchaEnforcementState.length===0)return null;for(const n of this.recaptchaEnforcementState)if(n.provider&&n.provider===e)return GG(n.enforcementState);return null}isProviderEnabled(e){return this.getProviderEnforcementState(e)==="ENFORCE"||this.getProviderEnforcementState(e)==="AUDIT"}isAnyProviderEnabled(){return this.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")||this.isProviderEnabled("PHONE_PROVIDER")}}async function WG(t,e){return Fl(t,"GET","/v2/recaptchaConfig",mc(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function YG(t,e){return Fl(t,"POST","/v1/accounts:delete",e)}async function p0(t,e){return Fl(t,"POST","/v1/accounts:lookup",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ap(t){if(t)try{const e=new Date(Number(t));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function T3(t,e=!1){const n=xn(t),r=await n.getIdToken(e),i=vA(r);ut(i&&i.exp&&i.auth_time&&i.iat,n.auth,"internal-error");const a=typeof i.firebase=="object"?i.firebase:void 0,s=a==null?void 0:a.sign_in_provider;return{claims:i,token:r,authTime:Ap(bE(i.auth_time)),issuedAtTime:Ap(bE(i.iat)),expirationTime:Ap(bE(i.exp)),signInProvider:s||null,signInSecondFactor:(a==null?void 0:a.sign_in_second_factor)||null}}function bE(t){return Number(t)*1e3}function vA(t){const[e,n,r]=t.split(".");if(e===void 0||n===void 0||r===void 0)return Hv("JWT malformed, contained fewer than 3 sections"),null;try{const i=n3(n);return i?JSON.parse(i):(Hv("Failed to decode base64 JWT payload"),null)}catch(i){return Hv("Caught error parsing JWT payload as JSON",i==null?void 0:i.toString()),null}}function lk(t){const e=vA(t);return ut(e,"internal-error"),ut(typeof e.exp<"u","internal-error"),ut(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function yh(t,e,n=!1){if(n)return e;try{return await e}catch(r){throw r instanceof Uo&&ZG(r)&&t.auth.currentUser===t&&await t.auth.signOut(),r}}function ZG({code:t}){return t==="auth/user-disabled"||t==="auth/user-token-expired"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class JG{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){if(e){const n=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),n}else{this.errorBackoff=3e4;const r=(this.user.stsTokenManager.expirationTime??0)-Date.now()-3e5;return Math.max(0,r)}}schedule(e=!1){if(!this.isRunning)return;const n=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},n)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){(e==null?void 0:e.code)==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wS{constructor(e,n){this.createdAt=e,this.lastLoginAt=n,this._initializeTime()}_initializeTime(){this.lastSignInTime=Ap(this.lastLoginAt),this.creationTime=Ap(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function g0(t){var g;const e=t.auth,n=await t.getIdToken(),r=await yh(t,p0(e,{idToken:n}));ut(r==null?void 0:r.users.length,e,"internal-error");const i=r.users[0];t._notifyReloadListener(i);const a=(g=i.providerUserInfo)!=null&&g.length?S3(i.providerUserInfo):[],s=XG(t.providerData,a),l=t.isAnonymous,c=!(t.email&&i.passwordHash)&&!(s!=null&&s.length),h=l?c:!1,p={uid:i.localId,displayName:i.displayName||null,photoURL:i.photoUrl||null,email:i.email||null,emailVerified:i.emailVerified||!1,phoneNumber:i.phoneNumber||null,tenantId:i.tenantId||null,providerData:s,metadata:new wS(i.createdAt,i.lastLoginAt),isAnonymous:h};Object.assign(t,p)}async function QG(t){const e=xn(t);await g0(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function XG(t,e){return[...t.filter(r=>!e.some(i=>i.providerId===r.providerId)),...e]}function S3(t){return t.map(({providerId:e,...n})=>({providerId:e,uid:n.rawId||"",displayName:n.displayName||null,email:n.email||null,phoneNumber:n.phoneNumber||null,photoURL:n.photoUrl||null}))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function e$(t,e){const n=await w3(t,{},async()=>{const r=bg({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:i,apiKey:a}=t.config,s=await E3(t,i,"/v1/token",`key=${a}`),l=await t._getAdditionalHeaders();l["Content-Type"]="application/x-www-form-urlencoded";const c={method:"POST",headers:l,body:r};return t.emulatorConfig&&hc(t.emulatorConfig.host)&&(c.credentials="include"),b3.fetch()(s,c)});return{accessToken:n.access_token,expiresIn:n.expires_in,refreshToken:n.refresh_token}}async function t$(t,e){return Fl(t,"POST","/v2/accounts:revokeToken",mc(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class th{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){ut(e.idToken,"internal-error"),ut(typeof e.idToken<"u","internal-error"),ut(typeof e.refreshToken<"u","internal-error");const n="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):lk(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,n)}updateFromIdToken(e){ut(e.length!==0,"internal-error");const n=lk(e);this.updateTokensAndExpiration(e,null,n)}async getToken(e,n=!1){return!n&&this.accessToken&&!this.isExpired?this.accessToken:(ut(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(e,n){const{accessToken:r,refreshToken:i,expiresIn:a}=await e$(e,n);this.updateTokensAndExpiration(r,i,Number(a))}updateTokensAndExpiration(e,n,r){this.refreshToken=n||null,this.accessToken=e||null,this.expirationTime=Date.now()+r*1e3}static fromJSON(e,n){const{refreshToken:r,accessToken:i,expirationTime:a}=n,s=new th;return r&&(ut(typeof r=="string","internal-error",{appName:e}),s.refreshToken=r),i&&(ut(typeof i=="string","internal-error",{appName:e}),s.accessToken=i),a&&(ut(typeof a=="number","internal-error",{appName:e}),s.expirationTime=a),s}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new th,this.toJSON())}_performRefresh(){return vl("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ku(t,e){ut(typeof t=="string"||typeof t>"u","internal-error",{appName:e})}class zs{constructor({uid:e,auth:n,stsTokenManager:r,...i}){this.providerId="firebase",this.proactiveRefresh=new JG(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=e,this.auth=n,this.stsTokenManager=r,this.accessToken=r.accessToken,this.displayName=i.displayName||null,this.email=i.email||null,this.emailVerified=i.emailVerified||!1,this.phoneNumber=i.phoneNumber||null,this.photoURL=i.photoURL||null,this.isAnonymous=i.isAnonymous||!1,this.tenantId=i.tenantId||null,this.providerData=i.providerData?[...i.providerData]:[],this.metadata=new wS(i.createdAt||void 0,i.lastLoginAt||void 0)}async getIdToken(e){const n=await yh(this,this.stsTokenManager.getToken(this.auth,e));return ut(n,this.auth,"internal-error"),this.accessToken!==n&&(this.accessToken=n,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),n}getIdTokenResult(e){return T3(this,e)}reload(){return QG(this)}_assign(e){this!==e&&(ut(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(n=>({...n})),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const n=new zs({...this,auth:e,stsTokenManager:this.stsTokenManager._clone()});return n.metadata._copy(this.metadata),n}_onReload(e){ut(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,n=!1){let r=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),r=!0),n&&await g0(this),await this.auth._persistUserIfCurrent(this),r&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(Ma(this.auth.app))return Promise.reject(El(this.auth));const e=await this.getIdToken();return await yh(this,YG(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return{uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>({...e})),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId,...this.metadata.toJSON(),apiKey:this.auth.config.apiKey,appName:this.auth.name}}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,n){const r=n.displayName??void 0,i=n.email??void 0,a=n.phoneNumber??void 0,s=n.photoURL??void 0,l=n.tenantId??void 0,c=n._redirectEventId??void 0,h=n.createdAt??void 0,p=n.lastLoginAt??void 0,{uid:g,emailVerified:x,isAnonymous:b,providerData:C,stsTokenManager:A}=n;ut(g&&A,e,"internal-error");const D=th.fromJSON(this.name,A);ut(typeof g=="string",e,"internal-error"),ku(r,e.name),ku(i,e.name),ut(typeof x=="boolean",e,"internal-error"),ut(typeof b=="boolean",e,"internal-error"),ku(a,e.name),ku(s,e.name),ku(l,e.name),ku(c,e.name),ku(h,e.name),ku(p,e.name);const R=new zs({uid:g,auth:e,email:i,emailVerified:x,displayName:r,isAnonymous:b,photoURL:s,phoneNumber:a,tenantId:l,stsTokenManager:D,createdAt:h,lastLoginAt:p});return C&&Array.isArray(C)&&(R.providerData=C.map(j=>({...j}))),c&&(R._redirectEventId=c),R}static async _fromIdTokenResponse(e,n,r=!1){const i=new th;i.updateFromServerResponse(n);const a=new zs({uid:n.localId,auth:e,stsTokenManager:i,isAnonymous:r});return await g0(a),a}static async _fromGetAccountInfoResponse(e,n,r){const i=n.users[0];ut(i.localId!==void 0,"internal-error");const a=i.providerUserInfo!==void 0?S3(i.providerUserInfo):[],s=!(i.email&&i.passwordHash)&&!(a!=null&&a.length),l=new th;l.updateFromIdToken(r);const c=new zs({uid:i.localId,auth:e,stsTokenManager:l,isAnonymous:s}),h={uid:i.localId,displayName:i.displayName||null,photoURL:i.photoUrl||null,email:i.email||null,emailVerified:i.emailVerified||!1,phoneNumber:i.phoneNumber||null,tenantId:i.tenantId||null,providerData:a,metadata:new wS(i.createdAt,i.lastLoginAt),isAnonymous:!(i.email&&i.passwordHash)&&!(a!=null&&a.length)};return Object.assign(c,h),c}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const uk=new Map;function xl(t){Nl(t instanceof Function,"Expected a class definition");let e=uk.get(t);return e?(Nl(e instanceof t,"Instance stored in cache mismatched with class"),e):(e=new t,uk.set(t,e),e)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class A3{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,n){this.storage[e]=n}async _get(e){const n=this.storage[e];return n===void 0?null:n}async _remove(e){delete this.storage[e]}_addListener(e,n){}_removeListener(e,n){}}A3.type="NONE";const ck=A3;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Gv(t,e,n){return`firebase:${t}:${e}:${n}`}class nh{constructor(e,n,r){this.persistence=e,this.auth=n,this.userKey=r;const{config:i,name:a}=this.auth;this.fullUserKey=Gv(this.userKey,i.apiKey,a),this.fullPersistenceKey=Gv("persistence",i.apiKey,a),this.boundEventHandler=n._onStorageEvent.bind(n),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);if(!e)return null;if(typeof e=="string"){const n=await p0(this.auth,{idToken:e}).catch(()=>{});return n?zs._fromGetAccountInfoResponse(this.auth,n,e):null}return zs._fromJSON(this.auth,e)}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const n=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,n)return this.setCurrentUser(n)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,n,r="authUser"){if(!n.length)return new nh(xl(ck),e,r);const i=(await Promise.all(n.map(async h=>{if(await h._isAvailable())return h}))).filter(h=>h);let a=i[0]||xl(ck);const s=Gv(r,e.config.apiKey,e.name);let l=null;for(const h of n)try{const p=await h._get(s);if(p){let g;if(typeof p=="string"){const x=await p0(e,{idToken:p}).catch(()=>{});if(!x)break;g=await zs._fromGetAccountInfoResponse(e,x,p)}else g=zs._fromJSON(e,p);h!==a&&(l=g),a=h;break}}catch{}const c=i.filter(h=>h._shouldAllowMigration);return!a._shouldAllowMigration||!c.length?new nh(a,e,r):(a=c[0],l&&await a._set(s,l.toJSON()),await Promise.all(n.map(async h=>{if(h!==a)try{await h._remove(s)}catch{}})),new nh(a,e,r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function dk(t){const e=t.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(P3(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(C3(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(R3(e))return"Blackberry";if(k3(e))return"Webos";if(I3(e))return"Safari";if((e.includes("chrome/")||N3(e))&&!e.includes("edge/"))return"Chrome";if(D3(e))return"Android";{const n=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,r=t.match(n);if((r==null?void 0:r.length)===2)return r[1]}return"Other"}function C3(t=Nr()){return/firefox\//i.test(t)}function I3(t=Nr()){const e=t.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function N3(t=Nr()){return/crios\//i.test(t)}function P3(t=Nr()){return/iemobile/i.test(t)}function D3(t=Nr()){return/android/i.test(t)}function R3(t=Nr()){return/blackberry/i.test(t)}function k3(t=Nr()){return/webos/i.test(t)}function xA(t=Nr()){return/iphone|ipad|ipod/i.test(t)||/macintosh/i.test(t)&&/mobile/i.test(t)}function n$(t=Nr()){var e;return xA(t)&&!!((e=window.navigator)!=null&&e.standalone)}function r$(){return _H()&&document.documentMode===10}function M3(t=Nr()){return xA(t)||D3(t)||k3(t)||R3(t)||/windows phone/i.test(t)||P3(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function O3(t,e=[]){let n;switch(t){case"Browser":n=dk(Nr());break;case"Worker":n=`${dk(Nr())}-${t}`;break;default:n=t}const r=e.length?e.join(","):"FirebaseCore-web";return`${n}/JsCore/${Wh}/${r}`}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class i${constructor(e){this.auth=e,this.queue=[]}pushCallback(e,n){const r=a=>new Promise((s,l)=>{try{const c=e(a);s(c)}catch(c){l(c)}});r.onAbort=n,this.queue.push(r);const i=this.queue.length-1;return()=>{this.queue[i]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const n=[];try{for(const r of this.queue)await r(e),r.onAbort&&n.push(r.onAbort)}catch(r){n.reverse();for(const i of n)try{i()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:r==null?void 0:r.message})}}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function a$(t,e={}){return Fl(t,"GET","/v2/passwordPolicy",mc(t,e))}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const s$=6;class o${constructor(e){var r;const n=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=n.minPasswordLength??s$,n.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=n.maxPasswordLength),n.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=n.containsLowercaseCharacter),n.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=n.containsUppercaseCharacter),n.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=n.containsNumericCharacter),n.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=n.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=((r=e.allowedNonAlphanumericCharacters)==null?void 0:r.join(""))??"",this.forceUpgradeOnSignin=e.forceUpgradeOnSignin??!1,this.schemaVersion=e.schemaVersion}validatePassword(e){const n={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,n),this.validatePasswordCharacterOptions(e,n),n.isValid&&(n.isValid=n.meetsMinPasswordLength??!0),n.isValid&&(n.isValid=n.meetsMaxPasswordLength??!0),n.isValid&&(n.isValid=n.containsLowercaseLetter??!0),n.isValid&&(n.isValid=n.containsUppercaseLetter??!0),n.isValid&&(n.isValid=n.containsNumericCharacter??!0),n.isValid&&(n.isValid=n.containsNonAlphanumericCharacter??!0),n}validatePasswordLengthOptions(e,n){const r=this.customStrengthOptions.minPasswordLength,i=this.customStrengthOptions.maxPasswordLength;r&&(n.meetsMinPasswordLength=e.length>=r),i&&(n.meetsMaxPasswordLength=e.length<=i)}validatePasswordCharacterOptions(e,n){this.updatePasswordCharacterOptionsStatuses(n,!1,!1,!1,!1);let r;for(let i=0;i<e.length;i++)r=e.charAt(i),this.updatePasswordCharacterOptionsStatuses(n,r>="a"&&r<="z",r>="A"&&r<="Z",r>="0"&&r<="9",this.allowedNonAlphanumericCharacters.includes(r))}updatePasswordCharacterOptionsStatuses(e,n,r,i,a){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=n)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=r)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=i)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=a))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class l${constructor(e,n,r,i){this.app=e,this.heartbeatServiceProvider=n,this.appCheckServiceProvider=r,this.config=i,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new fk(this),this.idTokenSubscription=new fk(this),this.beforeStateQueue=new i$(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=x3,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this._resolvePersistenceManagerAvailable=void 0,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=i.sdkClientVersion,this._persistenceManagerAvailable=new Promise(a=>this._resolvePersistenceManagerAvailable=a)}_initializeWithPersistence(e,n){return n&&(this._popupRedirectResolver=xl(n)),this._initializationPromise=this.queue(async()=>{var r,i,a;if(!this._deleted&&(this.persistenceManager=await nh.create(this,e),(r=this._resolvePersistenceManagerAvailable)==null||r.call(this),!this._deleted)){if((i=this._popupRedirectResolver)!=null&&i._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(n),this.lastNotifiedUid=((a=this.currentUser)==null?void 0:a.uid)||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUserFromIdToken(e){try{const n=await p0(this,{idToken:e}),r=await zs._fromGetAccountInfoResponse(this,n,e);await this.directlySetCurrentUser(r)}catch(n){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",n),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){var a;if(Ma(this.app)){const s=this.app.settings.authIdToken;return s?new Promise(l=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(s).then(l,l))}):this.directlySetCurrentUser(null)}const n=await this.assertedPersistence.getCurrentUser();let r=n,i=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const s=(a=this.redirectUser)==null?void 0:a._redirectEventId,l=r==null?void 0:r._redirectEventId,c=await this.tryRedirectSignIn(e);(!s||s===l)&&(c!=null&&c.user)&&(r=c.user,i=!0)}if(!r)return this.directlySetCurrentUser(null);if(!r._redirectEventId){if(i)try{await this.beforeStateQueue.runMiddleware(r)}catch(s){r=n,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(s))}return r?this.reloadAndSetCurrentUserOrClear(r):this.directlySetCurrentUser(null)}return ut(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===r._redirectEventId?this.directlySetCurrentUser(r):this.reloadAndSetCurrentUserOrClear(r)}async tryRedirectSignIn(e){let n=null;try{n=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return n}async reloadAndSetCurrentUserOrClear(e){try{await g0(e)}catch(n){if((n==null?void 0:n.code)!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=BG()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(Ma(this.app))return Promise.reject(El(this));const n=e?xn(e):null;return n&&ut(n.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(n&&n._clone(this))}async _updateCurrentUser(e,n=!1){if(!this._deleted)return e&&ut(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),n||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return Ma(this.app)?Promise.reject(El(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return Ma(this.app)?Promise.reject(El(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(xl(e))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const n=this._getPasswordPolicyInternal();return n.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):n.validatePassword(e)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await a$(this),n=new o$(e);this.tenantId===null?this._projectPasswordPolicy=n:this._tenantPasswordPolicies[this.tenantId]=n}_getPersistenceType(){return this.assertedPersistence.persistence.type}_getPersistence(){return this.assertedPersistence.persistence}_updateErrorMap(e){this._errorFactory=new _g("auth","Firebase",e())}onAuthStateChanged(e,n,r){return this.registerStateListener(this.authStateSubscription,e,n,r)}beforeAuthStateChanged(e,n){return this.beforeStateQueue.pushCallback(e,n)}onIdTokenChanged(e,n,r){return this.registerStateListener(this.idTokenSubscription,e,n,r)}authStateReady(){return new Promise((e,n)=>{if(this.currentUser)e();else{const r=this.onAuthStateChanged(()=>{r(),e()},n)}})}async revokeAccessToken(e){if(this.currentUser){const n=await this.currentUser.getIdToken(),r={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:n};this.tenantId!=null&&(r.tenantId=this.tenantId),await t$(this,r)}}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(e=this._currentUser)==null?void 0:e.toJSON()}}async _setRedirectUser(e,n){const r=await this.getOrInitRedirectPersistenceManager(n);return e===null?r.removeCurrentUser():r.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const n=e&&xl(e)||this._popupRedirectResolver;ut(n,this,"argument-error"),this.redirectPersistenceManager=await nh.create(this,[xl(n._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){var n,r;return this._isInitialized&&await this.queue(async()=>{}),((n=this._currentUser)==null?void 0:n._redirectEventId)===e?this._currentUser:((r=this.redirectUser)==null?void 0:r._redirectEventId)===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var n;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const e=((n=this.currentUser)==null?void 0:n.uid)??null;this.lastNotifiedUid!==e&&(this.lastNotifiedUid=e,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,n,r,i){if(this._deleted)return()=>{};const a=typeof n=="function"?n:n.next.bind(n);let s=!1;const l=this._isInitialized?Promise.resolve():this._initializationPromise;if(ut(l,this,"internal-error"),l.then(()=>{s||a(this.currentUser)}),typeof n=="function"){const c=e.addObserver(n,r,i);return()=>{s=!0,c()}}else{const c=e.addObserver(n);return()=>{s=!0,c()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return ut(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=O3(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var i;const e={"X-Client-Version":this.clientVersion};this.app.options.appId&&(e["X-Firebase-gmpid"]=this.app.options.appId);const n=await((i=this.heartbeatServiceProvider.getImmediate({optional:!0}))==null?void 0:i.getHeartbeatsHeader());n&&(e["X-Firebase-Client"]=n);const r=await this._getAppCheckToken();return r&&(e["X-Firebase-AppCheck"]=r),e}async _getAppCheckToken(){var n;if(Ma(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const e=await((n=this.appCheckServiceProvider.getImmediate({optional:!0}))==null?void 0:n.getToken());return e!=null&&e.error&&VG(`Error while retrieving App Check token: ${e.error}`),e==null?void 0:e.token}}function Hd(t){return xn(t)}class fk{constructor(e){this.auth=e,this.observer=null,this.addObserver=AH(n=>this.observer=n)}get next(){return ut(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let t_={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function u$(t){t_=t}function j3(t){return t_.loadJS(t)}function c$(){return t_.recaptchaEnterpriseScript}function d$(){return t_.gapiScript}function f$(t){return`__${t}${Math.floor(Math.random()*1e6)}`}class h${constructor(){this.enterprise=new m$}ready(e){e()}execute(e,n){return Promise.resolve("token")}render(e,n){return""}}class m${ready(e){e()}execute(e,n){return Promise.resolve("token")}render(e,n){return""}}const p$="recaptcha-enterprise",L3="NO_RECAPTCHA";class g${constructor(e){this.type=p$,this.auth=Hd(e)}async verify(e="verify",n=!1){async function r(a){if(!n){if(a.tenantId==null&&a._agentRecaptchaConfig!=null)return a._agentRecaptchaConfig.siteKey;if(a.tenantId!=null&&a._tenantRecaptchaConfigs[a.tenantId]!==void 0)return a._tenantRecaptchaConfigs[a.tenantId].siteKey}return new Promise(async(s,l)=>{WG(a,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(c=>{if(c.recaptchaKey===void 0)l(new Error("recaptcha Enterprise site key undefined"));else{const h=new KG(c);return a.tenantId==null?a._agentRecaptchaConfig=h:a._tenantRecaptchaConfigs[a.tenantId]=h,s(h.siteKey)}}).catch(c=>{l(c)})})}function i(a,s,l){const c=window.grecaptcha;ok(c)?c.enterprise.ready(()=>{c.enterprise.execute(a,{action:e}).then(h=>{s(h)}).catch(()=>{s(L3)})}):l(Error("No reCAPTCHA enterprise script loaded."))}return this.auth.settings.appVerificationDisabledForTesting?new h$().execute("siteKey",{action:"verify"}):new Promise((a,s)=>{r(this.auth).then(l=>{if(!n&&ok(window.grecaptcha))i(l,a,s);else{if(typeof window>"u"){s(new Error("RecaptchaVerifier is only supported in browser"));return}let c=c$();c.length!==0&&(c+=l),j3(c).then(()=>{i(l,a,s)}).catch(h=>{s(h)})}}).catch(l=>{s(l)})})}}async function hk(t,e,n,r=!1,i=!1){const a=new g$(t);let s;if(i)s=L3;else try{s=await a.verify(n)}catch{s=await a.verify(n,!0)}const l={...e};if(n==="mfaSmsEnrollment"||n==="mfaSmsSignIn"){if("phoneEnrollmentInfo"in l){const c=l.phoneEnrollmentInfo.phoneNumber,h=l.phoneEnrollmentInfo.recaptchaToken;Object.assign(l,{phoneEnrollmentInfo:{phoneNumber:c,recaptchaToken:h,captchaResponse:s,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}else if("phoneSignInInfo"in l){const c=l.phoneSignInInfo.recaptchaToken;Object.assign(l,{phoneSignInInfo:{recaptchaToken:c,captchaResponse:s,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}return l}return r?Object.assign(l,{captchaResp:s}):Object.assign(l,{captchaResponse:s}),Object.assign(l,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(l,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),l}async function ES(t,e,n,r,i){var a;if((a=t._getRecaptchaConfig())!=null&&a.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")){const s=await hk(t,e,n,n==="getOobCode");return r(t,s)}else return r(t,e).catch(async s=>{if(s.code==="auth/missing-recaptcha-token"){console.log(`${n} is protected by reCAPTCHA Enterprise for this project. Automatically triggering the reCAPTCHA flow and restarting the flow.`);const l=await hk(t,e,n,n==="getOobCode");return r(t,l)}else return Promise.reject(s)})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function y$(t,e){const n=e_(t,"auth");if(n.isInitialized()){const i=n.getImmediate(),a=n.getOptions();if(Ad(a,e??{}))return i;Gs(i,"already-initialized")}return n.initialize({options:e})}function v$(t,e){const n=(e==null?void 0:e.persistence)||[],r=(Array.isArray(n)?n:[n]).map(xl);e!=null&&e.errorMap&&t._updateErrorMap(e.errorMap),t._initializeWithPersistence(r,e==null?void 0:e.popupRedirectResolver)}function x$(t,e,n){const r=Hd(t);ut(/^https?:\/\//.test(e),r,"invalid-emulator-scheme");const i=!1,a=V3(e),{host:s,port:l}=_$(e),c=l===null?"":`:${l}`,h={url:`${a}//${s}${c}/`},p=Object.freeze({host:s,port:l,protocol:a.replace(":",""),options:Object.freeze({disableWarnings:i})});if(!r._canInitEmulator){ut(r.config.emulator&&r.emulatorConfig,r,"emulator-config-failed"),ut(Ad(h,r.config.emulator)&&Ad(p,r.emulatorConfig),r,"emulator-config-failed");return}r.config.emulator=h,r.emulatorConfig=p,r.settings.appVerificationDisabledForTesting=!0,hc(s)?(hA(`${a}//${s}${c}`),o3("Auth",!0)):b$()}function V3(t){const e=t.indexOf(":");return e<0?"":t.substr(0,e+1)}function _$(t){const e=V3(t),n=/(\/\/)?([^?#/]+)/.exec(t.substr(e.length));if(!n)return{host:"",port:null};const r=n[2].split("@").pop()||"",i=/^(\[[^\]]+\])(:|$)/.exec(r);if(i){const a=i[1];return{host:a,port:mk(r.substr(a.length+1))}}else{const[a,s]=r.split(":");return{host:a,port:mk(s)}}}function mk(t){if(!t)return null;const e=Number(t);return isNaN(e)?null:e}function b$(){function t(){const e=document.createElement("p"),n=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",n.position="fixed",n.width="100%",n.backgroundColor="#ffffff",n.border=".1em solid #000000",n.color="#b50000",n.bottom="0px",n.left="0px",n.margin="0px",n.zIndex="10000",n.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",t):t())}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _A{constructor(e,n){this.providerId=e,this.signInMethod=n}toJSON(){return vl("not implemented")}_getIdTokenResponse(e){return vl("not implemented")}_linkToIdToken(e,n){return vl("not implemented")}_getReauthenticationResolver(e){return vl("not implemented")}}async function w$(t,e){return Fl(t,"POST","/v1/accounts:signUp",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function E$(t,e){return Eg(t,"POST","/v1/accounts:signInWithPassword",mc(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function T$(t,e){return Eg(t,"POST","/v1/accounts:signInWithEmailLink",mc(t,e))}async function S$(t,e){return Eg(t,"POST","/v1/accounts:signInWithEmailLink",mc(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bp extends _A{constructor(e,n,r,i=null){super("password",r),this._email=e,this._password=n,this._tenantId=i}static _fromEmailAndPassword(e,n){return new Bp(e,n,"password")}static _fromEmailAndCode(e,n,r=null){return new Bp(e,n,"emailLink",r)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(e){const n=typeof e=="string"?JSON.parse(e):e;if(n!=null&&n.email&&(n!=null&&n.password)){if(n.signInMethod==="password")return this._fromEmailAndPassword(n.email,n.password);if(n.signInMethod==="emailLink")return this._fromEmailAndCode(n.email,n.password,n.tenantId)}return null}async _getIdTokenResponse(e){switch(this.signInMethod){case"password":const n={returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return ES(e,n,"signInWithPassword",E$);case"emailLink":return T$(e,{email:this._email,oobCode:this._password});default:Gs(e,"internal-error")}}async _linkToIdToken(e,n){switch(this.signInMethod){case"password":const r={idToken:n,returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return ES(e,r,"signUpPassword",w$);case"emailLink":return S$(e,{idToken:n,email:this._email,oobCode:this._password});default:Gs(e,"internal-error")}}_getReauthenticationResolver(e){return this._getIdTokenResponse(e)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function rh(t,e){return Eg(t,"POST","/v1/accounts:signInWithIdp",mc(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const A$="http://localhost";class Id extends _A{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const n=new Id(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(n.idToken=e.idToken),e.accessToken&&(n.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(n.nonce=e.nonce),e.pendingToken&&(n.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(n.accessToken=e.oauthToken,n.secret=e.oauthTokenSecret):Gs("argument-error"),n}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const n=typeof e=="string"?JSON.parse(e):e,{providerId:r,signInMethod:i,...a}=n;if(!r||!i)return null;const s=new Id(r,i);return s.idToken=a.idToken||void 0,s.accessToken=a.accessToken||void 0,s.secret=a.secret,s.nonce=a.nonce,s.pendingToken=a.pendingToken||null,s}_getIdTokenResponse(e){const n=this.buildRequest();return rh(e,n)}_linkToIdToken(e,n){const r=this.buildRequest();return r.idToken=n,rh(e,r)}_getReauthenticationResolver(e){const n=this.buildRequest();return n.autoCreate=!1,rh(e,n)}buildRequest(){const e={requestUri:A$,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const n={};this.idToken&&(n.id_token=this.idToken),this.accessToken&&(n.access_token=this.accessToken),this.secret&&(n.oauth_token_secret=this.secret),n.providerId=this.providerId,this.nonce&&!this.pendingToken&&(n.nonce=this.nonce),e.postBody=bg(n)}return e}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function C$(t){switch(t){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}function I$(t){const e=gp(yp(t)).link,n=e?gp(yp(e)).deep_link_id:null,r=gp(yp(t)).deep_link_id;return(r?gp(yp(r)).link:null)||r||n||e||t}class bA{constructor(e){const n=gp(yp(e)),r=n.apiKey??null,i=n.oobCode??null,a=C$(n.mode??null);ut(r&&i&&a,"argument-error"),this.apiKey=r,this.operation=a,this.code=i,this.continueUrl=n.continueUrl??null,this.languageCode=n.lang??null,this.tenantId=n.tenantId??null}static parseLink(e){const n=I$(e);try{return new bA(n)}catch{return null}}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Yh{constructor(){this.providerId=Yh.PROVIDER_ID}static credential(e,n){return Bp._fromEmailAndPassword(e,n)}static credentialWithLink(e,n){const r=bA.parseLink(n);return ut(r,"argument-error"),Bp._fromEmailAndCode(e,r.code,r.tenantId)}}Yh.PROVIDER_ID="password";Yh.EMAIL_PASSWORD_SIGN_IN_METHOD="password";Yh.EMAIL_LINK_SIGN_IN_METHOD="emailLink";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class U3{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Tg extends U3{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Uu extends Tg{constructor(){super("facebook.com")}static credential(e){return Id._fromParams({providerId:Uu.PROVIDER_ID,signInMethod:Uu.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return Uu.credentialFromTaggedObject(e)}static credentialFromError(e){return Uu.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return Uu.credential(e.oauthAccessToken)}catch{return null}}}Uu.FACEBOOK_SIGN_IN_METHOD="facebook.com";Uu.PROVIDER_ID="facebook.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fu extends Tg{constructor(){super("google.com"),this.addScope("profile")}static credential(e,n){return Id._fromParams({providerId:Fu.PROVIDER_ID,signInMethod:Fu.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:n})}static credentialFromResult(e){return Fu.credentialFromTaggedObject(e)}static credentialFromError(e){return Fu.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:n,oauthAccessToken:r}=e;if(!n&&!r)return null;try{return Fu.credential(n,r)}catch{return null}}}Fu.GOOGLE_SIGN_IN_METHOD="google.com";Fu.PROVIDER_ID="google.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bu extends Tg{constructor(){super("github.com")}static credential(e){return Id._fromParams({providerId:Bu.PROVIDER_ID,signInMethod:Bu.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return Bu.credentialFromTaggedObject(e)}static credentialFromError(e){return Bu.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return Bu.credential(e.oauthAccessToken)}catch{return null}}}Bu.GITHUB_SIGN_IN_METHOD="github.com";Bu.PROVIDER_ID="github.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zu extends Tg{constructor(){super("twitter.com")}static credential(e,n){return Id._fromParams({providerId:zu.PROVIDER_ID,signInMethod:zu.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:n})}static credentialFromResult(e){return zu.credentialFromTaggedObject(e)}static credentialFromError(e){return zu.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthAccessToken:n,oauthTokenSecret:r}=e;if(!n||!r)return null;try{return zu.credential(n,r)}catch{return null}}}zu.TWITTER_SIGN_IN_METHOD="twitter.com";zu.PROVIDER_ID="twitter.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function N$(t,e){return Eg(t,"POST","/v1/accounts:signUp",mc(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Nd{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,n,r,i=!1){const a=await zs._fromIdTokenResponse(e,r,i),s=pk(r);return new Nd({user:a,providerId:s,_tokenResponse:r,operationType:n})}static async _forOperation(e,n,r){await e._updateTokensIfNecessary(r,!0);const i=pk(r);return new Nd({user:e,providerId:i,_tokenResponse:r,operationType:n})}}function pk(t){return t.providerId?t.providerId:"phoneNumber"in t?"phone":null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class y0 extends Uo{constructor(e,n,r,i){super(n.code,n.message),this.operationType=r,this.user=i,Object.setPrototypeOf(this,y0.prototype),this.customData={appName:e.name,tenantId:e.tenantId??void 0,_serverResponse:n.customData._serverResponse,operationType:r}}static _fromErrorAndOperation(e,n,r,i){return new y0(e,n,r,i)}}function F3(t,e,n,r){return(e==="reauthenticate"?n._getReauthenticationResolver(t):n._getIdTokenResponse(t)).catch(a=>{throw a.code==="auth/multi-factor-auth-required"?y0._fromErrorAndOperation(t,a,e,r):a})}async function P$(t,e,n=!1){const r=await yh(t,e._linkToIdToken(t.auth,await t.getIdToken()),n);return Nd._forOperation(t,"link",r)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function D$(t,e,n=!1){const{auth:r}=t;if(Ma(r.app))return Promise.reject(El(r));const i="reauthenticate";try{const a=await yh(t,F3(r,i,e,t),n);ut(a.idToken,r,"internal-error");const s=vA(a.idToken);ut(s,r,"internal-error");const{sub:l}=s;return ut(t.uid===l,r,"user-mismatch"),Nd._forOperation(t,i,a)}catch(a){throw(a==null?void 0:a.code)==="auth/user-not-found"&&Gs(r,"user-mismatch"),a}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function B3(t,e,n=!1){if(Ma(t.app))return Promise.reject(El(t));const r="signIn",i=await F3(t,r,e),a=await Nd._fromIdTokenResponse(t,r,i);return n||await t._updateCurrentUser(a.user),a}async function R$(t,e){return B3(Hd(t),e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function z3(t){const e=Hd(t);e._getPasswordPolicyInternal()&&await e._updatePasswordPolicy()}async function k$(t,e,n){if(Ma(t.app))return Promise.reject(El(t));const r=Hd(t),s=await ES(r,{returnSecureToken:!0,email:e,password:n,clientType:"CLIENT_TYPE_WEB"},"signUpPassword",N$).catch(c=>{throw c.code==="auth/password-does-not-meet-requirements"&&z3(t),c}),l=await Nd._fromIdTokenResponse(r,"signIn",s);return await r._updateCurrentUser(l.user),l}function M$(t,e,n){return Ma(t.app)?Promise.reject(El(t)):R$(xn(t),Yh.credential(e,n)).catch(async r=>{throw r.code==="auth/password-does-not-meet-requirements"&&z3(t),r})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function O$(t,e){return Fl(t,"POST","/v1/accounts:update",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function j$(t,{displayName:e,photoURL:n}){if(e===void 0&&n===void 0)return;const r=xn(t),a={idToken:await r.getIdToken(),displayName:e,photoUrl:n,returnSecureToken:!0},s=await yh(r,O$(r.auth,a));r.displayName=s.displayName||null,r.photoURL=s.photoUrl||null;const l=r.providerData.find(({providerId:c})=>c==="password");l&&(l.displayName=r.displayName,l.photoURL=r.photoURL),await r._updateTokensIfNecessary(s)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function L$(t,e){return xn(t).setPersistence(e)}function V$(t,e,n,r){return xn(t).onIdTokenChanged(e,n,r)}function U$(t,e,n){return xn(t).beforeAuthStateChanged(e,n)}function F$(t,e,n,r){return xn(t).onAuthStateChanged(e,n,r)}function B$(t){return xn(t).signOut()}const v0="__sak";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class q3{constructor(e,n){this.storageRetriever=e,this.type=n}_isAvailable(){try{return this.storage?(this.storage.setItem(v0,"1"),this.storage.removeItem(v0),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,n){return this.storage.setItem(e,JSON.stringify(n)),Promise.resolve()}_get(e){const n=this.storage.getItem(e);return Promise.resolve(n?JSON.parse(n):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const z$=1e3,q$=10;class H3 extends q3{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,n)=>this.onStorageEvent(e,n),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=M3(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const n of Object.keys(this.listeners)){const r=this.storage.getItem(n),i=this.localCache[n];r!==i&&e(n,i,r)}}onStorageEvent(e,n=!1){if(!e.key){this.forAllChangedKeys((s,l,c)=>{this.notifyListeners(s,c)});return}const r=e.key;n?this.detachListener():this.stopPolling();const i=()=>{const s=this.storage.getItem(r);!n&&this.localCache[r]===s||this.notifyListeners(r,s)},a=this.storage.getItem(r);r$()&&a!==e.newValue&&e.newValue!==e.oldValue?setTimeout(i,q$):i()}notifyListeners(e,n){this.localCache[e]=n;const r=this.listeners[e];if(r)for(const i of Array.from(r))i(n&&JSON.parse(n))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,n,r)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:n,newValue:r}),!0)})},z$)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,n){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(e,n){await super._set(e,n),this.localCache[e]=JSON.stringify(n)}async _get(e){const n=await super._get(e);return this.localCache[e]=JSON.stringify(n),n}async _remove(e){await super._remove(e),delete this.localCache[e]}}H3.type="LOCAL";const G3=H3;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $3 extends q3{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,n){}_removeListener(e,n){}}$3.type="SESSION";const wA=$3;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function H$(t){return Promise.all(t.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(n){return{fulfilled:!1,reason:n}}}))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class n_{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const n=this.receivers.find(i=>i.isListeningto(e));if(n)return n;const r=new n_(e);return this.receivers.push(r),r}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const n=e,{eventId:r,eventType:i,data:a}=n.data,s=this.handlersMap[i];if(!(s!=null&&s.size))return;n.ports[0].postMessage({status:"ack",eventId:r,eventType:i});const l=Array.from(s).map(async h=>h(n.origin,a)),c=await H$(l);n.ports[0].postMessage({status:"done",eventId:r,eventType:i,response:c})}_subscribe(e,n){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(n)}_unsubscribe(e,n){this.handlersMap[e]&&n&&this.handlersMap[e].delete(n),(!n||this.handlersMap[e].size===0)&&delete this.handlersMap[e],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}n_.receivers=[];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function EA(t="",e=10){let n="";for(let r=0;r<e;r++)n+=Math.floor(Math.random()*10);return t+n}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class G${constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,n,r=50){const i=typeof MessageChannel<"u"?new MessageChannel:null;if(!i)throw new Error("connection_unavailable");let a,s;return new Promise((l,c)=>{const h=EA("",20);i.port1.start();const p=setTimeout(()=>{c(new Error("unsupported_event"))},r);s={messageChannel:i,onMessage(g){const x=g;if(x.data.eventId===h)switch(x.data.status){case"ack":clearTimeout(p),a=setTimeout(()=>{c(new Error("timeout"))},3e3);break;case"done":clearTimeout(a),l(x.data.response);break;default:clearTimeout(p),clearTimeout(a),c(new Error("invalid_response"));break}}},this.handlers.add(s),i.port1.addEventListener("message",s.onMessage),this.target.postMessage({eventType:e,eventId:h,data:n},[i.port2])}).finally(()=>{s&&this.removeMessageHandler(s)})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function No(){return window}function $$(t){No().location.href=t}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function K3(){return typeof No().WorkerGlobalScope<"u"&&typeof No().importScripts=="function"}async function K$(){if(!(navigator!=null&&navigator.serviceWorker))return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function W$(){var t;return((t=navigator==null?void 0:navigator.serviceWorker)==null?void 0:t.controller)||null}function Y$(){return K3()?self:null}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const W3="firebaseLocalStorageDb",Z$=1,x0="firebaseLocalStorage",Y3="fbase_key";class Sg{constructor(e){this.request=e}toPromise(){return new Promise((e,n)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{n(this.request.error)})})}}function r_(t,e){return t.transaction([x0],e?"readwrite":"readonly").objectStore(x0)}function J$(){const t=indexedDB.deleteDatabase(W3);return new Sg(t).toPromise()}function TS(){const t=indexedDB.open(W3,Z$);return new Promise((e,n)=>{t.addEventListener("error",()=>{n(t.error)}),t.addEventListener("upgradeneeded",()=>{const r=t.result;try{r.createObjectStore(x0,{keyPath:Y3})}catch(i){n(i)}}),t.addEventListener("success",async()=>{const r=t.result;r.objectStoreNames.contains(x0)?e(r):(r.close(),await J$(),e(await TS()))})})}async function gk(t,e,n){const r=r_(t,!0).put({[Y3]:e,value:n});return new Sg(r).toPromise()}async function Q$(t,e){const n=r_(t,!1).get(e),r=await new Sg(n).toPromise();return r===void 0?null:r.value}function yk(t,e){const n=r_(t,!0).delete(e);return new Sg(n).toPromise()}const X$=800,eK=3;class Z3{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await TS(),this.db)}async _withRetries(e){let n=0;for(;;)try{const r=await this._openDb();return await e(r)}catch(r){if(n++>eK)throw r;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return K3()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=n_._getInstance(Y$()),this.receiver._subscribe("keyChanged",async(e,n)=>({keyProcessed:(await this._poll()).includes(n.key)})),this.receiver._subscribe("ping",async(e,n)=>["keyChanged"])}async initializeSender(){var n,r;if(this.activeServiceWorker=await K$(),!this.activeServiceWorker)return;this.sender=new G$(this.activeServiceWorker);const e=await this.sender._send("ping",{},800);e&&(n=e[0])!=null&&n.fulfilled&&(r=e[0])!=null&&r.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(!(!this.sender||!this.activeServiceWorker||W$()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await TS();return await gk(e,v0,"1"),await yk(e,v0),!0}catch{}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,n){return this._withPendingWrite(async()=>(await this._withRetries(r=>gk(r,e,n)),this.localCache[e]=n,this.notifyServiceWorker(e)))}async _get(e){const n=await this._withRetries(r=>Q$(r,e));return this.localCache[e]=n,n}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(n=>yk(n,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(i=>{const a=r_(i,!1).getAll();return new Sg(a).toPromise()});if(!e)return[];if(this.pendingWrites!==0)return[];const n=[],r=new Set;if(e.length!==0)for(const{fbase_key:i,value:a}of e)r.add(i),JSON.stringify(this.localCache[i])!==JSON.stringify(a)&&(this.notifyListeners(i,a),n.push(i));for(const i of Object.keys(this.localCache))this.localCache[i]&&!r.has(i)&&(this.notifyListeners(i,null),n.push(i));return n}notifyListeners(e,n){this.localCache[e]=n;const r=this.listeners[e];if(r)for(const i of Array.from(r))i(n)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),X$)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,n){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&this.stopPolling()}}Z3.type="LOCAL";const tK=Z3;new wg(3e4,6e4);/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function nK(t,e){return e?xl(e):(ut(t._popupRedirectResolver,t,"argument-error"),t._popupRedirectResolver)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class TA extends _A{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return rh(e,this._buildIdpRequest())}_linkToIdToken(e,n){return rh(e,this._buildIdpRequest(n))}_getReauthenticationResolver(e){return rh(e,this._buildIdpRequest())}_buildIdpRequest(e){const n={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(n.idToken=e),n}}function rK(t){return B3(t.auth,new TA(t),t.bypassAuthState)}function iK(t){const{auth:e,user:n}=t;return ut(n,e,"internal-error"),D$(n,new TA(t),t.bypassAuthState)}async function aK(t){const{auth:e,user:n}=t;return ut(n,e,"internal-error"),P$(n,new TA(t),t.bypassAuthState)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class J3{constructor(e,n,r,i,a=!1){this.auth=e,this.resolver=r,this.user=i,this.bypassAuthState=a,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(n)?n:[n]}execute(){return new Promise(async(e,n)=>{this.pendingPromise={resolve:e,reject:n};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(r){this.reject(r)}})}async onAuthEvent(e){const{urlResponse:n,sessionId:r,postBody:i,tenantId:a,error:s,type:l}=e;if(s){this.reject(s);return}const c={auth:this.auth,requestUri:n,sessionId:r,tenantId:a||void 0,postBody:i||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(l)(c))}catch(h){this.reject(h)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return rK;case"linkViaPopup":case"linkViaRedirect":return aK;case"reauthViaPopup":case"reauthViaRedirect":return iK;default:Gs(this.auth,"internal-error")}}resolve(e){Nl(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){Nl(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const sK=new wg(2e3,1e4);class Yf extends J3{constructor(e,n,r,i,a){super(e,n,i,a),this.provider=r,this.authWindow=null,this.pollId=null,Yf.currentPopupAction&&Yf.currentPopupAction.cancel(),Yf.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return ut(e,this.auth,"internal-error"),e}async onExecution(){Nl(this.filter.length===1,"Popup operations only handle one event");const e=EA();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(n=>{this.reject(n)}),this.resolver._isIframeWebStorageSupported(this.auth,n=>{n||this.reject(Io(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){var e;return((e=this.authWindow)==null?void 0:e.associatedEvent)||null}cancel(){this.reject(Io(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,Yf.currentPopupAction=null}pollUserCancellation(){const e=()=>{var n,r;if((r=(n=this.authWindow)==null?void 0:n.window)!=null&&r.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(Io(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(e,sK.get())};e()}}Yf.currentPopupAction=null;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const oK="pendingRedirect",$v=new Map;class lK extends J3{constructor(e,n,r=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],n,void 0,r),this.eventId=null}async execute(){let e=$v.get(this.auth._key());if(!e){try{const r=await uK(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(r)}catch(n){e=()=>Promise.reject(n)}$v.set(this.auth._key(),e)}return this.bypassAuthState||$v.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if(e.type==="signInViaRedirect")return super.onAuthEvent(e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){const n=await this.auth._redirectUserForId(e.eventId);if(n)return this.user=n,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function uK(t,e){const n=fK(e),r=dK(t);if(!await r._isAvailable())return!1;const i=await r._get(n)==="true";return await r._remove(n),i}function cK(t,e){$v.set(t._key(),e)}function dK(t){return xl(t._redirectPersistence)}function fK(t){return Gv(oK,t.config.apiKey,t.name)}async function hK(t,e,n=!1){if(Ma(t.app))return Promise.reject(El(t));const r=Hd(t),i=nK(r,e),s=await new lK(r,i,n).execute();return s&&!n&&(delete s.user._redirectEventId,await r._persistUserIfCurrent(s.user),await r._setRedirectUser(null,e)),s}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const mK=600*1e3;class pK{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let n=!1;return this.consumers.forEach(r=>{this.isEventForConsumer(e,r)&&(n=!0,this.sendToConsumer(e,r),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!gK(e)||(this.hasHandledPotentialRedirect=!0,n||(this.queuedRedirectEvent=e,n=!0)),n}sendToConsumer(e,n){var r;if(e.error&&!Q3(e)){const i=((r=e.error.code)==null?void 0:r.split("auth/")[1])||"internal-error";n.onError(Io(this.auth,i))}else n.onAuthEvent(e)}isEventForConsumer(e,n){const r=n.eventId===null||!!e.eventId&&e.eventId===n.eventId;return n.filter.includes(e.type)&&r}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=mK&&this.cachedEventUids.clear(),this.cachedEventUids.has(vk(e))}saveEventToCache(e){this.cachedEventUids.add(vk(e)),this.lastProcessedEventTime=Date.now()}}function vk(t){return[t.type,t.eventId,t.sessionId,t.tenantId].filter(e=>e).join("-")}function Q3({type:t,error:e}){return t==="unknown"&&(e==null?void 0:e.code)==="auth/no-auth-event"}function gK(t){switch(t.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return Q3(t);default:return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function yK(t,e={}){return Fl(t,"GET","/v1/projects",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const vK=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,xK=/^https?/;async function _K(t){if(t.config.emulator)return;const{authorizedDomains:e}=await yK(t);for(const n of e)try{if(bK(n))return}catch{}Gs(t,"unauthorized-domain")}function bK(t){const e=bS(),{protocol:n,hostname:r}=new URL(e);if(t.startsWith("chrome-extension://")){const s=new URL(t);return s.hostname===""&&r===""?n==="chrome-extension:"&&t.replace("chrome-extension://","")===e.replace("chrome-extension://",""):n==="chrome-extension:"&&s.hostname===r}if(!xK.test(n))return!1;if(vK.test(t))return r===t;const i=t.replace(/\./g,"\\.");return new RegExp("^(.+\\."+i+"|"+i+")$","i").test(r)}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const wK=new wg(3e4,6e4);function xk(){const t=No().___jsl;if(t!=null&&t.H){for(const e of Object.keys(t.H))if(t.H[e].r=t.H[e].r||[],t.H[e].L=t.H[e].L||[],t.H[e].r=[...t.H[e].L],t.CP)for(let n=0;n<t.CP.length;n++)t.CP[n]=null}}function EK(t){return new Promise((e,n)=>{var i,a,s;function r(){xk(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{xk(),n(Io(t,"network-request-failed"))},timeout:wK.get()})}if((a=(i=No().gapi)==null?void 0:i.iframes)!=null&&a.Iframe)e(gapi.iframes.getContext());else if((s=No().gapi)!=null&&s.load)r();else{const l=f$("iframefcb");return No()[l]=()=>{gapi.load?r():n(Io(t,"network-request-failed"))},j3(`${d$()}?onload=${l}`).catch(c=>n(c))}}).catch(e=>{throw Kv=null,e})}let Kv=null;function TK(t){return Kv=Kv||EK(t),Kv}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const SK=new wg(5e3,15e3),AK="__/auth/iframe",CK="emulator/auth/iframe",IK={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},NK=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function PK(t){const e=t.config;ut(e.authDomain,t,"auth-domain-config-required");const n=e.emulator?yA(e,CK):`https://${t.config.authDomain}/${AK}`,r={apiKey:e.apiKey,appName:t.name,v:Wh},i=NK.get(t.config.apiHost);i&&(r.eid=i);const a=t._getFrameworks();return a.length&&(r.fw=a.join(",")),`${n}?${bg(r).slice(1)}`}async function DK(t){const e=await TK(t),n=No().gapi;return ut(n,t,"internal-error"),e.open({where:document.body,url:PK(t),messageHandlersFilter:n.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:IK,dontclear:!0},r=>new Promise(async(i,a)=>{await r.restyle({setHideOnLeave:!1});const s=Io(t,"network-request-failed"),l=No().setTimeout(()=>{a(s)},SK.get());function c(){No().clearTimeout(l),i(r)}r.ping(c).then(c,()=>{a(s)})}))}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const RK={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},kK=500,MK=600,OK="_blank",jK="http://localhost";class _k{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function LK(t,e,n,r=kK,i=MK){const a=Math.max((window.screen.availHeight-i)/2,0).toString(),s=Math.max((window.screen.availWidth-r)/2,0).toString();let l="";const c={...RK,width:r.toString(),height:i.toString(),top:a,left:s},h=Nr().toLowerCase();n&&(l=N3(h)?OK:n),C3(h)&&(e=e||jK,c.scrollbars="yes");const p=Object.entries(c).reduce((x,[b,C])=>`${x}${b}=${C},`,"");if(n$(h)&&l!=="_self")return VK(e||"",l),new _k(null);const g=window.open(e||"",l,p);ut(g,t,"popup-blocked");try{g.focus()}catch{}return new _k(g)}function VK(t,e){const n=document.createElement("a");n.href=t,n.target=e;const r=document.createEvent("MouseEvent");r.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),n.dispatchEvent(r)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const UK="__/auth/handler",FK="emulator/auth/handler",BK=encodeURIComponent("fac");async function bk(t,e,n,r,i,a){ut(t.config.authDomain,t,"auth-domain-config-required"),ut(t.config.apiKey,t,"invalid-api-key");const s={apiKey:t.config.apiKey,appName:t.name,authType:n,redirectUrl:r,v:Wh,eventId:i};if(e instanceof U3){e.setDefaultLanguage(t.languageCode),s.providerId=e.providerId||"",SH(e.getCustomParameters())||(s.customParameters=JSON.stringify(e.getCustomParameters()));for(const[p,g]of Object.entries({}))s[p]=g}if(e instanceof Tg){const p=e.getScopes().filter(g=>g!=="");p.length>0&&(s.scopes=p.join(","))}t.tenantId&&(s.tid=t.tenantId);const l=s;for(const p of Object.keys(l))l[p]===void 0&&delete l[p];const c=await t._getAppCheckToken(),h=c?`#${BK}=${encodeURIComponent(c)}`:"";return`${zK(t)}?${bg(l).slice(1)}${h}`}function zK({config:t}){return t.emulator?yA(t,FK):`https://${t.authDomain}/${UK}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const wE="webStorageSupport";class qK{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=wA,this._completeRedirectFn=hK,this._overrideRedirectResult=cK}async _openPopup(e,n,r,i){var s;Nl((s=this.eventManagers[e._key()])==null?void 0:s.manager,"_initialize() not called before _openPopup()");const a=await bk(e,n,r,bS(),i);return LK(e,a,EA())}async _openRedirect(e,n,r,i){await this._originValidation(e);const a=await bk(e,n,r,bS(),i);return $$(a),new Promise(()=>{})}_initialize(e){const n=e._key();if(this.eventManagers[n]){const{manager:i,promise:a}=this.eventManagers[n];return i?Promise.resolve(i):(Nl(a,"If manager is not set, promise should be"),a)}const r=this.initAndGetManager(e);return this.eventManagers[n]={promise:r},r.catch(()=>{delete this.eventManagers[n]}),r}async initAndGetManager(e){const n=await DK(e),r=new pK(e);return n.register("authEvent",i=>(ut(i==null?void 0:i.authEvent,e,"invalid-auth-event"),{status:r.onEvent(i.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:r},this.iframes[e._key()]=n,r}_isIframeWebStorageSupported(e,n){this.iframes[e._key()].send(wE,{type:wE},i=>{var s;const a=(s=i==null?void 0:i[0])==null?void 0:s[wE];a!==void 0&&n(!!a),Gs(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const n=e._key();return this.originValidationPromises[n]||(this.originValidationPromises[n]=_K(e)),this.originValidationPromises[n]}get _shouldInitProactively(){return M3()||I3()||xA()}}const HK=qK;var wk="@firebase/auth",Ek="1.11.1";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class GK{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),((e=this.auth.currentUser)==null?void 0:e.uid)||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const n=this.auth.onIdTokenChanged(r=>{e((r==null?void 0:r.stsTokenManager.accessToken)||null)});this.internalListeners.set(e,n),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const n=this.internalListeners.get(e);n&&(this.internalListeners.delete(e),n(),this.updateProactiveRefresh())}assertAuthConfigured(){ut(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function $K(t){switch(t){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function KK(t){Cd(new tc("auth",(e,{options:n})=>{const r=e.getProvider("app").getImmediate(),i=e.getProvider("heartbeat"),a=e.getProvider("app-check-internal"),{apiKey:s,authDomain:l}=r.options;ut(s&&!s.includes(":"),"invalid-api-key",{appName:r.name});const c={apiKey:s,authDomain:l,clientPlatform:t,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:O3(t)},h=new l$(r,i,a,c);return v$(h,n),h},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,n,r)=>{e.getProvider("auth-internal").initialize()})),Cd(new tc("auth-internal",e=>{const n=Hd(e.getProvider("auth").getImmediate());return(r=>new GK(r))(n)},"PRIVATE").setInstantiationMode("EXPLICIT")),Co(wk,Ek,$K(t)),Co(wk,Ek,"esm2020")}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const WK=300,YK=s3("authIdTokenMaxAge")||WK;let Tk=null;const ZK=t=>async e=>{const n=e&&await e.getIdTokenResult(),r=n&&(new Date().getTime()-Date.parse(n.issuedAtTime))/1e3;if(r&&r>YK)return;const i=n==null?void 0:n.token;Tk!==i&&(Tk=i,await fetch(t,{method:i?"POST":"DELETE",headers:i?{Authorization:`Bearer ${i}`}:{}}))};function JK(t=p3()){const e=e_(t,"auth");if(e.isInitialized())return e.getImmediate();const n=y$(t,{popupRedirectResolver:HK,persistence:[tK,G3,wA]}),r=s3("authTokenSyncURL");if(r&&typeof isSecureContext=="boolean"&&isSecureContext){const a=new URL(r,location.origin);if(location.origin===a.origin){const s=ZK(a.toString());U$(n,s,()=>s(n.currentUser)),V$(n,l=>s(l))}}const i=i3("auth");return i&&x$(n,`http://${i}`),n}function QK(){var t;return((t=document.getElementsByTagName("head"))==null?void 0:t[0])??document}u$({loadJS(t){return new Promise((e,n)=>{const r=document.createElement("script");r.setAttribute("src",t),r.onload=e,r.onerror=i=>{const a=Io("internal-error");a.customData=i,n(a)},r.type="text/javascript",r.charset="UTF-8",QK().appendChild(r)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});KK("Browser");var Sk=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var Zu,X3;(function(){var t;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function e(U,z){function B(){}B.prototype=z.prototype,U.F=z.prototype,U.prototype=new B,U.prototype.constructor=U,U.D=function(Z,K,J){for(var G=Array(arguments.length-2),Se=2;Se<arguments.length;Se++)G[Se-2]=arguments[Se];return z.prototype[K].apply(Z,G)}}function n(){this.blockSize=-1}function r(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.C=Array(this.blockSize),this.o=this.h=0,this.u()}e(r,n),r.prototype.u=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function i(U,z,B){B||(B=0);const Z=Array(16);if(typeof z=="string")for(var K=0;K<16;++K)Z[K]=z.charCodeAt(B++)|z.charCodeAt(B++)<<8|z.charCodeAt(B++)<<16|z.charCodeAt(B++)<<24;else for(K=0;K<16;++K)Z[K]=z[B++]|z[B++]<<8|z[B++]<<16|z[B++]<<24;z=U.g[0],B=U.g[1],K=U.g[2];let J=U.g[3],G;G=z+(J^B&(K^J))+Z[0]+3614090360&4294967295,z=B+(G<<7&4294967295|G>>>25),G=J+(K^z&(B^K))+Z[1]+3905402710&4294967295,J=z+(G<<12&4294967295|G>>>20),G=K+(B^J&(z^B))+Z[2]+606105819&4294967295,K=J+(G<<17&4294967295|G>>>15),G=B+(z^K&(J^z))+Z[3]+3250441966&4294967295,B=K+(G<<22&4294967295|G>>>10),G=z+(J^B&(K^J))+Z[4]+4118548399&4294967295,z=B+(G<<7&4294967295|G>>>25),G=J+(K^z&(B^K))+Z[5]+1200080426&4294967295,J=z+(G<<12&4294967295|G>>>20),G=K+(B^J&(z^B))+Z[6]+2821735955&4294967295,K=J+(G<<17&4294967295|G>>>15),G=B+(z^K&(J^z))+Z[7]+4249261313&4294967295,B=K+(G<<22&4294967295|G>>>10),G=z+(J^B&(K^J))+Z[8]+1770035416&4294967295,z=B+(G<<7&4294967295|G>>>25),G=J+(K^z&(B^K))+Z[9]+2336552879&4294967295,J=z+(G<<12&4294967295|G>>>20),G=K+(B^J&(z^B))+Z[10]+4294925233&4294967295,K=J+(G<<17&4294967295|G>>>15),G=B+(z^K&(J^z))+Z[11]+2304563134&4294967295,B=K+(G<<22&4294967295|G>>>10),G=z+(J^B&(K^J))+Z[12]+1804603682&4294967295,z=B+(G<<7&4294967295|G>>>25),G=J+(K^z&(B^K))+Z[13]+4254626195&4294967295,J=z+(G<<12&4294967295|G>>>20),G=K+(B^J&(z^B))+Z[14]+2792965006&4294967295,K=J+(G<<17&4294967295|G>>>15),G=B+(z^K&(J^z))+Z[15]+1236535329&4294967295,B=K+(G<<22&4294967295|G>>>10),G=z+(K^J&(B^K))+Z[1]+4129170786&4294967295,z=B+(G<<5&4294967295|G>>>27),G=J+(B^K&(z^B))+Z[6]+3225465664&4294967295,J=z+(G<<9&4294967295|G>>>23),G=K+(z^B&(J^z))+Z[11]+643717713&4294967295,K=J+(G<<14&4294967295|G>>>18),G=B+(J^z&(K^J))+Z[0]+3921069994&4294967295,B=K+(G<<20&4294967295|G>>>12),G=z+(K^J&(B^K))+Z[5]+3593408605&4294967295,z=B+(G<<5&4294967295|G>>>27),G=J+(B^K&(z^B))+Z[10]+38016083&4294967295,J=z+(G<<9&4294967295|G>>>23),G=K+(z^B&(J^z))+Z[15]+3634488961&4294967295,K=J+(G<<14&4294967295|G>>>18),G=B+(J^z&(K^J))+Z[4]+3889429448&4294967295,B=K+(G<<20&4294967295|G>>>12),G=z+(K^J&(B^K))+Z[9]+568446438&4294967295,z=B+(G<<5&4294967295|G>>>27),G=J+(B^K&(z^B))+Z[14]+3275163606&4294967295,J=z+(G<<9&4294967295|G>>>23),G=K+(z^B&(J^z))+Z[3]+4107603335&4294967295,K=J+(G<<14&4294967295|G>>>18),G=B+(J^z&(K^J))+Z[8]+1163531501&4294967295,B=K+(G<<20&4294967295|G>>>12),G=z+(K^J&(B^K))+Z[13]+2850285829&4294967295,z=B+(G<<5&4294967295|G>>>27),G=J+(B^K&(z^B))+Z[2]+4243563512&4294967295,J=z+(G<<9&4294967295|G>>>23),G=K+(z^B&(J^z))+Z[7]+1735328473&4294967295,K=J+(G<<14&4294967295|G>>>18),G=B+(J^z&(K^J))+Z[12]+2368359562&4294967295,B=K+(G<<20&4294967295|G>>>12),G=z+(B^K^J)+Z[5]+4294588738&4294967295,z=B+(G<<4&4294967295|G>>>28),G=J+(z^B^K)+Z[8]+2272392833&4294967295,J=z+(G<<11&4294967295|G>>>21),G=K+(J^z^B)+Z[11]+1839030562&4294967295,K=J+(G<<16&4294967295|G>>>16),G=B+(K^J^z)+Z[14]+4259657740&4294967295,B=K+(G<<23&4294967295|G>>>9),G=z+(B^K^J)+Z[1]+2763975236&4294967295,z=B+(G<<4&4294967295|G>>>28),G=J+(z^B^K)+Z[4]+1272893353&4294967295,J=z+(G<<11&4294967295|G>>>21),G=K+(J^z^B)+Z[7]+4139469664&4294967295,K=J+(G<<16&4294967295|G>>>16),G=B+(K^J^z)+Z[10]+3200236656&4294967295,B=K+(G<<23&4294967295|G>>>9),G=z+(B^K^J)+Z[13]+681279174&4294967295,z=B+(G<<4&4294967295|G>>>28),G=J+(z^B^K)+Z[0]+3936430074&4294967295,J=z+(G<<11&4294967295|G>>>21),G=K+(J^z^B)+Z[3]+3572445317&4294967295,K=J+(G<<16&4294967295|G>>>16),G=B+(K^J^z)+Z[6]+76029189&4294967295,B=K+(G<<23&4294967295|G>>>9),G=z+(B^K^J)+Z[9]+3654602809&4294967295,z=B+(G<<4&4294967295|G>>>28),G=J+(z^B^K)+Z[12]+3873151461&4294967295,J=z+(G<<11&4294967295|G>>>21),G=K+(J^z^B)+Z[15]+530742520&4294967295,K=J+(G<<16&4294967295|G>>>16),G=B+(K^J^z)+Z[2]+3299628645&4294967295,B=K+(G<<23&4294967295|G>>>9),G=z+(K^(B|~J))+Z[0]+4096336452&4294967295,z=B+(G<<6&4294967295|G>>>26),G=J+(B^(z|~K))+Z[7]+1126891415&4294967295,J=z+(G<<10&4294967295|G>>>22),G=K+(z^(J|~B))+Z[14]+2878612391&4294967295,K=J+(G<<15&4294967295|G>>>17),G=B+(J^(K|~z))+Z[5]+4237533241&4294967295,B=K+(G<<21&4294967295|G>>>11),G=z+(K^(B|~J))+Z[12]+1700485571&4294967295,z=B+(G<<6&4294967295|G>>>26),G=J+(B^(z|~K))+Z[3]+2399980690&4294967295,J=z+(G<<10&4294967295|G>>>22),G=K+(z^(J|~B))+Z[10]+4293915773&4294967295,K=J+(G<<15&4294967295|G>>>17),G=B+(J^(K|~z))+Z[1]+2240044497&4294967295,B=K+(G<<21&4294967295|G>>>11),G=z+(K^(B|~J))+Z[8]+1873313359&4294967295,z=B+(G<<6&4294967295|G>>>26),G=J+(B^(z|~K))+Z[15]+4264355552&4294967295,J=z+(G<<10&4294967295|G>>>22),G=K+(z^(J|~B))+Z[6]+2734768916&4294967295,K=J+(G<<15&4294967295|G>>>17),G=B+(J^(K|~z))+Z[13]+1309151649&4294967295,B=K+(G<<21&4294967295|G>>>11),G=z+(K^(B|~J))+Z[4]+4149444226&4294967295,z=B+(G<<6&4294967295|G>>>26),G=J+(B^(z|~K))+Z[11]+3174756917&4294967295,J=z+(G<<10&4294967295|G>>>22),G=K+(z^(J|~B))+Z[2]+718787259&4294967295,K=J+(G<<15&4294967295|G>>>17),G=B+(J^(K|~z))+Z[9]+3951481745&4294967295,U.g[0]=U.g[0]+z&4294967295,U.g[1]=U.g[1]+(K+(G<<21&4294967295|G>>>11))&4294967295,U.g[2]=U.g[2]+K&4294967295,U.g[3]=U.g[3]+J&4294967295}r.prototype.v=function(U,z){z===void 0&&(z=U.length);const B=z-this.blockSize,Z=this.C;let K=this.h,J=0;for(;J<z;){if(K==0)for(;J<=B;)i(this,U,J),J+=this.blockSize;if(typeof U=="string"){for(;J<z;)if(Z[K++]=U.charCodeAt(J++),K==this.blockSize){i(this,Z),K=0;break}}else for(;J<z;)if(Z[K++]=U[J++],K==this.blockSize){i(this,Z),K=0;break}}this.h=K,this.o+=z},r.prototype.A=function(){var U=Array((this.h<56?this.blockSize:this.blockSize*2)-this.h);U[0]=128;for(var z=1;z<U.length-8;++z)U[z]=0;z=this.o*8;for(var B=U.length-8;B<U.length;++B)U[B]=z&255,z/=256;for(this.v(U),U=Array(16),z=0,B=0;B<4;++B)for(let Z=0;Z<32;Z+=8)U[z++]=this.g[B]>>>Z&255;return U};function a(U,z){var B=l;return Object.prototype.hasOwnProperty.call(B,U)?B[U]:B[U]=z(U)}function s(U,z){this.h=z;const B=[];let Z=!0;for(let K=U.length-1;K>=0;K--){const J=U[K]|0;Z&&J==z||(B[K]=J,Z=!1)}this.g=B}var l={};function c(U){return-128<=U&&U<128?a(U,function(z){return new s([z|0],z<0?-1:0)}):new s([U|0],U<0?-1:0)}function h(U){if(isNaN(U)||!isFinite(U))return g;if(U<0)return D(h(-U));const z=[];let B=1;for(let Z=0;U>=B;Z++)z[Z]=U/B|0,B*=4294967296;return new s(z,0)}function p(U,z){if(U.length==0)throw Error("number format error: empty string");if(z=z||10,z<2||36<z)throw Error("radix out of range: "+z);if(U.charAt(0)=="-")return D(p(U.substring(1),z));if(U.indexOf("-")>=0)throw Error('number format error: interior "-" character');const B=h(Math.pow(z,8));let Z=g;for(let J=0;J<U.length;J+=8){var K=Math.min(8,U.length-J);const G=parseInt(U.substring(J,J+K),z);K<8?(K=h(Math.pow(z,K)),Z=Z.j(K).add(h(G))):(Z=Z.j(B),Z=Z.add(h(G)))}return Z}var g=c(0),x=c(1),b=c(16777216);t=s.prototype,t.m=function(){if(A(this))return-D(this).m();let U=0,z=1;for(let B=0;B<this.g.length;B++){const Z=this.i(B);U+=(Z>=0?Z:4294967296+Z)*z,z*=4294967296}return U},t.toString=function(U){if(U=U||10,U<2||36<U)throw Error("radix out of range: "+U);if(C(this))return"0";if(A(this))return"-"+D(this).toString(U);const z=h(Math.pow(U,6));var B=this;let Z="";for(;;){const K=q(B,z).g;B=R(B,K.j(z));let J=((B.g.length>0?B.g[0]:B.h)>>>0).toString(U);if(B=K,C(B))return J+Z;for(;J.length<6;)J="0"+J;Z=J+Z}},t.i=function(U){return U<0?0:U<this.g.length?this.g[U]:this.h};function C(U){if(U.h!=0)return!1;for(let z=0;z<U.g.length;z++)if(U.g[z]!=0)return!1;return!0}function A(U){return U.h==-1}t.l=function(U){return U=R(this,U),A(U)?-1:C(U)?0:1};function D(U){const z=U.g.length,B=[];for(let Z=0;Z<z;Z++)B[Z]=~U.g[Z];return new s(B,~U.h).add(x)}t.abs=function(){return A(this)?D(this):this},t.add=function(U){const z=Math.max(this.g.length,U.g.length),B=[];let Z=0;for(let K=0;K<=z;K++){let J=Z+(this.i(K)&65535)+(U.i(K)&65535),G=(J>>>16)+(this.i(K)>>>16)+(U.i(K)>>>16);Z=G>>>16,J&=65535,G&=65535,B[K]=G<<16|J}return new s(B,B[B.length-1]&-2147483648?-1:0)};function R(U,z){return U.add(D(z))}t.j=function(U){if(C(this)||C(U))return g;if(A(this))return A(U)?D(this).j(D(U)):D(D(this).j(U));if(A(U))return D(this.j(D(U)));if(this.l(b)<0&&U.l(b)<0)return h(this.m()*U.m());const z=this.g.length+U.g.length,B=[];for(var Z=0;Z<2*z;Z++)B[Z]=0;for(Z=0;Z<this.g.length;Z++)for(let K=0;K<U.g.length;K++){const J=this.i(Z)>>>16,G=this.i(Z)&65535,Se=U.i(K)>>>16,Oe=U.i(K)&65535;B[2*Z+2*K]+=G*Oe,j(B,2*Z+2*K),B[2*Z+2*K+1]+=J*Oe,j(B,2*Z+2*K+1),B[2*Z+2*K+1]+=G*Se,j(B,2*Z+2*K+1),B[2*Z+2*K+2]+=J*Se,j(B,2*Z+2*K+2)}for(U=0;U<z;U++)B[U]=B[2*U+1]<<16|B[2*U];for(U=z;U<2*z;U++)B[U]=0;return new s(B,0)};function j(U,z){for(;(U[z]&65535)!=U[z];)U[z+1]+=U[z]>>>16,U[z]&=65535,z++}function O(U,z){this.g=U,this.h=z}function q(U,z){if(C(z))throw Error("division by zero");if(C(U))return new O(g,g);if(A(U))return z=q(D(U),z),new O(D(z.g),D(z.h));if(A(z))return z=q(U,D(z)),new O(D(z.g),z.h);if(U.g.length>30){if(A(U)||A(z))throw Error("slowDivide_ only works with positive integers.");for(var B=x,Z=z;Z.l(U)<=0;)B=$(B),Z=$(Z);var K=H(B,1),J=H(Z,1);for(Z=H(Z,2),B=H(B,2);!C(Z);){var G=J.add(Z);G.l(U)<=0&&(K=K.add(B),J=G),Z=H(Z,1),B=H(B,1)}return z=R(U,K.j(z)),new O(K,z)}for(K=g;U.l(z)>=0;){for(B=Math.max(1,Math.floor(U.m()/z.m())),Z=Math.ceil(Math.log(B)/Math.LN2),Z=Z<=48?1:Math.pow(2,Z-48),J=h(B),G=J.j(z);A(G)||G.l(U)>0;)B-=Z,J=h(B),G=J.j(z);C(J)&&(J=x),K=K.add(J),U=R(U,G)}return new O(K,U)}t.B=function(U){return q(this,U).h},t.and=function(U){const z=Math.max(this.g.length,U.g.length),B=[];for(let Z=0;Z<z;Z++)B[Z]=this.i(Z)&U.i(Z);return new s(B,this.h&U.h)},t.or=function(U){const z=Math.max(this.g.length,U.g.length),B=[];for(let Z=0;Z<z;Z++)B[Z]=this.i(Z)|U.i(Z);return new s(B,this.h|U.h)},t.xor=function(U){const z=Math.max(this.g.length,U.g.length),B=[];for(let Z=0;Z<z;Z++)B[Z]=this.i(Z)^U.i(Z);return new s(B,this.h^U.h)};function $(U){const z=U.g.length+1,B=[];for(let Z=0;Z<z;Z++)B[Z]=U.i(Z)<<1|U.i(Z-1)>>>31;return new s(B,U.h)}function H(U,z){const B=z>>5;z%=32;const Z=U.g.length-B,K=[];for(let J=0;J<Z;J++)K[J]=z>0?U.i(J+B)>>>z|U.i(J+B+1)<<32-z:U.i(J+B);return new s(K,U.h)}r.prototype.digest=r.prototype.A,r.prototype.reset=r.prototype.u,r.prototype.update=r.prototype.v,X3=r,s.prototype.add=s.prototype.add,s.prototype.multiply=s.prototype.j,s.prototype.modulo=s.prototype.B,s.prototype.compare=s.prototype.l,s.prototype.toNumber=s.prototype.m,s.prototype.toString=s.prototype.toString,s.prototype.getBits=s.prototype.i,s.fromNumber=h,s.fromString=p,Zu=s}).apply(typeof Sk<"u"?Sk:typeof self<"u"?self:typeof window<"u"?window:{});var vv=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var eV,vp,tV,Wv,SS,nV,rV,iV;(function(){var t,e=Object.defineProperty;function n(E){E=[typeof globalThis=="object"&&globalThis,E,typeof window=="object"&&window,typeof self=="object"&&self,typeof vv=="object"&&vv];for(var k=0;k<E.length;++k){var F=E[k];if(F&&F.Math==Math)return F}throw Error("Cannot find global object")}var r=n(this);function i(E,k){if(k)e:{var F=r;E=E.split(".");for(var Q=0;Q<E.length-1;Q++){var ce=E[Q];if(!(ce in F))break e;F=F[ce]}E=E[E.length-1],Q=F[E],k=k(Q),k!=Q&&k!=null&&e(F,E,{configurable:!0,writable:!0,value:k})}}i("Symbol.dispose",function(E){return E||Symbol("Symbol.dispose")}),i("Array.prototype.values",function(E){return E||function(){return this[Symbol.iterator]()}}),i("Object.entries",function(E){return E||function(k){var F=[],Q;for(Q in k)Object.prototype.hasOwnProperty.call(k,Q)&&F.push([Q,k[Q]]);return F}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var a=a||{},s=this||self;function l(E){var k=typeof E;return k=="object"&&E!=null||k=="function"}function c(E,k,F){return E.call.apply(E.bind,arguments)}function h(E,k,F){return h=c,h.apply(null,arguments)}function p(E,k){var F=Array.prototype.slice.call(arguments,1);return function(){var Q=F.slice();return Q.push.apply(Q,arguments),E.apply(this,Q)}}function g(E,k){function F(){}F.prototype=k.prototype,E.Z=k.prototype,E.prototype=new F,E.prototype.constructor=E,E.Ob=function(Q,ce,ve){for(var Ue=Array(arguments.length-2),ct=2;ct<arguments.length;ct++)Ue[ct-2]=arguments[ct];return k.prototype[ce].apply(Q,Ue)}}var x=typeof AsyncContext<"u"&&typeof AsyncContext.Snapshot=="function"?E=>E&&AsyncContext.Snapshot.wrap(E):E=>E;function b(E){const k=E.length;if(k>0){const F=Array(k);for(let Q=0;Q<k;Q++)F[Q]=E[Q];return F}return[]}function C(E,k){for(let Q=1;Q<arguments.length;Q++){const ce=arguments[Q];var F=typeof ce;if(F=F!="object"?F:ce?Array.isArray(ce)?"array":F:"null",F=="array"||F=="object"&&typeof ce.length=="number"){F=E.length||0;const ve=ce.length||0;E.length=F+ve;for(let Ue=0;Ue<ve;Ue++)E[F+Ue]=ce[Ue]}else E.push(ce)}}class A{constructor(k,F){this.i=k,this.j=F,this.h=0,this.g=null}get(){let k;return this.h>0?(this.h--,k=this.g,this.g=k.next,k.next=null):k=this.i(),k}}function D(E){s.setTimeout(()=>{throw E},0)}function R(){var E=U;let k=null;return E.g&&(k=E.g,E.g=E.g.next,E.g||(E.h=null),k.next=null),k}class j{constructor(){this.h=this.g=null}add(k,F){const Q=O.get();Q.set(k,F),this.h?this.h.next=Q:this.g=Q,this.h=Q}}var O=new A(()=>new q,E=>E.reset());class q{constructor(){this.next=this.g=this.h=null}set(k,F){this.h=k,this.g=F,this.next=null}reset(){this.next=this.g=this.h=null}}let $,H=!1,U=new j,z=()=>{const E=Promise.resolve(void 0);$=()=>{E.then(B)}};function B(){for(var E;E=R();){try{E.h.call(E.g)}catch(F){D(F)}var k=O;k.j(E),k.h<100&&(k.h++,E.next=k.g,k.g=E)}H=!1}function Z(){this.u=this.u,this.C=this.C}Z.prototype.u=!1,Z.prototype.dispose=function(){this.u||(this.u=!0,this.N())},Z.prototype[Symbol.dispose]=function(){this.dispose()},Z.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function K(E,k){this.type=E,this.g=this.target=k,this.defaultPrevented=!1}K.prototype.h=function(){this.defaultPrevented=!0};var J=(function(){if(!s.addEventListener||!Object.defineProperty)return!1;var E=!1,k=Object.defineProperty({},"passive",{get:function(){E=!0}});try{const F=()=>{};s.addEventListener("test",F,k),s.removeEventListener("test",F,k)}catch{}return E})();function G(E){return/^[\s\xa0]*$/.test(E)}function Se(E,k){K.call(this,E?E.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,E&&this.init(E,k)}g(Se,K),Se.prototype.init=function(E,k){const F=this.type=E.type,Q=E.changedTouches&&E.changedTouches.length?E.changedTouches[0]:null;this.target=E.target||E.srcElement,this.g=k,k=E.relatedTarget,k||(F=="mouseover"?k=E.fromElement:F=="mouseout"&&(k=E.toElement)),this.relatedTarget=k,Q?(this.clientX=Q.clientX!==void 0?Q.clientX:Q.pageX,this.clientY=Q.clientY!==void 0?Q.clientY:Q.pageY,this.screenX=Q.screenX||0,this.screenY=Q.screenY||0):(this.clientX=E.clientX!==void 0?E.clientX:E.pageX,this.clientY=E.clientY!==void 0?E.clientY:E.pageY,this.screenX=E.screenX||0,this.screenY=E.screenY||0),this.button=E.button,this.key=E.key||"",this.ctrlKey=E.ctrlKey,this.altKey=E.altKey,this.shiftKey=E.shiftKey,this.metaKey=E.metaKey,this.pointerId=E.pointerId||0,this.pointerType=E.pointerType,this.state=E.state,this.i=E,E.defaultPrevented&&Se.Z.h.call(this)},Se.prototype.h=function(){Se.Z.h.call(this);const E=this.i;E.preventDefault?E.preventDefault():E.returnValue=!1};var Oe="closure_listenable_"+(Math.random()*1e6|0),ee=0;function re(E,k,F,Q,ce){this.listener=E,this.proxy=null,this.src=k,this.type=F,this.capture=!!Q,this.ha=ce,this.key=++ee,this.da=this.fa=!1}function le(E){E.da=!0,E.listener=null,E.proxy=null,E.src=null,E.ha=null}function Ne(E,k,F){for(const Q in E)k.call(F,E[Q],Q,E)}function Pe(E,k){for(const F in E)k.call(void 0,E[F],F,E)}function X(E){const k={};for(const F in E)k[F]=E[F];return k}const ue="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function be(E,k){let F,Q;for(let ce=1;ce<arguments.length;ce++){Q=arguments[ce];for(F in Q)E[F]=Q[F];for(let ve=0;ve<ue.length;ve++)F=ue[ve],Object.prototype.hasOwnProperty.call(Q,F)&&(E[F]=Q[F])}}function Ce(E){this.src=E,this.g={},this.h=0}Ce.prototype.add=function(E,k,F,Q,ce){const ve=E.toString();E=this.g[ve],E||(E=this.g[ve]=[],this.h++);const Ue=Ve(E,k,Q,ce);return Ue>-1?(k=E[Ue],F||(k.fa=!1)):(k=new re(k,this.src,ve,!!Q,ce),k.fa=F,E.push(k)),k};function je(E,k){const F=k.type;if(F in E.g){var Q=E.g[F],ce=Array.prototype.indexOf.call(Q,k,void 0),ve;(ve=ce>=0)&&Array.prototype.splice.call(Q,ce,1),ve&&(le(k),E.g[F].length==0&&(delete E.g[F],E.h--))}}function Ve(E,k,F,Q){for(let ce=0;ce<E.length;++ce){const ve=E[ce];if(!ve.da&&ve.listener==k&&ve.capture==!!F&&ve.ha==Q)return ce}return-1}var Ze="closure_lm_"+(Math.random()*1e6|0),It={};function Te(E,k,F,Q,ce){if(Array.isArray(k)){for(let ve=0;ve<k.length;ve++)Te(E,k[ve],F,Q,ce);return null}return F=jr(F),E&&E[Oe]?E.J(k,F,l(Q)?!!Q.capture:!1,ce):st(E,k,F,!1,Q,ce)}function st(E,k,F,Q,ce,ve){if(!k)throw Error("Invalid event type");const Ue=l(ce)?!!ce.capture:!!ce;let ct=sn(E);if(ct||(E[Ze]=ct=new Ce(E)),F=ct.add(k,F,Q,Ue,ve),F.proxy)return F;if(Q=lt(),F.proxy=Q,Q.src=E,Q.listener=F,E.addEventListener)J||(ce=Ue),ce===void 0&&(ce=!1),E.addEventListener(k.toString(),Q,ce);else if(E.attachEvent)E.attachEvent(dt(k.toString()),Q);else if(E.addListener&&E.removeListener)E.addListener(Q);else throw Error("addEventListener and attachEvent are unavailable.");return F}function lt(){function E(F){return k.call(E.src,E.listener,F)}const k=yn;return E}function he(E,k,F,Q,ce){if(Array.isArray(k))for(var ve=0;ve<k.length;ve++)he(E,k[ve],F,Q,ce);else Q=l(Q)?!!Q.capture:!!Q,F=jr(F),E&&E[Oe]?(E=E.i,ve=String(k).toString(),ve in E.g&&(k=E.g[ve],F=Ve(k,F,Q,ce),F>-1&&(le(k[F]),Array.prototype.splice.call(k,F,1),k.length==0&&(delete E.g[ve],E.h--)))):E&&(E=sn(E))&&(k=E.g[k.toString()],E=-1,k&&(E=Ve(k,F,Q,ce)),(F=E>-1?k[E]:null)&&gt(F))}function gt(E){if(typeof E!="number"&&E&&!E.da){var k=E.src;if(k&&k[Oe])je(k.i,E);else{var F=E.type,Q=E.proxy;k.removeEventListener?k.removeEventListener(F,Q,E.capture):k.detachEvent?k.detachEvent(dt(F),Q):k.addListener&&k.removeListener&&k.removeListener(Q),(F=sn(k))?(je(F,E),F.h==0&&(F.src=null,k[Ze]=null)):le(E)}}}function dt(E){return E in It?It[E]:It[E]="on"+E}function yn(E,k){if(E.da)E=!0;else{k=new Se(k,this);const F=E.listener,Q=E.ha||E.src;E.fa&&gt(E),E=F.call(Q,k)}return E}function sn(E){return E=E[Ze],E instanceof Ce?E:null}var tr="__closure_events_fn_"+(Math.random()*1e9>>>0);function jr(E){return typeof E=="function"?E:(E[tr]||(E[tr]=function(k){return E.handleEvent(k)}),E[tr])}function In(){Z.call(this),this.i=new Ce(this),this.M=this,this.G=null}g(In,Z),In.prototype[Oe]=!0,In.prototype.removeEventListener=function(E,k,F,Q){he(this,E,k,F,Q)};function Nn(E,k){var F,Q=E.G;if(Q)for(F=[];Q;Q=Q.G)F.push(Q);if(E=E.M,Q=k.type||k,typeof k=="string")k=new K(k,E);else if(k instanceof K)k.target=k.target||E;else{var ce=k;k=new K(Q,E),be(k,ce)}ce=!0;let ve,Ue;if(F)for(Ue=F.length-1;Ue>=0;Ue--)ve=k.g=F[Ue],ce=qi(ve,Q,!0,k)&&ce;if(ve=k.g=E,ce=qi(ve,Q,!0,k)&&ce,ce=qi(ve,Q,!1,k)&&ce,F)for(Ue=0;Ue<F.length;Ue++)ve=k.g=F[Ue],ce=qi(ve,Q,!1,k)&&ce}In.prototype.N=function(){if(In.Z.N.call(this),this.i){var E=this.i;for(const k in E.g){const F=E.g[k];for(let Q=0;Q<F.length;Q++)le(F[Q]);delete E.g[k],E.h--}}this.G=null},In.prototype.J=function(E,k,F,Q){return this.i.add(String(E),k,!1,F,Q)},In.prototype.K=function(E,k,F,Q){return this.i.add(String(E),k,!0,F,Q)};function qi(E,k,F,Q){if(k=E.i.g[String(k)],!k)return!0;k=k.concat();let ce=!0;for(let ve=0;ve<k.length;++ve){const Ue=k[ve];if(Ue&&!Ue.da&&Ue.capture==F){const ct=Ue.listener,Mt=Ue.ha||Ue.src;Ue.fa&&je(E.i,Ue),ce=ct.call(Mt,Q)!==!1&&ce}}return ce&&!Q.defaultPrevented}function Zl(E,k){if(typeof E!="function")if(E&&typeof E.handleEvent=="function")E=h(E.handleEvent,E);else throw Error("Invalid listener argument");return Number(k)>2147483647?-1:s.setTimeout(E,k||0)}function Ys(E){E.g=Zl(()=>{E.g=null,E.i&&(E.i=!1,Ys(E))},E.l);const k=E.h;E.h=null,E.m.apply(null,k)}class Tr extends Z{constructor(k,F){super(),this.m=k,this.l=F,this.h=null,this.i=!1,this.g=null}j(k){this.h=arguments,this.g?this.i=!0:Ys(this)}N(){super.N(),this.g&&(s.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function xs(E){Z.call(this),this.h=E,this.g={}}g(xs,Z);var _s=[];function Zs(E){Ne(E.g,function(k,F){this.g.hasOwnProperty(F)&&gt(k)},E),E.g={}}xs.prototype.N=function(){xs.Z.N.call(this),Zs(this)},xs.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var pa=s.JSON.stringify,Tc=s.JSON.parse,qo=class{stringify(E){return s.JSON.stringify(E,void 0)}parse(E){return s.JSON.parse(E,void 0)}};function Js(){}function Sc(){}var Ni={OPEN:"a",hb:"b",ERROR:"c",tb:"d"};function $n(){K.call(this,"d")}g($n,K);function si(){K.call(this,"c")}g(si,K);var Pn={},bs=null;function Ho(){return bs=bs||new In}Pn.Ia="serverreachability";function Ac(E){K.call(this,Pn.Ia,E)}g(Ac,K);function Hi(E){const k=Ho();Nn(k,new Ac(k))}Pn.STAT_EVENT="statevent";function ws(E,k){K.call(this,Pn.STAT_EVENT,E),this.stat=k}g(ws,K);function Dn(E){const k=Ho();Nn(k,new ws(k,E))}Pn.Ja="timingevent";function ga(E,k){K.call(this,Pn.Ja,E),this.size=k}g(ga,K);function ya(E,k){if(typeof E!="function")throw Error("Fn must not be null and must be a function");return s.setTimeout(function(){E()},k)}function Gi(){this.g=!0}Gi.prototype.ua=function(){this.g=!1};function Jd(E,k,F,Q,ce,ve){E.info(function(){if(E.g)if(ve){var Ue="",ct=ve.split("&");for(let Ot=0;Ot<ct.length;Ot++){var Mt=ct[Ot].split("=");if(Mt.length>1){const fn=Mt[0];Mt=Mt[1];const Qi=fn.split("_");Ue=Qi.length>=2&&Qi[1]=="type"?Ue+(fn+"="+Mt+"&"):Ue+(fn+"=redacted&")}}}else Ue=null;else Ue=ve;return"XMLHTTP REQ ("+Q+") [attempt "+ce+"]: "+k+`
`+F+`
`+Ue})}function Cc(E,k,F,Q,ce,ve,Ue){E.info(function(){return"XMLHTTP RESP ("+Q+") [ attempt "+ce+"]: "+k+`
`+F+`
`+ve+" "+Ue})}function va(E,k,F,Q){E.info(function(){return"XMLHTTP TEXT ("+k+"): "+Qd(E,F)+(Q?" "+Q:"")})}function Ka(E,k){E.info(function(){return"TIMEOUT: "+k})}Gi.prototype.info=function(){};function Qd(E,k){if(!E.g)return k;if(!k)return null;try{const ve=JSON.parse(k);if(ve){for(E=0;E<ve.length;E++)if(Array.isArray(ve[E])){var F=ve[E];if(!(F.length<2)){var Q=F[1];if(Array.isArray(Q)&&!(Q.length<1)){var ce=Q[0];if(ce!="noop"&&ce!="stop"&&ce!="close")for(let Ue=1;Ue<Q.length;Ue++)Q[Ue]=""}}}}return pa(ve)}catch{return k}}var Qs={NO_ERROR:0,cb:1,qb:2,pb:3,kb:4,ob:5,rb:6,Ga:7,TIMEOUT:8,ub:9},Go={ib:"complete",Fb:"success",ERROR:"error",Ga:"abort",xb:"ready",yb:"readystatechange",TIMEOUT:"timeout",sb:"incrementaldata",wb:"progress",lb:"downloadprogress",Nb:"uploadprogress"},xe;function we(){}g(we,Js),we.prototype.g=function(){return new XMLHttpRequest},xe=new we;function ae(E){return encodeURIComponent(String(E))}function tt(E){var k=1;E=E.split(":");const F=[];for(;k>0&&E.length;)F.push(E.shift()),k--;return E.length&&F.push(E.join(":")),F}function Xe(E,k,F,Q){this.j=E,this.i=k,this.l=F,this.S=Q||1,this.V=new xs(this),this.H=45e3,this.J=null,this.o=!1,this.u=this.B=this.A=this.M=this.F=this.T=this.D=null,this.G=[],this.g=null,this.C=0,this.m=this.v=null,this.X=-1,this.K=!1,this.P=0,this.O=null,this.W=this.L=this.U=this.R=!1,this.h=new yt}function yt(){this.i=null,this.g="",this.h=!1}var _t={},Jt={};function fr(E,k,F){E.M=1,E.A=Qt(bn(k)),E.u=F,E.R=!0,Kn(E,null)}function Kn(E,k){E.F=Date.now(),$i(E),E.B=bn(E.A);var F=E.B,Q=E.S;Array.isArray(Q)||(Q=[String(Q)]),ro(F.i,"t",Q),E.C=0,F=E.j.L,E.h=new yt,E.g=Rc(E.j,F?k:null,!E.u),E.P>0&&(E.O=new Tr(h(E.Y,E,E.g),E.P)),k=E.V,F=E.g,Q=E.ba;var ce="readystatechange";Array.isArray(ce)||(ce&&(_s[0]=ce.toString()),ce=_s);for(let ve=0;ve<ce.length;ve++){const Ue=Te(F,ce[ve],Q||k.handleEvent,!1,k.h||k);if(!Ue)break;k.g[Ue.key]=Ue}k=E.J?X(E.J):{},E.u?(E.v||(E.v="POST"),k["Content-Type"]="application/x-www-form-urlencoded",E.g.ea(E.B,E.v,E.u,k)):(E.v="GET",E.g.ea(E.B,E.v,null,k)),Hi(),Jd(E.i,E.v,E.B,E.l,E.S,E.u)}Xe.prototype.ba=function(E){E=E.target;const k=this.O;k&&ba(E)==3?k.j():this.Y(E)},Xe.prototype.Y=function(E){try{if(E==this.g)e:{const ct=ba(this.g),Mt=this.g.ya(),Ot=this.g.ca();if(!(ct<3)&&(ct!=3||this.g&&(this.h.h||this.g.la()||mr(this.g)))){this.K||ct!=4||Mt==7||(Mt==8||Ot<=0?Hi(3):Hi(2)),Pi(this);var k=this.g.ca();this.X=k;var F=Wt(this);if(this.o=k==200,Cc(this.i,this.v,this.B,this.l,this.S,ct,k),this.o){if(this.U&&!this.L){t:{if(this.g){var Q,ce=this.g;if((Q=ce.g?ce.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!G(Q)){var ve=Q;break t}}ve=null}if(E=ve)va(this.i,this.l,E,"Initial handshake response via X-HTTP-Initial-Response"),this.L=!0,Ki(this,E);else{this.o=!1,this.m=3,Dn(12),nr(this),li(this);break e}}if(this.R){E=!0;let fn;for(;!this.K&&this.C<F.length;)if(fn=Xs(this,F),fn==Jt){ct==4&&(this.m=4,Dn(14),E=!1),va(this.i,this.l,null,"[Incomplete Response]");break}else if(fn==_t){this.m=4,Dn(15),va(this.i,this.l,F,"[Invalid Chunk]"),E=!1;break}else va(this.i,this.l,fn,null),Ki(this,fn);if(oi(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),ct!=4||F.length!=0||this.h.h||(this.m=1,Dn(16),E=!1),this.o=this.o&&E,!E)va(this.i,this.l,F,"[Invalid Chunked Response]"),nr(this),li(this);else if(F.length>0&&!this.W){this.W=!0;var Ue=this.j;Ue.g==this&&Ue.aa&&!Ue.P&&(Ue.j.info("Great, no buffering proxy detected. Bytes received: "+F.length),Pc(Ue),Ue.P=!0,Dn(11))}}else va(this.i,this.l,F,null),Ki(this,F);ct==4&&nr(this),this.o&&!this.K&&(ct==4?ki(this.j,this):(this.o=!1,$i(this)))}else wa(this.g),k==400&&F.indexOf("Unknown SID")>0?(this.m=3,Dn(12)):(this.m=0,Dn(13)),nr(this),li(this)}}}catch{}finally{}};function Wt(E){if(!oi(E))return E.g.la();const k=mr(E.g);if(k==="")return"";let F="";const Q=k.length,ce=ba(E.g)==4;if(!E.h.i){if(typeof TextDecoder>"u")return nr(E),li(E),"";E.h.i=new s.TextDecoder}for(let ve=0;ve<Q;ve++)E.h.h=!0,F+=E.h.i.decode(k[ve],{stream:!(ce&&ve==Q-1)});return k.length=0,E.h.g+=F,E.C=0,E.h.g}function oi(E){return E.g?E.v=="GET"&&E.M!=2&&E.j.Aa:!1}function Xs(E,k){var F=E.C,Q=k.indexOf(`
`,F);return Q==-1?Jt:(F=Number(k.substring(F,Q)),isNaN(F)?_t:(Q+=1,Q+F>k.length?Jt:(k=k.slice(Q,Q+F),E.C=Q+F,k)))}Xe.prototype.cancel=function(){this.K=!0,nr(this)};function $i(E){E.T=Date.now()+E.H,eo(E,E.H)}function eo(E,k){if(E.D!=null)throw Error("WatchDog timer not null");E.D=ya(h(E.aa,E),k)}function Pi(E){E.D&&(s.clearTimeout(E.D),E.D=null)}Xe.prototype.aa=function(){this.D=null;const E=Date.now();E-this.T>=0?(Ka(this.i,this.B),this.M!=2&&(Hi(),Dn(17)),nr(this),this.m=2,li(this)):eo(this,this.T-E)};function li(E){E.j.I==0||E.K||ki(E.j,E)}function nr(E){Pi(E);var k=E.O;k&&typeof k.dispose=="function"&&k.dispose(),E.O=null,Zs(E.V),E.g&&(k=E.g,E.g=null,k.abort(),k.dispose())}function Ki(E,k){try{var F=E.j;if(F.I!=0&&(F.g==E||Wi(F.h,E))){if(!E.L&&Wi(F.h,E)&&F.I==3){try{var Q=F.Ba.g.parse(k)}catch{Q=null}if(Array.isArray(Q)&&Q.length==3){var ce=Q;if(ce[0]==0){e:if(!F.v){if(F.g)if(F.g.F+3e3<E.F)ru(F),oo(F);else break e;Jo(F),Dn(18)}}else F.xa=ce[1],0<F.xa-F.K&&ce[2]<37500&&F.F&&F.A==0&&!F.C&&(F.C=ya(h(F.Va,F),6e3));Wa(F.h)<=1&&F.ta&&(F.ta=void 0)}else Ea(F,11)}else if((E.L||F.g==E)&&ru(F),!G(k))for(ce=F.Ba.g.parse(k),k=0;k<ce.length;k++){let Ot=ce[k];const fn=Ot[0];if(!(fn<=F.K))if(F.K=fn,Ot=Ot[1],F.I==2)if(Ot[0]=="c"){F.M=Ot[1],F.ba=Ot[2];const Qi=Ot[3];Qi!=null&&(F.ka=Qi,F.j.info("VER="+F.ka));const Xi=Ot[4];Xi!=null&&(F.za=Xi,F.j.info("SVER="+F.za));const Mi=Ot[5];Mi!=null&&typeof Mi=="number"&&Mi>0&&(Q=1.5*Mi,F.O=Q,F.j.info("backChannelRequestTimeoutMs_="+Q)),Q=F;const Sa=E.g;if(Sa){const Qo=Sa.g?Sa.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(Qo){var ve=Q.h;ve.g||Qo.indexOf("spdy")==-1&&Qo.indexOf("quic")==-1&&Qo.indexOf("h2")==-1||(ve.j=ve.l,ve.g=new Set,ve.h&&(Es(ve,ve.h),ve.h=null))}if(Q.G){const Xo=Sa.g?Sa.g.getResponseHeader("X-HTTP-Session-Id"):null;Xo&&(Q.wa=Xo,He(Q.J,Q.G,Xo))}}F.I=3,F.l&&F.l.ra(),F.aa&&(F.T=Date.now()-E.F,F.j.info("Handshake RTT: "+F.T+"ms")),Q=F;var Ue=E;if(Q.na=Dc(Q,Q.L?Q.ba:null,Q.W),Ue.L){Jl(Q.h,Ue);var ct=Ue,Mt=Q.O;Mt&&(ct.H=Mt),ct.D&&(Pi(ct),$i(ct)),Q.g=Ue}else Nc(Q);F.i.length>0&&fi(F)}else Ot[0]!="stop"&&Ot[0]!="close"||Ea(F,7);else F.I==3&&(Ot[0]=="stop"||Ot[0]=="close"?Ot[0]=="stop"?Ea(F,7):bt(F):Ot[0]!="noop"&&F.l&&F.l.qa(Ot),F.A=0)}}Hi(4)}catch{}}var Rn=class{constructor(E,k){this.g=E,this.map=k}};function to(E){this.l=E||10,s.PerformanceNavigationTiming?(E=s.performance.getEntriesByType("navigation"),E=E.length>0&&(E[0].nextHopProtocol=="hq"||E[0].nextHopProtocol=="h2")):E=!!(s.chrome&&s.chrome.loadTimes&&s.chrome.loadTimes()&&s.chrome.loadTimes().wasFetchedViaSpdy),this.j=E?this.l:1,this.g=null,this.j>1&&(this.g=new Set),this.h=null,this.i=[]}function Sr(E){return E.h?!0:E.g?E.g.size>=E.j:!1}function Wa(E){return E.h?1:E.g?E.g.size:0}function Wi(E,k){return E.h?E.h==k:E.g?E.g.has(k):!1}function Es(E,k){E.g?E.g.add(k):E.h=k}function Jl(E,k){E.h&&E.h==k?E.h=null:E.g&&E.g.has(k)&&E.g.delete(k)}to.prototype.cancel=function(){if(this.i=Ql(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const E of this.g.values())E.cancel();this.g.clear()}};function Ql(E){if(E.h!=null)return E.i.concat(E.h.G);if(E.g!=null&&E.g.size!==0){let k=E.i;for(const F of E.g.values())k=k.concat(F.G);return k}return b(E.i)}var no=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function wt(E,k){if(E){E=E.split("&");for(let F=0;F<E.length;F++){const Q=E[F].indexOf("=");let ce,ve=null;Q>=0?(ce=E[F].substring(0,Q),ve=E[F].substring(Q+1)):ce=E[F],k(ce,ve?decodeURIComponent(ve.replace(/\+/g," ")):"")}}}function Tt(E){this.g=this.o=this.j="",this.u=null,this.m=this.h="",this.l=!1;let k;E instanceof Tt?(this.l=E.l,wn(this,E.j),this.o=E.o,this.g=E.g,Di(this,E.u),this.h=E.h,$o(this,Yo(E.i)),this.m=E.m):E&&(k=String(E).match(no))?(this.l=!1,wn(this,k[1]||"",!0),this.o=Yi(k[2]||""),this.g=Yi(k[3]||"",!0),Di(this,k[4]),this.h=Yi(k[5]||"",!0),$o(this,k[6]||"",!0),this.m=Yi(k[7]||"")):(this.l=!1,this.i=new Zi(null,this.l))}Tt.prototype.toString=function(){const E=[];var k=this.j;k&&E.push(Ya(k,Xl,!0),":");var F=this.g;return(F||k=="file")&&(E.push("//"),(k=this.o)&&E.push(Ya(k,Xl,!0),"@"),E.push(ae(F).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),F=this.u,F!=null&&E.push(":",String(F))),(F=this.h)&&(this.g&&F.charAt(0)!="/"&&E.push("/"),E.push(Ya(F,F.charAt(0)=="/"?xa:Ko,!0))),(F=this.i.toString())&&E.push("?",F),(F=this.m)&&E.push("#",Ya(F,Za)),E.join("")},Tt.prototype.resolve=function(E){const k=bn(this);let F=!!E.j;F?wn(k,E.j):F=!!E.o,F?k.o=E.o:F=!!E.g,F?k.g=E.g:F=E.u!=null;var Q=E.h;if(F)Di(k,E.u);else if(F=!!E.h){if(Q.charAt(0)!="/")if(this.g&&!this.h)Q="/"+Q;else{var ce=k.h.lastIndexOf("/");ce!=-1&&(Q=k.h.slice(0,ce+1)+Q)}if(ce=Q,ce==".."||ce==".")Q="";else if(ce.indexOf("./")!=-1||ce.indexOf("/.")!=-1){Q=ce.lastIndexOf("/",0)==0,ce=ce.split("/");const ve=[];for(let Ue=0;Ue<ce.length;){const ct=ce[Ue++];ct=="."?Q&&Ue==ce.length&&ve.push(""):ct==".."?((ve.length>1||ve.length==1&&ve[0]!="")&&ve.pop(),Q&&Ue==ce.length&&ve.push("")):(ve.push(ct),Q=!0)}Q=ve.join("/")}else Q=ce}return F?k.h=Q:F=E.i.toString()!=="",F?$o(k,Yo(E.i)):F=!!E.m,F&&(k.m=E.m),k};function bn(E){return new Tt(E)}function wn(E,k,F){E.j=F?Yi(k,!0):k,E.j&&(E.j=E.j.replace(/:$/,""))}function Di(E,k){if(k){if(k=Number(k),isNaN(k)||k<0)throw Error("Bad port number "+k);E.u=k}else E.u=null}function $o(E,k,F){k instanceof Zi?(E.i=k,io(E.i,E.l)):(F||(k=Ya(k,Xt)),E.i=new Zi(k,E.l))}function He(E,k,F){E.i.set(k,F)}function Qt(E){return He(E,"zx",Math.floor(Math.random()*2147483648).toString(36)+Math.abs(Math.floor(Math.random()*2147483648)^Date.now()).toString(36)),E}function Yi(E,k){return E?k?decodeURI(E.replace(/%25/g,"%2525")):decodeURIComponent(E):""}function Ya(E,k,F){return typeof E=="string"?(E=encodeURI(E).replace(k,dn),F&&(E=E.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),E):null}function dn(E){return E=E.charCodeAt(0),"%"+(E>>4&15).toString(16)+(E&15).toString(16)}var Xl=/[#\/\?@]/g,Ko=/[#\?:]/g,xa=/[#\?]/g,Xt=/[#\?@]/g,Za=/#/g;function Zi(E,k){this.h=this.g=null,this.i=E||null,this.j=!!k}function hr(E){E.g||(E.g=new Map,E.h=0,E.i&&wt(E.i,function(k,F){E.add(decodeURIComponent(k.replace(/\+/g," ")),F)}))}t=Zi.prototype,t.add=function(E,k){hr(this),this.i=null,E=Ja(this,E);let F=this.g.get(E);return F||this.g.set(E,F=[]),F.push(k),this.h+=1,this};function eu(E,k){hr(E),k=Ja(E,k),E.g.has(k)&&(E.i=null,E.h-=E.g.get(k).length,E.g.delete(k))}function Ts(E,k){return hr(E),k=Ja(E,k),E.g.has(k)}t.forEach=function(E,k){hr(this),this.g.forEach(function(F,Q){F.forEach(function(ce){E.call(k,ce,Q,this)},this)},this)};function Wo(E,k){hr(E);let F=[];if(typeof k=="string")Ts(E,k)&&(F=F.concat(E.g.get(Ja(E,k))));else for(E=Array.from(E.g.values()),k=0;k<E.length;k++)F=F.concat(E[k]);return F}t.set=function(E,k){return hr(this),this.i=null,E=Ja(this,E),Ts(this,E)&&(this.h-=this.g.get(E).length),this.g.set(E,[k]),this.h+=1,this},t.get=function(E,k){return E?(E=Wo(this,E),E.length>0?String(E[0]):k):k};function ro(E,k,F){eu(E,k),F.length>0&&(E.i=null,E.g.set(Ja(E,k),b(F)),E.h+=F.length)}t.toString=function(){if(this.i)return this.i;if(!this.g)return"";const E=[],k=Array.from(this.g.keys());for(let Q=0;Q<k.length;Q++){var F=k[Q];const ce=ae(F);F=Wo(this,F);for(let ve=0;ve<F.length;ve++){let Ue=ce;F[ve]!==""&&(Ue+="="+ae(F[ve])),E.push(Ue)}}return this.i=E.join("&")};function Yo(E){const k=new Zi;return k.i=E.i,E.g&&(k.g=new Map(E.g),k.h=E.h),k}function Ja(E,k){return k=String(k),E.j&&(k=k.toLowerCase()),k}function io(E,k){k&&!E.j&&(hr(E),E.i=null,E.g.forEach(function(F,Q){const ce=Q.toLowerCase();Q!=ce&&(eu(this,Q),ro(this,ce,F))},E)),E.j=k}function ui(E,k){const F=new Gi;if(s.Image){const Q=new Image;Q.onload=p(ci,F,"TestLoadImage: loaded",!0,k,Q),Q.onerror=p(ci,F,"TestLoadImage: error",!1,k,Q),Q.onabort=p(ci,F,"TestLoadImage: abort",!1,k,Q),Q.ontimeout=p(ci,F,"TestLoadImage: timeout",!1,k,Q),s.setTimeout(function(){Q.ontimeout&&Q.ontimeout()},1e4),Q.src=E}else k(!1)}function tu(E,k){const F=new Gi,Q=new AbortController,ce=setTimeout(()=>{Q.abort(),ci(F,"TestPingServer: timeout",!1,k)},1e4);fetch(E,{signal:Q.signal}).then(ve=>{clearTimeout(ce),ve.ok?ci(F,"TestPingServer: ok",!0,k):ci(F,"TestPingServer: server error",!1,k)}).catch(()=>{clearTimeout(ce),ci(F,"TestPingServer: error",!1,k)})}function ci(E,k,F,Q,ce){try{ce&&(ce.onload=null,ce.onerror=null,ce.onabort=null,ce.ontimeout=null),Q(F)}catch{}}function ao(){this.g=new qo}function at(E){this.i=E.Sb||null,this.h=E.ab||!1}g(at,Js),at.prototype.g=function(){return new Lr(this.i,this.h)};function Lr(E,k){In.call(this),this.H=E,this.o=k,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.A=new Headers,this.h=null,this.F="GET",this.D="",this.g=!1,this.B=this.j=this.l=null,this.v=new AbortController}g(Lr,In),t=Lr.prototype,t.open=function(E,k){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.F=E,this.D=k,this.readyState=1,Ri(this)},t.send=function(E){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");if(this.v.signal.aborted)throw this.abort(),Error("Request was aborted.");this.g=!0;const k={headers:this.A,method:this.F,credentials:this.m,cache:void 0,signal:this.v.signal};E&&(k.body=E),(this.H||s).fetch(new Request(this.D,k)).then(this.Pa.bind(this),this.ga.bind(this))},t.abort=function(){this.response=this.responseText="",this.A=new Headers,this.status=0,this.v.abort(),this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),this.readyState>=1&&this.g&&this.readyState!=4&&(this.g=!1,Ss(this)),this.readyState=0},t.Pa=function(E){if(this.g&&(this.l=E,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=E.headers,this.readyState=2,Ri(this)),this.g&&(this.readyState=3,Ri(this),this.g)))if(this.responseType==="arraybuffer")E.arrayBuffer().then(this.Na.bind(this),this.ga.bind(this));else if(typeof s.ReadableStream<"u"&&"body"in E){if(this.j=E.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.B=new TextDecoder;Vt(this)}else E.text().then(this.Oa.bind(this),this.ga.bind(this))};function Vt(E){E.j.read().then(E.Ma.bind(E)).catch(E.ga.bind(E))}t.Ma=function(E){if(this.g){if(this.o&&E.value)this.response.push(E.value);else if(!this.o){var k=E.value?E.value:new Uint8Array(0);(k=this.B.decode(k,{stream:!E.done}))&&(this.response=this.responseText+=k)}E.done?Ss(this):Ri(this),this.readyState==3&&Vt(this)}},t.Oa=function(E){this.g&&(this.response=this.responseText=E,Ss(this))},t.Na=function(E){this.g&&(this.response=E,Ss(this))},t.ga=function(){this.g&&Ss(this)};function Ss(E){E.readyState=4,E.l=null,E.j=null,E.B=null,Ri(E)}t.setRequestHeader=function(E,k){this.A.append(E,k)},t.getResponseHeader=function(E){return this.h&&this.h.get(E.toLowerCase())||""},t.getAllResponseHeaders=function(){if(!this.h)return"";const E=[],k=this.h.entries();for(var F=k.next();!F.done;)F=F.value,E.push(F[0]+": "+F[1]),F=k.next();return E.join(`\r
`)};function Ri(E){E.onreadystatechange&&E.onreadystatechange.call(E)}Object.defineProperty(Lr.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(E){this.m=E?"include":"same-origin"}});function di(E){let k="";return Ne(E,function(F,Q){k+=Q,k+=":",k+=F,k+=`\r
`}),k}function As(E,k,F){e:{for(Q in F){var Q=!1;break e}Q=!0}Q||(F=di(F),typeof E=="string"?F!=null&&ae(F):He(E,k,F))}function Nt(E){In.call(this),this.headers=new Map,this.L=E||null,this.h=!1,this.g=null,this.D="",this.o=0,this.l="",this.j=this.B=this.v=this.A=!1,this.m=null,this.F="",this.H=!1}g(Nt,In);var Ji=/^https?$/i,Cs=["POST","PUT"];t=Nt.prototype,t.Fa=function(E){this.H=E},t.ea=function(E,k,F,Q){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+E);k=k?k.toUpperCase():"GET",this.D=E,this.l="",this.o=0,this.A=!1,this.h=!0,this.g=this.L?this.L.g():xe.g(),this.g.onreadystatechange=x(h(this.Ca,this));try{this.B=!0,this.g.open(k,String(E),!0),this.B=!1}catch(ve){En(this,ve);return}if(E=F||"",F=new Map(this.headers),Q)if(Object.getPrototypeOf(Q)===Object.prototype)for(var ce in Q)F.set(ce,Q[ce]);else if(typeof Q.keys=="function"&&typeof Q.get=="function")for(const ve of Q.keys())F.set(ve,Q.get(ve));else throw Error("Unknown input type for opt_headers: "+String(Q));Q=Array.from(F.keys()).find(ve=>ve.toLowerCase()=="content-type"),ce=s.FormData&&E instanceof s.FormData,!(Array.prototype.indexOf.call(Cs,k,void 0)>=0)||Q||ce||F.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[ve,Ue]of F)this.g.setRequestHeader(ve,Ue);this.F&&(this.g.responseType=this.F),"withCredentials"in this.g&&this.g.withCredentials!==this.H&&(this.g.withCredentials=this.H);try{this.m&&(clearTimeout(this.m),this.m=null),this.v=!0,this.g.send(E),this.v=!1}catch(ve){En(this,ve)}};function En(E,k){E.h=!1,E.g&&(E.j=!0,E.g.abort(),E.j=!1),E.l=k,E.o=5,_a(E),Qa(E)}function _a(E){E.A||(E.A=!0,Nn(E,"complete"),Nn(E,"error"))}t.abort=function(E){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.o=E||7,Nn(this,"complete"),Nn(this,"abort"),Qa(this))},t.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),Qa(this,!0)),Nt.Z.N.call(this)},t.Ca=function(){this.u||(this.B||this.v||this.j?so(this):this.Xa())},t.Xa=function(){so(this)};function so(E){if(E.h&&typeof a<"u"){if(E.v&&ba(E)==4)setTimeout(E.Ca.bind(E),0);else if(Nn(E,"readystatechange"),ba(E)==4){E.h=!1;try{const ve=E.ca();e:switch(ve){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var k=!0;break e;default:k=!1}var F;if(!(F=k)){var Q;if(Q=ve===0){let Ue=String(E.D).match(no)[1]||null;!Ue&&s.self&&s.self.location&&(Ue=s.self.location.protocol.slice(0,-1)),Q=!Ji.test(Ue?Ue.toLowerCase():"")}F=Q}if(F)Nn(E,"complete"),Nn(E,"success");else{E.o=6;try{var ce=ba(E)>2?E.g.statusText:""}catch{ce=""}E.l=ce+" ["+E.ca()+"]",_a(E)}}finally{Qa(E)}}}}function Qa(E,k){if(E.g){E.m&&(clearTimeout(E.m),E.m=null);const F=E.g;E.g=null,k||Nn(E,"ready");try{F.onreadystatechange=null}catch{}}}t.isActive=function(){return!!this.g};function ba(E){return E.g?E.g.readyState:0}t.ca=function(){try{return ba(this)>2?this.g.status:-1}catch{return-1}},t.la=function(){try{return this.g?this.g.responseText:""}catch{return""}},t.La=function(E){if(this.g){var k=this.g.responseText;return E&&k.indexOf(E)==0&&(k=k.substring(E.length)),Tc(k)}};function mr(E){try{if(!E.g)return null;if("response"in E.g)return E.g.response;switch(E.F){case"":case"text":return E.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in E.g)return E.g.mozResponseArrayBuffer}return null}catch{return null}}function wa(E){const k={};E=(E.g&&ba(E)>=2&&E.g.getAllResponseHeaders()||"").split(`\r
`);for(let Q=0;Q<E.length;Q++){if(G(E[Q]))continue;var F=tt(E[Q]);const ce=F[0];if(F=F[1],typeof F!="string")continue;F=F.trim();const ve=k[ce]||[];k[ce]=ve,ve.push(F)}Pe(k,function(Q){return Q.join(", ")})}t.ya=function(){return this.o},t.Ha=function(){return typeof this.l=="string"?this.l:String(this.l)};function Xa(E,k,F){return F&&F.internalChannelParams&&F.internalChannelParams[E]||k}function Is(E){this.za=0,this.i=[],this.j=new Gi,this.ba=this.na=this.J=this.W=this.g=this.wa=this.G=this.H=this.u=this.U=this.o=null,this.Ya=this.V=0,this.Sa=Xa("failFast",!1,E),this.F=this.C=this.v=this.m=this.l=null,this.X=!0,this.xa=this.K=-1,this.Y=this.A=this.D=0,this.Qa=Xa("baseRetryDelayMs",5e3,E),this.Za=Xa("retryDelaySeedMs",1e4,E),this.Ta=Xa("forwardChannelMaxRetries",2,E),this.va=Xa("forwardChannelRequestTimeoutMs",2e4,E),this.ma=E&&E.xmlHttpFactory||void 0,this.Ua=E&&E.Rb||void 0,this.Aa=E&&E.useFetchStreams||!1,this.O=void 0,this.L=E&&E.supportsCrossDomainXhr||!1,this.M="",this.h=new to(E&&E.concurrentRequestLimit),this.Ba=new ao,this.S=E&&E.fastHandshake||!1,this.R=E&&E.encodeInitMessageHeaders||!1,this.S&&this.R&&(this.R=!1),this.Ra=E&&E.Pb||!1,E&&E.ua&&this.j.ua(),E&&E.forceLongPolling&&(this.X=!1),this.aa=!this.S&&this.X&&E&&E.detectBufferingProxy||!1,this.ia=void 0,E&&E.longPollingTimeout&&E.longPollingTimeout>0&&(this.ia=E.longPollingTimeout),this.ta=void 0,this.T=0,this.P=!1,this.ja=this.B=null}t=Is.prototype,t.ka=8,t.I=1,t.connect=function(E,k,F,Q){Dn(0),this.W=E,this.H=k||{},F&&Q!==void 0&&(this.H.OSID=F,this.H.OAID=Q),this.F=this.X,this.J=Dc(this,null,this.W),fi(this)};function bt(E){if(Vr(E),E.I==3){var k=E.V++,F=bn(E.J);if(He(F,"SID",E.M),He(F,"RID",k),He(F,"TYPE","terminate"),Ns(E,F),k=new Xe(E,E.j,k),k.M=2,k.A=Qt(bn(F)),F=!1,s.navigator&&s.navigator.sendBeacon)try{F=s.navigator.sendBeacon(k.A.toString(),"")}catch{}!F&&s.Image&&(new Image().src=k.A,F=!0),F||(k.g=Rc(k.j,null),k.g.ea(k.A)),k.F=Date.now(),$i(k)}Ta(E)}function oo(E){E.g&&(Pc(E),E.g.cancel(),E.g=null)}function Vr(E){oo(E),E.v&&(s.clearTimeout(E.v),E.v=null),ru(E),E.h.cancel(),E.m&&(typeof E.m=="number"&&s.clearTimeout(E.m),E.m=null)}function fi(E){if(!Sr(E.h)&&!E.m){E.m=!0;var k=E.Ea;$||z(),H||($(),H=!0),U.add(k,E),E.D=0}}function Zo(E,k){return Wa(E.h)>=E.h.j-(E.m?1:0)?!1:E.m?(E.i=k.G.concat(E.i),!0):E.I==1||E.I==2||E.D>=(E.Sa?0:E.Ta)?!1:(E.m=ya(h(E.Ea,E,k),ef(E,E.D)),E.D++,!0)}t.Ea=function(E){if(this.m)if(this.m=null,this.I==1){if(!E){this.V=Math.floor(Math.random()*1e5),E=this.V++;const ce=new Xe(this,this.j,E);let ve=this.o;if(this.U&&(ve?(ve=X(ve),be(ve,this.U)):ve=this.U),this.u!==null||this.R||(ce.J=ve,ve=null),this.S)e:{for(var k=0,F=0;F<this.i.length;F++){t:{var Q=this.i[F];if("__data__"in Q.map&&(Q=Q.map.__data__,typeof Q=="string")){Q=Q.length;break t}Q=void 0}if(Q===void 0)break;if(k+=Q,k>4096){k=F;break e}if(k===4096||F===this.i.length-1){k=F+1;break e}}k=1e3}else k=1e3;k=Xd(this,ce,k),F=bn(this.J),He(F,"RID",E),He(F,"CVER",22),this.G&&He(F,"X-HTTP-Session-Id",this.G),Ns(this,F),ve&&(this.R?k="headers="+ae(di(ve))+"&"+k:this.u&&As(F,this.u,ve)),Es(this.h,ce),this.Ra&&He(F,"TYPE","init"),this.S?(He(F,"$req",k),He(F,"SID","null"),ce.U=!0,fr(ce,F,null)):fr(ce,F,k),this.I=2}}else this.I==3&&(E?Ic(this,E):this.i.length==0||Sr(this.h)||Ic(this))};function Ic(E,k){var F;k?F=k.l:F=E.V++;const Q=bn(E.J);He(Q,"SID",E.M),He(Q,"RID",F),He(Q,"AID",E.K),Ns(E,Q),E.u&&E.o&&As(Q,E.u,E.o),F=new Xe(E,E.j,F,E.D+1),E.u===null&&(F.J=E.o),k&&(E.i=k.G.concat(E.i)),k=Xd(E,F,1e3),F.H=Math.round(E.va*.5)+Math.round(E.va*.5*Math.random()),Es(E.h,F),fr(F,Q,k)}function Ns(E,k){E.H&&Ne(E.H,function(F,Q){He(k,Q,F)}),E.l&&Ne({},function(F,Q){He(k,Q,F)})}function Xd(E,k,F){F=Math.min(E.i.length,F);const Q=E.l?h(E.l.Ka,E.l,E):null;e:{var ce=E.i;let ct=-1;for(;;){const Mt=["count="+F];ct==-1?F>0?(ct=ce[0].g,Mt.push("ofs="+ct)):ct=0:Mt.push("ofs="+ct);let Ot=!0;for(let fn=0;fn<F;fn++){var ve=ce[fn].g;const Qi=ce[fn].map;if(ve-=ct,ve<0)ct=Math.max(0,ce[fn].g-100),Ot=!1;else try{ve="req"+ve+"_"||"";try{var Ue=Qi instanceof Map?Qi:Object.entries(Qi);for(const[Xi,Mi]of Ue){let Sa=Mi;l(Mi)&&(Sa=pa(Mi)),Mt.push(ve+Xi+"="+encodeURIComponent(Sa))}}catch(Xi){throw Mt.push(ve+"type="+encodeURIComponent("_badmap")),Xi}}catch{Q&&Q(Qi)}}if(Ot){Ue=Mt.join("&");break e}}Ue=void 0}return E=E.i.splice(0,F),k.G=E,Ue}function Nc(E){if(!E.g&&!E.v){E.Y=1;var k=E.Da;$||z(),H||($(),H=!0),U.add(k,E),E.A=0}}function Jo(E){return E.g||E.v||E.A>=3?!1:(E.Y++,E.v=ya(h(E.Da,E),ef(E,E.A)),E.A++,!0)}t.Da=function(){if(this.v=null,nu(this),this.aa&&!(this.P||this.g==null||this.T<=0)){var E=4*this.T;this.j.info("BP detection timer enabled: "+E),this.B=ya(h(this.Wa,this),E)}},t.Wa=function(){this.B&&(this.B=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.P=!0,Dn(10),oo(this),nu(this))};function Pc(E){E.B!=null&&(s.clearTimeout(E.B),E.B=null)}function nu(E){E.g=new Xe(E,E.j,"rpc",E.Y),E.u===null&&(E.g.J=E.o),E.g.P=0;var k=bn(E.na);He(k,"RID","rpc"),He(k,"SID",E.M),He(k,"AID",E.K),He(k,"CI",E.F?"0":"1"),!E.F&&E.ia&&He(k,"TO",E.ia),He(k,"TYPE","xmlhttp"),Ns(E,k),E.u&&E.o&&As(k,E.u,E.o),E.O&&(E.g.H=E.O);var F=E.g;E=E.ba,F.M=1,F.A=Qt(bn(k)),F.u=null,F.R=!0,Kn(F,E)}t.Va=function(){this.C!=null&&(this.C=null,oo(this),Jo(this),Dn(19))};function ru(E){E.C!=null&&(s.clearTimeout(E.C),E.C=null)}function ki(E,k){var F=null;if(E.g==k){ru(E),Pc(E),E.g=null;var Q=2}else if(Wi(E.h,k))F=k.G,Jl(E.h,k),Q=1;else return;if(E.I!=0){if(k.o)if(Q==1){F=k.u?k.u.length:0,k=Date.now()-k.F;var ce=E.D;Q=Ho(),Nn(Q,new ga(Q,F)),fi(E)}else Nc(E);else if(ce=k.m,ce==3||ce==0&&k.X>0||!(Q==1&&Zo(E,k)||Q==2&&Jo(E)))switch(F&&F.length>0&&(k=E.h,k.i=k.i.concat(F)),ce){case 1:Ea(E,5);break;case 4:Ea(E,10);break;case 3:Ea(E,6);break;default:Ea(E,2)}}}function ef(E,k){let F=E.Qa+Math.floor(Math.random()*E.Za);return E.isActive()||(F*=2),F*k}function Ea(E,k){if(E.j.info("Error code "+k),k==2){var F=h(E.bb,E),Q=E.Ua;const ce=!Q;Q=new Tt(Q||"//www.google.com/images/cleardot.gif"),s.location&&s.location.protocol=="http"||wn(Q,"https"),Qt(Q),ce?ui(Q.toString(),F):tu(Q.toString(),F)}else Dn(2);E.I=0,E.l&&E.l.pa(k),Ta(E),Vr(E)}t.bb=function(E){E?(this.j.info("Successfully pinged google.com"),Dn(2)):(this.j.info("Failed to ping google.com"),Dn(1))};function Ta(E){if(E.I=0,E.ja=[],E.l){const k=Ql(E.h);(k.length!=0||E.i.length!=0)&&(C(E.ja,k),C(E.ja,E.i),E.h.i.length=0,b(E.i),E.i.length=0),E.l.oa()}}function Dc(E,k,F){var Q=F instanceof Tt?bn(F):new Tt(F);if(Q.g!="")k&&(Q.g=k+"."+Q.g),Di(Q,Q.u);else{var ce=s.location;Q=ce.protocol,k=k?k+"."+ce.hostname:ce.hostname,ce=+ce.port;const ve=new Tt(null);Q&&wn(ve,Q),k&&(ve.g=k),ce&&Di(ve,ce),F&&(ve.h=F),Q=ve}return F=E.G,k=E.wa,F&&k&&He(Q,F,k),He(Q,"VER",E.ka),Ns(E,Q),Q}function Rc(E,k,F){if(k&&!E.L)throw Error("Can't create secondary domain capable XhrIo object.");return k=E.Aa&&!E.ma?new Nt(new at({ab:F})):new Nt(E.ma),k.Fa(E.L),k}t.isActive=function(){return!!this.l&&this.l.isActive(this)};function iu(){}t=iu.prototype,t.ra=function(){},t.qa=function(){},t.pa=function(){},t.oa=function(){},t.isActive=function(){return!0},t.Ka=function(){};function lo(){}lo.prototype.g=function(E,k){return new Ur(E,k)};function Ur(E,k){In.call(this),this.g=new Is(k),this.l=E,this.h=k&&k.messageUrlParams||null,E=k&&k.messageHeaders||null,k&&k.clientProtocolHeaderRequired&&(E?E["X-Client-Protocol"]="webchannel":E={"X-Client-Protocol":"webchannel"}),this.g.o=E,E=k&&k.initMessageHeaders||null,k&&k.messageContentType&&(E?E["X-WebChannel-Content-Type"]=k.messageContentType:E={"X-WebChannel-Content-Type":k.messageContentType}),k&&k.sa&&(E?E["X-WebChannel-Client-Profile"]=k.sa:E={"X-WebChannel-Client-Profile":k.sa}),this.g.U=E,(E=k&&k.Qb)&&!G(E)&&(this.g.u=E),this.A=k&&k.supportsCrossDomainXhr||!1,this.v=k&&k.sendRawJson||!1,(k=k&&k.httpSessionIdParam)&&!G(k)&&(this.g.G=k,E=this.h,E!==null&&k in E&&(E=this.h,k in E&&delete E[k])),this.j=new Ps(this)}g(Ur,In),Ur.prototype.m=function(){this.g.l=this.j,this.A&&(this.g.L=!0),this.g.connect(this.l,this.h||void 0)},Ur.prototype.close=function(){bt(this.g)},Ur.prototype.o=function(E){var k=this.g;if(typeof E=="string"){var F={};F.__data__=E,E=F}else this.v&&(F={},F.__data__=pa(E),E=F);k.i.push(new Rn(k.Ya++,E)),k.I==3&&fi(k)},Ur.prototype.N=function(){this.g.l=null,delete this.j,bt(this.g),delete this.g,Ur.Z.N.call(this)};function kc(E){$n.call(this),E.__headers__&&(this.headers=E.__headers__,this.statusCode=E.__status__,delete E.__headers__,delete E.__status__);var k=E.__sm__;if(k){e:{for(const F in k){E=F;break e}E=void 0}(this.i=E)&&(E=this.i,k=k!==null&&E in k?k[E]:void 0),this.data=k}else this.data=E}g(kc,$n);function tf(){si.call(this),this.status=1}g(tf,si);function Ps(E){this.g=E}g(Ps,iu),Ps.prototype.ra=function(){Nn(this.g,"a")},Ps.prototype.qa=function(E){Nn(this.g,new kc(E))},Ps.prototype.pa=function(E){Nn(this.g,new tf)},Ps.prototype.oa=function(){Nn(this.g,"b")},lo.prototype.createWebChannel=lo.prototype.g,Ur.prototype.send=Ur.prototype.o,Ur.prototype.open=Ur.prototype.m,Ur.prototype.close=Ur.prototype.close,iV=function(){return new lo},rV=function(){return Ho()},nV=Pn,SS={jb:0,mb:1,nb:2,Hb:3,Mb:4,Jb:5,Kb:6,Ib:7,Gb:8,Lb:9,PROXY:10,NOPROXY:11,Eb:12,Ab:13,Bb:14,zb:15,Cb:16,Db:17,fb:18,eb:19,gb:20},Qs.NO_ERROR=0,Qs.TIMEOUT=8,Qs.HTTP_ERROR=6,Wv=Qs,Go.COMPLETE="complete",tV=Go,Sc.EventType=Ni,Ni.OPEN="a",Ni.CLOSE="b",Ni.ERROR="c",Ni.MESSAGE="d",In.prototype.listen=In.prototype.J,vp=Sc,Nt.prototype.listenOnce=Nt.prototype.K,Nt.prototype.getLastError=Nt.prototype.Ha,Nt.prototype.getLastErrorCode=Nt.prototype.ya,Nt.prototype.getStatus=Nt.prototype.ca,Nt.prototype.getResponseJson=Nt.prototype.La,Nt.prototype.getResponseText=Nt.prototype.la,Nt.prototype.send=Nt.prototype.ea,Nt.prototype.setWithCredentials=Nt.prototype.Fa,eV=Nt}).apply(typeof vv<"u"?vv:typeof self<"u"?self:typeof window<"u"?window:{});const Ak="@firebase/firestore",Ck="4.9.2";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xi{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}xi.UNAUTHENTICATED=new xi(null),xi.GOOGLE_CREDENTIALS=new xi("google-credentials-uid"),xi.FIRST_PARTY=new xi("first-party-uid"),xi.MOCK_USER=new xi("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Zh="12.3.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Pd=new mA("@firebase/firestore");function qf(){return Pd.logLevel}function ke(t,...e){if(Pd.logLevel<=Rt.DEBUG){const n=e.map(SA);Pd.debug(`Firestore (${Zh}): ${t}`,...n)}}function or(t,...e){if(Pd.logLevel<=Rt.ERROR){const n=e.map(SA);Pd.error(`Firestore (${Zh}): ${t}`,...n)}}function zp(t,...e){if(Pd.logLevel<=Rt.WARN){const n=e.map(SA);Pd.warn(`Firestore (${Zh}): ${t}`,...n)}}function SA(t){if(typeof t=="string")return t;try{/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/return(function(n){return JSON.stringify(n)})(t)}catch{return t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ge(t,e,n){let r="Unexpected state";typeof e=="string"?r=e:n=e,aV(t,r,n)}function aV(t,e,n){let r=`FIRESTORE (${Zh}) INTERNAL ASSERTION FAILED: ${e} (ID: ${t.toString(16)})`;if(n!==void 0)try{r+=" CONTEXT: "+JSON.stringify(n)}catch{r+=" CONTEXT: "+n}throw or(r),new Error(r)}function Qe(t,e,n,r){let i="Unexpected state";typeof n=="string"?i=n:r=n,t||aV(e,i,r)}function Ye(t,e){return t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ee={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class Le extends Uo{constructor(e,n){super(e,n),this.code=e,this.message=n,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qs{constructor(){this.promise=new Promise(((e,n)=>{this.resolve=e,this.reject=n}))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class XK{constructor(e,n){this.user=n,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class eW{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,n){e.enqueueRetryable((()=>n(xi.UNAUTHENTICATED)))}shutdown(){}}class tW{constructor(e){this.t=e,this.currentUser=xi.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,n){Qe(this.o===void 0,42304);let r=this.i;const i=c=>this.i!==r?(r=this.i,n(c)):Promise.resolve();let a=new qs;this.o=()=>{this.i++,this.currentUser=this.u(),a.resolve(),a=new qs,e.enqueueRetryable((()=>i(this.currentUser)))};const s=()=>{const c=a;e.enqueueRetryable((async()=>{await c.promise,await i(this.currentUser)}))},l=c=>{ke("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=c,this.o&&(this.auth.addAuthTokenListener(this.o),s())};this.t.onInit((c=>l(c))),setTimeout((()=>{if(!this.auth){const c=this.t.getImmediate({optional:!0});c?l(c):(ke("FirebaseAuthCredentialsProvider","Auth not yet detected"),a.resolve(),a=new qs)}}),0),s()}getToken(){const e=this.i,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then((r=>this.i!==e?(ke("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(Qe(typeof r.accessToken=="string",31837,{l:r}),new XK(r.accessToken,this.currentUser)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return Qe(e===null||typeof e=="string",2055,{h:e}),new xi(e)}}class nW{constructor(e,n,r){this.P=e,this.T=n,this.I=r,this.type="FirstParty",this.user=xi.FIRST_PARTY,this.A=new Map}R(){return this.I?this.I():null}get headers(){this.A.set("X-Goog-AuthUser",this.P);const e=this.R();return e&&this.A.set("Authorization",e),this.T&&this.A.set("X-Goog-Iam-Authorization-Token",this.T),this.A}}class rW{constructor(e,n,r){this.P=e,this.T=n,this.I=r}getToken(){return Promise.resolve(new nW(this.P,this.T,this.I))}start(e,n){e.enqueueRetryable((()=>n(xi.FIRST_PARTY)))}shutdown(){}invalidateToken(){}}class Ik{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class iW{constructor(e,n){this.V=n,this.forceRefresh=!1,this.appCheck=null,this.m=null,this.p=null,Ma(e)&&e.settings.appCheckToken&&(this.p=e.settings.appCheckToken)}start(e,n){Qe(this.o===void 0,3512);const r=a=>{a.error!=null&&ke("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${a.error.message}`);const s=a.token!==this.m;return this.m=a.token,ke("FirebaseAppCheckTokenProvider",`Received ${s?"new":"existing"} token.`),s?n(a.token):Promise.resolve()};this.o=a=>{e.enqueueRetryable((()=>r(a)))};const i=a=>{ke("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=a,this.o&&this.appCheck.addTokenListener(this.o)};this.V.onInit((a=>i(a))),setTimeout((()=>{if(!this.appCheck){const a=this.V.getImmediate({optional:!0});a?i(a):ke("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}}),0)}getToken(){if(this.p)return Promise.resolve(new Ik(this.p));const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then((n=>n?(Qe(typeof n.token=="string",44558,{tokenResult:n}),this.m=n.token,new Ik(n.token)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function aW(t){const e=typeof self<"u"&&(self.crypto||self.msCrypto),n=new Uint8Array(t);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(n);else for(let r=0;r<t;r++)n[r]=Math.floor(256*Math.random());return n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class AA{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",n=62*Math.floor(4.129032258064516);let r="";for(;r.length<20;){const i=aW(40);for(let a=0;a<i.length;++a)r.length<20&&i[a]<n&&(r+=e.charAt(i[a]%62))}return r}}function ft(t,e){return t<e?-1:t>e?1:0}function AS(t,e){const n=Math.min(t.length,e.length);for(let r=0;r<n;r++){const i=t.charAt(r),a=e.charAt(r);if(i!==a)return EE(i)===EE(a)?ft(i,a):EE(i)?1:-1}return ft(t.length,e.length)}const sW=55296,oW=57343;function EE(t){const e=t.charCodeAt(0);return e>=sW&&e<=oW}function vh(t,e,n){return t.length===e.length&&t.every(((r,i)=>n(r,e[i])))}function sV(t){return t+"\0"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Nk="__name__";class _o{constructor(e,n,r){n===void 0?n=0:n>e.length&&Ge(637,{offset:n,range:e.length}),r===void 0?r=e.length-n:r>e.length-n&&Ge(1746,{length:r,range:e.length-n}),this.segments=e,this.offset=n,this.len=r}get length(){return this.len}isEqual(e){return _o.comparator(this,e)===0}child(e){const n=this.segments.slice(this.offset,this.limit());return e instanceof _o?e.forEach((r=>{n.push(r)})):n.push(e),this.construct(n)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}forEach(e){for(let n=this.offset,r=this.limit();n<r;n++)e(this.segments[n])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,n){const r=Math.min(e.length,n.length);for(let i=0;i<r;i++){const a=_o.compareSegments(e.get(i),n.get(i));if(a!==0)return a}return ft(e.length,n.length)}static compareSegments(e,n){const r=_o.isNumericId(e),i=_o.isNumericId(n);return r&&!i?-1:!r&&i?1:r&&i?_o.extractNumericId(e).compare(_o.extractNumericId(n)):AS(e,n)}static isNumericId(e){return e.startsWith("__id")&&e.endsWith("__")}static extractNumericId(e){return Zu.fromString(e.substring(4,e.length-2))}}class Ut extends _o{construct(e,n,r){return new Ut(e,n,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const n=[];for(const r of e){if(r.indexOf("//")>=0)throw new Le(Ee.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);n.push(...r.split("/").filter((i=>i.length>0)))}return new Ut(n)}static emptyPath(){return new Ut([])}}const lW=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class Hn extends _o{construct(e,n,r){return new Hn(e,n,r)}static isValidIdentifier(e){return lW.test(e)}canonicalString(){return this.toArray().map((e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),Hn.isValidIdentifier(e)||(e="`"+e+"`"),e))).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)===Nk}static keyField(){return new Hn([Nk])}static fromServerFormat(e){const n=[];let r="",i=0;const a=()=>{if(r.length===0)throw new Le(Ee.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);n.push(r),r=""};let s=!1;for(;i<e.length;){const l=e[i];if(l==="\\"){if(i+1===e.length)throw new Le(Ee.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const c=e[i+1];if(c!=="\\"&&c!=="."&&c!=="`")throw new Le(Ee.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=c,i+=2}else l==="`"?(s=!s,i++):l!=="."||s?(r+=l,i++):(a(),i++)}if(a(),s)throw new Le(Ee.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new Hn(n)}static emptyPath(){return new Hn([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Be{constructor(e){this.path=e}static fromPath(e){return new Be(Ut.fromString(e))}static fromName(e){return new Be(Ut.fromString(e).popFirst(5))}static empty(){return new Be(Ut.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&Ut.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,n){return Ut.comparator(e.path,n.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new Be(new Ut(e.slice()))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function oV(t,e,n){if(!n)throw new Le(Ee.INVALID_ARGUMENT,`Function ${t}() cannot be called with an empty ${e}.`)}function uW(t,e,n,r){if(e===!0&&r===!0)throw new Le(Ee.INVALID_ARGUMENT,`${t} and ${n} cannot be used together.`)}function Pk(t){if(!Be.isDocumentKey(t))throw new Le(Ee.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${t} has ${t.length}.`)}function Dk(t){if(Be.isDocumentKey(t))throw new Le(Ee.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${t} has ${t.length}.`)}function lV(t){return typeof t=="object"&&t!==null&&(Object.getPrototypeOf(t)===Object.prototype||Object.getPrototypeOf(t)===null)}function i_(t){if(t===void 0)return"undefined";if(t===null)return"null";if(typeof t=="string")return t.length>20&&(t=`${t.substring(0,20)}...`),JSON.stringify(t);if(typeof t=="number"||typeof t=="boolean")return""+t;if(typeof t=="object"){if(t instanceof Array)return"an array";{const e=(function(r){return r.constructor?r.constructor.name:null})(t);return e?`a custom ${e} object`:"an object"}}return typeof t=="function"?"a function":Ge(12329,{type:typeof t})}function ms(t,e){if("_delegate"in t&&(t=t._delegate),!(t instanceof e)){if(e.name===t.constructor.name)throw new Le(Ee.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const n=i_(t);throw new Le(Ee.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${n}`)}}return t}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function br(t,e){const n={typeString:t};return e&&(n.value=e),n}function Ag(t,e){if(!lV(t))throw new Le(Ee.INVALID_ARGUMENT,"JSON must be an object");let n;for(const r in e)if(e[r]){const i=e[r].typeString,a="value"in e[r]?{value:e[r].value}:void 0;if(!(r in t)){n=`JSON missing required field: '${r}'`;break}const s=t[r];if(i&&typeof s!==i){n=`JSON field '${r}' must be a ${i}.`;break}if(a!==void 0&&s!==a.value){n=`Expected '${r}' field to equal '${a.value}'`;break}}if(n)throw new Le(Ee.INVALID_ARGUMENT,n);return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Rk=-62135596800,kk=1e6;class ze{static now(){return ze.fromMillis(Date.now())}static fromDate(e){return ze.fromMillis(e.getTime())}static fromMillis(e){const n=Math.floor(e/1e3),r=Math.floor((e-1e3*n)*kk);return new ze(n,r)}constructor(e,n){if(this.seconds=e,this.nanoseconds=n,n<0)throw new Le(Ee.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(n>=1e9)throw new Le(Ee.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(e<Rk)throw new Le(Ee.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new Le(Ee.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/kk}_compareTo(e){return this.seconds===e.seconds?ft(this.nanoseconds,e.nanoseconds):ft(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{type:ze._jsonSchemaVersion,seconds:this.seconds,nanoseconds:this.nanoseconds}}static fromJSON(e){if(Ag(e,ze._jsonSchema))return new ze(e.seconds,e.nanoseconds)}valueOf(){const e=this.seconds-Rk;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}ze._jsonSchemaVersion="firestore/timestamp/1.0",ze._jsonSchema={type:br("string",ze._jsonSchemaVersion),seconds:br("number"),nanoseconds:br("number")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rt{static fromTimestamp(e){return new rt(e)}static min(){return new rt(new ze(0,0))}static max(){return new rt(new ze(253402300799,999999999))}constructor(e){this.timestamp=e}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const xh=-1;class _0{constructor(e,n,r,i){this.indexId=e,this.collectionGroup=n,this.fields=r,this.indexState=i}}function CS(t){return t.fields.find((e=>e.kind===2))}function sd(t){return t.fields.filter((e=>e.kind!==2))}_0.UNKNOWN_ID=-1;class Yv{constructor(e,n){this.fieldPath=e,this.kind=n}}class qp{constructor(e,n){this.sequenceNumber=e,this.offset=n}static empty(){return new qp(0,qa.min())}}function uV(t,e){const n=t.toTimestamp().seconds,r=t.toTimestamp().nanoseconds+1,i=rt.fromTimestamp(r===1e9?new ze(n+1,0):new ze(n,r));return new qa(i,Be.empty(),e)}function cV(t){return new qa(t.readTime,t.key,xh)}class qa{constructor(e,n,r){this.readTime=e,this.documentKey=n,this.largestBatchId=r}static min(){return new qa(rt.min(),Be.empty(),xh)}static max(){return new qa(rt.max(),Be.empty(),xh)}}function CA(t,e){let n=t.readTime.compareTo(e.readTime);return n!==0?n:(n=Be.comparator(t.documentKey,e.documentKey),n!==0?n:ft(t.largestBatchId,e.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const dV="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class fV{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach((e=>e()))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function pc(t){if(t.code!==Ee.FAILED_PRECONDITION||t.message!==dV)throw t;ke("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class de{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e((n=>{this.isDone=!0,this.result=n,this.nextCallback&&this.nextCallback(n)}),(n=>{this.isDone=!0,this.error=n,this.catchCallback&&this.catchCallback(n)}))}catch(e){return this.next(void 0,e)}next(e,n){return this.callbackAttached&&Ge(59440),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(n,this.error):this.wrapSuccess(e,this.result):new de(((r,i)=>{this.nextCallback=a=>{this.wrapSuccess(e,a).next(r,i)},this.catchCallback=a=>{this.wrapFailure(n,a).next(r,i)}}))}toPromise(){return new Promise(((e,n)=>{this.next(e,n)}))}wrapUserFunction(e){try{const n=e();return n instanceof de?n:de.resolve(n)}catch(n){return de.reject(n)}}wrapSuccess(e,n){return e?this.wrapUserFunction((()=>e(n))):de.resolve(n)}wrapFailure(e,n){return e?this.wrapUserFunction((()=>e(n))):de.reject(n)}static resolve(e){return new de(((n,r)=>{n(e)}))}static reject(e){return new de(((n,r)=>{r(e)}))}static waitFor(e){return new de(((n,r)=>{let i=0,a=0,s=!1;e.forEach((l=>{++i,l.next((()=>{++a,s&&a===i&&n()}),(c=>r(c)))})),s=!0,a===i&&n()}))}static or(e){let n=de.resolve(!1);for(const r of e)n=n.next((i=>i?de.resolve(i):r()));return n}static forEach(e,n){const r=[];return e.forEach(((i,a)=>{r.push(n.call(this,i,a))})),this.waitFor(r)}static mapArray(e,n){return new de(((r,i)=>{const a=e.length,s=new Array(a);let l=0;for(let c=0;c<a;c++){const h=c;n(e[h]).next((p=>{s[h]=p,++l,l===a&&r(s)}),(p=>i(p)))}}))}static doWhile(e,n){return new de(((r,i)=>{const a=()=>{e()===!0?n().next((()=>{a()}),i):r()};a()}))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ra="SimpleDb";class a_{static open(e,n,r,i){try{return new a_(n,e.transaction(i,r))}catch(a){throw new Cp(n,a)}}constructor(e,n){this.action=e,this.transaction=n,this.aborted=!1,this.S=new qs,this.transaction.oncomplete=()=>{this.S.resolve()},this.transaction.onabort=()=>{n.error?this.S.reject(new Cp(e,n.error)):this.S.resolve()},this.transaction.onerror=r=>{const i=IA(r.target.error);this.S.reject(new Cp(e,i))}}get D(){return this.S.promise}abort(e){e&&this.S.reject(e),this.aborted||(ke(Ra,"Aborting transaction:",e?e.message:"Client-initiated abort"),this.aborted=!0,this.transaction.abort())}C(){const e=this.transaction;this.aborted||typeof e.commit!="function"||e.commit()}store(e){const n=this.transaction.objectStore(e);return new dW(n)}}class Ju{static delete(e){return ke(Ra,"Removing database:",e),dd(r3().indexedDB.deleteDatabase(e)).toPromise()}static v(){if(!d3())return!1;if(Ju.F())return!0;const e=Nr(),n=Ju.M(e),r=0<n&&n<10,i=hV(e),a=0<i&&i<4.5;return!(e.indexOf("MSIE ")>0||e.indexOf("Trident/")>0||e.indexOf("Edge/")>0||r||a)}static F(){var e;return typeof process<"u"&&((e=process.__PRIVATE_env)==null?void 0:e.__PRIVATE_USE_MOCK_PERSISTENCE)==="YES"}static O(e,n){return e.store(n)}static M(e){const n=e.match(/i(?:phone|pad|pod) os ([\d_]+)/i),r=n?n[1].split("_").slice(0,2).join("."):"-1";return Number(r)}constructor(e,n,r){this.name=e,this.version=n,this.N=r,this.B=null,Ju.M(Nr())===12.2&&or("Firestore persistence suffers from a bug in iOS 12.2 Safari that may cause your app to stop working. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.")}async L(e){return this.db||(ke(Ra,"Opening database:",this.name),this.db=await new Promise(((n,r)=>{const i=indexedDB.open(this.name,this.version);i.onsuccess=a=>{const s=a.target.result;n(s)},i.onblocked=()=>{r(new Cp(e,"Cannot upgrade IndexedDB schema while another tab is open. Close all tabs that access Firestore and reload this page to proceed."))},i.onerror=a=>{const s=a.target.error;s.name==="VersionError"?r(new Le(Ee.FAILED_PRECONDITION,"A newer version of the Firestore SDK was previously used and so the persisted data is not compatible with the version of the SDK you are now using. The SDK will operate with persistence disabled. If you need persistence, please re-upgrade to a newer version of the SDK or else clear the persisted IndexedDB data for your app to start fresh.")):s.name==="InvalidStateError"?r(new Le(Ee.FAILED_PRECONDITION,"Unable to open an IndexedDB connection. This could be due to running in a private browsing session on a browser whose private browsing sessions do not support IndexedDB: "+s)):r(new Cp(e,s))},i.onupgradeneeded=a=>{ke(Ra,'Database "'+this.name+'" requires upgrade from version:',a.oldVersion);const s=a.target.result;this.N.k(s,i.transaction,a.oldVersion,this.version).next((()=>{ke(Ra,"Database upgrade to version "+this.version+" complete")}))}}))),this.q&&(this.db.onversionchange=n=>this.q(n)),this.db}$(e){this.q=e,this.db&&(this.db.onversionchange=n=>e(n))}async runTransaction(e,n,r,i){const a=n==="readonly";let s=0;for(;;){++s;try{this.db=await this.L(e);const l=a_.open(this.db,e,a?"readonly":"readwrite",r),c=i(l).next((h=>(l.C(),h))).catch((h=>(l.abort(h),de.reject(h)))).toPromise();return c.catch((()=>{})),await l.D,c}catch(l){const c=l,h=c.name!=="FirebaseError"&&s<3;if(ke(Ra,"Transaction failed with error:",c.message,"Retrying:",h),this.close(),!h)return Promise.reject(c)}}}close(){this.db&&this.db.close(),this.db=void 0}}function hV(t){const e=t.match(/Android ([\d.]+)/i),n=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(n)}class cW{constructor(e){this.U=e,this.K=!1,this.W=null}get isDone(){return this.K}get G(){return this.W}set cursor(e){this.U=e}done(){this.K=!0}j(e){this.W=e}delete(){return dd(this.U.delete())}}class Cp extends Le{constructor(e,n){super(Ee.UNAVAILABLE,`IndexedDB transaction '${e}' failed: ${n}`),this.name="IndexedDbTransactionError"}}function gc(t){return t.name==="IndexedDbTransactionError"}class dW{constructor(e){this.store=e}put(e,n){let r;return n!==void 0?(ke(Ra,"PUT",this.store.name,e,n),r=this.store.put(n,e)):(ke(Ra,"PUT",this.store.name,"<auto-key>",e),r=this.store.put(e)),dd(r)}add(e){return ke(Ra,"ADD",this.store.name,e,e),dd(this.store.add(e))}get(e){return dd(this.store.get(e)).next((n=>(n===void 0&&(n=null),ke(Ra,"GET",this.store.name,e,n),n)))}delete(e){return ke(Ra,"DELETE",this.store.name,e),dd(this.store.delete(e))}count(){return ke(Ra,"COUNT",this.store.name),dd(this.store.count())}J(e,n){const r=this.options(e,n),i=r.index?this.store.index(r.index):this.store;if(typeof i.getAll=="function"){const a=i.getAll(r.range);return new de(((s,l)=>{a.onerror=c=>{l(c.target.error)},a.onsuccess=c=>{s(c.target.result)}}))}{const a=this.cursor(r),s=[];return this.H(a,((l,c)=>{s.push(c)})).next((()=>s))}}Y(e,n){const r=this.store.getAll(e,n===null?void 0:n);return new de(((i,a)=>{r.onerror=s=>{a(s.target.error)},r.onsuccess=s=>{i(s.target.result)}}))}Z(e,n){ke(Ra,"DELETE ALL",this.store.name);const r=this.options(e,n);r.X=!1;const i=this.cursor(r);return this.H(i,((a,s,l)=>l.delete()))}ee(e,n){let r;n?r=e:(r={},n=e);const i=this.cursor(r);return this.H(i,n)}te(e){const n=this.cursor({});return new de(((r,i)=>{n.onerror=a=>{const s=IA(a.target.error);i(s)},n.onsuccess=a=>{const s=a.target.result;s?e(s.primaryKey,s.value).next((l=>{l?s.continue():r()})):r()}}))}H(e,n){const r=[];return new de(((i,a)=>{e.onerror=s=>{a(s.target.error)},e.onsuccess=s=>{const l=s.target.result;if(!l)return void i();const c=new cW(l),h=n(l.primaryKey,l.value,c);if(h instanceof de){const p=h.catch((g=>(c.done(),de.reject(g))));r.push(p)}c.isDone?i():c.G===null?l.continue():l.continue(c.G)}})).next((()=>de.waitFor(r)))}options(e,n){let r;return e!==void 0&&(typeof e=="string"?r=e:n=e),{index:r,range:n}}cursor(e){let n="next";if(e.reverse&&(n="prev"),e.index){const r=this.store.index(e.index);return e.X?r.openKeyCursor(e.range,n):r.openCursor(e.range,n)}return this.store.openCursor(e.range,n)}}function dd(t){return new de(((e,n)=>{t.onsuccess=r=>{const i=r.target.result;e(i)},t.onerror=r=>{const i=IA(r.target.error);n(i)}}))}let Mk=!1;function IA(t){const e=Ju.M(Nr());if(e>=12.2&&e<13){const n="An internal error was encountered in the Indexed Database server";if(t.message.indexOf(n)>=0){const r=new Le("internal",`IOS_INDEXEDDB_BUG1: IndexedDb has thrown '${n}'. This is likely due to an unavoidable bug in iOS. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.`);return Mk||(Mk=!0,setTimeout((()=>{throw r}),0)),r}}return t}const Ip="IndexBackfiller";class fW{constructor(e,n){this.asyncQueue=e,this.ne=n,this.task=null}start(){this.re(15e3)}stop(){this.task&&(this.task.cancel(),this.task=null)}get started(){return this.task!==null}re(e){ke(Ip,`Scheduled in ${e}ms`),this.task=this.asyncQueue.enqueueAfterDelay("index_backfill",e,(async()=>{this.task=null;try{const n=await this.ne.ie();ke(Ip,`Documents written: ${n}`)}catch(n){gc(n)?ke(Ip,"Ignoring IndexedDB error during index backfill: ",n):await pc(n)}await this.re(6e4)}))}}class hW{constructor(e,n){this.localStore=e,this.persistence=n}async ie(e=50){return this.persistence.runTransaction("Backfill Indexes","readwrite-primary",(n=>this.se(n,e)))}se(e,n){const r=new Set;let i=n,a=!0;return de.doWhile((()=>a===!0&&i>0),(()=>this.localStore.indexManager.getNextCollectionGroupToUpdate(e).next((s=>{if(s!==null&&!r.has(s))return ke(Ip,`Processing collection: ${s}`),this.oe(e,s,i).next((l=>{i-=l,r.add(s)}));a=!1})))).next((()=>n-i))}oe(e,n,r){return this.localStore.indexManager.getMinOffsetFromCollectionGroup(e,n).next((i=>this.localStore.localDocuments.getNextDocuments(e,n,i,r).next((a=>{const s=a.changes;return this.localStore.indexManager.updateIndexEntries(e,s).next((()=>this._e(i,a))).next((l=>(ke(Ip,`Updating offset: ${l}`),this.localStore.indexManager.updateCollectionGroup(e,n,l)))).next((()=>s.size))}))))}_e(e,n){let r=e;return n.changes.forEach(((i,a)=>{const s=cV(a);CA(s,r)>0&&(r=s)})),new qa(r.readTime,r.documentKey,Math.max(n.batchId,e.largestBatchId))}}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ca{constructor(e,n){this.previousValue=e,n&&(n.sequenceNumberHandler=r=>this.ae(r),this.ue=r=>n.writeSequenceNumber(r))}ae(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.ue&&this.ue(e),e}}ca.ce=-1;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _d=-1;function Cg(t){return t==null}function Hp(t){return t===0&&1/t==-1/0}function mV(t){return typeof t=="number"&&Number.isInteger(t)&&!Hp(t)&&t<=Number.MAX_SAFE_INTEGER&&t>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const b0="";function Ti(t){let e="";for(let n=0;n<t.length;n++)e.length>0&&(e=Ok(e)),e=mW(t.get(n),e);return Ok(e)}function mW(t,e){let n=e;const r=t.length;for(let i=0;i<r;i++){const a=t.charAt(i);switch(a){case"\0":n+="";break;case b0:n+="";break;default:n+=a}}return n}function Ok(t){return t+b0+""}function To(t){const e=t.length;if(Qe(e>=2,64408,{path:t}),e===2)return Qe(t.charAt(0)===b0&&t.charAt(1)==="",56145,{path:t}),Ut.emptyPath();const n=e-2,r=[];let i="";for(let a=0;a<e;){const s=t.indexOf(b0,a);switch((s<0||s>n)&&Ge(50515,{path:t}),t.charAt(s+1)){case"":const l=t.substring(a,s);let c;i.length===0?c=l:(i+=l,c=i,i=""),r.push(c);break;case"":i+=t.substring(a,s),i+="\0";break;case"":i+=t.substring(a,s+1);break;default:Ge(61167,{path:t})}a=s+2}return new Ut(r)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const od="remoteDocuments",Ig="owner",Mf="owner",Gp="mutationQueues",pW="userId",Ls="mutations",jk="batchId",gd="userMutationsIndex",Lk=["userId","batchId"];/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Zv(t,e){return[t,Ti(e)]}function pV(t,e,n){return[t,Ti(e),n]}const gW={},_h="documentMutations",w0="remoteDocumentsV14",yW=["prefixPath","collectionGroup","readTime","documentId"],Jv="documentKeyIndex",vW=["prefixPath","collectionGroup","documentId"],gV="collectionGroupIndex",xW=["collectionGroup","readTime","prefixPath","documentId"],$p="remoteDocumentGlobal",IS="remoteDocumentGlobalKey",bh="targets",yV="queryTargetsIndex",_W=["canonicalId","targetId"],wh="targetDocuments",bW=["targetId","path"],NA="documentTargetsIndex",wW=["path","targetId"],E0="targetGlobalKey",bd="targetGlobal",Kp="collectionParents",EW=["collectionId","parent"],Eh="clientMetadata",TW="clientId",s_="bundles",SW="bundleId",o_="namedQueries",AW="name",PA="indexConfiguration",CW="indexId",NS="collectionGroupIndex",IW="collectionGroup",Np="indexState",NW=["indexId","uid"],vV="sequenceNumberIndex",PW=["uid","sequenceNumber"],Pp="indexEntries",DW=["indexId","uid","arrayValue","directionalValue","orderedDocumentKey","documentKey"],xV="documentKeyIndex",RW=["indexId","uid","orderedDocumentKey"],l_="documentOverlays",kW=["userId","collectionPath","documentId"],PS="collectionPathOverlayIndex",MW=["userId","collectionPath","largestBatchId"],_V="collectionGroupOverlayIndex",OW=["userId","collectionGroup","largestBatchId"],DA="globals",jW="name",bV=[Gp,Ls,_h,od,bh,Ig,bd,wh,Eh,$p,Kp,s_,o_],LW=[...bV,l_],wV=[Gp,Ls,_h,w0,bh,Ig,bd,wh,Eh,$p,Kp,s_,o_,l_],EV=wV,RA=[...EV,PA,Np,Pp],VW=RA,TV=[...RA,DA],UW=TV;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class DS extends fV{constructor(e,n){super(),this.le=e,this.currentSequenceNumber=n}}function Dr(t,e){const n=Ye(t);return Ju.O(n.le,e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Vk(t){let e=0;for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e++;return e}function yc(t,e){for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e(n,t[n])}function SV(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _n{constructor(e,n){this.comparator=e,this.root=n||ti.EMPTY}insert(e,n){return new _n(this.comparator,this.root.insert(e,n,this.comparator).copy(null,null,ti.BLACK,null,null))}remove(e){return new _n(this.comparator,this.root.remove(e,this.comparator).copy(null,null,ti.BLACK,null,null))}get(e){let n=this.root;for(;!n.isEmpty();){const r=this.comparator(e,n.key);if(r===0)return n.value;r<0?n=n.left:r>0&&(n=n.right)}return null}indexOf(e){let n=0,r=this.root;for(;!r.isEmpty();){const i=this.comparator(e,r.key);if(i===0)return n+r.left.size;i<0?r=r.left:(n+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal(((n,r)=>(e(n,r),!1)))}toString(){const e=[];return this.inorderTraversal(((n,r)=>(e.push(`${n}:${r}`),!1))),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new xv(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new xv(this.root,e,this.comparator,!1)}getReverseIterator(){return new xv(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new xv(this.root,e,this.comparator,!0)}}class xv{constructor(e,n,r,i){this.isReverse=i,this.nodeStack=[];let a=1;for(;!e.isEmpty();)if(a=n?r(e.key,n):1,n&&i&&(a*=-1),a<0)e=this.isReverse?e.left:e.right;else{if(a===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const n={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return n}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class ti{constructor(e,n,r,i,a){this.key=e,this.value=n,this.color=r??ti.RED,this.left=i??ti.EMPTY,this.right=a??ti.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,n,r,i,a){return new ti(e??this.key,n??this.value,r??this.color,i??this.left,a??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,n,r){let i=this;const a=r(e,i.key);return i=a<0?i.copy(null,null,null,i.left.insert(e,n,r),null):a===0?i.copy(null,n,null,null,null):i.copy(null,null,null,null,i.right.insert(e,n,r)),i.fixUp()}removeMin(){if(this.left.isEmpty())return ti.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,n){let r,i=this;if(n(e,i.key)<0)i.left.isEmpty()||i.left.isRed()||i.left.left.isRed()||(i=i.moveRedLeft()),i=i.copy(null,null,null,i.left.remove(e,n),null);else{if(i.left.isRed()&&(i=i.rotateRight()),i.right.isEmpty()||i.right.isRed()||i.right.left.isRed()||(i=i.moveRedRight()),n(e,i.key)===0){if(i.right.isEmpty())return ti.EMPTY;r=i.right.min(),i=i.copy(r.key,r.value,null,null,i.right.removeMin())}i=i.copy(null,null,null,null,i.right.remove(e,n))}return i.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,ti.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,ti.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),n=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,n)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw Ge(43730,{key:this.key,value:this.value});if(this.right.isRed())throw Ge(14113,{key:this.key,value:this.value});const e=this.left.check();if(e!==this.right.check())throw Ge(27949);return e+(this.isRed()?0:1)}}ti.EMPTY=null,ti.RED=!0,ti.BLACK=!1;ti.EMPTY=new class{constructor(){this.size=0}get key(){throw Ge(57766)}get value(){throw Ge(16141)}get color(){throw Ge(16727)}get left(){throw Ge(29726)}get right(){throw Ge(36894)}copy(e,n,r,i,a){return this}insert(e,n,r){return new ti(e,n)}remove(e,n){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class an{constructor(e){this.comparator=e,this.data=new _n(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal(((n,r)=>(e(n),!1)))}forEachInRange(e,n){const r=this.data.getIteratorFrom(e[0]);for(;r.hasNext();){const i=r.getNext();if(this.comparator(i.key,e[1])>=0)return;n(i.key)}}forEachWhile(e,n){let r;for(r=n!==void 0?this.data.getIteratorFrom(n):this.data.getIterator();r.hasNext();)if(!e(r.getNext().key))return}firstAfterOrEqual(e){const n=this.data.getIteratorFrom(e);return n.hasNext()?n.getNext().key:null}getIterator(){return new Uk(this.data.getIterator())}getIteratorFrom(e){return new Uk(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let n=this;return n.size<e.size&&(n=e,e=this),e.forEach((r=>{n=n.add(r)})),n}isEqual(e){if(!(e instanceof an)||this.size!==e.size)return!1;const n=this.data.getIterator(),r=e.data.getIterator();for(;n.hasNext();){const i=n.getNext().key,a=r.getNext().key;if(this.comparator(i,a)!==0)return!1}return!0}toArray(){const e=[];return this.forEach((n=>{e.push(n)})),e}toString(){const e=[];return this.forEach((n=>e.push(n))),"SortedSet("+e.toString()+")"}copy(e){const n=new an(this.comparator);return n.data=e,n}}class Uk{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}function Of(t){return t.hasNext()?t.getNext():void 0}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class da{constructor(e){this.fields=e,e.sort(Hn.comparator)}static empty(){return new da([])}unionWith(e){let n=new an(Hn.comparator);for(const r of this.fields)n=n.add(r);for(const r of e)n=n.add(r);return new da(n.toArray())}covers(e){for(const n of this.fields)if(n.isPrefixOf(e))return!0;return!1}isEqual(e){return vh(this.fields,e.fields,((n,r)=>n.isEqual(r)))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class AV extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cr{constructor(e){this.binaryString=e}static fromBase64String(e){const n=(function(i){try{return atob(i)}catch(a){throw typeof DOMException<"u"&&a instanceof DOMException?new AV("Invalid base64 string: "+a):a}})(e);return new cr(n)}static fromUint8Array(e){const n=(function(i){let a="";for(let s=0;s<i.length;++s)a+=String.fromCharCode(i[s]);return a})(e);return new cr(n)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return(function(n){return btoa(n)})(this.binaryString)}toUint8Array(){return(function(n){const r=new Uint8Array(n.length);for(let i=0;i<n.length;i++)r[i]=n.charCodeAt(i);return r})(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return ft(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}cr.EMPTY_BYTE_STRING=new cr("");const FW=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Pl(t){if(Qe(!!t,39018),typeof t=="string"){let e=0;const n=FW.exec(t);if(Qe(!!n,46558,{timestamp:t}),n[1]){let i=n[1];i=(i+"000000000").substr(0,9),e=Number(i)}const r=new Date(t);return{seconds:Math.floor(r.getTime()/1e3),nanos:e}}return{seconds:On(t.seconds),nanos:On(t.nanos)}}function On(t){return typeof t=="number"?t:typeof t=="string"?Number(t):0}function Dl(t){return typeof t=="string"?cr.fromBase64String(t):cr.fromUint8Array(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const CV="server_timestamp",IV="__type__",NV="__previous_value__",PV="__local_write_time__";function kA(t){var n,r;return((r=(((n=t==null?void 0:t.mapValue)==null?void 0:n.fields)||{})[IV])==null?void 0:r.stringValue)===CV}function u_(t){const e=t.mapValue.fields[NV];return kA(e)?u_(e):e}function Wp(t){const e=Pl(t.mapValue.fields[PV].timestampValue);return new ze(e.seconds,e.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class BW{constructor(e,n,r,i,a,s,l,c,h,p){this.databaseId=e,this.appId=n,this.persistenceKey=r,this.host=i,this.ssl=a,this.forceLongPolling=s,this.autoDetectLongPolling=l,this.longPollingOptions=c,this.useFetchStreams=h,this.isUsingEmulator=p}}const T0="(default)";class Dd{constructor(e,n){this.projectId=e,this.database=n||T0}static empty(){return new Dd("","")}get isDefaultDatabase(){return this.database===T0}isEqual(e){return e instanceof Dd&&e.projectId===this.projectId&&e.database===this.database}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const MA="__type__",DV="__max__",Gu={mapValue:{fields:{__type__:{stringValue:DV}}}},OA="__vector__",Th="value",Qv={nullValue:"NULL_VALUE"};function nc(t){return"nullValue"in t?0:"booleanValue"in t?1:"integerValue"in t||"doubleValue"in t?2:"timestampValue"in t?3:"stringValue"in t?5:"bytesValue"in t?6:"referenceValue"in t?7:"geoPointValue"in t?8:"arrayValue"in t?9:"mapValue"in t?kA(t)?4:RV(t)?9007199254740991:c_(t)?10:11:Ge(28295,{value:t})}function Mo(t,e){if(t===e)return!0;const n=nc(t);if(n!==nc(e))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return t.booleanValue===e.booleanValue;case 4:return Wp(t).isEqual(Wp(e));case 3:return(function(i,a){if(typeof i.timestampValue=="string"&&typeof a.timestampValue=="string"&&i.timestampValue.length===a.timestampValue.length)return i.timestampValue===a.timestampValue;const s=Pl(i.timestampValue),l=Pl(a.timestampValue);return s.seconds===l.seconds&&s.nanos===l.nanos})(t,e);case 5:return t.stringValue===e.stringValue;case 6:return(function(i,a){return Dl(i.bytesValue).isEqual(Dl(a.bytesValue))})(t,e);case 7:return t.referenceValue===e.referenceValue;case 8:return(function(i,a){return On(i.geoPointValue.latitude)===On(a.geoPointValue.latitude)&&On(i.geoPointValue.longitude)===On(a.geoPointValue.longitude)})(t,e);case 2:return(function(i,a){if("integerValue"in i&&"integerValue"in a)return On(i.integerValue)===On(a.integerValue);if("doubleValue"in i&&"doubleValue"in a){const s=On(i.doubleValue),l=On(a.doubleValue);return s===l?Hp(s)===Hp(l):isNaN(s)&&isNaN(l)}return!1})(t,e);case 9:return vh(t.arrayValue.values||[],e.arrayValue.values||[],Mo);case 10:case 11:return(function(i,a){const s=i.mapValue.fields||{},l=a.mapValue.fields||{};if(Vk(s)!==Vk(l))return!1;for(const c in s)if(s.hasOwnProperty(c)&&(l[c]===void 0||!Mo(s[c],l[c])))return!1;return!0})(t,e);default:return Ge(52216,{left:t})}}function Yp(t,e){return(t.values||[]).find((n=>Mo(n,e)))!==void 0}function rc(t,e){if(t===e)return 0;const n=nc(t),r=nc(e);if(n!==r)return ft(n,r);switch(n){case 0:case 9007199254740991:return 0;case 1:return ft(t.booleanValue,e.booleanValue);case 2:return(function(a,s){const l=On(a.integerValue||a.doubleValue),c=On(s.integerValue||s.doubleValue);return l<c?-1:l>c?1:l===c?0:isNaN(l)?isNaN(c)?0:-1:1})(t,e);case 3:return Fk(t.timestampValue,e.timestampValue);case 4:return Fk(Wp(t),Wp(e));case 5:return AS(t.stringValue,e.stringValue);case 6:return(function(a,s){const l=Dl(a),c=Dl(s);return l.compareTo(c)})(t.bytesValue,e.bytesValue);case 7:return(function(a,s){const l=a.split("/"),c=s.split("/");for(let h=0;h<l.length&&h<c.length;h++){const p=ft(l[h],c[h]);if(p!==0)return p}return ft(l.length,c.length)})(t.referenceValue,e.referenceValue);case 8:return(function(a,s){const l=ft(On(a.latitude),On(s.latitude));return l!==0?l:ft(On(a.longitude),On(s.longitude))})(t.geoPointValue,e.geoPointValue);case 9:return Bk(t.arrayValue,e.arrayValue);case 10:return(function(a,s){var x,b,C,A;const l=a.fields||{},c=s.fields||{},h=(x=l[Th])==null?void 0:x.arrayValue,p=(b=c[Th])==null?void 0:b.arrayValue,g=ft(((C=h==null?void 0:h.values)==null?void 0:C.length)||0,((A=p==null?void 0:p.values)==null?void 0:A.length)||0);return g!==0?g:Bk(h,p)})(t.mapValue,e.mapValue);case 11:return(function(a,s){if(a===Gu.mapValue&&s===Gu.mapValue)return 0;if(a===Gu.mapValue)return 1;if(s===Gu.mapValue)return-1;const l=a.fields||{},c=Object.keys(l),h=s.fields||{},p=Object.keys(h);c.sort(),p.sort();for(let g=0;g<c.length&&g<p.length;++g){const x=AS(c[g],p[g]);if(x!==0)return x;const b=rc(l[c[g]],h[p[g]]);if(b!==0)return b}return ft(c.length,p.length)})(t.mapValue,e.mapValue);default:throw Ge(23264,{he:n})}}function Fk(t,e){if(typeof t=="string"&&typeof e=="string"&&t.length===e.length)return ft(t,e);const n=Pl(t),r=Pl(e),i=ft(n.seconds,r.seconds);return i!==0?i:ft(n.nanos,r.nanos)}function Bk(t,e){const n=t.values||[],r=e.values||[];for(let i=0;i<n.length&&i<r.length;++i){const a=rc(n[i],r[i]);if(a)return a}return ft(n.length,r.length)}function Sh(t){return RS(t)}function RS(t){return"nullValue"in t?"null":"booleanValue"in t?""+t.booleanValue:"integerValue"in t?""+t.integerValue:"doubleValue"in t?""+t.doubleValue:"timestampValue"in t?(function(n){const r=Pl(n);return`time(${r.seconds},${r.nanos})`})(t.timestampValue):"stringValue"in t?t.stringValue:"bytesValue"in t?(function(n){return Dl(n).toBase64()})(t.bytesValue):"referenceValue"in t?(function(n){return Be.fromName(n).toString()})(t.referenceValue):"geoPointValue"in t?(function(n){return`geo(${n.latitude},${n.longitude})`})(t.geoPointValue):"arrayValue"in t?(function(n){let r="[",i=!0;for(const a of n.values||[])i?i=!1:r+=",",r+=RS(a);return r+"]"})(t.arrayValue):"mapValue"in t?(function(n){const r=Object.keys(n.fields||{}).sort();let i="{",a=!0;for(const s of r)a?a=!1:i+=",",i+=`${s}:${RS(n.fields[s])}`;return i+"}"})(t.mapValue):Ge(61005,{value:t})}function Xv(t){switch(nc(t)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:const e=u_(t);return e?16+Xv(e):16;case 5:return 2*t.stringValue.length;case 6:return Dl(t.bytesValue).approximateByteSize();case 7:return t.referenceValue.length;case 9:return(function(r){return(r.values||[]).reduce(((i,a)=>i+Xv(a)),0)})(t.arrayValue);case 10:case 11:return(function(r){let i=0;return yc(r.fields,((a,s)=>{i+=a.length+Xv(s)})),i})(t.mapValue);default:throw Ge(13486,{value:t})}}function Zp(t,e){return{referenceValue:`projects/${t.projectId}/databases/${t.database}/documents/${e.path.canonicalString()}`}}function kS(t){return!!t&&"integerValue"in t}function Jp(t){return!!t&&"arrayValue"in t}function zk(t){return!!t&&"nullValue"in t}function qk(t){return!!t&&"doubleValue"in t&&isNaN(Number(t.doubleValue))}function e0(t){return!!t&&"mapValue"in t}function c_(t){var n,r;return((r=(((n=t==null?void 0:t.mapValue)==null?void 0:n.fields)||{})[MA])==null?void 0:r.stringValue)===OA}function Dp(t){if(t.geoPointValue)return{geoPointValue:{...t.geoPointValue}};if(t.timestampValue&&typeof t.timestampValue=="object")return{timestampValue:{...t.timestampValue}};if(t.mapValue){const e={mapValue:{fields:{}}};return yc(t.mapValue.fields,((n,r)=>e.mapValue.fields[n]=Dp(r))),e}if(t.arrayValue){const e={arrayValue:{values:[]}};for(let n=0;n<(t.arrayValue.values||[]).length;++n)e.arrayValue.values[n]=Dp(t.arrayValue.values[n]);return e}return{...t}}function RV(t){return(((t.mapValue||{}).fields||{}).__type__||{}).stringValue===DV}const kV={mapValue:{fields:{[MA]:{stringValue:OA},[Th]:{arrayValue:{}}}}};function zW(t){return"nullValue"in t?Qv:"booleanValue"in t?{booleanValue:!1}:"integerValue"in t||"doubleValue"in t?{doubleValue:NaN}:"timestampValue"in t?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"stringValue"in t?{stringValue:""}:"bytesValue"in t?{bytesValue:""}:"referenceValue"in t?Zp(Dd.empty(),Be.empty()):"geoPointValue"in t?{geoPointValue:{latitude:-90,longitude:-180}}:"arrayValue"in t?{arrayValue:{}}:"mapValue"in t?c_(t)?kV:{mapValue:{}}:Ge(35942,{value:t})}function qW(t){return"nullValue"in t?{booleanValue:!1}:"booleanValue"in t?{doubleValue:NaN}:"integerValue"in t||"doubleValue"in t?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"timestampValue"in t?{stringValue:""}:"stringValue"in t?{bytesValue:""}:"bytesValue"in t?Zp(Dd.empty(),Be.empty()):"referenceValue"in t?{geoPointValue:{latitude:-90,longitude:-180}}:"geoPointValue"in t?{arrayValue:{}}:"arrayValue"in t?kV:"mapValue"in t?c_(t)?{mapValue:{}}:Gu:Ge(61959,{value:t})}function Hk(t,e){const n=rc(t.value,e.value);return n!==0?n:t.inclusive&&!e.inclusive?-1:!t.inclusive&&e.inclusive?1:0}function Gk(t,e){const n=rc(t.value,e.value);return n!==0?n:t.inclusive&&!e.inclusive?1:!t.inclusive&&e.inclusive?-1:0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ni{constructor(e){this.value=e}static empty(){return new ni({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let n=this.value;for(let r=0;r<e.length-1;++r)if(n=(n.mapValue.fields||{})[e.get(r)],!e0(n))return null;return n=(n.mapValue.fields||{})[e.lastSegment()],n||null}}set(e,n){this.getFieldsMap(e.popLast())[e.lastSegment()]=Dp(n)}setAll(e){let n=Hn.emptyPath(),r={},i=[];e.forEach(((s,l)=>{if(!n.isImmediateParentOf(l)){const c=this.getFieldsMap(n);this.applyChanges(c,r,i),r={},i=[],n=l.popLast()}s?r[l.lastSegment()]=Dp(s):i.push(l.lastSegment())}));const a=this.getFieldsMap(n);this.applyChanges(a,r,i)}delete(e){const n=this.field(e.popLast());e0(n)&&n.mapValue.fields&&delete n.mapValue.fields[e.lastSegment()]}isEqual(e){return Mo(this.value,e.value)}getFieldsMap(e){let n=this.value;n.mapValue.fields||(n.mapValue={fields:{}});for(let r=0;r<e.length;++r){let i=n.mapValue.fields[e.get(r)];e0(i)&&i.mapValue.fields||(i={mapValue:{fields:{}}},n.mapValue.fields[e.get(r)]=i),n=i}return n.mapValue.fields}applyChanges(e,n,r){yc(n,((i,a)=>e[i]=a));for(const i of r)delete e[i]}clone(){return new ni(Dp(this.value))}}function MV(t){const e=[];return yc(t.fields,((n,r)=>{const i=new Hn([n]);if(e0(r)){const a=MV(r.mapValue).fields;if(a.length===0)e.push(i);else for(const s of a)e.push(i.child(s))}else e.push(i)})),new da(e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ln{constructor(e,n,r,i,a,s,l){this.key=e,this.documentType=n,this.version=r,this.readTime=i,this.createTime=a,this.data=s,this.documentState=l}static newInvalidDocument(e){return new Ln(e,0,rt.min(),rt.min(),rt.min(),ni.empty(),0)}static newFoundDocument(e,n,r,i){return new Ln(e,1,n,rt.min(),r,i,0)}static newNoDocument(e,n){return new Ln(e,2,n,rt.min(),rt.min(),ni.empty(),0)}static newUnknownDocument(e,n){return new Ln(e,3,n,rt.min(),rt.min(),ni.empty(),2)}convertToFoundDocument(e,n){return!this.createTime.isEqual(rt.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=n,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=ni.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=ni.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=rt.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof Ln&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new Ln(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ah{constructor(e,n){this.position=e,this.inclusive=n}}function $k(t,e,n){let r=0;for(let i=0;i<t.position.length;i++){const a=e[i],s=t.position[i];if(a.field.isKeyField()?r=Be.comparator(Be.fromName(s.referenceValue),n.key):r=rc(s,n.data.field(a.field)),a.dir==="desc"&&(r*=-1),r!==0)break}return r}function Kk(t,e){if(t===null)return e===null;if(e===null||t.inclusive!==e.inclusive||t.position.length!==e.position.length)return!1;for(let n=0;n<t.position.length;n++)if(!Mo(t.position[n],e.position[n]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class S0{constructor(e,n="asc"){this.field=e,this.dir=n}}function HW(t,e){return t.dir===e.dir&&t.field.isEqual(e.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class OV{}class kt extends OV{constructor(e,n,r){super(),this.field=e,this.op=n,this.value=r}static create(e,n,r){return e.isKeyField()?n==="in"||n==="not-in"?this.createKeyFieldInFilter(e,n,r):new GW(e,n,r):n==="array-contains"?new WW(e,r):n==="in"?new BV(e,r):n==="not-in"?new YW(e,r):n==="array-contains-any"?new ZW(e,r):new kt(e,n,r)}static createKeyFieldInFilter(e,n,r){return n==="in"?new $W(e,r):new KW(e,r)}matches(e){const n=e.data.field(this.field);return this.op==="!="?n!==null&&n.nullValue===void 0&&this.matchesComparison(rc(n,this.value)):n!==null&&nc(this.value)===nc(n)&&this.matchesComparison(rc(n,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return Ge(47266,{operator:this.op})}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class rn extends OV{constructor(e,n){super(),this.filters=e,this.op=n,this.Pe=null}static create(e,n){return new rn(e,n)}matches(e){return Ch(this)?this.filters.find((n=>!n.matches(e)))===void 0:this.filters.find((n=>n.matches(e)))!==void 0}getFlattenedFilters(){return this.Pe!==null||(this.Pe=this.filters.reduce(((e,n)=>e.concat(n.getFlattenedFilters())),[])),this.Pe}getFilters(){return Object.assign([],this.filters)}}function Ch(t){return t.op==="and"}function MS(t){return t.op==="or"}function jA(t){return jV(t)&&Ch(t)}function jV(t){for(const e of t.filters)if(e instanceof rn)return!1;return!0}function OS(t){if(t instanceof kt)return t.field.canonicalString()+t.op.toString()+Sh(t.value);if(jA(t))return t.filters.map((e=>OS(e))).join(",");{const e=t.filters.map((n=>OS(n))).join(",");return`${t.op}(${e})`}}function LV(t,e){return t instanceof kt?(function(r,i){return i instanceof kt&&r.op===i.op&&r.field.isEqual(i.field)&&Mo(r.value,i.value)})(t,e):t instanceof rn?(function(r,i){return i instanceof rn&&r.op===i.op&&r.filters.length===i.filters.length?r.filters.reduce(((a,s,l)=>a&&LV(s,i.filters[l])),!0):!1})(t,e):void Ge(19439)}function VV(t,e){const n=t.filters.concat(e);return rn.create(n,t.op)}function UV(t){return t instanceof kt?(function(n){return`${n.field.canonicalString()} ${n.op} ${Sh(n.value)}`})(t):t instanceof rn?(function(n){return n.op.toString()+" {"+n.getFilters().map(UV).join(" ,")+"}"})(t):"Filter"}class GW extends kt{constructor(e,n,r){super(e,n,r),this.key=Be.fromName(r.referenceValue)}matches(e){const n=Be.comparator(e.key,this.key);return this.matchesComparison(n)}}class $W extends kt{constructor(e,n){super(e,"in",n),this.keys=FV("in",n)}matches(e){return this.keys.some((n=>n.isEqual(e.key)))}}class KW extends kt{constructor(e,n){super(e,"not-in",n),this.keys=FV("not-in",n)}matches(e){return!this.keys.some((n=>n.isEqual(e.key)))}}function FV(t,e){var n;return(((n=e.arrayValue)==null?void 0:n.values)||[]).map((r=>Be.fromName(r.referenceValue)))}class WW extends kt{constructor(e,n){super(e,"array-contains",n)}matches(e){const n=e.data.field(this.field);return Jp(n)&&Yp(n.arrayValue,this.value)}}class BV extends kt{constructor(e,n){super(e,"in",n)}matches(e){const n=e.data.field(this.field);return n!==null&&Yp(this.value.arrayValue,n)}}class YW extends kt{constructor(e,n){super(e,"not-in",n)}matches(e){if(Yp(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const n=e.data.field(this.field);return n!==null&&n.nullValue===void 0&&!Yp(this.value.arrayValue,n)}}class ZW extends kt{constructor(e,n){super(e,"array-contains-any",n)}matches(e){const n=e.data.field(this.field);return!(!Jp(n)||!n.arrayValue.values)&&n.arrayValue.values.some((r=>Yp(this.value.arrayValue,r)))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class JW{constructor(e,n=null,r=[],i=[],a=null,s=null,l=null){this.path=e,this.collectionGroup=n,this.orderBy=r,this.filters=i,this.limit=a,this.startAt=s,this.endAt=l,this.Te=null}}function jS(t,e=null,n=[],r=[],i=null,a=null,s=null){return new JW(t,e,n,r,i,a,s)}function Rd(t){const e=Ye(t);if(e.Te===null){let n=e.path.canonicalString();e.collectionGroup!==null&&(n+="|cg:"+e.collectionGroup),n+="|f:",n+=e.filters.map((r=>OS(r))).join(","),n+="|ob:",n+=e.orderBy.map((r=>(function(a){return a.field.canonicalString()+a.dir})(r))).join(","),Cg(e.limit)||(n+="|l:",n+=e.limit),e.startAt&&(n+="|lb:",n+=e.startAt.inclusive?"b:":"a:",n+=e.startAt.position.map((r=>Sh(r))).join(",")),e.endAt&&(n+="|ub:",n+=e.endAt.inclusive?"a:":"b:",n+=e.endAt.position.map((r=>Sh(r))).join(",")),e.Te=n}return e.Te}function Ng(t,e){if(t.limit!==e.limit||t.orderBy.length!==e.orderBy.length)return!1;for(let n=0;n<t.orderBy.length;n++)if(!HW(t.orderBy[n],e.orderBy[n]))return!1;if(t.filters.length!==e.filters.length)return!1;for(let n=0;n<t.filters.length;n++)if(!LV(t.filters[n],e.filters[n]))return!1;return t.collectionGroup===e.collectionGroup&&!!t.path.isEqual(e.path)&&!!Kk(t.startAt,e.startAt)&&Kk(t.endAt,e.endAt)}function A0(t){return Be.isDocumentKey(t.path)&&t.collectionGroup===null&&t.filters.length===0}function C0(t,e){return t.filters.filter((n=>n instanceof kt&&n.field.isEqual(e)))}function Wk(t,e,n){let r=Qv,i=!0;for(const a of C0(t,e)){let s=Qv,l=!0;switch(a.op){case"<":case"<=":s=zW(a.value);break;case"==":case"in":case">=":s=a.value;break;case">":s=a.value,l=!1;break;case"!=":case"not-in":s=Qv}Hk({value:r,inclusive:i},{value:s,inclusive:l})<0&&(r=s,i=l)}if(n!==null){for(let a=0;a<t.orderBy.length;++a)if(t.orderBy[a].field.isEqual(e)){const s=n.position[a];Hk({value:r,inclusive:i},{value:s,inclusive:n.inclusive})<0&&(r=s,i=n.inclusive);break}}return{value:r,inclusive:i}}function Yk(t,e,n){let r=Gu,i=!0;for(const a of C0(t,e)){let s=Gu,l=!0;switch(a.op){case">=":case">":s=qW(a.value),l=!1;break;case"==":case"in":case"<=":s=a.value;break;case"<":s=a.value,l=!1;break;case"!=":case"not-in":s=Gu}Gk({value:r,inclusive:i},{value:s,inclusive:l})>0&&(r=s,i=l)}if(n!==null){for(let a=0;a<t.orderBy.length;++a)if(t.orderBy[a].field.isEqual(e)){const s=n.position[a];Gk({value:r,inclusive:i},{value:s,inclusive:n.inclusive})>0&&(r=s,i=n.inclusive);break}}return{value:r,inclusive:i}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Pg{constructor(e,n=null,r=[],i=[],a=null,s="F",l=null,c=null){this.path=e,this.collectionGroup=n,this.explicitOrderBy=r,this.filters=i,this.limit=a,this.limitType=s,this.startAt=l,this.endAt=c,this.Ie=null,this.Ee=null,this.de=null,this.startAt,this.endAt}}function zV(t,e,n,r,i,a,s,l){return new Pg(t,e,n,r,i,a,s,l)}function d_(t){return new Pg(t)}function Zk(t){return t.filters.length===0&&t.limit===null&&t.startAt==null&&t.endAt==null&&(t.explicitOrderBy.length===0||t.explicitOrderBy.length===1&&t.explicitOrderBy[0].field.isKeyField())}function qV(t){return t.collectionGroup!==null}function Rp(t){const e=Ye(t);if(e.Ie===null){e.Ie=[];const n=new Set;for(const a of e.explicitOrderBy)e.Ie.push(a),n.add(a.field.canonicalString());const r=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(s){let l=new an(Hn.comparator);return s.filters.forEach((c=>{c.getFlattenedFilters().forEach((h=>{h.isInequality()&&(l=l.add(h.field))}))})),l})(e).forEach((a=>{n.has(a.canonicalString())||a.isKeyField()||e.Ie.push(new S0(a,r))})),n.has(Hn.keyField().canonicalString())||e.Ie.push(new S0(Hn.keyField(),r))}return e.Ie}function Fa(t){const e=Ye(t);return e.Ee||(e.Ee=QW(e,Rp(t))),e.Ee}function QW(t,e){if(t.limitType==="F")return jS(t.path,t.collectionGroup,e,t.filters,t.limit,t.startAt,t.endAt);{e=e.map((i=>{const a=i.dir==="desc"?"asc":"desc";return new S0(i.field,a)}));const n=t.endAt?new Ah(t.endAt.position,t.endAt.inclusive):null,r=t.startAt?new Ah(t.startAt.position,t.startAt.inclusive):null;return jS(t.path,t.collectionGroup,e,t.filters,t.limit,n,r)}}function LS(t,e){const n=t.filters.concat([e]);return new Pg(t.path,t.collectionGroup,t.explicitOrderBy.slice(),n,t.limit,t.limitType,t.startAt,t.endAt)}function VS(t,e,n){return new Pg(t.path,t.collectionGroup,t.explicitOrderBy.slice(),t.filters.slice(),e,n,t.startAt,t.endAt)}function f_(t,e){return Ng(Fa(t),Fa(e))&&t.limitType===e.limitType}function HV(t){return`${Rd(Fa(t))}|lt:${t.limitType}`}function Hf(t){return`Query(target=${(function(n){let r=n.path.canonicalString();return n.collectionGroup!==null&&(r+=" collectionGroup="+n.collectionGroup),n.filters.length>0&&(r+=`, filters: [${n.filters.map((i=>UV(i))).join(", ")}]`),Cg(n.limit)||(r+=", limit: "+n.limit),n.orderBy.length>0&&(r+=`, orderBy: [${n.orderBy.map((i=>(function(s){return`${s.field.canonicalString()} (${s.dir})`})(i))).join(", ")}]`),n.startAt&&(r+=", startAt: ",r+=n.startAt.inclusive?"b:":"a:",r+=n.startAt.position.map((i=>Sh(i))).join(",")),n.endAt&&(r+=", endAt: ",r+=n.endAt.inclusive?"a:":"b:",r+=n.endAt.position.map((i=>Sh(i))).join(",")),`Target(${r})`})(Fa(t))}; limitType=${t.limitType})`}function Dg(t,e){return e.isFoundDocument()&&(function(r,i){const a=i.key.path;return r.collectionGroup!==null?i.key.hasCollectionId(r.collectionGroup)&&r.path.isPrefixOf(a):Be.isDocumentKey(r.path)?r.path.isEqual(a):r.path.isImmediateParentOf(a)})(t,e)&&(function(r,i){for(const a of Rp(r))if(!a.field.isKeyField()&&i.data.field(a.field)===null)return!1;return!0})(t,e)&&(function(r,i){for(const a of r.filters)if(!a.matches(i))return!1;return!0})(t,e)&&(function(r,i){return!(r.startAt&&!(function(s,l,c){const h=$k(s,l,c);return s.inclusive?h<=0:h<0})(r.startAt,Rp(r),i)||r.endAt&&!(function(s,l,c){const h=$k(s,l,c);return s.inclusive?h>=0:h>0})(r.endAt,Rp(r),i))})(t,e)}function GV(t){return t.collectionGroup||(t.path.length%2==1?t.path.lastSegment():t.path.get(t.path.length-2))}function $V(t){return(e,n)=>{let r=!1;for(const i of Rp(t)){const a=XW(i,e,n);if(a!==0)return a;r=r||i.field.isKeyField()}return 0}}function XW(t,e,n){const r=t.field.isKeyField()?Be.comparator(e.key,n.key):(function(a,s,l){const c=s.data.field(a),h=l.data.field(a);return c!==null&&h!==null?rc(c,h):Ge(42886)})(t.field,e,n);switch(t.dir){case"asc":return r;case"desc":return-1*r;default:return Ge(19790,{direction:t.dir})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bl{constructor(e,n){this.mapKeyFn=e,this.equalsFn=n,this.inner={},this.innerSize=0}get(e){const n=this.mapKeyFn(e),r=this.inner[n];if(r!==void 0){for(const[i,a]of r)if(this.equalsFn(i,e))return a}}has(e){return this.get(e)!==void 0}set(e,n){const r=this.mapKeyFn(e),i=this.inner[r];if(i===void 0)return this.inner[r]=[[e,n]],void this.innerSize++;for(let a=0;a<i.length;a++)if(this.equalsFn(i[a][0],e))return void(i[a]=[e,n]);i.push([e,n]),this.innerSize++}delete(e){const n=this.mapKeyFn(e),r=this.inner[n];if(r===void 0)return!1;for(let i=0;i<r.length;i++)if(this.equalsFn(r[i][0],e))return r.length===1?delete this.inner[n]:r.splice(i,1),this.innerSize--,!0;return!1}forEach(e){yc(this.inner,((n,r)=>{for(const[i,a]of r)e(i,a)}))}isEmpty(){return SV(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const eY=new _n(Be.comparator);function La(){return eY}const KV=new _n(Be.comparator);function xp(...t){let e=KV;for(const n of t)e=e.insert(n.key,n);return e}function WV(t){let e=KV;return t.forEach(((n,r)=>e=e.insert(n,r.overlayedDocument))),e}function So(){return kp()}function YV(){return kp()}function kp(){return new Bl((t=>t.toString()),((t,e)=>t.isEqual(e)))}const tY=new _n(Be.comparator),nY=new an(Be.comparator);function Et(...t){let e=nY;for(const n of t)e=e.add(n);return e}const rY=new an(ft);function LA(){return rY}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function VA(t,e){if(t.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:Hp(e)?"-0":e}}function ZV(t){return{integerValue:""+t}}function iY(t,e){return mV(e)?ZV(e):VA(t,e)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class h_{constructor(){this._=void 0}}function aY(t,e,n){return t instanceof Ih?(function(i,a){const s={fields:{[IV]:{stringValue:CV},[PV]:{timestampValue:{seconds:i.seconds,nanos:i.nanoseconds}}}};return a&&kA(a)&&(a=u_(a)),a&&(s.fields[NV]=a),{mapValue:s}})(n,e):t instanceof Nh?QV(t,e):t instanceof Ph?XV(t,e):(function(i,a){const s=JV(i,a),l=Jk(s)+Jk(i.Ae);return kS(s)&&kS(i.Ae)?ZV(l):VA(i.serializer,l)})(t,e)}function sY(t,e,n){return t instanceof Nh?QV(t,e):t instanceof Ph?XV(t,e):n}function JV(t,e){return t instanceof Qp?(function(r){return kS(r)||(function(a){return!!a&&"doubleValue"in a})(r)})(e)?e:{integerValue:0}:null}class Ih extends h_{}class Nh extends h_{constructor(e){super(),this.elements=e}}function QV(t,e){const n=e6(e);for(const r of t.elements)n.some((i=>Mo(i,r)))||n.push(r);return{arrayValue:{values:n}}}class Ph extends h_{constructor(e){super(),this.elements=e}}function XV(t,e){let n=e6(e);for(const r of t.elements)n=n.filter((i=>!Mo(i,r)));return{arrayValue:{values:n}}}class Qp extends h_{constructor(e,n){super(),this.serializer=e,this.Ae=n}}function Jk(t){return On(t.integerValue||t.doubleValue)}function e6(t){return Jp(t)&&t.arrayValue.values?t.arrayValue.values.slice():[]}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class t6{constructor(e,n){this.field=e,this.transform=n}}function oY(t,e){return t.field.isEqual(e.field)&&(function(r,i){return r instanceof Nh&&i instanceof Nh||r instanceof Ph&&i instanceof Ph?vh(r.elements,i.elements,Mo):r instanceof Qp&&i instanceof Qp?Mo(r.Ae,i.Ae):r instanceof Ih&&i instanceof Ih})(t.transform,e.transform)}class lY{constructor(e,n){this.version=e,this.transformResults=n}}class Vn{constructor(e,n){this.updateTime=e,this.exists=n}static none(){return new Vn}static exists(e){return new Vn(void 0,e)}static updateTime(e){return new Vn(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function t0(t,e){return t.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(t.updateTime):t.exists===void 0||t.exists===e.isFoundDocument()}class m_{}function n6(t,e){if(!t.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return t.isNoDocument()?new Qh(t.key,Vn.none()):new Jh(t.key,t.data,Vn.none());{const n=t.data,r=ni.empty();let i=new an(Hn.comparator);for(let a of e.fields)if(!i.has(a)){let s=n.field(a);s===null&&a.length>1&&(a=a.popLast(),s=n.field(a)),s===null?r.delete(a):r.set(a,s),i=i.add(a)}return new zl(t.key,r,new da(i.toArray()),Vn.none())}}function uY(t,e,n){t instanceof Jh?(function(i,a,s){const l=i.value.clone(),c=Xk(i.fieldTransforms,a,s.transformResults);l.setAll(c),a.convertToFoundDocument(s.version,l).setHasCommittedMutations()})(t,e,n):t instanceof zl?(function(i,a,s){if(!t0(i.precondition,a))return void a.convertToUnknownDocument(s.version);const l=Xk(i.fieldTransforms,a,s.transformResults),c=a.data;c.setAll(r6(i)),c.setAll(l),a.convertToFoundDocument(s.version,c).setHasCommittedMutations()})(t,e,n):(function(i,a,s){a.convertToNoDocument(s.version).setHasCommittedMutations()})(0,e,n)}function Mp(t,e,n,r){return t instanceof Jh?(function(a,s,l,c){if(!t0(a.precondition,s))return l;const h=a.value.clone(),p=e2(a.fieldTransforms,c,s);return h.setAll(p),s.convertToFoundDocument(s.version,h).setHasLocalMutations(),null})(t,e,n,r):t instanceof zl?(function(a,s,l,c){if(!t0(a.precondition,s))return l;const h=e2(a.fieldTransforms,c,s),p=s.data;return p.setAll(r6(a)),p.setAll(h),s.convertToFoundDocument(s.version,p).setHasLocalMutations(),l===null?null:l.unionWith(a.fieldMask.fields).unionWith(a.fieldTransforms.map((g=>g.field)))})(t,e,n,r):(function(a,s,l){return t0(a.precondition,s)?(s.convertToNoDocument(s.version).setHasLocalMutations(),null):l})(t,e,n)}function cY(t,e){let n=null;for(const r of t.fieldTransforms){const i=e.data.field(r.field),a=JV(r.transform,i||null);a!=null&&(n===null&&(n=ni.empty()),n.set(r.field,a))}return n||null}function Qk(t,e){return t.type===e.type&&!!t.key.isEqual(e.key)&&!!t.precondition.isEqual(e.precondition)&&!!(function(r,i){return r===void 0&&i===void 0||!(!r||!i)&&vh(r,i,((a,s)=>oY(a,s)))})(t.fieldTransforms,e.fieldTransforms)&&(t.type===0?t.value.isEqual(e.value):t.type!==1||t.data.isEqual(e.data)&&t.fieldMask.isEqual(e.fieldMask))}class Jh extends m_{constructor(e,n,r,i=[]){super(),this.key=e,this.value=n,this.precondition=r,this.fieldTransforms=i,this.type=0}getFieldMask(){return null}}class zl extends m_{constructor(e,n,r,i,a=[]){super(),this.key=e,this.data=n,this.fieldMask=r,this.precondition=i,this.fieldTransforms=a,this.type=1}getFieldMask(){return this.fieldMask}}function r6(t){const e=new Map;return t.fieldMask.fields.forEach((n=>{if(!n.isEmpty()){const r=t.data.field(n);e.set(n,r)}})),e}function Xk(t,e,n){const r=new Map;Qe(t.length===n.length,32656,{Re:n.length,Ve:t.length});for(let i=0;i<n.length;i++){const a=t[i],s=a.transform,l=e.data.field(a.field);r.set(a.field,sY(s,l,n[i]))}return r}function e2(t,e,n){const r=new Map;for(const i of t){const a=i.transform,s=n.data.field(i.field);r.set(i.field,aY(a,s,e))}return r}class Qh extends m_{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class UA extends m_{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class FA{constructor(e,n,r,i){this.batchId=e,this.localWriteTime=n,this.baseMutations=r,this.mutations=i}applyToRemoteDocument(e,n){const r=n.mutationResults;for(let i=0;i<this.mutations.length;i++){const a=this.mutations[i];a.key.isEqual(e.key)&&uY(a,e,r[i])}}applyToLocalView(e,n){for(const r of this.baseMutations)r.key.isEqual(e.key)&&(n=Mp(r,e,n,this.localWriteTime));for(const r of this.mutations)r.key.isEqual(e.key)&&(n=Mp(r,e,n,this.localWriteTime));return n}applyToLocalDocumentSet(e,n){const r=YV();return this.mutations.forEach((i=>{const a=e.get(i.key),s=a.overlayedDocument;let l=this.applyToLocalView(s,a.mutatedFields);l=n.has(i.key)?null:l;const c=n6(s,l);c!==null&&r.set(i.key,c),s.isValidDocument()||s.convertToNoDocument(rt.min())})),r}keys(){return this.mutations.reduce(((e,n)=>e.add(n.key)),Et())}isEqual(e){return this.batchId===e.batchId&&vh(this.mutations,e.mutations,((n,r)=>Qk(n,r)))&&vh(this.baseMutations,e.baseMutations,((n,r)=>Qk(n,r)))}}class BA{constructor(e,n,r,i){this.batch=e,this.commitVersion=n,this.mutationResults=r,this.docVersions=i}static from(e,n,r){Qe(e.mutations.length===r.length,58842,{me:e.mutations.length,fe:r.length});let i=(function(){return tY})();const a=e.mutations;for(let s=0;s<a.length;s++)i=i.insert(a[s].key,r[s].version);return new BA(e,n,r,i)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zA{constructor(e,n){this.largestBatchId=e,this.mutation=n}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dY{constructor(e,n){this.count=e,this.unchangedNames=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var xr,jt;function i6(t){switch(t){case Ee.OK:return Ge(64938);case Ee.CANCELLED:case Ee.UNKNOWN:case Ee.DEADLINE_EXCEEDED:case Ee.RESOURCE_EXHAUSTED:case Ee.INTERNAL:case Ee.UNAVAILABLE:case Ee.UNAUTHENTICATED:return!1;case Ee.INVALID_ARGUMENT:case Ee.NOT_FOUND:case Ee.ALREADY_EXISTS:case Ee.PERMISSION_DENIED:case Ee.FAILED_PRECONDITION:case Ee.ABORTED:case Ee.OUT_OF_RANGE:case Ee.UNIMPLEMENTED:case Ee.DATA_LOSS:return!0;default:return Ge(15467,{code:t})}}function a6(t){if(t===void 0)return or("GRPC error has no .code"),Ee.UNKNOWN;switch(t){case xr.OK:return Ee.OK;case xr.CANCELLED:return Ee.CANCELLED;case xr.UNKNOWN:return Ee.UNKNOWN;case xr.DEADLINE_EXCEEDED:return Ee.DEADLINE_EXCEEDED;case xr.RESOURCE_EXHAUSTED:return Ee.RESOURCE_EXHAUSTED;case xr.INTERNAL:return Ee.INTERNAL;case xr.UNAVAILABLE:return Ee.UNAVAILABLE;case xr.UNAUTHENTICATED:return Ee.UNAUTHENTICATED;case xr.INVALID_ARGUMENT:return Ee.INVALID_ARGUMENT;case xr.NOT_FOUND:return Ee.NOT_FOUND;case xr.ALREADY_EXISTS:return Ee.ALREADY_EXISTS;case xr.PERMISSION_DENIED:return Ee.PERMISSION_DENIED;case xr.FAILED_PRECONDITION:return Ee.FAILED_PRECONDITION;case xr.ABORTED:return Ee.ABORTED;case xr.OUT_OF_RANGE:return Ee.OUT_OF_RANGE;case xr.UNIMPLEMENTED:return Ee.UNIMPLEMENTED;case xr.DATA_LOSS:return Ee.DATA_LOSS;default:return Ge(39323,{code:t})}}(jt=xr||(xr={}))[jt.OK=0]="OK",jt[jt.CANCELLED=1]="CANCELLED",jt[jt.UNKNOWN=2]="UNKNOWN",jt[jt.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",jt[jt.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",jt[jt.NOT_FOUND=5]="NOT_FOUND",jt[jt.ALREADY_EXISTS=6]="ALREADY_EXISTS",jt[jt.PERMISSION_DENIED=7]="PERMISSION_DENIED",jt[jt.UNAUTHENTICATED=16]="UNAUTHENTICATED",jt[jt.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",jt[jt.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",jt[jt.ABORTED=10]="ABORTED",jt[jt.OUT_OF_RANGE=11]="OUT_OF_RANGE",jt[jt.UNIMPLEMENTED=12]="UNIMPLEMENTED",jt[jt.INTERNAL=13]="INTERNAL",jt[jt.UNAVAILABLE=14]="UNAVAILABLE",jt[jt.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function fY(){return new TextEncoder}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const hY=new Zu([4294967295,4294967295],0);function t2(t){const e=fY().encode(t),n=new X3;return n.update(e),new Uint8Array(n.digest())}function n2(t){const e=new DataView(t.buffer),n=e.getUint32(0,!0),r=e.getUint32(4,!0),i=e.getUint32(8,!0),a=e.getUint32(12,!0);return[new Zu([n,r],0),new Zu([i,a],0)]}class qA{constructor(e,n,r){if(this.bitmap=e,this.padding=n,this.hashCount=r,n<0||n>=8)throw new _p(`Invalid padding: ${n}`);if(r<0)throw new _p(`Invalid hash count: ${r}`);if(e.length>0&&this.hashCount===0)throw new _p(`Invalid hash count: ${r}`);if(e.length===0&&n!==0)throw new _p(`Invalid padding when bitmap length is 0: ${n}`);this.ge=8*e.length-n,this.pe=Zu.fromNumber(this.ge)}ye(e,n,r){let i=e.add(n.multiply(Zu.fromNumber(r)));return i.compare(hY)===1&&(i=new Zu([i.getBits(0),i.getBits(1)],0)),i.modulo(this.pe).toNumber()}we(e){return!!(this.bitmap[Math.floor(e/8)]&1<<e%8)}mightContain(e){if(this.ge===0)return!1;const n=t2(e),[r,i]=n2(n);for(let a=0;a<this.hashCount;a++){const s=this.ye(r,i,a);if(!this.we(s))return!1}return!0}static create(e,n,r){const i=e%8==0?0:8-e%8,a=new Uint8Array(Math.ceil(e/8)),s=new qA(a,i,n);return r.forEach((l=>s.insert(l))),s}insert(e){if(this.ge===0)return;const n=t2(e),[r,i]=n2(n);for(let a=0;a<this.hashCount;a++){const s=this.ye(r,i,a);this.Se(s)}}Se(e){const n=Math.floor(e/8),r=e%8;this.bitmap[n]|=1<<r}}class _p extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Rg{constructor(e,n,r,i,a){this.snapshotVersion=e,this.targetChanges=n,this.targetMismatches=r,this.documentUpdates=i,this.resolvedLimboDocuments=a}static createSynthesizedRemoteEventForCurrentChange(e,n,r){const i=new Map;return i.set(e,kg.createSynthesizedTargetChangeForCurrentChange(e,n,r)),new Rg(rt.min(),i,new _n(ft),La(),Et())}}class kg{constructor(e,n,r,i,a){this.resumeToken=e,this.current=n,this.addedDocuments=r,this.modifiedDocuments=i,this.removedDocuments=a}static createSynthesizedTargetChangeForCurrentChange(e,n,r){return new kg(r,n,Et(),Et(),Et())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class n0{constructor(e,n,r,i){this.be=e,this.removedTargetIds=n,this.key=r,this.De=i}}class s6{constructor(e,n){this.targetId=e,this.Ce=n}}class o6{constructor(e,n,r=cr.EMPTY_BYTE_STRING,i=null){this.state=e,this.targetIds=n,this.resumeToken=r,this.cause=i}}class r2{constructor(){this.ve=0,this.Fe=i2(),this.Me=cr.EMPTY_BYTE_STRING,this.xe=!1,this.Oe=!0}get current(){return this.xe}get resumeToken(){return this.Me}get Ne(){return this.ve!==0}get Be(){return this.Oe}Le(e){e.approximateByteSize()>0&&(this.Oe=!0,this.Me=e)}ke(){let e=Et(),n=Et(),r=Et();return this.Fe.forEach(((i,a)=>{switch(a){case 0:e=e.add(i);break;case 2:n=n.add(i);break;case 1:r=r.add(i);break;default:Ge(38017,{changeType:a})}})),new kg(this.Me,this.xe,e,n,r)}qe(){this.Oe=!1,this.Fe=i2()}Qe(e,n){this.Oe=!0,this.Fe=this.Fe.insert(e,n)}$e(e){this.Oe=!0,this.Fe=this.Fe.remove(e)}Ue(){this.ve+=1}Ke(){this.ve-=1,Qe(this.ve>=0,3241,{ve:this.ve})}We(){this.Oe=!0,this.xe=!0}}class mY{constructor(e){this.Ge=e,this.ze=new Map,this.je=La(),this.Je=_v(),this.He=_v(),this.Ye=new _n(ft)}Ze(e){for(const n of e.be)e.De&&e.De.isFoundDocument()?this.Xe(n,e.De):this.et(n,e.key,e.De);for(const n of e.removedTargetIds)this.et(n,e.key,e.De)}tt(e){this.forEachTarget(e,(n=>{const r=this.nt(n);switch(e.state){case 0:this.rt(n)&&r.Le(e.resumeToken);break;case 1:r.Ke(),r.Ne||r.qe(),r.Le(e.resumeToken);break;case 2:r.Ke(),r.Ne||this.removeTarget(n);break;case 3:this.rt(n)&&(r.We(),r.Le(e.resumeToken));break;case 4:this.rt(n)&&(this.it(n),r.Le(e.resumeToken));break;default:Ge(56790,{state:e.state})}}))}forEachTarget(e,n){e.targetIds.length>0?e.targetIds.forEach(n):this.ze.forEach(((r,i)=>{this.rt(i)&&n(i)}))}st(e){const n=e.targetId,r=e.Ce.count,i=this.ot(n);if(i){const a=i.target;if(A0(a))if(r===0){const s=new Be(a.path);this.et(n,s,Ln.newNoDocument(s,rt.min()))}else Qe(r===1,20013,{expectedCount:r});else{const s=this._t(n);if(s!==r){const l=this.ut(e),c=l?this.ct(l,e,s):1;if(c!==0){this.it(n);const h=c===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Ye=this.Ye.insert(n,h)}}}}}ut(e){const n=e.Ce.unchangedNames;if(!n||!n.bits)return null;const{bits:{bitmap:r="",padding:i=0},hashCount:a=0}=n;let s,l;try{s=Dl(r).toUint8Array()}catch(c){if(c instanceof AV)return zp("Decoding the base64 bloom filter in existence filter failed ("+c.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw c}try{l=new qA(s,i,a)}catch(c){return zp(c instanceof _p?"BloomFilter error: ":"Applying bloom filter failed: ",c),null}return l.ge===0?null:l}ct(e,n,r){return n.Ce.count===r-this.Pt(e,n.targetId)?0:2}Pt(e,n){const r=this.Ge.getRemoteKeysForTarget(n);let i=0;return r.forEach((a=>{const s=this.Ge.ht(),l=`projects/${s.projectId}/databases/${s.database}/documents/${a.path.canonicalString()}`;e.mightContain(l)||(this.et(n,a,null),i++)})),i}Tt(e){const n=new Map;this.ze.forEach(((a,s)=>{const l=this.ot(s);if(l){if(a.current&&A0(l.target)){const c=new Be(l.target.path);this.It(c).has(s)||this.Et(s,c)||this.et(s,c,Ln.newNoDocument(c,e))}a.Be&&(n.set(s,a.ke()),a.qe())}}));let r=Et();this.He.forEach(((a,s)=>{let l=!0;s.forEachWhile((c=>{const h=this.ot(c);return!h||h.purpose==="TargetPurposeLimboResolution"||(l=!1,!1)})),l&&(r=r.add(a))})),this.je.forEach(((a,s)=>s.setReadTime(e)));const i=new Rg(e,n,this.Ye,this.je,r);return this.je=La(),this.Je=_v(),this.He=_v(),this.Ye=new _n(ft),i}Xe(e,n){if(!this.rt(e))return;const r=this.Et(e,n.key)?2:0;this.nt(e).Qe(n.key,r),this.je=this.je.insert(n.key,n),this.Je=this.Je.insert(n.key,this.It(n.key).add(e)),this.He=this.He.insert(n.key,this.dt(n.key).add(e))}et(e,n,r){if(!this.rt(e))return;const i=this.nt(e);this.Et(e,n)?i.Qe(n,1):i.$e(n),this.He=this.He.insert(n,this.dt(n).delete(e)),this.He=this.He.insert(n,this.dt(n).add(e)),r&&(this.je=this.je.insert(n,r))}removeTarget(e){this.ze.delete(e)}_t(e){const n=this.nt(e).ke();return this.Ge.getRemoteKeysForTarget(e).size+n.addedDocuments.size-n.removedDocuments.size}Ue(e){this.nt(e).Ue()}nt(e){let n=this.ze.get(e);return n||(n=new r2,this.ze.set(e,n)),n}dt(e){let n=this.He.get(e);return n||(n=new an(ft),this.He=this.He.insert(e,n)),n}It(e){let n=this.Je.get(e);return n||(n=new an(ft),this.Je=this.Je.insert(e,n)),n}rt(e){const n=this.ot(e)!==null;return n||ke("WatchChangeAggregator","Detected inactive target",e),n}ot(e){const n=this.ze.get(e);return n&&n.Ne?null:this.Ge.At(e)}it(e){this.ze.set(e,new r2),this.Ge.getRemoteKeysForTarget(e).forEach((n=>{this.et(e,n,null)}))}Et(e,n){return this.Ge.getRemoteKeysForTarget(e).has(n)}}function _v(){return new _n(Be.comparator)}function i2(){return new _n(Be.comparator)}const pY={asc:"ASCENDING",desc:"DESCENDING"},gY={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},yY={and:"AND",or:"OR"};class vY{constructor(e,n){this.databaseId=e,this.useProto3Json=n}}function US(t,e){return t.useProto3Json||Cg(e)?e:{value:e}}function Dh(t,e){return t.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function l6(t,e){return t.useProto3Json?e.toBase64():e.toUint8Array()}function xY(t,e){return Dh(t,e.toTimestamp())}function Wr(t){return Qe(!!t,49232),rt.fromTimestamp((function(n){const r=Pl(n);return new ze(r.seconds,r.nanos)})(t))}function HA(t,e){return FS(t,e).canonicalString()}function FS(t,e){const n=(function(i){return new Ut(["projects",i.projectId,"databases",i.database])})(t).child("documents");return e===void 0?n:n.child(e)}function u6(t){const e=Ut.fromString(t);return Qe(v6(e),10190,{key:e.toString()}),e}function Xp(t,e){return HA(t.databaseId,e.path)}function Tl(t,e){const n=u6(e);if(n.get(1)!==t.databaseId.projectId)throw new Le(Ee.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+t.databaseId.projectId);if(n.get(3)!==t.databaseId.database)throw new Le(Ee.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+t.databaseId.database);return new Be(f6(n))}function c6(t,e){return HA(t.databaseId,e)}function d6(t){const e=u6(t);return e.length===4?Ut.emptyPath():f6(e)}function BS(t){return new Ut(["projects",t.databaseId.projectId,"databases",t.databaseId.database]).canonicalString()}function f6(t){return Qe(t.length>4&&t.get(4)==="documents",29091,{key:t.toString()}),t.popFirst(5)}function a2(t,e,n){return{name:Xp(t,e),fields:n.value.mapValue.fields}}function _Y(t,e,n){const r=Tl(t,e.name),i=Wr(e.updateTime),a=e.createTime?Wr(e.createTime):rt.min(),s=new ni({mapValue:{fields:e.fields}}),l=Ln.newFoundDocument(r,i,a,s);return n&&l.setHasCommittedMutations(),n?l.setHasCommittedMutations():l}function bY(t,e){return"found"in e?(function(r,i){Qe(!!i.found,43571),i.found.name,i.found.updateTime;const a=Tl(r,i.found.name),s=Wr(i.found.updateTime),l=i.found.createTime?Wr(i.found.createTime):rt.min(),c=new ni({mapValue:{fields:i.found.fields}});return Ln.newFoundDocument(a,s,l,c)})(t,e):"missing"in e?(function(r,i){Qe(!!i.missing,3894),Qe(!!i.readTime,22933);const a=Tl(r,i.missing),s=Wr(i.readTime);return Ln.newNoDocument(a,s)})(t,e):Ge(7234,{result:e})}function wY(t,e){let n;if("targetChange"in e){e.targetChange;const r=(function(h){return h==="NO_CHANGE"?0:h==="ADD"?1:h==="REMOVE"?2:h==="CURRENT"?3:h==="RESET"?4:Ge(39313,{state:h})})(e.targetChange.targetChangeType||"NO_CHANGE"),i=e.targetChange.targetIds||[],a=(function(h,p){return h.useProto3Json?(Qe(p===void 0||typeof p=="string",58123),cr.fromBase64String(p||"")):(Qe(p===void 0||p instanceof Buffer||p instanceof Uint8Array,16193),cr.fromUint8Array(p||new Uint8Array))})(t,e.targetChange.resumeToken),s=e.targetChange.cause,l=s&&(function(h){const p=h.code===void 0?Ee.UNKNOWN:a6(h.code);return new Le(p,h.message||"")})(s);n=new o6(r,i,a,l||null)}else if("documentChange"in e){e.documentChange;const r=e.documentChange;r.document,r.document.name,r.document.updateTime;const i=Tl(t,r.document.name),a=Wr(r.document.updateTime),s=r.document.createTime?Wr(r.document.createTime):rt.min(),l=new ni({mapValue:{fields:r.document.fields}}),c=Ln.newFoundDocument(i,a,s,l),h=r.targetIds||[],p=r.removedTargetIds||[];n=new n0(h,p,c.key,c)}else if("documentDelete"in e){e.documentDelete;const r=e.documentDelete;r.document;const i=Tl(t,r.document),a=r.readTime?Wr(r.readTime):rt.min(),s=Ln.newNoDocument(i,a),l=r.removedTargetIds||[];n=new n0([],l,s.key,s)}else if("documentRemove"in e){e.documentRemove;const r=e.documentRemove;r.document;const i=Tl(t,r.document),a=r.removedTargetIds||[];n=new n0([],a,i,null)}else{if(!("filter"in e))return Ge(11601,{Rt:e});{e.filter;const r=e.filter;r.targetId;const{count:i=0,unchangedNames:a}=r,s=new dY(i,a),l=r.targetId;n=new s6(l,s)}}return n}function eg(t,e){let n;if(e instanceof Jh)n={update:a2(t,e.key,e.value)};else if(e instanceof Qh)n={delete:Xp(t,e.key)};else if(e instanceof zl)n={update:a2(t,e.key,e.data),updateMask:IY(e.fieldMask)};else{if(!(e instanceof UA))return Ge(16599,{Vt:e.type});n={verify:Xp(t,e.key)}}return e.fieldTransforms.length>0&&(n.updateTransforms=e.fieldTransforms.map((r=>(function(a,s){const l=s.transform;if(l instanceof Ih)return{fieldPath:s.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(l instanceof Nh)return{fieldPath:s.field.canonicalString(),appendMissingElements:{values:l.elements}};if(l instanceof Ph)return{fieldPath:s.field.canonicalString(),removeAllFromArray:{values:l.elements}};if(l instanceof Qp)return{fieldPath:s.field.canonicalString(),increment:l.Ae};throw Ge(20930,{transform:s.transform})})(0,r)))),e.precondition.isNone||(n.currentDocument=(function(i,a){return a.updateTime!==void 0?{updateTime:xY(i,a.updateTime)}:a.exists!==void 0?{exists:a.exists}:Ge(27497)})(t,e.precondition)),n}function zS(t,e){const n=e.currentDocument?(function(a){return a.updateTime!==void 0?Vn.updateTime(Wr(a.updateTime)):a.exists!==void 0?Vn.exists(a.exists):Vn.none()})(e.currentDocument):Vn.none(),r=e.updateTransforms?e.updateTransforms.map((i=>(function(s,l){let c=null;if("setToServerValue"in l)Qe(l.setToServerValue==="REQUEST_TIME",16630,{proto:l}),c=new Ih;else if("appendMissingElements"in l){const p=l.appendMissingElements.values||[];c=new Nh(p)}else if("removeAllFromArray"in l){const p=l.removeAllFromArray.values||[];c=new Ph(p)}else"increment"in l?c=new Qp(s,l.increment):Ge(16584,{proto:l});const h=Hn.fromServerFormat(l.fieldPath);return new t6(h,c)})(t,i))):[];if(e.update){e.update.name;const i=Tl(t,e.update.name),a=new ni({mapValue:{fields:e.update.fields}});if(e.updateMask){const s=(function(c){const h=c.fieldPaths||[];return new da(h.map((p=>Hn.fromServerFormat(p))))})(e.updateMask);return new zl(i,a,s,n,r)}return new Jh(i,a,n,r)}if(e.delete){const i=Tl(t,e.delete);return new Qh(i,n)}if(e.verify){const i=Tl(t,e.verify);return new UA(i,n)}return Ge(1463,{proto:e})}function EY(t,e){return t&&t.length>0?(Qe(e!==void 0,14353),t.map((n=>(function(i,a){let s=i.updateTime?Wr(i.updateTime):Wr(a);return s.isEqual(rt.min())&&(s=Wr(a)),new lY(s,i.transformResults||[])})(n,e)))):[]}function h6(t,e){return{documents:[c6(t,e.path)]}}function m6(t,e){const n={structuredQuery:{}},r=e.path;let i;e.collectionGroup!==null?(i=r,n.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(i=r.popLast(),n.structuredQuery.from=[{collectionId:r.lastSegment()}]),n.parent=c6(t,i);const a=(function(h){if(h.length!==0)return y6(rn.create(h,"and"))})(e.filters);a&&(n.structuredQuery.where=a);const s=(function(h){if(h.length!==0)return h.map((p=>(function(x){return{field:Gf(x.field),direction:SY(x.dir)}})(p)))})(e.orderBy);s&&(n.structuredQuery.orderBy=s);const l=US(t,e.limit);return l!==null&&(n.structuredQuery.limit=l),e.startAt&&(n.structuredQuery.startAt=(function(h){return{before:h.inclusive,values:h.position}})(e.startAt)),e.endAt&&(n.structuredQuery.endAt=(function(h){return{before:!h.inclusive,values:h.position}})(e.endAt)),{ft:n,parent:i}}function p6(t){let e=d6(t.parent);const n=t.structuredQuery,r=n.from?n.from.length:0;let i=null;if(r>0){Qe(r===1,65062);const p=n.from[0];p.allDescendants?i=p.collectionId:e=e.child(p.collectionId)}let a=[];n.where&&(a=(function(g){const x=g6(g);return x instanceof rn&&jA(x)?x.getFilters():[x]})(n.where));let s=[];n.orderBy&&(s=(function(g){return g.map((x=>(function(C){return new S0($f(C.field),(function(D){switch(D){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}})(C.direction))})(x)))})(n.orderBy));let l=null;n.limit&&(l=(function(g){let x;return x=typeof g=="object"?g.value:g,Cg(x)?null:x})(n.limit));let c=null;n.startAt&&(c=(function(g){const x=!!g.before,b=g.values||[];return new Ah(b,x)})(n.startAt));let h=null;return n.endAt&&(h=(function(g){const x=!g.before,b=g.values||[];return new Ah(b,x)})(n.endAt)),zV(e,i,s,a,l,"F",c,h)}function TY(t,e){const n=(function(i){switch(i){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return Ge(28987,{purpose:i})}})(e.purpose);return n==null?null:{"goog-listen-tags":n}}function g6(t){return t.unaryFilter!==void 0?(function(n){switch(n.unaryFilter.op){case"IS_NAN":const r=$f(n.unaryFilter.field);return kt.create(r,"==",{doubleValue:NaN});case"IS_NULL":const i=$f(n.unaryFilter.field);return kt.create(i,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const a=$f(n.unaryFilter.field);return kt.create(a,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const s=$f(n.unaryFilter.field);return kt.create(s,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":return Ge(61313);default:return Ge(60726)}})(t):t.fieldFilter!==void 0?(function(n){return kt.create($f(n.fieldFilter.field),(function(i){switch(i){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":return Ge(58110);default:return Ge(50506)}})(n.fieldFilter.op),n.fieldFilter.value)})(t):t.compositeFilter!==void 0?(function(n){return rn.create(n.compositeFilter.filters.map((r=>g6(r))),(function(i){switch(i){case"AND":return"and";case"OR":return"or";default:return Ge(1026)}})(n.compositeFilter.op))})(t):Ge(30097,{filter:t})}function SY(t){return pY[t]}function AY(t){return gY[t]}function CY(t){return yY[t]}function Gf(t){return{fieldPath:t.canonicalString()}}function $f(t){return Hn.fromServerFormat(t.fieldPath)}function y6(t){return t instanceof kt?(function(n){if(n.op==="=="){if(qk(n.value))return{unaryFilter:{field:Gf(n.field),op:"IS_NAN"}};if(zk(n.value))return{unaryFilter:{field:Gf(n.field),op:"IS_NULL"}}}else if(n.op==="!="){if(qk(n.value))return{unaryFilter:{field:Gf(n.field),op:"IS_NOT_NAN"}};if(zk(n.value))return{unaryFilter:{field:Gf(n.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:Gf(n.field),op:AY(n.op),value:n.value}}})(t):t instanceof rn?(function(n){const r=n.getFilters().map((i=>y6(i)));return r.length===1?r[0]:{compositeFilter:{op:CY(n.op),filters:r}}})(t):Ge(54877,{filter:t})}function IY(t){const e=[];return t.fields.forEach((n=>e.push(n.canonicalString()))),{fieldPaths:e}}function v6(t){return t.length>=4&&t.get(0)==="projects"&&t.get(2)==="databases"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _l{constructor(e,n,r,i,a=rt.min(),s=rt.min(),l=cr.EMPTY_BYTE_STRING,c=null){this.target=e,this.targetId=n,this.purpose=r,this.sequenceNumber=i,this.snapshotVersion=a,this.lastLimboFreeSnapshotVersion=s,this.resumeToken=l,this.expectedCount=c}withSequenceNumber(e){return new _l(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,n){return new _l(this.target,this.targetId,this.purpose,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new _l(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new _l(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class x6{constructor(e){this.yt=e}}function NY(t,e){let n;if(e.document)n=_Y(t.yt,e.document,!!e.hasCommittedMutations);else if(e.noDocument){const r=Be.fromSegments(e.noDocument.path),i=Md(e.noDocument.readTime);n=Ln.newNoDocument(r,i),e.hasCommittedMutations&&n.setHasCommittedMutations()}else{if(!e.unknownDocument)return Ge(56709);{const r=Be.fromSegments(e.unknownDocument.path),i=Md(e.unknownDocument.version);n=Ln.newUnknownDocument(r,i)}}return e.readTime&&n.setReadTime((function(i){const a=new ze(i[0],i[1]);return rt.fromTimestamp(a)})(e.readTime)),n}function s2(t,e){const n=e.key,r={prefixPath:n.getCollectionPath().popLast().toArray(),collectionGroup:n.collectionGroup,documentId:n.path.lastSegment(),readTime:I0(e.readTime),hasCommittedMutations:e.hasCommittedMutations};if(e.isFoundDocument())r.document=(function(a,s){return{name:Xp(a,s.key),fields:s.data.value.mapValue.fields,updateTime:Dh(a,s.version.toTimestamp()),createTime:Dh(a,s.createTime.toTimestamp())}})(t.yt,e);else if(e.isNoDocument())r.noDocument={path:n.path.toArray(),readTime:kd(e.version)};else{if(!e.isUnknownDocument())return Ge(57904,{document:e});r.unknownDocument={path:n.path.toArray(),version:kd(e.version)}}return r}function I0(t){const e=t.toTimestamp();return[e.seconds,e.nanoseconds]}function kd(t){const e=t.toTimestamp();return{seconds:e.seconds,nanoseconds:e.nanoseconds}}function Md(t){const e=new ze(t.seconds,t.nanoseconds);return rt.fromTimestamp(e)}function fd(t,e){const n=(e.baseMutations||[]).map((a=>zS(t.yt,a)));for(let a=0;a<e.mutations.length-1;++a){const s=e.mutations[a];if(a+1<e.mutations.length&&e.mutations[a+1].transform!==void 0){const l=e.mutations[a+1];s.updateTransforms=l.transform.fieldTransforms,e.mutations.splice(a+1,1),++a}}const r=e.mutations.map((a=>zS(t.yt,a))),i=ze.fromMillis(e.localWriteTimeMs);return new FA(e.batchId,i,n,r)}function bp(t){const e=Md(t.readTime),n=t.lastLimboFreeSnapshotVersion!==void 0?Md(t.lastLimboFreeSnapshotVersion):rt.min();let r;return r=(function(a){return a.documents!==void 0})(t.query)?(function(a){const s=a.documents.length;return Qe(s===1,1966,{count:s}),Fa(d_(d6(a.documents[0])))})(t.query):(function(a){return Fa(p6(a))})(t.query),new _l(r,t.targetId,"TargetPurposeListen",t.lastListenSequenceNumber,e,n,cr.fromBase64String(t.resumeToken))}function _6(t,e){const n=kd(e.snapshotVersion),r=kd(e.lastLimboFreeSnapshotVersion);let i;i=A0(e.target)?h6(t.yt,e.target):m6(t.yt,e.target).ft;const a=e.resumeToken.toBase64();return{targetId:e.targetId,canonicalId:Rd(e.target),readTime:n,resumeToken:a,lastListenSequenceNumber:e.sequenceNumber,lastLimboFreeSnapshotVersion:r,query:i}}function b6(t){const e=p6({parent:t.parent,structuredQuery:t.structuredQuery});return t.limitType==="LAST"?VS(e,e.limit,"L"):e}function TE(t,e){return new zA(e.largestBatchId,zS(t.yt,e.overlayMutation))}function o2(t,e){const n=e.path.lastSegment();return[t,Ti(e.path.popLast()),n]}function l2(t,e,n,r){return{indexId:t,uid:e,sequenceNumber:n,readTime:kd(r.readTime),documentKey:Ti(r.documentKey.path),largestBatchId:r.largestBatchId}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class PY{getBundleMetadata(e,n){return u2(e).get(n).next((r=>{if(r)return(function(a){return{id:a.bundleId,createTime:Md(a.createTime),version:a.version}})(r)}))}saveBundleMetadata(e,n){return u2(e).put((function(i){return{bundleId:i.id,createTime:kd(Wr(i.createTime)),version:i.version}})(n))}getNamedQuery(e,n){return c2(e).get(n).next((r=>{if(r)return(function(a){return{name:a.name,query:b6(a.bundledQuery),readTime:Md(a.readTime)}})(r)}))}saveNamedQuery(e,n){return c2(e).put((function(i){return{name:i.name,readTime:kd(Wr(i.readTime)),bundledQuery:i.bundledQuery}})(n))}}function u2(t){return Dr(t,s_)}function c2(t){return Dr(t,o_)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class p_{constructor(e,n){this.serializer=e,this.userId=n}static wt(e,n){const r=n.uid||"";return new p_(e,r)}getOverlay(e,n){return np(e).get(o2(this.userId,n)).next((r=>r?TE(this.serializer,r):null))}getOverlays(e,n){const r=So();return de.forEach(n,(i=>this.getOverlay(e,i).next((a=>{a!==null&&r.set(i,a)})))).next((()=>r))}saveOverlays(e,n,r){const i=[];return r.forEach(((a,s)=>{const l=new zA(n,s);i.push(this.St(e,l))})),de.waitFor(i)}removeOverlaysForBatchId(e,n,r){const i=new Set;n.forEach((s=>i.add(Ti(s.getCollectionPath()))));const a=[];return i.forEach((s=>{const l=IDBKeyRange.bound([this.userId,s,r],[this.userId,s,r+1],!1,!0);a.push(np(e).Z(PS,l))})),de.waitFor(a)}getOverlaysForCollection(e,n,r){const i=So(),a=Ti(n),s=IDBKeyRange.bound([this.userId,a,r],[this.userId,a,Number.POSITIVE_INFINITY],!0);return np(e).J(PS,s).next((l=>{for(const c of l){const h=TE(this.serializer,c);i.set(h.getKey(),h)}return i}))}getOverlaysForCollectionGroup(e,n,r,i){const a=So();let s;const l=IDBKeyRange.bound([this.userId,n,r],[this.userId,n,Number.POSITIVE_INFINITY],!0);return np(e).ee({index:_V,range:l},((c,h,p)=>{const g=TE(this.serializer,h);a.size()<i||g.largestBatchId===s?(a.set(g.getKey(),g),s=g.largestBatchId):p.done()})).next((()=>a))}St(e,n){return np(e).put((function(i,a,s){const[l,c,h]=o2(a,s.mutation.key);return{userId:a,collectionPath:c,documentId:h,collectionGroup:s.mutation.key.getCollectionGroup(),largestBatchId:s.largestBatchId,overlayMutation:eg(i.yt,s.mutation)}})(this.serializer,this.userId,n))}}function np(t){return Dr(t,l_)}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class DY{bt(e){return Dr(e,DA)}getSessionToken(e){return this.bt(e).get("sessionToken").next((n=>{const r=n==null?void 0:n.value;return r?cr.fromUint8Array(r):cr.EMPTY_BYTE_STRING}))}setSessionToken(e,n){return this.bt(e).put({name:"sessionToken",value:n.toUint8Array()})}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hd{constructor(){}Dt(e,n){this.Ct(e,n),n.vt()}Ct(e,n){if("nullValue"in e)this.Ft(n,5);else if("booleanValue"in e)this.Ft(n,10),n.Mt(e.booleanValue?1:0);else if("integerValue"in e)this.Ft(n,15),n.Mt(On(e.integerValue));else if("doubleValue"in e){const r=On(e.doubleValue);isNaN(r)?this.Ft(n,13):(this.Ft(n,15),Hp(r)?n.Mt(0):n.Mt(r))}else if("timestampValue"in e){let r=e.timestampValue;this.Ft(n,20),typeof r=="string"&&(r=Pl(r)),n.xt(`${r.seconds||""}`),n.Mt(r.nanos||0)}else if("stringValue"in e)this.Ot(e.stringValue,n),this.Nt(n);else if("bytesValue"in e)this.Ft(n,30),n.Bt(Dl(e.bytesValue)),this.Nt(n);else if("referenceValue"in e)this.Lt(e.referenceValue,n);else if("geoPointValue"in e){const r=e.geoPointValue;this.Ft(n,45),n.Mt(r.latitude||0),n.Mt(r.longitude||0)}else"mapValue"in e?RV(e)?this.Ft(n,Number.MAX_SAFE_INTEGER):c_(e)?this.kt(e.mapValue,n):(this.qt(e.mapValue,n),this.Nt(n)):"arrayValue"in e?(this.Qt(e.arrayValue,n),this.Nt(n)):Ge(19022,{$t:e})}Ot(e,n){this.Ft(n,25),this.Ut(e,n)}Ut(e,n){n.xt(e)}qt(e,n){const r=e.fields||{};this.Ft(n,55);for(const i of Object.keys(r))this.Ot(i,n),this.Ct(r[i],n)}kt(e,n){var s,l;const r=e.fields||{};this.Ft(n,53);const i=Th,a=((l=(s=r[i].arrayValue)==null?void 0:s.values)==null?void 0:l.length)||0;this.Ft(n,15),n.Mt(On(a)),this.Ot(i,n),this.Ct(r[i],n)}Qt(e,n){const r=e.values||[];this.Ft(n,50);for(const i of r)this.Ct(i,n)}Lt(e,n){this.Ft(n,37),Be.fromName(e).path.forEach((r=>{this.Ft(n,60),this.Ut(r,n)}))}Ft(e,n){e.Mt(n)}Nt(e){e.Mt(2)}}hd.Kt=new hd;/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law | agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES | CONDITIONS OF ANY KIND, either express | implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const jf=255;function RY(t){if(t===0)return 8;let e=0;return t>>4||(e+=4,t<<=4),t>>6||(e+=2,t<<=2),t>>7||(e+=1),e}function d2(t){const e=64-(function(r){let i=0;for(let a=0;a<8;++a){const s=RY(255&r[a]);if(i+=s,s!==8)break}return i})(t);return Math.ceil(e/8)}class kY{constructor(){this.buffer=new Uint8Array(1024),this.position=0}Wt(e){const n=e[Symbol.iterator]();let r=n.next();for(;!r.done;)this.Gt(r.value),r=n.next();this.zt()}jt(e){const n=e[Symbol.iterator]();let r=n.next();for(;!r.done;)this.Jt(r.value),r=n.next();this.Ht()}Yt(e){for(const n of e){const r=n.charCodeAt(0);if(r<128)this.Gt(r);else if(r<2048)this.Gt(960|r>>>6),this.Gt(128|63&r);else if(n<"\uD800"||"\uDBFF"<n)this.Gt(480|r>>>12),this.Gt(128|63&r>>>6),this.Gt(128|63&r);else{const i=n.codePointAt(0);this.Gt(240|i>>>18),this.Gt(128|63&i>>>12),this.Gt(128|63&i>>>6),this.Gt(128|63&i)}}this.zt()}Zt(e){for(const n of e){const r=n.charCodeAt(0);if(r<128)this.Jt(r);else if(r<2048)this.Jt(960|r>>>6),this.Jt(128|63&r);else if(n<"\uD800"||"\uDBFF"<n)this.Jt(480|r>>>12),this.Jt(128|63&r>>>6),this.Jt(128|63&r);else{const i=n.codePointAt(0);this.Jt(240|i>>>18),this.Jt(128|63&i>>>12),this.Jt(128|63&i>>>6),this.Jt(128|63&i)}}this.Ht()}Xt(e){const n=this.en(e),r=d2(n);this.tn(1+r),this.buffer[this.position++]=255&r;for(let i=n.length-r;i<n.length;++i)this.buffer[this.position++]=255&n[i]}nn(e){const n=this.en(e),r=d2(n);this.tn(1+r),this.buffer[this.position++]=~(255&r);for(let i=n.length-r;i<n.length;++i)this.buffer[this.position++]=~(255&n[i])}rn(){this.sn(jf),this.sn(255)}_n(){this.an(jf),this.an(255)}reset(){this.position=0}seed(e){this.tn(e.length),this.buffer.set(e,this.position),this.position+=e.length}un(){return this.buffer.slice(0,this.position)}en(e){const n=(function(a){const s=new DataView(new ArrayBuffer(8));return s.setFloat64(0,a,!1),new Uint8Array(s.buffer)})(e),r=!!(128&n[0]);n[0]^=r?255:128;for(let i=1;i<n.length;++i)n[i]^=r?255:0;return n}Gt(e){const n=255&e;n===0?(this.sn(0),this.sn(255)):n===jf?(this.sn(jf),this.sn(0)):this.sn(n)}Jt(e){const n=255&e;n===0?(this.an(0),this.an(255)):n===jf?(this.an(jf),this.an(0)):this.an(e)}zt(){this.sn(0),this.sn(1)}Ht(){this.an(0),this.an(1)}sn(e){this.tn(1),this.buffer[this.position++]=e}an(e){this.tn(1),this.buffer[this.position++]=~e}tn(e){const n=e+this.position;if(n<=this.buffer.length)return;let r=2*this.buffer.length;r<n&&(r=n);const i=new Uint8Array(r);i.set(this.buffer),this.buffer=i}}class MY{constructor(e){this.cn=e}Bt(e){this.cn.Wt(e)}xt(e){this.cn.Yt(e)}Mt(e){this.cn.Xt(e)}vt(){this.cn.rn()}}class OY{constructor(e){this.cn=e}Bt(e){this.cn.jt(e)}xt(e){this.cn.Zt(e)}Mt(e){this.cn.nn(e)}vt(){this.cn._n()}}class rp{constructor(){this.cn=new kY,this.ln=new MY(this.cn),this.hn=new OY(this.cn)}seed(e){this.cn.seed(e)}Pn(e){return e===0?this.ln:this.hn}un(){return this.cn.un()}reset(){this.cn.reset()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class md{constructor(e,n,r,i){this.Tn=e,this.In=n,this.En=r,this.dn=i}An(){const e=this.dn.length,n=e===0||this.dn[e-1]===255?e+1:e,r=new Uint8Array(n);return r.set(this.dn,0),n!==e?r.set([0],this.dn.length):++r[r.length-1],new md(this.Tn,this.In,this.En,r)}Rn(e,n,r){return{indexId:this.Tn,uid:e,arrayValue:r0(this.En),directionalValue:r0(this.dn),orderedDocumentKey:r0(n),documentKey:r.path.toArray()}}Vn(e,n,r){const i=this.Rn(e,n,r);return[i.indexId,i.uid,i.arrayValue,i.directionalValue,i.orderedDocumentKey,i.documentKey]}}function Mu(t,e){let n=t.Tn-e.Tn;return n!==0?n:(n=f2(t.En,e.En),n!==0?n:(n=f2(t.dn,e.dn),n!==0?n:Be.comparator(t.In,e.In)))}function f2(t,e){for(let n=0;n<t.length&&n<e.length;++n){const r=t[n]-e[n];if(r!==0)return r}return t.length-e.length}function r0(t){return c3()?(function(n){let r="";for(let i=0;i<n.length;i++)r+=String.fromCharCode(n[i]);return r})(t):t}function h2(t){return typeof t!="string"?t:(function(n){const r=new Uint8Array(n.length);for(let i=0;i<n.length;i++)r[i]=n.charCodeAt(i);return r})(t)}class m2{constructor(e){this.mn=new an(((n,r)=>Hn.comparator(n.field,r.field))),this.collectionId=e.collectionGroup!=null?e.collectionGroup:e.path.lastSegment(),this.fn=e.orderBy,this.gn=[];for(const n of e.filters){const r=n;r.isInequality()?this.mn=this.mn.add(r):this.gn.push(r)}}get pn(){return this.mn.size>1}yn(e){if(Qe(e.collectionGroup===this.collectionId,49279),this.pn)return!1;const n=CS(e);if(n!==void 0&&!this.wn(n))return!1;const r=sd(e);let i=new Set,a=0,s=0;for(;a<r.length&&this.wn(r[a]);++a)i=i.add(r[a].fieldPath.canonicalString());if(a===r.length)return!0;if(this.mn.size>0){const l=this.mn.getIterator().getNext();if(!i.has(l.field.canonicalString())){const c=r[a];if(!this.Sn(l,c)||!this.bn(this.fn[s++],c))return!1}++a}for(;a<r.length;++a){const l=r[a];if(s>=this.fn.length||!this.bn(this.fn[s++],l))return!1}return!0}Dn(){if(this.pn)return null;let e=new an(Hn.comparator);const n=[];for(const r of this.gn)if(!r.field.isKeyField())if(r.op==="array-contains"||r.op==="array-contains-any")n.push(new Yv(r.field,2));else{if(e.has(r.field))continue;e=e.add(r.field),n.push(new Yv(r.field,0))}for(const r of this.fn)r.field.isKeyField()||e.has(r.field)||(e=e.add(r.field),n.push(new Yv(r.field,r.dir==="asc"?0:1)));return new _0(_0.UNKNOWN_ID,this.collectionId,n,qp.empty())}wn(e){for(const n of this.gn)if(this.Sn(n,e))return!0;return!1}Sn(e,n){if(e===void 0||!e.field.isEqual(n.fieldPath))return!1;const r=e.op==="array-contains"||e.op==="array-contains-any";return n.kind===2===r}bn(e,n){return!!e.field.isEqual(n.fieldPath)&&(n.kind===0&&e.dir==="asc"||n.kind===1&&e.dir==="desc")}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function w6(t){var n,r;if(Qe(t instanceof kt||t instanceof rn,20012),t instanceof kt){if(t instanceof BV){const i=((r=(n=t.value.arrayValue)==null?void 0:n.values)==null?void 0:r.map((a=>kt.create(t.field,"==",a))))||[];return rn.create(i,"or")}return t}const e=t.filters.map((i=>w6(i)));return rn.create(e,t.op)}function jY(t){if(t.getFilters().length===0)return[];const e=GS(w6(t));return Qe(E6(e),7391),qS(e)||HS(e)?[e]:e.getFilters()}function qS(t){return t instanceof kt}function HS(t){return t instanceof rn&&jA(t)}function E6(t){return qS(t)||HS(t)||(function(n){if(n instanceof rn&&MS(n)){for(const r of n.getFilters())if(!qS(r)&&!HS(r))return!1;return!0}return!1})(t)}function GS(t){if(Qe(t instanceof kt||t instanceof rn,34018),t instanceof kt)return t;if(t.filters.length===1)return GS(t.filters[0]);const e=t.filters.map((r=>GS(r)));let n=rn.create(e,t.op);return n=N0(n),E6(n)?n:(Qe(n instanceof rn,64498),Qe(Ch(n),40251),Qe(n.filters.length>1,57927),n.filters.reduce(((r,i)=>GA(r,i))))}function GA(t,e){let n;return Qe(t instanceof kt||t instanceof rn,38388),Qe(e instanceof kt||e instanceof rn,25473),n=t instanceof kt?e instanceof kt?(function(i,a){return rn.create([i,a],"and")})(t,e):p2(t,e):e instanceof kt?p2(e,t):(function(i,a){if(Qe(i.filters.length>0&&a.filters.length>0,48005),Ch(i)&&Ch(a))return VV(i,a.getFilters());const s=MS(i)?i:a,l=MS(i)?a:i,c=s.filters.map((h=>GA(h,l)));return rn.create(c,"or")})(t,e),N0(n)}function p2(t,e){if(Ch(e))return VV(e,t.getFilters());{const n=e.filters.map((r=>GA(t,r)));return rn.create(n,"or")}}function N0(t){if(Qe(t instanceof kt||t instanceof rn,11850),t instanceof kt)return t;const e=t.getFilters();if(e.length===1)return N0(e[0]);if(jV(t))return t;const n=e.map((i=>N0(i))),r=[];return n.forEach((i=>{i instanceof kt?r.push(i):i instanceof rn&&(i.op===t.op?r.push(...i.filters):r.push(i))})),r.length===1?r[0]:rn.create(r,t.op)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class LY{constructor(){this.Cn=new $A}addToCollectionParentIndex(e,n){return this.Cn.add(n),de.resolve()}getCollectionParents(e,n){return de.resolve(this.Cn.getEntries(n))}addFieldIndex(e,n){return de.resolve()}deleteFieldIndex(e,n){return de.resolve()}deleteAllFieldIndexes(e){return de.resolve()}createTargetIndexes(e,n){return de.resolve()}getDocumentsMatchingTarget(e,n){return de.resolve(null)}getIndexType(e,n){return de.resolve(0)}getFieldIndexes(e,n){return de.resolve([])}getNextCollectionGroupToUpdate(e){return de.resolve(null)}getMinOffset(e,n){return de.resolve(qa.min())}getMinOffsetFromCollectionGroup(e,n){return de.resolve(qa.min())}updateCollectionGroup(e,n,r){return de.resolve()}updateIndexEntries(e,n){return de.resolve()}}class $A{constructor(){this.index={}}add(e){const n=e.lastSegment(),r=e.popLast(),i=this.index[n]||new an(Ut.comparator),a=!i.has(r);return this.index[n]=i.add(r),a}has(e){const n=e.lastSegment(),r=e.popLast(),i=this.index[n];return i&&i.has(r)}getEntries(e){return(this.index[e]||new an(Ut.comparator)).toArray()}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const g2="IndexedDbIndexManager",bv=new Uint8Array(0);class VY{constructor(e,n){this.databaseId=n,this.vn=new $A,this.Fn=new Bl((r=>Rd(r)),((r,i)=>Ng(r,i))),this.uid=e.uid||""}addToCollectionParentIndex(e,n){if(!this.vn.has(n)){const r=n.lastSegment(),i=n.popLast();e.addOnCommittedListener((()=>{this.vn.add(n)}));const a={collectionId:r,parent:Ti(i)};return y2(e).put(a)}return de.resolve()}getCollectionParents(e,n){const r=[],i=IDBKeyRange.bound([n,""],[sV(n),""],!1,!0);return y2(e).J(i).next((a=>{for(const s of a){if(s.collectionId!==n)break;r.push(To(s.parent))}return r}))}addFieldIndex(e,n){const r=ip(e),i=(function(l){return{indexId:l.indexId,collectionGroup:l.collectionGroup,fields:l.fields.map((c=>[c.fieldPath.canonicalString(),c.kind]))}})(n);delete i.indexId;const a=r.add(i);if(n.indexState){const s=Vf(e);return a.next((l=>{s.put(l2(l,this.uid,n.indexState.sequenceNumber,n.indexState.offset))}))}return a.next()}deleteFieldIndex(e,n){const r=ip(e),i=Vf(e),a=Lf(e);return r.delete(n.indexId).next((()=>i.delete(IDBKeyRange.bound([n.indexId],[n.indexId+1],!1,!0)))).next((()=>a.delete(IDBKeyRange.bound([n.indexId],[n.indexId+1],!1,!0))))}deleteAllFieldIndexes(e){const n=ip(e),r=Lf(e),i=Vf(e);return n.Z().next((()=>r.Z())).next((()=>i.Z()))}createTargetIndexes(e,n){return de.forEach(this.Mn(n),(r=>this.getIndexType(e,r).next((i=>{if(i===0||i===1){const a=new m2(r).Dn();if(a!=null)return this.addFieldIndex(e,a)}}))))}getDocumentsMatchingTarget(e,n){const r=Lf(e);let i=!0;const a=new Map;return de.forEach(this.Mn(n),(s=>this.xn(e,s).next((l=>{i&&(i=!!l),a.set(s,l)})))).next((()=>{if(i){let s=Et();const l=[];return de.forEach(a,((c,h)=>{ke(g2,`Using index ${(function(O){return`id=${O.indexId}|cg=${O.collectionGroup}|f=${O.fields.map((q=>`${q.fieldPath}:${q.kind}`)).join(",")}`})(c)} to execute ${Rd(n)}`);const p=(function(O,q){const $=CS(q);if($===void 0)return null;for(const H of C0(O,$.fieldPath))switch(H.op){case"array-contains-any":return H.value.arrayValue.values||[];case"array-contains":return[H.value]}return null})(h,c),g=(function(O,q){const $=new Map;for(const H of sd(q))for(const U of C0(O,H.fieldPath))switch(U.op){case"==":case"in":$.set(H.fieldPath.canonicalString(),U.value);break;case"not-in":case"!=":return $.set(H.fieldPath.canonicalString(),U.value),Array.from($.values())}return null})(h,c),x=(function(O,q){const $=[];let H=!0;for(const U of sd(q)){const z=U.kind===0?Wk(O,U.fieldPath,O.startAt):Yk(O,U.fieldPath,O.startAt);$.push(z.value),H&&(H=z.inclusive)}return new Ah($,H)})(h,c),b=(function(O,q){const $=[];let H=!0;for(const U of sd(q)){const z=U.kind===0?Yk(O,U.fieldPath,O.endAt):Wk(O,U.fieldPath,O.endAt);$.push(z.value),H&&(H=z.inclusive)}return new Ah($,H)})(h,c),C=this.On(c,h,x),A=this.On(c,h,b),D=this.Nn(c,h,g),R=this.Bn(c.indexId,p,C,x.inclusive,A,b.inclusive,D);return de.forEach(R,(j=>r.Y(j,n.limit).next((O=>{O.forEach((q=>{const $=Be.fromSegments(q.documentKey);s.has($)||(s=s.add($),l.push($))}))}))))})).next((()=>l))}return de.resolve(null)}))}Mn(e){let n=this.Fn.get(e);return n||(e.filters.length===0?n=[e]:n=jY(rn.create(e.filters,"and")).map((r=>jS(e.path,e.collectionGroup,e.orderBy,r.getFilters(),e.limit,e.startAt,e.endAt))),this.Fn.set(e,n),n)}Bn(e,n,r,i,a,s,l){const c=(n!=null?n.length:1)*Math.max(r.length,a.length),h=c/(n!=null?n.length:1),p=[];for(let g=0;g<c;++g){const x=n?this.Ln(n[g/h]):bv,b=this.kn(e,x,r[g%h],i),C=this.qn(e,x,a[g%h],s),A=l.map((D=>this.kn(e,x,D,!0)));p.push(...this.createRange(b,C,A))}return p}kn(e,n,r,i){const a=new md(e,Be.empty(),n,r);return i?a:a.An()}qn(e,n,r,i){const a=new md(e,Be.empty(),n,r);return i?a.An():a}xn(e,n){const r=new m2(n),i=n.collectionGroup!=null?n.collectionGroup:n.path.lastSegment();return this.getFieldIndexes(e,i).next((a=>{let s=null;for(const l of a)r.yn(l)&&(!s||l.fields.length>s.fields.length)&&(s=l);return s}))}getIndexType(e,n){let r=2;const i=this.Mn(n);return de.forEach(i,(a=>this.xn(e,a).next((s=>{s?r!==0&&s.fields.length<(function(c){let h=new an(Hn.comparator),p=!1;for(const g of c.filters)for(const x of g.getFlattenedFilters())x.field.isKeyField()||(x.op==="array-contains"||x.op==="array-contains-any"?p=!0:h=h.add(x.field));for(const g of c.orderBy)g.field.isKeyField()||(h=h.add(g.field));return h.size+(p?1:0)})(a)&&(r=1):r=0})))).next((()=>(function(s){return s.limit!==null})(n)&&i.length>1&&r===2?1:r))}Qn(e,n){const r=new rp;for(const i of sd(e)){const a=n.data.field(i.fieldPath);if(a==null)return null;const s=r.Pn(i.kind);hd.Kt.Dt(a,s)}return r.un()}Ln(e){const n=new rp;return hd.Kt.Dt(e,n.Pn(0)),n.un()}$n(e,n){const r=new rp;return hd.Kt.Dt(Zp(this.databaseId,n),r.Pn((function(a){const s=sd(a);return s.length===0?0:s[s.length-1].kind})(e))),r.un()}Nn(e,n,r){if(r===null)return[];let i=[];i.push(new rp);let a=0;for(const s of sd(e)){const l=r[a++];for(const c of i)if(this.Un(n,s.fieldPath)&&Jp(l))i=this.Kn(i,s,l);else{const h=c.Pn(s.kind);hd.Kt.Dt(l,h)}}return this.Wn(i)}On(e,n,r){return this.Nn(e,n,r.position)}Wn(e){const n=[];for(let r=0;r<e.length;++r)n[r]=e[r].un();return n}Kn(e,n,r){const i=[...e],a=[];for(const s of r.arrayValue.values||[])for(const l of i){const c=new rp;c.seed(l.un()),hd.Kt.Dt(s,c.Pn(n.kind)),a.push(c)}return a}Un(e,n){return!!e.filters.find((r=>r instanceof kt&&r.field.isEqual(n)&&(r.op==="in"||r.op==="not-in")))}getFieldIndexes(e,n){const r=ip(e),i=Vf(e);return(n?r.J(NS,IDBKeyRange.bound(n,n)):r.J()).next((a=>{const s=[];return de.forEach(a,(l=>i.get([l.indexId,this.uid]).next((c=>{s.push((function(p,g){const x=g?new qp(g.sequenceNumber,new qa(Md(g.readTime),new Be(To(g.documentKey)),g.largestBatchId)):qp.empty(),b=p.fields.map((([C,A])=>new Yv(Hn.fromServerFormat(C),A)));return new _0(p.indexId,p.collectionGroup,b,x)})(l,c))})))).next((()=>s))}))}getNextCollectionGroupToUpdate(e){return this.getFieldIndexes(e).next((n=>n.length===0?null:(n.sort(((r,i)=>{const a=r.indexState.sequenceNumber-i.indexState.sequenceNumber;return a!==0?a:ft(r.collectionGroup,i.collectionGroup)})),n[0].collectionGroup)))}updateCollectionGroup(e,n,r){const i=ip(e),a=Vf(e);return this.Gn(e).next((s=>i.J(NS,IDBKeyRange.bound(n,n)).next((l=>de.forEach(l,(c=>a.put(l2(c.indexId,this.uid,s,r))))))))}updateIndexEntries(e,n){const r=new Map;return de.forEach(n,((i,a)=>{const s=r.get(i.collectionGroup);return(s?de.resolve(s):this.getFieldIndexes(e,i.collectionGroup)).next((l=>(r.set(i.collectionGroup,l),de.forEach(l,(c=>this.zn(e,i,c).next((h=>{const p=this.jn(a,c);return h.isEqual(p)?de.resolve():this.Jn(e,a,c,h,p)})))))))}))}Hn(e,n,r,i){return Lf(e).put(i.Rn(this.uid,this.$n(r,n.key),n.key))}Yn(e,n,r,i){return Lf(e).delete(i.Vn(this.uid,this.$n(r,n.key),n.key))}zn(e,n,r){const i=Lf(e);let a=new an(Mu);return i.ee({index:xV,range:IDBKeyRange.only([r.indexId,this.uid,r0(this.$n(r,n))])},((s,l)=>{a=a.add(new md(r.indexId,n,h2(l.arrayValue),h2(l.directionalValue)))})).next((()=>a))}jn(e,n){let r=new an(Mu);const i=this.Qn(n,e);if(i==null)return r;const a=CS(n);if(a!=null){const s=e.data.field(a.fieldPath);if(Jp(s))for(const l of s.arrayValue.values||[])r=r.add(new md(n.indexId,e.key,this.Ln(l),i))}else r=r.add(new md(n.indexId,e.key,bv,i));return r}Jn(e,n,r,i,a){ke(g2,"Updating index entries for document '%s'",n.key);const s=[];return(function(c,h,p,g,x){const b=c.getIterator(),C=h.getIterator();let A=Of(b),D=Of(C);for(;A||D;){let R=!1,j=!1;if(A&&D){const O=p(A,D);O<0?j=!0:O>0&&(R=!0)}else A!=null?j=!0:R=!0;R?(g(D),D=Of(C)):j?(x(A),A=Of(b)):(A=Of(b),D=Of(C))}})(i,a,Mu,(l=>{s.push(this.Hn(e,n,r,l))}),(l=>{s.push(this.Yn(e,n,r,l))})),de.waitFor(s)}Gn(e){let n=1;return Vf(e).ee({index:vV,reverse:!0,range:IDBKeyRange.upperBound([this.uid,Number.MAX_SAFE_INTEGER])},((r,i,a)=>{a.done(),n=i.sequenceNumber+1})).next((()=>n))}createRange(e,n,r){r=r.sort(((s,l)=>Mu(s,l))).filter(((s,l,c)=>!l||Mu(s,c[l-1])!==0));const i=[];i.push(e);for(const s of r){const l=Mu(s,e),c=Mu(s,n);if(l===0)i[0]=e.An();else if(l>0&&c<0)i.push(s),i.push(s.An());else if(c>0)break}i.push(n);const a=[];for(let s=0;s<i.length;s+=2){if(this.Zn(i[s],i[s+1]))return[];const l=i[s].Vn(this.uid,bv,Be.empty()),c=i[s+1].Vn(this.uid,bv,Be.empty());a.push(IDBKeyRange.bound(l,c))}return a}Zn(e,n){return Mu(e,n)>0}getMinOffsetFromCollectionGroup(e,n){return this.getFieldIndexes(e,n).next(v2)}getMinOffset(e,n){return de.mapArray(this.Mn(n),(r=>this.xn(e,r).next((i=>i||Ge(44426))))).next(v2)}}function y2(t){return Dr(t,Kp)}function Lf(t){return Dr(t,Pp)}function ip(t){return Dr(t,PA)}function Vf(t){return Dr(t,Np)}function v2(t){Qe(t.length!==0,28825);let e=t[0].indexState.offset,n=e.largestBatchId;for(let r=1;r<t.length;r++){const i=t[r].indexState.offset;CA(i,e)<0&&(e=i),n<i.largestBatchId&&(n=i.largestBatchId)}return new qa(e.readTime,e.documentKey,n)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const x2={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},T6=41943040;class _i{static withCacheSize(e){return new _i(e,_i.DEFAULT_COLLECTION_PERCENTILE,_i.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(e,n,r){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=n,this.maximumSequenceNumbersToCollect=r}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function S6(t,e,n){const r=t.store(Ls),i=t.store(_h),a=[],s=IDBKeyRange.only(n.batchId);let l=0;const c=r.ee({range:s},((p,g,x)=>(l++,x.delete())));a.push(c.next((()=>{Qe(l===1,47070,{batchId:n.batchId})})));const h=[];for(const p of n.mutations){const g=pV(e,p.key.path,n.batchId);a.push(i.delete(g)),h.push(p.key)}return de.waitFor(a).next((()=>h))}function P0(t){if(!t)return 0;let e;if(t.document)e=t.document;else if(t.unknownDocument)e=t.unknownDocument;else{if(!t.noDocument)throw Ge(14731);e=t.noDocument}return JSON.stringify(e).length}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */_i.DEFAULT_COLLECTION_PERCENTILE=10,_i.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,_i.DEFAULT=new _i(T6,_i.DEFAULT_COLLECTION_PERCENTILE,_i.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),_i.DISABLED=new _i(-1,0,0);class g_{constructor(e,n,r,i){this.userId=e,this.serializer=n,this.indexManager=r,this.referenceDelegate=i,this.Xn={}}static wt(e,n,r,i){Qe(e.uid!=="",64387);const a=e.isAuthenticated()?e.uid:"";return new g_(a,n,r,i)}checkEmpty(e){let n=!0;const r=IDBKeyRange.bound([this.userId,Number.NEGATIVE_INFINITY],[this.userId,Number.POSITIVE_INFINITY]);return Ou(e).ee({index:gd,range:r},((i,a,s)=>{n=!1,s.done()})).next((()=>n))}addMutationBatch(e,n,r,i){const a=Kf(e),s=Ou(e);return s.add({}).next((l=>{Qe(typeof l=="number",49019);const c=new FA(l,n,r,i),h=(function(b,C,A){const D=A.baseMutations.map((j=>eg(b.yt,j))),R=A.mutations.map((j=>eg(b.yt,j)));return{userId:C,batchId:A.batchId,localWriteTimeMs:A.localWriteTime.toMillis(),baseMutations:D,mutations:R}})(this.serializer,this.userId,c),p=[];let g=new an(((x,b)=>ft(x.canonicalString(),b.canonicalString())));for(const x of i){const b=pV(this.userId,x.key.path,l);g=g.add(x.key.path.popLast()),p.push(s.put(h)),p.push(a.put(b,gW))}return g.forEach((x=>{p.push(this.indexManager.addToCollectionParentIndex(e,x))})),e.addOnCommittedListener((()=>{this.Xn[l]=c.keys()})),de.waitFor(p).next((()=>c))}))}lookupMutationBatch(e,n){return Ou(e).get(n).next((r=>r?(Qe(r.userId===this.userId,48,"Unexpected user for mutation batch",{userId:r.userId,batchId:n}),fd(this.serializer,r)):null))}er(e,n){return this.Xn[n]?de.resolve(this.Xn[n]):this.lookupMutationBatch(e,n).next((r=>{if(r){const i=r.keys();return this.Xn[n]=i,i}return null}))}getNextMutationBatchAfterBatchId(e,n){const r=n+1,i=IDBKeyRange.lowerBound([this.userId,r]);let a=null;return Ou(e).ee({index:gd,range:i},((s,l,c)=>{l.userId===this.userId&&(Qe(l.batchId>=r,47524,{tr:r}),a=fd(this.serializer,l)),c.done()})).next((()=>a))}getHighestUnacknowledgedBatchId(e){const n=IDBKeyRange.upperBound([this.userId,Number.POSITIVE_INFINITY]);let r=_d;return Ou(e).ee({index:gd,range:n,reverse:!0},((i,a,s)=>{r=a.batchId,s.done()})).next((()=>r))}getAllMutationBatches(e){const n=IDBKeyRange.bound([this.userId,_d],[this.userId,Number.POSITIVE_INFINITY]);return Ou(e).J(gd,n).next((r=>r.map((i=>fd(this.serializer,i)))))}getAllMutationBatchesAffectingDocumentKey(e,n){const r=Zv(this.userId,n.path),i=IDBKeyRange.lowerBound(r),a=[];return Kf(e).ee({range:i},((s,l,c)=>{const[h,p,g]=s,x=To(p);if(h===this.userId&&n.path.isEqual(x))return Ou(e).get(g).next((b=>{if(!b)throw Ge(61480,{nr:s,batchId:g});Qe(b.userId===this.userId,10503,"Unexpected user for mutation batch",{userId:b.userId,batchId:g}),a.push(fd(this.serializer,b))}));c.done()})).next((()=>a))}getAllMutationBatchesAffectingDocumentKeys(e,n){let r=new an(ft);const i=[];return n.forEach((a=>{const s=Zv(this.userId,a.path),l=IDBKeyRange.lowerBound(s),c=Kf(e).ee({range:l},((h,p,g)=>{const[x,b,C]=h,A=To(b);x===this.userId&&a.path.isEqual(A)?r=r.add(C):g.done()}));i.push(c)})),de.waitFor(i).next((()=>this.rr(e,r)))}getAllMutationBatchesAffectingQuery(e,n){const r=n.path,i=r.length+1,a=Zv(this.userId,r),s=IDBKeyRange.lowerBound(a);let l=new an(ft);return Kf(e).ee({range:s},((c,h,p)=>{const[g,x,b]=c,C=To(x);g===this.userId&&r.isPrefixOf(C)?C.length===i&&(l=l.add(b)):p.done()})).next((()=>this.rr(e,l)))}rr(e,n){const r=[],i=[];return n.forEach((a=>{i.push(Ou(e).get(a).next((s=>{if(s===null)throw Ge(35274,{batchId:a});Qe(s.userId===this.userId,9748,"Unexpected user for mutation batch",{userId:s.userId,batchId:a}),r.push(fd(this.serializer,s))})))})),de.waitFor(i).next((()=>r))}removeMutationBatch(e,n){return S6(e.le,this.userId,n).next((r=>(e.addOnCommittedListener((()=>{this.ir(n.batchId)})),de.forEach(r,(i=>this.referenceDelegate.markPotentiallyOrphaned(e,i))))))}ir(e){delete this.Xn[e]}performConsistencyCheck(e){return this.checkEmpty(e).next((n=>{if(!n)return de.resolve();const r=IDBKeyRange.lowerBound((function(s){return[s]})(this.userId)),i=[];return Kf(e).ee({range:r},((a,s,l)=>{if(a[0]===this.userId){const c=To(a[1]);i.push(c)}else l.done()})).next((()=>{Qe(i.length===0,56720,{sr:i.map((a=>a.canonicalString()))})}))}))}containsKey(e,n){return A6(e,this.userId,n)}_r(e){return C6(e).get(this.userId).next((n=>n||{userId:this.userId,lastAcknowledgedBatchId:_d,lastStreamToken:""}))}}function A6(t,e,n){const r=Zv(e,n.path),i=r[1],a=IDBKeyRange.lowerBound(r);let s=!1;return Kf(t).ee({range:a,X:!0},((l,c,h)=>{const[p,g,x]=l;p===e&&g===i&&(s=!0),h.done()})).next((()=>s))}function Ou(t){return Dr(t,Ls)}function Kf(t){return Dr(t,_h)}function C6(t){return Dr(t,Gp)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Od{constructor(e){this.ar=e}next(){return this.ar+=2,this.ar}static ur(){return new Od(0)}static cr(){return new Od(-1)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class UY{constructor(e,n){this.referenceDelegate=e,this.serializer=n}allocateTargetId(e){return this.lr(e).next((n=>{const r=new Od(n.highestTargetId);return n.highestTargetId=r.next(),this.hr(e,n).next((()=>n.highestTargetId))}))}getLastRemoteSnapshotVersion(e){return this.lr(e).next((n=>rt.fromTimestamp(new ze(n.lastRemoteSnapshotVersion.seconds,n.lastRemoteSnapshotVersion.nanoseconds))))}getHighestSequenceNumber(e){return this.lr(e).next((n=>n.highestListenSequenceNumber))}setTargetsMetadata(e,n,r){return this.lr(e).next((i=>(i.highestListenSequenceNumber=n,r&&(i.lastRemoteSnapshotVersion=r.toTimestamp()),n>i.highestListenSequenceNumber&&(i.highestListenSequenceNumber=n),this.hr(e,i))))}addTargetData(e,n){return this.Pr(e,n).next((()=>this.lr(e).next((r=>(r.targetCount+=1,this.Tr(n,r),this.hr(e,r))))))}updateTargetData(e,n){return this.Pr(e,n)}removeTargetData(e,n){return this.removeMatchingKeysForTargetId(e,n.targetId).next((()=>Uf(e).delete(n.targetId))).next((()=>this.lr(e))).next((r=>(Qe(r.targetCount>0,8065),r.targetCount-=1,this.hr(e,r))))}removeTargets(e,n,r){let i=0;const a=[];return Uf(e).ee(((s,l)=>{const c=bp(l);c.sequenceNumber<=n&&r.get(c.targetId)===null&&(i++,a.push(this.removeTargetData(e,c)))})).next((()=>de.waitFor(a))).next((()=>i))}forEachTarget(e,n){return Uf(e).ee(((r,i)=>{const a=bp(i);n(a)}))}lr(e){return _2(e).get(E0).next((n=>(Qe(n!==null,2888),n)))}hr(e,n){return _2(e).put(E0,n)}Pr(e,n){return Uf(e).put(_6(this.serializer,n))}Tr(e,n){let r=!1;return e.targetId>n.highestTargetId&&(n.highestTargetId=e.targetId,r=!0),e.sequenceNumber>n.highestListenSequenceNumber&&(n.highestListenSequenceNumber=e.sequenceNumber,r=!0),r}getTargetCount(e){return this.lr(e).next((n=>n.targetCount))}getTargetData(e,n){const r=Rd(n),i=IDBKeyRange.bound([r,Number.NEGATIVE_INFINITY],[r,Number.POSITIVE_INFINITY]);let a=null;return Uf(e).ee({range:i,index:yV},((s,l,c)=>{const h=bp(l);Ng(n,h.target)&&(a=h,c.done())})).next((()=>a))}addMatchingKeys(e,n,r){const i=[],a=qu(e);return n.forEach((s=>{const l=Ti(s.path);i.push(a.put({targetId:r,path:l})),i.push(this.referenceDelegate.addReference(e,r,s))})),de.waitFor(i)}removeMatchingKeys(e,n,r){const i=qu(e);return de.forEach(n,(a=>{const s=Ti(a.path);return de.waitFor([i.delete([r,s]),this.referenceDelegate.removeReference(e,r,a)])}))}removeMatchingKeysForTargetId(e,n){const r=qu(e),i=IDBKeyRange.bound([n],[n+1],!1,!0);return r.delete(i)}getMatchingKeysForTargetId(e,n){const r=IDBKeyRange.bound([n],[n+1],!1,!0),i=qu(e);let a=Et();return i.ee({range:r,X:!0},((s,l,c)=>{const h=To(s[1]),p=new Be(h);a=a.add(p)})).next((()=>a))}containsKey(e,n){const r=Ti(n.path),i=IDBKeyRange.bound([r],[sV(r)],!1,!0);let a=0;return qu(e).ee({index:NA,X:!0,range:i},(([s,l],c,h)=>{s!==0&&(a++,h.done())})).next((()=>a>0))}At(e,n){return Uf(e).get(n).next((r=>r?bp(r):null))}}function Uf(t){return Dr(t,bh)}function _2(t){return Dr(t,bd)}function qu(t){return Dr(t,wh)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const b2="LruGarbageCollector",I6=1048576;function w2([t,e],[n,r]){const i=ft(t,n);return i===0?ft(e,r):i}class FY{constructor(e){this.Ir=e,this.buffer=new an(w2),this.Er=0}dr(){return++this.Er}Ar(e){const n=[e,this.dr()];if(this.buffer.size<this.Ir)this.buffer=this.buffer.add(n);else{const r=this.buffer.last();w2(n,r)<0&&(this.buffer=this.buffer.delete(r).add(n))}}get maxValue(){return this.buffer.last()[0]}}class N6{constructor(e,n,r){this.garbageCollector=e,this.asyncQueue=n,this.localStore=r,this.Rr=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.Vr(6e4)}stop(){this.Rr&&(this.Rr.cancel(),this.Rr=null)}get started(){return this.Rr!==null}Vr(e){ke(b2,`Garbage collection scheduled in ${e}ms`),this.Rr=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,(async()=>{this.Rr=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(n){gc(n)?ke(b2,"Ignoring IndexedDB error during garbage collection: ",n):await pc(n)}await this.Vr(3e5)}))}}class BY{constructor(e,n){this.mr=e,this.params=n}calculateTargetCount(e,n){return this.mr.gr(e).next((r=>Math.floor(n/100*r)))}nthSequenceNumber(e,n){if(n===0)return de.resolve(ca.ce);const r=new FY(n);return this.mr.forEachTarget(e,(i=>r.Ar(i.sequenceNumber))).next((()=>this.mr.pr(e,(i=>r.Ar(i))))).next((()=>r.maxValue))}removeTargets(e,n,r){return this.mr.removeTargets(e,n,r)}removeOrphanedDocuments(e,n){return this.mr.removeOrphanedDocuments(e,n)}collect(e,n){return this.params.cacheSizeCollectionThreshold===-1?(ke("LruGarbageCollector","Garbage collection skipped; disabled"),de.resolve(x2)):this.getCacheSize(e).next((r=>r<this.params.cacheSizeCollectionThreshold?(ke("LruGarbageCollector",`Garbage collection skipped; Cache size ${r} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),x2):this.yr(e,n)))}getCacheSize(e){return this.mr.getCacheSize(e)}yr(e,n){let r,i,a,s,l,c,h;const p=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next((g=>(g>this.params.maximumSequenceNumbersToCollect?(ke("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${g}`),i=this.params.maximumSequenceNumbersToCollect):i=g,s=Date.now(),this.nthSequenceNumber(e,i)))).next((g=>(r=g,l=Date.now(),this.removeTargets(e,r,n)))).next((g=>(a=g,c=Date.now(),this.removeOrphanedDocuments(e,r)))).next((g=>(h=Date.now(),qf()<=Rt.DEBUG&&ke("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${s-p}ms
	Determined least recently used ${i} in `+(l-s)+`ms
	Removed ${a} targets in `+(c-l)+`ms
	Removed ${g} documents in `+(h-c)+`ms
Total Duration: ${h-p}ms`),de.resolve({didRun:!0,sequenceNumbersCollected:i,targetsRemoved:a,documentsRemoved:g}))))}}function P6(t,e){return new BY(t,e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zY{constructor(e,n){this.db=e,this.garbageCollector=P6(this,n)}gr(e){const n=this.wr(e);return this.db.getTargetCache().getTargetCount(e).next((r=>n.next((i=>r+i))))}wr(e){let n=0;return this.pr(e,(r=>{n++})).next((()=>n))}forEachTarget(e,n){return this.db.getTargetCache().forEachTarget(e,n)}pr(e,n){return this.Sr(e,((r,i)=>n(i)))}addReference(e,n,r){return wv(e,r)}removeReference(e,n,r){return wv(e,r)}removeTargets(e,n,r){return this.db.getTargetCache().removeTargets(e,n,r)}markPotentiallyOrphaned(e,n){return wv(e,n)}br(e,n){return(function(i,a){let s=!1;return C6(i).te((l=>A6(i,l,a).next((c=>(c&&(s=!0),de.resolve(!c)))))).next((()=>s))})(e,n)}removeOrphanedDocuments(e,n){const r=this.db.getRemoteDocumentCache().newChangeBuffer(),i=[];let a=0;return this.Sr(e,((s,l)=>{if(l<=n){const c=this.br(e,s).next((h=>{if(!h)return a++,r.getEntry(e,s).next((()=>(r.removeEntry(s,rt.min()),qu(e).delete((function(g){return[0,Ti(g.path)]})(s)))))}));i.push(c)}})).next((()=>de.waitFor(i))).next((()=>r.apply(e))).next((()=>a))}removeTarget(e,n){const r=n.withSequenceNumber(e.currentSequenceNumber);return this.db.getTargetCache().updateTargetData(e,r)}updateLimboDocument(e,n){return wv(e,n)}Sr(e,n){const r=qu(e);let i,a=ca.ce;return r.ee({index:NA},(([s,l],{path:c,sequenceNumber:h})=>{s===0?(a!==ca.ce&&n(new Be(To(i)),a),a=h,i=c):a=ca.ce})).next((()=>{a!==ca.ce&&n(new Be(To(i)),a)}))}getCacheSize(e){return this.db.getRemoteDocumentCache().getSize(e)}}function wv(t,e){return qu(t).put((function(r,i){return{targetId:0,path:Ti(r.path),sequenceNumber:i}})(e,t.currentSequenceNumber))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class D6{constructor(){this.changes=new Bl((e=>e.toString()),((e,n)=>e.isEqual(n))),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,n){this.assertNotApplied(),this.changes.set(e,Ln.newInvalidDocument(e).setReadTime(n))}getEntry(e,n){this.assertNotApplied();const r=this.changes.get(n);return r!==void 0?de.resolve(r):this.getFromCache(e,n)}getEntries(e,n){return this.getAllFromCache(e,n)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qY{constructor(e){this.serializer=e}setIndexManager(e){this.indexManager=e}addEntry(e,n,r){return id(e).put(r)}removeEntry(e,n,r){return id(e).delete((function(a,s){const l=a.path.toArray();return[l.slice(0,l.length-2),l[l.length-2],I0(s),l[l.length-1]]})(n,r))}updateMetadata(e,n){return this.getMetadata(e).next((r=>(r.byteSize+=n,this.Dr(e,r))))}getEntry(e,n){let r=Ln.newInvalidDocument(n);return id(e).ee({index:Jv,range:IDBKeyRange.only(ap(n))},((i,a)=>{r=this.Cr(n,a)})).next((()=>r))}vr(e,n){let r={size:0,document:Ln.newInvalidDocument(n)};return id(e).ee({index:Jv,range:IDBKeyRange.only(ap(n))},((i,a)=>{r={document:this.Cr(n,a),size:P0(a)}})).next((()=>r))}getEntries(e,n){let r=La();return this.Fr(e,n,((i,a)=>{const s=this.Cr(i,a);r=r.insert(i,s)})).next((()=>r))}Mr(e,n){let r=La(),i=new _n(Be.comparator);return this.Fr(e,n,((a,s)=>{const l=this.Cr(a,s);r=r.insert(a,l),i=i.insert(a,P0(s))})).next((()=>({documents:r,Or:i})))}Fr(e,n,r){if(n.isEmpty())return de.resolve();let i=new an(S2);n.forEach((c=>i=i.add(c)));const a=IDBKeyRange.bound(ap(i.first()),ap(i.last())),s=i.getIterator();let l=s.getNext();return id(e).ee({index:Jv,range:a},((c,h,p)=>{const g=Be.fromSegments([...h.prefixPath,h.collectionGroup,h.documentId]);for(;l&&S2(l,g)<0;)r(l,null),l=s.getNext();l&&l.isEqual(g)&&(r(l,h),l=s.hasNext()?s.getNext():null),l?p.j(ap(l)):p.done()})).next((()=>{for(;l;)r(l,null),l=s.hasNext()?s.getNext():null}))}getDocumentsMatchingQuery(e,n,r,i,a){const s=n.path,l=[s.popLast().toArray(),s.lastSegment(),I0(r.readTime),r.documentKey.path.isEmpty()?"":r.documentKey.path.lastSegment()],c=[s.popLast().toArray(),s.lastSegment(),[Number.MAX_SAFE_INTEGER,Number.MAX_SAFE_INTEGER],""];return id(e).J(IDBKeyRange.bound(l,c,!0)).next((h=>{a==null||a.incrementDocumentReadCount(h.length);let p=La();for(const g of h){const x=this.Cr(Be.fromSegments(g.prefixPath.concat(g.collectionGroup,g.documentId)),g);x.isFoundDocument()&&(Dg(n,x)||i.has(x.key))&&(p=p.insert(x.key,x))}return p}))}getAllFromCollectionGroup(e,n,r,i){let a=La();const s=T2(n,r),l=T2(n,qa.max());return id(e).ee({index:gV,range:IDBKeyRange.bound(s,l,!0)},((c,h,p)=>{const g=this.Cr(Be.fromSegments(h.prefixPath.concat(h.collectionGroup,h.documentId)),h);a=a.insert(g.key,g),a.size===i&&p.done()})).next((()=>a))}newChangeBuffer(e){return new HY(this,!!e&&e.trackRemovals)}getSize(e){return this.getMetadata(e).next((n=>n.byteSize))}getMetadata(e){return E2(e).get(IS).next((n=>(Qe(!!n,20021),n)))}Dr(e,n){return E2(e).put(IS,n)}Cr(e,n){if(n){const r=NY(this.serializer,n);if(!(r.isNoDocument()&&r.version.isEqual(rt.min())))return r}return Ln.newInvalidDocument(e)}}function R6(t){return new qY(t)}class HY extends D6{constructor(e,n){super(),this.Nr=e,this.trackRemovals=n,this.Br=new Bl((r=>r.toString()),((r,i)=>r.isEqual(i)))}applyChanges(e){const n=[];let r=0,i=new an(((a,s)=>ft(a.canonicalString(),s.canonicalString())));return this.changes.forEach(((a,s)=>{const l=this.Br.get(a);if(n.push(this.Nr.removeEntry(e,a,l.readTime)),s.isValidDocument()){const c=s2(this.Nr.serializer,s);i=i.add(a.path.popLast());const h=P0(c);r+=h-l.size,n.push(this.Nr.addEntry(e,a,c))}else if(r-=l.size,this.trackRemovals){const c=s2(this.Nr.serializer,s.convertToNoDocument(rt.min()));n.push(this.Nr.addEntry(e,a,c))}})),i.forEach((a=>{n.push(this.Nr.indexManager.addToCollectionParentIndex(e,a))})),n.push(this.Nr.updateMetadata(e,r)),de.waitFor(n)}getFromCache(e,n){return this.Nr.vr(e,n).next((r=>(this.Br.set(n,{size:r.size,readTime:r.document.readTime}),r.document)))}getAllFromCache(e,n){return this.Nr.Mr(e,n).next((({documents:r,Or:i})=>(i.forEach(((a,s)=>{this.Br.set(a,{size:s,readTime:r.get(a).readTime})})),r)))}}function E2(t){return Dr(t,$p)}function id(t){return Dr(t,w0)}function ap(t){const e=t.path.toArray();return[e.slice(0,e.length-2),e[e.length-2],e[e.length-1]]}function T2(t,e){const n=e.documentKey.path.toArray();return[t,I0(e.readTime),n.slice(0,n.length-2),n.length>0?n[n.length-1]:""]}function S2(t,e){const n=t.path.toArray(),r=e.path.toArray();let i=0;for(let a=0;a<n.length-2&&a<r.length-2;++a)if(i=ft(n[a],r[a]),i)return i;return i=ft(n.length,r.length),i||(i=ft(n[n.length-2],r[r.length-2]),i||ft(n[n.length-1],r[r.length-1]))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class GY{constructor(e,n){this.overlayedDocument=e,this.mutatedFields=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class k6{constructor(e,n,r,i){this.remoteDocumentCache=e,this.mutationQueue=n,this.documentOverlayCache=r,this.indexManager=i}getDocument(e,n){let r=null;return this.documentOverlayCache.getOverlay(e,n).next((i=>(r=i,this.remoteDocumentCache.getEntry(e,n)))).next((i=>(r!==null&&Mp(r.mutation,i,da.empty(),ze.now()),i)))}getDocuments(e,n){return this.remoteDocumentCache.getEntries(e,n).next((r=>this.getLocalViewOfDocuments(e,r,Et()).next((()=>r))))}getLocalViewOfDocuments(e,n,r=Et()){const i=So();return this.populateOverlays(e,i,n).next((()=>this.computeViews(e,n,i,r).next((a=>{let s=xp();return a.forEach(((l,c)=>{s=s.insert(l,c.overlayedDocument)})),s}))))}getOverlayedDocuments(e,n){const r=So();return this.populateOverlays(e,r,n).next((()=>this.computeViews(e,n,r,Et())))}populateOverlays(e,n,r){const i=[];return r.forEach((a=>{n.has(a)||i.push(a)})),this.documentOverlayCache.getOverlays(e,i).next((a=>{a.forEach(((s,l)=>{n.set(s,l)}))}))}computeViews(e,n,r,i){let a=La();const s=kp(),l=(function(){return kp()})();return n.forEach(((c,h)=>{const p=r.get(h.key);i.has(h.key)&&(p===void 0||p.mutation instanceof zl)?a=a.insert(h.key,h):p!==void 0?(s.set(h.key,p.mutation.getFieldMask()),Mp(p.mutation,h,p.mutation.getFieldMask(),ze.now())):s.set(h.key,da.empty())})),this.recalculateAndSaveOverlays(e,a).next((c=>(c.forEach(((h,p)=>s.set(h,p))),n.forEach(((h,p)=>l.set(h,new GY(p,s.get(h)??null)))),l)))}recalculateAndSaveOverlays(e,n){const r=kp();let i=new _n(((s,l)=>s-l)),a=Et();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,n).next((s=>{for(const l of s)l.keys().forEach((c=>{const h=n.get(c);if(h===null)return;let p=r.get(c)||da.empty();p=l.applyToLocalView(h,p),r.set(c,p);const g=(i.get(l.batchId)||Et()).add(c);i=i.insert(l.batchId,g)}))})).next((()=>{const s=[],l=i.getReverseIterator();for(;l.hasNext();){const c=l.getNext(),h=c.key,p=c.value,g=YV();p.forEach((x=>{if(!a.has(x)){const b=n6(n.get(x),r.get(x));b!==null&&g.set(x,b),a=a.add(x)}})),s.push(this.documentOverlayCache.saveOverlays(e,h,g))}return de.waitFor(s)})).next((()=>r))}recalculateAndSaveOverlaysForDocumentKeys(e,n){return this.remoteDocumentCache.getEntries(e,n).next((r=>this.recalculateAndSaveOverlays(e,r)))}getDocumentsMatchingQuery(e,n,r,i){return(function(s){return Be.isDocumentKey(s.path)&&s.collectionGroup===null&&s.filters.length===0})(n)?this.getDocumentsMatchingDocumentQuery(e,n.path):qV(n)?this.getDocumentsMatchingCollectionGroupQuery(e,n,r,i):this.getDocumentsMatchingCollectionQuery(e,n,r,i)}getNextDocuments(e,n,r,i){return this.remoteDocumentCache.getAllFromCollectionGroup(e,n,r,i).next((a=>{const s=i-a.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,n,r.largestBatchId,i-a.size):de.resolve(So());let l=xh,c=a;return s.next((h=>de.forEach(h,((p,g)=>(l<g.largestBatchId&&(l=g.largestBatchId),a.get(p)?de.resolve():this.remoteDocumentCache.getEntry(e,p).next((x=>{c=c.insert(p,x)}))))).next((()=>this.populateOverlays(e,h,a))).next((()=>this.computeViews(e,c,h,Et()))).next((p=>({batchId:l,changes:WV(p)})))))}))}getDocumentsMatchingDocumentQuery(e,n){return this.getDocument(e,new Be(n)).next((r=>{let i=xp();return r.isFoundDocument()&&(i=i.insert(r.key,r)),i}))}getDocumentsMatchingCollectionGroupQuery(e,n,r,i){const a=n.collectionGroup;let s=xp();return this.indexManager.getCollectionParents(e,a).next((l=>de.forEach(l,(c=>{const h=(function(g,x){return new Pg(x,null,g.explicitOrderBy.slice(),g.filters.slice(),g.limit,g.limitType,g.startAt,g.endAt)})(n,c.child(a));return this.getDocumentsMatchingCollectionQuery(e,h,r,i).next((p=>{p.forEach(((g,x)=>{s=s.insert(g,x)}))}))})).next((()=>s))))}getDocumentsMatchingCollectionQuery(e,n,r,i){let a;return this.documentOverlayCache.getOverlaysForCollection(e,n.path,r.largestBatchId).next((s=>(a=s,this.remoteDocumentCache.getDocumentsMatchingQuery(e,n,r,a,i)))).next((s=>{a.forEach(((c,h)=>{const p=h.getKey();s.get(p)===null&&(s=s.insert(p,Ln.newInvalidDocument(p)))}));let l=xp();return s.forEach(((c,h)=>{const p=a.get(c);p!==void 0&&Mp(p.mutation,h,da.empty(),ze.now()),Dg(n,h)&&(l=l.insert(c,h))})),l}))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $Y{constructor(e){this.serializer=e,this.Lr=new Map,this.kr=new Map}getBundleMetadata(e,n){return de.resolve(this.Lr.get(n))}saveBundleMetadata(e,n){return this.Lr.set(n.id,(function(i){return{id:i.id,version:i.version,createTime:Wr(i.createTime)}})(n)),de.resolve()}getNamedQuery(e,n){return de.resolve(this.kr.get(n))}saveNamedQuery(e,n){return this.kr.set(n.name,(function(i){return{name:i.name,query:b6(i.bundledQuery),readTime:Wr(i.readTime)}})(n)),de.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class KY{constructor(){this.overlays=new _n(Be.comparator),this.qr=new Map}getOverlay(e,n){return de.resolve(this.overlays.get(n))}getOverlays(e,n){const r=So();return de.forEach(n,(i=>this.getOverlay(e,i).next((a=>{a!==null&&r.set(i,a)})))).next((()=>r))}saveOverlays(e,n,r){return r.forEach(((i,a)=>{this.St(e,n,a)})),de.resolve()}removeOverlaysForBatchId(e,n,r){const i=this.qr.get(r);return i!==void 0&&(i.forEach((a=>this.overlays=this.overlays.remove(a))),this.qr.delete(r)),de.resolve()}getOverlaysForCollection(e,n,r){const i=So(),a=n.length+1,s=new Be(n.child("")),l=this.overlays.getIteratorFrom(s);for(;l.hasNext();){const c=l.getNext().value,h=c.getKey();if(!n.isPrefixOf(h.path))break;h.path.length===a&&c.largestBatchId>r&&i.set(c.getKey(),c)}return de.resolve(i)}getOverlaysForCollectionGroup(e,n,r,i){let a=new _n(((h,p)=>h-p));const s=this.overlays.getIterator();for(;s.hasNext();){const h=s.getNext().value;if(h.getKey().getCollectionGroup()===n&&h.largestBatchId>r){let p=a.get(h.largestBatchId);p===null&&(p=So(),a=a.insert(h.largestBatchId,p)),p.set(h.getKey(),h)}}const l=So(),c=a.getIterator();for(;c.hasNext()&&(c.getNext().value.forEach(((h,p)=>l.set(h,p))),!(l.size()>=i)););return de.resolve(l)}St(e,n,r){const i=this.overlays.get(r.key);if(i!==null){const s=this.qr.get(i.largestBatchId).delete(r.key);this.qr.set(i.largestBatchId,s)}this.overlays=this.overlays.insert(r.key,new zA(n,r));let a=this.qr.get(n);a===void 0&&(a=Et(),this.qr.set(n,a)),this.qr.set(n,a.add(r.key))}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class WY{constructor(){this.sessionToken=cr.EMPTY_BYTE_STRING}getSessionToken(e){return de.resolve(this.sessionToken)}setSessionToken(e,n){return this.sessionToken=n,de.resolve()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class KA{constructor(){this.Qr=new an(Gr.$r),this.Ur=new an(Gr.Kr)}isEmpty(){return this.Qr.isEmpty()}addReference(e,n){const r=new Gr(e,n);this.Qr=this.Qr.add(r),this.Ur=this.Ur.add(r)}Wr(e,n){e.forEach((r=>this.addReference(r,n)))}removeReference(e,n){this.Gr(new Gr(e,n))}zr(e,n){e.forEach((r=>this.removeReference(r,n)))}jr(e){const n=new Be(new Ut([])),r=new Gr(n,e),i=new Gr(n,e+1),a=[];return this.Ur.forEachInRange([r,i],(s=>{this.Gr(s),a.push(s.key)})),a}Jr(){this.Qr.forEach((e=>this.Gr(e)))}Gr(e){this.Qr=this.Qr.delete(e),this.Ur=this.Ur.delete(e)}Hr(e){const n=new Be(new Ut([])),r=new Gr(n,e),i=new Gr(n,e+1);let a=Et();return this.Ur.forEachInRange([r,i],(s=>{a=a.add(s.key)})),a}containsKey(e){const n=new Gr(e,0),r=this.Qr.firstAfterOrEqual(n);return r!==null&&e.isEqual(r.key)}}class Gr{constructor(e,n){this.key=e,this.Yr=n}static $r(e,n){return Be.comparator(e.key,n.key)||ft(e.Yr,n.Yr)}static Kr(e,n){return ft(e.Yr,n.Yr)||Be.comparator(e.key,n.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class YY{constructor(e,n){this.indexManager=e,this.referenceDelegate=n,this.mutationQueue=[],this.tr=1,this.Zr=new an(Gr.$r)}checkEmpty(e){return de.resolve(this.mutationQueue.length===0)}addMutationBatch(e,n,r,i){const a=this.tr;this.tr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const s=new FA(a,n,r,i);this.mutationQueue.push(s);for(const l of i)this.Zr=this.Zr.add(new Gr(l.key,a)),this.indexManager.addToCollectionParentIndex(e,l.key.path.popLast());return de.resolve(s)}lookupMutationBatch(e,n){return de.resolve(this.Xr(n))}getNextMutationBatchAfterBatchId(e,n){const r=n+1,i=this.ei(r),a=i<0?0:i;return de.resolve(this.mutationQueue.length>a?this.mutationQueue[a]:null)}getHighestUnacknowledgedBatchId(){return de.resolve(this.mutationQueue.length===0?_d:this.tr-1)}getAllMutationBatches(e){return de.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,n){const r=new Gr(n,0),i=new Gr(n,Number.POSITIVE_INFINITY),a=[];return this.Zr.forEachInRange([r,i],(s=>{const l=this.Xr(s.Yr);a.push(l)})),de.resolve(a)}getAllMutationBatchesAffectingDocumentKeys(e,n){let r=new an(ft);return n.forEach((i=>{const a=new Gr(i,0),s=new Gr(i,Number.POSITIVE_INFINITY);this.Zr.forEachInRange([a,s],(l=>{r=r.add(l.Yr)}))})),de.resolve(this.ti(r))}getAllMutationBatchesAffectingQuery(e,n){const r=n.path,i=r.length+1;let a=r;Be.isDocumentKey(a)||(a=a.child(""));const s=new Gr(new Be(a),0);let l=new an(ft);return this.Zr.forEachWhile((c=>{const h=c.key.path;return!!r.isPrefixOf(h)&&(h.length===i&&(l=l.add(c.Yr)),!0)}),s),de.resolve(this.ti(l))}ti(e){const n=[];return e.forEach((r=>{const i=this.Xr(r);i!==null&&n.push(i)})),n}removeMutationBatch(e,n){Qe(this.ni(n.batchId,"removed")===0,55003),this.mutationQueue.shift();let r=this.Zr;return de.forEach(n.mutations,(i=>{const a=new Gr(i.key,n.batchId);return r=r.delete(a),this.referenceDelegate.markPotentiallyOrphaned(e,i.key)})).next((()=>{this.Zr=r}))}ir(e){}containsKey(e,n){const r=new Gr(n,0),i=this.Zr.firstAfterOrEqual(r);return de.resolve(n.isEqual(i&&i.key))}performConsistencyCheck(e){return this.mutationQueue.length,de.resolve()}ni(e,n){return this.ei(e)}ei(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Xr(e){const n=this.ei(e);return n<0||n>=this.mutationQueue.length?null:this.mutationQueue[n]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ZY{constructor(e){this.ri=e,this.docs=(function(){return new _n(Be.comparator)})(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,n){const r=n.key,i=this.docs.get(r),a=i?i.size:0,s=this.ri(n);return this.docs=this.docs.insert(r,{document:n.mutableCopy(),size:s}),this.size+=s-a,this.indexManager.addToCollectionParentIndex(e,r.path.popLast())}removeEntry(e){const n=this.docs.get(e);n&&(this.docs=this.docs.remove(e),this.size-=n.size)}getEntry(e,n){const r=this.docs.get(n);return de.resolve(r?r.document.mutableCopy():Ln.newInvalidDocument(n))}getEntries(e,n){let r=La();return n.forEach((i=>{const a=this.docs.get(i);r=r.insert(i,a?a.document.mutableCopy():Ln.newInvalidDocument(i))})),de.resolve(r)}getDocumentsMatchingQuery(e,n,r,i){let a=La();const s=n.path,l=new Be(s.child("__id-9223372036854775808__")),c=this.docs.getIteratorFrom(l);for(;c.hasNext();){const{key:h,value:{document:p}}=c.getNext();if(!s.isPrefixOf(h.path))break;h.path.length>s.length+1||CA(cV(p),r)<=0||(i.has(p.key)||Dg(n,p))&&(a=a.insert(p.key,p.mutableCopy()))}return de.resolve(a)}getAllFromCollectionGroup(e,n,r,i){Ge(9500)}ii(e,n){return de.forEach(this.docs,(r=>n(r)))}newChangeBuffer(e){return new JY(this)}getSize(e){return de.resolve(this.size)}}class JY extends D6{constructor(e){super(),this.Nr=e}applyChanges(e){const n=[];return this.changes.forEach(((r,i)=>{i.isValidDocument()?n.push(this.Nr.addEntry(e,i)):this.Nr.removeEntry(r)})),de.waitFor(n)}getFromCache(e,n){return this.Nr.getEntry(e,n)}getAllFromCache(e,n){return this.Nr.getEntries(e,n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class QY{constructor(e){this.persistence=e,this.si=new Bl((n=>Rd(n)),Ng),this.lastRemoteSnapshotVersion=rt.min(),this.highestTargetId=0,this.oi=0,this._i=new KA,this.targetCount=0,this.ai=Od.ur()}forEachTarget(e,n){return this.si.forEach(((r,i)=>n(i))),de.resolve()}getLastRemoteSnapshotVersion(e){return de.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return de.resolve(this.oi)}allocateTargetId(e){return this.highestTargetId=this.ai.next(),de.resolve(this.highestTargetId)}setTargetsMetadata(e,n,r){return r&&(this.lastRemoteSnapshotVersion=r),n>this.oi&&(this.oi=n),de.resolve()}Pr(e){this.si.set(e.target,e);const n=e.targetId;n>this.highestTargetId&&(this.ai=new Od(n),this.highestTargetId=n),e.sequenceNumber>this.oi&&(this.oi=e.sequenceNumber)}addTargetData(e,n){return this.Pr(n),this.targetCount+=1,de.resolve()}updateTargetData(e,n){return this.Pr(n),de.resolve()}removeTargetData(e,n){return this.si.delete(n.target),this._i.jr(n.targetId),this.targetCount-=1,de.resolve()}removeTargets(e,n,r){let i=0;const a=[];return this.si.forEach(((s,l)=>{l.sequenceNumber<=n&&r.get(l.targetId)===null&&(this.si.delete(s),a.push(this.removeMatchingKeysForTargetId(e,l.targetId)),i++)})),de.waitFor(a).next((()=>i))}getTargetCount(e){return de.resolve(this.targetCount)}getTargetData(e,n){const r=this.si.get(n)||null;return de.resolve(r)}addMatchingKeys(e,n,r){return this._i.Wr(n,r),de.resolve()}removeMatchingKeys(e,n,r){this._i.zr(n,r);const i=this.persistence.referenceDelegate,a=[];return i&&n.forEach((s=>{a.push(i.markPotentiallyOrphaned(e,s))})),de.waitFor(a)}removeMatchingKeysForTargetId(e,n){return this._i.jr(n),de.resolve()}getMatchingKeysForTargetId(e,n){const r=this._i.Hr(n);return de.resolve(r)}containsKey(e,n){return de.resolve(this._i.containsKey(n))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class WA{constructor(e,n){this.ui={},this.overlays={},this.ci=new ca(0),this.li=!1,this.li=!0,this.hi=new WY,this.referenceDelegate=e(this),this.Pi=new QY(this),this.indexManager=new LY,this.remoteDocumentCache=(function(i){return new ZY(i)})((r=>this.referenceDelegate.Ti(r))),this.serializer=new x6(n),this.Ii=new $Y(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.li=!1,Promise.resolve()}get started(){return this.li}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let n=this.overlays[e.toKey()];return n||(n=new KY,this.overlays[e.toKey()]=n),n}getMutationQueue(e,n){let r=this.ui[e.toKey()];return r||(r=new YY(n,this.referenceDelegate),this.ui[e.toKey()]=r),r}getGlobalsCache(){return this.hi}getTargetCache(){return this.Pi}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Ii}runTransaction(e,n,r){ke("MemoryPersistence","Starting transaction:",e);const i=new XY(this.ci.next());return this.referenceDelegate.Ei(),r(i).next((a=>this.referenceDelegate.di(i).next((()=>a)))).toPromise().then((a=>(i.raiseOnCommittedEvent(),a)))}Ai(e,n){return de.or(Object.values(this.ui).map((r=>()=>r.containsKey(e,n))))}}class XY extends fV{constructor(e){super(),this.currentSequenceNumber=e}}class y_{constructor(e){this.persistence=e,this.Ri=new KA,this.Vi=null}static mi(e){return new y_(e)}get fi(){if(this.Vi)return this.Vi;throw Ge(60996)}addReference(e,n,r){return this.Ri.addReference(r,n),this.fi.delete(r.toString()),de.resolve()}removeReference(e,n,r){return this.Ri.removeReference(r,n),this.fi.add(r.toString()),de.resolve()}markPotentiallyOrphaned(e,n){return this.fi.add(n.toString()),de.resolve()}removeTarget(e,n){this.Ri.jr(n.targetId).forEach((i=>this.fi.add(i.toString())));const r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,n.targetId).next((i=>{i.forEach((a=>this.fi.add(a.toString())))})).next((()=>r.removeTargetData(e,n)))}Ei(){this.Vi=new Set}di(e){const n=this.persistence.getRemoteDocumentCache().newChangeBuffer();return de.forEach(this.fi,(r=>{const i=Be.fromPath(r);return this.gi(e,i).next((a=>{a||n.removeEntry(i,rt.min())}))})).next((()=>(this.Vi=null,n.apply(e))))}updateLimboDocument(e,n){return this.gi(e,n).next((r=>{r?this.fi.delete(n.toString()):this.fi.add(n.toString())}))}Ti(e){return 0}gi(e,n){return de.or([()=>de.resolve(this.Ri.containsKey(n)),()=>this.persistence.getTargetCache().containsKey(e,n),()=>this.persistence.Ai(e,n)])}}class D0{constructor(e,n){this.persistence=e,this.pi=new Bl((r=>Ti(r.path)),((r,i)=>r.isEqual(i))),this.garbageCollector=P6(this,n)}static mi(e,n){return new D0(e,n)}Ei(){}di(e){return de.resolve()}forEachTarget(e,n){return this.persistence.getTargetCache().forEachTarget(e,n)}gr(e){const n=this.wr(e);return this.persistence.getTargetCache().getTargetCount(e).next((r=>n.next((i=>r+i))))}wr(e){let n=0;return this.pr(e,(r=>{n++})).next((()=>n))}pr(e,n){return de.forEach(this.pi,((r,i)=>this.br(e,r,i).next((a=>a?de.resolve():n(i)))))}removeTargets(e,n,r){return this.persistence.getTargetCache().removeTargets(e,n,r)}removeOrphanedDocuments(e,n){let r=0;const i=this.persistence.getRemoteDocumentCache(),a=i.newChangeBuffer();return i.ii(e,(s=>this.br(e,s,n).next((l=>{l||(r++,a.removeEntry(s,rt.min()))})))).next((()=>a.apply(e))).next((()=>r))}markPotentiallyOrphaned(e,n){return this.pi.set(n,e.currentSequenceNumber),de.resolve()}removeTarget(e,n){const r=n.withSequenceNumber(e.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(e,r)}addReference(e,n,r){return this.pi.set(r,e.currentSequenceNumber),de.resolve()}removeReference(e,n,r){return this.pi.set(r,e.currentSequenceNumber),de.resolve()}updateLimboDocument(e,n){return this.pi.set(n,e.currentSequenceNumber),de.resolve()}Ti(e){let n=e.key.toString().length;return e.isFoundDocument()&&(n+=Xv(e.data.value)),n}br(e,n,r){return de.or([()=>this.persistence.Ai(e,n),()=>this.persistence.getTargetCache().containsKey(e,n),()=>{const i=this.pi.get(n);return de.resolve(i!==void 0&&i>r)}])}getCacheSize(e){return this.persistence.getRemoteDocumentCache().getSize(e)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class eZ{constructor(e){this.serializer=e}k(e,n,r,i){const a=new a_("createOrUpgrade",n);r<1&&i>=1&&((function(c){c.createObjectStore(Ig)})(e),(function(c){c.createObjectStore(Gp,{keyPath:pW}),c.createObjectStore(Ls,{keyPath:jk,autoIncrement:!0}).createIndex(gd,Lk,{unique:!0}),c.createObjectStore(_h)})(e),A2(e),(function(c){c.createObjectStore(od)})(e));let s=de.resolve();return r<3&&i>=3&&(r!==0&&((function(c){c.deleteObjectStore(wh),c.deleteObjectStore(bh),c.deleteObjectStore(bd)})(e),A2(e)),s=s.next((()=>(function(c){const h=c.store(bd),p={highestTargetId:0,highestListenSequenceNumber:0,lastRemoteSnapshotVersion:rt.min().toTimestamp(),targetCount:0};return h.put(E0,p)})(a)))),r<4&&i>=4&&(r!==0&&(s=s.next((()=>(function(c,h){return h.store(Ls).J().next((g=>{c.deleteObjectStore(Ls),c.createObjectStore(Ls,{keyPath:jk,autoIncrement:!0}).createIndex(gd,Lk,{unique:!0});const x=h.store(Ls),b=g.map((C=>x.put(C)));return de.waitFor(b)}))})(e,a)))),s=s.next((()=>{(function(c){c.createObjectStore(Eh,{keyPath:TW})})(e)}))),r<5&&i>=5&&(s=s.next((()=>this.yi(a)))),r<6&&i>=6&&(s=s.next((()=>((function(c){c.createObjectStore($p)})(e),this.wi(a))))),r<7&&i>=7&&(s=s.next((()=>this.Si(a)))),r<8&&i>=8&&(s=s.next((()=>this.bi(e,a)))),r<9&&i>=9&&(s=s.next((()=>{(function(c){c.objectStoreNames.contains("remoteDocumentChanges")&&c.deleteObjectStore("remoteDocumentChanges")})(e)}))),r<10&&i>=10&&(s=s.next((()=>this.Di(a)))),r<11&&i>=11&&(s=s.next((()=>{(function(c){c.createObjectStore(s_,{keyPath:SW})})(e),(function(c){c.createObjectStore(o_,{keyPath:AW})})(e)}))),r<12&&i>=12&&(s=s.next((()=>{(function(c){const h=c.createObjectStore(l_,{keyPath:kW});h.createIndex(PS,MW,{unique:!1}),h.createIndex(_V,OW,{unique:!1})})(e)}))),r<13&&i>=13&&(s=s.next((()=>(function(c){const h=c.createObjectStore(w0,{keyPath:yW});h.createIndex(Jv,vW),h.createIndex(gV,xW)})(e))).next((()=>this.Ci(e,a))).next((()=>e.deleteObjectStore(od)))),r<14&&i>=14&&(s=s.next((()=>this.Fi(e,a)))),r<15&&i>=15&&(s=s.next((()=>(function(c){c.createObjectStore(PA,{keyPath:CW,autoIncrement:!0}).createIndex(NS,IW,{unique:!1}),c.createObjectStore(Np,{keyPath:NW}).createIndex(vV,PW,{unique:!1}),c.createObjectStore(Pp,{keyPath:DW}).createIndex(xV,RW,{unique:!1})})(e)))),r<16&&i>=16&&(s=s.next((()=>{n.objectStore(Np).clear()})).next((()=>{n.objectStore(Pp).clear()}))),r<17&&i>=17&&(s=s.next((()=>{(function(c){c.createObjectStore(DA,{keyPath:jW})})(e)}))),r<18&&i>=18&&c3()&&(s=s.next((()=>{n.objectStore(Np).clear()})).next((()=>{n.objectStore(Pp).clear()}))),s}wi(e){let n=0;return e.store(od).ee(((r,i)=>{n+=P0(i)})).next((()=>{const r={byteSize:n};return e.store($p).put(IS,r)}))}yi(e){const n=e.store(Gp),r=e.store(Ls);return n.J().next((i=>de.forEach(i,(a=>{const s=IDBKeyRange.bound([a.userId,_d],[a.userId,a.lastAcknowledgedBatchId]);return r.J(gd,s).next((l=>de.forEach(l,(c=>{Qe(c.userId===a.userId,18650,"Cannot process batch from unexpected user",{batchId:c.batchId});const h=fd(this.serializer,c);return S6(e,a.userId,h).next((()=>{}))}))))}))))}Si(e){const n=e.store(wh),r=e.store(od);return e.store(bd).get(E0).next((i=>{const a=[];return r.ee(((s,l)=>{const c=new Ut(s),h=(function(g){return[0,Ti(g)]})(c);a.push(n.get(h).next((p=>p?de.resolve():(g=>n.put({targetId:0,path:Ti(g),sequenceNumber:i.highestListenSequenceNumber}))(c))))})).next((()=>de.waitFor(a)))}))}bi(e,n){e.createObjectStore(Kp,{keyPath:EW});const r=n.store(Kp),i=new $A,a=s=>{if(i.add(s)){const l=s.lastSegment(),c=s.popLast();return r.put({collectionId:l,parent:Ti(c)})}};return n.store(od).ee({X:!0},((s,l)=>{const c=new Ut(s);return a(c.popLast())})).next((()=>n.store(_h).ee({X:!0},(([s,l,c],h)=>{const p=To(l);return a(p.popLast())}))))}Di(e){const n=e.store(bh);return n.ee(((r,i)=>{const a=bp(i),s=_6(this.serializer,a);return n.put(s)}))}Ci(e,n){const r=n.store(od),i=[];return r.ee(((a,s)=>{const l=n.store(w0),c=(function(g){return g.document?new Be(Ut.fromString(g.document.name).popFirst(5)):g.noDocument?Be.fromSegments(g.noDocument.path):g.unknownDocument?Be.fromSegments(g.unknownDocument.path):Ge(36783)})(s).path.toArray(),h={prefixPath:c.slice(0,c.length-2),collectionGroup:c[c.length-2],documentId:c[c.length-1],readTime:s.readTime||[0,0],unknownDocument:s.unknownDocument,noDocument:s.noDocument,document:s.document,hasCommittedMutations:!!s.hasCommittedMutations};i.push(l.put(h))})).next((()=>de.waitFor(i)))}Fi(e,n){const r=n.store(Ls),i=R6(this.serializer),a=new WA(y_.mi,this.serializer.yt);return r.J().next((s=>{const l=new Map;return s.forEach((c=>{let h=l.get(c.userId)??Et();fd(this.serializer,c).keys().forEach((p=>h=h.add(p))),l.set(c.userId,h)})),de.forEach(l,((c,h)=>{const p=new xi(h),g=p_.wt(this.serializer,p),x=a.getIndexManager(p),b=g_.wt(p,this.serializer,x,a.referenceDelegate);return new k6(i,b,g,x).recalculateAndSaveOverlaysForDocumentKeys(new DS(n,ca.ce),c).next()}))}))}}function A2(t){t.createObjectStore(wh,{keyPath:bW}).createIndex(NA,wW,{unique:!0}),t.createObjectStore(bh,{keyPath:"targetId"}).createIndex(yV,_W,{unique:!0}),t.createObjectStore(bd)}const ju="IndexedDbPersistence",SE=18e5,AE=5e3,CE="Failed to obtain exclusive access to the persistence layer. To allow shared access, multi-tab synchronization has to be enabled in all tabs. If you are using `experimentalForceOwningTab:true`, make sure that only one tab has persistence enabled at any given time.",tZ="main";class YA{constructor(e,n,r,i,a,s,l,c,h,p,g=18){if(this.allowTabSynchronization=e,this.persistenceKey=n,this.clientId=r,this.Mi=a,this.window=s,this.document=l,this.xi=h,this.Oi=p,this.Ni=g,this.ci=null,this.li=!1,this.isPrimary=!1,this.networkEnabled=!0,this.Bi=null,this.inForeground=!1,this.Li=null,this.ki=null,this.qi=Number.NEGATIVE_INFINITY,this.Qi=x=>Promise.resolve(),!YA.v())throw new Le(Ee.UNIMPLEMENTED,"This platform is either missing IndexedDB or is known to have an incomplete implementation. Offline persistence has been disabled.");this.referenceDelegate=new zY(this,i),this.$i=n+tZ,this.serializer=new x6(c),this.Ui=new Ju(this.$i,this.Ni,new eZ(this.serializer)),this.hi=new DY,this.Pi=new UY(this.referenceDelegate,this.serializer),this.remoteDocumentCache=R6(this.serializer),this.Ii=new PY,this.window&&this.window.localStorage?this.Ki=this.window.localStorage:(this.Ki=null,p===!1&&or(ju,"LocalStorage is unavailable. As a result, persistence may not work reliably. In particular enablePersistence() could fail immediately after refreshing the page."))}start(){return this.Wi().then((()=>{if(!this.isPrimary&&!this.allowTabSynchronization)throw new Le(Ee.FAILED_PRECONDITION,CE);return this.Gi(),this.zi(),this.ji(),this.runTransaction("getHighestListenSequenceNumber","readonly",(e=>this.Pi.getHighestSequenceNumber(e)))})).then((e=>{this.ci=new ca(e,this.xi)})).then((()=>{this.li=!0})).catch((e=>(this.Ui&&this.Ui.close(),Promise.reject(e))))}Ji(e){return this.Qi=async n=>{if(this.started)return e(n)},e(this.isPrimary)}setDatabaseDeletedListener(e){this.Ui.$((async n=>{n.newVersion===null&&await e()}))}setNetworkEnabled(e){this.networkEnabled!==e&&(this.networkEnabled=e,this.Mi.enqueueAndForget((async()=>{this.started&&await this.Wi()})))}Wi(){return this.runTransaction("updateClientMetadataAndTryBecomePrimary","readwrite",(e=>Ev(e).put({clientId:this.clientId,updateTimeMs:Date.now(),networkEnabled:this.networkEnabled,inForeground:this.inForeground}).next((()=>{if(this.isPrimary)return this.Hi(e).next((n=>{n||(this.isPrimary=!1,this.Mi.enqueueRetryable((()=>this.Qi(!1))))}))})).next((()=>this.Yi(e))).next((n=>this.isPrimary&&!n?this.Zi(e).next((()=>!1)):!!n&&this.Xi(e).next((()=>!0)))))).catch((e=>{if(gc(e))return ke(ju,"Failed to extend owner lease: ",e),this.isPrimary;if(!this.allowTabSynchronization)throw e;return ke(ju,"Releasing owner lease after error during lease refresh",e),!1})).then((e=>{this.isPrimary!==e&&this.Mi.enqueueRetryable((()=>this.Qi(e))),this.isPrimary=e}))}Hi(e){return sp(e).get(Mf).next((n=>de.resolve(this.es(n))))}ts(e){return Ev(e).delete(this.clientId)}async ns(){if(this.isPrimary&&!this.rs(this.qi,SE)){this.qi=Date.now();const e=await this.runTransaction("maybeGarbageCollectMultiClientState","readwrite-primary",(n=>{const r=Dr(n,Eh);return r.J().next((i=>{const a=this.ss(i,SE),s=i.filter((l=>a.indexOf(l)===-1));return de.forEach(s,(l=>r.delete(l.clientId))).next((()=>s))}))})).catch((()=>[]));if(this.Ki)for(const n of e)this.Ki.removeItem(this._s(n.clientId))}}ji(){this.ki=this.Mi.enqueueAfterDelay("client_metadata_refresh",4e3,(()=>this.Wi().then((()=>this.ns())).then((()=>this.ji()))))}es(e){return!!e&&e.ownerId===this.clientId}Yi(e){return this.Oi?de.resolve(!0):sp(e).get(Mf).next((n=>{if(n!==null&&this.rs(n.leaseTimestampMs,AE)&&!this.us(n.ownerId)){if(this.es(n)&&this.networkEnabled)return!0;if(!this.es(n)){if(!n.allowTabSynchronization)throw new Le(Ee.FAILED_PRECONDITION,CE);return!1}}return!(!this.networkEnabled||!this.inForeground)||Ev(e).J().next((r=>this.ss(r,AE).find((i=>{if(this.clientId!==i.clientId){const a=!this.networkEnabled&&i.networkEnabled,s=!this.inForeground&&i.inForeground,l=this.networkEnabled===i.networkEnabled;if(a||s&&l)return!0}return!1}))===void 0))})).next((n=>(this.isPrimary!==n&&ke(ju,`Client ${n?"is":"is not"} eligible for a primary lease.`),n)))}async shutdown(){this.li=!1,this.cs(),this.ki&&(this.ki.cancel(),this.ki=null),this.ls(),this.hs(),await this.Ui.runTransaction("shutdown","readwrite",[Ig,Eh],(e=>{const n=new DS(e,ca.ce);return this.Zi(n).next((()=>this.ts(n)))})),this.Ui.close(),this.Ps()}ss(e,n){return e.filter((r=>this.rs(r.updateTimeMs,n)&&!this.us(r.clientId)))}Ts(){return this.runTransaction("getActiveClients","readonly",(e=>Ev(e).J().next((n=>this.ss(n,SE).map((r=>r.clientId))))))}get started(){return this.li}getGlobalsCache(){return this.hi}getMutationQueue(e,n){return g_.wt(e,this.serializer,n,this.referenceDelegate)}getTargetCache(){return this.Pi}getRemoteDocumentCache(){return this.remoteDocumentCache}getIndexManager(e){return new VY(e,this.serializer.yt.databaseId)}getDocumentOverlayCache(e){return p_.wt(this.serializer,e)}getBundleCache(){return this.Ii}runTransaction(e,n,r){ke(ju,"Starting transaction:",e);const i=n==="readonly"?"readonly":"readwrite",a=(function(c){return c===18?UW:c===17?TV:c===16?VW:c===15?RA:c===14?EV:c===13?wV:c===12?LW:c===11?bV:void Ge(60245)})(this.Ni);let s;return this.Ui.runTransaction(e,i,a,(l=>(s=new DS(l,this.ci?this.ci.next():ca.ce),n==="readwrite-primary"?this.Hi(s).next((c=>!!c||this.Yi(s))).next((c=>{if(!c)throw or(`Failed to obtain primary lease for action '${e}'.`),this.isPrimary=!1,this.Mi.enqueueRetryable((()=>this.Qi(!1))),new Le(Ee.FAILED_PRECONDITION,dV);return r(s)})).next((c=>this.Xi(s).next((()=>c)))):this.Is(s).next((()=>r(s)))))).then((l=>(s.raiseOnCommittedEvent(),l)))}Is(e){return sp(e).get(Mf).next((n=>{if(n!==null&&this.rs(n.leaseTimestampMs,AE)&&!this.us(n.ownerId)&&!this.es(n)&&!(this.Oi||this.allowTabSynchronization&&n.allowTabSynchronization))throw new Le(Ee.FAILED_PRECONDITION,CE)}))}Xi(e){const n={ownerId:this.clientId,allowTabSynchronization:this.allowTabSynchronization,leaseTimestampMs:Date.now()};return sp(e).put(Mf,n)}static v(){return Ju.v()}Zi(e){const n=sp(e);return n.get(Mf).next((r=>this.es(r)?(ke(ju,"Releasing primary lease."),n.delete(Mf)):de.resolve()))}rs(e,n){const r=Date.now();return!(e<r-n)&&(!(e>r)||(or(`Detected an update time that is in the future: ${e} > ${r}`),!1))}Gi(){this.document!==null&&typeof this.document.addEventListener=="function"&&(this.Li=()=>{this.Mi.enqueueAndForget((()=>(this.inForeground=this.document.visibilityState==="visible",this.Wi())))},this.document.addEventListener("visibilitychange",this.Li),this.inForeground=this.document.visibilityState==="visible")}ls(){this.Li&&(this.document.removeEventListener("visibilitychange",this.Li),this.Li=null)}zi(){var e;typeof((e=this.window)==null?void 0:e.addEventListener)=="function"&&(this.Bi=()=>{this.cs();const n=/(?:Version|Mobile)\/1[456]/;u3()&&(navigator.appVersion.match(n)||navigator.userAgent.match(n))&&this.Mi.enterRestrictedMode(!0),this.Mi.enqueueAndForget((()=>this.shutdown()))},this.window.addEventListener("pagehide",this.Bi))}hs(){this.Bi&&(this.window.removeEventListener("pagehide",this.Bi),this.Bi=null)}us(e){var n;try{const r=((n=this.Ki)==null?void 0:n.getItem(this._s(e)))!==null;return ke(ju,`Client '${e}' ${r?"is":"is not"} zombied in LocalStorage`),r}catch(r){return or(ju,"Failed to get zombied client id.",r),!1}}cs(){if(this.Ki)try{this.Ki.setItem(this._s(this.clientId),String(Date.now()))}catch(e){or("Failed to set zombie client id.",e)}}Ps(){if(this.Ki)try{this.Ki.removeItem(this._s(this.clientId))}catch{}}_s(e){return`firestore_zombie_${this.persistenceKey}_${e}`}}function sp(t){return Dr(t,Ig)}function Ev(t){return Dr(t,Eh)}function M6(t,e){let n=t.projectId;return t.isDefaultDatabase||(n+="."+t.database),"firestore/"+e+"/"+n+"/"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ZA{constructor(e,n,r,i){this.targetId=e,this.fromCache=n,this.Es=r,this.ds=i}static As(e,n){let r=Et(),i=Et();for(const a of n.docChanges)switch(a.type){case 0:r=r.add(a.doc.key);break;case 1:i=i.add(a.doc.key)}return new ZA(e,n.fromCache,r,i)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nZ{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class O6{constructor(){this.Rs=!1,this.Vs=!1,this.fs=100,this.gs=(function(){return u3()?8:hV(Nr())>0?6:4})()}initialize(e,n){this.ps=e,this.indexManager=n,this.Rs=!0}getDocumentsMatchingQuery(e,n,r,i){const a={result:null};return this.ys(e,n).next((s=>{a.result=s})).next((()=>{if(!a.result)return this.ws(e,n,i,r).next((s=>{a.result=s}))})).next((()=>{if(a.result)return;const s=new nZ;return this.Ss(e,n,s).next((l=>{if(a.result=l,this.Vs)return this.bs(e,n,s,l.size)}))})).next((()=>a.result))}bs(e,n,r,i){return r.documentReadCount<this.fs?(qf()<=Rt.DEBUG&&ke("QueryEngine","SDK will not create cache indexes for query:",Hf(n),"since it only creates cache indexes for collection contains","more than or equal to",this.fs,"documents"),de.resolve()):(qf()<=Rt.DEBUG&&ke("QueryEngine","Query:",Hf(n),"scans",r.documentReadCount,"local documents and returns",i,"documents as results."),r.documentReadCount>this.gs*i?(qf()<=Rt.DEBUG&&ke("QueryEngine","The SDK decides to create cache indexes for query:",Hf(n),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,Fa(n))):de.resolve())}ys(e,n){if(Zk(n))return de.resolve(null);let r=Fa(n);return this.indexManager.getIndexType(e,r).next((i=>i===0?null:(n.limit!==null&&i===1&&(n=VS(n,null,"F"),r=Fa(n)),this.indexManager.getDocumentsMatchingTarget(e,r).next((a=>{const s=Et(...a);return this.ps.getDocuments(e,s).next((l=>this.indexManager.getMinOffset(e,r).next((c=>{const h=this.Ds(n,l);return this.Cs(n,h,s,c.readTime)?this.ys(e,VS(n,null,"F")):this.vs(e,h,n,c)}))))})))))}ws(e,n,r,i){return Zk(n)||i.isEqual(rt.min())?de.resolve(null):this.ps.getDocuments(e,r).next((a=>{const s=this.Ds(n,a);return this.Cs(n,s,r,i)?de.resolve(null):(qf()<=Rt.DEBUG&&ke("QueryEngine","Re-using previous result from %s to execute query: %s",i.toString(),Hf(n)),this.vs(e,s,n,uV(i,xh)).next((l=>l)))}))}Ds(e,n){let r=new an($V(e));return n.forEach(((i,a)=>{Dg(e,a)&&(r=r.add(a))})),r}Cs(e,n,r,i){if(e.limit===null)return!1;if(r.size!==n.size)return!0;const a=e.limitType==="F"?n.last():n.first();return!!a&&(a.hasPendingWrites||a.version.compareTo(i)>0)}Ss(e,n,r){return qf()<=Rt.DEBUG&&ke("QueryEngine","Using full collection scan to execute query:",Hf(n)),this.ps.getDocumentsMatchingQuery(e,n,qa.min(),r)}vs(e,n,r,i){return this.ps.getDocumentsMatchingQuery(e,r,i).next((a=>(n.forEach((s=>{a=a.insert(s.key,s)})),a)))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const JA="LocalStore",rZ=3e8;class iZ{constructor(e,n,r,i){this.persistence=e,this.Fs=n,this.serializer=i,this.Ms=new _n(ft),this.xs=new Bl((a=>Rd(a)),Ng),this.Os=new Map,this.Ns=e.getRemoteDocumentCache(),this.Pi=e.getTargetCache(),this.Ii=e.getBundleCache(),this.Bs(r)}Bs(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new k6(this.Ns,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Ns.setIndexManager(this.indexManager),this.Fs.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",(n=>e.collect(n,this.Ms)))}}function j6(t,e,n,r){return new iZ(t,e,n,r)}async function L6(t,e){const n=Ye(t);return await n.persistence.runTransaction("Handle user change","readonly",(r=>{let i;return n.mutationQueue.getAllMutationBatches(r).next((a=>(i=a,n.Bs(e),n.mutationQueue.getAllMutationBatches(r)))).next((a=>{const s=[],l=[];let c=Et();for(const h of i){s.push(h.batchId);for(const p of h.mutations)c=c.add(p.key)}for(const h of a){l.push(h.batchId);for(const p of h.mutations)c=c.add(p.key)}return n.localDocuments.getDocuments(r,c).next((h=>({Ls:h,removedBatchIds:s,addedBatchIds:l})))}))}))}function aZ(t,e){const n=Ye(t);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",(r=>{const i=e.batch.keys(),a=n.Ns.newChangeBuffer({trackRemovals:!0});return(function(l,c,h,p){const g=h.batch,x=g.keys();let b=de.resolve();return x.forEach((C=>{b=b.next((()=>p.getEntry(c,C))).next((A=>{const D=h.docVersions.get(C);Qe(D!==null,48541),A.version.compareTo(D)<0&&(g.applyToRemoteDocument(A,h),A.isValidDocument()&&(A.setReadTime(h.commitVersion),p.addEntry(A)))}))})),b.next((()=>l.mutationQueue.removeMutationBatch(c,g)))})(n,r,e,a).next((()=>a.apply(r))).next((()=>n.mutationQueue.performConsistencyCheck(r))).next((()=>n.documentOverlayCache.removeOverlaysForBatchId(r,i,e.batch.batchId))).next((()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(r,(function(l){let c=Et();for(let h=0;h<l.mutationResults.length;++h)l.mutationResults[h].transformResults.length>0&&(c=c.add(l.batch.mutations[h].key));return c})(e)))).next((()=>n.localDocuments.getDocuments(r,i)))}))}function V6(t){const e=Ye(t);return e.persistence.runTransaction("Get last remote snapshot version","readonly",(n=>e.Pi.getLastRemoteSnapshotVersion(n)))}function sZ(t,e){const n=Ye(t),r=e.snapshotVersion;let i=n.Ms;return n.persistence.runTransaction("Apply remote event","readwrite-primary",(a=>{const s=n.Ns.newChangeBuffer({trackRemovals:!0});i=n.Ms;const l=[];e.targetChanges.forEach(((p,g)=>{const x=i.get(g);if(!x)return;l.push(n.Pi.removeMatchingKeys(a,p.removedDocuments,g).next((()=>n.Pi.addMatchingKeys(a,p.addedDocuments,g))));let b=x.withSequenceNumber(a.currentSequenceNumber);e.targetMismatches.get(g)!==null?b=b.withResumeToken(cr.EMPTY_BYTE_STRING,rt.min()).withLastLimboFreeSnapshotVersion(rt.min()):p.resumeToken.approximateByteSize()>0&&(b=b.withResumeToken(p.resumeToken,r)),i=i.insert(g,b),(function(A,D,R){return A.resumeToken.approximateByteSize()===0||D.snapshotVersion.toMicroseconds()-A.snapshotVersion.toMicroseconds()>=rZ?!0:R.addedDocuments.size+R.modifiedDocuments.size+R.removedDocuments.size>0})(x,b,p)&&l.push(n.Pi.updateTargetData(a,b))}));let c=La(),h=Et();if(e.documentUpdates.forEach((p=>{e.resolvedLimboDocuments.has(p)&&l.push(n.persistence.referenceDelegate.updateLimboDocument(a,p))})),l.push(oZ(a,s,e.documentUpdates).next((p=>{c=p.ks,h=p.qs}))),!r.isEqual(rt.min())){const p=n.Pi.getLastRemoteSnapshotVersion(a).next((g=>n.Pi.setTargetsMetadata(a,a.currentSequenceNumber,r)));l.push(p)}return de.waitFor(l).next((()=>s.apply(a))).next((()=>n.localDocuments.getLocalViewOfDocuments(a,c,h))).next((()=>c))})).then((a=>(n.Ms=i,a)))}function oZ(t,e,n){let r=Et(),i=Et();return n.forEach((a=>r=r.add(a))),e.getEntries(t,r).next((a=>{let s=La();return n.forEach(((l,c)=>{const h=a.get(l);c.isFoundDocument()!==h.isFoundDocument()&&(i=i.add(l)),c.isNoDocument()&&c.version.isEqual(rt.min())?(e.removeEntry(l,c.readTime),s=s.insert(l,c)):!h.isValidDocument()||c.version.compareTo(h.version)>0||c.version.compareTo(h.version)===0&&h.hasPendingWrites?(e.addEntry(c),s=s.insert(l,c)):ke(JA,"Ignoring outdated watch update for ",l,". Current version:",h.version," Watch version:",c.version)})),{ks:s,qs:i}}))}function lZ(t,e){const n=Ye(t);return n.persistence.runTransaction("Get next mutation batch","readonly",(r=>(e===void 0&&(e=_d),n.mutationQueue.getNextMutationBatchAfterBatchId(r,e))))}function R0(t,e){const n=Ye(t);return n.persistence.runTransaction("Allocate target","readwrite",(r=>{let i;return n.Pi.getTargetData(r,e).next((a=>a?(i=a,de.resolve(i)):n.Pi.allocateTargetId(r).next((s=>(i=new _l(e,s,"TargetPurposeListen",r.currentSequenceNumber),n.Pi.addTargetData(r,i).next((()=>i)))))))})).then((r=>{const i=n.Ms.get(r.targetId);return(i===null||r.snapshotVersion.compareTo(i.snapshotVersion)>0)&&(n.Ms=n.Ms.insert(r.targetId,r),n.xs.set(e,r.targetId)),r}))}async function Rh(t,e,n){const r=Ye(t),i=r.Ms.get(e),a=n?"readwrite":"readwrite-primary";try{n||await r.persistence.runTransaction("Release target",a,(s=>r.persistence.referenceDelegate.removeTarget(s,i)))}catch(s){if(!gc(s))throw s;ke(JA,`Failed to update sequence numbers for target ${e}: ${s}`)}r.Ms=r.Ms.remove(e),r.xs.delete(i.target)}function $S(t,e,n){const r=Ye(t);let i=rt.min(),a=Et();return r.persistence.runTransaction("Execute query","readwrite",(s=>(function(c,h,p){const g=Ye(c),x=g.xs.get(p);return x!==void 0?de.resolve(g.Ms.get(x)):g.Pi.getTargetData(h,p)})(r,s,Fa(e)).next((l=>{if(l)return i=l.lastLimboFreeSnapshotVersion,r.Pi.getMatchingKeysForTargetId(s,l.targetId).next((c=>{a=c}))})).next((()=>r.Fs.getDocumentsMatchingQuery(s,e,n?i:rt.min(),n?a:Et()))).next((l=>(B6(r,GV(e),l),{documents:l,Qs:a})))))}function U6(t,e){const n=Ye(t),r=Ye(n.Pi),i=n.Ms.get(e);return i?Promise.resolve(i.target):n.persistence.runTransaction("Get target data","readonly",(a=>r.At(a,e).next((s=>s?s.target:null))))}function F6(t,e){const n=Ye(t),r=n.Os.get(e)||rt.min();return n.persistence.runTransaction("Get new document changes","readonly",(i=>n.Ns.getAllFromCollectionGroup(i,e,uV(r,xh),Number.MAX_SAFE_INTEGER))).then((i=>(B6(n,e,i),i)))}function B6(t,e,n){let r=t.Os.get(e)||rt.min();n.forEach(((i,a)=>{a.readTime.compareTo(r)>0&&(r=a.readTime)})),t.Os.set(e,r)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const z6="firestore_clients";function C2(t,e){return`${z6}_${t}_${e}`}const q6="firestore_mutations";function I2(t,e,n){let r=`${q6}_${t}_${n}`;return e.isAuthenticated()&&(r+=`_${e.uid}`),r}const H6="firestore_targets";function IE(t,e){return`${H6}_${t}_${e}`}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const bo="SharedClientState";class k0{constructor(e,n,r,i){this.user=e,this.batchId=n,this.state=r,this.error=i}static Ws(e,n,r){const i=JSON.parse(r);let a,s=typeof i=="object"&&["pending","acknowledged","rejected"].indexOf(i.state)!==-1&&(i.error===void 0||typeof i.error=="object");return s&&i.error&&(s=typeof i.error.message=="string"&&typeof i.error.code=="string",s&&(a=new Le(i.error.code,i.error.message))),s?new k0(e,n,i.state,a):(or(bo,`Failed to parse mutation state for ID '${n}': ${r}`),null)}Gs(){const e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}class Op{constructor(e,n,r){this.targetId=e,this.state=n,this.error=r}static Ws(e,n){const r=JSON.parse(n);let i,a=typeof r=="object"&&["not-current","current","rejected"].indexOf(r.state)!==-1&&(r.error===void 0||typeof r.error=="object");return a&&r.error&&(a=typeof r.error.message=="string"&&typeof r.error.code=="string",a&&(i=new Le(r.error.code,r.error.message))),a?new Op(e,r.state,i):(or(bo,`Failed to parse target state for ID '${e}': ${n}`),null)}Gs(){const e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}class M0{constructor(e,n){this.clientId=e,this.activeTargetIds=n}static Ws(e,n){const r=JSON.parse(n);let i=typeof r=="object"&&r.activeTargetIds instanceof Array,a=LA();for(let s=0;i&&s<r.activeTargetIds.length;++s)i=mV(r.activeTargetIds[s]),a=a.add(r.activeTargetIds[s]);return i?new M0(e,a):(or(bo,`Failed to parse client data for instance '${e}': ${n}`),null)}}class QA{constructor(e,n){this.clientId=e,this.onlineState=n}static Ws(e){const n=JSON.parse(e);return typeof n=="object"&&["Unknown","Online","Offline"].indexOf(n.onlineState)!==-1&&typeof n.clientId=="string"?new QA(n.clientId,n.onlineState):(or(bo,`Failed to parse online state: ${e}`),null)}}class KS{constructor(){this.activeTargetIds=LA()}zs(e){this.activeTargetIds=this.activeTargetIds.add(e)}js(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Gs(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class NE{constructor(e,n,r,i,a){this.window=e,this.Mi=n,this.persistenceKey=r,this.Js=i,this.syncEngine=null,this.onlineStateHandler=null,this.sequenceNumberHandler=null,this.Hs=this.Ys.bind(this),this.Zs=new _n(ft),this.started=!1,this.Xs=[];const s=r.replace(/[.*+?^${}()|[\]\\]/g,"\\$&");this.storage=this.window.localStorage,this.currentUser=a,this.eo=C2(this.persistenceKey,this.Js),this.no=(function(c){return`firestore_sequence_number_${c}`})(this.persistenceKey),this.Zs=this.Zs.insert(this.Js,new KS),this.ro=new RegExp(`^${z6}_${s}_([^_]*)$`),this.io=new RegExp(`^${q6}_${s}_(\\d+)(?:_(.*))?$`),this.so=new RegExp(`^${H6}_${s}_(\\d+)$`),this.oo=(function(c){return`firestore_online_state_${c}`})(this.persistenceKey),this._o=(function(c){return`firestore_bundle_loaded_v2_${c}`})(this.persistenceKey),this.window.addEventListener("storage",this.Hs)}static v(e){return!(!e||!e.localStorage)}async start(){const e=await this.syncEngine.Ts();for(const r of e){if(r===this.Js)continue;const i=this.getItem(C2(this.persistenceKey,r));if(i){const a=M0.Ws(r,i);a&&(this.Zs=this.Zs.insert(a.clientId,a))}}this.ao();const n=this.storage.getItem(this.oo);if(n){const r=this.uo(n);r&&this.co(r)}for(const r of this.Xs)this.Ys(r);this.Xs=[],this.window.addEventListener("pagehide",(()=>this.shutdown())),this.started=!0}writeSequenceNumber(e){this.setItem(this.no,JSON.stringify(e))}getAllActiveQueryTargets(){return this.lo(this.Zs)}isActiveQueryTarget(e){let n=!1;return this.Zs.forEach(((r,i)=>{i.activeTargetIds.has(e)&&(n=!0)})),n}addPendingMutation(e){this.ho(e,"pending")}updateMutationState(e,n,r){this.ho(e,n,r),this.Po(e)}addLocalQueryTarget(e,n=!0){let r="not-current";if(this.isActiveQueryTarget(e)){const i=this.storage.getItem(IE(this.persistenceKey,e));if(i){const a=Op.Ws(e,i);a&&(r=a.state)}}return n&&this.To.zs(e),this.ao(),r}removeLocalQueryTarget(e){this.To.js(e),this.ao()}isLocalQueryTarget(e){return this.To.activeTargetIds.has(e)}clearQueryState(e){this.removeItem(IE(this.persistenceKey,e))}updateQueryState(e,n,r){this.Io(e,n,r)}handleUserChange(e,n,r){n.forEach((i=>{this.Po(i)})),this.currentUser=e,r.forEach((i=>{this.addPendingMutation(i)}))}setOnlineState(e){this.Eo(e)}notifyBundleLoaded(e){this.Ao(e)}shutdown(){this.started&&(this.window.removeEventListener("storage",this.Hs),this.removeItem(this.eo),this.started=!1)}getItem(e){const n=this.storage.getItem(e);return ke(bo,"READ",e,n),n}setItem(e,n){ke(bo,"SET",e,n),this.storage.setItem(e,n)}removeItem(e){ke(bo,"REMOVE",e),this.storage.removeItem(e)}Ys(e){const n=e;if(n.storageArea===this.storage){if(ke(bo,"EVENT",n.key,n.newValue),n.key===this.eo)return void or("Received WebStorage notification for local change. Another client might have garbage-collected our state");this.Mi.enqueueRetryable((async()=>{if(this.started){if(n.key!==null){if(this.ro.test(n.key)){if(n.newValue==null){const r=this.Ro(n.key);return this.Vo(r,null)}{const r=this.mo(n.key,n.newValue);if(r)return this.Vo(r.clientId,r)}}else if(this.io.test(n.key)){if(n.newValue!==null){const r=this.fo(n.key,n.newValue);if(r)return this.po(r)}}else if(this.so.test(n.key)){if(n.newValue!==null){const r=this.yo(n.key,n.newValue);if(r)return this.wo(r)}}else if(n.key===this.oo){if(n.newValue!==null){const r=this.uo(n.newValue);if(r)return this.co(r)}}else if(n.key===this.no){const r=(function(a){let s=ca.ce;if(a!=null)try{const l=JSON.parse(a);Qe(typeof l=="number",30636,{So:a}),s=l}catch(l){or(bo,"Failed to read sequence number from WebStorage",l)}return s})(n.newValue);r!==ca.ce&&this.sequenceNumberHandler(r)}else if(n.key===this._o){const r=this.bo(n.newValue);await Promise.all(r.map((i=>this.syncEngine.Do(i))))}}}else this.Xs.push(n)}))}}get To(){return this.Zs.get(this.Js)}ao(){this.setItem(this.eo,this.To.Gs())}ho(e,n,r){const i=new k0(this.currentUser,e,n,r),a=I2(this.persistenceKey,this.currentUser,e);this.setItem(a,i.Gs())}Po(e){const n=I2(this.persistenceKey,this.currentUser,e);this.removeItem(n)}Eo(e){const n={clientId:this.Js,onlineState:e};this.storage.setItem(this.oo,JSON.stringify(n))}Io(e,n,r){const i=IE(this.persistenceKey,e),a=new Op(e,n,r);this.setItem(i,a.Gs())}Ao(e){const n=JSON.stringify(Array.from(e));this.setItem(this._o,n)}Ro(e){const n=this.ro.exec(e);return n?n[1]:null}mo(e,n){const r=this.Ro(e);return M0.Ws(r,n)}fo(e,n){const r=this.io.exec(e),i=Number(r[1]),a=r[2]!==void 0?r[2]:null;return k0.Ws(new xi(a),i,n)}yo(e,n){const r=this.so.exec(e),i=Number(r[1]);return Op.Ws(i,n)}uo(e){return QA.Ws(e)}bo(e){return JSON.parse(e)}async po(e){if(e.user.uid===this.currentUser.uid)return this.syncEngine.Co(e.batchId,e.state,e.error);ke(bo,`Ignoring mutation for non-active user ${e.user.uid}`)}wo(e){return this.syncEngine.vo(e.targetId,e.state,e.error)}Vo(e,n){const r=n?this.Zs.insert(e,n):this.Zs.remove(e),i=this.lo(this.Zs),a=this.lo(r),s=[],l=[];return a.forEach((c=>{i.has(c)||s.push(c)})),i.forEach((c=>{a.has(c)||l.push(c)})),this.syncEngine.Fo(s,l).then((()=>{this.Zs=r}))}co(e){this.Zs.get(e.clientId)&&this.onlineStateHandler(e.onlineState)}lo(e){let n=LA();return e.forEach(((r,i)=>{n=n.unionWith(i.activeTargetIds)})),n}}class G6{constructor(){this.Mo=new KS,this.xo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,n,r){}addLocalQueryTarget(e,n=!0){return n&&this.Mo.zs(e),this.xo[e]||"not-current"}updateQueryState(e,n,r){this.xo[e]=n}removeLocalQueryTarget(e){this.Mo.js(e)}isLocalQueryTarget(e){return this.Mo.activeTargetIds.has(e)}clearQueryState(e){delete this.xo[e]}getAllActiveQueryTargets(){return this.Mo.activeTargetIds}isActiveQueryTarget(e){return this.Mo.activeTargetIds.has(e)}start(){return this.Mo=new KS,Promise.resolve()}handleUserChange(e,n,r){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uZ{Oo(e){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const N2="ConnectivityMonitor";class P2{constructor(){this.No=()=>this.Bo(),this.Lo=()=>this.ko(),this.qo=[],this.Qo()}Oo(e){this.qo.push(e)}shutdown(){window.removeEventListener("online",this.No),window.removeEventListener("offline",this.Lo)}Qo(){window.addEventListener("online",this.No),window.addEventListener("offline",this.Lo)}Bo(){ke(N2,"Network connectivity changed: AVAILABLE");for(const e of this.qo)e(0)}ko(){ke(N2,"Network connectivity changed: UNAVAILABLE");for(const e of this.qo)e(1)}static v(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Tv=null;function WS(){return Tv===null?Tv=(function(){return 268435456+Math.round(2147483648*Math.random())})():Tv++,"0x"+Tv.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const PE="RestConnection",cZ={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class dZ{get $o(){return!1}constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;const n=e.ssl?"https":"http",r=encodeURIComponent(this.databaseId.projectId),i=encodeURIComponent(this.databaseId.database);this.Uo=n+"://"+e.host,this.Ko=`projects/${r}/databases/${i}`,this.Wo=this.databaseId.database===T0?`project_id=${r}`:`project_id=${r}&database_id=${i}`}Go(e,n,r,i,a){const s=WS(),l=this.zo(e,n.toUriEncodedString());ke(PE,`Sending RPC '${e}' ${s}:`,l,r);const c={"google-cloud-resource-prefix":this.Ko,"x-goog-request-params":this.Wo};this.jo(c,i,a);const{host:h}=new URL(l),p=hc(h);return this.Jo(e,l,c,r,p).then((g=>(ke(PE,`Received RPC '${e}' ${s}: `,g),g)),(g=>{throw zp(PE,`RPC '${e}' ${s} failed with error: `,g,"url: ",l,"request:",r),g}))}Ho(e,n,r,i,a,s){return this.Go(e,n,r,i,a)}jo(e,n,r){e["X-Goog-Api-Client"]=(function(){return"gl-js/ fire/"+Zh})(),e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),n&&n.headers.forEach(((i,a)=>e[a]=i)),r&&r.headers.forEach(((i,a)=>e[a]=i))}zo(e,n){const r=cZ[e];return`${this.Uo}/v1/${n}:${r}`}terminate(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fZ{constructor(e){this.Yo=e.Yo,this.Zo=e.Zo}Xo(e){this.e_=e}t_(e){this.n_=e}r_(e){this.i_=e}onMessage(e){this.s_=e}close(){this.Zo()}send(e){this.Yo(e)}o_(){this.e_()}__(){this.n_()}a_(e){this.i_(e)}u_(e){this.s_(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const gi="WebChannelConnection";class hZ extends dZ{constructor(e){super(e),this.c_=[],this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}Jo(e,n,r,i,a){const s=WS();return new Promise(((l,c)=>{const h=new eV;h.setWithCredentials(!0),h.listenOnce(tV.COMPLETE,(()=>{try{switch(h.getLastErrorCode()){case Wv.NO_ERROR:const g=h.getResponseJson();ke(gi,`XHR for RPC '${e}' ${s} received:`,JSON.stringify(g)),l(g);break;case Wv.TIMEOUT:ke(gi,`RPC '${e}' ${s} timed out`),c(new Le(Ee.DEADLINE_EXCEEDED,"Request time out"));break;case Wv.HTTP_ERROR:const x=h.getStatus();if(ke(gi,`RPC '${e}' ${s} failed with status:`,x,"response text:",h.getResponseText()),x>0){let b=h.getResponseJson();Array.isArray(b)&&(b=b[0]);const C=b==null?void 0:b.error;if(C&&C.status&&C.message){const A=(function(R){const j=R.toLowerCase().replace(/_/g,"-");return Object.values(Ee).indexOf(j)>=0?j:Ee.UNKNOWN})(C.status);c(new Le(A,C.message))}else c(new Le(Ee.UNKNOWN,"Server responded with status "+h.getStatus()))}else c(new Le(Ee.UNAVAILABLE,"Connection failed."));break;default:Ge(9055,{l_:e,streamId:s,h_:h.getLastErrorCode(),P_:h.getLastError()})}}finally{ke(gi,`RPC '${e}' ${s} completed.`)}}));const p=JSON.stringify(i);ke(gi,`RPC '${e}' ${s} sending request:`,i),h.send(n,"POST",p,r,15)}))}T_(e,n,r){const i=WS(),a=[this.Uo,"/","google.firestore.v1.Firestore","/",e,"/channel"],s=iV(),l=rV(),c={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},h=this.longPollingOptions.timeoutSeconds;h!==void 0&&(c.longPollingTimeout=Math.round(1e3*h)),this.useFetchStreams&&(c.useFetchStreams=!0),this.jo(c.initMessageHeaders,n,r),c.encodeInitMessageHeaders=!0;const p=a.join("");ke(gi,`Creating RPC '${e}' stream ${i}: ${p}`,c);const g=s.createWebChannel(p,c);this.I_(g);let x=!1,b=!1;const C=new fZ({Yo:D=>{b?ke(gi,`Not sending because RPC '${e}' stream ${i} is closed:`,D):(x||(ke(gi,`Opening RPC '${e}' stream ${i} transport.`),g.open(),x=!0),ke(gi,`RPC '${e}' stream ${i} sending:`,D),g.send(D))},Zo:()=>g.close()}),A=(D,R,j)=>{D.listen(R,(O=>{try{j(O)}catch(q){setTimeout((()=>{throw q}),0)}}))};return A(g,vp.EventType.OPEN,(()=>{b||(ke(gi,`RPC '${e}' stream ${i} transport opened.`),C.o_())})),A(g,vp.EventType.CLOSE,(()=>{b||(b=!0,ke(gi,`RPC '${e}' stream ${i} transport closed`),C.a_(),this.E_(g))})),A(g,vp.EventType.ERROR,(D=>{b||(b=!0,zp(gi,`RPC '${e}' stream ${i} transport errored. Name:`,D.name,"Message:",D.message),C.a_(new Le(Ee.UNAVAILABLE,"The operation could not be completed")))})),A(g,vp.EventType.MESSAGE,(D=>{var R;if(!b){const j=D.data[0];Qe(!!j,16349);const O=j,q=(O==null?void 0:O.error)||((R=O[0])==null?void 0:R.error);if(q){ke(gi,`RPC '${e}' stream ${i} received error:`,q);const $=q.status;let H=(function(B){const Z=xr[B];if(Z!==void 0)return a6(Z)})($),U=q.message;H===void 0&&(H=Ee.INTERNAL,U="Unknown error status: "+$+" with message "+q.message),b=!0,C.a_(new Le(H,U)),g.close()}else ke(gi,`RPC '${e}' stream ${i} received:`,j),C.u_(j)}})),A(l,nV.STAT_EVENT,(D=>{D.stat===SS.PROXY?ke(gi,`RPC '${e}' stream ${i} detected buffering proxy`):D.stat===SS.NOPROXY&&ke(gi,`RPC '${e}' stream ${i} detected no buffering proxy`)})),setTimeout((()=>{C.__()}),0),C}terminate(){this.c_.forEach((e=>e.close())),this.c_=[]}I_(e){this.c_.push(e)}E_(e){this.c_=this.c_.filter((n=>n===e))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function $6(){return typeof window<"u"?window:null}function i0(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function v_(t){return new vY(t,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class XA{constructor(e,n,r=1e3,i=1.5,a=6e4){this.Mi=e,this.timerId=n,this.d_=r,this.A_=i,this.R_=a,this.V_=0,this.m_=null,this.f_=Date.now(),this.reset()}reset(){this.V_=0}g_(){this.V_=this.R_}p_(e){this.cancel();const n=Math.floor(this.V_+this.y_()),r=Math.max(0,Date.now()-this.f_),i=Math.max(0,n-r);i>0&&ke("ExponentialBackoff",`Backing off for ${i} ms (base delay: ${this.V_} ms, delay with jitter: ${n} ms, last attempt: ${r} ms ago)`),this.m_=this.Mi.enqueueAfterDelay(this.timerId,i,(()=>(this.f_=Date.now(),e()))),this.V_*=this.A_,this.V_<this.d_&&(this.V_=this.d_),this.V_>this.R_&&(this.V_=this.R_)}w_(){this.m_!==null&&(this.m_.skipDelay(),this.m_=null)}cancel(){this.m_!==null&&(this.m_.cancel(),this.m_=null)}y_(){return(Math.random()-.5)*this.V_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const D2="PersistentStream";class K6{constructor(e,n,r,i,a,s,l,c){this.Mi=e,this.S_=r,this.b_=i,this.connection=a,this.authCredentialsProvider=s,this.appCheckCredentialsProvider=l,this.listener=c,this.state=0,this.D_=0,this.C_=null,this.v_=null,this.stream=null,this.F_=0,this.M_=new XA(e,n)}x_(){return this.state===1||this.state===5||this.O_()}O_(){return this.state===2||this.state===3}start(){this.F_=0,this.state!==4?this.auth():this.N_()}async stop(){this.x_()&&await this.close(0)}B_(){this.state=0,this.M_.reset()}L_(){this.O_()&&this.C_===null&&(this.C_=this.Mi.enqueueAfterDelay(this.S_,6e4,(()=>this.k_())))}q_(e){this.Q_(),this.stream.send(e)}async k_(){if(this.O_())return this.close(0)}Q_(){this.C_&&(this.C_.cancel(),this.C_=null)}U_(){this.v_&&(this.v_.cancel(),this.v_=null)}async close(e,n){this.Q_(),this.U_(),this.M_.cancel(),this.D_++,e!==4?this.M_.reset():n&&n.code===Ee.RESOURCE_EXHAUSTED?(or(n.toString()),or("Using maximum backoff delay to prevent overloading the backend."),this.M_.g_()):n&&n.code===Ee.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.K_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.r_(n)}K_(){}auth(){this.state=1;const e=this.W_(this.D_),n=this.D_;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then((([r,i])=>{this.D_===n&&this.G_(r,i)}),(r=>{e((()=>{const i=new Le(Ee.UNKNOWN,"Fetching auth token failed: "+r.message);return this.z_(i)}))}))}G_(e,n){const r=this.W_(this.D_);this.stream=this.j_(e,n),this.stream.Xo((()=>{r((()=>this.listener.Xo()))})),this.stream.t_((()=>{r((()=>(this.state=2,this.v_=this.Mi.enqueueAfterDelay(this.b_,1e4,(()=>(this.O_()&&(this.state=3),Promise.resolve()))),this.listener.t_())))})),this.stream.r_((i=>{r((()=>this.z_(i)))})),this.stream.onMessage((i=>{r((()=>++this.F_==1?this.J_(i):this.onNext(i)))}))}N_(){this.state=5,this.M_.p_((async()=>{this.state=0,this.start()}))}z_(e){return ke(D2,`close with error: ${e}`),this.stream=null,this.close(4,e)}W_(e){return n=>{this.Mi.enqueueAndForget((()=>this.D_===e?n():(ke(D2,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve())))}}}class mZ extends K6{constructor(e,n,r,i,a,s){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",n,r,i,s),this.serializer=a}j_(e,n){return this.connection.T_("Listen",e,n)}J_(e){return this.onNext(e)}onNext(e){this.M_.reset();const n=wY(this.serializer,e),r=(function(a){if(!("targetChange"in a))return rt.min();const s=a.targetChange;return s.targetIds&&s.targetIds.length?rt.min():s.readTime?Wr(s.readTime):rt.min()})(e);return this.listener.H_(n,r)}Y_(e){const n={};n.database=BS(this.serializer),n.addTarget=(function(a,s){let l;const c=s.target;if(l=A0(c)?{documents:h6(a,c)}:{query:m6(a,c).ft},l.targetId=s.targetId,s.resumeToken.approximateByteSize()>0){l.resumeToken=l6(a,s.resumeToken);const h=US(a,s.expectedCount);h!==null&&(l.expectedCount=h)}else if(s.snapshotVersion.compareTo(rt.min())>0){l.readTime=Dh(a,s.snapshotVersion.toTimestamp());const h=US(a,s.expectedCount);h!==null&&(l.expectedCount=h)}return l})(this.serializer,e);const r=TY(this.serializer,e);r&&(n.labels=r),this.q_(n)}Z_(e){const n={};n.database=BS(this.serializer),n.removeTarget=e,this.q_(n)}}class pZ extends K6{constructor(e,n,r,i,a,s){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",n,r,i,s),this.serializer=a}get X_(){return this.F_>0}start(){this.lastStreamToken=void 0,super.start()}K_(){this.X_&&this.ea([])}j_(e,n){return this.connection.T_("Write",e,n)}J_(e){return Qe(!!e.streamToken,31322),this.lastStreamToken=e.streamToken,Qe(!e.writeResults||e.writeResults.length===0,55816),this.listener.ta()}onNext(e){Qe(!!e.streamToken,12678),this.lastStreamToken=e.streamToken,this.M_.reset();const n=EY(e.writeResults,e.commitTime),r=Wr(e.commitTime);return this.listener.na(r,n)}ra(){const e={};e.database=BS(this.serializer),this.q_(e)}ea(e){const n={streamToken:this.lastStreamToken,writes:e.map((r=>eg(this.serializer,r)))};this.q_(n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gZ{}class yZ extends gZ{constructor(e,n,r,i){super(),this.authCredentials=e,this.appCheckCredentials=n,this.connection=r,this.serializer=i,this.ia=!1}sa(){if(this.ia)throw new Le(Ee.FAILED_PRECONDITION,"The client has already been terminated.")}Go(e,n,r,i){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([a,s])=>this.connection.Go(e,FS(n,r),i,a,s))).catch((a=>{throw a.name==="FirebaseError"?(a.code===Ee.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),a):new Le(Ee.UNKNOWN,a.toString())}))}Ho(e,n,r,i,a){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([s,l])=>this.connection.Ho(e,FS(n,r),i,s,l,a))).catch((s=>{throw s.name==="FirebaseError"?(s.code===Ee.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),s):new Le(Ee.UNKNOWN,s.toString())}))}terminate(){this.ia=!0,this.connection.terminate()}}class vZ{constructor(e,n){this.asyncQueue=e,this.onlineStateHandler=n,this.state="Unknown",this.oa=0,this._a=null,this.aa=!0}ua(){this.oa===0&&(this.ca("Unknown"),this._a=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,(()=>(this._a=null,this.la("Backend didn't respond within 10 seconds."),this.ca("Offline"),Promise.resolve()))))}ha(e){this.state==="Online"?this.ca("Unknown"):(this.oa++,this.oa>=1&&(this.Pa(),this.la(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.ca("Offline")))}set(e){this.Pa(),this.oa=0,e==="Online"&&(this.aa=!1),this.ca(e)}ca(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}la(e){const n=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.aa?(or(n),this.aa=!1):ke("OnlineStateTracker",n)}Pa(){this._a!==null&&(this._a.cancel(),this._a=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const jd="RemoteStore";class xZ{constructor(e,n,r,i,a){this.localStore=e,this.datastore=n,this.asyncQueue=r,this.remoteSyncer={},this.Ta=[],this.Ia=new Map,this.Ea=new Set,this.da=[],this.Aa=a,this.Aa.Oo((s=>{r.enqueueAndForget((async()=>{Gd(this)&&(ke(jd,"Restarting streams for network reachability change."),await(async function(c){const h=Ye(c);h.Ea.add(4),await Mg(h),h.Ra.set("Unknown"),h.Ea.delete(4),await x_(h)})(this))}))})),this.Ra=new vZ(r,i)}}async function x_(t){if(Gd(t))for(const e of t.da)await e(!0)}async function Mg(t){for(const e of t.da)await e(!1)}function __(t,e){const n=Ye(t);n.Ia.has(e.targetId)||(n.Ia.set(e.targetId,e),nC(n)?tC(n):em(n).O_()&&eC(n,e))}function kh(t,e){const n=Ye(t),r=em(n);n.Ia.delete(e),r.O_()&&W6(n,e),n.Ia.size===0&&(r.O_()?r.L_():Gd(n)&&n.Ra.set("Unknown"))}function eC(t,e){if(t.Va.Ue(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(rt.min())>0){const n=t.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(n)}em(t).Y_(e)}function W6(t,e){t.Va.Ue(e),em(t).Z_(e)}function tC(t){t.Va=new mY({getRemoteKeysForTarget:e=>t.remoteSyncer.getRemoteKeysForTarget(e),At:e=>t.Ia.get(e)||null,ht:()=>t.datastore.serializer.databaseId}),em(t).start(),t.Ra.ua()}function nC(t){return Gd(t)&&!em(t).x_()&&t.Ia.size>0}function Gd(t){return Ye(t).Ea.size===0}function Y6(t){t.Va=void 0}async function _Z(t){t.Ra.set("Online")}async function bZ(t){t.Ia.forEach(((e,n)=>{eC(t,e)}))}async function wZ(t,e){Y6(t),nC(t)?(t.Ra.ha(e),tC(t)):t.Ra.set("Unknown")}async function EZ(t,e,n){if(t.Ra.set("Online"),e instanceof o6&&e.state===2&&e.cause)try{await(async function(i,a){const s=a.cause;for(const l of a.targetIds)i.Ia.has(l)&&(await i.remoteSyncer.rejectListen(l,s),i.Ia.delete(l),i.Va.removeTarget(l))})(t,e)}catch(r){ke(jd,"Failed to remove targets %s: %s ",e.targetIds.join(","),r),await O0(t,r)}else if(e instanceof n0?t.Va.Ze(e):e instanceof s6?t.Va.st(e):t.Va.tt(e),!n.isEqual(rt.min()))try{const r=await V6(t.localStore);n.compareTo(r)>=0&&await(function(a,s){const l=a.Va.Tt(s);return l.targetChanges.forEach(((c,h)=>{if(c.resumeToken.approximateByteSize()>0){const p=a.Ia.get(h);p&&a.Ia.set(h,p.withResumeToken(c.resumeToken,s))}})),l.targetMismatches.forEach(((c,h)=>{const p=a.Ia.get(c);if(!p)return;a.Ia.set(c,p.withResumeToken(cr.EMPTY_BYTE_STRING,p.snapshotVersion)),W6(a,c);const g=new _l(p.target,c,h,p.sequenceNumber);eC(a,g)})),a.remoteSyncer.applyRemoteEvent(l)})(t,n)}catch(r){ke(jd,"Failed to raise snapshot:",r),await O0(t,r)}}async function O0(t,e,n){if(!gc(e))throw e;t.Ea.add(1),await Mg(t),t.Ra.set("Offline"),n||(n=()=>V6(t.localStore)),t.asyncQueue.enqueueRetryable((async()=>{ke(jd,"Retrying IndexedDB access"),await n(),t.Ea.delete(1),await x_(t)}))}function Z6(t,e){return e().catch((n=>O0(t,n,e)))}async function Xh(t){const e=Ye(t),n=ic(e);let r=e.Ta.length>0?e.Ta[e.Ta.length-1].batchId:_d;for(;TZ(e);)try{const i=await lZ(e.localStore,r);if(i===null){e.Ta.length===0&&n.L_();break}r=i.batchId,SZ(e,i)}catch(i){await O0(e,i)}J6(e)&&Q6(e)}function TZ(t){return Gd(t)&&t.Ta.length<10}function SZ(t,e){t.Ta.push(e);const n=ic(t);n.O_()&&n.X_&&n.ea(e.mutations)}function J6(t){return Gd(t)&&!ic(t).x_()&&t.Ta.length>0}function Q6(t){ic(t).start()}async function AZ(t){ic(t).ra()}async function CZ(t){const e=ic(t);for(const n of t.Ta)e.ea(n.mutations)}async function IZ(t,e,n){const r=t.Ta.shift(),i=BA.from(r,e,n);await Z6(t,(()=>t.remoteSyncer.applySuccessfulWrite(i))),await Xh(t)}async function NZ(t,e){e&&ic(t).X_&&await(async function(r,i){if((function(s){return i6(s)&&s!==Ee.ABORTED})(i.code)){const a=r.Ta.shift();ic(r).B_(),await Z6(r,(()=>r.remoteSyncer.rejectFailedWrite(a.batchId,i))),await Xh(r)}})(t,e),J6(t)&&Q6(t)}async function R2(t,e){const n=Ye(t);n.asyncQueue.verifyOperationInProgress(),ke(jd,"RemoteStore received new credentials");const r=Gd(n);n.Ea.add(3),await Mg(n),r&&n.Ra.set("Unknown"),await n.remoteSyncer.handleCredentialChange(e),n.Ea.delete(3),await x_(n)}async function YS(t,e){const n=Ye(t);e?(n.Ea.delete(2),await x_(n)):e||(n.Ea.add(2),await Mg(n),n.Ra.set("Unknown"))}function em(t){return t.ma||(t.ma=(function(n,r,i){const a=Ye(n);return a.sa(),new mZ(r,a.connection,a.authCredentials,a.appCheckCredentials,a.serializer,i)})(t.datastore,t.asyncQueue,{Xo:_Z.bind(null,t),t_:bZ.bind(null,t),r_:wZ.bind(null,t),H_:EZ.bind(null,t)}),t.da.push((async e=>{e?(t.ma.B_(),nC(t)?tC(t):t.Ra.set("Unknown")):(await t.ma.stop(),Y6(t))}))),t.ma}function ic(t){return t.fa||(t.fa=(function(n,r,i){const a=Ye(n);return a.sa(),new pZ(r,a.connection,a.authCredentials,a.appCheckCredentials,a.serializer,i)})(t.datastore,t.asyncQueue,{Xo:()=>Promise.resolve(),t_:AZ.bind(null,t),r_:NZ.bind(null,t),ta:CZ.bind(null,t),na:IZ.bind(null,t)}),t.da.push((async e=>{e?(t.fa.B_(),await Xh(t)):(await t.fa.stop(),t.Ta.length>0&&(ke(jd,`Stopping write stream with ${t.Ta.length} pending writes`),t.Ta=[]))}))),t.fa}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rC{constructor(e,n,r,i,a){this.asyncQueue=e,this.timerId=n,this.targetTimeMs=r,this.op=i,this.removalCallback=a,this.deferred=new qs,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch((s=>{}))}get promise(){return this.deferred.promise}static createAndSchedule(e,n,r,i,a){const s=Date.now()+r,l=new rC(e,n,s,i,a);return l.start(r),l}start(e){this.timerHandle=setTimeout((()=>this.handleDelayElapsed()),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new Le(Ee.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget((()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then((e=>this.deferred.resolve(e)))):Promise.resolve()))}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function iC(t,e){if(or("AsyncQueue",`${e}: ${t}`),gc(t))return new Le(Ee.UNAVAILABLE,`${e}: ${t}`);throw t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ih{static emptySet(e){return new ih(e.comparator)}constructor(e){this.comparator=e?(n,r)=>e(n,r)||Be.comparator(n.key,r.key):(n,r)=>Be.comparator(n.key,r.key),this.keyedMap=xp(),this.sortedSet=new _n(this.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const n=this.keyedMap.get(e);return n?this.sortedSet.indexOf(n):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal(((n,r)=>(e(n),!1)))}add(e){const n=this.delete(e.key);return n.copy(n.keyedMap.insert(e.key,e),n.sortedSet.insert(e,null))}delete(e){const n=this.get(e);return n?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(n)):this}isEqual(e){if(!(e instanceof ih)||this.size!==e.size)return!1;const n=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();for(;n.hasNext();){const i=n.getNext().key,a=r.getNext().key;if(!i.isEqual(a))return!1}return!0}toString(){const e=[];return this.forEach((n=>{e.push(n.toString())})),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,n){const r=new ih;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=n,r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class k2{constructor(){this.ga=new _n(Be.comparator)}track(e){const n=e.doc.key,r=this.ga.get(n);r?e.type!==0&&r.type===3?this.ga=this.ga.insert(n,e):e.type===3&&r.type!==1?this.ga=this.ga.insert(n,{type:r.type,doc:e.doc}):e.type===2&&r.type===2?this.ga=this.ga.insert(n,{type:2,doc:e.doc}):e.type===2&&r.type===0?this.ga=this.ga.insert(n,{type:0,doc:e.doc}):e.type===1&&r.type===0?this.ga=this.ga.remove(n):e.type===1&&r.type===2?this.ga=this.ga.insert(n,{type:1,doc:r.doc}):e.type===0&&r.type===1?this.ga=this.ga.insert(n,{type:2,doc:e.doc}):Ge(63341,{Rt:e,pa:r}):this.ga=this.ga.insert(n,e)}ya(){const e=[];return this.ga.inorderTraversal(((n,r)=>{e.push(r)})),e}}class Mh{constructor(e,n,r,i,a,s,l,c,h){this.query=e,this.docs=n,this.oldDocs=r,this.docChanges=i,this.mutatedKeys=a,this.fromCache=s,this.syncStateChanged=l,this.excludesMetadataChanges=c,this.hasCachedResults=h}static fromInitialDocuments(e,n,r,i,a){const s=[];return n.forEach((l=>{s.push({type:0,doc:l})})),new Mh(e,n,ih.emptySet(n),s,r,i,!0,!1,a)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&f_(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const n=this.docChanges,r=e.docChanges;if(n.length!==r.length)return!1;for(let i=0;i<n.length;i++)if(n[i].type!==r[i].type||!n[i].doc.isEqual(r[i].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class PZ{constructor(){this.wa=void 0,this.Sa=[]}ba(){return this.Sa.some((e=>e.Da()))}}class DZ{constructor(){this.queries=M2(),this.onlineState="Unknown",this.Ca=new Set}terminate(){(function(n,r){const i=Ye(n),a=i.queries;i.queries=M2(),a.forEach(((s,l)=>{for(const c of l.Sa)c.onError(r)}))})(this,new Le(Ee.ABORTED,"Firestore shutting down"))}}function M2(){return new Bl((t=>HV(t)),f_)}async function X6(t,e){const n=Ye(t);let r=3;const i=e.query;let a=n.queries.get(i);a?!a.ba()&&e.Da()&&(r=2):(a=new PZ,r=e.Da()?0:1);try{switch(r){case 0:a.wa=await n.onListen(i,!0);break;case 1:a.wa=await n.onListen(i,!1);break;case 2:await n.onFirstRemoteStoreListen(i)}}catch(s){const l=iC(s,`Initialization of query '${Hf(e.query)}' failed`);return void e.onError(l)}n.queries.set(i,a),a.Sa.push(e),e.va(n.onlineState),a.wa&&e.Fa(a.wa)&&aC(n)}async function eU(t,e){const n=Ye(t),r=e.query;let i=3;const a=n.queries.get(r);if(a){const s=a.Sa.indexOf(e);s>=0&&(a.Sa.splice(s,1),a.Sa.length===0?i=e.Da()?0:1:!a.ba()&&e.Da()&&(i=2))}switch(i){case 0:return n.queries.delete(r),n.onUnlisten(r,!0);case 1:return n.queries.delete(r),n.onUnlisten(r,!1);case 2:return n.onLastRemoteStoreUnlisten(r);default:return}}function RZ(t,e){const n=Ye(t);let r=!1;for(const i of e){const a=i.query,s=n.queries.get(a);if(s){for(const l of s.Sa)l.Fa(i)&&(r=!0);s.wa=i}}r&&aC(n)}function kZ(t,e,n){const r=Ye(t),i=r.queries.get(e);if(i)for(const a of i.Sa)a.onError(n);r.queries.delete(e)}function aC(t){t.Ca.forEach((e=>{e.next()}))}var ZS,O2;(O2=ZS||(ZS={})).Ma="default",O2.Cache="cache";class tU{constructor(e,n,r){this.query=e,this.xa=n,this.Oa=!1,this.Na=null,this.onlineState="Unknown",this.options=r||{}}Fa(e){if(!this.options.includeMetadataChanges){const r=[];for(const i of e.docChanges)i.type!==3&&r.push(i);e=new Mh(e.query,e.docs,e.oldDocs,r,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let n=!1;return this.Oa?this.Ba(e)&&(this.xa.next(e),n=!0):this.La(e,this.onlineState)&&(this.ka(e),n=!0),this.Na=e,n}onError(e){this.xa.error(e)}va(e){this.onlineState=e;let n=!1;return this.Na&&!this.Oa&&this.La(this.Na,e)&&(this.ka(this.Na),n=!0),n}La(e,n){if(!e.fromCache||!this.Da())return!0;const r=n!=="Offline";return(!this.options.qa||!r)&&(!e.docs.isEmpty()||e.hasCachedResults||n==="Offline")}Ba(e){if(e.docChanges.length>0)return!0;const n=this.Na&&this.Na.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!n)&&this.options.includeMetadataChanges===!0}ka(e){e=Mh.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.Oa=!0,this.xa.next(e)}Da(){return this.options.source!==ZS.Cache}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nU{constructor(e){this.key=e}}class rU{constructor(e){this.key=e}}class MZ{constructor(e,n){this.query=e,this.Ya=n,this.Za=null,this.hasCachedResults=!1,this.current=!1,this.Xa=Et(),this.mutatedKeys=Et(),this.eu=$V(e),this.tu=new ih(this.eu)}get nu(){return this.Ya}ru(e,n){const r=n?n.iu:new k2,i=n?n.tu:this.tu;let a=n?n.mutatedKeys:this.mutatedKeys,s=i,l=!1;const c=this.query.limitType==="F"&&i.size===this.query.limit?i.last():null,h=this.query.limitType==="L"&&i.size===this.query.limit?i.first():null;if(e.inorderTraversal(((p,g)=>{const x=i.get(p),b=Dg(this.query,g)?g:null,C=!!x&&this.mutatedKeys.has(x.key),A=!!b&&(b.hasLocalMutations||this.mutatedKeys.has(b.key)&&b.hasCommittedMutations);let D=!1;x&&b?x.data.isEqual(b.data)?C!==A&&(r.track({type:3,doc:b}),D=!0):this.su(x,b)||(r.track({type:2,doc:b}),D=!0,(c&&this.eu(b,c)>0||h&&this.eu(b,h)<0)&&(l=!0)):!x&&b?(r.track({type:0,doc:b}),D=!0):x&&!b&&(r.track({type:1,doc:x}),D=!0,(c||h)&&(l=!0)),D&&(b?(s=s.add(b),a=A?a.add(p):a.delete(p)):(s=s.delete(p),a=a.delete(p)))})),this.query.limit!==null)for(;s.size>this.query.limit;){const p=this.query.limitType==="F"?s.last():s.first();s=s.delete(p.key),a=a.delete(p.key),r.track({type:1,doc:p})}return{tu:s,iu:r,Cs:l,mutatedKeys:a}}su(e,n){return e.hasLocalMutations&&n.hasCommittedMutations&&!n.hasLocalMutations}applyChanges(e,n,r,i){const a=this.tu;this.tu=e.tu,this.mutatedKeys=e.mutatedKeys;const s=e.iu.ya();s.sort(((p,g)=>(function(b,C){const A=D=>{switch(D){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return Ge(20277,{Rt:D})}};return A(b)-A(C)})(p.type,g.type)||this.eu(p.doc,g.doc))),this.ou(r),i=i??!1;const l=n&&!i?this._u():[],c=this.Xa.size===0&&this.current&&!i?1:0,h=c!==this.Za;return this.Za=c,s.length!==0||h?{snapshot:new Mh(this.query,e.tu,a,s,e.mutatedKeys,c===0,h,!1,!!r&&r.resumeToken.approximateByteSize()>0),au:l}:{au:l}}va(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({tu:this.tu,iu:new k2,mutatedKeys:this.mutatedKeys,Cs:!1},!1)):{au:[]}}uu(e){return!this.Ya.has(e)&&!!this.tu.has(e)&&!this.tu.get(e).hasLocalMutations}ou(e){e&&(e.addedDocuments.forEach((n=>this.Ya=this.Ya.add(n))),e.modifiedDocuments.forEach((n=>{})),e.removedDocuments.forEach((n=>this.Ya=this.Ya.delete(n))),this.current=e.current)}_u(){if(!this.current)return[];const e=this.Xa;this.Xa=Et(),this.tu.forEach((r=>{this.uu(r.key)&&(this.Xa=this.Xa.add(r.key))}));const n=[];return e.forEach((r=>{this.Xa.has(r)||n.push(new rU(r))})),this.Xa.forEach((r=>{e.has(r)||n.push(new nU(r))})),n}cu(e){this.Ya=e.Qs,this.Xa=Et();const n=this.ru(e.documents);return this.applyChanges(n,!0)}lu(){return Mh.fromInitialDocuments(this.query,this.tu,this.mutatedKeys,this.Za===0,this.hasCachedResults)}}const tm="SyncEngine";class OZ{constructor(e,n,r){this.query=e,this.targetId=n,this.view=r}}class jZ{constructor(e){this.key=e,this.hu=!1}}class LZ{constructor(e,n,r,i,a,s){this.localStore=e,this.remoteStore=n,this.eventManager=r,this.sharedClientState=i,this.currentUser=a,this.maxConcurrentLimboResolutions=s,this.Pu={},this.Tu=new Bl((l=>HV(l)),f_),this.Iu=new Map,this.Eu=new Set,this.du=new _n(Be.comparator),this.Au=new Map,this.Ru=new KA,this.Vu={},this.mu=new Map,this.fu=Od.cr(),this.onlineState="Unknown",this.gu=void 0}get isPrimaryClient(){return this.gu===!0}}async function VZ(t,e,n=!0){const r=b_(t);let i;const a=r.Tu.get(e);return a?(r.sharedClientState.addLocalQueryTarget(a.targetId),i=a.view.lu()):i=await iU(r,e,n,!0),i}async function UZ(t,e){const n=b_(t);await iU(n,e,!0,!1)}async function iU(t,e,n,r){const i=await R0(t.localStore,Fa(e)),a=i.targetId,s=t.sharedClientState.addLocalQueryTarget(a,n);let l;return r&&(l=await sC(t,e,a,s==="current",i.resumeToken)),t.isPrimaryClient&&n&&__(t.remoteStore,i),l}async function sC(t,e,n,r,i){t.pu=(g,x,b)=>(async function(A,D,R,j){let O=D.view.ru(R);O.Cs&&(O=await $S(A.localStore,D.query,!1).then((({documents:U})=>D.view.ru(U,O))));const q=j&&j.targetChanges.get(D.targetId),$=j&&j.targetMismatches.get(D.targetId)!=null,H=D.view.applyChanges(O,A.isPrimaryClient,q,$);return JS(A,D.targetId,H.au),H.snapshot})(t,g,x,b);const a=await $S(t.localStore,e,!0),s=new MZ(e,a.Qs),l=s.ru(a.documents),c=kg.createSynthesizedTargetChangeForCurrentChange(n,r&&t.onlineState!=="Offline",i),h=s.applyChanges(l,t.isPrimaryClient,c);JS(t,n,h.au);const p=new OZ(e,n,s);return t.Tu.set(e,p),t.Iu.has(n)?t.Iu.get(n).push(e):t.Iu.set(n,[e]),h.snapshot}async function FZ(t,e,n){const r=Ye(t),i=r.Tu.get(e),a=r.Iu.get(i.targetId);if(a.length>1)return r.Iu.set(i.targetId,a.filter((s=>!f_(s,e)))),void r.Tu.delete(e);r.isPrimaryClient?(r.sharedClientState.removeLocalQueryTarget(i.targetId),r.sharedClientState.isActiveQueryTarget(i.targetId)||await Rh(r.localStore,i.targetId,!1).then((()=>{r.sharedClientState.clearQueryState(i.targetId),n&&kh(r.remoteStore,i.targetId),Oh(r,i.targetId)})).catch(pc)):(Oh(r,i.targetId),await Rh(r.localStore,i.targetId,!0))}async function BZ(t,e){const n=Ye(t),r=n.Tu.get(e),i=n.Iu.get(r.targetId);n.isPrimaryClient&&i.length===1&&(n.sharedClientState.removeLocalQueryTarget(r.targetId),kh(n.remoteStore,r.targetId))}async function zZ(t,e,n){const r=cC(t);try{const i=await(function(s,l){const c=Ye(s),h=ze.now(),p=l.reduce(((b,C)=>b.add(C.key)),Et());let g,x;return c.persistence.runTransaction("Locally write mutations","readwrite",(b=>{let C=La(),A=Et();return c.Ns.getEntries(b,p).next((D=>{C=D,C.forEach(((R,j)=>{j.isValidDocument()||(A=A.add(R))}))})).next((()=>c.localDocuments.getOverlayedDocuments(b,C))).next((D=>{g=D;const R=[];for(const j of l){const O=cY(j,g.get(j.key).overlayedDocument);O!=null&&R.push(new zl(j.key,O,MV(O.value.mapValue),Vn.exists(!0)))}return c.mutationQueue.addMutationBatch(b,h,R,l)})).next((D=>{x=D;const R=D.applyToLocalDocumentSet(g,A);return c.documentOverlayCache.saveOverlays(b,D.batchId,R)}))})).then((()=>({batchId:x.batchId,changes:WV(g)})))})(r.localStore,e);r.sharedClientState.addPendingMutation(i.batchId),(function(s,l,c){let h=s.Vu[s.currentUser.toKey()];h||(h=new _n(ft)),h=h.insert(l,c),s.Vu[s.currentUser.toKey()]=h})(r,i.batchId,n),await vc(r,i.changes),await Xh(r.remoteStore)}catch(i){const a=iC(i,"Failed to persist write");n.reject(a)}}async function aU(t,e){const n=Ye(t);try{const r=await sZ(n.localStore,e);e.targetChanges.forEach(((i,a)=>{const s=n.Au.get(a);s&&(Qe(i.addedDocuments.size+i.modifiedDocuments.size+i.removedDocuments.size<=1,22616),i.addedDocuments.size>0?s.hu=!0:i.modifiedDocuments.size>0?Qe(s.hu,14607):i.removedDocuments.size>0&&(Qe(s.hu,42227),s.hu=!1))})),await vc(n,r,e)}catch(r){await pc(r)}}function j2(t,e,n){const r=Ye(t);if(r.isPrimaryClient&&n===0||!r.isPrimaryClient&&n===1){const i=[];r.Tu.forEach(((a,s)=>{const l=s.view.va(e);l.snapshot&&i.push(l.snapshot)})),(function(s,l){const c=Ye(s);c.onlineState=l;let h=!1;c.queries.forEach(((p,g)=>{for(const x of g.Sa)x.va(l)&&(h=!0)})),h&&aC(c)})(r.eventManager,e),i.length&&r.Pu.H_(i),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}async function qZ(t,e,n){const r=Ye(t);r.sharedClientState.updateQueryState(e,"rejected",n);const i=r.Au.get(e),a=i&&i.key;if(a){let s=new _n(Be.comparator);s=s.insert(a,Ln.newNoDocument(a,rt.min()));const l=Et().add(a),c=new Rg(rt.min(),new Map,new _n(ft),s,l);await aU(r,c),r.du=r.du.remove(a),r.Au.delete(e),uC(r)}else await Rh(r.localStore,e,!1).then((()=>Oh(r,e,n))).catch(pc)}async function HZ(t,e){const n=Ye(t),r=e.batch.batchId;try{const i=await aZ(n.localStore,e);lC(n,r,null),oC(n,r),n.sharedClientState.updateMutationState(r,"acknowledged"),await vc(n,i)}catch(i){await pc(i)}}async function GZ(t,e,n){const r=Ye(t);try{const i=await(function(s,l){const c=Ye(s);return c.persistence.runTransaction("Reject batch","readwrite-primary",(h=>{let p;return c.mutationQueue.lookupMutationBatch(h,l).next((g=>(Qe(g!==null,37113),p=g.keys(),c.mutationQueue.removeMutationBatch(h,g)))).next((()=>c.mutationQueue.performConsistencyCheck(h))).next((()=>c.documentOverlayCache.removeOverlaysForBatchId(h,p,l))).next((()=>c.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(h,p))).next((()=>c.localDocuments.getDocuments(h,p)))}))})(r.localStore,e);lC(r,e,n),oC(r,e),r.sharedClientState.updateMutationState(e,"rejected",n),await vc(r,i)}catch(i){await pc(i)}}function oC(t,e){(t.mu.get(e)||[]).forEach((n=>{n.resolve()})),t.mu.delete(e)}function lC(t,e,n){const r=Ye(t);let i=r.Vu[r.currentUser.toKey()];if(i){const a=i.get(e);a&&(n?a.reject(n):a.resolve(),i=i.remove(e)),r.Vu[r.currentUser.toKey()]=i}}function Oh(t,e,n=null){t.sharedClientState.removeLocalQueryTarget(e);for(const r of t.Iu.get(e))t.Tu.delete(r),n&&t.Pu.yu(r,n);t.Iu.delete(e),t.isPrimaryClient&&t.Ru.jr(e).forEach((r=>{t.Ru.containsKey(r)||sU(t,r)}))}function sU(t,e){t.Eu.delete(e.path.canonicalString());const n=t.du.get(e);n!==null&&(kh(t.remoteStore,n),t.du=t.du.remove(e),t.Au.delete(n),uC(t))}function JS(t,e,n){for(const r of n)r instanceof nU?(t.Ru.addReference(r.key,e),$Z(t,r)):r instanceof rU?(ke(tm,"Document no longer in limbo: "+r.key),t.Ru.removeReference(r.key,e),t.Ru.containsKey(r.key)||sU(t,r.key)):Ge(19791,{wu:r})}function $Z(t,e){const n=e.key,r=n.path.canonicalString();t.du.get(n)||t.Eu.has(r)||(ke(tm,"New document in limbo: "+n),t.Eu.add(r),uC(t))}function uC(t){for(;t.Eu.size>0&&t.du.size<t.maxConcurrentLimboResolutions;){const e=t.Eu.values().next().value;t.Eu.delete(e);const n=new Be(Ut.fromString(e)),r=t.fu.next();t.Au.set(r,new jZ(n)),t.du=t.du.insert(n,r),__(t.remoteStore,new _l(Fa(d_(n.path)),r,"TargetPurposeLimboResolution",ca.ce))}}async function vc(t,e,n){const r=Ye(t),i=[],a=[],s=[];r.Tu.isEmpty()||(r.Tu.forEach(((l,c)=>{s.push(r.pu(c,e,n).then((h=>{var p;if((h||n)&&r.isPrimaryClient){const g=h?!h.fromCache:(p=n==null?void 0:n.targetChanges.get(c.targetId))==null?void 0:p.current;r.sharedClientState.updateQueryState(c.targetId,g?"current":"not-current")}if(h){i.push(h);const g=ZA.As(c.targetId,h);a.push(g)}})))})),await Promise.all(s),r.Pu.H_(i),await(async function(c,h){const p=Ye(c);try{await p.persistence.runTransaction("notifyLocalViewChanges","readwrite",(g=>de.forEach(h,(x=>de.forEach(x.Es,(b=>p.persistence.referenceDelegate.addReference(g,x.targetId,b))).next((()=>de.forEach(x.ds,(b=>p.persistence.referenceDelegate.removeReference(g,x.targetId,b)))))))))}catch(g){if(!gc(g))throw g;ke(JA,"Failed to update sequence numbers: "+g)}for(const g of h){const x=g.targetId;if(!g.fromCache){const b=p.Ms.get(x),C=b.snapshotVersion,A=b.withLastLimboFreeSnapshotVersion(C);p.Ms=p.Ms.insert(x,A)}}})(r.localStore,a))}async function KZ(t,e){const n=Ye(t);if(!n.currentUser.isEqual(e)){ke(tm,"User change. New user:",e.toKey());const r=await L6(n.localStore,e);n.currentUser=e,(function(a,s){a.mu.forEach((l=>{l.forEach((c=>{c.reject(new Le(Ee.CANCELLED,s))}))})),a.mu.clear()})(n,"'waitForPendingWrites' promise is rejected due to a user change."),n.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),await vc(n,r.Ls)}}function WZ(t,e){const n=Ye(t),r=n.Au.get(e);if(r&&r.hu)return Et().add(r.key);{let i=Et();const a=n.Iu.get(e);if(!a)return i;for(const s of a){const l=n.Tu.get(s);i=i.unionWith(l.view.nu)}return i}}async function YZ(t,e){const n=Ye(t),r=await $S(n.localStore,e.query,!0),i=e.view.cu(r);return n.isPrimaryClient&&JS(n,e.targetId,i.au),i}async function ZZ(t,e){const n=Ye(t);return F6(n.localStore,e).then((r=>vc(n,r)))}async function JZ(t,e,n,r){const i=Ye(t),a=await(function(l,c){const h=Ye(l),p=Ye(h.mutationQueue);return h.persistence.runTransaction("Lookup mutation documents","readonly",(g=>p.er(g,c).next((x=>x?h.localDocuments.getDocuments(g,x):de.resolve(null)))))})(i.localStore,e);a!==null?(n==="pending"?await Xh(i.remoteStore):n==="acknowledged"||n==="rejected"?(lC(i,e,r||null),oC(i,e),(function(l,c){Ye(Ye(l).mutationQueue).ir(c)})(i.localStore,e)):Ge(6720,"Unknown batchState",{Su:n}),await vc(i,a)):ke(tm,"Cannot apply mutation batch with id: "+e)}async function QZ(t,e){const n=Ye(t);if(b_(n),cC(n),e===!0&&n.gu!==!0){const r=n.sharedClientState.getAllActiveQueryTargets(),i=await L2(n,r.toArray());n.gu=!0,await YS(n.remoteStore,!0);for(const a of i)__(n.remoteStore,a)}else if(e===!1&&n.gu!==!1){const r=[];let i=Promise.resolve();n.Iu.forEach(((a,s)=>{n.sharedClientState.isLocalQueryTarget(s)?r.push(s):i=i.then((()=>(Oh(n,s),Rh(n.localStore,s,!0)))),kh(n.remoteStore,s)})),await i,await L2(n,r),(function(s){const l=Ye(s);l.Au.forEach(((c,h)=>{kh(l.remoteStore,h)})),l.Ru.Jr(),l.Au=new Map,l.du=new _n(Be.comparator)})(n),n.gu=!1,await YS(n.remoteStore,!1)}}async function L2(t,e,n){const r=Ye(t),i=[],a=[];for(const s of e){let l;const c=r.Iu.get(s);if(c&&c.length!==0){l=await R0(r.localStore,Fa(c[0]));for(const h of c){const p=r.Tu.get(h),g=await YZ(r,p);g.snapshot&&a.push(g.snapshot)}}else{const h=await U6(r.localStore,s);l=await R0(r.localStore,h),await sC(r,oU(h),s,!1,l.resumeToken)}i.push(l)}return r.Pu.H_(a),i}function oU(t){return zV(t.path,t.collectionGroup,t.orderBy,t.filters,t.limit,"F",t.startAt,t.endAt)}function XZ(t){return(function(n){return Ye(Ye(n).persistence).Ts()})(Ye(t).localStore)}async function eJ(t,e,n,r){const i=Ye(t);if(i.gu)return void ke(tm,"Ignoring unexpected query state notification.");const a=i.Iu.get(e);if(a&&a.length>0)switch(n){case"current":case"not-current":{const s=await F6(i.localStore,GV(a[0])),l=Rg.createSynthesizedRemoteEventForCurrentChange(e,n==="current",cr.EMPTY_BYTE_STRING);await vc(i,s,l);break}case"rejected":await Rh(i.localStore,e,!0),Oh(i,e,r);break;default:Ge(64155,n)}}async function tJ(t,e,n){const r=b_(t);if(r.gu){for(const i of e){if(r.Iu.has(i)&&r.sharedClientState.isActiveQueryTarget(i)){ke(tm,"Adding an already active target "+i);continue}const a=await U6(r.localStore,i),s=await R0(r.localStore,a);await sC(r,oU(a),s.targetId,!1,s.resumeToken),__(r.remoteStore,s)}for(const i of n)r.Iu.has(i)&&await Rh(r.localStore,i,!1).then((()=>{kh(r.remoteStore,i),Oh(r,i)})).catch(pc)}}function b_(t){const e=Ye(t);return e.remoteStore.remoteSyncer.applyRemoteEvent=aU.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=WZ.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=qZ.bind(null,e),e.Pu.H_=RZ.bind(null,e.eventManager),e.Pu.yu=kZ.bind(null,e.eventManager),e}function cC(t){const e=Ye(t);return e.remoteStore.remoteSyncer.applySuccessfulWrite=HZ.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=GZ.bind(null,e),e}class tg{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=v_(e.databaseInfo.databaseId),this.sharedClientState=this.Du(e),this.persistence=this.Cu(e),await this.persistence.start(),this.localStore=this.vu(e),this.gcScheduler=this.Fu(e,this.localStore),this.indexBackfillerScheduler=this.Mu(e,this.localStore)}Fu(e,n){return null}Mu(e,n){return null}vu(e){return j6(this.persistence,new O6,e.initialUser,this.serializer)}Cu(e){return new WA(y_.mi,this.serializer)}Du(e){return new G6}async terminate(){var e,n;(e=this.gcScheduler)==null||e.stop(),(n=this.indexBackfillerScheduler)==null||n.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}tg.provider={build:()=>new tg};class nJ extends tg{constructor(e){super(),this.cacheSizeBytes=e}Fu(e,n){Qe(this.persistence.referenceDelegate instanceof D0,46915);const r=this.persistence.referenceDelegate.garbageCollector;return new N6(r,e.asyncQueue,n)}Cu(e){const n=this.cacheSizeBytes!==void 0?_i.withCacheSize(this.cacheSizeBytes):_i.DEFAULT;return new WA((r=>D0.mi(r,n)),this.serializer)}}class lU extends tg{constructor(e,n,r){super(),this.xu=e,this.cacheSizeBytes=n,this.forceOwnership=r,this.kind="persistent",this.synchronizeTabs=!1}async initialize(e){await super.initialize(e),await this.xu.initialize(this,e),await cC(this.xu.syncEngine),await Xh(this.xu.remoteStore),await this.persistence.Ji((()=>(this.gcScheduler&&!this.gcScheduler.started&&this.gcScheduler.start(),this.indexBackfillerScheduler&&!this.indexBackfillerScheduler.started&&this.indexBackfillerScheduler.start(),Promise.resolve())))}vu(e){return j6(this.persistence,new O6,e.initialUser,this.serializer)}Fu(e,n){const r=this.persistence.referenceDelegate.garbageCollector;return new N6(r,e.asyncQueue,n)}Mu(e,n){const r=new hW(n,this.persistence);return new fW(e.asyncQueue,r)}Cu(e){const n=M6(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey),r=this.cacheSizeBytes!==void 0?_i.withCacheSize(this.cacheSizeBytes):_i.DEFAULT;return new YA(this.synchronizeTabs,n,e.clientId,r,e.asyncQueue,$6(),i0(),this.serializer,this.sharedClientState,!!this.forceOwnership)}Du(e){return new G6}}class rJ extends lU{constructor(e,n){super(e,n,!1),this.xu=e,this.cacheSizeBytes=n,this.synchronizeTabs=!0}async initialize(e){await super.initialize(e);const n=this.xu.syncEngine;this.sharedClientState instanceof NE&&(this.sharedClientState.syncEngine={Co:JZ.bind(null,n),vo:eJ.bind(null,n),Fo:tJ.bind(null,n),Ts:XZ.bind(null,n),Do:ZZ.bind(null,n)},await this.sharedClientState.start()),await this.persistence.Ji((async r=>{await QZ(this.xu.syncEngine,r),this.gcScheduler&&(r&&!this.gcScheduler.started?this.gcScheduler.start():r||this.gcScheduler.stop()),this.indexBackfillerScheduler&&(r&&!this.indexBackfillerScheduler.started?this.indexBackfillerScheduler.start():r||this.indexBackfillerScheduler.stop())}))}Du(e){const n=$6();if(!NE.v(n))throw new Le(Ee.UNIMPLEMENTED,"IndexedDB persistence is only available on platforms that support LocalStorage.");const r=M6(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey);return new NE(n,e.asyncQueue,r,e.clientId,e.initialUser)}}class ng{async initialize(e,n){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(n),this.remoteStore=this.createRemoteStore(n),this.eventManager=this.createEventManager(n),this.syncEngine=this.createSyncEngine(n,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=r=>j2(this.syncEngine,r,1),this.remoteStore.remoteSyncer.handleCredentialChange=KZ.bind(null,this.syncEngine),await YS(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return(function(){return new DZ})()}createDatastore(e){const n=v_(e.databaseInfo.databaseId),r=(function(a){return new hZ(a)})(e.databaseInfo);return(function(a,s,l,c){return new yZ(a,s,l,c)})(e.authCredentials,e.appCheckCredentials,r,n)}createRemoteStore(e){return(function(r,i,a,s,l){return new xZ(r,i,a,s,l)})(this.localStore,this.datastore,e.asyncQueue,(n=>j2(this.syncEngine,n,0)),(function(){return P2.v()?new P2:new uZ})())}createSyncEngine(e,n){return(function(i,a,s,l,c,h,p){const g=new LZ(i,a,s,l,c,h);return p&&(g.gu=!0),g})(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,n)}async terminate(){var e,n;await(async function(i){const a=Ye(i);ke(jd,"RemoteStore shutting down."),a.Ea.add(5),await Mg(a),a.Aa.shutdown(),a.Ra.set("Unknown")})(this.remoteStore),(e=this.datastore)==null||e.terminate(),(n=this.eventManager)==null||n.terminate()}}ng.provider={build:()=>new ng};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uU{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.Ou(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.Ou(this.observer.error,e):or("Uncaught Error in snapshot listener:",e.toString()))}Nu(){this.muted=!0}Ou(e,n){setTimeout((()=>{this.muted||e(n)}),0)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class iJ{constructor(e){this.datastore=e,this.readVersions=new Map,this.mutations=[],this.committed=!1,this.lastTransactionError=null,this.writtenDocs=new Set}async lookup(e){if(this.ensureCommitNotCalled(),this.mutations.length>0)throw this.lastTransactionError=new Le(Ee.INVALID_ARGUMENT,"Firestore transactions require all reads to be executed before all writes."),this.lastTransactionError;const n=await(async function(i,a){const s=Ye(i),l={documents:a.map((g=>Xp(s.serializer,g)))},c=await s.Ho("BatchGetDocuments",s.serializer.databaseId,Ut.emptyPath(),l,a.length),h=new Map;c.forEach((g=>{const x=bY(s.serializer,g);h.set(x.key.toString(),x)}));const p=[];return a.forEach((g=>{const x=h.get(g.toString());Qe(!!x,55234,{key:g}),p.push(x)})),p})(this.datastore,e);return n.forEach((r=>this.recordVersion(r))),n}set(e,n){this.write(n.toMutation(e,this.precondition(e))),this.writtenDocs.add(e.toString())}update(e,n){try{this.write(n.toMutation(e,this.preconditionForUpdate(e)))}catch(r){this.lastTransactionError=r}this.writtenDocs.add(e.toString())}delete(e){this.write(new Qh(e,this.precondition(e))),this.writtenDocs.add(e.toString())}async commit(){if(this.ensureCommitNotCalled(),this.lastTransactionError)throw this.lastTransactionError;const e=this.readVersions;this.mutations.forEach((n=>{e.delete(n.key.toString())})),e.forEach(((n,r)=>{const i=Be.fromPath(r);this.mutations.push(new UA(i,this.precondition(i)))})),await(async function(r,i){const a=Ye(r),s={writes:i.map((l=>eg(a.serializer,l)))};await a.Go("Commit",a.serializer.databaseId,Ut.emptyPath(),s)})(this.datastore,this.mutations),this.committed=!0}recordVersion(e){let n;if(e.isFoundDocument())n=e.version;else{if(!e.isNoDocument())throw Ge(50498,{Gu:e.constructor.name});n=rt.min()}const r=this.readVersions.get(e.key.toString());if(r){if(!n.isEqual(r))throw new Le(Ee.ABORTED,"Document version changed between two reads.")}else this.readVersions.set(e.key.toString(),n)}precondition(e){const n=this.readVersions.get(e.toString());return!this.writtenDocs.has(e.toString())&&n?n.isEqual(rt.min())?Vn.exists(!1):Vn.updateTime(n):Vn.none()}preconditionForUpdate(e){const n=this.readVersions.get(e.toString());if(!this.writtenDocs.has(e.toString())&&n){if(n.isEqual(rt.min()))throw new Le(Ee.INVALID_ARGUMENT,"Can't update a document that doesn't exist.");return Vn.updateTime(n)}return Vn.exists(!0)}write(e){this.ensureCommitNotCalled(),this.mutations.push(e)}ensureCommitNotCalled(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class aJ{constructor(e,n,r,i,a){this.asyncQueue=e,this.datastore=n,this.options=r,this.updateFunction=i,this.deferred=a,this.zu=r.maxAttempts,this.M_=new XA(this.asyncQueue,"transaction_retry")}ju(){this.zu-=1,this.Ju()}Ju(){this.M_.p_((async()=>{const e=new iJ(this.datastore),n=this.Hu(e);n&&n.then((r=>{this.asyncQueue.enqueueAndForget((()=>e.commit().then((()=>{this.deferred.resolve(r)})).catch((i=>{this.Yu(i)}))))})).catch((r=>{this.Yu(r)}))}))}Hu(e){try{const n=this.updateFunction(e);return!Cg(n)&&n.catch&&n.then?n:(this.deferred.reject(Error("Transaction callback must return a Promise")),null)}catch(n){return this.deferred.reject(n),null}}Yu(e){this.zu>0&&this.Zu(e)?(this.zu-=1,this.asyncQueue.enqueueAndForget((()=>(this.Ju(),Promise.resolve())))):this.deferred.reject(e)}Zu(e){if((e==null?void 0:e.name)==="FirebaseError"){const n=e.code;return n==="aborted"||n==="failed-precondition"||n==="already-exists"||!i6(n)}return!1}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ac="FirestoreClient";class sJ{constructor(e,n,r,i,a){this.authCredentials=e,this.appCheckCredentials=n,this.asyncQueue=r,this.databaseInfo=i,this.user=xi.UNAUTHENTICATED,this.clientId=AA.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=a,this.authCredentials.start(r,(async s=>{ke(ac,"Received user=",s.uid),await this.authCredentialListener(s),this.user=s})),this.appCheckCredentials.start(r,(s=>(ke(ac,"Received new app check token=",s),this.appCheckCredentialListener(s,this.user))))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new qs;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted((async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(n){const r=iC(n,"Failed to shutdown persistence");e.reject(r)}})),e.promise}}async function DE(t,e){t.asyncQueue.verifyOperationInProgress(),ke(ac,"Initializing OfflineComponentProvider");const n=t.configuration;await e.initialize(n);let r=n.initialUser;t.setCredentialChangeListener((async i=>{r.isEqual(i)||(await L6(e.localStore,i),r=i)})),e.persistence.setDatabaseDeletedListener((()=>t.terminate())),t._offlineComponents=e}async function V2(t,e){t.asyncQueue.verifyOperationInProgress();const n=await oJ(t);ke(ac,"Initializing OnlineComponentProvider"),await e.initialize(n,t.configuration),t.setCredentialChangeListener((r=>R2(e.remoteStore,r))),t.setAppCheckTokenChangeListener(((r,i)=>R2(e.remoteStore,i))),t._onlineComponents=e}async function oJ(t){if(!t._offlineComponents)if(t._uninitializedComponentsProvider){ke(ac,"Using user provided OfflineComponentProvider");try{await DE(t,t._uninitializedComponentsProvider._offline)}catch(e){const n=e;if(!(function(i){return i.name==="FirebaseError"?i.code===Ee.FAILED_PRECONDITION||i.code===Ee.UNIMPLEMENTED:!(typeof DOMException<"u"&&i instanceof DOMException)||i.code===22||i.code===20||i.code===11})(n))throw n;zp("Error using user provided cache. Falling back to memory cache: "+n),await DE(t,new tg)}}else ke(ac,"Using default OfflineComponentProvider"),await DE(t,new nJ(void 0));return t._offlineComponents}async function dC(t){return t._onlineComponents||(t._uninitializedComponentsProvider?(ke(ac,"Using user provided OnlineComponentProvider"),await V2(t,t._uninitializedComponentsProvider._online)):(ke(ac,"Using default OnlineComponentProvider"),await V2(t,new ng))),t._onlineComponents}function lJ(t){return dC(t).then((e=>e.syncEngine))}function uJ(t){return dC(t).then((e=>e.datastore))}async function cU(t){const e=await dC(t),n=e.eventManager;return n.onListen=VZ.bind(null,e.syncEngine),n.onUnlisten=FZ.bind(null,e.syncEngine),n.onFirstRemoteStoreListen=UZ.bind(null,e.syncEngine),n.onLastRemoteStoreUnlisten=BZ.bind(null,e.syncEngine),n}function cJ(t,e,n={}){const r=new qs;return t.asyncQueue.enqueueAndForget((async()=>(function(a,s,l,c,h){const p=new uU({next:x=>{p.Nu(),s.enqueueAndForget((()=>eU(a,g)));const b=x.docs.has(l);!b&&x.fromCache?h.reject(new Le(Ee.UNAVAILABLE,"Failed to get document because the client is offline.")):b&&x.fromCache&&c&&c.source==="server"?h.reject(new Le(Ee.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):h.resolve(x)},error:x=>h.reject(x)}),g=new tU(d_(l.path),p,{includeMetadataChanges:!0,qa:!0});return X6(a,g)})(await cU(t),t.asyncQueue,e,n,r))),r.promise}function dJ(t,e,n={}){const r=new qs;return t.asyncQueue.enqueueAndForget((async()=>(function(a,s,l,c,h){const p=new uU({next:x=>{p.Nu(),s.enqueueAndForget((()=>eU(a,g))),x.fromCache&&c.source==="server"?h.reject(new Le(Ee.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):h.resolve(x)},error:x=>h.reject(x)}),g=new tU(l,p,{includeMetadataChanges:!0,qa:!0});return X6(a,g)})(await cU(t),t.asyncQueue,e,n,r))),r.promise}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function dU(t){const e={};return t.timeoutSeconds!==void 0&&(e.timeoutSeconds=t.timeoutSeconds),e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const U2=new Map;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const fJ="firestore.googleapis.com",F2=!0;class B2{constructor(e){if(e.host===void 0){if(e.ssl!==void 0)throw new Le(Ee.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=fJ,this.ssl=F2}else this.host=e.host,this.ssl=e.ssl??F2;if(this.isUsingEmulator=e.emulatorOptions!==void 0,this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=T6;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<I6)throw new Le(Ee.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}uW("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=dU(e.experimentalLongPollingOptions??{}),(function(r){if(r.timeoutSeconds!==void 0){if(isNaN(r.timeoutSeconds))throw new Le(Ee.INVALID_ARGUMENT,`invalid long polling timeout: ${r.timeoutSeconds} (must not be NaN)`);if(r.timeoutSeconds<5)throw new Le(Ee.INVALID_ARGUMENT,`invalid long polling timeout: ${r.timeoutSeconds} (minimum allowed value is 5)`);if(r.timeoutSeconds>30)throw new Le(Ee.INVALID_ARGUMENT,`invalid long polling timeout: ${r.timeoutSeconds} (maximum allowed value is 30)`)}})(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&(function(r,i){return r.timeoutSeconds===i.timeoutSeconds})(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class fC{constructor(e,n,r,i){this._authCredentials=e,this._appCheckCredentials=n,this._databaseId=r,this._app=i,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new B2({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new Le(Ee.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new Le(Ee.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new B2(e),this._emulatorOptions=e.emulatorOptions||{},e.credentials!==void 0&&(this._authCredentials=(function(r){if(!r)return new eW;switch(r.type){case"firstParty":return new rW(r.sessionIndex||"0",r.iamToken||null,r.authTokenFactory||null);case"provider":return r.client;default:throw new Le(Ee.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}})(e.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return(function(n){const r=U2.get(n);r&&(ke("ComponentProvider","Removing Datastore"),U2.delete(n),r.terminate())})(this),Promise.resolve()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nm{constructor(e,n,r){this.converter=n,this._query=r,this.type="query",this.firestore=e}withConverter(e){return new nm(this.firestore,e,this._query)}}class er{constructor(e,n,r){this.converter=n,this._key=r,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new Qu(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new er(this.firestore,e,this._key)}toJSON(){return{type:er._jsonSchemaVersion,referencePath:this._key.toString()}}static fromJSON(e,n,r){if(Ag(n,er._jsonSchema))return new er(e,r||null,new Be(Ut.fromString(n.referencePath)))}}er._jsonSchemaVersion="firestore/documentReference/1.0",er._jsonSchema={type:br("string",er._jsonSchemaVersion),referencePath:br("string")};class Qu extends nm{constructor(e,n,r){super(e,n,d_(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new er(this.firestore,null,new Be(e))}withConverter(e){return new Qu(this.firestore,e,this._path)}}function Ci(t,e,...n){if(t=xn(t),oV("collection","path",e),t instanceof fC){const r=Ut.fromString(e,...n);return Dk(r),new Qu(t,null,r)}{if(!(t instanceof er||t instanceof Qu))throw new Le(Ee.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=t._path.child(Ut.fromString(e,...n));return Dk(r),new Qu(t.firestore,null,r)}}function Gt(t,e,...n){if(t=xn(t),arguments.length===1&&(e=AA.newId()),oV("doc","path",e),t instanceof fC){const r=Ut.fromString(e,...n);return Pk(r),new er(t,null,new Be(r))}{if(!(t instanceof er||t instanceof Qu))throw new Le(Ee.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=t._path.child(Ut.fromString(e,...n));return Pk(r),new er(t.firestore,t instanceof Qu?t.converter:null,new Be(r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const z2="AsyncQueue";class q2{constructor(e=Promise.resolve()){this.Xu=[],this.ec=!1,this.tc=[],this.nc=null,this.rc=!1,this.sc=!1,this.oc=[],this.M_=new XA(this,"async_queue_retry"),this._c=()=>{const r=i0();r&&ke(z2,"Visibility state changed to "+r.visibilityState),this.M_.w_()},this.ac=e;const n=i0();n&&typeof n.addEventListener=="function"&&n.addEventListener("visibilitychange",this._c)}get isShuttingDown(){return this.ec}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.uc(),this.cc(e)}enterRestrictedMode(e){if(!this.ec){this.ec=!0,this.sc=e||!1;const n=i0();n&&typeof n.removeEventListener=="function"&&n.removeEventListener("visibilitychange",this._c)}}enqueue(e){if(this.uc(),this.ec)return new Promise((()=>{}));const n=new qs;return this.cc((()=>this.ec&&this.sc?Promise.resolve():(e().then(n.resolve,n.reject),n.promise))).then((()=>n.promise))}enqueueRetryable(e){this.enqueueAndForget((()=>(this.Xu.push(e),this.lc())))}async lc(){if(this.Xu.length!==0){try{await this.Xu[0](),this.Xu.shift(),this.M_.reset()}catch(e){if(!gc(e))throw e;ke(z2,"Operation failed with retryable error: "+e)}this.Xu.length>0&&this.M_.p_((()=>this.lc()))}}cc(e){const n=this.ac.then((()=>(this.rc=!0,e().catch((r=>{throw this.nc=r,this.rc=!1,or("INTERNAL UNHANDLED ERROR: ",H2(r)),r})).then((r=>(this.rc=!1,r))))));return this.ac=n,n}enqueueAfterDelay(e,n,r){this.uc(),this.oc.indexOf(e)>-1&&(n=0);const i=rC.createAndSchedule(this,e,n,r,(a=>this.hc(a)));return this.tc.push(i),i}uc(){this.nc&&Ge(47125,{Pc:H2(this.nc)})}verifyOperationInProgress(){}async Tc(){let e;do e=this.ac,await e;while(e!==this.ac)}Ic(e){for(const n of this.tc)if(n.timerId===e)return!0;return!1}Ec(e){return this.Tc().then((()=>{this.tc.sort(((n,r)=>n.targetTimeMs-r.targetTimeMs));for(const n of this.tc)if(n.skipDelay(),e!=="all"&&n.timerId===e)break;return this.Tc()}))}dc(e){this.oc.push(e)}hc(e){const n=this.tc.indexOf(e);this.tc.splice(n,1)}}function H2(t){let e=t.message||"";return t.stack&&(e=t.stack.includes(t.message)?t.stack:t.message+`
`+t.stack),e}class ql extends fC{constructor(e,n,r,i){super(e,n,r,i),this.type="firestore",this._queue=new q2,this._persistenceKey=(i==null?void 0:i.name)||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new q2(e),this._firestoreClient=void 0,await e}}}function hJ(t,e,n){n||(n=T0);const r=e_(t,"firestore");if(r.isInitialized(n)){const i=r.getImmediate({identifier:n}),a=r.getOptions(n);if(Ad(a,e))return i;throw new Le(Ee.FAILED_PRECONDITION,"initializeFirestore() has already been called with different options. To avoid this error, call initializeFirestore() with the same options as when it was originally called, or call getFirestore() to return the already initialized instance.")}if(e.cacheSizeBytes!==void 0&&e.localCache!==void 0)throw new Le(Ee.INVALID_ARGUMENT,"cache and cacheSizeBytes cannot be specified at the same time as cacheSizeBytes willbe deprecated. Instead, specify the cache size in the cache object");if(e.cacheSizeBytes!==void 0&&e.cacheSizeBytes!==-1&&e.cacheSizeBytes<I6)throw new Le(Ee.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");return e.host&&hc(e.host)&&hA(e.host),r.initialize({options:e,instanceIdentifier:n})}function Og(t){if(t._terminated)throw new Le(Ee.FAILED_PRECONDITION,"The client has already been terminated.");return t._firestoreClient||mJ(t),t._firestoreClient}function mJ(t){var r,i,a;const e=t._freezeSettings(),n=(function(l,c,h,p){return new BW(l,c,h,p.host,p.ssl,p.experimentalForceLongPolling,p.experimentalAutoDetectLongPolling,dU(p.experimentalLongPollingOptions),p.useFetchStreams,p.isUsingEmulator)})(t._databaseId,((r=t._app)==null?void 0:r.options.appId)||"",t._persistenceKey,e);t._componentsProvider||(i=e.localCache)!=null&&i._offlineComponentProvider&&((a=e.localCache)!=null&&a._onlineComponentProvider)&&(t._componentsProvider={_offline:e.localCache._offlineComponentProvider,_online:e.localCache._onlineComponentProvider}),t._firestoreClient=new sJ(t._authCredentials,t._appCheckCredentials,t._queue,n,t._componentsProvider&&(function(l){const c=l==null?void 0:l._online.build();return{_offline:l==null?void 0:l._offline.build(c),_online:c}})(t._componentsProvider))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Oa{constructor(e){this._byteString=e}static fromBase64String(e){try{return new Oa(cr.fromBase64String(e))}catch(n){throw new Le(Ee.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+n)}}static fromUint8Array(e){return new Oa(cr.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}toJSON(){return{type:Oa._jsonSchemaVersion,bytes:this.toBase64()}}static fromJSON(e){if(Ag(e,Oa._jsonSchema))return Oa.fromBase64String(e.bytes)}}Oa._jsonSchemaVersion="firestore/bytes/1.0",Oa._jsonSchema={type:br("string",Oa._jsonSchemaVersion),bytes:br("string")};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rm{constructor(...e){for(let n=0;n<e.length;++n)if(e[n].length===0)throw new Le(Ee.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new Hn(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class w_{constructor(e){this._methodName=e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Po{constructor(e,n){if(!isFinite(e)||e<-90||e>90)throw new Le(Ee.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(n)||n<-180||n>180)throw new Le(Ee.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+n);this._lat=e,this._long=n}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}_compareTo(e){return ft(this._lat,e._lat)||ft(this._long,e._long)}toJSON(){return{latitude:this._lat,longitude:this._long,type:Po._jsonSchemaVersion}}static fromJSON(e){if(Ag(e,Po._jsonSchema))return new Po(e.latitude,e.longitude)}}Po._jsonSchemaVersion="firestore/geoPoint/1.0",Po._jsonSchema={type:br("string",Po._jsonSchemaVersion),latitude:br("number"),longitude:br("number")};/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Do{constructor(e){this._values=(e||[]).map((n=>n))}toArray(){return this._values.map((e=>e))}isEqual(e){return(function(r,i){if(r.length!==i.length)return!1;for(let a=0;a<r.length;++a)if(r[a]!==i[a])return!1;return!0})(this._values,e._values)}toJSON(){return{type:Do._jsonSchemaVersion,vectorValues:this._values}}static fromJSON(e){if(Ag(e,Do._jsonSchema)){if(Array.isArray(e.vectorValues)&&e.vectorValues.every((n=>typeof n=="number")))return new Do(e.vectorValues);throw new Le(Ee.INVALID_ARGUMENT,"Expected 'vectorValues' field to be a number array")}}}Do._jsonSchemaVersion="firestore/vectorValue/1.0",Do._jsonSchema={type:br("string",Do._jsonSchemaVersion),vectorValues:br("object")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const pJ=/^__.*__$/;class gJ{constructor(e,n,r){this.data=e,this.fieldMask=n,this.fieldTransforms=r}toMutation(e,n){return this.fieldMask!==null?new zl(e,this.data,this.fieldMask,n,this.fieldTransforms):new Jh(e,this.data,n,this.fieldTransforms)}}class fU{constructor(e,n,r){this.data=e,this.fieldMask=n,this.fieldTransforms=r}toMutation(e,n){return new zl(e,this.data,this.fieldMask,n,this.fieldTransforms)}}function hU(t){switch(t){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw Ge(40011,{Ac:t})}}class hC{constructor(e,n,r,i,a,s){this.settings=e,this.databaseId=n,this.serializer=r,this.ignoreUndefinedProperties=i,a===void 0&&this.Rc(),this.fieldTransforms=a||[],this.fieldMask=s||[]}get path(){return this.settings.path}get Ac(){return this.settings.Ac}Vc(e){return new hC({...this.settings,...e},this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}mc(e){var i;const n=(i=this.path)==null?void 0:i.child(e),r=this.Vc({path:n,fc:!1});return r.gc(e),r}yc(e){var i;const n=(i=this.path)==null?void 0:i.child(e),r=this.Vc({path:n,fc:!1});return r.Rc(),r}wc(e){return this.Vc({path:void 0,fc:!0})}Sc(e){return j0(e,this.settings.methodName,this.settings.bc||!1,this.path,this.settings.Dc)}contains(e){return this.fieldMask.find((n=>e.isPrefixOf(n)))!==void 0||this.fieldTransforms.find((n=>e.isPrefixOf(n.field)))!==void 0}Rc(){if(this.path)for(let e=0;e<this.path.length;e++)this.gc(this.path.get(e))}gc(e){if(e.length===0)throw this.Sc("Document fields must not be empty");if(hU(this.Ac)&&pJ.test(e))throw this.Sc('Document fields cannot begin and end with "__"')}}class yJ{constructor(e,n,r){this.databaseId=e,this.ignoreUndefinedProperties=n,this.serializer=r||v_(e)}Cc(e,n,r,i=!1){return new hC({Ac:e,methodName:n,Dc:r,path:Hn.emptyPath(),fc:!1,bc:i},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function im(t){const e=t._freezeSettings(),n=v_(t._databaseId);return new yJ(t._databaseId,!!e.ignoreUndefinedProperties,n)}function E_(t,e,n,r,i,a={}){const s=t.Cc(a.merge||a.mergeFields?2:0,e,n,i);yC("Data must be an object, but it was:",s,r);const l=mU(r,s);let c,h;if(a.merge)c=new da(s.fieldMask),h=s.fieldTransforms;else if(a.mergeFields){const p=[];for(const g of a.mergeFields){const x=QS(e,g,n);if(!s.contains(x))throw new Le(Ee.INVALID_ARGUMENT,`Field '${x}' is specified in your field mask but missing from your input data.`);gU(p,x)||p.push(x)}c=new da(p),h=s.fieldTransforms.filter((g=>c.covers(g.field)))}else c=null,h=s.fieldTransforms;return new gJ(new ni(l),c,h)}class T_ extends w_{_toFieldTransform(e){if(e.Ac!==2)throw e.Ac===1?e.Sc(`${this._methodName}() can only appear at the top level of your update data`):e.Sc(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof T_}}class mC extends w_{_toFieldTransform(e){return new t6(e.path,new Ih)}isEqual(e){return e instanceof mC}}function pC(t,e,n,r){const i=t.Cc(1,e,n);yC("Data must be an object, but it was:",i,r);const a=[],s=ni.empty();yc(r,((c,h)=>{const p=vC(e,c,n);h=xn(h);const g=i.yc(p);if(h instanceof T_)a.push(p);else{const x=jg(h,g);x!=null&&(a.push(p),s.set(p,x))}}));const l=new da(a);return new fU(s,l,i.fieldTransforms)}function gC(t,e,n,r,i,a){const s=t.Cc(1,e,n),l=[QS(e,r,n)],c=[i];if(a.length%2!=0)throw new Le(Ee.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let x=0;x<a.length;x+=2)l.push(QS(e,a[x])),c.push(a[x+1]);const h=[],p=ni.empty();for(let x=l.length-1;x>=0;--x)if(!gU(h,l[x])){const b=l[x];let C=c[x];C=xn(C);const A=s.yc(b);if(C instanceof T_)h.push(b);else{const D=jg(C,A);D!=null&&(h.push(b),p.set(b,D))}}const g=new da(h);return new fU(p,g,s.fieldTransforms)}function vJ(t,e,n,r=!1){return jg(n,t.Cc(r?4:3,e))}function jg(t,e){if(pU(t=xn(t)))return yC("Unsupported field value:",e,t),mU(t,e);if(t instanceof w_)return(function(r,i){if(!hU(i.Ac))throw i.Sc(`${r._methodName}() can only be used with update() and set()`);if(!i.path)throw i.Sc(`${r._methodName}() is not currently supported inside arrays`);const a=r._toFieldTransform(i);a&&i.fieldTransforms.push(a)})(t,e),null;if(t===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),t instanceof Array){if(e.settings.fc&&e.Ac!==4)throw e.Sc("Nested arrays are not supported");return(function(r,i){const a=[];let s=0;for(const l of r){let c=jg(l,i.wc(s));c==null&&(c={nullValue:"NULL_VALUE"}),a.push(c),s++}return{arrayValue:{values:a}}})(t,e)}return(function(r,i){if((r=xn(r))===null)return{nullValue:"NULL_VALUE"};if(typeof r=="number")return iY(i.serializer,r);if(typeof r=="boolean")return{booleanValue:r};if(typeof r=="string")return{stringValue:r};if(r instanceof Date){const a=ze.fromDate(r);return{timestampValue:Dh(i.serializer,a)}}if(r instanceof ze){const a=new ze(r.seconds,1e3*Math.floor(r.nanoseconds/1e3));return{timestampValue:Dh(i.serializer,a)}}if(r instanceof Po)return{geoPointValue:{latitude:r.latitude,longitude:r.longitude}};if(r instanceof Oa)return{bytesValue:l6(i.serializer,r._byteString)};if(r instanceof er){const a=i.databaseId,s=r.firestore._databaseId;if(!s.isEqual(a))throw i.Sc(`Document reference is for database ${s.projectId}/${s.database} but should be for database ${a.projectId}/${a.database}`);return{referenceValue:HA(r.firestore._databaseId||i.databaseId,r._key.path)}}if(r instanceof Do)return(function(s,l){return{mapValue:{fields:{[MA]:{stringValue:OA},[Th]:{arrayValue:{values:s.toArray().map((h=>{if(typeof h!="number")throw l.Sc("VectorValues must only contain numeric values.");return VA(l.serializer,h)}))}}}}}})(r,i);throw i.Sc(`Unsupported field value: ${i_(r)}`)})(t,e)}function mU(t,e){const n={};return SV(t)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):yc(t,((r,i)=>{const a=jg(i,e.mc(r));a!=null&&(n[r]=a)})),{mapValue:{fields:n}}}function pU(t){return!(typeof t!="object"||t===null||t instanceof Array||t instanceof Date||t instanceof ze||t instanceof Po||t instanceof Oa||t instanceof er||t instanceof w_||t instanceof Do)}function yC(t,e,n){if(!pU(n)||!lV(n)){const r=i_(n);throw r==="an object"?e.Sc(t+" a custom object"):e.Sc(t+" "+r)}}function QS(t,e,n){if((e=xn(e))instanceof rm)return e._internalPath;if(typeof e=="string")return vC(t,e);throw j0("Field path arguments must be of type string or ",t,!1,void 0,n)}const xJ=new RegExp("[~\\*/\\[\\]]");function vC(t,e,n){if(e.search(xJ)>=0)throw j0(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,t,!1,void 0,n);try{return new rm(...e.split("."))._internalPath}catch{throw j0(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,t,!1,void 0,n)}}function j0(t,e,n,r,i){const a=r&&!r.isEmpty(),s=i!==void 0;let l=`Function ${e}() called with invalid data`;n&&(l+=" (via `toFirestore()`)"),l+=". ";let c="";return(a||s)&&(c+=" (found",a&&(c+=` in field ${r}`),s&&(c+=` in document ${i}`),c+=")"),new Le(Ee.INVALID_ARGUMENT,l+t+c)}function gU(t,e){return t.some((n=>n.isEqual(e)))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class L0{constructor(e,n,r,i,a){this._firestore=e,this._userDataWriter=n,this._key=r,this._document=i,this._converter=a}get id(){return this._key.path.lastSegment()}get ref(){return new er(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new _J(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const n=this._document.data.field(xC("DocumentSnapshot.get",e));if(n!==null)return this._userDataWriter.convertValue(n)}}}class _J extends L0{data(){return super.data()}}function xC(t,e){return typeof e=="string"?vC(t,e):e instanceof rm?e._internalPath:e._delegate._internalPath}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function bJ(t){if(t.limitType==="L"&&t.explicitOrderBy.length===0)throw new Le(Ee.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class _C{}class wJ extends _C{}function ri(t,e,...n){let r=[];e instanceof _C&&r.push(e),r=r.concat(n),(function(a){const s=a.filter((c=>c instanceof bC)).length,l=a.filter((c=>c instanceof S_)).length;if(s>1||s>0&&l>0)throw new Le(Ee.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")})(r);for(const i of r)t=i._apply(t);return t}class S_ extends wJ{constructor(e,n,r){super(),this._field=e,this._op=n,this._value=r,this.type="where"}static _create(e,n,r){return new S_(e,n,r)}_apply(e){const n=this._parse(e);return yU(e._query,n),new nm(e.firestore,e.converter,LS(e._query,n))}_parse(e){const n=im(e.firestore);return(function(a,s,l,c,h,p,g){let x;if(h.isKeyField()){if(p==="array-contains"||p==="array-contains-any")throw new Le(Ee.INVALID_ARGUMENT,`Invalid Query. You can't perform '${p}' queries on documentId().`);if(p==="in"||p==="not-in"){$2(g,p);const C=[];for(const A of g)C.push(G2(c,a,A));x={arrayValue:{values:C}}}else x=G2(c,a,g)}else p!=="in"&&p!=="not-in"&&p!=="array-contains-any"||$2(g,p),x=vJ(l,s,g,p==="in"||p==="not-in");return kt.create(h,p,x)})(e._query,"where",n,e.firestore._databaseId,this._field,this._op,this._value)}}function Yr(t,e,n){const r=e,i=xC("where",t);return S_._create(i,r,n)}class bC extends _C{constructor(e,n){super(),this.type=e,this._queryConstraints=n}static _create(e,n){return new bC(e,n)}_parse(e){const n=this._queryConstraints.map((r=>r._parse(e))).filter((r=>r.getFilters().length>0));return n.length===1?n[0]:rn.create(n,this._getOperator())}_apply(e){const n=this._parse(e);return n.getFilters().length===0?e:((function(i,a){let s=i;const l=a.getFlattenedFilters();for(const c of l)yU(s,c),s=LS(s,c)})(e._query,n),new nm(e.firestore,e.converter,LS(e._query,n)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}}function G2(t,e,n){if(typeof(n=xn(n))=="string"){if(n==="")throw new Le(Ee.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!qV(e)&&n.indexOf("/")!==-1)throw new Le(Ee.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${n}' contains a '/' character.`);const r=e.path.child(Ut.fromString(n));if(!Be.isDocumentKey(r))throw new Le(Ee.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${r}' is not because it has an odd number of segments (${r.length}).`);return Zp(t,new Be(r))}if(n instanceof er)return Zp(t,n._key);throw new Le(Ee.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${i_(n)}.`)}function $2(t,e){if(!Array.isArray(t)||t.length===0)throw new Le(Ee.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function yU(t,e){const n=(function(i,a){for(const s of i)for(const l of s.getFlattenedFilters())if(a.indexOf(l.op)>=0)return l.op;return null})(t.filters,(function(i){switch(i){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}})(e.op));if(n!==null)throw n===e.op?new Le(Ee.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`):new Le(Ee.INVALID_ARGUMENT,`Invalid query. You cannot use '${e.op.toString()}' filters with '${n.toString()}' filters.`)}class vU{convertValue(e,n="none"){switch(nc(e)){case 0:return null;case 1:return e.booleanValue;case 2:return On(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,n);case 5:return e.stringValue;case 6:return this.convertBytes(Dl(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,n);case 11:return this.convertObject(e.mapValue,n);case 10:return this.convertVectorValue(e.mapValue);default:throw Ge(62114,{value:e})}}convertObject(e,n){return this.convertObjectMap(e.fields,n)}convertObjectMap(e,n="none"){const r={};return yc(e,((i,a)=>{r[i]=this.convertValue(a,n)})),r}convertVectorValue(e){var r,i,a;const n=(a=(i=(r=e.fields)==null?void 0:r[Th].arrayValue)==null?void 0:i.values)==null?void 0:a.map((s=>On(s.doubleValue)));return new Do(n)}convertGeoPoint(e){return new Po(On(e.latitude),On(e.longitude))}convertArray(e,n){return(e.values||[]).map((r=>this.convertValue(r,n)))}convertServerTimestamp(e,n){switch(n){case"previous":const r=u_(e);return r==null?null:this.convertValue(r,n);case"estimate":return this.convertTimestamp(Wp(e));default:return null}}convertTimestamp(e){const n=Pl(e);return new ze(n.seconds,n.nanos)}convertDocumentKey(e,n){const r=Ut.fromString(e);Qe(v6(r),9688,{name:e});const i=new Dd(r.get(1),r.get(3)),a=new Be(r.popFirst(5));return i.isEqual(n)||or(`Document ${a} contains a document reference within a different database (${i.projectId}/${i.database}) which is not supported. It will be treated as a reference in the current database (${n.projectId}/${n.database}) instead.`),a}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function A_(t,e,n){let r;return r=t?n&&(n.merge||n.mergeFields)?t.toFirestore(e,n):t.toFirestore(e):e,r}class EJ extends vU{constructor(e){super(),this.firestore=e}convertBytes(e){return new Oa(e)}convertReference(e){const n=this.convertDocumentKey(e,this.firestore._databaseId);return new er(this.firestore,null,n)}}class Zf{constructor(e,n){this.hasPendingWrites=e,this.fromCache=n}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class Xu extends L0{constructor(e,n,r,i,a,s){super(e,n,r,i,s),this._firestore=e,this._firestoreImpl=e,this.metadata=a}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const n=new a0(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(n,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,n={}){if(this._document){const r=this._document.data.field(xC("DocumentSnapshot.get",e));if(r!==null)return this._userDataWriter.convertValue(r,n.serverTimestamps)}}toJSON(){if(this.metadata.hasPendingWrites)throw new Le(Ee.FAILED_PRECONDITION,"DocumentSnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e=this._document,n={};return n.type=Xu._jsonSchemaVersion,n.bundle="",n.bundleSource="DocumentSnapshot",n.bundleName=this._key.toString(),!e||!e.isValidDocument()||!e.isFoundDocument()?n:(this._userDataWriter.convertObjectMap(e.data.value.mapValue.fields,"previous"),n.bundle=(this._firestore,this.ref.path,"NOT SUPPORTED"),n)}}Xu._jsonSchemaVersion="firestore/documentSnapshot/1.0",Xu._jsonSchema={type:br("string",Xu._jsonSchemaVersion),bundleSource:br("string","DocumentSnapshot"),bundleName:br("string"),bundle:br("string")};class a0 extends Xu{data(e={}){return super.data(e)}}class ah{constructor(e,n,r,i){this._firestore=e,this._userDataWriter=n,this._snapshot=i,this.metadata=new Zf(i.hasPendingWrites,i.fromCache),this.query=r}get docs(){const e=[];return this.forEach((n=>e.push(n))),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,n){this._snapshot.docs.forEach((r=>{e.call(n,new a0(this._firestore,this._userDataWriter,r.key,r,new Zf(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))}))}docChanges(e={}){const n=!!e.includeMetadataChanges;if(n&&this._snapshot.excludesMetadataChanges)throw new Le(Ee.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===n||(this._cachedChanges=(function(i,a){if(i._snapshot.oldDocs.isEmpty()){let s=0;return i._snapshot.docChanges.map((l=>{const c=new a0(i._firestore,i._userDataWriter,l.doc.key,l.doc,new Zf(i._snapshot.mutatedKeys.has(l.doc.key),i._snapshot.fromCache),i.query.converter);return l.doc,{type:"added",doc:c,oldIndex:-1,newIndex:s++}}))}{let s=i._snapshot.oldDocs;return i._snapshot.docChanges.filter((l=>a||l.type!==3)).map((l=>{const c=new a0(i._firestore,i._userDataWriter,l.doc.key,l.doc,new Zf(i._snapshot.mutatedKeys.has(l.doc.key),i._snapshot.fromCache),i.query.converter);let h=-1,p=-1;return l.type!==0&&(h=s.indexOf(l.doc.key),s=s.delete(l.doc.key)),l.type!==1&&(s=s.add(l.doc),p=s.indexOf(l.doc.key)),{type:TJ(l.type),doc:c,oldIndex:h,newIndex:p}}))}})(this,n),this._cachedChangesIncludeMetadataChanges=n),this._cachedChanges}toJSON(){if(this.metadata.hasPendingWrites)throw new Le(Ee.FAILED_PRECONDITION,"QuerySnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e={};e.type=ah._jsonSchemaVersion,e.bundleSource="QuerySnapshot",e.bundleName=AA.newId(),this._firestore._databaseId.database,this._firestore._databaseId.projectId;const n=[],r=[],i=[];return this.docs.forEach((a=>{a._document!==null&&(n.push(a._document),r.push(this._userDataWriter.convertObjectMap(a._document.data.value.mapValue.fields,"previous")),i.push(a.ref.path))})),e.bundle=(this._firestore,this.query._query,e.bundleName,"NOT SUPPORTED"),e}}function TJ(t){switch(t){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return Ge(61501,{type:t})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function sc(t){t=ms(t,er);const e=ms(t.firestore,ql);return cJ(Og(e),t._key).then((n=>AJ(e,t,n)))}ah._jsonSchemaVersion="firestore/querySnapshot/1.0",ah._jsonSchema={type:br("string",ah._jsonSchemaVersion),bundleSource:br("string","QuerySnapshot"),bundleName:br("string"),bundle:br("string")};class wC extends vU{constructor(e){super(),this.firestore=e}convertBytes(e){return new Oa(e)}convertReference(e){const n=this.convertDocumentKey(e,this.firestore._databaseId);return new er(this.firestore,null,n)}}function ii(t){t=ms(t,nm);const e=ms(t.firestore,ql),n=Og(e),r=new wC(e);return bJ(t._query),dJ(n,t._query).then((i=>new ah(e,r,t,i)))}function SJ(t,e,n){t=ms(t,er);const r=ms(t.firestore,ql),i=A_(t.converter,e,n);return Lg(r,[E_(im(r),"setDoc",t._key,i,t.converter!==null,n).toMutation(t._key,Vn.none())])}function Ii(t,e,n,...r){t=ms(t,er);const i=ms(t.firestore,ql),a=im(i);let s;return s=typeof(e=xn(e))=="string"||e instanceof rm?gC(a,"updateDoc",t._key,e,n,r):pC(a,"updateDoc",t._key,e),Lg(i,[s.toMutation(t._key,Vn.exists(!0))])}function Fo(t){return Lg(ms(t.firestore,ql),[new Qh(t._key,Vn.none())])}function Bi(t,e){const n=ms(t.firestore,ql),r=Gt(t),i=A_(t.converter,e);return Lg(n,[E_(im(t.firestore),"addDoc",r._key,i,t.converter!==null,{}).toMutation(r._key,Vn.exists(!1))]).then((()=>r))}function Lg(t,e){return(function(r,i){const a=new qs;return r.asyncQueue.enqueueAndForget((async()=>zZ(await lJ(r),i,a))),a.promise})(Og(t),e)}function AJ(t,e,n){const r=n.docs.get(e._key),i=new wC(t);return new Xu(t,i,e._key,r,new Zf(n.hasPendingWrites,n.fromCache),e.converter)}class CJ{constructor(e){let n;this.kind="persistent",e!=null&&e.tabManager?(e.tabManager._initialize(e),n=e.tabManager):(n=DJ(void 0),n._initialize(e)),this._onlineComponentProvider=n._onlineComponentProvider,this._offlineComponentProvider=n._offlineComponentProvider}toJSON(){return{kind:this.kind}}}function IJ(t){return new CJ(t)}class NJ{constructor(e){this.forceOwnership=e,this.kind="persistentSingleTab"}toJSON(){return{kind:this.kind}}_initialize(e){this._onlineComponentProvider=ng.provider,this._offlineComponentProvider={build:n=>new lU(n,e==null?void 0:e.cacheSizeBytes,this.forceOwnership)}}}class PJ{constructor(){this.kind="PersistentMultipleTab"}toJSON(){return{kind:this.kind}}_initialize(e){this._onlineComponentProvider=ng.provider,this._offlineComponentProvider={build:n=>new rJ(n,e==null?void 0:e.cacheSizeBytes)}}}function DJ(t){return new NJ(t==null?void 0:t.forceOwnership)}function RJ(){return new PJ}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const kJ={maxAttempts:5};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class MJ{constructor(e,n){this._firestore=e,this._commitHandler=n,this._mutations=[],this._committed=!1,this._dataReader=im(e)}set(e,n,r){this._verifyNotCommitted();const i=$u(e,this._firestore),a=A_(i.converter,n,r),s=E_(this._dataReader,"WriteBatch.set",i._key,a,i.converter!==null,r);return this._mutations.push(s.toMutation(i._key,Vn.none())),this}update(e,n,r,...i){this._verifyNotCommitted();const a=$u(e,this._firestore);let s;return s=typeof(n=xn(n))=="string"||n instanceof rm?gC(this._dataReader,"WriteBatch.update",a._key,n,r,i):pC(this._dataReader,"WriteBatch.update",a._key,n),this._mutations.push(s.toMutation(a._key,Vn.exists(!0))),this}delete(e){this._verifyNotCommitted();const n=$u(e,this._firestore);return this._mutations=this._mutations.concat(new Qh(n._key,Vn.none())),this}commit(){return this._verifyNotCommitted(),this._committed=!0,this._mutations.length>0?this._commitHandler(this._mutations):Promise.resolve()}_verifyNotCommitted(){if(this._committed)throw new Le(Ee.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")}}function $u(t,e){if((t=xn(t)).firestore!==e)throw new Le(Ee.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return t}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class OJ{constructor(e,n){this._firestore=e,this._transaction=n,this._dataReader=im(e)}get(e){const n=$u(e,this._firestore),r=new EJ(this._firestore);return this._transaction.lookup([n._key]).then((i=>{if(!i||i.length!==1)return Ge(24041);const a=i[0];if(a.isFoundDocument())return new L0(this._firestore,r,a.key,a,n.converter);if(a.isNoDocument())return new L0(this._firestore,r,n._key,null,n.converter);throw Ge(18433,{doc:a})}))}set(e,n,r){const i=$u(e,this._firestore),a=A_(i.converter,n,r),s=E_(this._dataReader,"Transaction.set",i._key,a,i.converter!==null,r);return this._transaction.set(i._key,s),this}update(e,n,r,...i){const a=$u(e,this._firestore);let s;return s=typeof(n=xn(n))=="string"||n instanceof rm?gC(this._dataReader,"Transaction.update",a._key,n,r,i):pC(this._dataReader,"Transaction.update",a._key,n),this._transaction.update(a._key,s),this}delete(e){const n=$u(e,this._firestore);return this._transaction.delete(n._key),this}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jJ extends OJ{constructor(e,n){super(e,n),this._firestore=e}get(e){const n=$u(e,this._firestore),r=new wC(this._firestore);return super.get(e).then((i=>new Xu(this._firestore,r,n._key,i._document,new Zf(!1,!1),n.converter)))}}function LJ(t,e,n){t=ms(t,ql);const r={...kJ,...n};return(function(a){if(a.maxAttempts<1)throw new Le(Ee.INVALID_ARGUMENT,"Max attempts must be at least 1")})(r),(function(a,s,l){const c=new qs;return a.asyncQueue.enqueueAndForget((async()=>{const h=await uJ(a);new aJ(a.asyncQueue,h,l,s,c).ju()})),c.promise})(Og(t),(i=>e(new jJ(t,i))),r)}function Vg(){return new mC("serverTimestamp")}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function VJ(t){return Og(t=ms(t,ql)),new MJ(t,(e=>Lg(t,e)))}(function(e,n=!0){(function(i){Zh=i})(Wh),Cd(new tc("firestore",((r,{instanceIdentifier:i,options:a})=>{const s=r.getProvider("app").getImmediate(),l=new ql(new tW(r.getProvider("auth-internal")),new iW(s,r.getProvider("app-check-internal")),(function(h,p){if(!Object.prototype.hasOwnProperty.apply(h.options,["projectId"]))throw new Le(Ee.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new Dd(h.options.projectId,p)})(s,i),s);return a={useFetchStreams:n,...a},l._setSettings(a),l}),"PUBLIC").setMultipleInstances(!0)),Co(Ak,Ck,e),Co(Ak,Ck,"esm2020")})();var UJ="firebase",FJ="12.6.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Co(UJ,FJ,"app");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const BJ="type.googleapis.com/google.protobuf.Int64Value",zJ="type.googleapis.com/google.protobuf.UInt64Value";function xU(t,e){const n={};for(const r in t)t.hasOwnProperty(r)&&(n[r]=e(t[r]));return n}function V0(t){if(t==null)return null;if(t instanceof Number&&(t=t.valueOf()),typeof t=="number"&&isFinite(t)||t===!0||t===!1||Object.prototype.toString.call(t)==="[object String]")return t;if(t instanceof Date)return t.toISOString();if(Array.isArray(t))return t.map(e=>V0(e));if(typeof t=="function"||typeof t=="object")return xU(t,e=>V0(e));throw new Error("Data cannot be encoded in JSON: "+t)}function jh(t){if(t==null)return t;if(t["@type"])switch(t["@type"]){case BJ:case zJ:{const e=Number(t.value);if(isNaN(e))throw new Error("Data cannot be decoded from JSON: "+t);return e}default:throw new Error("Data cannot be decoded from JSON: "+t)}return Array.isArray(t)?t.map(e=>jh(e)):typeof t=="function"||typeof t=="object"?xU(t,e=>jh(e)):t}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const EC="functions";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const K2={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class fa extends Uo{constructor(e,n,r){super(`${EC}/${e}`,n||""),this.details=r,Object.setPrototypeOf(this,fa.prototype)}}function qJ(t){if(t>=200&&t<300)return"ok";switch(t){case 0:return"internal";case 400:return"invalid-argument";case 401:return"unauthenticated";case 403:return"permission-denied";case 404:return"not-found";case 409:return"aborted";case 429:return"resource-exhausted";case 499:return"cancelled";case 500:return"internal";case 501:return"unimplemented";case 503:return"unavailable";case 504:return"deadline-exceeded"}return"unknown"}function U0(t,e){let n=qJ(t),r=n,i;try{const a=e&&e.error;if(a){const s=a.status;if(typeof s=="string"){if(!K2[s])return new fa("internal","internal");n=K2[s],r=s}const l=a.message;typeof l=="string"&&(r=l),i=a.details,i!==void 0&&(i=jh(i))}}catch{}return n==="ok"?null:new fa(n,r,i)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class HJ{constructor(e,n,r,i){this.app=e,this.auth=null,this.messaging=null,this.appCheck=null,this.serverAppAppCheckToken=null,Ma(e)&&e.settings.appCheckToken&&(this.serverAppAppCheckToken=e.settings.appCheckToken),this.auth=n.getImmediate({optional:!0}),this.messaging=r.getImmediate({optional:!0}),this.auth||n.get().then(a=>this.auth=a,()=>{}),this.messaging||r.get().then(a=>this.messaging=a,()=>{}),this.appCheck||i==null||i.get().then(a=>this.appCheck=a,()=>{})}async getAuthToken(){if(this.auth)try{const e=await this.auth.getToken();return e==null?void 0:e.accessToken}catch{return}}async getMessagingToken(){if(!(!this.messaging||!("Notification"in self)||Notification.permission!=="granted"))try{return await this.messaging.getToken()}catch{return}}async getAppCheckToken(e){if(this.serverAppAppCheckToken)return this.serverAppAppCheckToken;if(this.appCheck){const n=e?await this.appCheck.getLimitedUseToken():await this.appCheck.getToken();return n.error?null:n.token}return null}async getContext(e){const n=await this.getAuthToken(),r=await this.getMessagingToken(),i=await this.getAppCheckToken(e);return{authToken:n,messagingToken:r,appCheckToken:i}}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const XS="us-central1",GJ=/^data: (.*?)(?:\n|$)/;function $J(t){let e=null;return{promise:new Promise((n,r)=>{e=setTimeout(()=>{r(new fa("deadline-exceeded","deadline-exceeded"))},t)}),cancel:()=>{e&&clearTimeout(e)}}}class KJ{constructor(e,n,r,i,a=XS,s=(...l)=>fetch(...l)){this.app=e,this.fetchImpl=s,this.emulatorOrigin=null,this.contextProvider=new HJ(e,n,r,i),this.cancelAllRequests=new Promise(l=>{this.deleteService=()=>Promise.resolve(l())});try{const l=new URL(a);this.customDomain=l.origin+(l.pathname==="/"?"":l.pathname),this.region=XS}catch{this.customDomain=null,this.region=a}}_delete(){return this.deleteService()}_url(e){const n=this.app.options.projectId;return this.emulatorOrigin!==null?`${this.emulatorOrigin}/${n}/${this.region}/${e}`:this.customDomain!==null?`${this.customDomain}/${e}`:`https://${this.region}-${n}.cloudfunctions.net/${e}`}}function WJ(t,e,n){const r=hc(e);t.emulatorOrigin=`http${r?"s":""}://${e}:${n}`,r&&(hA(t.emulatorOrigin+"/backends"),o3("Functions",!0))}function YJ(t,e,n){const r=i=>JJ(t,e,i,{});return r.stream=(i,a)=>XJ(t,e,i,a),r}function _U(t){return t.emulatorOrigin&&hc(t.emulatorOrigin)?"include":void 0}async function ZJ(t,e,n,r,i){n["Content-Type"]="application/json";let a;try{a=await r(t,{method:"POST",body:JSON.stringify(e),headers:n,credentials:_U(i)})}catch{return{status:0,json:null}}let s=null;try{s=await a.json()}catch{}return{status:a.status,json:s}}async function bU(t,e){const n={},r=await t.contextProvider.getContext(e.limitedUseAppCheckTokens);return r.authToken&&(n.Authorization="Bearer "+r.authToken),r.messagingToken&&(n["Firebase-Instance-ID-Token"]=r.messagingToken),r.appCheckToken!==null&&(n["X-Firebase-AppCheck"]=r.appCheckToken),n}function JJ(t,e,n,r){const i=t._url(e);return QJ(t,i,n,r)}async function QJ(t,e,n,r){n=V0(n);const i={data:n},a=await bU(t,r),s=r.timeout||7e4,l=$J(s),c=await Promise.race([ZJ(e,i,a,t.fetchImpl,t),l.promise,t.cancelAllRequests]);if(l.cancel(),!c)throw new fa("cancelled","Firebase Functions instance was deleted.");const h=U0(c.status,c.json);if(h)throw h;if(!c.json)throw new fa("internal","Response is not valid JSON object.");let p=c.json.data;if(typeof p>"u"&&(p=c.json.result),typeof p>"u")throw new fa("internal","Response is missing data field.");return{data:jh(p)}}function XJ(t,e,n,r){const i=t._url(e);return eQ(t,i,n,r||{})}async function eQ(t,e,n,r){var x;n=V0(n);const i={data:n},a=await bU(t,r);a["Content-Type"]="application/json",a.Accept="text/event-stream";let s;try{s=await t.fetchImpl(e,{method:"POST",body:JSON.stringify(i),headers:a,signal:r==null?void 0:r.signal,credentials:_U(t)})}catch(b){if(b instanceof Error&&b.name==="AbortError"){const A=new fa("cancelled","Request was cancelled.");return{data:Promise.reject(A),stream:{[Symbol.asyncIterator](){return{next(){return Promise.reject(A)}}}}}}const C=U0(0,null);return{data:Promise.reject(C),stream:{[Symbol.asyncIterator](){return{next(){return Promise.reject(C)}}}}}}let l,c;const h=new Promise((b,C)=>{l=b,c=C});(x=r==null?void 0:r.signal)==null||x.addEventListener("abort",()=>{const b=new fa("cancelled","Request was cancelled.");c(b)});const p=s.body.getReader(),g=tQ(p,l,c,r==null?void 0:r.signal);return{stream:{[Symbol.asyncIterator](){const b=g.getReader();return{async next(){const{value:C,done:A}=await b.read();return{value:C,done:A}},async return(){return await b.cancel(),{done:!0,value:void 0}}}}},data:h}}function tQ(t,e,n,r){const i=(s,l)=>{const c=s.match(GJ);if(!c)return;const h=c[1];try{const p=JSON.parse(h);if("result"in p){e(jh(p.result));return}if("message"in p){l.enqueue(jh(p.message));return}if("error"in p){const g=U0(0,p);l.error(g),n(g);return}}catch(p){if(p instanceof fa){l.error(p),n(p);return}}},a=new TextDecoder;return new ReadableStream({start(s){let l="";return c();async function c(){if(r!=null&&r.aborted){const h=new fa("cancelled","Request was cancelled");return s.error(h),n(h),Promise.resolve()}try{const{value:h,done:p}=await t.read();if(p){l.trim()&&i(l.trim(),s),s.close();return}if(r!=null&&r.aborted){const x=new fa("cancelled","Request was cancelled");s.error(x),n(x),await t.cancel();return}l+=a.decode(h,{stream:!0});const g=l.split(`
`);l=g.pop()||"";for(const x of g)x.trim()&&i(x.trim(),s);return c()}catch(h){const p=h instanceof fa?h:U0(0,null);s.error(p),n(p)}}},cancel(){return t.cancel()}})}const W2="@firebase/functions",Y2="0.13.1";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const nQ="auth-internal",rQ="app-check-internal",iQ="messaging-internal";function aQ(t){const e=(n,{instanceIdentifier:r})=>{const i=n.getProvider("app").getImmediate(),a=n.getProvider(nQ),s=n.getProvider(iQ),l=n.getProvider(rQ);return new KJ(i,a,s,l,r)};Cd(new tc(EC,e,"PUBLIC").setMultipleInstances(!0)),Co(W2,Y2,t),Co(W2,Y2,"esm2020")}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function sQ(t=p3(),e=XS){const r=e_(xn(t),EC).getImmediate({identifier:e}),i=fH("functions");return i&&oQ(r,...i),r}function oQ(t,e,n){WJ(xn(t),e,n)}function lQ(t,e,n){return YJ(xn(t),e)}aQ();const uQ={apiKey:"AIzaSyCECBR1DtgKsr26Fsp1m2gqZGlAOMsUMcY",authDomain:"sistema-de-gestao-de-ativos.firebaseapp.com",projectId:"sistema-de-gestao-de-ativos",storageBucket:"sistema-de-gestao-de-ativos.appspot.com",messagingSenderId:"178570353251",appId:"1:178570353251:web:6a4b4801d896e0bc7c7656"},TC=m3(uQ),Me=hJ(TC,{localCache:IJ({tabManager:RJ()})}),Sl=JK(TC),cQ=sQ(TC,"southamerica-east1"),dQ=t=>lQ(cQ,t);class fQ{constructor(){this.userContext=null}setUser(e){this.userContext={uid:e.uid,role:e.role,tenantId:e.tenantId}}clearUser(){this.userContext=null}log(e,n,r){const a={timestamp:new Date().toISOString(),level:e,message:n,context:{...r,user:this.userContext,url:window.location.href}};switch(e){case"info":console.log(JSON.stringify(a,null,2));break;case"warn":console.warn(JSON.stringify(a,null,2));break;case"error":console.error(JSON.stringify(a,null,2));break}}info(e,n){this.log("info",e,n)}warn(e,n){this.log("warn",e,n)}error(e,n,r){const i={...r,errorMessage:n==null?void 0:n.message,errorCode:n==null?void 0:n.code,errorStack:n==null?void 0:n.stack};this.log("error",e,i)}}const Jf=new fQ,hQ=t=>Sl?F$(Sl,async e=>{if(e){const r=(await T3(e,!0)).claims,i=r.tenantId||e.uid,a={uid:e.uid,email:e.email,name:e.displayName,role:r.role||"admin",tenantId:i};Jf.setUser(a),t(a)}else Jf.clearUser(),t(null)}):(t(null),()=>{}),mQ=async t=>{if(!Sl||!Me)throw new Error("Firebase Auth ou Firestore no inicializado.");const{name:e,email:n,password:r,companyName:i,phone:a}=t;if(!n||!r||!e||!i)throw new Error("Todos os campos obrigatrios devem ser preenchidos.");const l=(await k$(Sl,n,r)).user;await j$(l,{displayName:e});const c=Gt(Me,"users",l.uid);await SJ(c,{uid:l.uid,name:e,email:n,companyName:i,phone:a||null,createdAt:Vg(),tenantId:l.uid,role:"admin",status:"active"})},pQ=async(t,e,n)=>{if(!Sl)throw new Error("Firebase Auth is not initialized.");await L$(Sl,n?G3:wA),await M$(Sl,t,e)},gQ=async()=>{Sl&&await B$(Sl)},wU=N.createContext(void 0),yQ=({children:t})=>{const[e,n]=N.useState({user:null,isLoading:!0,error:null});N.useEffect(()=>{const l=hQ(c=>{n({user:c,isLoading:!1,error:null})});return()=>l()},[]);const s={...e,signUp:async l=>{try{n(c=>({...c,isLoading:!0,error:null})),await mQ(l)}catch(c){console.error("Sign up error:",c);const h=c.code==="auth/email-already-in-use"?"Este e-mail j est em uso.":"Falha ao criar conta.";throw n(p=>({...p,isLoading:!1,error:h})),c}},signIn:async(l,c,h)=>{try{n(p=>({...p,isLoading:!0,error:null})),await pQ(l,c,h)}catch(p){console.error("Sign in error:",p);const g="E-mail ou senha invlidos. Por favor, tente novamente.";throw n(x=>({...x,isLoading:!1,error:g})),p}},logOut:async()=>{try{await gQ()}catch(l){console.error("Log out error:",l),n(c=>({...c,error:"Falha ao sair."}))}}};return f.jsx(wU.Provider,{value:s,children:t})},$s=()=>{const t=N.useContext(wU);if(t===void 0)throw new Error("useAuth must be used within an AuthProvider");return t};var bi=(t=>(t.INVOICE="Nota Fiscal",t.MANUAL="Manual",t.WARRANTY="Garantia",t.OTHER="Outro",t))(bi||{}),lr=(t=>(t.ACTIVE="Ativo",t.IN_REPAIR="Em Reparo",t.DECOMMISSIONED="Descomissionado",t.IDLE="Ocioso",t))(lr||{}),sr=(t=>(t.PENDING="Pendente",t.APPROVED="Aprovado",t.REJECTED="Rejeitado",t.AUTO_APPROVED="Aprovado Automaticamente",t))(sr||{}),Xn=(t=>(t.PENDING="Pendente",t.PAID="Paga",t.OVERDUE="Atrasada",t.CANCELED="Cancelada",t))(Xn||{}),Va=(t=>(t.ACTIVE="Ativo",t.EXPIRED="Expirado",t.CANCELED="Cancelado",t))(Va||{}),Li=(t=>(t.OPEN="Em Aberto",t.PAID="Pago",t.PARTIAL="Parcial",t.OVERDUE="Vencido",t))(Li||{}),yi=(t=>(t.PENDING="Pendente",t.MATCHED="Conciliado",t.REVIEW="Revisar",t))(yi||{}),Jn=(t=>(t.PENDING="Pendente",t.APPROVED="Aprovado",t.REJECTED="Rejeitado",t.ORDERED="Pedido Gerado",t.RFQ_CREATED="Cotao Gerada",t.CANCELED="Cancelado",t))(Jn||{}),sh=(t=>(t.DRAFT="Rascunho",t.SENT="Enviado",t.CLOSED="Fechado",t))(sh||{}),Eo=(t=>(t.PENDING="Pendente",t.SENT="Enviado",t.PARTIALLY_RECEIVED="Recebido Parcialmente",t.RECEIVED="Recebido",t.CANCELED="Cancelado",t))(Eo||{});/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */let vQ,xQ;function _Q(){return{geminiUrl:vQ,vertexUrl:xQ}}function bQ(t,e,n,r){var i,a;if(!(t!=null&&t.baseUrl)){const s=_Q();return e?(i=s.vertexUrl)!==null&&i!==void 0?i:n:(a=s.geminiUrl)!==null&&a!==void 0?a:r}return t.baseUrl}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class Hl{}function qe(t,e){const n=/\{([^}]+)\}/g;return t.replace(n,(r,i)=>{if(Object.prototype.hasOwnProperty.call(e,i)){const a=e[i];return a!=null?String(a):""}else throw new Error(`Key '${i}' not found in valueMap.`)})}function w(t,e,n){for(let a=0;a<e.length-1;a++){const s=e[a];if(s.endsWith("[]")){const l=s.slice(0,-2);if(!(l in t))if(Array.isArray(n))t[l]=Array.from({length:n.length},()=>({}));else throw new Error(`Value must be a list given an array path ${s}`);if(Array.isArray(t[l])){const c=t[l];if(Array.isArray(n))for(let h=0;h<c.length;h++){const p=c[h];w(p,e.slice(a+1),n[h])}else for(const h of c)w(h,e.slice(a+1),n)}return}else if(s.endsWith("[0]")){const l=s.slice(0,-3);l in t||(t[l]=[{}]);const c=t[l];w(c[0],e.slice(a+1),n);return}(!t[s]||typeof t[s]!="object")&&(t[s]={}),t=t[s]}const r=e[e.length-1],i=t[r];if(i!==void 0){if(!n||typeof n=="object"&&Object.keys(n).length===0||n===i)return;if(typeof i=="object"&&typeof n=="object"&&i!==null&&n!==null)Object.assign(i,n);else throw new Error(`Cannot set value for an existing key. Key: ${r}`)}else r==="_self"&&typeof n=="object"&&n!==null&&!Array.isArray(n)?Object.assign(t,n):t[r]=n}function _(t,e,n=void 0){try{if(e.length===1&&e[0]==="_self")return t;for(let r=0;r<e.length;r++){if(typeof t!="object"||t===null)return n;const i=e[r];if(i.endsWith("[]")){const a=i.slice(0,-2);if(a in t){const s=t[a];return Array.isArray(s)?s.map(l=>_(l,e.slice(r+1),n)):n}else return n}else t=t[i]}return t}catch(r){if(r instanceof TypeError)return n;throw r}}function wQ(t,e){for(const[n,r]of Object.entries(e)){const i=n.split("."),a=r.split("."),s=new Set;let l=-1;for(let c=0;c<i.length;c++)if(i[c]==="*"){l=c;break}if(l!==-1&&a.length>l)for(let c=l;c<a.length;c++){const h=a[c];h!=="*"&&!h.endsWith("[]")&&!h.endsWith("[0]")&&s.add(h)}e1(t,i,a,0,s)}}function e1(t,e,n,r,i){if(r>=e.length||typeof t!="object"||t===null)return;const a=e[r];if(a.endsWith("[]")){const s=a.slice(0,-2),l=t;if(s in l&&Array.isArray(l[s]))for(const c of l[s])e1(c,e,n,r+1,i)}else if(a==="*"){if(typeof t=="object"&&t!==null&&!Array.isArray(t)){const s=t,l=Object.keys(s).filter(h=>!h.startsWith("_")&&!i.has(h)),c={};for(const h of l)c[h]=s[h];for(const[h,p]of Object.entries(c)){const g=[];for(const x of n.slice(r))x==="*"?g.push(h):g.push(x);w(s,g,p)}for(const h of l)delete s[h]}}else{const s=t;a in s&&e1(s[a],e,n,r+1,i)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function SC(t){if(typeof t!="string")throw new Error("fromImageBytes must be a string");return t}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function EQ(t){const e={},n=_(t,["operationName"]);n!=null&&w(e,["operationName"],n);const r=_(t,["resourceName"]);return r!=null&&w(e,["_url","resourceName"],r),e}function TQ(t){const e={},n=_(t,["name"]);n!=null&&w(e,["name"],n);const r=_(t,["metadata"]);r!=null&&w(e,["metadata"],r);const i=_(t,["done"]);i!=null&&w(e,["done"],i);const a=_(t,["error"]);a!=null&&w(e,["error"],a);const s=_(t,["response","generateVideoResponse"]);return s!=null&&w(e,["response"],AQ(s)),e}function SQ(t){const e={},n=_(t,["name"]);n!=null&&w(e,["name"],n);const r=_(t,["metadata"]);r!=null&&w(e,["metadata"],r);const i=_(t,["done"]);i!=null&&w(e,["done"],i);const a=_(t,["error"]);a!=null&&w(e,["error"],a);const s=_(t,["response"]);return s!=null&&w(e,["response"],CQ(s)),e}function AQ(t){const e={},n=_(t,["generatedSamples"]);if(n!=null){let a=n;Array.isArray(a)&&(a=a.map(s=>IQ(s))),w(e,["generatedVideos"],a)}const r=_(t,["raiMediaFilteredCount"]);r!=null&&w(e,["raiMediaFilteredCount"],r);const i=_(t,["raiMediaFilteredReasons"]);return i!=null&&w(e,["raiMediaFilteredReasons"],i),e}function CQ(t){const e={},n=_(t,["videos"]);if(n!=null){let a=n;Array.isArray(a)&&(a=a.map(s=>NQ(s))),w(e,["generatedVideos"],a)}const r=_(t,["raiMediaFilteredCount"]);r!=null&&w(e,["raiMediaFilteredCount"],r);const i=_(t,["raiMediaFilteredReasons"]);return i!=null&&w(e,["raiMediaFilteredReasons"],i),e}function IQ(t){const e={},n=_(t,["video"]);return n!=null&&w(e,["video"],OQ(n)),e}function NQ(t){const e={},n=_(t,["_self"]);return n!=null&&w(e,["video"],jQ(n)),e}function PQ(t){const e={},n=_(t,["operationName"]);return n!=null&&w(e,["_url","operationName"],n),e}function DQ(t){const e={},n=_(t,["operationName"]);return n!=null&&w(e,["_url","operationName"],n),e}function RQ(t){const e={},n=_(t,["name"]);n!=null&&w(e,["name"],n);const r=_(t,["metadata"]);r!=null&&w(e,["metadata"],r);const i=_(t,["done"]);i!=null&&w(e,["done"],i);const a=_(t,["error"]);a!=null&&w(e,["error"],a);const s=_(t,["response"]);return s!=null&&w(e,["response"],kQ(s)),e}function kQ(t){const e={},n=_(t,["sdkHttpResponse"]);n!=null&&w(e,["sdkHttpResponse"],n);const r=_(t,["parent"]);r!=null&&w(e,["parent"],r);const i=_(t,["documentName"]);return i!=null&&w(e,["documentName"],i),e}function EU(t){const e={},n=_(t,["name"]);n!=null&&w(e,["name"],n);const r=_(t,["metadata"]);r!=null&&w(e,["metadata"],r);const i=_(t,["done"]);i!=null&&w(e,["done"],i);const a=_(t,["error"]);a!=null&&w(e,["error"],a);const s=_(t,["response"]);return s!=null&&w(e,["response"],MQ(s)),e}function MQ(t){const e={},n=_(t,["sdkHttpResponse"]);n!=null&&w(e,["sdkHttpResponse"],n);const r=_(t,["parent"]);r!=null&&w(e,["parent"],r);const i=_(t,["documentName"]);return i!=null&&w(e,["documentName"],i),e}function OQ(t){const e={},n=_(t,["uri"]);n!=null&&w(e,["uri"],n);const r=_(t,["encodedVideo"]);r!=null&&w(e,["videoBytes"],SC(r));const i=_(t,["encoding"]);return i!=null&&w(e,["mimeType"],i),e}function jQ(t){const e={},n=_(t,["gcsUri"]);n!=null&&w(e,["uri"],n);const r=_(t,["bytesBase64Encoded"]);r!=null&&w(e,["videoBytes"],SC(r));const i=_(t,["mimeType"]);return i!=null&&w(e,["mimeType"],i),e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */var Z2;(function(t){t.OUTCOME_UNSPECIFIED="OUTCOME_UNSPECIFIED",t.OUTCOME_OK="OUTCOME_OK",t.OUTCOME_FAILED="OUTCOME_FAILED",t.OUTCOME_DEADLINE_EXCEEDED="OUTCOME_DEADLINE_EXCEEDED"})(Z2||(Z2={}));var J2;(function(t){t.LANGUAGE_UNSPECIFIED="LANGUAGE_UNSPECIFIED",t.PYTHON="PYTHON"})(J2||(J2={}));var Q2;(function(t){t.SCHEDULING_UNSPECIFIED="SCHEDULING_UNSPECIFIED",t.SILENT="SILENT",t.WHEN_IDLE="WHEN_IDLE",t.INTERRUPT="INTERRUPT"})(Q2||(Q2={}));var ua;(function(t){t.TYPE_UNSPECIFIED="TYPE_UNSPECIFIED",t.STRING="STRING",t.NUMBER="NUMBER",t.INTEGER="INTEGER",t.BOOLEAN="BOOLEAN",t.ARRAY="ARRAY",t.OBJECT="OBJECT",t.NULL="NULL"})(ua||(ua={}));var X2;(function(t){t.MODE_UNSPECIFIED="MODE_UNSPECIFIED",t.MODE_DYNAMIC="MODE_DYNAMIC"})(X2||(X2={}));var eM;(function(t){t.API_SPEC_UNSPECIFIED="API_SPEC_UNSPECIFIED",t.SIMPLE_SEARCH="SIMPLE_SEARCH",t.ELASTIC_SEARCH="ELASTIC_SEARCH"})(eM||(eM={}));var tM;(function(t){t.AUTH_TYPE_UNSPECIFIED="AUTH_TYPE_UNSPECIFIED",t.NO_AUTH="NO_AUTH",t.API_KEY_AUTH="API_KEY_AUTH",t.HTTP_BASIC_AUTH="HTTP_BASIC_AUTH",t.GOOGLE_SERVICE_ACCOUNT_AUTH="GOOGLE_SERVICE_ACCOUNT_AUTH",t.OAUTH="OAUTH",t.OIDC_AUTH="OIDC_AUTH"})(tM||(tM={}));var nM;(function(t){t.HTTP_IN_UNSPECIFIED="HTTP_IN_UNSPECIFIED",t.HTTP_IN_QUERY="HTTP_IN_QUERY",t.HTTP_IN_HEADER="HTTP_IN_HEADER",t.HTTP_IN_PATH="HTTP_IN_PATH",t.HTTP_IN_BODY="HTTP_IN_BODY",t.HTTP_IN_COOKIE="HTTP_IN_COOKIE"})(nM||(nM={}));var rM;(function(t){t.PHISH_BLOCK_THRESHOLD_UNSPECIFIED="PHISH_BLOCK_THRESHOLD_UNSPECIFIED",t.BLOCK_LOW_AND_ABOVE="BLOCK_LOW_AND_ABOVE",t.BLOCK_MEDIUM_AND_ABOVE="BLOCK_MEDIUM_AND_ABOVE",t.BLOCK_HIGH_AND_ABOVE="BLOCK_HIGH_AND_ABOVE",t.BLOCK_HIGHER_AND_ABOVE="BLOCK_HIGHER_AND_ABOVE",t.BLOCK_VERY_HIGH_AND_ABOVE="BLOCK_VERY_HIGH_AND_ABOVE",t.BLOCK_ONLY_EXTREMELY_HIGH="BLOCK_ONLY_EXTREMELY_HIGH"})(rM||(rM={}));var iM;(function(t){t.THINKING_LEVEL_UNSPECIFIED="THINKING_LEVEL_UNSPECIFIED",t.LOW="LOW",t.HIGH="HIGH"})(iM||(iM={}));var aM;(function(t){t.HARM_CATEGORY_UNSPECIFIED="HARM_CATEGORY_UNSPECIFIED",t.HARM_CATEGORY_HARASSMENT="HARM_CATEGORY_HARASSMENT",t.HARM_CATEGORY_HATE_SPEECH="HARM_CATEGORY_HATE_SPEECH",t.HARM_CATEGORY_SEXUALLY_EXPLICIT="HARM_CATEGORY_SEXUALLY_EXPLICIT",t.HARM_CATEGORY_DANGEROUS_CONTENT="HARM_CATEGORY_DANGEROUS_CONTENT",t.HARM_CATEGORY_CIVIC_INTEGRITY="HARM_CATEGORY_CIVIC_INTEGRITY",t.HARM_CATEGORY_IMAGE_HATE="HARM_CATEGORY_IMAGE_HATE",t.HARM_CATEGORY_IMAGE_DANGEROUS_CONTENT="HARM_CATEGORY_IMAGE_DANGEROUS_CONTENT",t.HARM_CATEGORY_IMAGE_HARASSMENT="HARM_CATEGORY_IMAGE_HARASSMENT",t.HARM_CATEGORY_IMAGE_SEXUALLY_EXPLICIT="HARM_CATEGORY_IMAGE_SEXUALLY_EXPLICIT",t.HARM_CATEGORY_JAILBREAK="HARM_CATEGORY_JAILBREAK"})(aM||(aM={}));var sM;(function(t){t.HARM_BLOCK_METHOD_UNSPECIFIED="HARM_BLOCK_METHOD_UNSPECIFIED",t.SEVERITY="SEVERITY",t.PROBABILITY="PROBABILITY"})(sM||(sM={}));var oM;(function(t){t.HARM_BLOCK_THRESHOLD_UNSPECIFIED="HARM_BLOCK_THRESHOLD_UNSPECIFIED",t.BLOCK_LOW_AND_ABOVE="BLOCK_LOW_AND_ABOVE",t.BLOCK_MEDIUM_AND_ABOVE="BLOCK_MEDIUM_AND_ABOVE",t.BLOCK_ONLY_HIGH="BLOCK_ONLY_HIGH",t.BLOCK_NONE="BLOCK_NONE",t.OFF="OFF"})(oM||(oM={}));var lM;(function(t){t.FINISH_REASON_UNSPECIFIED="FINISH_REASON_UNSPECIFIED",t.STOP="STOP",t.MAX_TOKENS="MAX_TOKENS",t.SAFETY="SAFETY",t.RECITATION="RECITATION",t.LANGUAGE="LANGUAGE",t.OTHER="OTHER",t.BLOCKLIST="BLOCKLIST",t.PROHIBITED_CONTENT="PROHIBITED_CONTENT",t.SPII="SPII",t.MALFORMED_FUNCTION_CALL="MALFORMED_FUNCTION_CALL",t.IMAGE_SAFETY="IMAGE_SAFETY",t.UNEXPECTED_TOOL_CALL="UNEXPECTED_TOOL_CALL",t.IMAGE_PROHIBITED_CONTENT="IMAGE_PROHIBITED_CONTENT",t.NO_IMAGE="NO_IMAGE"})(lM||(lM={}));var uM;(function(t){t.HARM_PROBABILITY_UNSPECIFIED="HARM_PROBABILITY_UNSPECIFIED",t.NEGLIGIBLE="NEGLIGIBLE",t.LOW="LOW",t.MEDIUM="MEDIUM",t.HIGH="HIGH"})(uM||(uM={}));var cM;(function(t){t.HARM_SEVERITY_UNSPECIFIED="HARM_SEVERITY_UNSPECIFIED",t.HARM_SEVERITY_NEGLIGIBLE="HARM_SEVERITY_NEGLIGIBLE",t.HARM_SEVERITY_LOW="HARM_SEVERITY_LOW",t.HARM_SEVERITY_MEDIUM="HARM_SEVERITY_MEDIUM",t.HARM_SEVERITY_HIGH="HARM_SEVERITY_HIGH"})(cM||(cM={}));var dM;(function(t){t.URL_RETRIEVAL_STATUS_UNSPECIFIED="URL_RETRIEVAL_STATUS_UNSPECIFIED",t.URL_RETRIEVAL_STATUS_SUCCESS="URL_RETRIEVAL_STATUS_SUCCESS",t.URL_RETRIEVAL_STATUS_ERROR="URL_RETRIEVAL_STATUS_ERROR",t.URL_RETRIEVAL_STATUS_PAYWALL="URL_RETRIEVAL_STATUS_PAYWALL",t.URL_RETRIEVAL_STATUS_UNSAFE="URL_RETRIEVAL_STATUS_UNSAFE"})(dM||(dM={}));var fM;(function(t){t.BLOCKED_REASON_UNSPECIFIED="BLOCKED_REASON_UNSPECIFIED",t.SAFETY="SAFETY",t.OTHER="OTHER",t.BLOCKLIST="BLOCKLIST",t.PROHIBITED_CONTENT="PROHIBITED_CONTENT",t.IMAGE_SAFETY="IMAGE_SAFETY",t.MODEL_ARMOR="MODEL_ARMOR",t.JAILBREAK="JAILBREAK"})(fM||(fM={}));var hM;(function(t){t.TRAFFIC_TYPE_UNSPECIFIED="TRAFFIC_TYPE_UNSPECIFIED",t.ON_DEMAND="ON_DEMAND",t.PROVISIONED_THROUGHPUT="PROVISIONED_THROUGHPUT"})(hM||(hM={}));var F0;(function(t){t.MODALITY_UNSPECIFIED="MODALITY_UNSPECIFIED",t.TEXT="TEXT",t.IMAGE="IMAGE",t.AUDIO="AUDIO"})(F0||(F0={}));var mM;(function(t){t.MEDIA_RESOLUTION_UNSPECIFIED="MEDIA_RESOLUTION_UNSPECIFIED",t.MEDIA_RESOLUTION_LOW="MEDIA_RESOLUTION_LOW",t.MEDIA_RESOLUTION_MEDIUM="MEDIA_RESOLUTION_MEDIUM",t.MEDIA_RESOLUTION_HIGH="MEDIA_RESOLUTION_HIGH"})(mM||(mM={}));var pM;(function(t){t.TUNING_MODE_UNSPECIFIED="TUNING_MODE_UNSPECIFIED",t.TUNING_MODE_FULL="TUNING_MODE_FULL",t.TUNING_MODE_PEFT_ADAPTER="TUNING_MODE_PEFT_ADAPTER"})(pM||(pM={}));var gM;(function(t){t.ADAPTER_SIZE_UNSPECIFIED="ADAPTER_SIZE_UNSPECIFIED",t.ADAPTER_SIZE_ONE="ADAPTER_SIZE_ONE",t.ADAPTER_SIZE_TWO="ADAPTER_SIZE_TWO",t.ADAPTER_SIZE_FOUR="ADAPTER_SIZE_FOUR",t.ADAPTER_SIZE_EIGHT="ADAPTER_SIZE_EIGHT",t.ADAPTER_SIZE_SIXTEEN="ADAPTER_SIZE_SIXTEEN",t.ADAPTER_SIZE_THIRTY_TWO="ADAPTER_SIZE_THIRTY_TWO"})(gM||(gM={}));var t1;(function(t){t.JOB_STATE_UNSPECIFIED="JOB_STATE_UNSPECIFIED",t.JOB_STATE_QUEUED="JOB_STATE_QUEUED",t.JOB_STATE_PENDING="JOB_STATE_PENDING",t.JOB_STATE_RUNNING="JOB_STATE_RUNNING",t.JOB_STATE_SUCCEEDED="JOB_STATE_SUCCEEDED",t.JOB_STATE_FAILED="JOB_STATE_FAILED",t.JOB_STATE_CANCELLING="JOB_STATE_CANCELLING",t.JOB_STATE_CANCELLED="JOB_STATE_CANCELLED",t.JOB_STATE_PAUSED="JOB_STATE_PAUSED",t.JOB_STATE_EXPIRED="JOB_STATE_EXPIRED",t.JOB_STATE_UPDATING="JOB_STATE_UPDATING",t.JOB_STATE_PARTIALLY_SUCCEEDED="JOB_STATE_PARTIALLY_SUCCEEDED"})(t1||(t1={}));var yM;(function(t){t.TUNING_TASK_UNSPECIFIED="TUNING_TASK_UNSPECIFIED",t.TUNING_TASK_I2V="TUNING_TASK_I2V",t.TUNING_TASK_T2V="TUNING_TASK_T2V",t.TUNING_TASK_R2V="TUNING_TASK_R2V"})(yM||(yM={}));var vM;(function(t){t.MEDIA_RESOLUTION_UNSPECIFIED="MEDIA_RESOLUTION_UNSPECIFIED",t.MEDIA_RESOLUTION_LOW="MEDIA_RESOLUTION_LOW",t.MEDIA_RESOLUTION_MEDIUM="MEDIA_RESOLUTION_MEDIUM",t.MEDIA_RESOLUTION_HIGH="MEDIA_RESOLUTION_HIGH"})(vM||(vM={}));var xM;(function(t){t.FEATURE_SELECTION_PREFERENCE_UNSPECIFIED="FEATURE_SELECTION_PREFERENCE_UNSPECIFIED",t.PRIORITIZE_QUALITY="PRIORITIZE_QUALITY",t.BALANCED="BALANCED",t.PRIORITIZE_COST="PRIORITIZE_COST"})(xM||(xM={}));var _M;(function(t){t.UNSPECIFIED="UNSPECIFIED",t.BLOCKING="BLOCKING",t.NON_BLOCKING="NON_BLOCKING"})(_M||(_M={}));var bM;(function(t){t.MODE_UNSPECIFIED="MODE_UNSPECIFIED",t.MODE_DYNAMIC="MODE_DYNAMIC"})(bM||(bM={}));var wM;(function(t){t.ENVIRONMENT_UNSPECIFIED="ENVIRONMENT_UNSPECIFIED",t.ENVIRONMENT_BROWSER="ENVIRONMENT_BROWSER"})(wM||(wM={}));var EM;(function(t){t.MODE_UNSPECIFIED="MODE_UNSPECIFIED",t.AUTO="AUTO",t.ANY="ANY",t.NONE="NONE",t.VALIDATED="VALIDATED"})(EM||(EM={}));var TM;(function(t){t.BLOCK_LOW_AND_ABOVE="BLOCK_LOW_AND_ABOVE",t.BLOCK_MEDIUM_AND_ABOVE="BLOCK_MEDIUM_AND_ABOVE",t.BLOCK_ONLY_HIGH="BLOCK_ONLY_HIGH",t.BLOCK_NONE="BLOCK_NONE"})(TM||(TM={}));var SM;(function(t){t.DONT_ALLOW="DONT_ALLOW",t.ALLOW_ADULT="ALLOW_ADULT",t.ALLOW_ALL="ALLOW_ALL"})(SM||(SM={}));var AM;(function(t){t.auto="auto",t.en="en",t.ja="ja",t.ko="ko",t.hi="hi",t.zh="zh",t.pt="pt",t.es="es"})(AM||(AM={}));var CM;(function(t){t.MASK_MODE_DEFAULT="MASK_MODE_DEFAULT",t.MASK_MODE_USER_PROVIDED="MASK_MODE_USER_PROVIDED",t.MASK_MODE_BACKGROUND="MASK_MODE_BACKGROUND",t.MASK_MODE_FOREGROUND="MASK_MODE_FOREGROUND",t.MASK_MODE_SEMANTIC="MASK_MODE_SEMANTIC"})(CM||(CM={}));var IM;(function(t){t.CONTROL_TYPE_DEFAULT="CONTROL_TYPE_DEFAULT",t.CONTROL_TYPE_CANNY="CONTROL_TYPE_CANNY",t.CONTROL_TYPE_SCRIBBLE="CONTROL_TYPE_SCRIBBLE",t.CONTROL_TYPE_FACE_MESH="CONTROL_TYPE_FACE_MESH"})(IM||(IM={}));var NM;(function(t){t.SUBJECT_TYPE_DEFAULT="SUBJECT_TYPE_DEFAULT",t.SUBJECT_TYPE_PERSON="SUBJECT_TYPE_PERSON",t.SUBJECT_TYPE_ANIMAL="SUBJECT_TYPE_ANIMAL",t.SUBJECT_TYPE_PRODUCT="SUBJECT_TYPE_PRODUCT"})(NM||(NM={}));var PM;(function(t){t.EDIT_MODE_DEFAULT="EDIT_MODE_DEFAULT",t.EDIT_MODE_INPAINT_REMOVAL="EDIT_MODE_INPAINT_REMOVAL",t.EDIT_MODE_INPAINT_INSERTION="EDIT_MODE_INPAINT_INSERTION",t.EDIT_MODE_OUTPAINT="EDIT_MODE_OUTPAINT",t.EDIT_MODE_CONTROLLED_EDITING="EDIT_MODE_CONTROLLED_EDITING",t.EDIT_MODE_STYLE="EDIT_MODE_STYLE",t.EDIT_MODE_BGSWAP="EDIT_MODE_BGSWAP",t.EDIT_MODE_PRODUCT_IMAGE="EDIT_MODE_PRODUCT_IMAGE"})(PM||(PM={}));var DM;(function(t){t.FOREGROUND="FOREGROUND",t.BACKGROUND="BACKGROUND",t.PROMPT="PROMPT",t.SEMANTIC="SEMANTIC",t.INTERACTIVE="INTERACTIVE"})(DM||(DM={}));var RM;(function(t){t.ASSET="ASSET",t.STYLE="STYLE"})(RM||(RM={}));var kM;(function(t){t.INSERT="INSERT",t.REMOVE="REMOVE",t.REMOVE_STATIC="REMOVE_STATIC",t.OUTPAINT="OUTPAINT"})(kM||(kM={}));var MM;(function(t){t.OPTIMIZED="OPTIMIZED",t.LOSSLESS="LOSSLESS"})(MM||(MM={}));var OM;(function(t){t.SUPERVISED_FINE_TUNING="SUPERVISED_FINE_TUNING",t.PREFERENCE_TUNING="PREFERENCE_TUNING"})(OM||(OM={}));var jM;(function(t){t.STATE_UNSPECIFIED="STATE_UNSPECIFIED",t.STATE_PENDING="STATE_PENDING",t.STATE_ACTIVE="STATE_ACTIVE",t.STATE_FAILED="STATE_FAILED"})(jM||(jM={}));var LM;(function(t){t.STATE_UNSPECIFIED="STATE_UNSPECIFIED",t.PROCESSING="PROCESSING",t.ACTIVE="ACTIVE",t.FAILED="FAILED"})(LM||(LM={}));var VM;(function(t){t.SOURCE_UNSPECIFIED="SOURCE_UNSPECIFIED",t.UPLOADED="UPLOADED",t.GENERATED="GENERATED"})(VM||(VM={}));var UM;(function(t){t.TURN_COMPLETE_REASON_UNSPECIFIED="TURN_COMPLETE_REASON_UNSPECIFIED",t.MALFORMED_FUNCTION_CALL="MALFORMED_FUNCTION_CALL",t.RESPONSE_REJECTED="RESPONSE_REJECTED",t.NEED_MORE_INPUT="NEED_MORE_INPUT"})(UM||(UM={}));var FM;(function(t){t.MODALITY_UNSPECIFIED="MODALITY_UNSPECIFIED",t.TEXT="TEXT",t.IMAGE="IMAGE",t.VIDEO="VIDEO",t.AUDIO="AUDIO",t.DOCUMENT="DOCUMENT"})(FM||(FM={}));var BM;(function(t){t.START_SENSITIVITY_UNSPECIFIED="START_SENSITIVITY_UNSPECIFIED",t.START_SENSITIVITY_HIGH="START_SENSITIVITY_HIGH",t.START_SENSITIVITY_LOW="START_SENSITIVITY_LOW"})(BM||(BM={}));var zM;(function(t){t.END_SENSITIVITY_UNSPECIFIED="END_SENSITIVITY_UNSPECIFIED",t.END_SENSITIVITY_HIGH="END_SENSITIVITY_HIGH",t.END_SENSITIVITY_LOW="END_SENSITIVITY_LOW"})(zM||(zM={}));var qM;(function(t){t.ACTIVITY_HANDLING_UNSPECIFIED="ACTIVITY_HANDLING_UNSPECIFIED",t.START_OF_ACTIVITY_INTERRUPTS="START_OF_ACTIVITY_INTERRUPTS",t.NO_INTERRUPTION="NO_INTERRUPTION"})(qM||(qM={}));var HM;(function(t){t.TURN_COVERAGE_UNSPECIFIED="TURN_COVERAGE_UNSPECIFIED",t.TURN_INCLUDES_ONLY_ACTIVITY="TURN_INCLUDES_ONLY_ACTIVITY",t.TURN_INCLUDES_ALL_INPUT="TURN_INCLUDES_ALL_INPUT"})(HM||(HM={}));var GM;(function(t){t.SCALE_UNSPECIFIED="SCALE_UNSPECIFIED",t.C_MAJOR_A_MINOR="C_MAJOR_A_MINOR",t.D_FLAT_MAJOR_B_FLAT_MINOR="D_FLAT_MAJOR_B_FLAT_MINOR",t.D_MAJOR_B_MINOR="D_MAJOR_B_MINOR",t.E_FLAT_MAJOR_C_MINOR="E_FLAT_MAJOR_C_MINOR",t.E_MAJOR_D_FLAT_MINOR="E_MAJOR_D_FLAT_MINOR",t.F_MAJOR_D_MINOR="F_MAJOR_D_MINOR",t.G_FLAT_MAJOR_E_FLAT_MINOR="G_FLAT_MAJOR_E_FLAT_MINOR",t.G_MAJOR_E_MINOR="G_MAJOR_E_MINOR",t.A_FLAT_MAJOR_F_MINOR="A_FLAT_MAJOR_F_MINOR",t.A_MAJOR_G_FLAT_MINOR="A_MAJOR_G_FLAT_MINOR",t.B_FLAT_MAJOR_G_MINOR="B_FLAT_MAJOR_G_MINOR",t.B_MAJOR_A_FLAT_MINOR="B_MAJOR_A_FLAT_MINOR"})(GM||(GM={}));var $M;(function(t){t.MUSIC_GENERATION_MODE_UNSPECIFIED="MUSIC_GENERATION_MODE_UNSPECIFIED",t.QUALITY="QUALITY",t.DIVERSITY="DIVERSITY",t.VOCALIZATION="VOCALIZATION"})($M||($M={}));var Qf;(function(t){t.PLAYBACK_CONTROL_UNSPECIFIED="PLAYBACK_CONTROL_UNSPECIFIED",t.PLAY="PLAY",t.PAUSE="PAUSE",t.STOP="STOP",t.RESET_CONTEXT="RESET_CONTEXT"})(Qf||(Qf={}));class n1{constructor(e){const n={};for(const r of e.headers.entries())n[r[0]]=r[1];this.headers=n,this.responseInternal=e}json(){return this.responseInternal.json()}}class op{get text(){var e,n,r,i,a,s,l,c;if(((i=(r=(n=(e=this.candidates)===null||e===void 0?void 0:e[0])===null||n===void 0?void 0:n.content)===null||r===void 0?void 0:r.parts)===null||i===void 0?void 0:i.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning text from the first one.");let h="",p=!1;const g=[];for(const x of(c=(l=(s=(a=this.candidates)===null||a===void 0?void 0:a[0])===null||s===void 0?void 0:s.content)===null||l===void 0?void 0:l.parts)!==null&&c!==void 0?c:[]){for(const[b,C]of Object.entries(x))b!=="text"&&b!=="thought"&&b!=="thoughtSignature"&&(C!==null||C!==void 0)&&g.push(b);if(typeof x.text=="string"){if(typeof x.thought=="boolean"&&x.thought)continue;p=!0,h+=x.text}}return g.length>0&&console.warn(`there are non-text parts ${g} in the response, returning concatenation of all text parts. Please refer to the non text parts for a full response from model.`),p?h:void 0}get data(){var e,n,r,i,a,s,l,c;if(((i=(r=(n=(e=this.candidates)===null||e===void 0?void 0:e[0])===null||n===void 0?void 0:n.content)===null||r===void 0?void 0:r.parts)===null||i===void 0?void 0:i.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning data from the first one.");let h="";const p=[];for(const g of(c=(l=(s=(a=this.candidates)===null||a===void 0?void 0:a[0])===null||s===void 0?void 0:s.content)===null||l===void 0?void 0:l.parts)!==null&&c!==void 0?c:[]){for(const[x,b]of Object.entries(g))x!=="inlineData"&&(b!==null||b!==void 0)&&p.push(x);g.inlineData&&typeof g.inlineData.data=="string"&&(h+=atob(g.inlineData.data))}return p.length>0&&console.warn(`there are non-data parts ${p} in the response, returning concatenation of all data parts. Please refer to the non data parts for a full response from model.`),h.length>0?btoa(h):void 0}get functionCalls(){var e,n,r,i,a,s,l,c;if(((i=(r=(n=(e=this.candidates)===null||e===void 0?void 0:e[0])===null||n===void 0?void 0:n.content)===null||r===void 0?void 0:r.parts)===null||i===void 0?void 0:i.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning function calls from the first one.");const h=(c=(l=(s=(a=this.candidates)===null||a===void 0?void 0:a[0])===null||s===void 0?void 0:s.content)===null||l===void 0?void 0:l.parts)===null||c===void 0?void 0:c.filter(p=>p.functionCall).map(p=>p.functionCall).filter(p=>p!==void 0);if((h==null?void 0:h.length)!==0)return h}get executableCode(){var e,n,r,i,a,s,l,c,h;if(((i=(r=(n=(e=this.candidates)===null||e===void 0?void 0:e[0])===null||n===void 0?void 0:n.content)===null||r===void 0?void 0:r.parts)===null||i===void 0?void 0:i.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning executable code from the first one.");const p=(c=(l=(s=(a=this.candidates)===null||a===void 0?void 0:a[0])===null||s===void 0?void 0:s.content)===null||l===void 0?void 0:l.parts)===null||c===void 0?void 0:c.filter(g=>g.executableCode).map(g=>g.executableCode).filter(g=>g!==void 0);if((p==null?void 0:p.length)!==0)return(h=p==null?void 0:p[0])===null||h===void 0?void 0:h.code}get codeExecutionResult(){var e,n,r,i,a,s,l,c,h;if(((i=(r=(n=(e=this.candidates)===null||e===void 0?void 0:e[0])===null||n===void 0?void 0:n.content)===null||r===void 0?void 0:r.parts)===null||i===void 0?void 0:i.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning code execution result from the first one.");const p=(c=(l=(s=(a=this.candidates)===null||a===void 0?void 0:a[0])===null||s===void 0?void 0:s.content)===null||l===void 0?void 0:l.parts)===null||c===void 0?void 0:c.filter(g=>g.codeExecutionResult).map(g=>g.codeExecutionResult).filter(g=>g!==void 0);if((p==null?void 0:p.length)!==0)return(h=p==null?void 0:p[0])===null||h===void 0?void 0:h.output}}class KM{}class WM{}class LQ{}class VQ{}class UQ{}class FQ{}class YM{}class ZM{}class JM{}class BQ{}class B0{_fromAPIResponse({apiResponse:e,_isVertexAI:n}){const r=new B0;let i;const a=e;return n?i=SQ(a):i=TQ(a),Object.assign(r,i),r}}class QM{}class XM{}class eO{}class zQ{}class qQ{}class HQ{}class AC{_fromAPIResponse({apiResponse:e,_isVertexAI:n}){const r=new AC,a=RQ(e);return Object.assign(r,a),r}}class GQ{}class $Q{}class KQ{}class tO{}class WQ{get text(){var e,n,r;let i="",a=!1;const s=[];for(const l of(r=(n=(e=this.serverContent)===null||e===void 0?void 0:e.modelTurn)===null||n===void 0?void 0:n.parts)!==null&&r!==void 0?r:[]){for(const[c,h]of Object.entries(l))c!=="text"&&c!=="thought"&&h!==null&&s.push(c);if(typeof l.text=="string"){if(typeof l.thought=="boolean"&&l.thought)continue;a=!0,i+=l.text}}return s.length>0&&console.warn(`there are non-text parts ${s} in the response, returning concatenation of all text parts. Please refer to the non text parts for a full response from model.`),a?i:void 0}get data(){var e,n,r;let i="";const a=[];for(const s of(r=(n=(e=this.serverContent)===null||e===void 0?void 0:e.modelTurn)===null||n===void 0?void 0:n.parts)!==null&&r!==void 0?r:[]){for(const[l,c]of Object.entries(s))l!=="inlineData"&&c!==null&&a.push(l);s.inlineData&&typeof s.inlineData.data=="string"&&(i+=atob(s.inlineData.data))}return a.length>0&&console.warn(`there are non-data parts ${a} in the response, returning concatenation of all data parts. Please refer to the non data parts for a full response from model.`),i.length>0?btoa(i):void 0}}class YQ{get audioChunk(){if(this.serverContent&&this.serverContent.audioChunks&&this.serverContent.audioChunks.length>0)return this.serverContent.audioChunks[0]}}class CC{_fromAPIResponse({apiResponse:e,_isVertexAI:n}){const r=new CC,a=EU(e);return Object.assign(r,a),r}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function $t(t,e){if(!e||typeof e!="string")throw new Error("model is required and must be a string");if(e.includes("..")||e.includes("?")||e.includes("&"))throw new Error("invalid model parameter");if(t.isVertexAI()){if(e.startsWith("publishers/")||e.startsWith("projects/")||e.startsWith("models/"))return e;if(e.indexOf("/")>=0){const n=e.split("/",2);return`publishers/${n[0]}/models/${n[1]}`}else return`publishers/google/models/${e}`}else return e.startsWith("models/")||e.startsWith("tunedModels/")?e:`models/${e}`}function TU(t,e){const n=$t(t,e);return n?n.startsWith("publishers/")&&t.isVertexAI()?`projects/${t.getProject()}/locations/${t.getLocation()}/${n}`:n.startsWith("models/")&&t.isVertexAI()?`projects/${t.getProject()}/locations/${t.getLocation()}/publishers/google/${n}`:n:""}function SU(t){return Array.isArray(t)?t.map(e=>z0(e)):[z0(t)]}function z0(t){if(typeof t=="object"&&t!==null)return t;throw new Error(`Could not parse input as Blob. Unsupported blob type: ${typeof t}`)}function AU(t){const e=z0(t);if(e.mimeType&&e.mimeType.startsWith("image/"))return e;throw new Error(`Unsupported mime type: ${e.mimeType}`)}function CU(t){const e=z0(t);if(e.mimeType&&e.mimeType.startsWith("audio/"))return e;throw new Error(`Unsupported mime type: ${e.mimeType}`)}function nO(t){if(t==null)throw new Error("PartUnion is required");if(typeof t=="object")return t;if(typeof t=="string")return{text:t};throw new Error(`Unsupported part type: ${typeof t}`)}function IU(t){if(t==null||Array.isArray(t)&&t.length===0)throw new Error("PartListUnion is required");return Array.isArray(t)?t.map(e=>nO(e)):[nO(t)]}function r1(t){return t!=null&&typeof t=="object"&&"parts"in t&&Array.isArray(t.parts)}function rO(t){return t!=null&&typeof t=="object"&&"functionCall"in t}function iO(t){return t!=null&&typeof t=="object"&&"functionResponse"in t}function Ei(t){if(t==null)throw new Error("ContentUnion is required");return r1(t)?t:{role:"user",parts:IU(t)}}function IC(t,e){if(!e)return[];if(t.isVertexAI()&&Array.isArray(e))return e.flatMap(n=>{const r=Ei(n);return r.parts&&r.parts.length>0&&r.parts[0].text!==void 0?[r.parts[0].text]:[]});if(t.isVertexAI()){const n=Ei(e);return n.parts&&n.parts.length>0&&n.parts[0].text!==void 0?[n.parts[0].text]:[]}return Array.isArray(e)?e.map(n=>Ei(n)):[Ei(e)]}function hs(t){if(t==null||Array.isArray(t)&&t.length===0)throw new Error("contents are required");if(!Array.isArray(t)){if(rO(t)||iO(t))throw new Error("To specify functionCall or functionResponse parts, please wrap them in a Content object, specifying the role for them");return[Ei(t)]}const e=[],n=[],r=r1(t[0]);for(const i of t){const a=r1(i);if(a!=r)throw new Error("Mixing Content and Parts is not supported, please group the parts into a the appropriate Content objects and specify the roles for them");if(a)e.push(i);else{if(rO(i)||iO(i))throw new Error("To specify functionCall or functionResponse parts, please wrap them, and any other parts, in Content objects as appropriate, specifying the role for them");n.push(i)}}return r||e.push({role:"user",parts:IU(n)}),e}function ZQ(t,e){t.includes("null")&&(e.nullable=!0);const n=t.filter(r=>r!=="null");if(n.length===1)e.type=Object.values(ua).includes(n[0].toUpperCase())?n[0].toUpperCase():ua.TYPE_UNSPECIFIED;else{e.anyOf=[];for(const r of n)e.anyOf.push({type:Object.values(ua).includes(r.toUpperCase())?r.toUpperCase():ua.TYPE_UNSPECIFIED})}}function oh(t){const e={},n=["items"],r=["anyOf"],i=["properties"];if(t.type&&t.anyOf)throw new Error("type and anyOf cannot be both populated.");const a=t.anyOf;a!=null&&a.length==2&&(a[0].type==="null"?(e.nullable=!0,t=a[1]):a[1].type==="null"&&(e.nullable=!0,t=a[0])),t.type instanceof Array&&ZQ(t.type,e);for(const[s,l]of Object.entries(t))if(l!=null)if(s=="type"){if(l==="null")throw new Error("type: null can not be the only possible type for the field.");if(l instanceof Array)continue;e.type=Object.values(ua).includes(l.toUpperCase())?l.toUpperCase():ua.TYPE_UNSPECIFIED}else if(n.includes(s))e[s]=oh(l);else if(r.includes(s)){const c=[];for(const h of l){if(h.type=="null"){e.nullable=!0;continue}c.push(oh(h))}e[s]=c}else if(i.includes(s)){const c={};for(const[h,p]of Object.entries(l))c[h]=oh(p);e[s]=c}else{if(s==="additionalProperties")continue;e[s]=l}return e}function NC(t){return oh(t)}function PC(t){if(typeof t=="object")return t;if(typeof t=="string")return{voiceConfig:{prebuiltVoiceConfig:{voiceName:t}}};throw new Error(`Unsupported speechConfig type: ${typeof t}`)}function DC(t){if("multiSpeakerVoiceConfig"in t)throw new Error("multiSpeakerVoiceConfig is not supported in the live API.");return t}function am(t){if(t.functionDeclarations)for(const e of t.functionDeclarations)e.parameters&&(Object.keys(e.parameters).includes("$schema")?e.parametersJsonSchema||(e.parametersJsonSchema=e.parameters,delete e.parameters):e.parameters=oh(e.parameters)),e.response&&(Object.keys(e.response).includes("$schema")?e.responseJsonSchema||(e.responseJsonSchema=e.response,delete e.response):e.response=oh(e.response));return t}function sm(t){if(t==null)throw new Error("tools is required");if(!Array.isArray(t))throw new Error("tools is required and must be an array of Tools");const e=[];for(const n of t)e.push(n);return e}function JQ(t,e,n,r=1){const i=!e.startsWith(`${n}/`)&&e.split("/").length===r;return t.isVertexAI()?e.startsWith("projects/")?e:e.startsWith("locations/")?`projects/${t.getProject()}/${e}`:e.startsWith(`${n}/`)?`projects/${t.getProject()}/locations/${t.getLocation()}/${e}`:i?`projects/${t.getProject()}/locations/${t.getLocation()}/${n}/${e}`:e:i?`${n}/${e}`:e}function Gl(t,e){if(typeof e!="string")throw new Error("name must be a string");return JQ(t,e,"cachedContents")}function NU(t){switch(t){case"STATE_UNSPECIFIED":return"JOB_STATE_UNSPECIFIED";case"CREATING":return"JOB_STATE_RUNNING";case"ACTIVE":return"JOB_STATE_SUCCEEDED";case"FAILED":return"JOB_STATE_FAILED";default:return t}}function xc(t){return SC(t)}function QQ(t){return t!=null&&typeof t=="object"&&"name"in t}function XQ(t){return t!=null&&typeof t=="object"&&"video"in t}function eX(t){return t!=null&&typeof t=="object"&&"uri"in t}function PU(t){var e;let n;if(QQ(t)&&(n=t.name),!(eX(t)&&(n=t.uri,n===void 0))&&!(XQ(t)&&(n=(e=t.video)===null||e===void 0?void 0:e.uri,n===void 0))){if(typeof t=="string"&&(n=t),n===void 0)throw new Error("Could not extract file name from the provided input.");if(n.startsWith("https://")){const i=n.split("files/")[1].match(/[a-z0-9]+/);if(i===null)throw new Error(`Could not extract file name from URI ${n}`);n=i[0]}else n.startsWith("files/")&&(n=n.split("files/")[1]);return n}}function DU(t,e){let n;return t.isVertexAI()?n=e?"publishers/google/models":"models":n=e?"models":"tunedModels",n}function RU(t){for(const e of["models","tunedModels","publisherModels"])if(tX(t,e))return t[e];return[]}function tX(t,e){return t!==null&&typeof t=="object"&&e in t}function nX(t,e={}){const n=t,r={name:n.name,description:n.description,parametersJsonSchema:n.inputSchema};return n.outputSchema&&(r.responseJsonSchema=n.outputSchema),e.behavior&&(r.behavior=e.behavior),{functionDeclarations:[r]}}function rX(t,e={}){const n=[],r=new Set;for(const i of t){const a=i.name;if(r.has(a))throw new Error(`Duplicate function name ${a} found in MCP tools. Please ensure function names are unique.`);r.add(a);const s=nX(i,e);s.functionDeclarations&&n.push(...s.functionDeclarations)}return{functionDeclarations:n}}function kU(t,e){let n;if(typeof e=="string")if(t.isVertexAI())if(e.startsWith("gs://"))n={format:"jsonl",gcsUri:[e]};else if(e.startsWith("bq://"))n={format:"bigquery",bigqueryUri:e};else throw new Error(`Unsupported string source for Vertex AI: ${e}`);else if(e.startsWith("files/"))n={fileName:e};else throw new Error(`Unsupported string source for Gemini API: ${e}`);else if(Array.isArray(e)){if(t.isVertexAI())throw new Error("InlinedRequest[] is not supported in Vertex AI.");n={inlinedRequests:e}}else n=e;const r=[n.gcsUri,n.bigqueryUri].filter(Boolean).length,i=[n.inlinedRequests,n.fileName].filter(Boolean).length;if(t.isVertexAI()){if(i>0||r!==1)throw new Error("Exactly one of `gcsUri` or `bigqueryUri` must be set for Vertex AI.")}else if(r>0||i!==1)throw new Error("Exactly one of `inlinedRequests`, `fileName`, must be set for Gemini API.");return n}function iX(t){if(typeof t!="string")return t;const e=t;if(e.startsWith("gs://"))return{format:"jsonl",gcsUri:e};if(e.startsWith("bq://"))return{format:"bigquery",bigqueryUri:e};throw new Error(`Unsupported destination: ${e}`)}function MU(t){if(typeof t!="object"||t===null)return{};const e=t,n=e.inlinedResponses;if(typeof n!="object"||n===null)return t;const i=n.inlinedResponses;if(!Array.isArray(i)||i.length===0)return t;let a=!1;for(const s of i){if(typeof s!="object"||s===null)continue;const c=s.response;if(typeof c!="object"||c===null)continue;if(c.embedding!==void 0){a=!0;break}}return a&&(e.inlinedEmbedContentResponses=e.inlinedResponses,delete e.inlinedResponses),t}function om(t,e){const n=e;if(!t.isVertexAI()){if(/batches\/[^/]+$/.test(n))return n.split("/").pop();throw new Error(`Invalid batch job name: ${n}.`)}if(/^projects\/[^/]+\/locations\/[^/]+\/batchPredictionJobs\/[^/]+$/.test(n))return n.split("/").pop();if(/^\d+$/.test(n))return n;throw new Error(`Invalid batch job name: ${n}.`)}function OU(t){const e=t;return e==="BATCH_STATE_UNSPECIFIED"?"JOB_STATE_UNSPECIFIED":e==="BATCH_STATE_PENDING"?"JOB_STATE_PENDING":e==="BATCH_STATE_RUNNING"?"JOB_STATE_RUNNING":e==="BATCH_STATE_SUCCEEDED"?"JOB_STATE_SUCCEEDED":e==="BATCH_STATE_FAILED"?"JOB_STATE_FAILED":e==="BATCH_STATE_CANCELLED"?"JOB_STATE_CANCELLED":e==="BATCH_STATE_EXPIRED"?"JOB_STATE_EXPIRED":e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function aX(t){const e={},n=_(t,["responsesFile"]);n!=null&&w(e,["fileName"],n);const r=_(t,["inlinedResponses","inlinedResponses"]);if(r!=null){let a=r;Array.isArray(a)&&(a=a.map(s=>UX(s))),w(e,["inlinedResponses"],a)}const i=_(t,["inlinedEmbedContentResponses","inlinedResponses"]);if(i!=null){let a=i;Array.isArray(a)&&(a=a.map(s=>s)),w(e,["inlinedEmbedContentResponses"],a)}return e}function sX(t){const e={},n=_(t,["predictionsFormat"]);n!=null&&w(e,["format"],n);const r=_(t,["gcsDestination","outputUriPrefix"]);r!=null&&w(e,["gcsUri"],r);const i=_(t,["bigqueryDestination","outputUri"]);return i!=null&&w(e,["bigqueryUri"],i),e}function oX(t){const e={},n=_(t,["format"]);n!=null&&w(e,["predictionsFormat"],n);const r=_(t,["gcsUri"]);r!=null&&w(e,["gcsDestination","outputUriPrefix"],r);const i=_(t,["bigqueryUri"]);if(i!=null&&w(e,["bigqueryDestination","outputUri"],i),_(t,["fileName"])!==void 0)throw new Error("fileName parameter is not supported in Vertex AI.");if(_(t,["inlinedResponses"])!==void 0)throw new Error("inlinedResponses parameter is not supported in Vertex AI.");if(_(t,["inlinedEmbedContentResponses"])!==void 0)throw new Error("inlinedEmbedContentResponses parameter is not supported in Vertex AI.");return e}function s0(t){const e={},n=_(t,["name"]);n!=null&&w(e,["name"],n);const r=_(t,["metadata","displayName"]);r!=null&&w(e,["displayName"],r);const i=_(t,["metadata","state"]);i!=null&&w(e,["state"],OU(i));const a=_(t,["metadata","createTime"]);a!=null&&w(e,["createTime"],a);const s=_(t,["metadata","endTime"]);s!=null&&w(e,["endTime"],s);const l=_(t,["metadata","updateTime"]);l!=null&&w(e,["updateTime"],l);const c=_(t,["metadata","model"]);c!=null&&w(e,["model"],c);const h=_(t,["metadata","output"]);return h!=null&&w(e,["dest"],aX(MU(h))),e}function i1(t){const e={},n=_(t,["name"]);n!=null&&w(e,["name"],n);const r=_(t,["displayName"]);r!=null&&w(e,["displayName"],r);const i=_(t,["state"]);i!=null&&w(e,["state"],OU(i));const a=_(t,["error"]);a!=null&&w(e,["error"],a);const s=_(t,["createTime"]);s!=null&&w(e,["createTime"],s);const l=_(t,["startTime"]);l!=null&&w(e,["startTime"],l);const c=_(t,["endTime"]);c!=null&&w(e,["endTime"],c);const h=_(t,["updateTime"]);h!=null&&w(e,["updateTime"],h);const p=_(t,["model"]);p!=null&&w(e,["model"],p);const g=_(t,["inputConfig"]);g!=null&&w(e,["src"],lX(g));const x=_(t,["outputConfig"]);x!=null&&w(e,["dest"],sX(MU(x)));const b=_(t,["completionStats"]);return b!=null&&w(e,["completionStats"],b),e}function lX(t){const e={},n=_(t,["instancesFormat"]);n!=null&&w(e,["format"],n);const r=_(t,["gcsSource","uris"]);r!=null&&w(e,["gcsUri"],r);const i=_(t,["bigquerySource","inputUri"]);return i!=null&&w(e,["bigqueryUri"],i),e}function uX(t,e){const n={};if(_(e,["format"])!==void 0)throw new Error("format parameter is not supported in Gemini API.");if(_(e,["gcsUri"])!==void 0)throw new Error("gcsUri parameter is not supported in Gemini API.");if(_(e,["bigqueryUri"])!==void 0)throw new Error("bigqueryUri parameter is not supported in Gemini API.");const r=_(e,["fileName"]);r!=null&&w(n,["fileName"],r);const i=_(e,["inlinedRequests"]);if(i!=null){let a=i;Array.isArray(a)&&(a=a.map(s=>VX(t,s))),w(n,["requests","requests"],a)}return n}function cX(t){const e={},n=_(t,["format"]);n!=null&&w(e,["instancesFormat"],n);const r=_(t,["gcsUri"]);r!=null&&w(e,["gcsSource","uris"],r);const i=_(t,["bigqueryUri"]);if(i!=null&&w(e,["bigquerySource","inputUri"],i),_(t,["fileName"])!==void 0)throw new Error("fileName parameter is not supported in Vertex AI.");if(_(t,["inlinedRequests"])!==void 0)throw new Error("inlinedRequests parameter is not supported in Vertex AI.");return e}function dX(t){const e={},n=_(t,["data"]);if(n!=null&&w(e,["data"],n),_(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const r=_(t,["mimeType"]);return r!=null&&w(e,["mimeType"],r),e}function fX(t,e){const n={},r=_(e,["name"]);return r!=null&&w(n,["_url","name"],om(t,r)),n}function hX(t,e){const n={},r=_(e,["name"]);return r!=null&&w(n,["_url","name"],om(t,r)),n}function mX(t){const e={},n=_(t,["content"]);n!=null&&w(e,["content"],n);const r=_(t,["citationMetadata"]);r!=null&&w(e,["citationMetadata"],pX(r));const i=_(t,["tokenCount"]);i!=null&&w(e,["tokenCount"],i);const a=_(t,["finishReason"]);a!=null&&w(e,["finishReason"],a);const s=_(t,["avgLogprobs"]);s!=null&&w(e,["avgLogprobs"],s);const l=_(t,["groundingMetadata"]);l!=null&&w(e,["groundingMetadata"],l);const c=_(t,["index"]);c!=null&&w(e,["index"],c);const h=_(t,["logprobsResult"]);h!=null&&w(e,["logprobsResult"],h);const p=_(t,["safetyRatings"]);if(p!=null){let x=p;Array.isArray(x)&&(x=x.map(b=>b)),w(e,["safetyRatings"],x)}const g=_(t,["urlContextMetadata"]);return g!=null&&w(e,["urlContextMetadata"],g),e}function pX(t){const e={},n=_(t,["citationSources"]);if(n!=null){let r=n;Array.isArray(r)&&(r=r.map(i=>i)),w(e,["citations"],r)}return e}function jU(t){const e={},n=_(t,["parts"]);if(n!=null){let i=n;Array.isArray(i)&&(i=i.map(a=>$X(a))),w(e,["parts"],i)}const r=_(t,["role"]);return r!=null&&w(e,["role"],r),e}function gX(t,e){const n={},r=_(t,["displayName"]);if(e!==void 0&&r!=null&&w(e,["batch","displayName"],r),_(t,["dest"])!==void 0)throw new Error("dest parameter is not supported in Gemini API.");return n}function yX(t,e){const n={},r=_(t,["displayName"]);e!==void 0&&r!=null&&w(e,["displayName"],r);const i=_(t,["dest"]);return e!==void 0&&i!=null&&w(e,["outputConfig"],oX(iX(i))),n}function aO(t,e){const n={},r=_(e,["model"]);r!=null&&w(n,["_url","model"],$t(t,r));const i=_(e,["src"]);i!=null&&w(n,["batch","inputConfig"],uX(t,kU(t,i)));const a=_(e,["config"]);return a!=null&&gX(a,n),n}function vX(t,e){const n={},r=_(e,["model"]);r!=null&&w(n,["model"],$t(t,r));const i=_(e,["src"]);i!=null&&w(n,["inputConfig"],cX(kU(t,i)));const a=_(e,["config"]);return a!=null&&yX(a,n),n}function xX(t,e){const n={},r=_(t,["displayName"]);return e!==void 0&&r!=null&&w(e,["batch","displayName"],r),n}function _X(t,e){const n={},r=_(e,["model"]);r!=null&&w(n,["_url","model"],$t(t,r));const i=_(e,["src"]);i!=null&&w(n,["batch","inputConfig"],CX(t,i));const a=_(e,["config"]);return a!=null&&xX(a,n),n}function bX(t,e){const n={},r=_(e,["name"]);return r!=null&&w(n,["_url","name"],om(t,r)),n}function wX(t,e){const n={},r=_(e,["name"]);return r!=null&&w(n,["_url","name"],om(t,r)),n}function EX(t){const e={},n=_(t,["sdkHttpResponse"]);n!=null&&w(e,["sdkHttpResponse"],n);const r=_(t,["name"]);r!=null&&w(e,["name"],r);const i=_(t,["done"]);i!=null&&w(e,["done"],i);const a=_(t,["error"]);return a!=null&&w(e,["error"],a),e}function TX(t){const e={},n=_(t,["sdkHttpResponse"]);n!=null&&w(e,["sdkHttpResponse"],n);const r=_(t,["name"]);r!=null&&w(e,["name"],r);const i=_(t,["done"]);i!=null&&w(e,["done"],i);const a=_(t,["error"]);return a!=null&&w(e,["error"],a),e}function SX(t,e){const n={},r=_(e,["contents"]);if(r!=null){let a=IC(t,r);Array.isArray(a)&&(a=a.map(s=>s)),w(n,["requests[]","request","content"],a)}const i=_(e,["config"]);return i!=null&&(w(n,["_self"],AX(i,n)),wQ(n,{"requests[].*":"requests[].request.*"})),n}function AX(t,e){const n={},r=_(t,["taskType"]);e!==void 0&&r!=null&&w(e,["requests[]","taskType"],r);const i=_(t,["title"]);e!==void 0&&i!=null&&w(e,["requests[]","title"],i);const a=_(t,["outputDimensionality"]);if(e!==void 0&&a!=null&&w(e,["requests[]","outputDimensionality"],a),_(t,["mimeType"])!==void 0)throw new Error("mimeType parameter is not supported in Gemini API.");if(_(t,["autoTruncate"])!==void 0)throw new Error("autoTruncate parameter is not supported in Gemini API.");return n}function CX(t,e){const n={},r=_(e,["fileName"]);r!=null&&w(n,["file_name"],r);const i=_(e,["inlinedRequests"]);return i!=null&&w(n,["requests"],SX(t,i)),n}function IX(t){const e={};if(_(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const n=_(t,["fileUri"]);n!=null&&w(e,["fileUri"],n);const r=_(t,["mimeType"]);return r!=null&&w(e,["mimeType"],r),e}function NX(t){const e={},n=_(t,["id"]);n!=null&&w(e,["id"],n);const r=_(t,["args"]);r!=null&&w(e,["args"],r);const i=_(t,["name"]);if(i!=null&&w(e,["name"],i),_(t,["partialArgs"])!==void 0)throw new Error("partialArgs parameter is not supported in Gemini API.");if(_(t,["willContinue"])!==void 0)throw new Error("willContinue parameter is not supported in Gemini API.");return e}function PX(t){const e={},n=_(t,["mode"]);n!=null&&w(e,["mode"],n);const r=_(t,["allowedFunctionNames"]);if(r!=null&&w(e,["allowedFunctionNames"],r),_(t,["streamFunctionCallArguments"])!==void 0)throw new Error("streamFunctionCallArguments parameter is not supported in Gemini API.");return e}function DX(t,e,n){const r={},i=_(e,["systemInstruction"]);n!==void 0&&i!=null&&w(n,["systemInstruction"],jU(Ei(i)));const a=_(e,["temperature"]);a!=null&&w(r,["temperature"],a);const s=_(e,["topP"]);s!=null&&w(r,["topP"],s);const l=_(e,["topK"]);l!=null&&w(r,["topK"],l);const c=_(e,["candidateCount"]);c!=null&&w(r,["candidateCount"],c);const h=_(e,["maxOutputTokens"]);h!=null&&w(r,["maxOutputTokens"],h);const p=_(e,["stopSequences"]);p!=null&&w(r,["stopSequences"],p);const g=_(e,["responseLogprobs"]);g!=null&&w(r,["responseLogprobs"],g);const x=_(e,["logprobs"]);x!=null&&w(r,["logprobs"],x);const b=_(e,["presencePenalty"]);b!=null&&w(r,["presencePenalty"],b);const C=_(e,["frequencyPenalty"]);C!=null&&w(r,["frequencyPenalty"],C);const A=_(e,["seed"]);A!=null&&w(r,["seed"],A);const D=_(e,["responseMimeType"]);D!=null&&w(r,["responseMimeType"],D);const R=_(e,["responseSchema"]);R!=null&&w(r,["responseSchema"],NC(R));const j=_(e,["responseJsonSchema"]);if(j!=null&&w(r,["responseJsonSchema"],j),_(e,["routingConfig"])!==void 0)throw new Error("routingConfig parameter is not supported in Gemini API.");if(_(e,["modelSelectionConfig"])!==void 0)throw new Error("modelSelectionConfig parameter is not supported in Gemini API.");const O=_(e,["safetySettings"]);if(n!==void 0&&O!=null){let J=O;Array.isArray(J)&&(J=J.map(G=>KX(G))),w(n,["safetySettings"],J)}const q=_(e,["tools"]);if(n!==void 0&&q!=null){let J=sm(q);Array.isArray(J)&&(J=J.map(G=>YX(am(G)))),w(n,["tools"],J)}const $=_(e,["toolConfig"]);if(n!==void 0&&$!=null&&w(n,["toolConfig"],WX($)),_(e,["labels"])!==void 0)throw new Error("labels parameter is not supported in Gemini API.");const H=_(e,["cachedContent"]);n!==void 0&&H!=null&&w(n,["cachedContent"],Gl(t,H));const U=_(e,["responseModalities"]);U!=null&&w(r,["responseModalities"],U);const z=_(e,["mediaResolution"]);z!=null&&w(r,["mediaResolution"],z);const B=_(e,["speechConfig"]);if(B!=null&&w(r,["speechConfig"],PC(B)),_(e,["audioTimestamp"])!==void 0)throw new Error("audioTimestamp parameter is not supported in Gemini API.");const Z=_(e,["thinkingConfig"]);Z!=null&&w(r,["thinkingConfig"],Z);const K=_(e,["imageConfig"]);return K!=null&&w(r,["imageConfig"],LX(K)),r}function RX(t){const e={},n=_(t,["sdkHttpResponse"]);n!=null&&w(e,["sdkHttpResponse"],n);const r=_(t,["candidates"]);if(r!=null){let c=r;Array.isArray(c)&&(c=c.map(h=>mX(h))),w(e,["candidates"],c)}const i=_(t,["modelVersion"]);i!=null&&w(e,["modelVersion"],i);const a=_(t,["promptFeedback"]);a!=null&&w(e,["promptFeedback"],a);const s=_(t,["responseId"]);s!=null&&w(e,["responseId"],s);const l=_(t,["usageMetadata"]);return l!=null&&w(e,["usageMetadata"],l),e}function kX(t,e){const n={},r=_(e,["name"]);return r!=null&&w(n,["_url","name"],om(t,r)),n}function MX(t,e){const n={},r=_(e,["name"]);return r!=null&&w(n,["_url","name"],om(t,r)),n}function OX(t){const e={};if(_(t,["authConfig"])!==void 0)throw new Error("authConfig parameter is not supported in Gemini API.");const n=_(t,["enableWidget"]);return n!=null&&w(e,["enableWidget"],n),e}function jX(t){const e={};if(_(t,["excludeDomains"])!==void 0)throw new Error("excludeDomains parameter is not supported in Gemini API.");if(_(t,["blockingConfidence"])!==void 0)throw new Error("blockingConfidence parameter is not supported in Gemini API.");const n=_(t,["timeRangeFilter"]);return n!=null&&w(e,["timeRangeFilter"],n),e}function LX(t){const e={},n=_(t,["aspectRatio"]);n!=null&&w(e,["aspectRatio"],n);const r=_(t,["imageSize"]);if(r!=null&&w(e,["imageSize"],r),_(t,["outputMimeType"])!==void 0)throw new Error("outputMimeType parameter is not supported in Gemini API.");if(_(t,["outputCompressionQuality"])!==void 0)throw new Error("outputCompressionQuality parameter is not supported in Gemini API.");return e}function VX(t,e){const n={},r=_(e,["model"]);r!=null&&w(n,["request","model"],$t(t,r));const i=_(e,["contents"]);if(i!=null){let l=hs(i);Array.isArray(l)&&(l=l.map(c=>jU(c))),w(n,["request","contents"],l)}const a=_(e,["metadata"]);a!=null&&w(n,["metadata"],a);const s=_(e,["config"]);return s!=null&&w(n,["request","generationConfig"],DX(t,s,_(n,["request"],{}))),n}function UX(t){const e={},n=_(t,["response"]);n!=null&&w(e,["response"],RX(n));const r=_(t,["error"]);return r!=null&&w(e,["error"],r),e}function FX(t,e){const n={},r=_(t,["pageSize"]);e!==void 0&&r!=null&&w(e,["_query","pageSize"],r);const i=_(t,["pageToken"]);if(e!==void 0&&i!=null&&w(e,["_query","pageToken"],i),_(t,["filter"])!==void 0)throw new Error("filter parameter is not supported in Gemini API.");return n}function BX(t,e){const n={},r=_(t,["pageSize"]);e!==void 0&&r!=null&&w(e,["_query","pageSize"],r);const i=_(t,["pageToken"]);e!==void 0&&i!=null&&w(e,["_query","pageToken"],i);const a=_(t,["filter"]);return e!==void 0&&a!=null&&w(e,["_query","filter"],a),n}function zX(t){const e={},n=_(t,["config"]);return n!=null&&FX(n,e),e}function qX(t){const e={},n=_(t,["config"]);return n!=null&&BX(n,e),e}function HX(t){const e={},n=_(t,["sdkHttpResponse"]);n!=null&&w(e,["sdkHttpResponse"],n);const r=_(t,["nextPageToken"]);r!=null&&w(e,["nextPageToken"],r);const i=_(t,["operations"]);if(i!=null){let a=i;Array.isArray(a)&&(a=a.map(s=>s0(s))),w(e,["batchJobs"],a)}return e}function GX(t){const e={},n=_(t,["sdkHttpResponse"]);n!=null&&w(e,["sdkHttpResponse"],n);const r=_(t,["nextPageToken"]);r!=null&&w(e,["nextPageToken"],r);const i=_(t,["batchPredictionJobs"]);if(i!=null){let a=i;Array.isArray(a)&&(a=a.map(s=>i1(s))),w(e,["batchJobs"],a)}return e}function $X(t){const e={},n=_(t,["mediaResolution"]);n!=null&&w(e,["mediaResolution"],n);const r=_(t,["codeExecutionResult"]);r!=null&&w(e,["codeExecutionResult"],r);const i=_(t,["executableCode"]);i!=null&&w(e,["executableCode"],i);const a=_(t,["fileData"]);a!=null&&w(e,["fileData"],IX(a));const s=_(t,["functionCall"]);s!=null&&w(e,["functionCall"],NX(s));const l=_(t,["functionResponse"]);l!=null&&w(e,["functionResponse"],l);const c=_(t,["inlineData"]);c!=null&&w(e,["inlineData"],dX(c));const h=_(t,["text"]);h!=null&&w(e,["text"],h);const p=_(t,["thought"]);p!=null&&w(e,["thought"],p);const g=_(t,["thoughtSignature"]);g!=null&&w(e,["thoughtSignature"],g);const x=_(t,["videoMetadata"]);return x!=null&&w(e,["videoMetadata"],x),e}function KX(t){const e={},n=_(t,["category"]);if(n!=null&&w(e,["category"],n),_(t,["method"])!==void 0)throw new Error("method parameter is not supported in Gemini API.");const r=_(t,["threshold"]);return r!=null&&w(e,["threshold"],r),e}function WX(t){const e={},n=_(t,["functionCallingConfig"]);n!=null&&w(e,["functionCallingConfig"],PX(n));const r=_(t,["retrievalConfig"]);return r!=null&&w(e,["retrievalConfig"],r),e}function YX(t){const e={},n=_(t,["functionDeclarations"]);if(n!=null){let p=n;Array.isArray(p)&&(p=p.map(g=>g)),w(e,["functionDeclarations"],p)}if(_(t,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");const r=_(t,["googleSearchRetrieval"]);r!=null&&w(e,["googleSearchRetrieval"],r);const i=_(t,["computerUse"]);i!=null&&w(e,["computerUse"],i);const a=_(t,["fileSearch"]);a!=null&&w(e,["fileSearch"],a);const s=_(t,["codeExecution"]);if(s!=null&&w(e,["codeExecution"],s),_(t,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");const l=_(t,["googleMaps"]);l!=null&&w(e,["googleMaps"],OX(l));const c=_(t,["googleSearch"]);c!=null&&w(e,["googleSearch"],jX(c));const h=_(t,["urlContext"]);return h!=null&&w(e,["urlContext"],h),e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */var Rl;(function(t){t.PAGED_ITEM_BATCH_JOBS="batchJobs",t.PAGED_ITEM_MODELS="models",t.PAGED_ITEM_TUNING_JOBS="tuningJobs",t.PAGED_ITEM_FILES="files",t.PAGED_ITEM_CACHED_CONTENTS="cachedContents",t.PAGED_ITEM_FILE_SEARCH_STORES="fileSearchStores",t.PAGED_ITEM_DOCUMENTS="documents"})(Rl||(Rl={}));class $d{constructor(e,n,r,i){this.pageInternal=[],this.paramsInternal={},this.requestInternal=n,this.init(e,r,i)}init(e,n,r){var i,a;this.nameInternal=e,this.pageInternal=n[this.nameInternal]||[],this.sdkHttpResponseInternal=n==null?void 0:n.sdkHttpResponse,this.idxInternal=0;let s={config:{}};!r||Object.keys(r).length===0?s={config:{}}:typeof r=="object"?s=Object.assign({},r):s=r,s.config&&(s.config.pageToken=n.nextPageToken),this.paramsInternal=s,this.pageInternalSize=(a=(i=s.config)===null||i===void 0?void 0:i.pageSize)!==null&&a!==void 0?a:this.pageInternal.length}initNextPage(e){this.init(this.nameInternal,e,this.paramsInternal)}get page(){return this.pageInternal}get name(){return this.nameInternal}get pageSize(){return this.pageInternalSize}get sdkHttpResponse(){return this.sdkHttpResponseInternal}get params(){return this.paramsInternal}get pageLength(){return this.pageInternal.length}getItem(e){return this.pageInternal[e]}[Symbol.asyncIterator](){return{next:async()=>{if(this.idxInternal>=this.pageLength)if(this.hasNextPage())await this.nextPage();else return{value:void 0,done:!0};const e=this.getItem(this.idxInternal);return this.idxInternal+=1,{value:e,done:!1}},return:async()=>({value:void 0,done:!0})}}async nextPage(){if(!this.hasNextPage())throw new Error("No more pages to fetch.");const e=await this.requestInternal(this.params);return this.initNextPage(e),this.page}hasNextPage(){var e;return((e=this.params.config)===null||e===void 0?void 0:e.pageToken)!==void 0}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class ZX extends Hl{constructor(e){super(),this.apiClient=e,this.create=async n=>(this.apiClient.isVertexAI()&&(n.config=this.formatDestination(n.src,n.config)),this.createInternal(n)),this.createEmbeddings=async n=>{if(console.warn("batches.createEmbeddings() is experimental and may change without notice."),this.apiClient.isVertexAI())throw new Error("Vertex AI does not support batches.createEmbeddings.");return this.createEmbeddingsInternal(n)},this.list=async(n={})=>new $d(Rl.PAGED_ITEM_BATCH_JOBS,r=>this.listInternal(r),await this.listInternal(n),n)}createInlinedGenerateContentRequest(e){const n=aO(this.apiClient,e),r=n._url,i=qe("{model}:batchGenerateContent",r),l=n.batch.inputConfig.requests,c=l.requests,h=[];for(const p of c){const g=Object.assign({},p);if(g.systemInstruction){const x=g.systemInstruction;delete g.systemInstruction;const b=g.request;b.systemInstruction=x,g.request=b}h.push(g)}return l.requests=h,delete n.config,delete n._url,delete n._query,{path:i,body:n}}getGcsUri(e){if(typeof e=="string")return e.startsWith("gs://")?e:void 0;if(!Array.isArray(e)&&e.gcsUri&&e.gcsUri.length>0)return e.gcsUri[0]}getBigqueryUri(e){if(typeof e=="string")return e.startsWith("bq://")?e:void 0;if(!Array.isArray(e))return e.bigqueryUri}formatDestination(e,n){const r=n?Object.assign({},n):{},i=Date.now().toString();if(r.displayName||(r.displayName=`genaiBatchJob_${i}`),r.dest===void 0){const a=this.getGcsUri(e),s=this.getBigqueryUri(e);if(a)a.endsWith(".jsonl")?r.dest=`${a.slice(0,-6)}/dest`:r.dest=`${a}_dest_${i}`;else if(s)r.dest=`${s}_dest_${i}`;else throw new Error("Unsupported source for Vertex AI: No GCS or BigQuery URI found.")}return r}async createInternal(e){var n,r,i,a;let s,l="",c={};if(this.apiClient.isVertexAI()){const h=vX(this.apiClient,e);return l=qe("batchPredictionJobs",h._url),c=h._query,delete h._url,delete h._query,s=this.apiClient.request({path:l,queryParams:c,body:JSON.stringify(h),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(p=>p.json()),s.then(p=>i1(p))}else{const h=aO(this.apiClient,e);return l=qe("{model}:batchGenerateContent",h._url),c=h._query,delete h._url,delete h._query,s=this.apiClient.request({path:l,queryParams:c,body:JSON.stringify(h),httpMethod:"POST",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(p=>p.json()),s.then(p=>s0(p))}}async createEmbeddingsInternal(e){var n,r;let i,a="",s={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const l=_X(this.apiClient,e);return a=qe("{model}:asyncBatchEmbedContent",l._url),s=l._query,delete l._url,delete l._query,i=this.apiClient.request({path:a,queryParams:s,body:JSON.stringify(l),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(c=>c.json()),i.then(c=>s0(c))}}async get(e){var n,r,i,a;let s,l="",c={};if(this.apiClient.isVertexAI()){const h=MX(this.apiClient,e);return l=qe("batchPredictionJobs/{name}",h._url),c=h._query,delete h._url,delete h._query,s=this.apiClient.request({path:l,queryParams:c,body:JSON.stringify(h),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(p=>p.json()),s.then(p=>i1(p))}else{const h=kX(this.apiClient,e);return l=qe("batches/{name}",h._url),c=h._query,delete h._url,delete h._query,s=this.apiClient.request({path:l,queryParams:c,body:JSON.stringify(h),httpMethod:"GET",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(p=>p.json()),s.then(p=>s0(p))}}async cancel(e){var n,r,i,a;let s="",l={};if(this.apiClient.isVertexAI()){const c=hX(this.apiClient,e);s=qe("batchPredictionJobs/{name}:cancel",c._url),l=c._query,delete c._url,delete c._query,await this.apiClient.request({path:s,queryParams:l,body:JSON.stringify(c),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal})}else{const c=fX(this.apiClient,e);s=qe("batches/{name}:cancel",c._url),l=c._query,delete c._url,delete c._query,await this.apiClient.request({path:s,queryParams:l,body:JSON.stringify(c),httpMethod:"POST",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal})}}async listInternal(e){var n,r,i,a;let s,l="",c={};if(this.apiClient.isVertexAI()){const h=qX(e);return l=qe("batchPredictionJobs",h._url),c=h._query,delete h._url,delete h._query,s=this.apiClient.request({path:l,queryParams:c,body:JSON.stringify(h),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(p=>p.json().then(g=>{const x=g;return x.sdkHttpResponse={headers:p.headers},x})),s.then(p=>{const g=GX(p),x=new tO;return Object.assign(x,g),x})}else{const h=zX(e);return l=qe("batches",h._url),c=h._query,delete h._url,delete h._query,s=this.apiClient.request({path:l,queryParams:c,body:JSON.stringify(h),httpMethod:"GET",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(p=>p.json().then(g=>{const x=g;return x.sdkHttpResponse={headers:p.headers},x})),s.then(p=>{const g=HX(p),x=new tO;return Object.assign(x,g),x})}}async delete(e){var n,r,i,a;let s,l="",c={};if(this.apiClient.isVertexAI()){const h=wX(this.apiClient,e);return l=qe("batchPredictionJobs/{name}",h._url),c=h._query,delete h._url,delete h._query,s=this.apiClient.request({path:l,queryParams:c,body:JSON.stringify(h),httpMethod:"DELETE",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(p=>p.json().then(g=>{const x=g;return x.sdkHttpResponse={headers:p.headers},x})),s.then(p=>TX(p))}else{const h=bX(this.apiClient,e);return l=qe("batches/{name}",h._url),c=h._query,delete h._url,delete h._query,s=this.apiClient.request({path:l,queryParams:c,body:JSON.stringify(h),httpMethod:"DELETE",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(p=>p.json().then(g=>{const x=g;return x.sdkHttpResponse={headers:p.headers},x})),s.then(p=>EX(p))}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function JX(t){const e={},n=_(t,["data"]);if(n!=null&&w(e,["data"],n),_(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const r=_(t,["mimeType"]);return r!=null&&w(e,["mimeType"],r),e}function sO(t){const e={},n=_(t,["parts"]);if(n!=null){let i=n;Array.isArray(i)&&(i=i.map(a=>_ee(a))),w(e,["parts"],i)}const r=_(t,["role"]);return r!=null&&w(e,["role"],r),e}function QX(t,e){const n={},r=_(t,["ttl"]);e!==void 0&&r!=null&&w(e,["ttl"],r);const i=_(t,["expireTime"]);e!==void 0&&i!=null&&w(e,["expireTime"],i);const a=_(t,["displayName"]);e!==void 0&&a!=null&&w(e,["displayName"],a);const s=_(t,["contents"]);if(e!==void 0&&s!=null){let p=hs(s);Array.isArray(p)&&(p=p.map(g=>sO(g))),w(e,["contents"],p)}const l=_(t,["systemInstruction"]);e!==void 0&&l!=null&&w(e,["systemInstruction"],sO(Ei(l)));const c=_(t,["tools"]);if(e!==void 0&&c!=null){let p=c;Array.isArray(p)&&(p=p.map(g=>wee(g))),w(e,["tools"],p)}const h=_(t,["toolConfig"]);if(e!==void 0&&h!=null&&w(e,["toolConfig"],bee(h)),_(t,["kmsKeyName"])!==void 0)throw new Error("kmsKeyName parameter is not supported in Gemini API.");return n}function XX(t,e){const n={},r=_(t,["ttl"]);e!==void 0&&r!=null&&w(e,["ttl"],r);const i=_(t,["expireTime"]);e!==void 0&&i!=null&&w(e,["expireTime"],i);const a=_(t,["displayName"]);e!==void 0&&a!=null&&w(e,["displayName"],a);const s=_(t,["contents"]);if(e!==void 0&&s!=null){let g=hs(s);Array.isArray(g)&&(g=g.map(x=>x)),w(e,["contents"],g)}const l=_(t,["systemInstruction"]);e!==void 0&&l!=null&&w(e,["systemInstruction"],Ei(l));const c=_(t,["tools"]);if(e!==void 0&&c!=null){let g=c;Array.isArray(g)&&(g=g.map(x=>Eee(x))),w(e,["tools"],g)}const h=_(t,["toolConfig"]);e!==void 0&&h!=null&&w(e,["toolConfig"],h);const p=_(t,["kmsKeyName"]);return e!==void 0&&p!=null&&w(e,["encryption_spec","kmsKeyName"],p),n}function eee(t,e){const n={},r=_(e,["model"]);r!=null&&w(n,["model"],TU(t,r));const i=_(e,["config"]);return i!=null&&QX(i,n),n}function tee(t,e){const n={},r=_(e,["model"]);r!=null&&w(n,["model"],TU(t,r));const i=_(e,["config"]);return i!=null&&XX(i,n),n}function nee(t,e){const n={},r=_(e,["name"]);return r!=null&&w(n,["_url","name"],Gl(t,r)),n}function ree(t,e){const n={},r=_(e,["name"]);return r!=null&&w(n,["_url","name"],Gl(t,r)),n}function iee(t){const e={},n=_(t,["sdkHttpResponse"]);return n!=null&&w(e,["sdkHttpResponse"],n),e}function aee(t){const e={},n=_(t,["sdkHttpResponse"]);return n!=null&&w(e,["sdkHttpResponse"],n),e}function see(t){const e={};if(_(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const n=_(t,["fileUri"]);n!=null&&w(e,["fileUri"],n);const r=_(t,["mimeType"]);return r!=null&&w(e,["mimeType"],r),e}function oee(t){const e={},n=_(t,["id"]);n!=null&&w(e,["id"],n);const r=_(t,["args"]);r!=null&&w(e,["args"],r);const i=_(t,["name"]);if(i!=null&&w(e,["name"],i),_(t,["partialArgs"])!==void 0)throw new Error("partialArgs parameter is not supported in Gemini API.");if(_(t,["willContinue"])!==void 0)throw new Error("willContinue parameter is not supported in Gemini API.");return e}function lee(t){const e={},n=_(t,["mode"]);n!=null&&w(e,["mode"],n);const r=_(t,["allowedFunctionNames"]);if(r!=null&&w(e,["allowedFunctionNames"],r),_(t,["streamFunctionCallArguments"])!==void 0)throw new Error("streamFunctionCallArguments parameter is not supported in Gemini API.");return e}function uee(t){const e={};if(_(t,["behavior"])!==void 0)throw new Error("behavior parameter is not supported in Vertex AI.");const n=_(t,["description"]);n!=null&&w(e,["description"],n);const r=_(t,["name"]);r!=null&&w(e,["name"],r);const i=_(t,["parameters"]);i!=null&&w(e,["parameters"],i);const a=_(t,["parametersJsonSchema"]);a!=null&&w(e,["parametersJsonSchema"],a);const s=_(t,["response"]);s!=null&&w(e,["response"],s);const l=_(t,["responseJsonSchema"]);return l!=null&&w(e,["responseJsonSchema"],l),e}function cee(t,e){const n={},r=_(e,["name"]);return r!=null&&w(n,["_url","name"],Gl(t,r)),n}function dee(t,e){const n={},r=_(e,["name"]);return r!=null&&w(n,["_url","name"],Gl(t,r)),n}function fee(t){const e={};if(_(t,["authConfig"])!==void 0)throw new Error("authConfig parameter is not supported in Gemini API.");const n=_(t,["enableWidget"]);return n!=null&&w(e,["enableWidget"],n),e}function hee(t){const e={};if(_(t,["excludeDomains"])!==void 0)throw new Error("excludeDomains parameter is not supported in Gemini API.");if(_(t,["blockingConfidence"])!==void 0)throw new Error("blockingConfidence parameter is not supported in Gemini API.");const n=_(t,["timeRangeFilter"]);return n!=null&&w(e,["timeRangeFilter"],n),e}function mee(t,e){const n={},r=_(t,["pageSize"]);e!==void 0&&r!=null&&w(e,["_query","pageSize"],r);const i=_(t,["pageToken"]);return e!==void 0&&i!=null&&w(e,["_query","pageToken"],i),n}function pee(t,e){const n={},r=_(t,["pageSize"]);e!==void 0&&r!=null&&w(e,["_query","pageSize"],r);const i=_(t,["pageToken"]);return e!==void 0&&i!=null&&w(e,["_query","pageToken"],i),n}function gee(t){const e={},n=_(t,["config"]);return n!=null&&mee(n,e),e}function yee(t){const e={},n=_(t,["config"]);return n!=null&&pee(n,e),e}function vee(t){const e={},n=_(t,["sdkHttpResponse"]);n!=null&&w(e,["sdkHttpResponse"],n);const r=_(t,["nextPageToken"]);r!=null&&w(e,["nextPageToken"],r);const i=_(t,["cachedContents"]);if(i!=null){let a=i;Array.isArray(a)&&(a=a.map(s=>s)),w(e,["cachedContents"],a)}return e}function xee(t){const e={},n=_(t,["sdkHttpResponse"]);n!=null&&w(e,["sdkHttpResponse"],n);const r=_(t,["nextPageToken"]);r!=null&&w(e,["nextPageToken"],r);const i=_(t,["cachedContents"]);if(i!=null){let a=i;Array.isArray(a)&&(a=a.map(s=>s)),w(e,["cachedContents"],a)}return e}function _ee(t){const e={},n=_(t,["mediaResolution"]);n!=null&&w(e,["mediaResolution"],n);const r=_(t,["codeExecutionResult"]);r!=null&&w(e,["codeExecutionResult"],r);const i=_(t,["executableCode"]);i!=null&&w(e,["executableCode"],i);const a=_(t,["fileData"]);a!=null&&w(e,["fileData"],see(a));const s=_(t,["functionCall"]);s!=null&&w(e,["functionCall"],oee(s));const l=_(t,["functionResponse"]);l!=null&&w(e,["functionResponse"],l);const c=_(t,["inlineData"]);c!=null&&w(e,["inlineData"],JX(c));const h=_(t,["text"]);h!=null&&w(e,["text"],h);const p=_(t,["thought"]);p!=null&&w(e,["thought"],p);const g=_(t,["thoughtSignature"]);g!=null&&w(e,["thoughtSignature"],g);const x=_(t,["videoMetadata"]);return x!=null&&w(e,["videoMetadata"],x),e}function bee(t){const e={},n=_(t,["functionCallingConfig"]);n!=null&&w(e,["functionCallingConfig"],lee(n));const r=_(t,["retrievalConfig"]);return r!=null&&w(e,["retrievalConfig"],r),e}function wee(t){const e={},n=_(t,["functionDeclarations"]);if(n!=null){let p=n;Array.isArray(p)&&(p=p.map(g=>g)),w(e,["functionDeclarations"],p)}if(_(t,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");const r=_(t,["googleSearchRetrieval"]);r!=null&&w(e,["googleSearchRetrieval"],r);const i=_(t,["computerUse"]);i!=null&&w(e,["computerUse"],i);const a=_(t,["fileSearch"]);a!=null&&w(e,["fileSearch"],a);const s=_(t,["codeExecution"]);if(s!=null&&w(e,["codeExecution"],s),_(t,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");const l=_(t,["googleMaps"]);l!=null&&w(e,["googleMaps"],fee(l));const c=_(t,["googleSearch"]);c!=null&&w(e,["googleSearch"],hee(c));const h=_(t,["urlContext"]);return h!=null&&w(e,["urlContext"],h),e}function Eee(t){const e={},n=_(t,["functionDeclarations"]);if(n!=null){let g=n;Array.isArray(g)&&(g=g.map(x=>uee(x))),w(e,["functionDeclarations"],g)}const r=_(t,["retrieval"]);r!=null&&w(e,["retrieval"],r);const i=_(t,["googleSearchRetrieval"]);i!=null&&w(e,["googleSearchRetrieval"],i);const a=_(t,["computerUse"]);if(a!=null&&w(e,["computerUse"],a),_(t,["fileSearch"])!==void 0)throw new Error("fileSearch parameter is not supported in Vertex AI.");const s=_(t,["codeExecution"]);s!=null&&w(e,["codeExecution"],s);const l=_(t,["enterpriseWebSearch"]);l!=null&&w(e,["enterpriseWebSearch"],l);const c=_(t,["googleMaps"]);c!=null&&w(e,["googleMaps"],c);const h=_(t,["googleSearch"]);h!=null&&w(e,["googleSearch"],h);const p=_(t,["urlContext"]);return p!=null&&w(e,["urlContext"],p),e}function Tee(t,e){const n={},r=_(t,["ttl"]);e!==void 0&&r!=null&&w(e,["ttl"],r);const i=_(t,["expireTime"]);return e!==void 0&&i!=null&&w(e,["expireTime"],i),n}function See(t,e){const n={},r=_(t,["ttl"]);e!==void 0&&r!=null&&w(e,["ttl"],r);const i=_(t,["expireTime"]);return e!==void 0&&i!=null&&w(e,["expireTime"],i),n}function Aee(t,e){const n={},r=_(e,["name"]);r!=null&&w(n,["_url","name"],Gl(t,r));const i=_(e,["config"]);return i!=null&&Tee(i,n),n}function Cee(t,e){const n={},r=_(e,["name"]);r!=null&&w(n,["_url","name"],Gl(t,r));const i=_(e,["config"]);return i!=null&&See(i,n),n}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class Iee extends Hl{constructor(e){super(),this.apiClient=e,this.list=async(n={})=>new $d(Rl.PAGED_ITEM_CACHED_CONTENTS,r=>this.listInternal(r),await this.listInternal(n),n)}async create(e){var n,r,i,a;let s,l="",c={};if(this.apiClient.isVertexAI()){const h=tee(this.apiClient,e);return l=qe("cachedContents",h._url),c=h._query,delete h._url,delete h._query,s=this.apiClient.request({path:l,queryParams:c,body:JSON.stringify(h),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(p=>p.json()),s.then(p=>p)}else{const h=eee(this.apiClient,e);return l=qe("cachedContents",h._url),c=h._query,delete h._url,delete h._query,s=this.apiClient.request({path:l,queryParams:c,body:JSON.stringify(h),httpMethod:"POST",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(p=>p.json()),s.then(p=>p)}}async get(e){var n,r,i,a;let s,l="",c={};if(this.apiClient.isVertexAI()){const h=dee(this.apiClient,e);return l=qe("{name}",h._url),c=h._query,delete h._url,delete h._query,s=this.apiClient.request({path:l,queryParams:c,body:JSON.stringify(h),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(p=>p.json()),s.then(p=>p)}else{const h=cee(this.apiClient,e);return l=qe("{name}",h._url),c=h._query,delete h._url,delete h._query,s=this.apiClient.request({path:l,queryParams:c,body:JSON.stringify(h),httpMethod:"GET",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(p=>p.json()),s.then(p=>p)}}async delete(e){var n,r,i,a;let s,l="",c={};if(this.apiClient.isVertexAI()){const h=ree(this.apiClient,e);return l=qe("{name}",h._url),c=h._query,delete h._url,delete h._query,s=this.apiClient.request({path:l,queryParams:c,body:JSON.stringify(h),httpMethod:"DELETE",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(p=>p.json().then(g=>{const x=g;return x.sdkHttpResponse={headers:p.headers},x})),s.then(p=>{const g=aee(p),x=new XM;return Object.assign(x,g),x})}else{const h=nee(this.apiClient,e);return l=qe("{name}",h._url),c=h._query,delete h._url,delete h._query,s=this.apiClient.request({path:l,queryParams:c,body:JSON.stringify(h),httpMethod:"DELETE",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(p=>p.json().then(g=>{const x=g;return x.sdkHttpResponse={headers:p.headers},x})),s.then(p=>{const g=iee(p),x=new XM;return Object.assign(x,g),x})}}async update(e){var n,r,i,a;let s,l="",c={};if(this.apiClient.isVertexAI()){const h=Cee(this.apiClient,e);return l=qe("{name}",h._url),c=h._query,delete h._url,delete h._query,s=this.apiClient.request({path:l,queryParams:c,body:JSON.stringify(h),httpMethod:"PATCH",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(p=>p.json()),s.then(p=>p)}else{const h=Aee(this.apiClient,e);return l=qe("{name}",h._url),c=h._query,delete h._url,delete h._query,s=this.apiClient.request({path:l,queryParams:c,body:JSON.stringify(h),httpMethod:"PATCH",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(p=>p.json()),s.then(p=>p)}}async listInternal(e){var n,r,i,a;let s,l="",c={};if(this.apiClient.isVertexAI()){const h=yee(e);return l=qe("cachedContents",h._url),c=h._query,delete h._url,delete h._query,s=this.apiClient.request({path:l,queryParams:c,body:JSON.stringify(h),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(p=>p.json().then(g=>{const x=g;return x.sdkHttpResponse={headers:p.headers},x})),s.then(p=>{const g=xee(p),x=new eO;return Object.assign(x,g),x})}else{const h=gee(e);return l=qe("cachedContents",h._url),c=h._query,delete h._url,delete h._query,s=this.apiClient.request({path:l,queryParams:c,body:JSON.stringify(h),httpMethod:"GET",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(p=>p.json().then(g=>{const x=g;return x.sdkHttpResponse={headers:p.headers},x})),s.then(p=>{const g=vee(p),x=new eO;return Object.assign(x,g),x})}}}function oO(t){var e=typeof Symbol=="function"&&Symbol.iterator,n=e&&t[e],r=0;if(n)return n.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&r>=t.length&&(t=void 0),{value:t&&t[r++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}function Sn(t){return this instanceof Sn?(this.v=t,this):new Sn(t)}function lh(t,e,n){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var r=n.apply(t,e||[]),i,a=[];return i=Object.create((typeof AsyncIterator=="function"?AsyncIterator:Object).prototype),l("next"),l("throw"),l("return",s),i[Symbol.asyncIterator]=function(){return this},i;function s(b){return function(C){return Promise.resolve(C).then(b,g)}}function l(b,C){r[b]&&(i[b]=function(A){return new Promise(function(D,R){a.push([b,A,D,R])>1||c(b,A)})},C&&(i[b]=C(i[b])))}function c(b,C){try{h(r[b](C))}catch(A){x(a[0][3],A)}}function h(b){b.value instanceof Sn?Promise.resolve(b.value.v).then(p,g):x(a[0][2],b)}function p(b){c("next",b)}function g(b){c("throw",b)}function x(b,C){b(C),a.shift(),a.length&&c(a[0][0],a[0][1])}}function jp(t){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var e=t[Symbol.asyncIterator],n;return e?e.call(t):(t=typeof oO=="function"?oO(t):t[Symbol.iterator](),n={},r("next"),r("throw"),r("return"),n[Symbol.asyncIterator]=function(){return this},n);function r(a){n[a]=t[a]&&function(s){return new Promise(function(l,c){s=t[a](s),i(l,c,s.done,s.value)})}}function i(a,s,l,c){Promise.resolve(c).then(function(h){a({value:h,done:l})},s)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function Nee(t){var e;if(t.candidates==null||t.candidates.length===0)return!1;const n=(e=t.candidates[0])===null||e===void 0?void 0:e.content;return n===void 0?!1:LU(n)}function LU(t){if(t.parts===void 0||t.parts.length===0)return!1;for(const e of t.parts)if(e===void 0||Object.keys(e).length===0)return!1;return!0}function Pee(t){if(t.length!==0){for(const e of t)if(e.role!=="user"&&e.role!=="model")throw new Error(`Role must be user or model, but got ${e.role}.`)}}function lO(t){if(t===void 0||t.length===0)return[];const e=[],n=t.length;let r=0;for(;r<n;)if(t[r].role==="user")e.push(t[r]),r++;else{const i=[];let a=!0;for(;r<n&&t[r].role==="model";)i.push(t[r]),a&&!LU(t[r])&&(a=!1),r++;a?e.push(...i):e.pop()}return e}class Dee{constructor(e,n){this.modelsModule=e,this.apiClient=n}create(e){return new Ree(this.apiClient,this.modelsModule,e.model,e.config,structuredClone(e.history))}}class Ree{constructor(e,n,r,i={},a=[]){this.apiClient=e,this.modelsModule=n,this.model=r,this.config=i,this.history=a,this.sendPromise=Promise.resolve(),Pee(a)}async sendMessage(e){var n;await this.sendPromise;const r=Ei(e.message),i=this.modelsModule.generateContent({model:this.model,contents:this.getHistory(!0).concat(r),config:(n=e.config)!==null&&n!==void 0?n:this.config});return this.sendPromise=(async()=>{var a,s,l;const c=await i,h=(s=(a=c.candidates)===null||a===void 0?void 0:a[0])===null||s===void 0?void 0:s.content,p=c.automaticFunctionCallingHistory,g=this.getHistory(!0).length;let x=[];p!=null&&(x=(l=p.slice(g))!==null&&l!==void 0?l:[]);const b=h?[h]:[];this.recordHistory(r,b,x)})(),await this.sendPromise.catch(()=>{this.sendPromise=Promise.resolve()}),i}async sendMessageStream(e){var n;await this.sendPromise;const r=Ei(e.message),i=this.modelsModule.generateContentStream({model:this.model,contents:this.getHistory(!0).concat(r),config:(n=e.config)!==null&&n!==void 0?n:this.config});this.sendPromise=i.then(()=>{}).catch(()=>{});const a=await i;return this.processStreamResponse(a,r)}getHistory(e=!1){const n=e?lO(this.history):this.history;return structuredClone(n)}processStreamResponse(e,n){var r,i;return lh(this,arguments,function*(){var s,l,c,h;const p=[];try{for(var g=!0,x=jp(e),b;b=yield Sn(x.next()),s=b.done,!s;g=!0){h=b.value,g=!1;const C=h;if(Nee(C)){const A=(i=(r=C.candidates)===null||r===void 0?void 0:r[0])===null||i===void 0?void 0:i.content;A!==void 0&&p.push(A)}yield yield Sn(C)}}catch(C){l={error:C}}finally{try{!g&&!s&&(c=x.return)&&(yield Sn(c.call(x)))}finally{if(l)throw l.error}}this.recordHistory(n,p)})}recordHistory(e,n,r){let i=[];n.length>0&&n.every(a=>a.role!==void 0)?i=n:i.push({role:"model",parts:[]}),r&&r.length>0?this.history.push(...lO(r)):this.history.push(e),this.history.push(...i)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class C_ extends Error{constructor(e){super(e.message),this.name="ApiError",this.status=e.status,Object.setPrototypeOf(this,C_.prototype)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function kee(t){const e={},n=_(t,["file"]);return n!=null&&w(e,["file"],n),e}function Mee(t){const e={},n=_(t,["sdkHttpResponse"]);return n!=null&&w(e,["sdkHttpResponse"],n),e}function Oee(t){const e={},n=_(t,["name"]);return n!=null&&w(e,["_url","file"],PU(n)),e}function jee(t){const e={},n=_(t,["sdkHttpResponse"]);return n!=null&&w(e,["sdkHttpResponse"],n),e}function Lee(t){const e={},n=_(t,["name"]);return n!=null&&w(e,["_url","file"],PU(n)),e}function Vee(t,e){const n={},r=_(t,["pageSize"]);e!==void 0&&r!=null&&w(e,["_query","pageSize"],r);const i=_(t,["pageToken"]);return e!==void 0&&i!=null&&w(e,["_query","pageToken"],i),n}function Uee(t){const e={},n=_(t,["config"]);return n!=null&&Vee(n,e),e}function Fee(t){const e={},n=_(t,["sdkHttpResponse"]);n!=null&&w(e,["sdkHttpResponse"],n);const r=_(t,["nextPageToken"]);r!=null&&w(e,["nextPageToken"],r);const i=_(t,["files"]);if(i!=null){let a=i;Array.isArray(a)&&(a=a.map(s=>s)),w(e,["files"],a)}return e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class Bee extends Hl{constructor(e){super(),this.apiClient=e,this.list=async(n={})=>new $d(Rl.PAGED_ITEM_FILES,r=>this.listInternal(r),await this.listInternal(n),n)}async upload(e){if(this.apiClient.isVertexAI())throw new Error("Vertex AI does not support uploading files. You can share files through a GCS bucket.");return this.apiClient.uploadFile(e.file,e.config).then(n=>n)}async download(e){await this.apiClient.downloadFile(e)}async listInternal(e){var n,r;let i,a="",s={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const l=Uee(e);return a=qe("files",l._url),s=l._query,delete l._url,delete l._query,i=this.apiClient.request({path:a,queryParams:s,body:JSON.stringify(l),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(c=>c.json().then(h=>{const p=h;return p.sdkHttpResponse={headers:c.headers},p})),i.then(c=>{const h=Fee(c),p=new GQ;return Object.assign(p,h),p})}}async createInternal(e){var n,r;let i,a="",s={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const l=kee(e);return a=qe("upload/v1beta/files",l._url),s=l._query,delete l._url,delete l._query,i=this.apiClient.request({path:a,queryParams:s,body:JSON.stringify(l),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(c=>c.json()),i.then(c=>{const h=Mee(c),p=new $Q;return Object.assign(p,h),p})}}async get(e){var n,r;let i,a="",s={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const l=Lee(e);return a=qe("files/{file}",l._url),s=l._query,delete l._url,delete l._query,i=this.apiClient.request({path:a,queryParams:s,body:JSON.stringify(l),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(c=>c.json()),i.then(c=>c)}}async delete(e){var n,r;let i,a="",s={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const l=Oee(e);return a=qe("files/{file}",l._url),s=l._query,delete l._url,delete l._query,i=this.apiClient.request({path:a,queryParams:s,body:JSON.stringify(l),httpMethod:"DELETE",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(c=>c.json().then(h=>{const p=h;return p.sdkHttpResponse={headers:c.headers},p})),i.then(c=>{const h=jee(c),p=new KQ;return Object.assign(p,h),p})}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function o0(t){const e={},n=_(t,["data"]);if(n!=null&&w(e,["data"],n),_(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const r=_(t,["mimeType"]);return r!=null&&w(e,["mimeType"],r),e}function zee(t){const e={},n=_(t,["parts"]);if(n!=null){let i=n;Array.isArray(i)&&(i=i.map(a=>ite(a))),w(e,["parts"],i)}const r=_(t,["role"]);return r!=null&&w(e,["role"],r),e}function qee(t){const e={};if(_(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const n=_(t,["fileUri"]);n!=null&&w(e,["fileUri"],n);const r=_(t,["mimeType"]);return r!=null&&w(e,["mimeType"],r),e}function Hee(t){const e={},n=_(t,["id"]);n!=null&&w(e,["id"],n);const r=_(t,["args"]);r!=null&&w(e,["args"],r);const i=_(t,["name"]);if(i!=null&&w(e,["name"],i),_(t,["partialArgs"])!==void 0)throw new Error("partialArgs parameter is not supported in Gemini API.");if(_(t,["willContinue"])!==void 0)throw new Error("willContinue parameter is not supported in Gemini API.");return e}function Gee(t){const e={};if(_(t,["behavior"])!==void 0)throw new Error("behavior parameter is not supported in Vertex AI.");const n=_(t,["description"]);n!=null&&w(e,["description"],n);const r=_(t,["name"]);r!=null&&w(e,["name"],r);const i=_(t,["parameters"]);i!=null&&w(e,["parameters"],i);const a=_(t,["parametersJsonSchema"]);a!=null&&w(e,["parametersJsonSchema"],a);const s=_(t,["response"]);s!=null&&w(e,["response"],s);const l=_(t,["responseJsonSchema"]);return l!=null&&w(e,["responseJsonSchema"],l),e}function $ee(t){const e={},n=_(t,["modelSelectionConfig"]);n!=null&&w(e,["modelConfig"],n);const r=_(t,["responseJsonSchema"]);r!=null&&w(e,["responseJsonSchema"],r);const i=_(t,["audioTimestamp"]);i!=null&&w(e,["audioTimestamp"],i);const a=_(t,["candidateCount"]);a!=null&&w(e,["candidateCount"],a);const s=_(t,["enableAffectiveDialog"]);s!=null&&w(e,["enableAffectiveDialog"],s);const l=_(t,["frequencyPenalty"]);l!=null&&w(e,["frequencyPenalty"],l);const c=_(t,["logprobs"]);c!=null&&w(e,["logprobs"],c);const h=_(t,["maxOutputTokens"]);h!=null&&w(e,["maxOutputTokens"],h);const p=_(t,["mediaResolution"]);p!=null&&w(e,["mediaResolution"],p);const g=_(t,["presencePenalty"]);g!=null&&w(e,["presencePenalty"],g);const x=_(t,["responseLogprobs"]);x!=null&&w(e,["responseLogprobs"],x);const b=_(t,["responseMimeType"]);b!=null&&w(e,["responseMimeType"],b);const C=_(t,["responseModalities"]);C!=null&&w(e,["responseModalities"],C);const A=_(t,["responseSchema"]);A!=null&&w(e,["responseSchema"],A);const D=_(t,["routingConfig"]);D!=null&&w(e,["routingConfig"],D);const R=_(t,["seed"]);R!=null&&w(e,["seed"],R);const j=_(t,["speechConfig"]);j!=null&&w(e,["speechConfig"],VU(j));const O=_(t,["stopSequences"]);O!=null&&w(e,["stopSequences"],O);const q=_(t,["temperature"]);q!=null&&w(e,["temperature"],q);const $=_(t,["thinkingConfig"]);$!=null&&w(e,["thinkingConfig"],$);const H=_(t,["topK"]);H!=null&&w(e,["topK"],H);const U=_(t,["topP"]);if(U!=null&&w(e,["topP"],U),_(t,["enableEnhancedCivicAnswers"])!==void 0)throw new Error("enableEnhancedCivicAnswers parameter is not supported in Vertex AI.");return e}function Kee(t){const e={};if(_(t,["authConfig"])!==void 0)throw new Error("authConfig parameter is not supported in Gemini API.");const n=_(t,["enableWidget"]);return n!=null&&w(e,["enableWidget"],n),e}function Wee(t){const e={};if(_(t,["excludeDomains"])!==void 0)throw new Error("excludeDomains parameter is not supported in Gemini API.");if(_(t,["blockingConfidence"])!==void 0)throw new Error("blockingConfidence parameter is not supported in Gemini API.");const n=_(t,["timeRangeFilter"]);return n!=null&&w(e,["timeRangeFilter"],n),e}function Yee(t,e){const n={},r=_(t,["generationConfig"]);e!==void 0&&r!=null&&w(e,["setup","generationConfig"],r);const i=_(t,["responseModalities"]);e!==void 0&&i!=null&&w(e,["setup","generationConfig","responseModalities"],i);const a=_(t,["temperature"]);e!==void 0&&a!=null&&w(e,["setup","generationConfig","temperature"],a);const s=_(t,["topP"]);e!==void 0&&s!=null&&w(e,["setup","generationConfig","topP"],s);const l=_(t,["topK"]);e!==void 0&&l!=null&&w(e,["setup","generationConfig","topK"],l);const c=_(t,["maxOutputTokens"]);e!==void 0&&c!=null&&w(e,["setup","generationConfig","maxOutputTokens"],c);const h=_(t,["mediaResolution"]);e!==void 0&&h!=null&&w(e,["setup","generationConfig","mediaResolution"],h);const p=_(t,["seed"]);e!==void 0&&p!=null&&w(e,["setup","generationConfig","seed"],p);const g=_(t,["speechConfig"]);e!==void 0&&g!=null&&w(e,["setup","generationConfig","speechConfig"],DC(g));const x=_(t,["thinkingConfig"]);e!==void 0&&x!=null&&w(e,["setup","generationConfig","thinkingConfig"],x);const b=_(t,["enableAffectiveDialog"]);e!==void 0&&b!=null&&w(e,["setup","generationConfig","enableAffectiveDialog"],b);const C=_(t,["systemInstruction"]);e!==void 0&&C!=null&&w(e,["setup","systemInstruction"],zee(Ei(C)));const A=_(t,["tools"]);if(e!==void 0&&A!=null){let H=sm(A);Array.isArray(H)&&(H=H.map(U=>ste(am(U)))),w(e,["setup","tools"],H)}const D=_(t,["sessionResumption"]);e!==void 0&&D!=null&&w(e,["setup","sessionResumption"],ate(D));const R=_(t,["inputAudioTranscription"]);e!==void 0&&R!=null&&w(e,["setup","inputAudioTranscription"],R);const j=_(t,["outputAudioTranscription"]);e!==void 0&&j!=null&&w(e,["setup","outputAudioTranscription"],j);const O=_(t,["realtimeInputConfig"]);e!==void 0&&O!=null&&w(e,["setup","realtimeInputConfig"],O);const q=_(t,["contextWindowCompression"]);e!==void 0&&q!=null&&w(e,["setup","contextWindowCompression"],q);const $=_(t,["proactivity"]);return e!==void 0&&$!=null&&w(e,["setup","proactivity"],$),n}function Zee(t,e){const n={},r=_(t,["generationConfig"]);e!==void 0&&r!=null&&w(e,["setup","generationConfig"],$ee(r));const i=_(t,["responseModalities"]);e!==void 0&&i!=null&&w(e,["setup","generationConfig","responseModalities"],i);const a=_(t,["temperature"]);e!==void 0&&a!=null&&w(e,["setup","generationConfig","temperature"],a);const s=_(t,["topP"]);e!==void 0&&s!=null&&w(e,["setup","generationConfig","topP"],s);const l=_(t,["topK"]);e!==void 0&&l!=null&&w(e,["setup","generationConfig","topK"],l);const c=_(t,["maxOutputTokens"]);e!==void 0&&c!=null&&w(e,["setup","generationConfig","maxOutputTokens"],c);const h=_(t,["mediaResolution"]);e!==void 0&&h!=null&&w(e,["setup","generationConfig","mediaResolution"],h);const p=_(t,["seed"]);e!==void 0&&p!=null&&w(e,["setup","generationConfig","seed"],p);const g=_(t,["speechConfig"]);e!==void 0&&g!=null&&w(e,["setup","generationConfig","speechConfig"],VU(DC(g)));const x=_(t,["thinkingConfig"]);e!==void 0&&x!=null&&w(e,["setup","generationConfig","thinkingConfig"],x);const b=_(t,["enableAffectiveDialog"]);e!==void 0&&b!=null&&w(e,["setup","generationConfig","enableAffectiveDialog"],b);const C=_(t,["systemInstruction"]);e!==void 0&&C!=null&&w(e,["setup","systemInstruction"],Ei(C));const A=_(t,["tools"]);if(e!==void 0&&A!=null){let H=sm(A);Array.isArray(H)&&(H=H.map(U=>ote(am(U)))),w(e,["setup","tools"],H)}const D=_(t,["sessionResumption"]);e!==void 0&&D!=null&&w(e,["setup","sessionResumption"],D);const R=_(t,["inputAudioTranscription"]);e!==void 0&&R!=null&&w(e,["setup","inputAudioTranscription"],R);const j=_(t,["outputAudioTranscription"]);e!==void 0&&j!=null&&w(e,["setup","outputAudioTranscription"],j);const O=_(t,["realtimeInputConfig"]);e!==void 0&&O!=null&&w(e,["setup","realtimeInputConfig"],O);const q=_(t,["contextWindowCompression"]);e!==void 0&&q!=null&&w(e,["setup","contextWindowCompression"],q);const $=_(t,["proactivity"]);return e!==void 0&&$!=null&&w(e,["setup","proactivity"],$),n}function Jee(t,e){const n={},r=_(e,["model"]);r!=null&&w(n,["setup","model"],$t(t,r));const i=_(e,["config"]);return i!=null&&w(n,["config"],Yee(i,n)),n}function Qee(t,e){const n={},r=_(e,["model"]);r!=null&&w(n,["setup","model"],$t(t,r));const i=_(e,["config"]);return i!=null&&w(n,["config"],Zee(i,n)),n}function Xee(t){const e={},n=_(t,["musicGenerationConfig"]);return n!=null&&w(e,["musicGenerationConfig"],n),e}function ete(t){const e={},n=_(t,["weightedPrompts"]);if(n!=null){let r=n;Array.isArray(r)&&(r=r.map(i=>i)),w(e,["weightedPrompts"],r)}return e}function tte(t){const e={},n=_(t,["media"]);if(n!=null){let h=SU(n);Array.isArray(h)&&(h=h.map(p=>o0(p))),w(e,["mediaChunks"],h)}const r=_(t,["audio"]);r!=null&&w(e,["audio"],o0(CU(r)));const i=_(t,["audioStreamEnd"]);i!=null&&w(e,["audioStreamEnd"],i);const a=_(t,["video"]);a!=null&&w(e,["video"],o0(AU(a)));const s=_(t,["text"]);s!=null&&w(e,["text"],s);const l=_(t,["activityStart"]);l!=null&&w(e,["activityStart"],l);const c=_(t,["activityEnd"]);return c!=null&&w(e,["activityEnd"],c),e}function nte(t){const e={},n=_(t,["media"]);if(n!=null){let h=SU(n);Array.isArray(h)&&(h=h.map(p=>p)),w(e,["mediaChunks"],h)}const r=_(t,["audio"]);r!=null&&w(e,["audio"],CU(r));const i=_(t,["audioStreamEnd"]);i!=null&&w(e,["audioStreamEnd"],i);const a=_(t,["video"]);a!=null&&w(e,["video"],AU(a));const s=_(t,["text"]);s!=null&&w(e,["text"],s);const l=_(t,["activityStart"]);l!=null&&w(e,["activityStart"],l);const c=_(t,["activityEnd"]);return c!=null&&w(e,["activityEnd"],c),e}function rte(t){const e={},n=_(t,["setupComplete"]);n!=null&&w(e,["setupComplete"],n);const r=_(t,["serverContent"]);r!=null&&w(e,["serverContent"],r);const i=_(t,["toolCall"]);i!=null&&w(e,["toolCall"],i);const a=_(t,["toolCallCancellation"]);a!=null&&w(e,["toolCallCancellation"],a);const s=_(t,["usageMetadata"]);s!=null&&w(e,["usageMetadata"],lte(s));const l=_(t,["goAway"]);l!=null&&w(e,["goAway"],l);const c=_(t,["sessionResumptionUpdate"]);return c!=null&&w(e,["sessionResumptionUpdate"],c),e}function ite(t){const e={},n=_(t,["mediaResolution"]);n!=null&&w(e,["mediaResolution"],n);const r=_(t,["codeExecutionResult"]);r!=null&&w(e,["codeExecutionResult"],r);const i=_(t,["executableCode"]);i!=null&&w(e,["executableCode"],i);const a=_(t,["fileData"]);a!=null&&w(e,["fileData"],qee(a));const s=_(t,["functionCall"]);s!=null&&w(e,["functionCall"],Hee(s));const l=_(t,["functionResponse"]);l!=null&&w(e,["functionResponse"],l);const c=_(t,["inlineData"]);c!=null&&w(e,["inlineData"],o0(c));const h=_(t,["text"]);h!=null&&w(e,["text"],h);const p=_(t,["thought"]);p!=null&&w(e,["thought"],p);const g=_(t,["thoughtSignature"]);g!=null&&w(e,["thoughtSignature"],g);const x=_(t,["videoMetadata"]);return x!=null&&w(e,["videoMetadata"],x),e}function ate(t){const e={},n=_(t,["handle"]);if(n!=null&&w(e,["handle"],n),_(t,["transparent"])!==void 0)throw new Error("transparent parameter is not supported in Gemini API.");return e}function VU(t){const e={},n=_(t,["languageCode"]);n!=null&&w(e,["languageCode"],n);const r=_(t,["voiceConfig"]);if(r!=null&&w(e,["voiceConfig"],r),_(t,["multiSpeakerVoiceConfig"])!==void 0)throw new Error("multiSpeakerVoiceConfig parameter is not supported in Vertex AI.");return e}function ste(t){const e={},n=_(t,["functionDeclarations"]);if(n!=null){let p=n;Array.isArray(p)&&(p=p.map(g=>g)),w(e,["functionDeclarations"],p)}if(_(t,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");const r=_(t,["googleSearchRetrieval"]);r!=null&&w(e,["googleSearchRetrieval"],r);const i=_(t,["computerUse"]);i!=null&&w(e,["computerUse"],i);const a=_(t,["fileSearch"]);a!=null&&w(e,["fileSearch"],a);const s=_(t,["codeExecution"]);if(s!=null&&w(e,["codeExecution"],s),_(t,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");const l=_(t,["googleMaps"]);l!=null&&w(e,["googleMaps"],Kee(l));const c=_(t,["googleSearch"]);c!=null&&w(e,["googleSearch"],Wee(c));const h=_(t,["urlContext"]);return h!=null&&w(e,["urlContext"],h),e}function ote(t){const e={},n=_(t,["functionDeclarations"]);if(n!=null){let g=n;Array.isArray(g)&&(g=g.map(x=>Gee(x))),w(e,["functionDeclarations"],g)}const r=_(t,["retrieval"]);r!=null&&w(e,["retrieval"],r);const i=_(t,["googleSearchRetrieval"]);i!=null&&w(e,["googleSearchRetrieval"],i);const a=_(t,["computerUse"]);if(a!=null&&w(e,["computerUse"],a),_(t,["fileSearch"])!==void 0)throw new Error("fileSearch parameter is not supported in Vertex AI.");const s=_(t,["codeExecution"]);s!=null&&w(e,["codeExecution"],s);const l=_(t,["enterpriseWebSearch"]);l!=null&&w(e,["enterpriseWebSearch"],l);const c=_(t,["googleMaps"]);c!=null&&w(e,["googleMaps"],c);const h=_(t,["googleSearch"]);h!=null&&w(e,["googleSearch"],h);const p=_(t,["urlContext"]);return p!=null&&w(e,["urlContext"],p),e}function lte(t){const e={},n=_(t,["promptTokenCount"]);n!=null&&w(e,["promptTokenCount"],n);const r=_(t,["cachedContentTokenCount"]);r!=null&&w(e,["cachedContentTokenCount"],r);const i=_(t,["candidatesTokenCount"]);i!=null&&w(e,["responseTokenCount"],i);const a=_(t,["toolUsePromptTokenCount"]);a!=null&&w(e,["toolUsePromptTokenCount"],a);const s=_(t,["thoughtsTokenCount"]);s!=null&&w(e,["thoughtsTokenCount"],s);const l=_(t,["totalTokenCount"]);l!=null&&w(e,["totalTokenCount"],l);const c=_(t,["promptTokensDetails"]);if(c!=null){let b=c;Array.isArray(b)&&(b=b.map(C=>C)),w(e,["promptTokensDetails"],b)}const h=_(t,["cacheTokensDetails"]);if(h!=null){let b=h;Array.isArray(b)&&(b=b.map(C=>C)),w(e,["cacheTokensDetails"],b)}const p=_(t,["candidatesTokensDetails"]);if(p!=null){let b=p;Array.isArray(b)&&(b=b.map(C=>C)),w(e,["responseTokensDetails"],b)}const g=_(t,["toolUsePromptTokensDetails"]);if(g!=null){let b=g;Array.isArray(b)&&(b=b.map(C=>C)),w(e,["toolUsePromptTokensDetails"],b)}const x=_(t,["trafficType"]);return x!=null&&w(e,["trafficType"],x),e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function ute(t){const e={},n=_(t,["data"]);if(n!=null&&w(e,["data"],n),_(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const r=_(t,["mimeType"]);return r!=null&&w(e,["mimeType"],r),e}function cte(t){const e={},n=_(t,["content"]);n!=null&&w(e,["content"],n);const r=_(t,["citationMetadata"]);r!=null&&w(e,["citationMetadata"],dte(r));const i=_(t,["tokenCount"]);i!=null&&w(e,["tokenCount"],i);const a=_(t,["finishReason"]);a!=null&&w(e,["finishReason"],a);const s=_(t,["avgLogprobs"]);s!=null&&w(e,["avgLogprobs"],s);const l=_(t,["groundingMetadata"]);l!=null&&w(e,["groundingMetadata"],l);const c=_(t,["index"]);c!=null&&w(e,["index"],c);const h=_(t,["logprobsResult"]);h!=null&&w(e,["logprobsResult"],h);const p=_(t,["safetyRatings"]);if(p!=null){let x=p;Array.isArray(x)&&(x=x.map(b=>b)),w(e,["safetyRatings"],x)}const g=_(t,["urlContextMetadata"]);return g!=null&&w(e,["urlContextMetadata"],g),e}function dte(t){const e={},n=_(t,["citationSources"]);if(n!=null){let r=n;Array.isArray(r)&&(r=r.map(i=>i)),w(e,["citations"],r)}return e}function fte(t,e){const n={},r=_(e,["model"]);r!=null&&w(n,["_url","model"],$t(t,r));const i=_(e,["contents"]);if(i!=null){let a=hs(i);Array.isArray(a)&&(a=a.map(s=>s)),w(n,["contents"],a)}return n}function hte(t){const e={},n=_(t,["sdkHttpResponse"]);n!=null&&w(e,["sdkHttpResponse"],n);const r=_(t,["tokensInfo"]);if(r!=null){let i=r;Array.isArray(i)&&(i=i.map(a=>a)),w(e,["tokensInfo"],i)}return e}function mte(t){const e={},n=_(t,["values"]);n!=null&&w(e,["values"],n);const r=_(t,["statistics"]);return r!=null&&w(e,["statistics"],pte(r)),e}function pte(t){const e={},n=_(t,["truncated"]);n!=null&&w(e,["truncated"],n);const r=_(t,["token_count"]);return r!=null&&w(e,["tokenCount"],r),e}function I_(t){const e={},n=_(t,["parts"]);if(n!=null){let i=n;Array.isArray(i)&&(i=i.map(a=>Tne(a))),w(e,["parts"],i)}const r=_(t,["role"]);return r!=null&&w(e,["role"],r),e}function gte(t){const e={},n=_(t,["controlType"]);n!=null&&w(e,["controlType"],n);const r=_(t,["enableControlImageComputation"]);return r!=null&&w(e,["computeControl"],r),e}function yte(t){const e={};if(_(t,["systemInstruction"])!==void 0)throw new Error("systemInstruction parameter is not supported in Gemini API.");if(_(t,["tools"])!==void 0)throw new Error("tools parameter is not supported in Gemini API.");if(_(t,["generationConfig"])!==void 0)throw new Error("generationConfig parameter is not supported in Gemini API.");return e}function vte(t,e){const n={},r=_(t,["systemInstruction"]);e!==void 0&&r!=null&&w(e,["systemInstruction"],Ei(r));const i=_(t,["tools"]);if(e!==void 0&&i!=null){let s=i;Array.isArray(s)&&(s=s.map(l=>qU(l))),w(e,["tools"],s)}const a=_(t,["generationConfig"]);return e!==void 0&&a!=null&&w(e,["generationConfig"],une(a)),n}function xte(t,e){const n={},r=_(e,["model"]);r!=null&&w(n,["_url","model"],$t(t,r));const i=_(e,["contents"]);if(i!=null){let s=hs(i);Array.isArray(s)&&(s=s.map(l=>I_(l))),w(n,["contents"],s)}const a=_(e,["config"]);return a!=null&&yte(a),n}function _te(t,e){const n={},r=_(e,["model"]);r!=null&&w(n,["_url","model"],$t(t,r));const i=_(e,["contents"]);if(i!=null){let s=hs(i);Array.isArray(s)&&(s=s.map(l=>l)),w(n,["contents"],s)}const a=_(e,["config"]);return a!=null&&vte(a,n),n}function bte(t){const e={},n=_(t,["sdkHttpResponse"]);n!=null&&w(e,["sdkHttpResponse"],n);const r=_(t,["totalTokens"]);r!=null&&w(e,["totalTokens"],r);const i=_(t,["cachedContentTokenCount"]);return i!=null&&w(e,["cachedContentTokenCount"],i),e}function wte(t){const e={},n=_(t,["sdkHttpResponse"]);n!=null&&w(e,["sdkHttpResponse"],n);const r=_(t,["totalTokens"]);return r!=null&&w(e,["totalTokens"],r),e}function Ete(t,e){const n={},r=_(e,["model"]);return r!=null&&w(n,["_url","name"],$t(t,r)),n}function Tte(t,e){const n={},r=_(e,["model"]);return r!=null&&w(n,["_url","name"],$t(t,r)),n}function Ste(t){const e={},n=_(t,["sdkHttpResponse"]);return n!=null&&w(e,["sdkHttpResponse"],n),e}function Ate(t){const e={},n=_(t,["sdkHttpResponse"]);return n!=null&&w(e,["sdkHttpResponse"],n),e}function Cte(t,e){const n={},r=_(t,["outputGcsUri"]);e!==void 0&&r!=null&&w(e,["parameters","storageUri"],r);const i=_(t,["negativePrompt"]);e!==void 0&&i!=null&&w(e,["parameters","negativePrompt"],i);const a=_(t,["numberOfImages"]);e!==void 0&&a!=null&&w(e,["parameters","sampleCount"],a);const s=_(t,["aspectRatio"]);e!==void 0&&s!=null&&w(e,["parameters","aspectRatio"],s);const l=_(t,["guidanceScale"]);e!==void 0&&l!=null&&w(e,["parameters","guidanceScale"],l);const c=_(t,["seed"]);e!==void 0&&c!=null&&w(e,["parameters","seed"],c);const h=_(t,["safetyFilterLevel"]);e!==void 0&&h!=null&&w(e,["parameters","safetySetting"],h);const p=_(t,["personGeneration"]);e!==void 0&&p!=null&&w(e,["parameters","personGeneration"],p);const g=_(t,["includeSafetyAttributes"]);e!==void 0&&g!=null&&w(e,["parameters","includeSafetyAttributes"],g);const x=_(t,["includeRaiReason"]);e!==void 0&&x!=null&&w(e,["parameters","includeRaiReason"],x);const b=_(t,["language"]);e!==void 0&&b!=null&&w(e,["parameters","language"],b);const C=_(t,["outputMimeType"]);e!==void 0&&C!=null&&w(e,["parameters","outputOptions","mimeType"],C);const A=_(t,["outputCompressionQuality"]);e!==void 0&&A!=null&&w(e,["parameters","outputOptions","compressionQuality"],A);const D=_(t,["addWatermark"]);e!==void 0&&D!=null&&w(e,["parameters","addWatermark"],D);const R=_(t,["labels"]);e!==void 0&&R!=null&&w(e,["labels"],R);const j=_(t,["editMode"]);e!==void 0&&j!=null&&w(e,["parameters","editMode"],j);const O=_(t,["baseSteps"]);return e!==void 0&&O!=null&&w(e,["parameters","editConfig","baseSteps"],O),n}function Ite(t,e){const n={},r=_(e,["model"]);r!=null&&w(n,["_url","model"],$t(t,r));const i=_(e,["prompt"]);i!=null&&w(n,["instances[0]","prompt"],i);const a=_(e,["referenceImages"]);if(a!=null){let l=a;Array.isArray(l)&&(l=l.map(c=>Pne(c))),w(n,["instances[0]","referenceImages"],l)}const s=_(e,["config"]);return s!=null&&Cte(s,n),n}function Nte(t){const e={},n=_(t,["sdkHttpResponse"]);n!=null&&w(e,["sdkHttpResponse"],n);const r=_(t,["predictions"]);if(r!=null){let i=r;Array.isArray(i)&&(i=i.map(a=>N_(a))),w(e,["generatedImages"],i)}return e}function Pte(t,e){const n={},r=_(t,["taskType"]);e!==void 0&&r!=null&&w(e,["requests[]","taskType"],r);const i=_(t,["title"]);e!==void 0&&i!=null&&w(e,["requests[]","title"],i);const a=_(t,["outputDimensionality"]);if(e!==void 0&&a!=null&&w(e,["requests[]","outputDimensionality"],a),_(t,["mimeType"])!==void 0)throw new Error("mimeType parameter is not supported in Gemini API.");if(_(t,["autoTruncate"])!==void 0)throw new Error("autoTruncate parameter is not supported in Gemini API.");return n}function Dte(t,e){const n={},r=_(t,["taskType"]);e!==void 0&&r!=null&&w(e,["instances[]","task_type"],r);const i=_(t,["title"]);e!==void 0&&i!=null&&w(e,["instances[]","title"],i);const a=_(t,["outputDimensionality"]);e!==void 0&&a!=null&&w(e,["parameters","outputDimensionality"],a);const s=_(t,["mimeType"]);e!==void 0&&s!=null&&w(e,["instances[]","mimeType"],s);const l=_(t,["autoTruncate"]);return e!==void 0&&l!=null&&w(e,["parameters","autoTruncate"],l),n}function Rte(t,e){const n={},r=_(e,["model"]);r!=null&&w(n,["_url","model"],$t(t,r));const i=_(e,["contents"]);if(i!=null){let l=IC(t,i);Array.isArray(l)&&(l=l.map(c=>c)),w(n,["requests[]","content"],l)}const a=_(e,["config"]);a!=null&&Pte(a,n);const s=_(e,["model"]);return s!==void 0&&w(n,["requests[]","model"],$t(t,s)),n}function kte(t,e){const n={},r=_(e,["model"]);r!=null&&w(n,["_url","model"],$t(t,r));const i=_(e,["contents"]);if(i!=null){let s=IC(t,i);Array.isArray(s)&&(s=s.map(l=>l)),w(n,["instances[]","content"],s)}const a=_(e,["config"]);return a!=null&&Dte(a,n),n}function Mte(t){const e={},n=_(t,["sdkHttpResponse"]);n!=null&&w(e,["sdkHttpResponse"],n);const r=_(t,["embeddings"]);if(r!=null){let a=r;Array.isArray(a)&&(a=a.map(s=>s)),w(e,["embeddings"],a)}const i=_(t,["metadata"]);return i!=null&&w(e,["metadata"],i),e}function Ote(t){const e={},n=_(t,["sdkHttpResponse"]);n!=null&&w(e,["sdkHttpResponse"],n);const r=_(t,["predictions[]","embeddings"]);if(r!=null){let a=r;Array.isArray(a)&&(a=a.map(s=>mte(s))),w(e,["embeddings"],a)}const i=_(t,["metadata"]);return i!=null&&w(e,["metadata"],i),e}function jte(t){const e={},n=_(t,["endpoint"]);n!=null&&w(e,["name"],n);const r=_(t,["deployedModelId"]);return r!=null&&w(e,["deployedModelId"],r),e}function Lte(t){const e={};if(_(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const n=_(t,["fileUri"]);n!=null&&w(e,["fileUri"],n);const r=_(t,["mimeType"]);return r!=null&&w(e,["mimeType"],r),e}function Vte(t){const e={},n=_(t,["id"]);n!=null&&w(e,["id"],n);const r=_(t,["args"]);r!=null&&w(e,["args"],r);const i=_(t,["name"]);if(i!=null&&w(e,["name"],i),_(t,["partialArgs"])!==void 0)throw new Error("partialArgs parameter is not supported in Gemini API.");if(_(t,["willContinue"])!==void 0)throw new Error("willContinue parameter is not supported in Gemini API.");return e}function Ute(t){const e={},n=_(t,["mode"]);n!=null&&w(e,["mode"],n);const r=_(t,["allowedFunctionNames"]);if(r!=null&&w(e,["allowedFunctionNames"],r),_(t,["streamFunctionCallArguments"])!==void 0)throw new Error("streamFunctionCallArguments parameter is not supported in Gemini API.");return e}function Fte(t){const e={};if(_(t,["behavior"])!==void 0)throw new Error("behavior parameter is not supported in Vertex AI.");const n=_(t,["description"]);n!=null&&w(e,["description"],n);const r=_(t,["name"]);r!=null&&w(e,["name"],r);const i=_(t,["parameters"]);i!=null&&w(e,["parameters"],i);const a=_(t,["parametersJsonSchema"]);a!=null&&w(e,["parametersJsonSchema"],a);const s=_(t,["response"]);s!=null&&w(e,["response"],s);const l=_(t,["responseJsonSchema"]);return l!=null&&w(e,["responseJsonSchema"],l),e}function Bte(t,e,n){const r={},i=_(e,["systemInstruction"]);n!==void 0&&i!=null&&w(n,["systemInstruction"],I_(Ei(i)));const a=_(e,["temperature"]);a!=null&&w(r,["temperature"],a);const s=_(e,["topP"]);s!=null&&w(r,["topP"],s);const l=_(e,["topK"]);l!=null&&w(r,["topK"],l);const c=_(e,["candidateCount"]);c!=null&&w(r,["candidateCount"],c);const h=_(e,["maxOutputTokens"]);h!=null&&w(r,["maxOutputTokens"],h);const p=_(e,["stopSequences"]);p!=null&&w(r,["stopSequences"],p);const g=_(e,["responseLogprobs"]);g!=null&&w(r,["responseLogprobs"],g);const x=_(e,["logprobs"]);x!=null&&w(r,["logprobs"],x);const b=_(e,["presencePenalty"]);b!=null&&w(r,["presencePenalty"],b);const C=_(e,["frequencyPenalty"]);C!=null&&w(r,["frequencyPenalty"],C);const A=_(e,["seed"]);A!=null&&w(r,["seed"],A);const D=_(e,["responseMimeType"]);D!=null&&w(r,["responseMimeType"],D);const R=_(e,["responseSchema"]);R!=null&&w(r,["responseSchema"],NC(R));const j=_(e,["responseJsonSchema"]);if(j!=null&&w(r,["responseJsonSchema"],j),_(e,["routingConfig"])!==void 0)throw new Error("routingConfig parameter is not supported in Gemini API.");if(_(e,["modelSelectionConfig"])!==void 0)throw new Error("modelSelectionConfig parameter is not supported in Gemini API.");const O=_(e,["safetySettings"]);if(n!==void 0&&O!=null){let J=O;Array.isArray(J)&&(J=J.map(G=>Dne(G))),w(n,["safetySettings"],J)}const q=_(e,["tools"]);if(n!==void 0&&q!=null){let J=sm(q);Array.isArray(J)&&(J=J.map(G=>Vne(am(G)))),w(n,["tools"],J)}const $=_(e,["toolConfig"]);if(n!==void 0&&$!=null&&w(n,["toolConfig"],Lne($)),_(e,["labels"])!==void 0)throw new Error("labels parameter is not supported in Gemini API.");const H=_(e,["cachedContent"]);n!==void 0&&H!=null&&w(n,["cachedContent"],Gl(t,H));const U=_(e,["responseModalities"]);U!=null&&w(r,["responseModalities"],U);const z=_(e,["mediaResolution"]);z!=null&&w(r,["mediaResolution"],z);const B=_(e,["speechConfig"]);if(B!=null&&w(r,["speechConfig"],PC(B)),_(e,["audioTimestamp"])!==void 0)throw new Error("audioTimestamp parameter is not supported in Gemini API.");const Z=_(e,["thinkingConfig"]);Z!=null&&w(r,["thinkingConfig"],Z);const K=_(e,["imageConfig"]);return K!=null&&w(r,["imageConfig"],mne(K)),r}function zte(t,e,n){const r={},i=_(e,["systemInstruction"]);n!==void 0&&i!=null&&w(n,["systemInstruction"],Ei(i));const a=_(e,["temperature"]);a!=null&&w(r,["temperature"],a);const s=_(e,["topP"]);s!=null&&w(r,["topP"],s);const l=_(e,["topK"]);l!=null&&w(r,["topK"],l);const c=_(e,["candidateCount"]);c!=null&&w(r,["candidateCount"],c);const h=_(e,["maxOutputTokens"]);h!=null&&w(r,["maxOutputTokens"],h);const p=_(e,["stopSequences"]);p!=null&&w(r,["stopSequences"],p);const g=_(e,["responseLogprobs"]);g!=null&&w(r,["responseLogprobs"],g);const x=_(e,["logprobs"]);x!=null&&w(r,["logprobs"],x);const b=_(e,["presencePenalty"]);b!=null&&w(r,["presencePenalty"],b);const C=_(e,["frequencyPenalty"]);C!=null&&w(r,["frequencyPenalty"],C);const A=_(e,["seed"]);A!=null&&w(r,["seed"],A);const D=_(e,["responseMimeType"]);D!=null&&w(r,["responseMimeType"],D);const R=_(e,["responseSchema"]);R!=null&&w(r,["responseSchema"],NC(R));const j=_(e,["responseJsonSchema"]);j!=null&&w(r,["responseJsonSchema"],j);const O=_(e,["routingConfig"]);O!=null&&w(r,["routingConfig"],O);const q=_(e,["modelSelectionConfig"]);q!=null&&w(r,["modelConfig"],q);const $=_(e,["safetySettings"]);if(n!==void 0&&$!=null){let ee=$;Array.isArray(ee)&&(ee=ee.map(re=>re)),w(n,["safetySettings"],ee)}const H=_(e,["tools"]);if(n!==void 0&&H!=null){let ee=sm(H);Array.isArray(ee)&&(ee=ee.map(re=>qU(am(re)))),w(n,["tools"],ee)}const U=_(e,["toolConfig"]);n!==void 0&&U!=null&&w(n,["toolConfig"],U);const z=_(e,["labels"]);n!==void 0&&z!=null&&w(n,["labels"],z);const B=_(e,["cachedContent"]);n!==void 0&&B!=null&&w(n,["cachedContent"],Gl(t,B));const Z=_(e,["responseModalities"]);Z!=null&&w(r,["responseModalities"],Z);const K=_(e,["mediaResolution"]);K!=null&&w(r,["mediaResolution"],K);const J=_(e,["speechConfig"]);J!=null&&w(r,["speechConfig"],zU(PC(J)));const G=_(e,["audioTimestamp"]);G!=null&&w(r,["audioTimestamp"],G);const Se=_(e,["thinkingConfig"]);Se!=null&&w(r,["thinkingConfig"],Se);const Oe=_(e,["imageConfig"]);return Oe!=null&&w(r,["imageConfig"],pne(Oe)),r}function uO(t,e){const n={},r=_(e,["model"]);r!=null&&w(n,["_url","model"],$t(t,r));const i=_(e,["contents"]);if(i!=null){let s=hs(i);Array.isArray(s)&&(s=s.map(l=>I_(l))),w(n,["contents"],s)}const a=_(e,["config"]);return a!=null&&w(n,["generationConfig"],Bte(t,a,n)),n}function cO(t,e){const n={},r=_(e,["model"]);r!=null&&w(n,["_url","model"],$t(t,r));const i=_(e,["contents"]);if(i!=null){let s=hs(i);Array.isArray(s)&&(s=s.map(l=>l)),w(n,["contents"],s)}const a=_(e,["config"]);return a!=null&&w(n,["generationConfig"],zte(t,a,n)),n}function dO(t){const e={},n=_(t,["sdkHttpResponse"]);n!=null&&w(e,["sdkHttpResponse"],n);const r=_(t,["candidates"]);if(r!=null){let c=r;Array.isArray(c)&&(c=c.map(h=>cte(h))),w(e,["candidates"],c)}const i=_(t,["modelVersion"]);i!=null&&w(e,["modelVersion"],i);const a=_(t,["promptFeedback"]);a!=null&&w(e,["promptFeedback"],a);const s=_(t,["responseId"]);s!=null&&w(e,["responseId"],s);const l=_(t,["usageMetadata"]);return l!=null&&w(e,["usageMetadata"],l),e}function fO(t){const e={},n=_(t,["sdkHttpResponse"]);n!=null&&w(e,["sdkHttpResponse"],n);const r=_(t,["candidates"]);if(r!=null){let h=r;Array.isArray(h)&&(h=h.map(p=>p)),w(e,["candidates"],h)}const i=_(t,["createTime"]);i!=null&&w(e,["createTime"],i);const a=_(t,["modelVersion"]);a!=null&&w(e,["modelVersion"],a);const s=_(t,["promptFeedback"]);s!=null&&w(e,["promptFeedback"],s);const l=_(t,["responseId"]);l!=null&&w(e,["responseId"],l);const c=_(t,["usageMetadata"]);return c!=null&&w(e,["usageMetadata"],c),e}function qte(t,e){const n={};if(_(t,["outputGcsUri"])!==void 0)throw new Error("outputGcsUri parameter is not supported in Gemini API.");if(_(t,["negativePrompt"])!==void 0)throw new Error("negativePrompt parameter is not supported in Gemini API.");const r=_(t,["numberOfImages"]);e!==void 0&&r!=null&&w(e,["parameters","sampleCount"],r);const i=_(t,["aspectRatio"]);e!==void 0&&i!=null&&w(e,["parameters","aspectRatio"],i);const a=_(t,["guidanceScale"]);if(e!==void 0&&a!=null&&w(e,["parameters","guidanceScale"],a),_(t,["seed"])!==void 0)throw new Error("seed parameter is not supported in Gemini API.");const s=_(t,["safetyFilterLevel"]);e!==void 0&&s!=null&&w(e,["parameters","safetySetting"],s);const l=_(t,["personGeneration"]);e!==void 0&&l!=null&&w(e,["parameters","personGeneration"],l);const c=_(t,["includeSafetyAttributes"]);e!==void 0&&c!=null&&w(e,["parameters","includeSafetyAttributes"],c);const h=_(t,["includeRaiReason"]);e!==void 0&&h!=null&&w(e,["parameters","includeRaiReason"],h);const p=_(t,["language"]);e!==void 0&&p!=null&&w(e,["parameters","language"],p);const g=_(t,["outputMimeType"]);e!==void 0&&g!=null&&w(e,["parameters","outputOptions","mimeType"],g);const x=_(t,["outputCompressionQuality"]);if(e!==void 0&&x!=null&&w(e,["parameters","outputOptions","compressionQuality"],x),_(t,["addWatermark"])!==void 0)throw new Error("addWatermark parameter is not supported in Gemini API.");if(_(t,["labels"])!==void 0)throw new Error("labels parameter is not supported in Gemini API.");const b=_(t,["imageSize"]);if(e!==void 0&&b!=null&&w(e,["parameters","sampleImageSize"],b),_(t,["enhancePrompt"])!==void 0)throw new Error("enhancePrompt parameter is not supported in Gemini API.");return n}function Hte(t,e){const n={},r=_(t,["outputGcsUri"]);e!==void 0&&r!=null&&w(e,["parameters","storageUri"],r);const i=_(t,["negativePrompt"]);e!==void 0&&i!=null&&w(e,["parameters","negativePrompt"],i);const a=_(t,["numberOfImages"]);e!==void 0&&a!=null&&w(e,["parameters","sampleCount"],a);const s=_(t,["aspectRatio"]);e!==void 0&&s!=null&&w(e,["parameters","aspectRatio"],s);const l=_(t,["guidanceScale"]);e!==void 0&&l!=null&&w(e,["parameters","guidanceScale"],l);const c=_(t,["seed"]);e!==void 0&&c!=null&&w(e,["parameters","seed"],c);const h=_(t,["safetyFilterLevel"]);e!==void 0&&h!=null&&w(e,["parameters","safetySetting"],h);const p=_(t,["personGeneration"]);e!==void 0&&p!=null&&w(e,["parameters","personGeneration"],p);const g=_(t,["includeSafetyAttributes"]);e!==void 0&&g!=null&&w(e,["parameters","includeSafetyAttributes"],g);const x=_(t,["includeRaiReason"]);e!==void 0&&x!=null&&w(e,["parameters","includeRaiReason"],x);const b=_(t,["language"]);e!==void 0&&b!=null&&w(e,["parameters","language"],b);const C=_(t,["outputMimeType"]);e!==void 0&&C!=null&&w(e,["parameters","outputOptions","mimeType"],C);const A=_(t,["outputCompressionQuality"]);e!==void 0&&A!=null&&w(e,["parameters","outputOptions","compressionQuality"],A);const D=_(t,["addWatermark"]);e!==void 0&&D!=null&&w(e,["parameters","addWatermark"],D);const R=_(t,["labels"]);e!==void 0&&R!=null&&w(e,["labels"],R);const j=_(t,["imageSize"]);e!==void 0&&j!=null&&w(e,["parameters","sampleImageSize"],j);const O=_(t,["enhancePrompt"]);return e!==void 0&&O!=null&&w(e,["parameters","enhancePrompt"],O),n}function Gte(t,e){const n={},r=_(e,["model"]);r!=null&&w(n,["_url","model"],$t(t,r));const i=_(e,["prompt"]);i!=null&&w(n,["instances[0]","prompt"],i);const a=_(e,["config"]);return a!=null&&qte(a,n),n}function $te(t,e){const n={},r=_(e,["model"]);r!=null&&w(n,["_url","model"],$t(t,r));const i=_(e,["prompt"]);i!=null&&w(n,["instances[0]","prompt"],i);const a=_(e,["config"]);return a!=null&&Hte(a,n),n}function Kte(t){const e={},n=_(t,["sdkHttpResponse"]);n!=null&&w(e,["sdkHttpResponse"],n);const r=_(t,["predictions"]);if(r!=null){let a=r;Array.isArray(a)&&(a=a.map(s=>ane(s))),w(e,["generatedImages"],a)}const i=_(t,["positivePromptSafetyAttributes"]);return i!=null&&w(e,["positivePromptSafetyAttributes"],FU(i)),e}function Wte(t){const e={},n=_(t,["sdkHttpResponse"]);n!=null&&w(e,["sdkHttpResponse"],n);const r=_(t,["predictions"]);if(r!=null){let a=r;Array.isArray(a)&&(a=a.map(s=>N_(s))),w(e,["generatedImages"],a)}const i=_(t,["positivePromptSafetyAttributes"]);return i!=null&&w(e,["positivePromptSafetyAttributes"],BU(i)),e}function Yte(t,e){const n={},r=_(t,["numberOfVideos"]);if(e!==void 0&&r!=null&&w(e,["parameters","sampleCount"],r),_(t,["outputGcsUri"])!==void 0)throw new Error("outputGcsUri parameter is not supported in Gemini API.");if(_(t,["fps"])!==void 0)throw new Error("fps parameter is not supported in Gemini API.");const i=_(t,["durationSeconds"]);if(e!==void 0&&i!=null&&w(e,["parameters","durationSeconds"],i),_(t,["seed"])!==void 0)throw new Error("seed parameter is not supported in Gemini API.");const a=_(t,["aspectRatio"]);e!==void 0&&a!=null&&w(e,["parameters","aspectRatio"],a);const s=_(t,["resolution"]);e!==void 0&&s!=null&&w(e,["parameters","resolution"],s);const l=_(t,["personGeneration"]);if(e!==void 0&&l!=null&&w(e,["parameters","personGeneration"],l),_(t,["pubsubTopic"])!==void 0)throw new Error("pubsubTopic parameter is not supported in Gemini API.");const c=_(t,["negativePrompt"]);e!==void 0&&c!=null&&w(e,["parameters","negativePrompt"],c);const h=_(t,["enhancePrompt"]);if(e!==void 0&&h!=null&&w(e,["parameters","enhancePrompt"],h),_(t,["generateAudio"])!==void 0)throw new Error("generateAudio parameter is not supported in Gemini API.");const p=_(t,["lastFrame"]);e!==void 0&&p!=null&&w(e,["instances[0]","lastFrame"],P_(p));const g=_(t,["referenceImages"]);if(e!==void 0&&g!=null){let x=g;Array.isArray(x)&&(x=x.map(b=>Jne(b))),w(e,["instances[0]","referenceImages"],x)}if(_(t,["mask"])!==void 0)throw new Error("mask parameter is not supported in Gemini API.");if(_(t,["compressionQuality"])!==void 0)throw new Error("compressionQuality parameter is not supported in Gemini API.");return n}function Zte(t,e){const n={},r=_(t,["numberOfVideos"]);e!==void 0&&r!=null&&w(e,["parameters","sampleCount"],r);const i=_(t,["outputGcsUri"]);e!==void 0&&i!=null&&w(e,["parameters","storageUri"],i);const a=_(t,["fps"]);e!==void 0&&a!=null&&w(e,["parameters","fps"],a);const s=_(t,["durationSeconds"]);e!==void 0&&s!=null&&w(e,["parameters","durationSeconds"],s);const l=_(t,["seed"]);e!==void 0&&l!=null&&w(e,["parameters","seed"],l);const c=_(t,["aspectRatio"]);e!==void 0&&c!=null&&w(e,["parameters","aspectRatio"],c);const h=_(t,["resolution"]);e!==void 0&&h!=null&&w(e,["parameters","resolution"],h);const p=_(t,["personGeneration"]);e!==void 0&&p!=null&&w(e,["parameters","personGeneration"],p);const g=_(t,["pubsubTopic"]);e!==void 0&&g!=null&&w(e,["parameters","pubsubTopic"],g);const x=_(t,["negativePrompt"]);e!==void 0&&x!=null&&w(e,["parameters","negativePrompt"],x);const b=_(t,["enhancePrompt"]);e!==void 0&&b!=null&&w(e,["parameters","enhancePrompt"],b);const C=_(t,["generateAudio"]);e!==void 0&&C!=null&&w(e,["parameters","generateAudio"],C);const A=_(t,["lastFrame"]);e!==void 0&&A!=null&&w(e,["instances[0]","lastFrame"],Ks(A));const D=_(t,["referenceImages"]);if(e!==void 0&&D!=null){let O=D;Array.isArray(O)&&(O=O.map(q=>Qne(q))),w(e,["instances[0]","referenceImages"],O)}const R=_(t,["mask"]);e!==void 0&&R!=null&&w(e,["instances[0]","mask"],Zne(R));const j=_(t,["compressionQuality"]);return e!==void 0&&j!=null&&w(e,["parameters","compressionQuality"],j),n}function Jte(t){const e={},n=_(t,["name"]);n!=null&&w(e,["name"],n);const r=_(t,["metadata"]);r!=null&&w(e,["metadata"],r);const i=_(t,["done"]);i!=null&&w(e,["done"],i);const a=_(t,["error"]);a!=null&&w(e,["error"],a);const s=_(t,["response","generateVideoResponse"]);return s!=null&&w(e,["response"],tne(s)),e}function Qte(t){const e={},n=_(t,["name"]);n!=null&&w(e,["name"],n);const r=_(t,["metadata"]);r!=null&&w(e,["metadata"],r);const i=_(t,["done"]);i!=null&&w(e,["done"],i);const a=_(t,["error"]);a!=null&&w(e,["error"],a);const s=_(t,["response"]);return s!=null&&w(e,["response"],nne(s)),e}function Xte(t,e){const n={},r=_(e,["model"]);r!=null&&w(n,["_url","model"],$t(t,r));const i=_(e,["prompt"]);i!=null&&w(n,["instances[0]","prompt"],i);const a=_(e,["image"]);a!=null&&w(n,["instances[0]","image"],P_(a));const s=_(e,["video"]);s!=null&&w(n,["instances[0]","video"],HU(s));const l=_(e,["source"]);l!=null&&rne(l,n);const c=_(e,["config"]);return c!=null&&Yte(c,n),n}function ene(t,e){const n={},r=_(e,["model"]);r!=null&&w(n,["_url","model"],$t(t,r));const i=_(e,["prompt"]);i!=null&&w(n,["instances[0]","prompt"],i);const a=_(e,["image"]);a!=null&&w(n,["instances[0]","image"],Ks(a));const s=_(e,["video"]);s!=null&&w(n,["instances[0]","video"],GU(s));const l=_(e,["source"]);l!=null&&ine(l,n);const c=_(e,["config"]);return c!=null&&Zte(c,n),n}function tne(t){const e={},n=_(t,["generatedSamples"]);if(n!=null){let a=n;Array.isArray(a)&&(a=a.map(s=>one(s))),w(e,["generatedVideos"],a)}const r=_(t,["raiMediaFilteredCount"]);r!=null&&w(e,["raiMediaFilteredCount"],r);const i=_(t,["raiMediaFilteredReasons"]);return i!=null&&w(e,["raiMediaFilteredReasons"],i),e}function nne(t){const e={},n=_(t,["videos"]);if(n!=null){let a=n;Array.isArray(a)&&(a=a.map(s=>lne(s))),w(e,["generatedVideos"],a)}const r=_(t,["raiMediaFilteredCount"]);r!=null&&w(e,["raiMediaFilteredCount"],r);const i=_(t,["raiMediaFilteredReasons"]);return i!=null&&w(e,["raiMediaFilteredReasons"],i),e}function rne(t,e){const n={},r=_(t,["prompt"]);e!==void 0&&r!=null&&w(e,["instances[0]","prompt"],r);const i=_(t,["image"]);e!==void 0&&i!=null&&w(e,["instances[0]","image"],P_(i));const a=_(t,["video"]);return e!==void 0&&a!=null&&w(e,["instances[0]","video"],HU(a)),n}function ine(t,e){const n={},r=_(t,["prompt"]);e!==void 0&&r!=null&&w(e,["instances[0]","prompt"],r);const i=_(t,["image"]);e!==void 0&&i!=null&&w(e,["instances[0]","image"],Ks(i));const a=_(t,["video"]);return e!==void 0&&a!=null&&w(e,["instances[0]","video"],GU(a)),n}function ane(t){const e={},n=_(t,["_self"]);n!=null&&w(e,["image"],gne(n));const r=_(t,["raiFilteredReason"]);r!=null&&w(e,["raiFilteredReason"],r);const i=_(t,["_self"]);return i!=null&&w(e,["safetyAttributes"],FU(i)),e}function N_(t){const e={},n=_(t,["_self"]);n!=null&&w(e,["image"],UU(n));const r=_(t,["raiFilteredReason"]);r!=null&&w(e,["raiFilteredReason"],r);const i=_(t,["_self"]);i!=null&&w(e,["safetyAttributes"],BU(i));const a=_(t,["prompt"]);return a!=null&&w(e,["enhancedPrompt"],a),e}function sne(t){const e={},n=_(t,["_self"]);n!=null&&w(e,["mask"],UU(n));const r=_(t,["labels"]);if(r!=null){let i=r;Array.isArray(i)&&(i=i.map(a=>a)),w(e,["labels"],i)}return e}function one(t){const e={},n=_(t,["video"]);return n!=null&&w(e,["video"],Wne(n)),e}function lne(t){const e={},n=_(t,["_self"]);return n!=null&&w(e,["video"],Yne(n)),e}function une(t){const e={},n=_(t,["modelSelectionConfig"]);n!=null&&w(e,["modelConfig"],n);const r=_(t,["responseJsonSchema"]);r!=null&&w(e,["responseJsonSchema"],r);const i=_(t,["audioTimestamp"]);i!=null&&w(e,["audioTimestamp"],i);const a=_(t,["candidateCount"]);a!=null&&w(e,["candidateCount"],a);const s=_(t,["enableAffectiveDialog"]);s!=null&&w(e,["enableAffectiveDialog"],s);const l=_(t,["frequencyPenalty"]);l!=null&&w(e,["frequencyPenalty"],l);const c=_(t,["logprobs"]);c!=null&&w(e,["logprobs"],c);const h=_(t,["maxOutputTokens"]);h!=null&&w(e,["maxOutputTokens"],h);const p=_(t,["mediaResolution"]);p!=null&&w(e,["mediaResolution"],p);const g=_(t,["presencePenalty"]);g!=null&&w(e,["presencePenalty"],g);const x=_(t,["responseLogprobs"]);x!=null&&w(e,["responseLogprobs"],x);const b=_(t,["responseMimeType"]);b!=null&&w(e,["responseMimeType"],b);const C=_(t,["responseModalities"]);C!=null&&w(e,["responseModalities"],C);const A=_(t,["responseSchema"]);A!=null&&w(e,["responseSchema"],A);const D=_(t,["routingConfig"]);D!=null&&w(e,["routingConfig"],D);const R=_(t,["seed"]);R!=null&&w(e,["seed"],R);const j=_(t,["speechConfig"]);j!=null&&w(e,["speechConfig"],zU(j));const O=_(t,["stopSequences"]);O!=null&&w(e,["stopSequences"],O);const q=_(t,["temperature"]);q!=null&&w(e,["temperature"],q);const $=_(t,["thinkingConfig"]);$!=null&&w(e,["thinkingConfig"],$);const H=_(t,["topK"]);H!=null&&w(e,["topK"],H);const U=_(t,["topP"]);if(U!=null&&w(e,["topP"],U),_(t,["enableEnhancedCivicAnswers"])!==void 0)throw new Error("enableEnhancedCivicAnswers parameter is not supported in Vertex AI.");return e}function cne(t,e){const n={},r=_(e,["model"]);return r!=null&&w(n,["_url","name"],$t(t,r)),n}function dne(t,e){const n={},r=_(e,["model"]);return r!=null&&w(n,["_url","name"],$t(t,r)),n}function fne(t){const e={};if(_(t,["authConfig"])!==void 0)throw new Error("authConfig parameter is not supported in Gemini API.");const n=_(t,["enableWidget"]);return n!=null&&w(e,["enableWidget"],n),e}function hne(t){const e={};if(_(t,["excludeDomains"])!==void 0)throw new Error("excludeDomains parameter is not supported in Gemini API.");if(_(t,["blockingConfidence"])!==void 0)throw new Error("blockingConfidence parameter is not supported in Gemini API.");const n=_(t,["timeRangeFilter"]);return n!=null&&w(e,["timeRangeFilter"],n),e}function mne(t){const e={},n=_(t,["aspectRatio"]);n!=null&&w(e,["aspectRatio"],n);const r=_(t,["imageSize"]);if(r!=null&&w(e,["imageSize"],r),_(t,["outputMimeType"])!==void 0)throw new Error("outputMimeType parameter is not supported in Gemini API.");if(_(t,["outputCompressionQuality"])!==void 0)throw new Error("outputCompressionQuality parameter is not supported in Gemini API.");return e}function pne(t){const e={},n=_(t,["aspectRatio"]);n!=null&&w(e,["aspectRatio"],n);const r=_(t,["imageSize"]);r!=null&&w(e,["imageSize"],r);const i=_(t,["outputMimeType"]);i!=null&&w(e,["imageOutputOptions","mimeType"],i);const a=_(t,["outputCompressionQuality"]);return a!=null&&w(e,["imageOutputOptions","compressionQuality"],a),e}function gne(t){const e={},n=_(t,["bytesBase64Encoded"]);n!=null&&w(e,["imageBytes"],xc(n));const r=_(t,["mimeType"]);return r!=null&&w(e,["mimeType"],r),e}function UU(t){const e={},n=_(t,["gcsUri"]);n!=null&&w(e,["gcsUri"],n);const r=_(t,["bytesBase64Encoded"]);r!=null&&w(e,["imageBytes"],xc(r));const i=_(t,["mimeType"]);return i!=null&&w(e,["mimeType"],i),e}function P_(t){const e={};if(_(t,["gcsUri"])!==void 0)throw new Error("gcsUri parameter is not supported in Gemini API.");const n=_(t,["imageBytes"]);n!=null&&w(e,["bytesBase64Encoded"],xc(n));const r=_(t,["mimeType"]);return r!=null&&w(e,["mimeType"],r),e}function Ks(t){const e={},n=_(t,["gcsUri"]);n!=null&&w(e,["gcsUri"],n);const r=_(t,["imageBytes"]);r!=null&&w(e,["bytesBase64Encoded"],xc(r));const i=_(t,["mimeType"]);return i!=null&&w(e,["mimeType"],i),e}function yne(t,e,n){const r={},i=_(e,["pageSize"]);n!==void 0&&i!=null&&w(n,["_query","pageSize"],i);const a=_(e,["pageToken"]);n!==void 0&&a!=null&&w(n,["_query","pageToken"],a);const s=_(e,["filter"]);n!==void 0&&s!=null&&w(n,["_query","filter"],s);const l=_(e,["queryBase"]);return n!==void 0&&l!=null&&w(n,["_url","models_url"],DU(t,l)),r}function vne(t,e,n){const r={},i=_(e,["pageSize"]);n!==void 0&&i!=null&&w(n,["_query","pageSize"],i);const a=_(e,["pageToken"]);n!==void 0&&a!=null&&w(n,["_query","pageToken"],a);const s=_(e,["filter"]);n!==void 0&&s!=null&&w(n,["_query","filter"],s);const l=_(e,["queryBase"]);return n!==void 0&&l!=null&&w(n,["_url","models_url"],DU(t,l)),r}function xne(t,e){const n={},r=_(e,["config"]);return r!=null&&yne(t,r,n),n}function _ne(t,e){const n={},r=_(e,["config"]);return r!=null&&vne(t,r,n),n}function bne(t){const e={},n=_(t,["sdkHttpResponse"]);n!=null&&w(e,["sdkHttpResponse"],n);const r=_(t,["nextPageToken"]);r!=null&&w(e,["nextPageToken"],r);const i=_(t,["_self"]);if(i!=null){let a=RU(i);Array.isArray(a)&&(a=a.map(s=>a1(s))),w(e,["models"],a)}return e}function wne(t){const e={},n=_(t,["sdkHttpResponse"]);n!=null&&w(e,["sdkHttpResponse"],n);const r=_(t,["nextPageToken"]);r!=null&&w(e,["nextPageToken"],r);const i=_(t,["_self"]);if(i!=null){let a=RU(i);Array.isArray(a)&&(a=a.map(s=>s1(s))),w(e,["models"],a)}return e}function Ene(t){const e={},n=_(t,["maskMode"]);n!=null&&w(e,["maskMode"],n);const r=_(t,["segmentationClasses"]);r!=null&&w(e,["maskClasses"],r);const i=_(t,["maskDilation"]);return i!=null&&w(e,["dilation"],i),e}function a1(t){const e={},n=_(t,["name"]);n!=null&&w(e,["name"],n);const r=_(t,["displayName"]);r!=null&&w(e,["displayName"],r);const i=_(t,["description"]);i!=null&&w(e,["description"],i);const a=_(t,["version"]);a!=null&&w(e,["version"],a);const s=_(t,["_self"]);s!=null&&w(e,["tunedModelInfo"],Une(s));const l=_(t,["inputTokenLimit"]);l!=null&&w(e,["inputTokenLimit"],l);const c=_(t,["outputTokenLimit"]);c!=null&&w(e,["outputTokenLimit"],c);const h=_(t,["supportedGenerationMethods"]);h!=null&&w(e,["supportedActions"],h);const p=_(t,["temperature"]);p!=null&&w(e,["temperature"],p);const g=_(t,["maxTemperature"]);g!=null&&w(e,["maxTemperature"],g);const x=_(t,["topP"]);x!=null&&w(e,["topP"],x);const b=_(t,["topK"]);b!=null&&w(e,["topK"],b);const C=_(t,["thinking"]);return C!=null&&w(e,["thinking"],C),e}function s1(t){const e={},n=_(t,["name"]);n!=null&&w(e,["name"],n);const r=_(t,["displayName"]);r!=null&&w(e,["displayName"],r);const i=_(t,["description"]);i!=null&&w(e,["description"],i);const a=_(t,["versionId"]);a!=null&&w(e,["version"],a);const s=_(t,["deployedModels"]);if(s!=null){let g=s;Array.isArray(g)&&(g=g.map(x=>jte(x))),w(e,["endpoints"],g)}const l=_(t,["labels"]);l!=null&&w(e,["labels"],l);const c=_(t,["_self"]);c!=null&&w(e,["tunedModelInfo"],Fne(c));const h=_(t,["defaultCheckpointId"]);h!=null&&w(e,["defaultCheckpointId"],h);const p=_(t,["checkpoints"]);if(p!=null){let g=p;Array.isArray(g)&&(g=g.map(x=>x)),w(e,["checkpoints"],g)}return e}function Tne(t){const e={},n=_(t,["mediaResolution"]);n!=null&&w(e,["mediaResolution"],n);const r=_(t,["codeExecutionResult"]);r!=null&&w(e,["codeExecutionResult"],r);const i=_(t,["executableCode"]);i!=null&&w(e,["executableCode"],i);const a=_(t,["fileData"]);a!=null&&w(e,["fileData"],Lte(a));const s=_(t,["functionCall"]);s!=null&&w(e,["functionCall"],Vte(s));const l=_(t,["functionResponse"]);l!=null&&w(e,["functionResponse"],l);const c=_(t,["inlineData"]);c!=null&&w(e,["inlineData"],ute(c));const h=_(t,["text"]);h!=null&&w(e,["text"],h);const p=_(t,["thought"]);p!=null&&w(e,["thought"],p);const g=_(t,["thoughtSignature"]);g!=null&&w(e,["thoughtSignature"],g);const x=_(t,["videoMetadata"]);return x!=null&&w(e,["videoMetadata"],x),e}function Sne(t){const e={},n=_(t,["productImage"]);return n!=null&&w(e,["image"],Ks(n)),e}function Ane(t,e){const n={},r=_(t,["numberOfImages"]);e!==void 0&&r!=null&&w(e,["parameters","sampleCount"],r);const i=_(t,["baseSteps"]);e!==void 0&&i!=null&&w(e,["parameters","baseSteps"],i);const a=_(t,["outputGcsUri"]);e!==void 0&&a!=null&&w(e,["parameters","storageUri"],a);const s=_(t,["seed"]);e!==void 0&&s!=null&&w(e,["parameters","seed"],s);const l=_(t,["safetyFilterLevel"]);e!==void 0&&l!=null&&w(e,["parameters","safetySetting"],l);const c=_(t,["personGeneration"]);e!==void 0&&c!=null&&w(e,["parameters","personGeneration"],c);const h=_(t,["addWatermark"]);e!==void 0&&h!=null&&w(e,["parameters","addWatermark"],h);const p=_(t,["outputMimeType"]);e!==void 0&&p!=null&&w(e,["parameters","outputOptions","mimeType"],p);const g=_(t,["outputCompressionQuality"]);e!==void 0&&g!=null&&w(e,["parameters","outputOptions","compressionQuality"],g);const x=_(t,["enhancePrompt"]);e!==void 0&&x!=null&&w(e,["parameters","enhancePrompt"],x);const b=_(t,["labels"]);return e!==void 0&&b!=null&&w(e,["labels"],b),n}function Cne(t,e){const n={},r=_(e,["model"]);r!=null&&w(n,["_url","model"],$t(t,r));const i=_(e,["source"]);i!=null&&Nne(i,n);const a=_(e,["config"]);return a!=null&&Ane(a,n),n}function Ine(t){const e={},n=_(t,["predictions"]);if(n!=null){let r=n;Array.isArray(r)&&(r=r.map(i=>N_(i))),w(e,["generatedImages"],r)}return e}function Nne(t,e){const n={},r=_(t,["prompt"]);e!==void 0&&r!=null&&w(e,["instances[0]","prompt"],r);const i=_(t,["personImage"]);e!==void 0&&i!=null&&w(e,["instances[0]","personImage","image"],Ks(i));const a=_(t,["productImages"]);if(e!==void 0&&a!=null){let s=a;Array.isArray(s)&&(s=s.map(l=>Sne(l))),w(e,["instances[0]","productImages"],s)}return n}function Pne(t){const e={},n=_(t,["referenceImage"]);n!=null&&w(e,["referenceImage"],Ks(n));const r=_(t,["referenceId"]);r!=null&&w(e,["referenceId"],r);const i=_(t,["referenceType"]);i!=null&&w(e,["referenceType"],i);const a=_(t,["maskImageConfig"]);a!=null&&w(e,["maskImageConfig"],Ene(a));const s=_(t,["controlImageConfig"]);s!=null&&w(e,["controlImageConfig"],gte(s));const l=_(t,["styleImageConfig"]);l!=null&&w(e,["styleImageConfig"],l);const c=_(t,["subjectImageConfig"]);return c!=null&&w(e,["subjectImageConfig"],c),e}function FU(t){const e={},n=_(t,["safetyAttributes","categories"]);n!=null&&w(e,["categories"],n);const r=_(t,["safetyAttributes","scores"]);r!=null&&w(e,["scores"],r);const i=_(t,["contentType"]);return i!=null&&w(e,["contentType"],i),e}function BU(t){const e={},n=_(t,["safetyAttributes","categories"]);n!=null&&w(e,["categories"],n);const r=_(t,["safetyAttributes","scores"]);r!=null&&w(e,["scores"],r);const i=_(t,["contentType"]);return i!=null&&w(e,["contentType"],i),e}function Dne(t){const e={},n=_(t,["category"]);if(n!=null&&w(e,["category"],n),_(t,["method"])!==void 0)throw new Error("method parameter is not supported in Gemini API.");const r=_(t,["threshold"]);return r!=null&&w(e,["threshold"],r),e}function Rne(t){const e={},n=_(t,["image"]);return n!=null&&w(e,["image"],Ks(n)),e}function kne(t,e){const n={},r=_(t,["mode"]);e!==void 0&&r!=null&&w(e,["parameters","mode"],r);const i=_(t,["maxPredictions"]);e!==void 0&&i!=null&&w(e,["parameters","maxPredictions"],i);const a=_(t,["confidenceThreshold"]);e!==void 0&&a!=null&&w(e,["parameters","confidenceThreshold"],a);const s=_(t,["maskDilation"]);e!==void 0&&s!=null&&w(e,["parameters","maskDilation"],s);const l=_(t,["binaryColorThreshold"]);e!==void 0&&l!=null&&w(e,["parameters","binaryColorThreshold"],l);const c=_(t,["labels"]);return e!==void 0&&c!=null&&w(e,["labels"],c),n}function Mne(t,e){const n={},r=_(e,["model"]);r!=null&&w(n,["_url","model"],$t(t,r));const i=_(e,["source"]);i!=null&&jne(i,n);const a=_(e,["config"]);return a!=null&&kne(a,n),n}function One(t){const e={},n=_(t,["predictions"]);if(n!=null){let r=n;Array.isArray(r)&&(r=r.map(i=>sne(i))),w(e,["generatedMasks"],r)}return e}function jne(t,e){const n={},r=_(t,["prompt"]);e!==void 0&&r!=null&&w(e,["instances[0]","prompt"],r);const i=_(t,["image"]);e!==void 0&&i!=null&&w(e,["instances[0]","image"],Ks(i));const a=_(t,["scribbleImage"]);return e!==void 0&&a!=null&&w(e,["instances[0]","scribble"],Rne(a)),n}function zU(t){const e={},n=_(t,["languageCode"]);n!=null&&w(e,["languageCode"],n);const r=_(t,["voiceConfig"]);if(r!=null&&w(e,["voiceConfig"],r),_(t,["multiSpeakerVoiceConfig"])!==void 0)throw new Error("multiSpeakerVoiceConfig parameter is not supported in Vertex AI.");return e}function Lne(t){const e={},n=_(t,["functionCallingConfig"]);n!=null&&w(e,["functionCallingConfig"],Ute(n));const r=_(t,["retrievalConfig"]);return r!=null&&w(e,["retrievalConfig"],r),e}function Vne(t){const e={},n=_(t,["functionDeclarations"]);if(n!=null){let p=n;Array.isArray(p)&&(p=p.map(g=>g)),w(e,["functionDeclarations"],p)}if(_(t,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");const r=_(t,["googleSearchRetrieval"]);r!=null&&w(e,["googleSearchRetrieval"],r);const i=_(t,["computerUse"]);i!=null&&w(e,["computerUse"],i);const a=_(t,["fileSearch"]);a!=null&&w(e,["fileSearch"],a);const s=_(t,["codeExecution"]);if(s!=null&&w(e,["codeExecution"],s),_(t,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");const l=_(t,["googleMaps"]);l!=null&&w(e,["googleMaps"],fne(l));const c=_(t,["googleSearch"]);c!=null&&w(e,["googleSearch"],hne(c));const h=_(t,["urlContext"]);return h!=null&&w(e,["urlContext"],h),e}function qU(t){const e={},n=_(t,["functionDeclarations"]);if(n!=null){let g=n;Array.isArray(g)&&(g=g.map(x=>Fte(x))),w(e,["functionDeclarations"],g)}const r=_(t,["retrieval"]);r!=null&&w(e,["retrieval"],r);const i=_(t,["googleSearchRetrieval"]);i!=null&&w(e,["googleSearchRetrieval"],i);const a=_(t,["computerUse"]);if(a!=null&&w(e,["computerUse"],a),_(t,["fileSearch"])!==void 0)throw new Error("fileSearch parameter is not supported in Vertex AI.");const s=_(t,["codeExecution"]);s!=null&&w(e,["codeExecution"],s);const l=_(t,["enterpriseWebSearch"]);l!=null&&w(e,["enterpriseWebSearch"],l);const c=_(t,["googleMaps"]);c!=null&&w(e,["googleMaps"],c);const h=_(t,["googleSearch"]);h!=null&&w(e,["googleSearch"],h);const p=_(t,["urlContext"]);return p!=null&&w(e,["urlContext"],p),e}function Une(t){const e={},n=_(t,["baseModel"]);n!=null&&w(e,["baseModel"],n);const r=_(t,["createTime"]);r!=null&&w(e,["createTime"],r);const i=_(t,["updateTime"]);return i!=null&&w(e,["updateTime"],i),e}function Fne(t){const e={},n=_(t,["labels","google-vertex-llm-tuning-base-model-id"]);n!=null&&w(e,["baseModel"],n);const r=_(t,["createTime"]);r!=null&&w(e,["createTime"],r);const i=_(t,["updateTime"]);return i!=null&&w(e,["updateTime"],i),e}function Bne(t,e){const n={},r=_(t,["displayName"]);e!==void 0&&r!=null&&w(e,["displayName"],r);const i=_(t,["description"]);e!==void 0&&i!=null&&w(e,["description"],i);const a=_(t,["defaultCheckpointId"]);return e!==void 0&&a!=null&&w(e,["defaultCheckpointId"],a),n}function zne(t,e){const n={},r=_(t,["displayName"]);e!==void 0&&r!=null&&w(e,["displayName"],r);const i=_(t,["description"]);e!==void 0&&i!=null&&w(e,["description"],i);const a=_(t,["defaultCheckpointId"]);return e!==void 0&&a!=null&&w(e,["defaultCheckpointId"],a),n}function qne(t,e){const n={},r=_(e,["model"]);r!=null&&w(n,["_url","name"],$t(t,r));const i=_(e,["config"]);return i!=null&&Bne(i,n),n}function Hne(t,e){const n={},r=_(e,["model"]);r!=null&&w(n,["_url","model"],$t(t,r));const i=_(e,["config"]);return i!=null&&zne(i,n),n}function Gne(t,e){const n={},r=_(t,["outputGcsUri"]);e!==void 0&&r!=null&&w(e,["parameters","storageUri"],r);const i=_(t,["safetyFilterLevel"]);e!==void 0&&i!=null&&w(e,["parameters","safetySetting"],i);const a=_(t,["personGeneration"]);e!==void 0&&a!=null&&w(e,["parameters","personGeneration"],a);const s=_(t,["includeRaiReason"]);e!==void 0&&s!=null&&w(e,["parameters","includeRaiReason"],s);const l=_(t,["outputMimeType"]);e!==void 0&&l!=null&&w(e,["parameters","outputOptions","mimeType"],l);const c=_(t,["outputCompressionQuality"]);e!==void 0&&c!=null&&w(e,["parameters","outputOptions","compressionQuality"],c);const h=_(t,["enhanceInputImage"]);e!==void 0&&h!=null&&w(e,["parameters","upscaleConfig","enhanceInputImage"],h);const p=_(t,["imagePreservationFactor"]);e!==void 0&&p!=null&&w(e,["parameters","upscaleConfig","imagePreservationFactor"],p);const g=_(t,["labels"]);e!==void 0&&g!=null&&w(e,["labels"],g);const x=_(t,["numberOfImages"]);e!==void 0&&x!=null&&w(e,["parameters","sampleCount"],x);const b=_(t,["mode"]);return e!==void 0&&b!=null&&w(e,["parameters","mode"],b),n}function $ne(t,e){const n={},r=_(e,["model"]);r!=null&&w(n,["_url","model"],$t(t,r));const i=_(e,["image"]);i!=null&&w(n,["instances[0]","image"],Ks(i));const a=_(e,["upscaleFactor"]);a!=null&&w(n,["parameters","upscaleConfig","upscaleFactor"],a);const s=_(e,["config"]);return s!=null&&Gne(s,n),n}function Kne(t){const e={},n=_(t,["sdkHttpResponse"]);n!=null&&w(e,["sdkHttpResponse"],n);const r=_(t,["predictions"]);if(r!=null){let i=r;Array.isArray(i)&&(i=i.map(a=>N_(a))),w(e,["generatedImages"],i)}return e}function Wne(t){const e={},n=_(t,["uri"]);n!=null&&w(e,["uri"],n);const r=_(t,["encodedVideo"]);r!=null&&w(e,["videoBytes"],xc(r));const i=_(t,["encoding"]);return i!=null&&w(e,["mimeType"],i),e}function Yne(t){const e={},n=_(t,["gcsUri"]);n!=null&&w(e,["uri"],n);const r=_(t,["bytesBase64Encoded"]);r!=null&&w(e,["videoBytes"],xc(r));const i=_(t,["mimeType"]);return i!=null&&w(e,["mimeType"],i),e}function Zne(t){const e={},n=_(t,["image"]);n!=null&&w(e,["_self"],Ks(n));const r=_(t,["maskMode"]);return r!=null&&w(e,["maskMode"],r),e}function Jne(t){const e={},n=_(t,["image"]);n!=null&&w(e,["image"],P_(n));const r=_(t,["referenceType"]);return r!=null&&w(e,["referenceType"],r),e}function Qne(t){const e={},n=_(t,["image"]);n!=null&&w(e,["image"],Ks(n));const r=_(t,["referenceType"]);return r!=null&&w(e,["referenceType"],r),e}function HU(t){const e={},n=_(t,["uri"]);n!=null&&w(e,["uri"],n);const r=_(t,["videoBytes"]);r!=null&&w(e,["encodedVideo"],xc(r));const i=_(t,["mimeType"]);return i!=null&&w(e,["encoding"],i),e}function GU(t){const e={},n=_(t,["uri"]);n!=null&&w(e,["gcsUri"],n);const r=_(t,["videoBytes"]);r!=null&&w(e,["bytesBase64Encoded"],xc(r));const i=_(t,["mimeType"]);return i!=null&&w(e,["mimeType"],i),e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const Xne="Content-Type",ere="X-Server-Timeout",tre="User-Agent",o1="x-goog-api-client",nre="1.30.0",rre=`google-genai-sdk/${nre}`,ire="v1beta1",are="v1beta",hO=/^\s*data: (.*)(?:\n\n|\r\r|\r\n\r\n)/;class sre{constructor(e){var n,r;this.clientOptions=Object.assign(Object.assign({},e),{project:e.project,location:e.location,apiKey:e.apiKey,vertexai:e.vertexai});const i={};this.clientOptions.vertexai?(i.apiVersion=(n=this.clientOptions.apiVersion)!==null&&n!==void 0?n:ire,i.baseUrl=this.baseUrlFromProjectLocation(),this.normalizeAuthParameters()):(i.apiVersion=(r=this.clientOptions.apiVersion)!==null&&r!==void 0?r:are,i.baseUrl="https://generativelanguage.googleapis.com/"),i.headers=this.getDefaultHeaders(),this.clientOptions.httpOptions=i,e.httpOptions&&(this.clientOptions.httpOptions=this.patchHttpOptions(i,e.httpOptions))}baseUrlFromProjectLocation(){return this.clientOptions.project&&this.clientOptions.location&&this.clientOptions.location!=="global"?`https://${this.clientOptions.location}-aiplatform.googleapis.com/`:"https://aiplatform.googleapis.com/"}normalizeAuthParameters(){if(this.clientOptions.project&&this.clientOptions.location){this.clientOptions.apiKey=void 0;return}this.clientOptions.project=void 0,this.clientOptions.location=void 0}isVertexAI(){var e;return(e=this.clientOptions.vertexai)!==null&&e!==void 0?e:!1}getProject(){return this.clientOptions.project}getLocation(){return this.clientOptions.location}getApiVersion(){if(this.clientOptions.httpOptions&&this.clientOptions.httpOptions.apiVersion!==void 0)return this.clientOptions.httpOptions.apiVersion;throw new Error("API version is not set.")}getBaseUrl(){if(this.clientOptions.httpOptions&&this.clientOptions.httpOptions.baseUrl!==void 0)return this.clientOptions.httpOptions.baseUrl;throw new Error("Base URL is not set.")}getRequestUrl(){return this.getRequestUrlInternal(this.clientOptions.httpOptions)}getHeaders(){if(this.clientOptions.httpOptions&&this.clientOptions.httpOptions.headers!==void 0)return this.clientOptions.httpOptions.headers;throw new Error("Headers are not set.")}getRequestUrlInternal(e){if(!e||e.baseUrl===void 0||e.apiVersion===void 0)throw new Error("HTTP options are not correctly set.");const r=[e.baseUrl.endsWith("/")?e.baseUrl.slice(0,-1):e.baseUrl];return e.apiVersion&&e.apiVersion!==""&&r.push(e.apiVersion),r.join("/")}getBaseResourcePath(){return`projects/${this.clientOptions.project}/locations/${this.clientOptions.location}`}getApiKey(){return this.clientOptions.apiKey}getWebsocketBaseUrl(){const e=this.getBaseUrl(),n=new URL(e);return n.protocol=n.protocol=="http:"?"ws":"wss",n.toString()}setBaseUrl(e){if(this.clientOptions.httpOptions)this.clientOptions.httpOptions.baseUrl=e;else throw new Error("HTTP options are not correctly set.")}constructUrl(e,n,r){const i=[this.getRequestUrlInternal(n)];return r&&i.push(this.getBaseResourcePath()),e!==""&&i.push(e),new URL(`${i.join("/")}`)}shouldPrependVertexProjectPath(e){return!(this.clientOptions.apiKey||!this.clientOptions.vertexai||e.path.startsWith("projects/")||e.httpMethod==="GET"&&e.path.startsWith("publishers/google/models"))}async request(e){let n=this.clientOptions.httpOptions;e.httpOptions&&(n=this.patchHttpOptions(this.clientOptions.httpOptions,e.httpOptions));const r=this.shouldPrependVertexProjectPath(e),i=this.constructUrl(e.path,n,r);if(e.queryParams)for(const[s,l]of Object.entries(e.queryParams))i.searchParams.append(s,String(l));let a={};if(e.httpMethod==="GET"){if(e.body&&e.body!=="{}")throw new Error("Request body should be empty for GET request, but got non empty request body")}else a.body=e.body;return a=await this.includeExtraHttpOptionsToRequestInit(a,n,i.toString(),e.abortSignal),this.unaryApiCall(i,a,e.httpMethod)}patchHttpOptions(e,n){const r=JSON.parse(JSON.stringify(e));for(const[i,a]of Object.entries(n))typeof a=="object"?r[i]=Object.assign(Object.assign({},r[i]),a):a!==void 0&&(r[i]=a);return r}async requestStream(e){let n=this.clientOptions.httpOptions;e.httpOptions&&(n=this.patchHttpOptions(this.clientOptions.httpOptions,e.httpOptions));const r=this.shouldPrependVertexProjectPath(e),i=this.constructUrl(e.path,n,r);(!i.searchParams.has("alt")||i.searchParams.get("alt")!=="sse")&&i.searchParams.set("alt","sse");let a={};return a.body=e.body,a=await this.includeExtraHttpOptionsToRequestInit(a,n,i.toString(),e.abortSignal),this.streamApiCall(i,a,e.httpMethod)}async includeExtraHttpOptionsToRequestInit(e,n,r,i){if(n&&n.timeout||i){const a=new AbortController,s=a.signal;if(n.timeout&&(n==null?void 0:n.timeout)>0){const l=setTimeout(()=>a.abort(),n.timeout);l&&typeof l.unref=="function"&&l.unref()}i&&i.addEventListener("abort",()=>{a.abort()}),e.signal=s}return n&&n.extraBody!==null&&ore(e,n.extraBody),e.headers=await this.getHeadersInternal(n,r),e}async unaryApiCall(e,n,r){return this.apiCall(e.toString(),Object.assign(Object.assign({},n),{method:r})).then(async i=>(await mO(i),new n1(i))).catch(i=>{throw i instanceof Error?i:new Error(JSON.stringify(i))})}async streamApiCall(e,n,r){return this.apiCall(e.toString(),Object.assign(Object.assign({},n),{method:r})).then(async i=>(await mO(i),this.processStreamResponse(i))).catch(i=>{throw i instanceof Error?i:new Error(JSON.stringify(i))})}processStreamResponse(e){var n;return lh(this,arguments,function*(){const i=(n=e==null?void 0:e.body)===null||n===void 0?void 0:n.getReader(),a=new TextDecoder("utf-8");if(!i)throw new Error("Response body is empty");try{let s="";for(;;){const{done:l,value:c}=yield Sn(i.read());if(l){if(s.trim().length>0)throw new Error("Incomplete JSON segment at the end");break}const h=a.decode(c,{stream:!0});try{const g=JSON.parse(h);if("error"in g){const x=JSON.parse(JSON.stringify(g.error)),b=x.status,C=x.code,A=`got status: ${b}. ${JSON.stringify(g)}`;if(C>=400&&C<600)throw new C_({message:A,status:C})}}catch(g){if(g.name==="ApiError")throw g}s+=h;let p=s.match(hO);for(;p;){const g=p[1];try{const x=new Response(g,{headers:e==null?void 0:e.headers,status:e==null?void 0:e.status,statusText:e==null?void 0:e.statusText});yield yield Sn(new n1(x)),s=s.slice(p[0].length),p=s.match(hO)}catch(x){throw new Error(`exception parsing stream chunk ${g}. ${x}`)}}}}finally{i.releaseLock()}})}async apiCall(e,n){return fetch(e,n).catch(r=>{throw new Error(`exception ${r} sending request`)})}getDefaultHeaders(){const e={},n=rre+" "+this.clientOptions.userAgentExtra;return e[tre]=n,e[o1]=n,e[Xne]="application/json",e}async getHeadersInternal(e,n){const r=new Headers;if(e&&e.headers){for(const[i,a]of Object.entries(e.headers))r.append(i,a);e.timeout&&e.timeout>0&&r.append(ere,String(Math.ceil(e.timeout/1e3)))}return await this.clientOptions.auth.addAuthHeaders(r,n),r}getFileName(e){var n;let r="";return typeof e=="string"&&(r=e.replace(/[/\\]+$/,""),r=(n=r.split(/[/\\]/).pop())!==null&&n!==void 0?n:""),r}async uploadFile(e,n){var r;const i={};n!=null&&(i.mimeType=n.mimeType,i.name=n.name,i.displayName=n.displayName),i.name&&!i.name.startsWith("files/")&&(i.name=`files/${i.name}`);const a=this.clientOptions.uploader,s=await a.stat(e);i.sizeBytes=String(s.size);const l=(r=n==null?void 0:n.mimeType)!==null&&r!==void 0?r:s.type;if(l===void 0||l==="")throw new Error("Can not determine mimeType. Please provide mimeType in the config.");i.mimeType=l;const c={file:i},h=this.getFileName(e),p=qe("upload/v1beta/files",c._url),g=await this.fetchUploadUrl(p,i.sizeBytes,i.mimeType,h,c,n==null?void 0:n.httpOptions);return a.upload(e,g,this)}async uploadFileToFileSearchStore(e,n,r){var i;const a=this.clientOptions.uploader,s=await a.stat(n),l=String(s.size),c=(i=r==null?void 0:r.mimeType)!==null&&i!==void 0?i:s.type;if(c===void 0||c==="")throw new Error("Can not determine mimeType. Please provide mimeType in the config.");const h=`upload/v1beta/${e}:uploadToFileSearchStore`,p=this.getFileName(n),g={};r!=null&&r.customMetadata&&(g.customMetadata=r.customMetadata),r!=null&&r.chunkingConfig&&(g.chunkingConfig=r.chunkingConfig);const x=await this.fetchUploadUrl(h,l,c,p,g,r==null?void 0:r.httpOptions);return a.uploadToFileSearchStore(n,x,this)}async downloadFile(e){await this.clientOptions.downloader.download(e,this)}async fetchUploadUrl(e,n,r,i,a,s){var l;let c={};s?c=s:c={apiVersion:"",headers:Object.assign({"Content-Type":"application/json","X-Goog-Upload-Protocol":"resumable","X-Goog-Upload-Command":"start","X-Goog-Upload-Header-Content-Length":`${n}`,"X-Goog-Upload-Header-Content-Type":`${r}`},i?{"X-Goog-Upload-File-Name":i}:{})};const h=await this.request({path:e,body:JSON.stringify(a),httpMethod:"POST",httpOptions:c});if(!h||!(h!=null&&h.headers))throw new Error("Server did not return an HttpResponse or the returned HttpResponse did not have headers.");const p=(l=h==null?void 0:h.headers)===null||l===void 0?void 0:l["x-goog-upload-url"];if(p===void 0)throw new Error("Failed to get upload url. Server did not return the x-google-upload-url in the headers");return p}}async function mO(t){var e;if(t===void 0)throw new Error("response is undefined");if(!t.ok){const n=t.status;let r;!((e=t.headers.get("content-type"))===null||e===void 0)&&e.includes("application/json")?r=await t.json():r={error:{message:await t.text(),code:t.status,status:t.statusText}};const i=JSON.stringify(r);throw n>=400&&n<600?new C_({message:i,status:n}):new Error(i)}}function ore(t,e){if(!e||Object.keys(e).length===0)return;if(t.body instanceof Blob){console.warn("includeExtraBodyToRequestInit: extraBody provided but current request body is a Blob. extraBody will be ignored as merging is not supported for Blob bodies.");return}let n={};if(typeof t.body=="string"&&t.body.length>0)try{const a=JSON.parse(t.body);if(typeof a=="object"&&a!==null&&!Array.isArray(a))n=a;else{console.warn("includeExtraBodyToRequestInit: Original request body is valid JSON but not a non-array object. Skip applying extraBody to the request body.");return}}catch{console.warn("includeExtraBodyToRequestInit: Original request body is not valid JSON. Skip applying extraBody to the request body.");return}function r(a,s){const l=Object.assign({},a);for(const c in s)if(Object.prototype.hasOwnProperty.call(s,c)){const h=s[c],p=l[c];h&&typeof h=="object"&&!Array.isArray(h)&&p&&typeof p=="object"&&!Array.isArray(p)?l[c]=r(p,h):(p&&h&&typeof p!=typeof h&&console.warn(`includeExtraBodyToRequestInit:deepMerge: Type mismatch for key "${c}". Original type: ${typeof p}, New type: ${typeof h}. Overwriting.`),l[c]=h)}return l}const i=r(n,e);t.body=JSON.stringify(i)}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const lre="mcp_used/unknown";let ure=!1;function $U(t){for(const e of t)if(cre(e)||typeof e=="object"&&"inputSchema"in e)return!0;return ure}function KU(t){var e;const n=(e=t[o1])!==null&&e!==void 0?e:"";t[o1]=(n+` ${lre}`).trimStart()}function cre(t){return t!==null&&typeof t=="object"&&t instanceof RC}function dre(t,e=100){return lh(this,arguments,function*(){let r,i=0;for(;i<e;){const a=yield Sn(t.listTools({cursor:r}));for(const s of a.tools)yield yield Sn(s),i++;if(!a.nextCursor)break;r=a.nextCursor}})}class RC{constructor(e=[],n){this.mcpTools=[],this.functionNameToMcpClient={},this.mcpClients=e,this.config=n}static create(e,n){return new RC(e,n)}async initialize(){var e,n,r,i;if(this.mcpTools.length>0)return;const a={},s=[];for(const p of this.mcpClients)try{for(var l=!0,c=(n=void 0,jp(dre(p))),h;h=await c.next(),e=h.done,!e;l=!0){i=h.value,l=!1;const g=i;s.push(g);const x=g.name;if(a[x])throw new Error(`Duplicate function name ${x} found in MCP tools. Please ensure function names are unique.`);a[x]=p}}catch(g){n={error:g}}finally{try{!l&&!e&&(r=c.return)&&await r.call(c)}finally{if(n)throw n.error}}this.mcpTools=s,this.functionNameToMcpClient=a}async tool(){return await this.initialize(),rX(this.mcpTools,this.config)}async callTool(e){await this.initialize();const n=[];for(const r of e)if(r.name in this.functionNameToMcpClient){const i=this.functionNameToMcpClient[r.name];let a;this.config.timeout&&(a={timeout:this.config.timeout});const s=await i.callTool({name:r.name,arguments:r.args},void 0,a);n.push({functionResponse:{name:r.name,response:s.isError?{error:s}:s}})}return n}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */async function fre(t,e,n){const r=new YQ;let i;n.data instanceof Blob?i=JSON.parse(await n.data.text()):i=JSON.parse(n.data),Object.assign(r,i),e(r)}class hre{constructor(e,n,r){this.apiClient=e,this.auth=n,this.webSocketFactory=r}async connect(e){var n,r;if(this.apiClient.isVertexAI())throw new Error("Live music is not supported for Vertex AI.");console.warn("Live music generation is experimental and may change in future versions.");const i=this.apiClient.getWebsocketBaseUrl(),a=this.apiClient.getApiVersion(),s=gre(this.apiClient.getDefaultHeaders()),l=this.apiClient.getApiKey(),c=`${i}/ws/google.ai.generativelanguage.${a}.GenerativeService.BidiGenerateMusic?key=${l}`;let h=()=>{};const p=new Promise(O=>{h=O}),g=e.callbacks,x=function(){h({})},b=this.apiClient,C={onopen:x,onmessage:O=>{fre(b,g.onmessage,O)},onerror:(n=g==null?void 0:g.onerror)!==null&&n!==void 0?n:function(O){},onclose:(r=g==null?void 0:g.onclose)!==null&&r!==void 0?r:function(O){}},A=this.webSocketFactory.create(c,pre(s),C);A.connect(),await p;const j={setup:{model:$t(this.apiClient,e.model)}};return A.send(JSON.stringify(j)),new mre(A,this.apiClient)}}class mre{constructor(e,n){this.conn=e,this.apiClient=n}async setWeightedPrompts(e){if(!e.weightedPrompts||Object.keys(e.weightedPrompts).length===0)throw new Error("Weighted prompts must be set and contain at least one entry.");const n=ete(e);this.conn.send(JSON.stringify({clientContent:n}))}async setMusicGenerationConfig(e){e.musicGenerationConfig||(e.musicGenerationConfig={});const n=Xee(e);this.conn.send(JSON.stringify(n))}sendPlaybackControl(e){const n={playbackControl:e};this.conn.send(JSON.stringify(n))}play(){this.sendPlaybackControl(Qf.PLAY)}pause(){this.sendPlaybackControl(Qf.PAUSE)}stop(){this.sendPlaybackControl(Qf.STOP)}resetContext(){this.sendPlaybackControl(Qf.RESET_CONTEXT)}close(){this.conn.close()}}function pre(t){const e={};return t.forEach((n,r)=>{e[r]=n}),e}function gre(t){const e=new Headers;for(const[n,r]of Object.entries(t))e.append(n,r);return e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const yre="FunctionResponse request must have an `id` field from the response of a ToolCall.FunctionalCalls in Google AI.";async function vre(t,e,n){const r=new WQ;let i;n.data instanceof Blob?i=await n.data.text():n.data instanceof ArrayBuffer?i=new TextDecoder().decode(n.data):i=n.data;const a=JSON.parse(i);if(t.isVertexAI()){const s=rte(a);Object.assign(r,s)}else Object.assign(r,a);e(r)}class xre{constructor(e,n,r){this.apiClient=e,this.auth=n,this.webSocketFactory=r,this.music=new hre(this.apiClient,this.auth,this.webSocketFactory)}async connect(e){var n,r,i,a,s,l;if(e.config&&e.config.httpOptions)throw new Error("The Live module does not support httpOptions at request-level in LiveConnectConfig yet. Please use the client-level httpOptions configuration instead.");const c=this.apiClient.getWebsocketBaseUrl(),h=this.apiClient.getApiVersion();let p;const g=this.apiClient.getHeaders();e.config&&e.config.tools&&$U(e.config.tools)&&KU(g);const x=Ere(g);if(this.apiClient.isVertexAI())p=`${c}/ws/google.cloud.aiplatform.${h}.LlmBidiService/BidiGenerateContent`,await this.auth.addAuthHeaders(x,p);else{const B=this.apiClient.getApiKey();let Z="BidiGenerateContent",K="key";B!=null&&B.startsWith("auth_tokens/")&&(console.warn("Warning: Ephemeral token support is experimental and may change in future versions."),h!=="v1alpha"&&console.warn("Warning: The SDK's ephemeral token support is in v1alpha only. Please use const ai = new GoogleGenAI({apiKey: token.name, httpOptions: { apiVersion: 'v1alpha' }}); before session connection."),Z="BidiGenerateContentConstrained",K="access_token"),p=`${c}/ws/google.ai.generativelanguage.${h}.GenerativeService.${Z}?${K}=${B}`}let b=()=>{};const C=new Promise(B=>{b=B}),A=e.callbacks,D=function(){var B;(B=A==null?void 0:A.onopen)===null||B===void 0||B.call(A),b({})},R=this.apiClient,j={onopen:D,onmessage:B=>{vre(R,A.onmessage,B)},onerror:(n=A==null?void 0:A.onerror)!==null&&n!==void 0?n:function(B){},onclose:(r=A==null?void 0:A.onclose)!==null&&r!==void 0?r:function(B){}},O=this.webSocketFactory.create(p,wre(x),j);O.connect(),await C;let q=$t(this.apiClient,e.model);if(this.apiClient.isVertexAI()&&q.startsWith("publishers/")){const B=this.apiClient.getProject(),Z=this.apiClient.getLocation();q=`projects/${B}/locations/${Z}/`+q}let $={};this.apiClient.isVertexAI()&&((i=e.config)===null||i===void 0?void 0:i.responseModalities)===void 0&&(e.config===void 0?e.config={responseModalities:[F0.AUDIO]}:e.config.responseModalities=[F0.AUDIO]),!((a=e.config)===null||a===void 0)&&a.generationConfig&&console.warn("Setting `LiveConnectConfig.generation_config` is deprecated, please set the fields on `LiveConnectConfig` directly. This will become an error in a future version (not before Q3 2025).");const H=(l=(s=e.config)===null||s===void 0?void 0:s.tools)!==null&&l!==void 0?l:[],U=[];for(const B of H)if(this.isCallableTool(B)){const Z=B;U.push(await Z.tool())}else U.push(B);U.length>0&&(e.config.tools=U);const z={model:q,config:e.config,callbacks:e.callbacks};return this.apiClient.isVertexAI()?$=Qee(this.apiClient,z):$=Jee(this.apiClient,z),delete $.config,O.send(JSON.stringify($)),new bre(O,this.apiClient)}isCallableTool(e){return"callTool"in e&&typeof e.callTool=="function"}}const _re={turnComplete:!0};class bre{constructor(e,n){this.conn=e,this.apiClient=n}tLiveClientContent(e,n){if(n.turns!==null&&n.turns!==void 0){let r=[];try{r=hs(n.turns),e.isVertexAI()||(r=r.map(i=>I_(i)))}catch{throw new Error(`Failed to parse client content "turns", type: '${typeof n.turns}'`)}return{clientContent:{turns:r,turnComplete:n.turnComplete}}}return{clientContent:{turnComplete:n.turnComplete}}}tLiveClienttToolResponse(e,n){let r=[];if(n.functionResponses==null)throw new Error("functionResponses is required.");if(Array.isArray(n.functionResponses)?r=n.functionResponses:r=[n.functionResponses],r.length===0)throw new Error("functionResponses is required.");for(const a of r){if(typeof a!="object"||a===null||!("name"in a)||!("response"in a))throw new Error(`Could not parse function response, type '${typeof a}'.`);if(!e.isVertexAI()&&!("id"in a))throw new Error(yre)}return{toolResponse:{functionResponses:r}}}sendClientContent(e){e=Object.assign(Object.assign({},_re),e);const n=this.tLiveClientContent(this.apiClient,e);this.conn.send(JSON.stringify(n))}sendRealtimeInput(e){let n={};this.apiClient.isVertexAI()?n={realtimeInput:nte(e)}:n={realtimeInput:tte(e)},this.conn.send(JSON.stringify(n))}sendToolResponse(e){if(e.functionResponses==null)throw new Error("Tool response parameters are required.");const n=this.tLiveClienttToolResponse(this.apiClient,e);this.conn.send(JSON.stringify(n))}close(){this.conn.close()}}function wre(t){const e={};return t.forEach((n,r)=>{e[r]=n}),e}function Ere(t){const e=new Headers;for(const[n,r]of Object.entries(t))e.append(n,r);return e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const pO=10;function gO(t){var e,n,r;if(!((e=t==null?void 0:t.automaticFunctionCalling)===null||e===void 0)&&e.disable)return!0;let i=!1;for(const s of(n=t==null?void 0:t.tools)!==null&&n!==void 0?n:[])if(uh(s)){i=!0;break}if(!i)return!0;const a=(r=t==null?void 0:t.automaticFunctionCalling)===null||r===void 0?void 0:r.maximumRemoteCalls;return a&&(a<0||!Number.isInteger(a))||a==0?(console.warn("Invalid maximumRemoteCalls value provided for automatic function calling. Disabled automatic function calling. Please provide a valid integer value greater than 0. maximumRemoteCalls provided:",a),!0):!1}function uh(t){return"callTool"in t&&typeof t.callTool=="function"}function Tre(t){var e,n,r;return(r=(n=(e=t.config)===null||e===void 0?void 0:e.tools)===null||n===void 0?void 0:n.some(i=>uh(i)))!==null&&r!==void 0?r:!1}function yO(t){var e;const n=[];return!((e=t==null?void 0:t.config)===null||e===void 0)&&e.tools&&t.config.tools.forEach((r,i)=>{if(uh(r))return;const a=r;a.functionDeclarations&&a.functionDeclarations.length>0&&n.push(i)}),n}function vO(t){var e;return!(!((e=t==null?void 0:t.automaticFunctionCalling)===null||e===void 0)&&e.ignoreCallHistory)}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class Sre extends Hl{constructor(e){super(),this.apiClient=e,this.generateContent=async n=>{var r,i,a,s,l;const c=await this.processParamsMaybeAddMcpUsage(n);if(this.maybeMoveToResponseJsonSchem(n),!Tre(n)||gO(n.config))return await this.generateContentInternal(c);const h=yO(n);if(h.length>0){const A=h.map(D=>`tools[${D}]`).join(", ");throw new Error(`Automatic function calling with CallableTools (or MCP objects) and basic FunctionDeclarations is not yet supported. Incompatible tools found at ${A}.`)}let p,g;const x=hs(c.contents),b=(a=(i=(r=c.config)===null||r===void 0?void 0:r.automaticFunctionCalling)===null||i===void 0?void 0:i.maximumRemoteCalls)!==null&&a!==void 0?a:pO;let C=0;for(;C<b&&(p=await this.generateContentInternal(c),!(!p.functionCalls||p.functionCalls.length===0));){const A=p.candidates[0].content,D=[];for(const R of(l=(s=n.config)===null||s===void 0?void 0:s.tools)!==null&&l!==void 0?l:[])if(uh(R)){const O=await R.callTool(p.functionCalls);D.push(...O)}C++,g={role:"user",parts:D},c.contents=hs(c.contents),c.contents.push(A),c.contents.push(g),vO(c.config)&&(x.push(A),x.push(g))}return vO(c.config)&&(p.automaticFunctionCallingHistory=x),p},this.generateContentStream=async n=>{var r,i,a,s,l;if(this.maybeMoveToResponseJsonSchem(n),gO(n.config)){const g=await this.processParamsMaybeAddMcpUsage(n);return await this.generateContentStreamInternal(g)}const c=yO(n);if(c.length>0){const g=c.map(x=>`tools[${x}]`).join(", ");throw new Error(`Incompatible tools found at ${g}. Automatic function calling with CallableTools (or MCP objects) and basic FunctionDeclarations" is not yet supported.`)}const h=(a=(i=(r=n==null?void 0:n.config)===null||r===void 0?void 0:r.toolConfig)===null||i===void 0?void 0:i.functionCallingConfig)===null||a===void 0?void 0:a.streamFunctionCallArguments,p=(l=(s=n==null?void 0:n.config)===null||s===void 0?void 0:s.automaticFunctionCalling)===null||l===void 0?void 0:l.disable;if(h&&!p)throw new Error("Running in streaming mode with 'streamFunctionCallArguments' enabled, this feature is not compatible with automatic function calling (AFC). Please set 'config.automaticFunctionCalling.disable' to true to disable AFC or leave 'config.toolConfig.functionCallingConfig.streamFunctionCallArguments' to be undefined or set to false to disable streaming function call arguments feature.");return await this.processAfcStream(n)},this.generateImages=async n=>await this.generateImagesInternal(n).then(r=>{var i;let a;const s=[];if(r!=null&&r.generatedImages)for(const c of r.generatedImages)c&&(c!=null&&c.safetyAttributes)&&((i=c==null?void 0:c.safetyAttributes)===null||i===void 0?void 0:i.contentType)==="Positive Prompt"?a=c==null?void 0:c.safetyAttributes:s.push(c);let l;return a?l={generatedImages:s,positivePromptSafetyAttributes:a,sdkHttpResponse:r.sdkHttpResponse}:l={generatedImages:s,sdkHttpResponse:r.sdkHttpResponse},l}),this.list=async n=>{var r;const s={config:Object.assign(Object.assign({},{queryBase:!0}),n==null?void 0:n.config)};if(this.apiClient.isVertexAI()&&!s.config.queryBase){if(!((r=s.config)===null||r===void 0)&&r.filter)throw new Error("Filtering tuned models list for Vertex AI is not currently supported");s.config.filter="labels.tune-type:*"}return new $d(Rl.PAGED_ITEM_MODELS,l=>this.listInternal(l),await this.listInternal(s),s)},this.editImage=async n=>{const r={model:n.model,prompt:n.prompt,referenceImages:[],config:n.config};return n.referenceImages&&n.referenceImages&&(r.referenceImages=n.referenceImages.map(i=>i.toReferenceImageAPI())),await this.editImageInternal(r)},this.upscaleImage=async n=>{let r={numberOfImages:1,mode:"upscale"};n.config&&(r=Object.assign(Object.assign({},r),n.config));const i={model:n.model,image:n.image,upscaleFactor:n.upscaleFactor,config:r};return await this.upscaleImageInternal(i)},this.generateVideos=async n=>{var r,i,a,s,l,c;if((n.prompt||n.image||n.video)&&n.source)throw new Error("Source and prompt/image/video are mutually exclusive. Please only use source.");return this.apiClient.isVertexAI()||(!((r=n.video)===null||r===void 0)&&r.uri&&(!((i=n.video)===null||i===void 0)&&i.videoBytes)?n.video={uri:n.video.uri,mimeType:n.video.mimeType}:!((s=(a=n.source)===null||a===void 0?void 0:a.video)===null||s===void 0)&&s.uri&&(!((c=(l=n.source)===null||l===void 0?void 0:l.video)===null||c===void 0)&&c.videoBytes)&&(n.source.video={uri:n.source.video.uri,mimeType:n.source.video.mimeType})),await this.generateVideosInternal(n)}}maybeMoveToResponseJsonSchem(e){e.config&&e.config.responseSchema&&(e.config.responseJsonSchema||Object.keys(e.config.responseSchema).includes("$schema")&&(e.config.responseJsonSchema=e.config.responseSchema,delete e.config.responseSchema))}async processParamsMaybeAddMcpUsage(e){var n,r,i;const a=(n=e.config)===null||n===void 0?void 0:n.tools;if(!a)return e;const s=await Promise.all(a.map(async c=>uh(c)?await c.tool():c)),l={model:e.model,contents:e.contents,config:Object.assign(Object.assign({},e.config),{tools:s})};if(l.config.tools=s,e.config&&e.config.tools&&$U(e.config.tools)){const c=(i=(r=e.config.httpOptions)===null||r===void 0?void 0:r.headers)!==null&&i!==void 0?i:{};let h=Object.assign({},c);Object.keys(h).length===0&&(h=this.apiClient.getDefaultHeaders()),KU(h),l.config.httpOptions=Object.assign(Object.assign({},e.config.httpOptions),{headers:h})}return l}async initAfcToolsMap(e){var n,r,i;const a=new Map;for(const s of(r=(n=e.config)===null||n===void 0?void 0:n.tools)!==null&&r!==void 0?r:[])if(uh(s)){const l=s,c=await l.tool();for(const h of(i=c.functionDeclarations)!==null&&i!==void 0?i:[]){if(!h.name)throw new Error("Function declaration name is required.");if(a.has(h.name))throw new Error(`Duplicate tool declaration name: ${h.name}`);a.set(h.name,l)}}return a}async processAfcStream(e){var n,r,i;const a=(i=(r=(n=e.config)===null||n===void 0?void 0:n.automaticFunctionCalling)===null||r===void 0?void 0:r.maximumRemoteCalls)!==null&&i!==void 0?i:pO;let s=!1,l=0;const c=await this.initAfcToolsMap(e);return(function(h,p,g){var x,b;return lh(this,arguments,function*(){for(var C,A,D,R;l<a;){s&&(l++,s=!1);const $=yield Sn(h.processParamsMaybeAddMcpUsage(g)),H=yield Sn(h.generateContentStreamInternal($)),U=[],z=[];try{for(var j=!0,O=(A=void 0,jp(H)),q;q=yield Sn(O.next()),C=q.done,!C;j=!0){R=q.value,j=!1;const B=R;if(yield yield Sn(B),B.candidates&&(!((x=B.candidates[0])===null||x===void 0)&&x.content)){z.push(B.candidates[0].content);for(const Z of(b=B.candidates[0].content.parts)!==null&&b!==void 0?b:[])if(l<a&&Z.functionCall){if(!Z.functionCall.name)throw new Error("Function call name was not returned by the model.");if(p.has(Z.functionCall.name)){const K=yield Sn(p.get(Z.functionCall.name).callTool([Z.functionCall]));U.push(...K)}else throw new Error(`Automatic function calling was requested, but not all the tools the model used implement the CallableTool interface. Available tools: ${p.keys()}, mising tool: ${Z.functionCall.name}`)}}}}catch(B){A={error:B}}finally{try{!j&&!C&&(D=O.return)&&(yield Sn(D.call(O)))}finally{if(A)throw A.error}}if(U.length>0){s=!0;const B=new op;B.candidates=[{content:{role:"user",parts:U}}],yield yield Sn(B);const Z=[];Z.push(...z),Z.push({role:"user",parts:U});const K=hs(g.contents).concat(Z);g.contents=K}else break}})})(this,c,e)}async generateContentInternal(e){var n,r,i,a;let s,l="",c={};if(this.apiClient.isVertexAI()){const h=cO(this.apiClient,e);return l=qe("{model}:generateContent",h._url),c=h._query,delete h._url,delete h._query,s=this.apiClient.request({path:l,queryParams:c,body:JSON.stringify(h),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(p=>p.json().then(g=>{const x=g;return x.sdkHttpResponse={headers:p.headers},x})),s.then(p=>{const g=fO(p),x=new op;return Object.assign(x,g),x})}else{const h=uO(this.apiClient,e);return l=qe("{model}:generateContent",h._url),c=h._query,delete h._url,delete h._query,s=this.apiClient.request({path:l,queryParams:c,body:JSON.stringify(h),httpMethod:"POST",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(p=>p.json().then(g=>{const x=g;return x.sdkHttpResponse={headers:p.headers},x})),s.then(p=>{const g=dO(p),x=new op;return Object.assign(x,g),x})}}async generateContentStreamInternal(e){var n,r,i,a;let s,l="",c={};if(this.apiClient.isVertexAI()){const h=cO(this.apiClient,e);return l=qe("{model}:streamGenerateContent?alt=sse",h._url),c=h._query,delete h._url,delete h._query,s=this.apiClient.requestStream({path:l,queryParams:c,body:JSON.stringify(h),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}),s.then(function(g){return lh(this,arguments,function*(){var x,b,C,A;try{for(var D=!0,R=jp(g),j;j=yield Sn(R.next()),x=j.done,!x;D=!0){A=j.value,D=!1;const O=A,q=fO(yield Sn(O.json()));q.sdkHttpResponse={headers:O.headers};const $=new op;Object.assign($,q),yield yield Sn($)}}catch(O){b={error:O}}finally{try{!D&&!x&&(C=R.return)&&(yield Sn(C.call(R)))}finally{if(b)throw b.error}}})})}else{const h=uO(this.apiClient,e);return l=qe("{model}:streamGenerateContent?alt=sse",h._url),c=h._query,delete h._url,delete h._query,s=this.apiClient.requestStream({path:l,queryParams:c,body:JSON.stringify(h),httpMethod:"POST",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}),s.then(function(g){return lh(this,arguments,function*(){var x,b,C,A;try{for(var D=!0,R=jp(g),j;j=yield Sn(R.next()),x=j.done,!x;D=!0){A=j.value,D=!1;const O=A,q=dO(yield Sn(O.json()));q.sdkHttpResponse={headers:O.headers};const $=new op;Object.assign($,q),yield yield Sn($)}}catch(O){b={error:O}}finally{try{!D&&!x&&(C=R.return)&&(yield Sn(C.call(R)))}finally{if(b)throw b.error}}})})}}async embedContent(e){var n,r,i,a;let s,l="",c={};if(this.apiClient.isVertexAI()){const h=kte(this.apiClient,e);return l=qe("{model}:predict",h._url),c=h._query,delete h._url,delete h._query,s=this.apiClient.request({path:l,queryParams:c,body:JSON.stringify(h),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(p=>p.json().then(g=>{const x=g;return x.sdkHttpResponse={headers:p.headers},x})),s.then(p=>{const g=Ote(p),x=new KM;return Object.assign(x,g),x})}else{const h=Rte(this.apiClient,e);return l=qe("{model}:batchEmbedContents",h._url),c=h._query,delete h._url,delete h._query,s=this.apiClient.request({path:l,queryParams:c,body:JSON.stringify(h),httpMethod:"POST",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(p=>p.json().then(g=>{const x=g;return x.sdkHttpResponse={headers:p.headers},x})),s.then(p=>{const g=Mte(p),x=new KM;return Object.assign(x,g),x})}}async generateImagesInternal(e){var n,r,i,a;let s,l="",c={};if(this.apiClient.isVertexAI()){const h=$te(this.apiClient,e);return l=qe("{model}:predict",h._url),c=h._query,delete h._url,delete h._query,s=this.apiClient.request({path:l,queryParams:c,body:JSON.stringify(h),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(p=>p.json().then(g=>{const x=g;return x.sdkHttpResponse={headers:p.headers},x})),s.then(p=>{const g=Wte(p),x=new WM;return Object.assign(x,g),x})}else{const h=Gte(this.apiClient,e);return l=qe("{model}:predict",h._url),c=h._query,delete h._url,delete h._query,s=this.apiClient.request({path:l,queryParams:c,body:JSON.stringify(h),httpMethod:"POST",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(p=>p.json().then(g=>{const x=g;return x.sdkHttpResponse={headers:p.headers},x})),s.then(p=>{const g=Kte(p),x=new WM;return Object.assign(x,g),x})}}async editImageInternal(e){var n,r;let i,a="",s={};if(this.apiClient.isVertexAI()){const l=Ite(this.apiClient,e);return a=qe("{model}:predict",l._url),s=l._query,delete l._url,delete l._query,i=this.apiClient.request({path:a,queryParams:s,body:JSON.stringify(l),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(c=>c.json().then(h=>{const p=h;return p.sdkHttpResponse={headers:c.headers},p})),i.then(c=>{const h=Nte(c),p=new LQ;return Object.assign(p,h),p})}else throw new Error("This method is only supported by the Vertex AI.")}async upscaleImageInternal(e){var n,r;let i,a="",s={};if(this.apiClient.isVertexAI()){const l=$ne(this.apiClient,e);return a=qe("{model}:predict",l._url),s=l._query,delete l._url,delete l._query,i=this.apiClient.request({path:a,queryParams:s,body:JSON.stringify(l),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(c=>c.json().then(h=>{const p=h;return p.sdkHttpResponse={headers:c.headers},p})),i.then(c=>{const h=Kne(c),p=new VQ;return Object.assign(p,h),p})}else throw new Error("This method is only supported by the Vertex AI.")}async recontextImage(e){var n,r;let i,a="",s={};if(this.apiClient.isVertexAI()){const l=Cne(this.apiClient,e);return a=qe("{model}:predict",l._url),s=l._query,delete l._url,delete l._query,i=this.apiClient.request({path:a,queryParams:s,body:JSON.stringify(l),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(c=>c.json()),i.then(c=>{const h=Ine(c),p=new UQ;return Object.assign(p,h),p})}else throw new Error("This method is only supported by the Vertex AI.")}async segmentImage(e){var n,r;let i,a="",s={};if(this.apiClient.isVertexAI()){const l=Mne(this.apiClient,e);return a=qe("{model}:predict",l._url),s=l._query,delete l._url,delete l._query,i=this.apiClient.request({path:a,queryParams:s,body:JSON.stringify(l),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(c=>c.json()),i.then(c=>{const h=One(c),p=new FQ;return Object.assign(p,h),p})}else throw new Error("This method is only supported by the Vertex AI.")}async get(e){var n,r,i,a;let s,l="",c={};if(this.apiClient.isVertexAI()){const h=dne(this.apiClient,e);return l=qe("{name}",h._url),c=h._query,delete h._url,delete h._query,s=this.apiClient.request({path:l,queryParams:c,body:JSON.stringify(h),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(p=>p.json()),s.then(p=>s1(p))}else{const h=cne(this.apiClient,e);return l=qe("{name}",h._url),c=h._query,delete h._url,delete h._query,s=this.apiClient.request({path:l,queryParams:c,body:JSON.stringify(h),httpMethod:"GET",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(p=>p.json()),s.then(p=>a1(p))}}async listInternal(e){var n,r,i,a;let s,l="",c={};if(this.apiClient.isVertexAI()){const h=_ne(this.apiClient,e);return l=qe("{models_url}",h._url),c=h._query,delete h._url,delete h._query,s=this.apiClient.request({path:l,queryParams:c,body:JSON.stringify(h),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(p=>p.json().then(g=>{const x=g;return x.sdkHttpResponse={headers:p.headers},x})),s.then(p=>{const g=wne(p),x=new YM;return Object.assign(x,g),x})}else{const h=xne(this.apiClient,e);return l=qe("{models_url}",h._url),c=h._query,delete h._url,delete h._query,s=this.apiClient.request({path:l,queryParams:c,body:JSON.stringify(h),httpMethod:"GET",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(p=>p.json().then(g=>{const x=g;return x.sdkHttpResponse={headers:p.headers},x})),s.then(p=>{const g=bne(p),x=new YM;return Object.assign(x,g),x})}}async update(e){var n,r,i,a;let s,l="",c={};if(this.apiClient.isVertexAI()){const h=Hne(this.apiClient,e);return l=qe("{model}",h._url),c=h._query,delete h._url,delete h._query,s=this.apiClient.request({path:l,queryParams:c,body:JSON.stringify(h),httpMethod:"PATCH",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(p=>p.json()),s.then(p=>s1(p))}else{const h=qne(this.apiClient,e);return l=qe("{name}",h._url),c=h._query,delete h._url,delete h._query,s=this.apiClient.request({path:l,queryParams:c,body:JSON.stringify(h),httpMethod:"PATCH",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(p=>p.json()),s.then(p=>a1(p))}}async delete(e){var n,r,i,a;let s,l="",c={};if(this.apiClient.isVertexAI()){const h=Tte(this.apiClient,e);return l=qe("{name}",h._url),c=h._query,delete h._url,delete h._query,s=this.apiClient.request({path:l,queryParams:c,body:JSON.stringify(h),httpMethod:"DELETE",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(p=>p.json().then(g=>{const x=g;return x.sdkHttpResponse={headers:p.headers},x})),s.then(p=>{const g=Ate(p),x=new ZM;return Object.assign(x,g),x})}else{const h=Ete(this.apiClient,e);return l=qe("{name}",h._url),c=h._query,delete h._url,delete h._query,s=this.apiClient.request({path:l,queryParams:c,body:JSON.stringify(h),httpMethod:"DELETE",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(p=>p.json().then(g=>{const x=g;return x.sdkHttpResponse={headers:p.headers},x})),s.then(p=>{const g=Ste(p),x=new ZM;return Object.assign(x,g),x})}}async countTokens(e){var n,r,i,a;let s,l="",c={};if(this.apiClient.isVertexAI()){const h=_te(this.apiClient,e);return l=qe("{model}:countTokens",h._url),c=h._query,delete h._url,delete h._query,s=this.apiClient.request({path:l,queryParams:c,body:JSON.stringify(h),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(p=>p.json().then(g=>{const x=g;return x.sdkHttpResponse={headers:p.headers},x})),s.then(p=>{const g=wte(p),x=new JM;return Object.assign(x,g),x})}else{const h=xte(this.apiClient,e);return l=qe("{model}:countTokens",h._url),c=h._query,delete h._url,delete h._query,s=this.apiClient.request({path:l,queryParams:c,body:JSON.stringify(h),httpMethod:"POST",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(p=>p.json().then(g=>{const x=g;return x.sdkHttpResponse={headers:p.headers},x})),s.then(p=>{const g=bte(p),x=new JM;return Object.assign(x,g),x})}}async computeTokens(e){var n,r;let i,a="",s={};if(this.apiClient.isVertexAI()){const l=fte(this.apiClient,e);return a=qe("{model}:computeTokens",l._url),s=l._query,delete l._url,delete l._query,i=this.apiClient.request({path:a,queryParams:s,body:JSON.stringify(l),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(c=>c.json().then(h=>{const p=h;return p.sdkHttpResponse={headers:c.headers},p})),i.then(c=>{const h=hte(c),p=new BQ;return Object.assign(p,h),p})}else throw new Error("This method is only supported by the Vertex AI.")}async generateVideosInternal(e){var n,r,i,a;let s,l="",c={};if(this.apiClient.isVertexAI()){const h=ene(this.apiClient,e);return l=qe("{model}:predictLongRunning",h._url),c=h._query,delete h._url,delete h._query,s=this.apiClient.request({path:l,queryParams:c,body:JSON.stringify(h),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(p=>p.json()),s.then(p=>{const g=Qte(p),x=new B0;return Object.assign(x,g),x})}else{const h=Xte(this.apiClient,e);return l=qe("{model}:predictLongRunning",h._url),c=h._query,delete h._url,delete h._query,s=this.apiClient.request({path:l,queryParams:c,body:JSON.stringify(h),httpMethod:"POST",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(p=>p.json()),s.then(p=>{const g=Jte(p),x=new B0;return Object.assign(x,g),x})}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class Are extends Hl{constructor(e){super(),this.apiClient=e}async getVideosOperation(e){const n=e.operation,r=e.config;if(n.name===void 0||n.name==="")throw new Error("Operation name is required.");if(this.apiClient.isVertexAI()){const i=n.name.split("/operations/")[0];let a;r&&"httpOptions"in r&&(a=r.httpOptions);const s=await this.fetchPredictVideosOperationInternal({operationName:n.name,resourceName:i,config:{httpOptions:a}});return n._fromAPIResponse({apiResponse:s,_isVertexAI:!0})}else{const i=await this.getVideosOperationInternal({operationName:n.name,config:r});return n._fromAPIResponse({apiResponse:i,_isVertexAI:!1})}}async get(e){const n=e.operation,r=e.config;if(n.name===void 0||n.name==="")throw new Error("Operation name is required.");if(this.apiClient.isVertexAI()){const i=n.name.split("/operations/")[0];let a;r&&"httpOptions"in r&&(a=r.httpOptions);const s=await this.fetchPredictVideosOperationInternal({operationName:n.name,resourceName:i,config:{httpOptions:a}});return n._fromAPIResponse({apiResponse:s,_isVertexAI:!0})}else{const i=await this.getVideosOperationInternal({operationName:n.name,config:r});return n._fromAPIResponse({apiResponse:i,_isVertexAI:!1})}}async getVideosOperationInternal(e){var n,r,i,a;let s,l="",c={};if(this.apiClient.isVertexAI()){const h=DQ(e);return l=qe("{operationName}",h._url),c=h._query,delete h._url,delete h._query,s=this.apiClient.request({path:l,queryParams:c,body:JSON.stringify(h),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(p=>p.json()),s}else{const h=PQ(e);return l=qe("{operationName}",h._url),c=h._query,delete h._url,delete h._query,s=this.apiClient.request({path:l,queryParams:c,body:JSON.stringify(h),httpMethod:"GET",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(p=>p.json()),s}}async fetchPredictVideosOperationInternal(e){var n,r;let i,a="",s={};if(this.apiClient.isVertexAI()){const l=EQ(e);return a=qe("{resourceName}:fetchPredictOperation",l._url),s=l._query,delete l._url,delete l._query,i=this.apiClient.request({path:a,queryParams:s,body:JSON.stringify(l),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(c=>c.json()),i}else throw new Error("This method is only supported by the Vertex AI.")}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function Cre(t){const e={},n=_(t,["data"]);if(n!=null&&w(e,["data"],n),_(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const r=_(t,["mimeType"]);return r!=null&&w(e,["mimeType"],r),e}function Ire(t){const e={},n=_(t,["parts"]);if(n!=null){let i=n;Array.isArray(i)&&(i=i.map(a=>Lre(a))),w(e,["parts"],i)}const r=_(t,["role"]);return r!=null&&w(e,["role"],r),e}function Nre(t,e,n){const r={},i=_(e,["expireTime"]);n!==void 0&&i!=null&&w(n,["expireTime"],i);const a=_(e,["newSessionExpireTime"]);n!==void 0&&a!=null&&w(n,["newSessionExpireTime"],a);const s=_(e,["uses"]);n!==void 0&&s!=null&&w(n,["uses"],s);const l=_(e,["liveConnectConstraints"]);n!==void 0&&l!=null&&w(n,["bidiGenerateContentSetup"],jre(t,l));const c=_(e,["lockAdditionalFields"]);return n!==void 0&&c!=null&&w(n,["fieldMask"],c),r}function Pre(t,e){const n={},r=_(e,["config"]);return r!=null&&w(n,["config"],Nre(t,r,n)),n}function Dre(t){const e={};if(_(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const n=_(t,["fileUri"]);n!=null&&w(e,["fileUri"],n);const r=_(t,["mimeType"]);return r!=null&&w(e,["mimeType"],r),e}function Rre(t){const e={},n=_(t,["id"]);n!=null&&w(e,["id"],n);const r=_(t,["args"]);r!=null&&w(e,["args"],r);const i=_(t,["name"]);if(i!=null&&w(e,["name"],i),_(t,["partialArgs"])!==void 0)throw new Error("partialArgs parameter is not supported in Gemini API.");if(_(t,["willContinue"])!==void 0)throw new Error("willContinue parameter is not supported in Gemini API.");return e}function kre(t){const e={};if(_(t,["authConfig"])!==void 0)throw new Error("authConfig parameter is not supported in Gemini API.");const n=_(t,["enableWidget"]);return n!=null&&w(e,["enableWidget"],n),e}function Mre(t){const e={};if(_(t,["excludeDomains"])!==void 0)throw new Error("excludeDomains parameter is not supported in Gemini API.");if(_(t,["blockingConfidence"])!==void 0)throw new Error("blockingConfidence parameter is not supported in Gemini API.");const n=_(t,["timeRangeFilter"]);return n!=null&&w(e,["timeRangeFilter"],n),e}function Ore(t,e){const n={},r=_(t,["generationConfig"]);e!==void 0&&r!=null&&w(e,["setup","generationConfig"],r);const i=_(t,["responseModalities"]);e!==void 0&&i!=null&&w(e,["setup","generationConfig","responseModalities"],i);const a=_(t,["temperature"]);e!==void 0&&a!=null&&w(e,["setup","generationConfig","temperature"],a);const s=_(t,["topP"]);e!==void 0&&s!=null&&w(e,["setup","generationConfig","topP"],s);const l=_(t,["topK"]);e!==void 0&&l!=null&&w(e,["setup","generationConfig","topK"],l);const c=_(t,["maxOutputTokens"]);e!==void 0&&c!=null&&w(e,["setup","generationConfig","maxOutputTokens"],c);const h=_(t,["mediaResolution"]);e!==void 0&&h!=null&&w(e,["setup","generationConfig","mediaResolution"],h);const p=_(t,["seed"]);e!==void 0&&p!=null&&w(e,["setup","generationConfig","seed"],p);const g=_(t,["speechConfig"]);e!==void 0&&g!=null&&w(e,["setup","generationConfig","speechConfig"],DC(g));const x=_(t,["thinkingConfig"]);e!==void 0&&x!=null&&w(e,["setup","generationConfig","thinkingConfig"],x);const b=_(t,["enableAffectiveDialog"]);e!==void 0&&b!=null&&w(e,["setup","generationConfig","enableAffectiveDialog"],b);const C=_(t,["systemInstruction"]);e!==void 0&&C!=null&&w(e,["setup","systemInstruction"],Ire(Ei(C)));const A=_(t,["tools"]);if(e!==void 0&&A!=null){let H=sm(A);Array.isArray(H)&&(H=H.map(U=>Ure(am(U)))),w(e,["setup","tools"],H)}const D=_(t,["sessionResumption"]);e!==void 0&&D!=null&&w(e,["setup","sessionResumption"],Vre(D));const R=_(t,["inputAudioTranscription"]);e!==void 0&&R!=null&&w(e,["setup","inputAudioTranscription"],R);const j=_(t,["outputAudioTranscription"]);e!==void 0&&j!=null&&w(e,["setup","outputAudioTranscription"],j);const O=_(t,["realtimeInputConfig"]);e!==void 0&&O!=null&&w(e,["setup","realtimeInputConfig"],O);const q=_(t,["contextWindowCompression"]);e!==void 0&&q!=null&&w(e,["setup","contextWindowCompression"],q);const $=_(t,["proactivity"]);return e!==void 0&&$!=null&&w(e,["setup","proactivity"],$),n}function jre(t,e){const n={},r=_(e,["model"]);r!=null&&w(n,["setup","model"],$t(t,r));const i=_(e,["config"]);return i!=null&&w(n,["config"],Ore(i,n)),n}function Lre(t){const e={},n=_(t,["mediaResolution"]);n!=null&&w(e,["mediaResolution"],n);const r=_(t,["codeExecutionResult"]);r!=null&&w(e,["codeExecutionResult"],r);const i=_(t,["executableCode"]);i!=null&&w(e,["executableCode"],i);const a=_(t,["fileData"]);a!=null&&w(e,["fileData"],Dre(a));const s=_(t,["functionCall"]);s!=null&&w(e,["functionCall"],Rre(s));const l=_(t,["functionResponse"]);l!=null&&w(e,["functionResponse"],l);const c=_(t,["inlineData"]);c!=null&&w(e,["inlineData"],Cre(c));const h=_(t,["text"]);h!=null&&w(e,["text"],h);const p=_(t,["thought"]);p!=null&&w(e,["thought"],p);const g=_(t,["thoughtSignature"]);g!=null&&w(e,["thoughtSignature"],g);const x=_(t,["videoMetadata"]);return x!=null&&w(e,["videoMetadata"],x),e}function Vre(t){const e={},n=_(t,["handle"]);if(n!=null&&w(e,["handle"],n),_(t,["transparent"])!==void 0)throw new Error("transparent parameter is not supported in Gemini API.");return e}function Ure(t){const e={},n=_(t,["functionDeclarations"]);if(n!=null){let p=n;Array.isArray(p)&&(p=p.map(g=>g)),w(e,["functionDeclarations"],p)}if(_(t,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");const r=_(t,["googleSearchRetrieval"]);r!=null&&w(e,["googleSearchRetrieval"],r);const i=_(t,["computerUse"]);i!=null&&w(e,["computerUse"],i);const a=_(t,["fileSearch"]);a!=null&&w(e,["fileSearch"],a);const s=_(t,["codeExecution"]);if(s!=null&&w(e,["codeExecution"],s),_(t,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");const l=_(t,["googleMaps"]);l!=null&&w(e,["googleMaps"],kre(l));const c=_(t,["googleSearch"]);c!=null&&w(e,["googleSearch"],Mre(c));const h=_(t,["urlContext"]);return h!=null&&w(e,["urlContext"],h),e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function Fre(t){const e=[];for(const n in t)if(Object.prototype.hasOwnProperty.call(t,n)){const r=t[n];if(typeof r=="object"&&r!=null&&Object.keys(r).length>0){const i=Object.keys(r).map(a=>`${n}.${a}`);e.push(...i)}else e.push(n)}return e.join(",")}function Bre(t,e){let n=null;const r=t.bidiGenerateContentSetup;if(typeof r=="object"&&r!==null&&"setup"in r){const a=r.setup;typeof a=="object"&&a!==null?(t.bidiGenerateContentSetup=a,n=a):delete t.bidiGenerateContentSetup}else r!==void 0&&delete t.bidiGenerateContentSetup;const i=t.fieldMask;if(n){const a=Fre(n);if(Array.isArray(e==null?void 0:e.lockAdditionalFields)&&(e==null?void 0:e.lockAdditionalFields.length)===0)a?t.fieldMask=a:delete t.fieldMask;else if(e!=null&&e.lockAdditionalFields&&e.lockAdditionalFields.length>0&&i!==null&&Array.isArray(i)&&i.length>0){const s=["temperature","topK","topP","maxOutputTokens","responseModalities","seed","speechConfig"];let l=[];i.length>0&&(l=i.map(h=>s.includes(h)?`generationConfig.${h}`:h));const c=[];a&&c.push(a),l.length>0&&c.push(...l),c.length>0?t.fieldMask=c.join(","):delete t.fieldMask}else delete t.fieldMask}else i!==null&&Array.isArray(i)&&i.length>0?t.fieldMask=i.join(","):delete t.fieldMask;return t}class zre extends Hl{constructor(e){super(),this.apiClient=e}async create(e){var n,r;let i,a="",s={};if(this.apiClient.isVertexAI())throw new Error("The client.tokens.create method is only supported by the Gemini Developer API.");{const l=Pre(this.apiClient,e);a=qe("auth_tokens",l._url),s=l._query,delete l.config,delete l._url,delete l._query;const c=Bre(l,e.config);return i=this.apiClient.request({path:a,queryParams:s,body:JSON.stringify(c),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(h=>h.json()),i.then(h=>h)}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function qre(t,e){const n={},r=_(t,["displayName"]);return e!==void 0&&r!=null&&w(e,["displayName"],r),n}function Hre(t){const e={},n=_(t,["config"]);return n!=null&&qre(n,e),e}function Gre(t,e){const n={},r=_(t,["force"]);return e!==void 0&&r!=null&&w(e,["_query","force"],r),n}function $re(t){const e={},n=_(t,["name"]);n!=null&&w(e,["_url","name"],n);const r=_(t,["config"]);return r!=null&&Gre(r,e),e}function Kre(t){const e={},n=_(t,["name"]);return n!=null&&w(e,["_url","name"],n),e}function Wre(t,e){const n={},r=_(t,["customMetadata"]);if(e!==void 0&&r!=null){let a=r;Array.isArray(a)&&(a=a.map(s=>s)),w(e,["customMetadata"],a)}const i=_(t,["chunkingConfig"]);return e!==void 0&&i!=null&&w(e,["chunkingConfig"],i),n}function Yre(t){const e={},n=_(t,["name"]);n!=null&&w(e,["name"],n);const r=_(t,["metadata"]);r!=null&&w(e,["metadata"],r);const i=_(t,["done"]);i!=null&&w(e,["done"],i);const a=_(t,["error"]);a!=null&&w(e,["error"],a);const s=_(t,["response"]);return s!=null&&w(e,["response"],Jre(s)),e}function Zre(t){const e={},n=_(t,["fileSearchStoreName"]);n!=null&&w(e,["_url","file_search_store_name"],n);const r=_(t,["fileName"]);r!=null&&w(e,["fileName"],r);const i=_(t,["config"]);return i!=null&&Wre(i,e),e}function Jre(t){const e={},n=_(t,["sdkHttpResponse"]);n!=null&&w(e,["sdkHttpResponse"],n);const r=_(t,["parent"]);r!=null&&w(e,["parent"],r);const i=_(t,["documentName"]);return i!=null&&w(e,["documentName"],i),e}function Qre(t,e){const n={},r=_(t,["pageSize"]);e!==void 0&&r!=null&&w(e,["_query","pageSize"],r);const i=_(t,["pageToken"]);return e!==void 0&&i!=null&&w(e,["_query","pageToken"],i),n}function Xre(t){const e={},n=_(t,["config"]);return n!=null&&Qre(n,e),e}function eie(t){const e={},n=_(t,["sdkHttpResponse"]);n!=null&&w(e,["sdkHttpResponse"],n);const r=_(t,["nextPageToken"]);r!=null&&w(e,["nextPageToken"],r);const i=_(t,["fileSearchStores"]);if(i!=null){let a=i;Array.isArray(a)&&(a=a.map(s=>s)),w(e,["fileSearchStores"],a)}return e}function tie(t,e){const n={},r=_(t,["mimeType"]);e!==void 0&&r!=null&&w(e,["mimeType"],r);const i=_(t,["displayName"]);e!==void 0&&i!=null&&w(e,["displayName"],i);const a=_(t,["customMetadata"]);if(e!==void 0&&a!=null){let l=a;Array.isArray(l)&&(l=l.map(c=>c)),w(e,["customMetadata"],l)}const s=_(t,["chunkingConfig"]);return e!==void 0&&s!=null&&w(e,["chunkingConfig"],s),n}function nie(t){const e={},n=_(t,["fileSearchStoreName"]);n!=null&&w(e,["_url","file_search_store_name"],n);const r=_(t,["config"]);return r!=null&&tie(r,e),e}function rie(t){const e={},n=_(t,["sdkHttpResponse"]);return n!=null&&w(e,["sdkHttpResponse"],n),e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function iie(t,e){const n={},r=_(t,["force"]);return e!==void 0&&r!=null&&w(e,["_query","force"],r),n}function aie(t){const e={},n=_(t,["name"]);n!=null&&w(e,["_url","name"],n);const r=_(t,["config"]);return r!=null&&iie(r,e),e}function sie(t){const e={},n=_(t,["name"]);return n!=null&&w(e,["_url","name"],n),e}function oie(t,e){const n={},r=_(t,["pageSize"]);e!==void 0&&r!=null&&w(e,["_query","pageSize"],r);const i=_(t,["pageToken"]);return e!==void 0&&i!=null&&w(e,["_query","pageToken"],i),n}function lie(t){const e={},n=_(t,["parent"]);n!=null&&w(e,["_url","parent"],n);const r=_(t,["config"]);return r!=null&&oie(r,e),e}function uie(t){const e={},n=_(t,["sdkHttpResponse"]);n!=null&&w(e,["sdkHttpResponse"],n);const r=_(t,["nextPageToken"]);r!=null&&w(e,["nextPageToken"],r);const i=_(t,["documents"]);if(i!=null){let a=i;Array.isArray(a)&&(a=a.map(s=>s)),w(e,["documents"],a)}return e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class cie extends Hl{constructor(e){super(),this.apiClient=e,this.list=async n=>new $d(Rl.PAGED_ITEM_DOCUMENTS,r=>this.listInternal({parent:n.parent,config:r.config}),await this.listInternal(n),n)}async get(e){var n,r;let i,a="",s={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const l=sie(e);return a=qe("{name}",l._url),s=l._query,delete l._url,delete l._query,i=this.apiClient.request({path:a,queryParams:s,body:JSON.stringify(l),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(c=>c.json()),i.then(c=>c)}}async delete(e){var n,r;let i="",a={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const s=aie(e);i=qe("{name}",s._url),a=s._query,delete s._url,delete s._query,await this.apiClient.request({path:i,queryParams:a,body:JSON.stringify(s),httpMethod:"DELETE",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal})}}async listInternal(e){var n,r;let i,a="",s={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const l=lie(e);return a=qe("{parent}/documents",l._url),s=l._query,delete l._url,delete l._query,i=this.apiClient.request({path:a,queryParams:s,body:JSON.stringify(l),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(c=>c.json()),i.then(c=>{const h=uie(c),p=new zQ;return Object.assign(p,h),p})}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class die extends Hl{constructor(e,n=new cie(e)){super(),this.apiClient=e,this.documents=n,this.list=async(r={})=>new $d(Rl.PAGED_ITEM_FILE_SEARCH_STORES,i=>this.listInternal(i),await this.listInternal(r),r)}async uploadToFileSearchStore(e){if(this.apiClient.isVertexAI())throw new Error("Vertex AI does not support uploading files to a file search store.");return this.apiClient.uploadFileToFileSearchStore(e.fileSearchStoreName,e.file,e.config)}async create(e){var n,r;let i,a="",s={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const l=Hre(e);return a=qe("fileSearchStores",l._url),s=l._query,delete l._url,delete l._query,i=this.apiClient.request({path:a,queryParams:s,body:JSON.stringify(l),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(c=>c.json()),i.then(c=>c)}}async get(e){var n,r;let i,a="",s={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const l=Kre(e);return a=qe("{name}",l._url),s=l._query,delete l._url,delete l._query,i=this.apiClient.request({path:a,queryParams:s,body:JSON.stringify(l),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(c=>c.json()),i.then(c=>c)}}async delete(e){var n,r;let i="",a={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const s=$re(e);i=qe("{name}",s._url),a=s._query,delete s._url,delete s._query,await this.apiClient.request({path:i,queryParams:a,body:JSON.stringify(s),httpMethod:"DELETE",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal})}}async listInternal(e){var n,r;let i,a="",s={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const l=Xre(e);return a=qe("fileSearchStores",l._url),s=l._query,delete l._url,delete l._query,i=this.apiClient.request({path:a,queryParams:s,body:JSON.stringify(l),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(c=>c.json()),i.then(c=>{const h=eie(c),p=new qQ;return Object.assign(p,h),p})}}async uploadToFileSearchStoreInternal(e){var n,r;let i,a="",s={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const l=nie(e);return a=qe("upload/v1beta/{file_search_store_name}:uploadToFileSearchStore",l._url),s=l._query,delete l._url,delete l._query,i=this.apiClient.request({path:a,queryParams:s,body:JSON.stringify(l),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(c=>c.json()),i.then(c=>{const h=rie(c),p=new HQ;return Object.assign(p,h),p})}}async importFile(e){var n,r;let i,a="",s={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const l=Zre(e);return a=qe("{file_search_store_name}:importFile",l._url),s=l._query,delete l._url,delete l._query,i=this.apiClient.request({path:a,queryParams:s,body:JSON.stringify(l),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(c=>c.json()),i.then(c=>{const h=Yre(c),p=new AC;return Object.assign(p,h),p})}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function fie(t,e){const n={},r=_(t,["name"]);return r!=null&&w(n,["_url","name"],r),n}function hie(t,e){const n={},r=_(t,["name"]);return r!=null&&w(n,["_url","name"],r),n}function mie(t,e,n){const r={};if(_(t,["validationDataset"])!==void 0)throw new Error("validationDataset parameter is not supported in Gemini API.");const i=_(t,["tunedModelDisplayName"]);if(e!==void 0&&i!=null&&w(e,["displayName"],i),_(t,["description"])!==void 0)throw new Error("description parameter is not supported in Gemini API.");const a=_(t,["epochCount"]);e!==void 0&&a!=null&&w(e,["tuningTask","hyperparameters","epochCount"],a);const s=_(t,["learningRateMultiplier"]);if(s!=null&&w(r,["tuningTask","hyperparameters","learningRateMultiplier"],s),_(t,["exportLastCheckpointOnly"])!==void 0)throw new Error("exportLastCheckpointOnly parameter is not supported in Gemini API.");if(_(t,["preTunedModelCheckpointId"])!==void 0)throw new Error("preTunedModelCheckpointId parameter is not supported in Gemini API.");if(_(t,["adapterSize"])!==void 0)throw new Error("adapterSize parameter is not supported in Gemini API.");const l=_(t,["batchSize"]);e!==void 0&&l!=null&&w(e,["tuningTask","hyperparameters","batchSize"],l);const c=_(t,["learningRate"]);if(e!==void 0&&c!=null&&w(e,["tuningTask","hyperparameters","learningRate"],c),_(t,["labels"])!==void 0)throw new Error("labels parameter is not supported in Gemini API.");if(_(t,["beta"])!==void 0)throw new Error("beta parameter is not supported in Gemini API.");return r}function pie(t,e,n){const r={};let i=_(n,["config","method"]);if(i===void 0&&(i="SUPERVISED_FINE_TUNING"),i==="SUPERVISED_FINE_TUNING"){const b=_(t,["validationDataset"]);e!==void 0&&b!=null&&w(e,["supervisedTuningSpec"],xO(b))}else if(i==="PREFERENCE_TUNING"){const b=_(t,["validationDataset"]);e!==void 0&&b!=null&&w(e,["preferenceOptimizationSpec"],xO(b))}const a=_(t,["tunedModelDisplayName"]);e!==void 0&&a!=null&&w(e,["tunedModelDisplayName"],a);const s=_(t,["description"]);e!==void 0&&s!=null&&w(e,["description"],s);let l=_(n,["config","method"]);if(l===void 0&&(l="SUPERVISED_FINE_TUNING"),l==="SUPERVISED_FINE_TUNING"){const b=_(t,["epochCount"]);e!==void 0&&b!=null&&w(e,["supervisedTuningSpec","hyperParameters","epochCount"],b)}else if(l==="PREFERENCE_TUNING"){const b=_(t,["epochCount"]);e!==void 0&&b!=null&&w(e,["preferenceOptimizationSpec","hyperParameters","epochCount"],b)}let c=_(n,["config","method"]);if(c===void 0&&(c="SUPERVISED_FINE_TUNING"),c==="SUPERVISED_FINE_TUNING"){const b=_(t,["learningRateMultiplier"]);e!==void 0&&b!=null&&w(e,["supervisedTuningSpec","hyperParameters","learningRateMultiplier"],b)}else if(c==="PREFERENCE_TUNING"){const b=_(t,["learningRateMultiplier"]);e!==void 0&&b!=null&&w(e,["preferenceOptimizationSpec","hyperParameters","learningRateMultiplier"],b)}let h=_(n,["config","method"]);if(h===void 0&&(h="SUPERVISED_FINE_TUNING"),h==="SUPERVISED_FINE_TUNING"){const b=_(t,["exportLastCheckpointOnly"]);e!==void 0&&b!=null&&w(e,["supervisedTuningSpec","exportLastCheckpointOnly"],b)}else if(h==="PREFERENCE_TUNING"){const b=_(t,["exportLastCheckpointOnly"]);e!==void 0&&b!=null&&w(e,["preferenceOptimizationSpec","exportLastCheckpointOnly"],b)}let p=_(n,["config","method"]);if(p===void 0&&(p="SUPERVISED_FINE_TUNING"),p==="SUPERVISED_FINE_TUNING"){const b=_(t,["adapterSize"]);e!==void 0&&b!=null&&w(e,["supervisedTuningSpec","hyperParameters","adapterSize"],b)}else if(p==="PREFERENCE_TUNING"){const b=_(t,["adapterSize"]);e!==void 0&&b!=null&&w(e,["preferenceOptimizationSpec","hyperParameters","adapterSize"],b)}if(_(t,["batchSize"])!==void 0)throw new Error("batchSize parameter is not supported in Vertex AI.");if(_(t,["learningRate"])!==void 0)throw new Error("learningRate parameter is not supported in Vertex AI.");const g=_(t,["labels"]);e!==void 0&&g!=null&&w(e,["labels"],g);const x=_(t,["beta"]);return e!==void 0&&x!=null&&w(e,["preferenceOptimizationSpec","hyperParameters","beta"],x),r}function gie(t,e){const n={},r=_(t,["baseModel"]);r!=null&&w(n,["baseModel"],r);const i=_(t,["preTunedModel"]);i!=null&&w(n,["preTunedModel"],i);const a=_(t,["trainingDataset"]);a!=null&&Cie(a);const s=_(t,["config"]);return s!=null&&mie(s,n),n}function yie(t,e){const n={},r=_(t,["baseModel"]);r!=null&&w(n,["baseModel"],r);const i=_(t,["preTunedModel"]);i!=null&&w(n,["preTunedModel"],i);const a=_(t,["trainingDataset"]);a!=null&&Iie(a,n,e);const s=_(t,["config"]);return s!=null&&pie(s,n,e),n}function vie(t,e){const n={},r=_(t,["name"]);return r!=null&&w(n,["_url","name"],r),n}function xie(t,e){const n={},r=_(t,["name"]);return r!=null&&w(n,["_url","name"],r),n}function _ie(t,e,n){const r={},i=_(t,["pageSize"]);e!==void 0&&i!=null&&w(e,["_query","pageSize"],i);const a=_(t,["pageToken"]);e!==void 0&&a!=null&&w(e,["_query","pageToken"],a);const s=_(t,["filter"]);return e!==void 0&&s!=null&&w(e,["_query","filter"],s),r}function bie(t,e,n){const r={},i=_(t,["pageSize"]);e!==void 0&&i!=null&&w(e,["_query","pageSize"],i);const a=_(t,["pageToken"]);e!==void 0&&a!=null&&w(e,["_query","pageToken"],a);const s=_(t,["filter"]);return e!==void 0&&s!=null&&w(e,["_query","filter"],s),r}function wie(t,e){const n={},r=_(t,["config"]);return r!=null&&_ie(r,n),n}function Eie(t,e){const n={},r=_(t,["config"]);return r!=null&&bie(r,n),n}function Tie(t,e){const n={},r=_(t,["sdkHttpResponse"]);r!=null&&w(n,["sdkHttpResponse"],r);const i=_(t,["nextPageToken"]);i!=null&&w(n,["nextPageToken"],i);const a=_(t,["tunedModels"]);if(a!=null){let s=a;Array.isArray(s)&&(s=s.map(l=>WU(l))),w(n,["tuningJobs"],s)}return n}function Sie(t,e){const n={},r=_(t,["sdkHttpResponse"]);r!=null&&w(n,["sdkHttpResponse"],r);const i=_(t,["nextPageToken"]);i!=null&&w(n,["nextPageToken"],i);const a=_(t,["tuningJobs"]);if(a!=null){let s=a;Array.isArray(s)&&(s=s.map(l=>l1(l))),w(n,["tuningJobs"],s)}return n}function Aie(t,e){const n={},r=_(t,["name"]);r!=null&&w(n,["model"],r);const i=_(t,["name"]);return i!=null&&w(n,["endpoint"],i),n}function Cie(t,e){const n={};if(_(t,["gcsUri"])!==void 0)throw new Error("gcsUri parameter is not supported in Gemini API.");if(_(t,["vertexDatasetResource"])!==void 0)throw new Error("vertexDatasetResource parameter is not supported in Gemini API.");const r=_(t,["examples"]);if(r!=null){let i=r;Array.isArray(i)&&(i=i.map(a=>a)),w(n,["examples","examples"],i)}return n}function Iie(t,e,n){const r={};let i=_(n,["config","method"]);if(i===void 0&&(i="SUPERVISED_FINE_TUNING"),i==="SUPERVISED_FINE_TUNING"){const s=_(t,["gcsUri"]);e!==void 0&&s!=null&&w(e,["supervisedTuningSpec","trainingDatasetUri"],s)}else if(i==="PREFERENCE_TUNING"){const s=_(t,["gcsUri"]);e!==void 0&&s!=null&&w(e,["preferenceOptimizationSpec","trainingDatasetUri"],s)}let a=_(n,["config","method"]);if(a===void 0&&(a="SUPERVISED_FINE_TUNING"),a==="SUPERVISED_FINE_TUNING"){const s=_(t,["vertexDatasetResource"]);e!==void 0&&s!=null&&w(e,["supervisedTuningSpec","trainingDatasetUri"],s)}else if(a==="PREFERENCE_TUNING"){const s=_(t,["vertexDatasetResource"]);e!==void 0&&s!=null&&w(e,["preferenceOptimizationSpec","trainingDatasetUri"],s)}if(_(t,["examples"])!==void 0)throw new Error("examples parameter is not supported in Vertex AI.");return r}function WU(t,e){const n={},r=_(t,["sdkHttpResponse"]);r!=null&&w(n,["sdkHttpResponse"],r);const i=_(t,["name"]);i!=null&&w(n,["name"],i);const a=_(t,["state"]);a!=null&&w(n,["state"],NU(a));const s=_(t,["createTime"]);s!=null&&w(n,["createTime"],s);const l=_(t,["tuningTask","startTime"]);l!=null&&w(n,["startTime"],l);const c=_(t,["tuningTask","completeTime"]);c!=null&&w(n,["endTime"],c);const h=_(t,["updateTime"]);h!=null&&w(n,["updateTime"],h);const p=_(t,["description"]);p!=null&&w(n,["description"],p);const g=_(t,["baseModel"]);g!=null&&w(n,["baseModel"],g);const x=_(t,["_self"]);return x!=null&&w(n,["tunedModel"],Aie(x)),n}function l1(t,e){const n={},r=_(t,["sdkHttpResponse"]);r!=null&&w(n,["sdkHttpResponse"],r);const i=_(t,["name"]);i!=null&&w(n,["name"],i);const a=_(t,["state"]);a!=null&&w(n,["state"],NU(a));const s=_(t,["createTime"]);s!=null&&w(n,["createTime"],s);const l=_(t,["startTime"]);l!=null&&w(n,["startTime"],l);const c=_(t,["endTime"]);c!=null&&w(n,["endTime"],c);const h=_(t,["updateTime"]);h!=null&&w(n,["updateTime"],h);const p=_(t,["error"]);p!=null&&w(n,["error"],p);const g=_(t,["description"]);g!=null&&w(n,["description"],g);const x=_(t,["baseModel"]);x!=null&&w(n,["baseModel"],x);const b=_(t,["tunedModel"]);b!=null&&w(n,["tunedModel"],b);const C=_(t,["preTunedModel"]);C!=null&&w(n,["preTunedModel"],C);const A=_(t,["supervisedTuningSpec"]);A!=null&&w(n,["supervisedTuningSpec"],A);const D=_(t,["preferenceOptimizationSpec"]);D!=null&&w(n,["preferenceOptimizationSpec"],D);const R=_(t,["tuningDataStats"]);R!=null&&w(n,["tuningDataStats"],R);const j=_(t,["encryptionSpec"]);j!=null&&w(n,["encryptionSpec"],j);const O=_(t,["partnerModelTuningSpec"]);O!=null&&w(n,["partnerModelTuningSpec"],O);const q=_(t,["customBaseModel"]);q!=null&&w(n,["customBaseModel"],q);const $=_(t,["experiment"]);$!=null&&w(n,["experiment"],$);const H=_(t,["labels"]);H!=null&&w(n,["labels"],H);const U=_(t,["outputUri"]);U!=null&&w(n,["outputUri"],U);const z=_(t,["pipelineJob"]);z!=null&&w(n,["pipelineJob"],z);const B=_(t,["serviceAccount"]);B!=null&&w(n,["serviceAccount"],B);const Z=_(t,["tunedModelDisplayName"]);Z!=null&&w(n,["tunedModelDisplayName"],Z);const K=_(t,["veoTuningSpec"]);return K!=null&&w(n,["veoTuningSpec"],K),n}function Nie(t,e){const n={},r=_(t,["sdkHttpResponse"]);r!=null&&w(n,["sdkHttpResponse"],r);const i=_(t,["name"]);i!=null&&w(n,["name"],i);const a=_(t,["metadata"]);a!=null&&w(n,["metadata"],a);const s=_(t,["done"]);s!=null&&w(n,["done"],s);const l=_(t,["error"]);return l!=null&&w(n,["error"],l),n}function xO(t,e){const n={},r=_(t,["gcsUri"]);r!=null&&w(n,["validationDatasetUri"],r);const i=_(t,["vertexDatasetResource"]);return i!=null&&w(n,["validationDatasetUri"],i),n}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class Pie extends Hl{constructor(e){super(),this.apiClient=e,this.get=async n=>await this.getInternal(n),this.list=async(n={})=>new $d(Rl.PAGED_ITEM_TUNING_JOBS,r=>this.listInternal(r),await this.listInternal(n),n),this.tune=async n=>{var r;if(this.apiClient.isVertexAI())if(n.baseModel.startsWith("projects/")){const i={tunedModelName:n.baseModel};!((r=n.config)===null||r===void 0)&&r.preTunedModelCheckpointId&&(i.checkpointId=n.config.preTunedModelCheckpointId);const a=Object.assign(Object.assign({},n),{preTunedModel:i});return a.baseModel=void 0,await this.tuneInternal(a)}else{const i=Object.assign({},n);return await this.tuneInternal(i)}else{const i=Object.assign({},n),a=await this.tuneMldevInternal(i);let s="";return a.metadata!==void 0&&a.metadata.tunedModel!==void 0?s=a.metadata.tunedModel:a.name!==void 0&&a.name.includes("/operations/")&&(s=a.name.split("/operations/")[0]),{name:s,state:t1.JOB_STATE_QUEUED}}}}async getInternal(e){var n,r,i,a;let s,l="",c={};if(this.apiClient.isVertexAI()){const h=xie(e);return l=qe("{name}",h._url),c=h._query,delete h._url,delete h._query,s=this.apiClient.request({path:l,queryParams:c,body:JSON.stringify(h),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(p=>p.json().then(g=>{const x=g;return x.sdkHttpResponse={headers:p.headers},x})),s.then(p=>l1(p))}else{const h=vie(e);return l=qe("{name}",h._url),c=h._query,delete h._url,delete h._query,s=this.apiClient.request({path:l,queryParams:c,body:JSON.stringify(h),httpMethod:"GET",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(p=>p.json().then(g=>{const x=g;return x.sdkHttpResponse={headers:p.headers},x})),s.then(p=>WU(p))}}async listInternal(e){var n,r,i,a;let s,l="",c={};if(this.apiClient.isVertexAI()){const h=Eie(e);return l=qe("tuningJobs",h._url),c=h._query,delete h._url,delete h._query,s=this.apiClient.request({path:l,queryParams:c,body:JSON.stringify(h),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(p=>p.json().then(g=>{const x=g;return x.sdkHttpResponse={headers:p.headers},x})),s.then(p=>{const g=Sie(p),x=new QM;return Object.assign(x,g),x})}else{const h=wie(e);return l=qe("tunedModels",h._url),c=h._query,delete h._url,delete h._query,s=this.apiClient.request({path:l,queryParams:c,body:JSON.stringify(h),httpMethod:"GET",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(p=>p.json().then(g=>{const x=g;return x.sdkHttpResponse={headers:p.headers},x})),s.then(p=>{const g=Tie(p),x=new QM;return Object.assign(x,g),x})}}async cancel(e){var n,r,i,a;let s="",l={};if(this.apiClient.isVertexAI()){const c=hie(e);s=qe("{name}:cancel",c._url),l=c._query,delete c._url,delete c._query,await this.apiClient.request({path:s,queryParams:l,body:JSON.stringify(c),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal})}else{const c=fie(e);s=qe("{name}:cancel",c._url),l=c._query,delete c._url,delete c._query,await this.apiClient.request({path:s,queryParams:l,body:JSON.stringify(c),httpMethod:"POST",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal})}}async tuneInternal(e){var n,r;let i,a="",s={};if(this.apiClient.isVertexAI()){const l=yie(e,e);return a=qe("tuningJobs",l._url),s=l._query,delete l._url,delete l._query,i=this.apiClient.request({path:a,queryParams:s,body:JSON.stringify(l),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(c=>c.json().then(h=>{const p=h;return p.sdkHttpResponse={headers:c.headers},p})),i.then(c=>l1(c))}else throw new Error("This method is only supported by the Vertex AI.")}async tuneMldevInternal(e){var n,r;let i,a="",s={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const l=gie(e);return a=qe("tunedModels",l._url),s=l._query,delete l._url,delete l._query,i=this.apiClient.request({path:a,queryParams:s,body:JSON.stringify(l),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(c=>c.json().then(h=>{const p=h;return p.sdkHttpResponse={headers:c.headers},p})),i.then(c=>Nie(c))}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class Die{async download(e,n){throw new Error("Download to file is not supported in the browser, please use a browser compliant download like an <a> tag.")}}const Rie=1024*1024*8,kie=3,Mie=1e3,Oie=2,q0="x-goog-upload-status";async function jie(t,e,n){var r;const i=await YU(t,e,n),a=await(i==null?void 0:i.json());if(((r=i==null?void 0:i.headers)===null||r===void 0?void 0:r[q0])!=="final")throw new Error("Failed to upload file: Upload status is not finalized.");return a.file}async function Lie(t,e,n){var r;const i=await YU(t,e,n),a=await(i==null?void 0:i.json());if(((r=i==null?void 0:i.headers)===null||r===void 0?void 0:r[q0])!=="final")throw new Error("Failed to upload file: Upload status is not finalized.");const s=EU(a),l=new CC;return Object.assign(l,s),l}async function YU(t,e,n){var r,i;let a=0,s=0,l=new n1(new Response),c="upload";for(a=t.size;s<a;){const h=Math.min(Rie,a-s),p=t.slice(s,s+h);s+h>=a&&(c+=", finalize");let g=0,x=Mie;for(;g<kie&&(l=await n.request({path:"",body:p,httpMethod:"POST",httpOptions:{apiVersion:"",baseUrl:e,headers:{"X-Goog-Upload-Command":c,"X-Goog-Upload-Offset":String(s),"Content-Length":String(h)}}}),!(!((r=l==null?void 0:l.headers)===null||r===void 0)&&r[q0]));)g++,await Uie(x),x=x*Oie;if(s+=h,((i=l==null?void 0:l.headers)===null||i===void 0?void 0:i[q0])!=="active")break;if(a<=s)throw new Error("All content has been uploaded, but the upload status is not finalized.")}return l}async function Vie(t){return{size:t.size,type:t.type}}function Uie(t){return new Promise(e=>setTimeout(e,t))}class Fie{async upload(e,n,r){if(typeof e=="string")throw new Error("File path is not supported in browser uploader.");return await jie(e,n,r)}async uploadToFileSearchStore(e,n,r){if(typeof e=="string")throw new Error("File path is not supported in browser uploader.");return await Lie(e,n,r)}async stat(e){if(typeof e=="string")throw new Error("File path is not supported in browser uploader.");return await Vie(e)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class Bie{create(e,n,r){return new zie(e,n,r)}}class zie{constructor(e,n,r){this.url=e,this.headers=n,this.callbacks=r}connect(){this.ws=new WebSocket(this.url),this.ws.onopen=this.callbacks.onopen,this.ws.onerror=this.callbacks.onerror,this.ws.onclose=this.callbacks.onclose,this.ws.onmessage=this.callbacks.onmessage}send(e){if(this.ws===void 0)throw new Error("WebSocket is not connected");this.ws.send(e)}close(){if(this.ws===void 0)throw new Error("WebSocket is not connected");this.ws.close()}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const _O="x-goog-api-key";class qie{constructor(e){this.apiKey=e}async addAuthHeaders(e,n){if(e.get(_O)===null){if(this.apiKey.startsWith("auth_tokens/"))throw new Error("Ephemeral tokens are only supported by the live API.");if(!this.apiKey)throw new Error("API key is missing. Please provide a valid API key.");e.append(_O,this.apiKey)}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const Hie="gl-node/";class Gie{constructor(e){var n;if(e.apiKey==null)throw new Error("An API Key must be set when running in a browser");if(e.project||e.location)throw new Error("Vertex AI project based authentication is not supported on browser runtimes. Please do not provide a project or location.");this.vertexai=(n=e.vertexai)!==null&&n!==void 0?n:!1,this.apiKey=e.apiKey;const r=bQ(e.httpOptions,e.vertexai,void 0,void 0);r&&(e.httpOptions?e.httpOptions.baseUrl=r:e.httpOptions={baseUrl:r}),this.apiVersion=e.apiVersion;const i=new qie(this.apiKey);this.apiClient=new sre({auth:i,apiVersion:this.apiVersion,apiKey:this.apiKey,vertexai:this.vertexai,httpOptions:e.httpOptions,userAgentExtra:Hie+"web",uploader:new Fie,downloader:new Die}),this.models=new Sre(this.apiClient),this.live=new xre(this.apiClient,i,new Bie),this.batches=new ZX(this.apiClient),this.chats=new Dee(this.models,this.apiClient),this.caches=new Iee(this.apiClient),this.files=new Bee(this.apiClient),this.operations=new Are(this.apiClient),this.authTokens=new zre(this.apiClient),this.tunings=new Pie(this.apiClient),this.fileSearchStores=new die(this.apiClient)}}const ZU=new Gie({apiKey:void 0});async function $ie(t,e){const n="gemini-2.5-flash",r=`Voc  um consultor snior de gesto de ativos (SGA+) e especialista em otimizao financeira. Sua tarefa  responder perguntas sobre os ativos de uma empresa com base nos dados JSON fornecidos.
Fornea respostas claras, concisas e acionveis em portugus.
Suas capacidades incluem:
- Anlise de dados: Resumir o status, custos e distribuio dos ativos.
- Insights preditivos: Com base nos dados, estime a vida til, identifique riscos de obsolescncia e preveja custos de manuteno futuros.
- Recomendaes de otimizao: Sugira aes para reduzir custos, melhorar a utilizao dos ativos ou planejar substituies (ex: "Considere substituir a Impressora HP, pois seus custos de reparo acumulados (R$750) j atingiram 41% do seu valor de compra (R$1800) e sua garantia expirou.").
- Gerao de relatrios: Quando solicitado, formate a resposta como um relatrio sucinto.
Seja proativo em suas anlises. Se um usurio perguntar "Quais ativos esto em reparo?", alm de listar, voc pode adicionar um insight como "A Impressora HP est em reparo pela segunda vez em 6 meses, sugerindo uma anlise de custo-benefcio para sua substituio."
Evite retornar JSON ou listas brutas. Formate a resposta de forma legvel e profissional.`,i=`
    Aqui esto os dados dos ativos atuais:
    ${JSON.stringify(e,null,2)}

    Pergunta do usurio: "${t}"

    Resposta:`;try{return(await ZU.models.generateContent({model:n,contents:i,config:{systemInstruction:r}})).text}catch(a){return console.error("Error calling Gemini API:",a),"Desculpe, ocorreu um erro ao contatar o assistente de IA. Por favor, tente novamente mais tarde."}}async function Kie(t){if(t.length===0)return[];const e="gemini-2.5-flash",n="Voc  um especialista em manuteno preditiva. Analise a lista de ativos fornecida. Com base na idade do ativo (calculada a partir da data de compra), seu status atual e o histrico de manuteno, identifique at 3 ativos com maior probabilidade de falha nos prximos 90 dias. Para cada ativo identificado, fornea a probabilidade de falha (um nmero entre 0 e 1) e uma data prevista para a falha. Retorne os dados como um array JSON.",r=t.map(a=>({id:a.id,name:a.name,purchaseDate:a.purchaseDate,status:a.status,maintenanceCount:a.maintenanceHistory.length,totalMaintenanceCost:a.maintenanceHistory.reduce((s,l)=>s+l.cost,0)})),i=`
    Data de hoje: ${new Date().toISOString().split("T")[0]}
    Dados dos Ativos:
    ${JSON.stringify(r,null,2)}
  `;try{const s=(await ZU.models.generateContent({model:e,contents:i,config:{systemInstruction:n,responseMimeType:"application/json",responseSchema:{type:ua.ARRAY,items:{type:ua.OBJECT,properties:{assetId:{type:ua.STRING},assetName:{type:ua.STRING},probability:{type:ua.NUMBER},predictedDate:{type:ua.STRING}},required:["assetId","assetName","probability","predictedDate"]}}}})).text.trim();return JSON.parse(s)}catch(a){return console.error("Error generating failure predictions:",a),[]}}const Wie=async(t,e)=>{if(console.log(`Fetching failure predictions for tenant: ${t}`),e.length===0)return[];try{return await Kie(e)}catch(n){return console.error("Failed to get failure predictions:",n),[]}},Yie=["Infraestrutura de Rede"],Zie=(t,e,n="Tcnico")=>{const r={actor:n,status:sr.PENDING,comment:"Solicitao de manuteno criada.",date:new Date().toISOString()},i=Yie.includes(t.type);return e<=500&&!i?{status:sr.AUTO_APPROVED,nextApprover:void 0,approvalHistory:[r,{actor:"Sistema",status:sr.AUTO_APPROVED,comment:"Aprovado automaticamente com base na poltica de baixo valor.",date:new Date().toISOString()}]}:e<=5e3||i?{status:sr.PENDING,nextApprover:"Gerente",approvalHistory:[r]}:{status:sr.PENDING,nextApprover:"Gerente",approvalHistory:[r]}},H0=Me?Ci(Me,"assets"):null,JU=t=>t?t.map(e=>({...e,uploadDate:ze.fromDate(new Date(e.uploadDate)),...e.expiryDate&&{expiryDate:ze.fromDate(new Date(e.expiryDate))}})):[],Jie=t=>t.map(e=>({...e,date:ze.fromDate(new Date(e.date)),approvalHistory:e.approvalHistory.map(n=>({...n,date:n.date?ze.fromDate(new Date(n.date)):ze.now()}))})),QU=t=>{var n,r,i,a;const e=t.data();return{id:t.id,tenantId:e.tenantId,name:e.name,type:e.type,location:e.location,purchaseDate:((n=e.purchaseDate)==null?void 0:n.toDate().toISOString().split("T")[0])||"",expirationDate:((r=e.expirationDate)==null?void 0:r.toDate().toISOString().split("T")[0])||"",purchaseValue:e.purchaseValue,status:e.status,supplierId:e.supplierId,maintenanceHistory:((i=e.maintenanceHistory)==null?void 0:i.map(s=>{var l,c;return{...s,date:(l=s.date)==null?void 0:l.toDate().toISOString().split("T")[0],approvalHistory:((c=s.approvalHistory)==null?void 0:c.map(h=>{var p;return{...h,date:(p=h.date)==null?void 0:p.toDate().toISOString()}}))||[]}}))||[],documents:((a=e.documents)==null?void 0:a.map(s=>{var l;return{...s,uploadDate:(l=s.uploadDate)==null?void 0:l.toDate().toISOString().split("T")[0],...s.expiryDate&&{expiryDate:s.expiryDate.toDate().toISOString().split("T")[0]}}}))||[],components:e.components||[],healthScore:e.healthScore,images:e.images||[],serialNumber:e.serialNumber,vehiclePlate:e.vehiclePlate,vehicleRenavam:e.vehicleRenavam,coordinates:e.coordinates,isConsumable:e.isConsumable,quantity:e.quantity,reorderLevel:e.reorderLevel,sku:e.sku}},Qie=async t=>{if(!H0)return console.error("Firebase is not properly configured. assetsCollectionRef is null."),[];const e=ri(H0,Yr("tenantId","==",t));return(await ii(e)).docs.map(QU).sort((i,a)=>new Date(a.purchaseDate).getTime()-new Date(i.purchaseDate).getTime())},Xie=async(t,e)=>{if(!H0)throw new Error("Firebase is not properly configured. assetsCollectionRef is null.");const n={...e,tenantId:t},r=await Bi(H0,{...n,purchaseDate:ze.fromDate(new Date(e.purchaseDate)),expirationDate:ze.fromDate(new Date(e.expirationDate)),purchaseValue:Number(e.purchaseValue),maintenanceHistory:[],documents:JU(e.documents),components:e.components||[]}),i=await sc(r);return QU(i)},eae=async(t,e)=>{if(!Me)throw new Error("Firebase is not properly configured. db is null.");if(e.tenantId!==t)throw new Error("Permission denied: Asset does not belong to the current tenant.");const n=Gt(Me,"assets",e.id),r={...e,purchaseDate:ze.fromDate(new Date(e.purchaseDate)),expirationDate:ze.fromDate(new Date(e.expirationDate)),maintenanceHistory:Jie(e.maintenanceHistory),documents:JU(e.documents),components:e.components||[]};delete r.id,await Ii(n,r)},tae=async(t,e)=>{if(!Me)throw new Error("Firebase is not properly configured. db is null.");const n=Gt(Me,"assets",e),r=await sc(n);if(!r.exists()||r.data().tenantId!==t)throw new Error("Permission denied or asset not found.");await Fo(n)},G0=Me?Ci(Me,"stock"):null,Lh=Me?Ci(Me,"stockCounts"):null,XU=t=>{var n;const e=t.data();return{id:t.id,name:e.name,sku:e.sku,quantity:e.quantity,location:e.location,threshold:e.threshold,tenantId:e.tenantId,lastUpdated:(n=e.lastUpdated)==null?void 0:n.toDate().toISOString(),lotNumber:e.lotNumber,expiryDate:e.expiryDate,batches:e.batches||[],movementHistory:e.movementHistory||[]}},nae=async t=>{if(!G0)throw new Error("Firebase is not properly configured.");const e=ri(G0,Yr("tenantId","==",t));return(await ii(e)).docs.map(XU).sort((i,a)=>i.name.localeCompare(a.name))},rae=async(t,e)=>{if(!G0)throw new Error("Firebase is not properly configured.");const n={id:`mov_${Date.now()}`,date:new Date().toISOString(),type:"ENTRADA",quantity:e.quantity,user:"Sistema",reason:"Cadastro inicial"},r=[];e.initialBatch?r.push({id:`batch_${Date.now()}`,lotNumber:e.initialBatch.lotNumber,expiryDate:e.initialBatch.expiryDate,quantity:e.quantity,entryDate:new Date().toISOString()}):r.push({id:`batch_${Date.now()}`,lotNumber:"DEFAULT",expiryDate:"2099-12-31",quantity:e.quantity,entryDate:new Date().toISOString()});const{initialBatch:i,...a}=e,s=await Bi(G0,{...a,tenantId:t,lastUpdated:Vg(),batches:r,movementHistory:[n]});return{...a,tenantId:t,id:s.id,lastUpdated:new Date().toISOString(),batches:r,movementHistory:[n]}},iae=async(t,{id:e,data:n})=>{if(!Me)throw new Error("Firebase is not properly configured.");const r=Gt(Me,"stock",e);await Ii(r,{...n,lastUpdated:Vg()})},aae=async t=>{if(!Lh)return!1;const e=ri(Lh,Yr("tenantId","==",t),Yr("status","==","Em Andamento"));return!(await ii(e)).empty},sae=async(t,e,n,r,i,a)=>{if(!Me)throw new Error("Firebase is not properly configured.");if(await aae(t))throw new Error("Regra 2.3.3: Movimentaes bloqueadas durante Inventrio.");const l=Gt(Me,"stock",e),c=await sc(l);if(!c.exists())throw new Error("Item not found.");const h=XU(c);if(h.tenantId!==t)throw new Error("Permission denied.");let p=h.quantity,g=[...h.batches||[]],x=[];const b=new Date().toISOString().split("T")[0];if(n==="ENTRADA")if(p+=r,g.length>0)g[g.length-1].quantity+=r,x.push(g[g.length-1].id);else{const R={id:`batch_${Date.now()}`,lotNumber:"LOTE-AUTO",expiryDate:"2099-12-31",quantity:r,entryDate:new Date().toISOString()};g.push(R),x.push(R.id)}else{if(h.quantity<r)throw new Error(`Operao negada: Estoque insuficiente. Disponvel: ${h.quantity}, Solicitado: ${r}`);g.sort((j,O)=>new Date(j.expiryDate).getTime()-new Date(O.expiryDate).getTime());let R=r;for(const j of g){if(R<=0)break;if(!(j.expiryDate<b)&&j.quantity>0){const O=Math.min(j.quantity,R);j.quantity-=O,R-=O,x.push(j.id)}}if(R>0)throw new Error("Operao negada: No h estoque vlido suficiente. O sistema prioriza lotes no vencidos (FIFO), e o saldo restante pode estar em lotes vencidos.");p-=r}const C={id:`mov_${Date.now()}`,date:new Date().toISOString(),type:n,quantity:r,user:i,origin:n==="TRANSFERENCIA"?h.location:void 0,destination:n==="TRANSFERENCIA"?a:void 0,batchesAffected:x},A=[...h.movementHistory,C],D={quantity:p,batches:g.filter(R=>R.quantity>0),movementHistory:A,lastUpdated:Vg()};return n==="TRANSFERENCIA"&&a&&(D.location=a),await Ii(l,D),{...h,quantity:p,location:n==="TRANSFERENCIA"&&a?a:h.location,batches:g.filter(R=>R.quantity>0),movementHistory:A,lastUpdated:new Date().toISOString()}},oae=async(t,e)=>{if(!Me)throw new Error("Firebase is not properly configured.");const n=Gt(Me,"stock",e);await Fo(n)},lae=t=>{var n;const e=t.data();return{id:t.id,tenantId:e.tenantId,date:(n=e.date)==null?void 0:n.toDate().toISOString(),countedBy:e.countedBy,items:e.items||[],status:e.status}},uae=async t=>{if(!Lh)throw new Error("Firebase is not properly configured.");const e=ri(Lh,Yr("tenantId","==",t));return(await ii(e)).docs.map(lae).sort((i,a)=>new Date(a.date).getTime()-new Date(i.date).getTime())},cae=async(t,e)=>{if(!Lh)throw new Error("Firebase is not properly configured.");return{id:(await Bi(Lh,{...e,tenantId:t,date:ze.fromDate(new Date(e.date))})).id,tenantId:t,...e}},$0=Me?Ci(Me,"suppliers"):null,dae=t=>{const e=t.data();return{id:t.id,tenantId:e.tenantId,name:e.name,category:e.category,contactPerson:e.contactPerson,email:e.email,phone:e.phone,address:e.address}},fae=async t=>{if(!$0)throw new Error("Firebase is not properly configured.");const e=ri($0,Yr("tenantId","==",t));return(await ii(e)).docs.map(dae).sort((i,a)=>i.name.localeCompare(a.name))},hae=async(t,e)=>{if(!$0)throw new Error("Firebase is not properly configured.");const n={...e,tenantId:t};return{id:(await Bi($0,n)).id,...n}},mae=async(t,{id:e,data:n})=>{if(!Me)throw new Error("Firebase is not properly configured.");const r=Gt(Me,"suppliers",e);await Ii(r,n)},pae=async(t,e)=>{if(!Me)throw new Error("Firebase is not properly configured.");const n=Gt(Me,"suppliers",e),r=await sc(n);if(!r.exists()||r.data().tenantId!==t)throw new Error("Permission denied or supplier not found.");await Fo(n)},u1=Me?Ci(Me,"invoices"):null,K0=Me?Ci(Me,"contracts"):null,gae=t=>{var n,r;const e=t.data();return{id:t.id,tenantId:e.tenantId,invoiceNumber:e.invoiceNumber,clientName:e.clientName,issueDate:(n=e.issueDate)==null?void 0:n.toDate().toISOString(),dueDate:(r=e.dueDate)==null?void 0:r.toDate().toISOString(),items:e.items||[],total:e.total,status:e.status}},yae=async t=>{if(!u1)throw new Error("Firebase is not properly configured.");const e=ri(u1,Yr("tenantId","==",t));return(await ii(e)).docs.map(gae).sort((i,a)=>a.invoiceNumber-i.invoiceNumber)},vae=async(t,e)=>{if(!Me)throw new Error("Firebase not configured.");const n=Gt(Me,"counters",`invoices_${t}`);let r;try{r=await LJ(Me,async s=>{const l=await s.get(n);if(!l.exists())return s.set(n,{currentNumber:1}),1;const c=l.data().currentNumber+1;return s.update(n,{currentNumber:c}),c})}catch(s){throw console.error("Transaction failed: ",s),new Error("Could not generate a new invoice number.")}const i={...e,tenantId:t,invoiceNumber:r},a=await Bi(u1,{...i,issueDate:ze.fromDate(new Date(e.issueDate)),dueDate:ze.fromDate(new Date(e.dueDate))});return{...i,id:a.id}},bO=async(t,{id:e,data:n})=>{if(!Me)throw new Error("Firebase not configured.");const r=Gt(Me,"invoices",e);await Ii(r,n)},xae=t=>{var n,r;const e=t.data();return{id:t.id,tenantId:e.tenantId,...e,startDate:(n=e.startDate)==null?void 0:n.toDate().toISOString(),endDate:(r=e.endDate)==null?void 0:r.toDate().toISOString()}},_ae=async t=>{if(!K0)throw new Error("Firebase is not properly configured.");const e=ri(K0,Yr("tenantId","==",t));return(await ii(e)).docs.map(xae).sort((i,a)=>i.name.localeCompare(a.name))},bae=async(t,e)=>{if(!K0)throw new Error("Firebase is not properly configured.");const n={...e,tenantId:t};return{id:(await Bi(K0,{...n,startDate:ze.fromDate(new Date(e.startDate)),endDate:ze.fromDate(new Date(e.endDate))})).id,...n}},wae=async(t,{id:e,data:n})=>{if(!Me)throw new Error("Firebase not configured.");const r=Gt(Me,"contracts",e),i={...n};n.startDate&&(i.startDate=ze.fromDate(new Date(n.startDate))),n.endDate&&(i.endDate=ze.fromDate(new Date(n.endDate))),await Ii(r,i)},Eae=async(t,e)=>{if(!Me)throw new Error("Firebase not configured.");const n=Gt(Me,"contracts",e),r=await sc(n);if(!r.exists()||r.data().tenantId!==t)throw new Error("Permission denied or contract not found.");await Fo(n)},W0=Me?Ci(Me,"companyDocuments"):null,Tae=t=>{var n,r;const e=t.data();return{id:t.id,tenantId:e.tenantId,name:e.name,category:e.category,tags:e.tags||[],uploadDate:(n=e.uploadDate)==null?void 0:n.toDate().toISOString(),expiryDate:((r=e.expiryDate)==null?void 0:r.toDate().toISOString())||void 0,fileUrl:e.fileUrl}},Sae=async t=>{if(!W0)throw new Error("Firebase is not properly configured.");const e=ri(W0,Yr("tenantId","==",t));return(await ii(e)).docs.map(Tae).sort((i,a)=>new Date(a.uploadDate).getTime()-new Date(i.uploadDate).getTime())},Aae=async(t,e)=>{if(!W0)throw new Error("Firebase is not properly configured.");const n={...e,tenantId:t};return{id:(await Bi(W0,{...n,uploadDate:ze.fromDate(new Date(e.uploadDate)),...e.expiryDate&&{expiryDate:ze.fromDate(new Date(e.expiryDate))}})).id,...n}},Cae=async(t,{id:e,data:n})=>{if(!Me)throw new Error("Firebase is not properly configured.");const r=Gt(Me,"companyDocuments",e),i={...n};n.uploadDate&&(i.uploadDate=ze.fromDate(new Date(n.uploadDate))),n.expiryDate&&(i.expiryDate=ze.fromDate(new Date(n.expiryDate))),await Ii(r,i)},Iae=async(t,e)=>{if(!Me)throw new Error("Firebase is not properly configured.");const n=Gt(Me,"companyDocuments",e),r=await sc(n);if(!r.exists()||r.data().tenantId!==t)throw new Error("Permission denied or document not found.");await Fo(n)},Y0=Me?Ci(Me,"purchaseRequisitions"):null,Z0=Me?Ci(Me,"purchaseOrders"):null,J0=Me?Ci(Me,"rfqs"):null,Nae=t=>{var n;const e=t.data();return{id:t.id,tenantId:e.tenantId,requesterName:e.requesterName,requestDate:(n=e.requestDate)==null?void 0:n.toDate().toISOString(),items:e.items||[],status:e.status,justification:e.justification,attachmentName:e.attachmentName,attachmentUrl:e.attachmentUrl,cancellationReason:e.cancellationReason}},Pae=async t=>{if(!Y0)throw new Error("Firebase is not properly configured.");const e=ri(Y0,Yr("tenantId","==",t));return(await ii(e)).docs.map(Nae).sort((i,a)=>new Date(a.requestDate).getTime()-new Date(i.requestDate).getTime())},Dae=async(t,e)=>{if(!Y0)throw new Error("Firebase is not properly configured.");const n={tenantId:t,requesterName:e.requesterName,requestDate:ze.fromDate(new Date(e.requestDate)),items:e.items,status:e.status};return e.justification&&(n.justification=e.justification),e.attachmentName&&(n.attachmentName=e.attachmentName),e.attachmentUrl&&(n.attachmentUrl=e.attachmentUrl),e.cancellationReason&&(n.cancellationReason=e.cancellationReason),{id:(await Bi(Y0,n)).id,tenantId:t,...e}},Rae=async(t,e)=>{if(!Me)throw new Error("Firebase is not properly configured.");if(e.tenantId!==t)throw new Error("Permission denied.");const n=Gt(Me,"purchaseRequisitions",e.id),r={...e};delete r.id;const i={...r,requestDate:ze.fromDate(new Date(r.requestDate))};e.cancellationReason===void 0&&delete i.cancellationReason,await Ii(n,i)},kae=t=>{var n,r,i;const e=t.data();return{id:t.id,tenantId:e.tenantId,requisitionId:e.requisitionId,supplierId:e.supplierId,orderDate:(n=e.orderDate)==null?void 0:n.toDate().toISOString(),items:e.items||[],totalValue:e.totalValue,status:e.status,receivedItems:((r=e.receivedItems)==null?void 0:r.map(a=>{var s;return{...a,receivedDate:(s=a.receivedDate)==null?void 0:s.toDate().toISOString()}}))||[],expectedDeliveryDate:(i=e.expectedDeliveryDate)==null?void 0:i.toDate().toISOString()}},Mae=async t=>{if(!Z0)throw new Error("Firebase is not properly configured.");const e=ri(Z0,Yr("tenantId","==",t));return(await ii(e)).docs.map(kae).sort((i,a)=>new Date(a.orderDate).getTime()-new Date(i.orderDate).getTime())},Oae=async(t,e)=>{if(!Z0)throw new Error("Firebase is not properly configured.");return{id:(await Bi(Z0,{...e,tenantId:t,orderDate:ze.fromDate(new Date(e.orderDate)),...e.expectedDeliveryDate&&{expectedDeliveryDate:ze.fromDate(new Date(e.expectedDeliveryDate))},receivedItems:[]})).id,tenantId:t,...e,receivedItems:[]}},wO=async(t,e)=>{if(!Me)throw new Error("Firebase is not properly configured.");if(e.tenantId!==t)throw new Error("Permission denied.");const n=Gt(Me,"purchaseOrders",e.id),r={...e};delete r.id,await Ii(n,{...r,orderDate:ze.fromDate(new Date(r.orderDate)),...r.expectedDeliveryDate&&{expectedDeliveryDate:ze.fromDate(new Date(r.expectedDeliveryDate))},receivedItems:r.receivedItems.map(i=>({...i,receivedDate:ze.fromDate(new Date(i.receivedDate))}))})},jae=t=>{var n,r;const e=t.data();return{id:t.id,tenantId:e.tenantId,requisitionId:e.requisitionId,creationDate:(n=e.creationDate)==null?void 0:n.toDate().toISOString(),sentToSupplierIds:e.sentToSupplierIds||[],items:e.items||[],status:e.status,quotes:((r=e.quotes)==null?void 0:r.map(i=>{var a,s;return{...i,quoteDate:(a=i.quoteDate)==null?void 0:a.toDate().toISOString(),validUntil:(s=i.validUntil)==null?void 0:s.toDate().toISOString()}}))||[]}},Lae=async t=>{if(!J0)throw new Error("Firebase is not properly configured.");const e=ri(J0,Yr("tenantId","==",t));return(await ii(e)).docs.map(jae).sort((r,i)=>new Date(i.creationDate).getTime()-new Date(r.creationDate).getTime())},Vae=async(t,e)=>{if(!J0)throw new Error("Firebase is not properly configured.");return{id:(await Bi(J0,{...e,tenantId:t,creationDate:ze.fromDate(new Date(e.creationDate)),quotes:[]})).id,tenantId:t,...e,quotes:[]}},Uae=async(t,e)=>{if(!Me)throw new Error("Firebase is not properly configured.");if(e.tenantId!==t)throw new Error("Permission denied.");const n=Gt(Me,"rfqs",e.id),r={...e};delete r.id,await Ii(n,{...r,creationDate:ze.fromDate(new Date(r.creationDate)),quotes:r.quotes.map(i=>({...i,quoteDate:ze.fromDate(new Date(i.quoteDate)),validUntil:ze.fromDate(new Date(i.validUntil))}))})},Q0=Me?Ci(Me,"users"):null,Fae=t=>{const e=t.data();return{uid:t.id,name:e.name,email:e.email,role:e.role,tenantId:e.tenantId,status:e.status}},Bae=async t=>{if(!Q0)throw new Error("Firebase no est configurado corretamente.");const e=ri(Q0,Yr("tenantId","==",t));return(await ii(e)).docs.map(Fae)},zae=async(t,e)=>{if(!Q0)throw new Error("Firebase no est configurado corretamente.");const n={...e,tenantId:t,status:"invited",createdAt:Vg()};return{uid:(await Bi(Q0,n)).id,name:e.name,email:e.email,role:e.role,tenantId:t,status:"invited"}},qae=async(t,{userId:e,role:n})=>{if(!Me)throw new Error("Firebase no configurado.");const r=Gt(Me,"users",e);await Ii(r,{role:n})},Hae=async(t,e)=>{if(!Me)throw new Error("Firebase no configurado.");const n=Gt(Me,"users",e);await Fo(n)},Gae=async t=>{if(!Me)return null;const e=Gt(Me,"settings",t),n=await sc(e);if(n.exists())return n.data();const r=Gt(Me,"users",t),i=await sc(r);if(i.exists()){const a=i.data();if(a.companyName)return{companyName:a.companyName}}return null},X0=Me?Ci(Me,"salesOrders"):null,$ae=t=>{var n;const e=t.data();return{id:t.id,tenantId:e.tenantId,customerName:e.customerName,date:(n=e.date)==null?void 0:n.toDate().toISOString(),total:e.total,status:e.status,items:e.items||[]}},Kae=async t=>{if(!X0)throw new Error("Firebase is not properly configured.");const e=ri(X0,Yr("tenantId","==",t));return(await ii(e)).docs.map($ae).sort((i,a)=>new Date(a.date).getTime()-new Date(i.date).getTime())},Wae=async(t,e)=>{if(!X0)throw new Error("Firebase is not properly configured.");return{id:(await Bi(X0,{...e,tenantId:t,date:ze.fromDate(new Date(e.date))})).id,tenantId:t,...e}},Yae=async(t,e,n)=>{if(!Me)throw new Error("Firebase is not properly configured.");const r=Gt(Me,"salesOrders",e);await Ii(r,{status:n})},ex=Me?Ci(Me,"deals"):null,Zae=t=>{var n;const e=t.data();return{id:t.id,tenantId:e.tenantId,title:e.title,clientName:e.clientName,value:e.value,stage:e.stage,probability:e.probability,expectedCloseDate:(n=e.expectedCloseDate)==null?void 0:n.toDate().toISOString().split("T")[0],owner:e.owner}},Jae=async t=>{if(!ex)throw new Error("Firebase not configured");const e=ri(ex,Yr("tenantId","==",t));return(await ii(e)).docs.map(Zae)},Qae=async(t,e)=>{if(!ex)throw new Error("Firebase not configured");return{id:(await Bi(ex,{...e,tenantId:t,expectedCloseDate:ze.fromDate(new Date(e.expectedCloseDate))})).id,tenantId:t,...e}},Xae=async(t,e)=>{if(!Me)throw new Error("Firebase not configured");const n=Gt(Me,"deals",e.id);await Ii(n,{...e,expectedCloseDate:ze.fromDate(new Date(e.expectedCloseDate))})},ese=async(t,e)=>{if(!Me)throw new Error("Firebase not configured");const n=Gt(Me,"deals",e);await Fo(n)},tx=Me?Ci(Me,"projects"):null,tse=t=>{var n,r;const e=t.data();return{id:t.id,tenantId:e.tenantId,name:e.name,client:e.client,status:e.status,progress:e.progress,startDate:(n=e.startDate)==null?void 0:n.toDate().toISOString().split("T")[0],endDate:(r=e.endDate)==null?void 0:r.toDate().toISOString().split("T")[0],budget:e.budget,manager:e.manager}},nse=async t=>{if(!tx)throw new Error("Firebase not configured");const e=ri(tx,Yr("tenantId","==",t));return(await ii(e)).docs.map(tse)},rse=async(t,e)=>{if(!tx)throw new Error("Firebase not configured");return{id:(await Bi(tx,{...e,tenantId:t,startDate:ze.fromDate(new Date(e.startDate)),endDate:ze.fromDate(new Date(e.endDate))})).id,tenantId:t,...e}},ise=async(t,e)=>{if(!Me)throw new Error("Firebase not configured");const n=Gt(Me,"projects",e.id);await Ii(n,{...e,startDate:ze.fromDate(new Date(e.startDate)),endDate:ze.fromDate(new Date(e.endDate))})},ase=async(t,e)=>{if(!Me)throw new Error("Firebase not configured");const n=Gt(Me,"projects",e);await Fo(n)},nx=Me?Ci(Me,"employees"):null,sse=t=>{var n;const e=t.data();return{id:t.id,tenantId:e.tenantId,name:e.name,role:e.role,department:e.department,email:e.email,admissionDate:(n=e.admissionDate)==null?void 0:n.toDate().toISOString().split("T")[0],salary:e.salary,status:e.status,avatarUrl:e.avatarUrl}},ose=async t=>{if(!nx)throw new Error("Firebase not configured");const e=ri(nx,Yr("tenantId","==",t));return(await ii(e)).docs.map(sse)},lse=async(t,e)=>{if(!nx)throw new Error("Firebase not configured");return{id:(await Bi(nx,{...e,tenantId:t,admissionDate:ze.fromDate(new Date(e.admissionDate))})).id,tenantId:t,...e}},use=async(t,e)=>{if(!Me)throw new Error("Firebase not configured");const n=Gt(Me,"employees",e.id);await Ii(n,{...e,admissionDate:ze.fromDate(new Date(e.admissionDate))})},cse=async(t,e)=>{if(!Me)throw new Error("Firebase not configured");const n=Gt(Me,"employees",e);await Fo(n)},rx=Me?Ci(Me,"expenses"):null,dse=t=>{var n,r,i;const e=t.data();return{id:t.id,tenantId:e.tenantId,description:e.description,supplierId:e.supplierId,category:e.category,issueDate:(n=e.issueDate)==null?void 0:n.toDate().toISOString().split("T")[0],dueDate:(r=e.dueDate)==null?void 0:r.toDate().toISOString().split("T")[0],totalValue:e.totalValue,amountPaid:e.amountPaid,remainingValue:e.remainingValue,status:e.status,paymentMethod:e.paymentMethod,isReconciled:e.isReconciled,groupId:e.groupId,installmentNumber:e.installmentNumber,totalInstallments:e.totalInstallments,paymentHistory:((i=e.paymentHistory)==null?void 0:i.map(a=>{var s;return{...a,date:(s=a.date)==null?void 0:s.toDate().toISOString()}}))||[],attachmentUrl:e.attachmentUrl}},fse=async t=>{if(!rx)throw new Error("Firebase not configured");const e=ri(rx,Yr("tenantId","==",t));return(await ii(e)).docs.map(dse).sort((r,i)=>new Date(r.dueDate).getTime()-new Date(i.dueDate).getTime())},hse=async(t,e)=>{if(!Me||!rx)throw new Error("Firebase not configured");const n=VJ(Me),r=`group_${Date.now()}`,i=e.installments||1,a=e.totalValue/i,s=[];for(let l=0;l<i;l++){const c=Gt(rx),h=new Date(e.dueDate);h.setMonth(h.getMonth()+l);const p={tenantId:t,description:i>1?`${e.description} (${l+1}/${i})`:e.description,supplierId:e.supplierId,category:e.category,issueDate:ze.fromDate(new Date(e.issueDate)),dueDate:ze.fromDate(h),totalValue:a,amountPaid:0,remainingValue:a,status:Li.OPEN,isReconciled:!1,groupId:i>1?r:null,installmentNumber:l+1,totalInstallments:i,paymentHistory:[],attachmentUrl:e.attachmentUrl||null};e.paymentMethod&&(p.paymentMethod=e.paymentMethod),n.set(c,p),s.push({id:c.id,...p,issueDate:e.issueDate,dueDate:h.toISOString().split("T")[0],paymentHistory:[]})}return await n.commit(),s},mse=async(t,e)=>{if(!Me)throw new Error("Firebase not configured");const n=Gt(Me,"expenses",e.id),r={...e,issueDate:ze.fromDate(new Date(e.issueDate)),dueDate:ze.fromDate(new Date(e.dueDate)),paymentHistory:e.paymentHistory.map(i=>({...i,date:ze.fromDate(new Date(i.date))}))};delete r.id,await Ii(n,r)},pse=async(t,e)=>{if(!Me)throw new Error("Firebase not configured");const n=Gt(Me,"expenses",e);await Fo(n)},eF=(t,e=30)=>{const n=[],r=new Date,i=new Date(Date.UTC(r.getUTCFullYear(),r.getUTCMonth(),r.getUTCDate())),a=s=>{const[l,c,h]=s.split("-").map(Number);return new Date(Date.UTC(l,c-1,h))};for(const s of t){if(s.expirationDate){const c=a(s.expirationDate).getTime()-i.getTime(),h=Math.ceil(c/(1e3*60*60*24));h>=0&&h<=e&&n.push({id:`asset-${s.id}`,type:"ativo",assetName:s.name,message:`O ativo '${s.name}' expira em ${h} dia(s).`,daysRemaining:h})}if(s.documents){for(const l of s.documents)if(l.type===bi.WARRANTY&&l.expiryDate){const h=a(l.expiryDate).getTime()-i.getTime(),p=Math.ceil(h/(1e3*60*60*24));p>=0&&p<=e&&n.push({id:`warranty-${s.id}-${l.id}`,type:"garantia",assetName:s.name,message:`A garantia de '${s.name}' expira em ${p} dia(s).`,daysRemaining:p})}}}return n.sort((s,l)=>s.daysRemaining-l.daysRemaining)},tF=N.createContext(void 0),gse=({children:t})=>{const{user:e}=$s(),n=e==null?void 0:e.tenantId,[r,i]=N.useState([]),[a,s]=N.useState([]),[l,c]=N.useState([]),[h,p]=N.useState([]),[g,x]=N.useState([]),[b,C]=N.useState([]),[A,D]=N.useState([]),[R,j]=N.useState([]),[O,q]=N.useState([]),[$,H]=N.useState([]),[U,z]=N.useState([]),[B,Z]=N.useState([]),[K,J]=N.useState([]),[G,Se]=N.useState([]),[Oe,ee]=N.useState([]),[re,le]=N.useState([]),[Ne,Pe]=N.useState([]),[X,ue]=N.useState([]),[be,Ce]=N.useState(!0),[je,Ve]=N.useState(null);N.useEffect(()=>{n?(async()=>{Jf.info("Loading data from Firestore for tenant",{tenant:n}),Ce(!0),Ve(null);try{const[we,ae,tt,Xe,yt,_t,Jt,fr,Kn,Wt,oi,Xs,$i,eo,Pi,li]=await Promise.all([Qie(n),nae(n),fae(n),yae(n),_ae(n),fse(n),Sae(n),Pae(n),Lae(n),Mae(n),uae(n),Bae(n),Kae(n),Jae(n),nse(n),ose(n)]);i(we),s(ae),c(tt);const nr=new Date().toISOString().split("T")[0],Ki=await Promise.all(Xe.map(async Sr=>Sr.status===Xn.PENDING&&Sr.dueDate<nr?(bO(n,{id:Sr.id,data:{status:Xn.OVERDUE}}).catch(console.error),{...Sr,status:Xn.OVERDUE}):Sr));p(Ki),x(yt),C(_t),D(Jt),j(fr),q(Kn),H(Wt),z(oi),Z(Xs),J($i),Se(eo),ee(Pi),le(li);const Rn=await Wie(n,we);Pe(Rn);let to=eF(we,30);_t.forEach(Sr=>{Sr.status!==Li.PAID&&Sr.dueDate<nr&&to.push({id:`overdue-${Sr.id}`,type:"ativo",assetName:"Financeiro",message:`ALERTA: Ttulo vencido "${Sr.description}" (${Sr.dueDate})!`,daysRemaining:-1})}),ue(to)}catch(we){Ve("Falha ao carregar os dados. Verifique sua conexo e tente novamente."),Jf.error("Failed to load Firestore data",we)}finally{Ce(!1)}})():(Ce(!1),i([]),s([]),c([]),p([]),C([]),x([]),D([]),j([]),q([]),H([]),z([]),Z([]),Pe([]),J([]),Se([]),ee([]),le([]))},[n]);const Ze=async xe=>{if(!n)throw new Error("Usurio no autenticado.");const we=await hse(n,xe);C(ae=>[...ae,...we].sort((tt,Xe)=>new Date(tt.dueDate).getTime()-new Date(Xe.dueDate).getTime()))},It=async(xe,we,ae,tt)=>{if(!n)throw new Error("Usurio no autenticado.");const Xe=b.find(Kn=>Kn.id===xe);if(!Xe)throw new Error("Despesa no encontrada");if(!ae)throw new Error("Forma de pagamento obrigatria.");const yt=Xe.amountPaid+we,_t=Math.max(0,Xe.totalValue-yt),Jt=_t<=.01?Li.PAID:Li.PARTIAL,fr={...Xe,amountPaid:yt,remainingValue:_t,status:Jt,paymentMethod:ae,paymentHistory:[...Xe.paymentHistory,{date:tt,amount:we,method:ae,user:(e==null?void 0:e.name)||"Sistema"}]};await mse(n,fr),C(Kn=>Kn.map(Wt=>Wt.id===xe?fr:Wt))},Te=async xe=>{if(!n)throw new Error("Usurio no autenticado.");const we=b.find(ae=>ae.id===xe);if(!we)throw new Error("Despesa no encontrada");if(we.isReconciled)throw new Error("No  permitido excluir ttulos j conciliados.");await pse(n,xe),C(ae=>ae.filter(tt=>tt.id!==xe))},st=async xe=>{if(!n)throw new Error("Usurio no autenticado.");const we=await Xie(n,xe);return i(ae=>[we,...ae].sort((tt,Xe)=>new Date(Xe.purchaseDate).getTime()-new Date(tt.purchaseDate).getTime())),we},lt=async xe=>{if(!n)throw new Error("Usurio no autenticado.");await eae(n,xe),i(we=>we.map(ae=>ae.id===xe.id?xe:ae))},he=async xe=>{if(!n)throw new Error("Usurio no autenticado.");await tae(n,xe),i(we=>we.filter(ae=>ae.id!==xe))},gt=async xe=>{if(!n||!e)throw new Error("Usurio no autenticado.");const we=r.find(yt=>yt.id===xe.assetId);if(!we)throw new Error("Ativo no encontrado.");const ae=Zie(we,Number(xe.cost),e.name||"Usurio"),tt={id:`maint-${Date.now()}`,...xe,cost:Number(xe.cost),...ae},Xe={...we,maintenanceHistory:[...we.maintenanceHistory,tt]};await lt(Xe)},dt=async(xe,we)=>{if(!n)throw new Error("Usurio no autenticado.");const ae=r.find(yt=>yt.id===xe);if(!ae)throw new Error("Asset not found");const tt=ae.maintenanceHistory.map(yt=>yt.id===we.id?we:yt),Xe={...ae,maintenanceHistory:tt};await lt(Xe)},yn=async xe=>{if(!n)throw new Error("Usurio no autenticado.");const we=await rae(n,xe);s(ae=>[...ae,we].sort((tt,Xe)=>tt.name.localeCompare(Xe.name)))},sn=async(xe,we)=>{if(!n)throw new Error("Usurio no autenticado.");await iae(n,{id:xe,data:we});const ae=a.find(Xe=>Xe.id===xe),tt=we.quantity!==void 0?we.quantity:ae==null?void 0:ae.quantity;if(ae&&tt!==void 0&&tt<=ae.threshold&&!R.find(yt=>yt.status===Jn.PENDING&&yt.items.some(_t=>_t.stockItemId===xe))){const yt=Math.max(10,ae.threshold*2),_t={requesterName:"Sistema (Automao de Estoque)",requestDate:new Date().toISOString(),status:Jn.PENDING,items:[{stockItemId:xe,description:ae.name,quantity:yt}],justification:`Alerta Automtico (Regra 2.3): Estoque (${tt}) atingiu o nvel mnimo (${ae.threshold}).`};await Js(_t),Jf.info(`Automatic purchase requisition triggered for item ${ae.name}`)}s(Xe=>Xe.map(yt=>yt.id===xe?{...yt,...we,lastUpdated:new Date().toISOString()}:yt))},tr=async xe=>{if(!n)throw new Error("Usurio no autenticado.");await oae(n,xe),s(we=>we.filter(ae=>ae.id!==xe))},jr=async(xe,we,ae,tt)=>{if(!n||!e)throw new Error("Usurio no autenticado.");try{const Xe=await sae(n,xe,we,ae,e.name||"Usurio",tt);s(yt=>yt.map(_t=>_t.id===xe?Xe:_t))}catch(Xe){throw console.error(Xe),new Error(Xe.message)}},In=async xe=>{if(!n)throw new Error("Usurio no autenticado.");const we=await cae(n,xe);z(ae=>[we,...ae])},Nn=async xe=>{if(!n)throw new Error("Usurio no autenticado.");const we=await hae(n,xe);c(ae=>[...ae,we].sort((tt,Xe)=>tt.name.localeCompare(Xe.name)))},qi=async(xe,we)=>{if(!n)throw new Error("Usurio no autenticado.");await mae(n,{id:xe,data:we}),c(ae=>ae.map(tt=>tt.id===xe?{...tt,...we}:tt))},Zl=async xe=>{if(!n)throw new Error("Usurio no autenticado.");await pae(n,xe),c(we=>we.filter(ae=>ae.id!==xe))},Ys=async xe=>{if(!n)throw new Error("Usurio no autenticado.");const we=await vae(n,xe);p(ae=>[we,...ae])},Tr=async(xe,we)=>{if(!n)throw new Error("Usurio no autenticado.");const ae=h.find(tt=>tt.id===xe);if(ae&&we.total!==void 0&&Math.abs(we.total-ae.total)>.01)throw new Error("Regra 2.1.2: No  permitido alterar o valor de uma cobrana aps emisso.");await bO(n,{id:xe,data:we}),p(tt=>tt.map(Xe=>Xe.id===xe?{...Xe,...we}:Xe))},xs=async xe=>{if(!n)throw new Error("Usurio no autenticado.");const we=await bae(n,xe);x(ae=>[...ae,we])},_s=async(xe,we)=>{if(!n)throw new Error("Usurio no autenticado.");await wae(n,{id:xe,data:we}),x(ae=>ae.map(tt=>tt.id===xe?{...tt,...we}:tt))},Zs=async xe=>{if(!n)throw new Error("Usurio no autenticado.");await Eae(n,xe),x(we=>we.filter(ae=>ae.id!==xe))},pa=async xe=>{if(!n)throw new Error("Usurio no autenticado.");const we=await Aae(n,xe);D(ae=>[we,...ae])},Tc=async(xe,we)=>{if(!n)throw new Error("Usurio no autenticado.");await Cae(n,{id:xe,data:we}),D(ae=>ae.map(tt=>tt.id===xe?{...tt,...we}:tt))},qo=async xe=>{if(!n)throw new Error("Usurio no autenticado.");await Iae(n,xe),D(we=>we.filter(ae=>ae.id!==xe))},Js=async xe=>{if(!n)throw new Error("Usurio no autenticado.");const we=await Dae(n,xe);j(ae=>[we,...ae])},Go={assets:r,stockItems:a,suppliers:l,invoices:h,contracts:g,expenses:b,companyDocuments:A,purchaseRequisitions:R,rfqs:O,purchaseOrders:$,stockCounts:U,users:B,salesOrders:K,deals:G,projects:Oe,employees:re,failurePredictions:Ne,systemNotifications:X,isLoading:be,error:je,addAsset:st,updateAsset:lt,deleteAsset:he,addMaintenance:gt,updateMaintenanceRecord:dt,addStockItem:yn,updateStockItem:sn,deleteStockItem:tr,registerStockMovement:jr,addSupplier:Nn,updateSupplier:qi,deleteSupplier:Zl,addInvoice:Ys,updateInvoice:Tr,addContract:xs,updateContract:_s,deleteContract:Zs,addCompanyDocument:pa,updateCompanyDocument:Tc,deleteCompanyDocument:qo,addPurchaseRequisition:Js,updatePurchaseRequisition:async xe=>{if(!n)throw new Error("Usurio no autenticado.");await Rae(n,xe),j(we=>we.map(ae=>ae.id===xe.id?xe:ae))},addRequestForQuotation:async xe=>{if(!n)throw new Error("Usurio no autenticado.");const we=await Vae(n,xe);q(ae=>[we,...ae])},updateRequestForQuotation:async xe=>{if(!n)throw new Error("Usurio no autenticado.");await Uae(n,xe),q(we=>we.map(ae=>ae.id===xe.id?xe:ae))},addPurchaseOrder:async xe=>{if(!n)throw new Error("Usurio no autenticado.");const we=await Oae(n,xe);H(ae=>[we,...ae])},updatePurchaseOrder:async xe=>{if(!n)throw new Error("Usurio no autenticado.");await wO(n,xe),H(we=>we.map(ae=>ae.id===xe.id?xe:ae))},receiveOrderItems:async(xe,we)=>{if(!n)throw new Error("Usurio no autenticado.");const ae=$.find(Wt=>Wt.id===xe);if(!ae)throw new Error("Ordem de compra no encontrada.");for(const Wt of we)if(Wt.stockItemId){const oi=a.find(Xs=>Xs.id===Wt.stockItemId);oi&&await jr(oi.id,"ENTRADA",Wt.quantityReceived)}const tt=we.map(Wt=>({...Wt,receivedDate:new Date().toISOString()})),Xe=[...ae.receivedItems,...tt],yt=new Map;ae.items.forEach(Wt=>{yt.set(Wt.description,(yt.get(Wt.description)||0)+Wt.quantity)});const _t=new Map;Xe.forEach(Wt=>{_t.set(Wt.description,(_t.get(Wt.description)||0)+Wt.quantityReceived)});let Jt=!0;for(const[Wt,oi]of yt.entries())if((_t.get(Wt)||0)<oi){Jt=!1;break}const fr=Jt?Eo.RECEIVED:Eo.PARTIALLY_RECEIVED,Kn={...ae,receivedItems:Xe,status:fr};await wO(n,Kn),H(Wt=>Wt.map(oi=>oi.id===xe?Kn:oi))},addStockCount:In,inviteUser:async xe=>{if(!n)throw new Error("Usurio no autenticado.");const we=await zae(n,xe);Z(ae=>[...ae,we])},updateUserRole:async(xe,we)=>{if(!n)throw new Error("Usurio no autenticado.");await qae(n,{userId:xe,role:we}),Z(ae=>ae.map(tt=>tt.uid===xe?{...tt,role:we}:tt))},deleteUser:async xe=>{if(!n)throw new Error("Usurio no autenticado.");await Hae(n,xe),Z(we=>we.filter(ae=>ae.uid!==xe))},addSalesOrder:async xe=>{if(!n)throw new Error("Usurio no autenticado.");const we=await Wae(n,xe);J(ae=>[we,...ae])},updateSalesOrderStatus:async(xe,we)=>{if(!n)throw new Error("Usurio no autenticado.");const ae=K.find(tt=>tt.id===xe);if(ae&&we==="Faturado"&&ae.status!=="Faturado"){const tt={clientName:ae.customerName,issueDate:new Date().toISOString(),dueDate:new Date(new Date().setDate(new Date().getDate()+30)).toISOString(),items:ae.items.map(Xe=>({id:`inv-item-${Date.now()}-${Math.random()}`,description:Xe.description,quantity:Xe.quantity,unitPrice:Xe.unitPrice,total:Xe.quantity*Xe.unitPrice})),total:ae.total,status:Xn.PENDING};await Ys(tt),Jf.info(`Generated Invoice for Sales Order ${xe}`)}await Yae(n,xe,we),J(tt=>tt.map(Xe=>Xe.id===xe?{...Xe,status:we}:Xe))},addDeal:async xe=>{if(!n)throw new Error("Usurio no autenticado.");const we=await Qae(n,xe);Se(ae=>[...ae,we])},updateDeal:async xe=>{if(!n)throw new Error("Usurio no autenticado.");await Xae(n,xe),Se(we=>we.map(ae=>ae.id===xe.id?xe:ae))},deleteDeal:async xe=>{if(!n)throw new Error("Usurio no autenticado.");await ese(n,xe),Se(we=>we.filter(ae=>ae.id!==xe))},addProject:async xe=>{if(!n)throw new Error("Usurio no autenticado.");const we=await rse(n,xe);ee(ae=>[...ae,we])},updateProject:async xe=>{if(!n)throw new Error("Usurio no autenticado.");await ise(n,xe),ee(we=>we.map(ae=>ae.id===xe.id?xe:ae))},deleteProject:async xe=>{if(!n)throw new Error("Usurio no autenticado.");await ase(n,xe),ee(we=>we.filter(ae=>ae.id!==xe))},addEmployee:async xe=>{if(!n)throw new Error("Usurio no autenticado.");const we=await lse(n,xe);le(ae=>[...ae,we])},updateEmployee:async xe=>{if(!n)throw new Error("Usurio no autenticado.");await use(n,xe),le(we=>we.map(ae=>ae.id===xe.id?xe:ae))},deleteEmployee:async xe=>{if(!n)throw new Error("Usurio no autenticado.");await cse(n,xe),le(we=>we.filter(ae=>ae.id!==xe))},addExpense:Ze,settleExpense:It,deleteExpense:Te};return f.jsx(tF.Provider,{value:Go,children:t})},yse=t=>f.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",...t,children:f.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M9.813 15.904L9 18.75l-.813-2.846a4.5 4.5 0 00-3.09-3.09L2.25 12l2.846-.813a4.5 4.5 0 003.09-3.09L9 5.25l.813 2.846a4.5 4.5 0 003.09 3.09L15.75 12l-2.846.813a4.5 4.5 0 00-3.09 3.09zM18.259 8.715L18 9.75l-.259-1.035a3.375 3.375 0 00-2.455-2.456L14.25 6l1.036-.259a3.375 3.375 0 002.455-2.456L18 2.25l.259 1.035a3.375 3.375 0 002.456 2.456L21.75 6l-1.035.259a3.375 3.375 0 00-2.456 2.456zM16.898 20.562L16.25 22.5l-.648-1.938a3.375 3.375 0 00-2.625-2.625L11.25 18l1.938-.648a3.375 3.375 0 002.625-2.625L16.25 13.5l.648 1.938a3.375 3.375 0 002.625 2.625L21 18.75l-1.938.648a3.375 3.375 0 00-2.625 2.625z"})}),vse=t=>f.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",...t,children:f.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M6 12L3.269 3.126A59.768 59.768 0 0121.485 12 59.77 59.77 0 013.27 20.876L5.999 12zm0 0h7.5"})}),Ba=t=>f.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",...t,children:f.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 4.5v15m7.5-7.5h-15"})}),kC=t=>f.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",...t,children:f.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M3.75 21h16.5M4.5 3h15M5.25 3v18m13.5-18v18M9 6.75h1.5m-1.5 3h1.5m-1.5 3h1.5m3-6h1.5m-1.5 3h1.5m-1.5 3h1.5M9 21v-3.375c0-.621.504-1.125 1.125-1.125h3.75c.621 0 1.125.504 1.125 1.125V21"})}),D_=t=>f.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",...t,children:f.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M11.42 15.17L17.25 21A2.652 2.652 0 0021 17.25l-5.877-5.877M11.42 15.17l2.496-3.03c.317-.384.74-.626 1.208-.766M11.42 15.17l-4.655 5.653a2.548 2.548 0 11-3.586-3.586l6.837-5.63m5.108-.233c.55-.164 1.163-.188 1.743-.14a4.5 4.5 0 004.474-4.474c-.047-.58-.188-1.193-.332-1.743L14 12l-4.655 5.653a2.548 2.548 0 11-3.586-3.586l6.837-5.63m5.108-.233c-.55-.164-1.163-.188-1.743-.14a4.5 4.5 0 00-4.474-4.474c-.047-.58-.188-1.193-.332-1.743L14 12"})}),MC=t=>f.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",...t,children:f.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M20.25 6.375c0 2.278-3.694 4.125-8.25 4.125S3.75 8.653 3.75 6.375m16.5 0c0-2.278-3.694-4.125-8.25-4.125S3.75 4.097 3.75 6.375m16.5 0v11.25c0 2.278-3.694 4.125-8.25 4.125s-8.25-1.847-8.25-4.125V6.375"})}),ix=t=>f.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",...t,children:f.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M3 16.5v2.25A2.25 2.25 0 005.25 21h13.5A2.25 2.25 0 0021 18.75V16.5M16.5 12L12 16.5m0 0L7.5 12m4.5 4.5V3"})}),xse=t=>f.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",...t,children:[f.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M10.5 6a7.5 7.5 0 107.5 7.5h-7.5V6z"}),f.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M13.5 10.5H21A7.5 7.5 0 0013.5 3v7.5z"})]}),_se=t=>f.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",...t,children:[f.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M9.594 3.94c.09-.542.56-.94 1.11-.94h2.593c.55 0 1.02.398 1.11.94l.213 1.281c.063.374.26.716.53 1.003l.82 1.106c.44.592.24 1.48-.35 1.729l-1.262.562c-.297.133-.556.36-.75.63l-.81 1.08c-.29.39-.752.63-1.246.63h-1.562c-.494 0-.956-.24-1.246-.63l-.81-1.08a2.252 2.252 0 01-.75-.63l-1.262-.562a1.25 1.25 0 01-.35-1.729l.82-1.106c.27-.287.467-.629.53-1.003l.213-1.281z"}),f.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M15 12a3 3 0 11-6 0 3 3 0 016 0z"})]}),nF=t=>f.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",...t,children:f.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M15.75 9V5.25A2.25 2.25 0 0013.5 3h-6a2.25 2.25 0 00-2.25 2.25v13.5A2.25 2.25 0 007.5 21h6a2.25 2.25 0 002.25-2.25V15m3 0l3-3m0 0l-3-3m3 3H9"})}),bse=t=>f.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",...t,children:f.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M8.25 15L12 18.75 15.75 15m-7.5-6L12 5.25 15.75 9"})}),wse=t=>f.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:2,stroke:"currentColor",...t,children:f.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M4.5 15.75l7.5-7.5 7.5 7.5"})}),Ese=t=>f.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:2,stroke:"currentColor",...t,children:f.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M19.5 8.25l-7.5 7.5-7.5-7.5"})}),R_=t=>f.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",...t,children:f.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M9 12.75L11.25 15 15 9.75M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})}),OC=t=>f.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",...t,children:[f.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 18v-5.25m0 0a6.01 6.01 0 001.5-.189m-1.5.189a6.01 6.01 0 01-1.5-.189m3.75 7.478a12.06 12.06 0 01-4.5 0m3.75 2.311a12.06 12.06 0 00-4.5 0m3.75 2.311a12.06 12.06 0 01-4.5 0M21 12a9 9 0 11-18 0 9 9 0 0118 0z"}),f.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M9.75 12.75a2.25 2.25 0 114.5 0 2.25 2.25 0 01-4.5 0z"})]}),rF=t=>f.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",...t,children:f.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M9 12.75L11.25 15 15 9.75m6-3.375c0 .621-.252 1.223-.701 1.662l-3.375 3.375c-.44.44-.94.75-1.485.932l-3.375 1.125c-.545.182-1.139.182-1.684 0l-3.375-1.125a2.983 2.983 0 01-1.485-.932l-3.375-3.375a2.25 2.25 0 01-.701-1.662V6.375c0-.621.252-1.223.701-1.662l3.375-3.375c.44-.44.94-.75 1.485-.932l3.375-1.125c.545-.182 1.139-.182 1.684 0l3.375 1.125c.545.182.94.49 1.485.932l3.375 3.375c.44.44.701 1.04.701 1.662v1.875z"})}),Tse=t=>f.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",...t,children:f.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M3.75 3v11.25A2.25 2.25 0 006 16.5h2.25M3.75 3h-1.5m1.5 0h16.5m0 0h1.5m-1.5 0v11.25A2.25 2.25 0 0118 16.5h-2.25m-7.5 0h7.5m-7.5 0l-1 1.5m1-1.5L9 15m-3 1.5h.008v.008H6M12 15h.008v.008H12M15 15h.008v.008H15M6 21v-3.375c0-.621.504-1.125 1.125-1.125h3.75c.621 0 1.125.504 1.125 1.125V21"})}),Sse=t=>f.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",...t,children:f.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M10.5 1.5H8.25A2.25 2.25 0 006 3.75v16.5a2.25 2.25 0 002.25 2.25h7.5A2.25 2.25 0 0018 20.25V3.75a2.25 2.25 0 00-2.25-2.25H13.5m-3 0V3h3V1.5m-3 0h3m-3 18.75h3"})}),ch=t=>f.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",...t,children:f.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M19.5 14.25v-2.625a3.375 3.375 0 00-3.375-3.375h-1.5A1.125 1.125 0 0113.5 7.125v-1.5a3.375 3.375 0 00-3.375-3.375H8.25m0 12.75h7.5m-7.5 3H12M10.5 2.25H5.625c-.621 0-1.125.504-1.125 1.125v17.25c0 .621.504 1.125 1.125 1.125h12.75c.621 0 1.125-.504 1.125-1.125V11.25a9 9 0 00-9-9z"})}),Ro=t=>{const{title:e,...n}=t;return f.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",...n,children:[e&&f.jsx("title",{children:e}),f.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 9v3.75m-9.303 3.376c-.866 1.5.217 3.374 1.948 3.374h14.71c1.73 0 2.813-1.874 1.948-3.374L13.949 3.378c-.866-1.5-3.032-1.5-3.898 0L2.697 16.126zM12 15.75h.007v.008H12v-.008z"})]})},Ase=t=>f.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",...t,children:f.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M14.857 17.082a23.848 23.848 0 005.454-1.31A8.967 8.967 0 0118 9.75v-.7V9A6 6 0 006 9v.75a8.967 8.967 0 01-2.312 6.022c1.733.64 3.56 1.085 5.455 1.31m5.714 0a24.255 24.255 0 01-5.714 0m5.714 0a3 3 0 11-5.714 0"})}),k_=t=>f.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",...t,children:f.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 6v6h4.5m4.5 0a9 9 0 11-18 0 9 9 0 0118 0z"})}),Cse=t=>f.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",...t,children:f.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M9.75 9.75l4.5 4.5m0-4.5l-4.5 4.5M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})}),Ise=t=>f.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",...t,children:f.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M20.25 7.5l-.625 10.632a2.25 2.25 0 01-2.247 2.118H6.622a2.25 2.25 0 01-2.247-2.118L3.75 7.5M10 11.25h4M3.375 7.5h17.25c.621 0 1.125-.504 1.125-1.125v-1.5c0-.621-.504-1.125-1.125-1.125H3.375c-.621 0-1.125.504-1.125 1.125v1.5c0 .621.504 1.125 1.125 1.125z"})}),ax=t=>f.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",...t,children:f.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 6v12m-3-2.818l.879.659c1.171.879 3.07.879 4.242 0 1.172-.879 1.172-2.303 0-3.182C13.536 12.219 12.768 12 12 12c-.725 0-1.45-.22-2.003-.659-1.106-.879-1.106-2.303 0-3.182s2.9-.879 4.006 0l.415.33M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})}),Nse=t=>f.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",...t,children:f.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M2.25 12.75V12A2.25 2.25 0 014.5 9.75h15A2.25 2.25 0 0121.75 12v.75m-8.69-6.44l-2.12-2.12a1.5 1.5 0 00-1.061-.44H4.5A2.25 2.25 0 002.25 6v12a2.25 2.25 0 002.25 2.25h15A2.25 2.25 0 0021.75 18V9a2.25 2.25 0 00-2.25-2.25h-5.379a1.5 1.5 0 01-1.06-.44z"})}),c1=t=>f.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",...t,children:[f.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M9 12.75L11.25 15 15 9.75M21 12a9 9 0 11-18 0 9 9 0 0118 0z"}),f.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M15.75 6a3.75 3.75 0 11-7.5 0 3.75 3.75 0 017.5 0zM4.501 20.118a7.5 7.5 0 0114.998 0A17.933 17.933 0 0112 21.75c-2.676 0-5.216-.584-7.499-1.632z"})]}),Pse=t=>f.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",...t,children:[f.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M15 10.5a3 3 0 11-6 0 3 3 0 016 0z"}),f.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M19.5 10.5c0 7.142-7.5 11.25-7.5 11.25S4.5 17.642 4.5 10.5a7.5 7.5 0 1115 0z"})]}),iF=t=>f.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",...t,children:f.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M6 18L18 6M6 6l12 12"})}),aF=t=>f.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",...t,children:f.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M3.75 6.75h16.5M3.75 12h16.5m-16.5 5.25h16.5"})}),Dse=t=>f.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",...t,children:f.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M2.25 3h1.386c.51 0 .955.343 1.087.835l.383 1.437M7.5 14.25a3 3 0 00-3 3h15.75m-12.75-3h11.218c.51 0 .962-.343 1.087-.835l1.838-5.513c.275-.824-.25-1.665-1.087-1.665H5.25"})}),Rse=t=>f.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",...t,children:f.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M3.75 6A2.25 2.25 0 016 3.75h2.25A2.25 2.25 0 0110.5 6v2.25a2.25 2.25 0 01-2.25 2.25H6A2.25 2.25 0 013.75 8.25V6zM3.75 15.75A2.25 2.25 0 016 13.5h2.25a2.25 2.25 0 012.25 2.25V18A2.25 2.25 0 018.25 20.25H6A2.25 2.25 0 013.75 18v-2.25zM13.5 6A2.25 2.25 0 0115.75 3.75h2.25A2.25 2.25 0 0120.25 6v2.25A2.25 2.25 0 0118 10.5h-2.25A2.25 2.25 0 0113.5 8.25V6zM13.5 15.75A2.25 2.25 0 0115.75 13.5h2.25a2.25 2.25 0 012.25 2.25V18A2.25 2.25 0 0118 20.25h-2.25A2.25 2.25 0 0113.5 18v-2.25z"})}),sF=t=>f.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",...t,children:f.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M8.25 6.75h12M8.25 12h12m-12 5.25h12M3.75 6.75h.007v.008H3.75V6.75zm.375 0a.375.375 0 11-.75 0 .375.375 0 01.75 0zM3.75 12h.007v.008H3.75V12zm.375 0a.375.375 0 11-.75 0 .375.375 0 01.75 0zm-.375 5.25h.007v.008H3.75v-.008zm.375 0a.375.375 0 11-.75 0 .375.375 0 01.75 0z"})}),d1=t=>f.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",...t,children:f.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M18 18.72a9.094 9.094 0 003.741-.479 3 3 0 00-4.682-2.72m-7.5-2.96a3 3 0 004.682 2.72m-8.158 2.96c-.364.223-.744.401-1.138.532A6.002 6.002 0 014.5 13.5a6.002 6.002 0 011.138-3.632 3 3 0 004.682 2.72m-8.158 2.96c.364.223.744.401 1.138.532A6.002 6.002 0 004.5 13.5a6.002 6.002 0 00-1.138-3.632 3 3 0 00-4.682 2.72M12 12.75a3 3 0 100-6 3 3 0 000 6z"})}),jC=t=>f.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",...t,children:f.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M2.25 18.75a60.07 60.07 0 0115.797 2.101c.727.198 1.453-.342 1.453-1.096V18.75M3.75 4.5v.75A.75.75 0 013 6h-.75m0 0v-.375c0-.621.504-1.125 1.125-1.125H20.25M2.25 6v9m18-10.5v.75c0 .414.336.75.75.75h.75m-1.5-1.5h.375c.621 0 1.125.504 1.125 1.125v9.75c0 .621-.504 1.125-1.125 1.125h-.375m1.5-1.5H21a.75.75 0 00-.75.75v.75m0 0H3.75m0 0h-.375a1.125 1.125 0 01-1.125-1.125V15m1.5 1.5v-.75A.75.75 0 003 15h-.75M15 10.5a3 3 0 11-6 0 3 3 0 016 0z"})}),kse=t=>f.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",...t,children:f.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M16.5 6v.75m0 3v.75m0 3v.75m0 3V18m-9-1.5h5.25m-5.25 0h3m-3 0h-3m0 0h1.5m-1.5 0h-3m3.75 0v.75c0 .621.504 1.125 1.125 1.125h3.75c.621 0 1.125-.504 1.125-1.125V16.5m-6-3h3m-3 0h-3m0 0h1.5m-1.5 0h-3m3.75 0v.75c0 .621.504 1.125 1.125 1.125h3.75c.621 0 1.125-.504 1.125-1.125V13.5m-6-3h3m-3 0h-3m0 0h1.5m-1.5 0h-3m3.75 0V9.75c0-.621.504-1.125 1.125-1.125h3.75c.621 0 1.125.504 1.125 1.125V10.5m-6-3h3m-3 0h-3m0 0h1.5m-1.5 0h-3m0-3h.008v.008H7.5V7.5h-.008V7.5zM10.5 7.5c0-1.13.264-2.185.724-3.131A8.967 8.967 0 0112 3c.901 0 1.76.122 2.576.342.46.156.885.353 1.276.582M10.5 16.5c0 1.13-.264 2.185-.724 3.131A8.967 8.967 0 0112 21c.901 0 1.76-.122 2.576-.342.46-.156.885-.353 1.276-.582"})}),oF=t=>f.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",...t,children:f.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M20.25 14.15v4.25c0 1.094-.787 2.036-1.872 2.18-2.087.277-4.216.42-6.378.42s-4.291-.143-6.378-.42c-1.085-.144-1.872-1.086-1.872-2.18v-4.25m16.5 0a2.18 2.18 0 00.75-1.661V8.706c0-1.081-.768-2.015-1.837-2.175a48.111 48.111 0 00-3.413-.387m4.5 8.006c-.194.165-.42.295-.673.38A23.978 23.978 0 0112 15.75c-2.648 0-5.195-.429-7.577-1.22a2.016 2.016 0 01-.673-.38m0 0A2.18 2.18 0 013 12.489V8.706c0-1.081.768-2.015 1.837-2.175a48.111 48.111 0 003.413-.387m7.5 0V5.25A2.25 2.25 0 0013.5 3h-3a2.25 2.25 0 00-2.25 2.25v.894m7.5 0a48.667 48.667 0 00-7.5 0M12 12.75h.008v.008H12v-.008z"})}),lF=t=>f.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",...t,children:f.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M15.75 15.75V18m-7.5-6.75h.008v.008H8.25v-.008zm0 2.25h.008v.008H8.25v-.008zm0 2.25h.008v.008H8.25v-.008zm0 2.25h.008v.008H8.25v-.008zm2.25-4.5h.008v.008H10.5v-.008zm0 2.25h.008v.008H10.5v-.008zm0 2.25h.008v.008H10.5v-.008zm2.25-4.5h.008v.008H12.75v-.008zm0 2.25h.008v.008H12.75v-.008zm0 2.25h.008v.008H12.75v-.008zm2.25-4.5h.008v.008H15v-.008zm0 2.25h.008v.008H15v-.008zm0 2.25h.008v.008H15v-.008zM2.25 18.675c0 .756.16 1.451.443 2.076H3.75c.69 0 1.25-.56 1.25-1.25v-1.5c0-.69-.56-1.25-1.25-1.25H2.693a4.482 4.482 0 01-.443-2.075V6.325c0-.756.16-1.451.443-2.076H3.75c.69 0 1.25-.56 1.25-1.25V1.5c0-.69-.56-1.25-1.25-1.25H2.693A4.482 4.482 0 012.25 6.325v12.35zm19.5 0c0 .756-.16 1.451-.443 2.076H20.25c-.69 0-1.25-.56-1.25-1.25v-1.5c0-.69.56-1.25 1.25-1.25h1.057c.283.625.443 1.32.443 2.075V6.325c0-.756-.16-1.451-.443-2.076H20.25c-.69 0-1.25-.56-1.25-1.25V1.5c0-.69.56-1.25 1.25-1.25h1.057c.283.625.443 1.32.443 2.075v12.35z"})}),uF=t=>f.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",...t,children:f.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M3.75 3v11.25A2.25 2.25 0 006 16.5h2.25M3.75 3h-1.5m1.5 0h16.5m0 0h1.5m-1.5 0v11.25A2.25 2.25 0 0118 16.5h-2.25m-7.5 0h7.5m-7.5 0l-1 1.5m1-1.5L9 15m-3 1.5h.008v.008H6M12 15h.008v.008H12M15 15h.008v.008H15M6 21v-3.375c0-.621.504-1.125 1.125-1.125h3.75c.621 0 1.125.504 1.125 1.125V21"})}),Mse=t=>f.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",...t,children:f.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M8.25 18.75a1.5 1.5 0 01-3 0m3 0a1.5 1.5 0 00-3 0m3 0h6m-9 0H3.375a1.125 1.125 0 01-1.125-1.125V14.25m17.25 4.5a1.5 1.5 0 01-3 0m3 0a1.5 1.5 0 00-3 0m3 0h1.125c.621 0 1.129-.504 1.09-1.124a17.902 17.902 0 00-3.213-9.193 2.056 2.056 0 00-1.58-.86H14.25M16.5 18.75h-2.25m0-11.177v-.958c0-.568-.422-1.048-.987-1.106a48.554 48.554 0 00-10.026 0 1.106 1.106 0 00-.987 1.106v7.635m12-6.677v6.677m0 4.5v-4.5m0 0h-12"})}),EO=t=>f.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",...t,children:f.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 3v17.25m0 0c-1.472 0-2.882.265-4.185.75M12 20.25c1.472 0 2.882.265 4.185.75M18.75 4.97A48.416 48.416 0 0012 4.5c-2.291 0-4.545.16-6.75.47m13.5 0c1.01.143 2.01.317 3 .52m-3-.52l2.62 10.726c.122.499-.106 1.028-.589 1.202a5.988 5.988 0 01-2.031.352 5.988 5.988 0 01-2.031-.352c-.483-.174-.711-.703-.59-1.202L18.75 4.971zm-16.5.52c.99-.203 1.99-.377 3-.52m0 0l2.62 10.726c.122.499-.106 1.028-.589 1.202a5.989 5.989 0 01-2.031.352 5.989 5.989 0 01-2.031-.352c-.483-.174-.711-.703-.59-1.202L5.25 4.971z"})}),Ose=[{name:"Essencial",price:"R$ 79",description:"Ideal para PMEs e equipes que precisam de controle centralizado e relatrios essenciais.",features:["At 200 ativos","Dashboard operacional","Controle de manuteno","Relatrios padro","Suporte via e-mail"],isPopular:!1},{name:"Profissional",price:"R$ 199",description:"Para empresas que buscam automao, insights de IA e gesto preditiva.",features:["Ativos ilimitados","Tudo do Essencial, e mais:","Assistente de IA e score de sade","Alertas de manuteno preditiva","Fluxos de aprovao","Suporte prioritrio"],isPopular:!0},{name:"Enterprise",price:"Sob Consulta",description:"Soluo completa para grandes corporaes com integrao ERP e segurana avanada.",features:["Tudo do Profissional, e mais:","Integrao ERP bidirecional","API para integraes customizadas","Controle de acesso (RBAC)","Mdulos de BI e auditoria","Gerente de conta dedicado","SLA de 99.9%"],isPopular:!1}],jse=()=>{const{signIn:t,signUp:e,error:n,isLoading:r}=$s(),[i,a]=N.useState("login"),[s,l]=N.useState(""),[c,h]=N.useState(""),[p,g]=N.useState(!0),[x,b]=N.useState(""),[C,A]=N.useState({name:"",email:"",password:"",companyName:"",phone:""}),[D,R]=N.useState(""),[j,O]=N.useState(!1),q=async G=>{if(G.preventDefault(),b(""),!s||!c){b("Por favor, preencha o e-mail e a senha.");return}try{await t(s,c,p)}catch(Se){console.error(Se)}},$=G=>(G=G.replace(/\D/g,""),G=G.replace(/^(\d{2})(\d)/g,"($1) $2"),G=G.replace(/(\d)(\d{4})$/,"$1-$2"),G.slice(0,15)),H=G=>{A(Se=>({...Se,phone:$(G.target.value)}))},U=async G=>{if(G.preventDefault(),R(""),!C.name||!C.email||!C.password||!C.companyName||!C.phone){R("Por favor, preencha todos os campos.");return}if(C.password.length<6){R("A senha deve ter pelo menos 6 caracteres.");return}const Se=C.phone.replace(/\D/g,"");if(Se.length<10||Se.length>11){R("Formato de telefone invlido. Insira um nmero com DDD (10 ou 11 dgitos).");return}try{await e({...C,phone:Se}),sessionStorage.setItem("showOnboardingTour","true")}catch(Oe){console.error(Oe)}},z=[{name:"Inventrio Inteligente com IoT",description:"Leitura de ativos via QR Code, RFID e NFC, com inventrio rpido em modo online e offline e mapa de localizao.",icon:f.jsx(D_,{className:"w-8 h-8 text-white"})},{name:"Ordens de Servio com IA",description:"Gerao e classificao automtica de ordens de servio por eventos de IoT, com painel de status, custo e SLA.",icon:f.jsx(OC,{className:"w-8 h-8 text-white"})},{name:"Inteligncia Analtica Preditiva",description:"Painis interativos com grficos e insights preditivos, utilizando IA para estimar falhas e custos futuros.",icon:f.jsx(Tse,{className:"w-8 h-8 text-white"})},{name:"Segurana e Compliance Total",description:"Controle de acesso granular (RBAC), criptografia AES-256 e conformidade com LGPD, ISO 55000 e SOX.",icon:f.jsx(rF,{className:"w-8 h-8 text-white"})},{name:"App Mobile Avanado",description:"Login biomtrico, geolocalizao de ativos, inventrio offline, push notifications e resumo de KPIs na tela inicial.",icon:f.jsx(Sse,{className:"w-8 h-8 text-white"})},{name:"Integraes Inteligentes",description:"Conecte-se facilmente com SAP, Totvs, Oracle, Google Drive, Dropbox e APIs IoT (MQTT/REST).",icon:f.jsx(kC,{className:"w-8 h-8 text-white"})}],B=[{question:"Posso integrar o SGA+ com meu sistema de ERP atual?",answer:"Sim! O plano Enterprise oferece integraes nativas com os principais ERPs do mercado, como SAP, Totvs e Oracle, alm de uma API dedicada para customizaes."},{question:"Como funciona o teste gratuito?",answer:"Voc ter acesso a todos os recursos do plano Profissional, sem a necessidade de cadastrar um carto de crdito. Ao final do perodo, voc pode escolher o plano que melhor se adapta  sua empresa."},{question:"A plataforma  segura para os dados da minha empresa?",answer:"Absolutamente. Usamos criptografia de ponta (AES-256), autenticao multifator e seguimos as melhores prticas de segurana para garantir a proteo e a conformidade dos seus dados (LGPD, ISO 27001)."},{question:"O sistema pode ser customizado com a marca da minha empresa?",answer:"Sim, a plataforma oferece amplas opes de customizao e branding, incluindo o uso de domnio prprio, personalizao de cores e logotipo, e a criao de layouts e dashboards exclusivos para sua empresa."}],Z=G=>{var Se;a("register"),(Se=document.getElementById("hero"))==null||Se.scrollIntoView({behavior:"smooth"})},K=(G,Se)=>{var Oe;G.preventDefault(),O(!1),(Oe=document.getElementById(Se))==null||Oe.scrollIntoView({behavior:"smooth"})},J=i==="login"?x||n:D||n;return f.jsxs("div",{className:"min-h-screen bg-gray-50 dark:bg-gray-900 text-gray-800 dark:text-gray-200",children:[f.jsx("style",{children:`
        :root { --header-height: 4rem; }
        html { scroll-padding-top: var(--header-height); }
        @keyframes pulse-custom { 0%, 100% { transform: scale(1); box-shadow: 0 0 0 0 rgba(var(--color-primary-500), 0.7); } 50% { transform: scale(1.05); box-shadow: 0 0 0 10px rgba(var(--color-primary-500), 0); } }
        .animate-pulse-custom { animation: pulse-custom 2s infinite; }
        @keyframes fadeInUp { from { opacity: 0; transform: translateY(20px); } to { opacity: 1; transform: translateY(0); } }
        .animate-fadeInUp { animation: fadeInUp 0.5s ease-out forwards; opacity: 0; }
      `}),f.jsx("header",{className:"sticky top-0 z-40 w-full backdrop-blur flex-none transition-colors duration-500 lg:z-50 lg:border-b lg:border-gray-900/10 dark:border-gray-50/[0.06] bg-white/95 supports-backdrop-blur:bg-white/60 dark:bg-transparent",children:f.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:[f.jsxs("div",{className:"flex justify-between items-center h-16",children:[f.jsxs("a",{href:"#hero",onClick:G=>K(G,"hero"),className:"flex items-center",children:[f.jsx(MC,{className:"w-8 h-8 text-primary-600 dark:text-primary-400"}),f.jsx("span",{className:"ml-2 text-xl font-bold text-gray-800 dark:text-white",children:"SGA+"})]}),f.jsxs("div",{className:"flex items-center",children:[f.jsxs("nav",{className:"hidden md:flex items-center space-x-8",children:[f.jsx("a",{href:"#features",onClick:G=>K(G,"features"),className:"nav-link",children:"Funcionalidades"}),f.jsx("a",{href:"#pricing",onClick:G=>K(G,"pricing"),className:"nav-link",children:"Planos"}),f.jsx("a",{href:"#faq",onClick:G=>K(G,"faq"),className:"nav-link",children:"FAQ"})]}),f.jsx("div",{className:"hidden md:flex items-center ml-8",children:f.jsx("button",{onClick:G=>{G.preventDefault(),a("login"),K(G,"hero")},className:"btn-secondary",children:"Entrar"})}),f.jsx("div",{className:"md:hidden",children:f.jsx("button",{onClick:()=>O(!j),className:"p-2 rounded-md text-gray-600 dark:text-gray-300",children:j?f.jsx(iF,{className:"w-6 h-6"}):f.jsx(aF,{className:"w-6 h-6"})})})]})]}),j&&f.jsx("div",{className:"md:hidden py-4 border-t border-gray-200 dark:border-gray-700",children:f.jsxs("nav",{className:"flex flex-col space-y-4",children:[f.jsx("a",{href:"#features",onClick:G=>K(G,"features"),className:"nav-link",children:"Funcionalidades"}),f.jsx("a",{href:"#pricing",onClick:G=>K(G,"pricing"),className:"nav-link",children:"Planos"}),f.jsx("a",{href:"#faq",onClick:G=>K(G,"faq"),className:"nav-link",children:"FAQ"}),f.jsx("button",{onClick:G=>{G.preventDefault(),a("login"),K(G,"hero")},className:"btn-secondary mt-2",children:"Entrar"})]})})]})}),f.jsxs("main",{children:[f.jsx("section",{id:"hero",className:"flex items-center justify-center p-4 py-16 lg:py-24",children:f.jsxs("div",{className:"flex flex-col lg:flex-row w-full max-w-6xl mx-auto bg-white dark:bg-gray-800 rounded-2xl shadow-2xl overflow-hidden",children:[f.jsx("div",{className:"w-full lg:w-1/2 p-8 sm:p-12 flex flex-col justify-center",children:i==="login"?f.jsxs(f.Fragment,{children:[f.jsxs("div",{className:"mb-8 text-center lg:text-left",children:[f.jsx("h1",{className:"text-3xl lg:text-4xl font-bold text-gray-900 dark:text-white animate-fadeInUp",children:"Acesso  sua Plataforma de Gesto de Ativos"}),f.jsx("p",{className:"mt-4 text-lg text-gray-600 dark:text-gray-400 animate-fadeInUp",style:{animationDelay:"0.2s"},children:"Bem-vindo de volta. Faa login para acessar seu dashboard."})]}),f.jsxs("form",{onSubmit:q,className:"space-y-4 animate-fadeInUp",style:{animationDelay:"0.4s"},children:[f.jsxs("div",{children:[f.jsx("label",{htmlFor:"email",children:"Email"}),f.jsx("input",{id:"email",name:"email",type:"email",required:!0,value:s,onChange:G=>l(G.target.value),className:"input-style",placeholder:"seu@email.com"})]}),f.jsxs("div",{children:[f.jsx("label",{htmlFor:"password",children:"Senha"}),f.jsx("input",{id:"password",name:"password",type:"password",required:!0,value:c,onChange:G=>h(G.target.value),className:"input-style",placeholder:""})]}),f.jsxs("div",{className:"flex items-center",children:[f.jsx("input",{id:"remember-me",name:"remember-me",type:"checkbox",checked:p,onChange:G=>g(G.target.checked),className:"h-4 w-4 text-primary-600 border-gray-300 rounded focus:ring-primary-500"}),f.jsx("label",{htmlFor:"remember-me",className:"ml-2 block text-sm text-gray-900 dark:text-gray-300",children:"Lembrar de mim"})]}),J&&f.jsx("p",{className:"text-sm text-red-500",children:J}),f.jsx("button",{type:"submit",disabled:r,className:"w-full btn-primary !mt-6",children:r?f.jsx("div",{className:"animate-spin rounded-full h-5 w-5 border-b-2 border-white"}):"Entrar"})]}),f.jsx("p",{className:"mt-6 text-center text-sm",children:f.jsx("button",{onClick:()=>{a("register"),b("")},className:"font-medium text-primary-600 hover:underline dark:text-primary-400",children:"No tem uma conta? Crie uma agora e comece seu teste gratuito."})})]}):f.jsxs(f.Fragment,{children:[f.jsxs("div",{className:"mb-8 text-center lg:text-left",children:[f.jsx("h1",{className:"text-3xl lg:text-4xl font-bold",children:"Crie sua conta e inicie seu teste"}),f.jsx("p",{className:"mt-4 text-lg",children:"Acesso instantneo aos recursos do plano Profissional. No  necessrio carto de crdito."})]}),f.jsxs("form",{onSubmit:U,className:"space-y-4",children:[f.jsxs("div",{children:[f.jsx("label",{htmlFor:"name",children:"Nome Completo"}),f.jsx("input",{type:"text",name:"name",id:"name",value:C.name,onChange:G=>A({...C,name:G.target.value}),required:!0,className:"input-style",placeholder:"Seu Nome"})]}),f.jsxs("div",{children:[f.jsx("label",{htmlFor:"companyName",children:"Nome da Empresa"}),f.jsx("input",{type:"text",name:"companyName",id:"companyName",value:C.companyName,onChange:G=>A({...C,companyName:G.target.value}),required:!0,className:"input-style",placeholder:"Nome da sua Empresa"})]}),f.jsxs("div",{children:[f.jsx("label",{htmlFor:"email-register",children:"Email Corporativo"}),f.jsx("input",{type:"email",name:"email",id:"email-register",value:C.email,onChange:G=>A({...C,email:G.target.value}),required:!0,className:"input-style",placeholder:"seu@email.com"})]}),f.jsxs("div",{children:[f.jsx("label",{htmlFor:"phone",children:"Telefone"}),f.jsx("input",{type:"tel",name:"phone",id:"phone",value:C.phone||"",onChange:H,required:!0,className:"input-style",placeholder:"(XX) XXXXX-XXXX",maxLength:15})]}),f.jsxs("div",{children:[f.jsx("label",{htmlFor:"password-register",children:"Senha"}),f.jsx("input",{type:"password",name:"password",id:"password-register",value:C.password,onChange:G=>A({...C,password:G.target.value}),required:!0,className:"input-style",placeholder:" (mnimo 6 caracteres)"})]}),J&&f.jsx("p",{className:"text-sm text-red-500",children:J}),f.jsx("button",{type:"submit",disabled:r,className:"w-full btn-primary !mt-6 animate-pulse-custom",children:r?f.jsx("div",{className:"animate-spin rounded-full h-5 w-5 border-b-2 border-white"}):"Criar Conta e Iniciar Teste Gratuito"})]}),f.jsx("p",{className:"mt-6 text-center text-sm",children:f.jsx("button",{onClick:()=>{a("login"),R("")},className:"font-medium text-primary-600 hover:underline dark:text-primary-400",children:"J tem uma conta? Faa o login aqui"})})]})}),f.jsx("div",{className:"hidden lg:block lg:w-1/2 bg-gradient-to-br from-primary-600 to-primary-800 p-12 text-white relative",children:f.jsxs("div",{className:"flex flex-col justify-center h-full text-center",children:[f.jsx("h2",{className:"text-3xl font-bold mb-4",children:"O Futuro da Gesto de Ativos  Inteligente e Integrado"}),f.jsx("p",{className:"text-primary-200",children:"Controle, preveja e otimize o ciclo de vida dos seus ativos com uma plataforma que une IoT, IA e integraes robustas."})]})})]})}),f.jsx("section",{id:"features",className:"py-16 sm:py-20 bg-gray-100 dark:bg-gray-900/50",children:f.jsxs("div",{className:"max-w-6xl mx-auto px-4 sm:px-6 lg:px-8",children:[f.jsxs("div",{className:"text-center mb-12",children:[f.jsx("h2",{className:"text-3xl font-bold tracking-tight sm:text-4xl",children:"Uma plataforma, controle total."}),f.jsx("p",{className:"mt-4 text-lg",children:"V alm do rastreamento. Otimize, preveja e economize com nossas ferramentas inteligentes."})]}),f.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-8",children:z.map(G=>f.jsxs("div",{className:"flex items-start space-x-4",children:[f.jsx("div",{className:"flex-shrink-0 bg-primary-600 p-3 rounded-lg",children:G.icon}),f.jsxs("div",{children:[f.jsx("h3",{className:"text-lg font-semibold",children:G.name}),f.jsx("p",{className:"mt-1 text-base",children:G.description})]})]},G.name))})]})}),f.jsx("section",{id:"pricing",className:"py-16 sm:py-20 bg-gray-50 dark:bg-gray-900",children:f.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:[f.jsxs("div",{className:"text-center mb-12",children:[f.jsx("h2",{className:"text-3xl font-bold tracking-tight sm:text-4xl",children:"Escolha o plano ideal para sua empresa"}),f.jsx("p",{className:"mt-4 text-lg",children:"Comece com um teste gratuito. Sem necessidade de carto de crdito."})]}),f.jsx("div",{className:"grid max-w-md grid-cols-1 gap-8 mx-auto lg:max-w-none lg:grid-cols-3",children:Ose.map(G=>f.jsxs("div",{className:`bg-white dark:bg-gray-800 rounded-2xl shadow-lg p-8 flex flex-col relative ${G.isPopular?"border-2 border-primary-500":"border border-gray-200 dark:border-gray-700"}`,children:[G.isPopular&&f.jsx("div",{className:"absolute top-0 -translate-y-1/2 bg-primary-500 text-white text-xs font-semibold px-3 py-1 rounded-full uppercase",children:"Mais Popular"}),f.jsx("h3",{className:"text-2xl font-semibold",children:G.name}),f.jsx("p",{className:"mt-4",children:G.description}),f.jsxs("div",{className:"mt-6",children:[f.jsx("span",{className:"text-4xl font-bold",children:G.price}),G.price.startsWith("R$")&&f.jsx("span",{className:"text-base font-medium",children:"/ms"})]}),f.jsx("ul",{role:"list",className:"mt-8 space-y-3 text-sm flex-grow",children:G.features.map(Se=>f.jsxs("li",{className:"flex gap-x-3",children:[f.jsx(R_,{className:"h-6 w-5 flex-none text-primary-600"}),Se]},Se))}),f.jsx("button",{onClick:()=>Z(G.name),className:`mt-8 block rounded-md px-3.5 py-2.5 text-center text-sm font-semibold shadow-sm w-full ${G.isPopular?"bg-primary-600 text-white hover:bg-primary-500":"text-primary-600 ring-1 ring-inset ring-primary-200 hover:ring-primary-300 dark:text-primary-400 dark:ring-primary-700 dark:hover:ring-primary-600"}`,children:G.price==="Sob Consulta"?"Fale com Vendas":"Iniciar teste gratuito"})]},G.name))})]})}),f.jsx("section",{id:"faq",className:"py-16 sm:py-20 bg-white dark:bg-gray-800",children:f.jsxs("div",{className:"max-w-4xl mx-auto px-4 sm:px-6 lg:px-8",children:[f.jsx("div",{className:"text-center mb-12",children:f.jsx("h2",{className:"text-3xl font-bold tracking-tight sm:text-4xl",children:"Perguntas Frequentes"})}),f.jsx("div",{className:"space-y-6",children:B.map((G,Se)=>f.jsxs("details",{className:"p-6 border border-gray-200 dark:border-gray-700 rounded-lg group",children:[f.jsxs("summary",{className:"flex items-center justify-between cursor-pointer",children:[f.jsx("h5",{className:"text-lg font-medium",children:G.question}),f.jsxs("span",{className:"relative flex-shrink-0 ml-1.5 w-5 h-5",children:[f.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"absolute inset-0 w-5 h-5 opacity-100 group-open:opacity-0",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:"2",children:f.jsx("path",{d:"M12 9v3m0 0v3m0-3h3m-3 0H9"})}),f.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"absolute inset-0 w-5 h-5 opacity-0 group-open:opacity-100",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:"2",children:f.jsx("path",{d:"M15 12H9"})})]})]}),f.jsx("p",{className:"mt-4 leading-relaxed",children:G.answer})]},Se))})]})})]}),f.jsx("footer",{className:"bg-gray-100 dark:bg-gray-900/50 border-t border-gray-200 dark:border-gray-700",children:f.jsx("div",{className:"max-w-7xl mx-auto py-8 px-4 sm:px-6 lg:px-8 text-center text-gray-500 dark:text-gray-400",children:f.jsxs("p",{children:[" ",new Date().getFullYear()," SGA+. Todos os direitos reservados."]})})}),f.jsx("style",{children:"label { display: block; margin-bottom: 0.5rem; font-size: 0.875rem; font-weight: 500; } .input-style { background-color: #F9FAFB; border: 1px solid #D1D5DB; color: #111827; font-size: 0.875rem; border-radius: 0.5rem; display: block; width: 100%; padding: 0.75rem; transition: all 0.2s; } .dark .input-style { background-color: #374151; border-color: #4B5563; color: white; } .input-style:focus { outline: 2px solid transparent; outline-offset: 2px; border-color: rgb(var(--color-primary-500)); box-shadow: 0 0 0 2px rgba(var(--color-primary-500), 0.5); } .btn-primary { display: inline-flex; align-items: center; justify-content: center; padding: 0.75rem 1rem; font-weight: 500; border-radius: 0.5rem; transition: background-color 0.2s; background-color: rgb(var(--color-primary-600)); color: white; } .btn-primary:hover:not(:disabled) { background-color: rgb(var(--color-primary-700)); } .btn-primary:disabled { opacity: 0.7; cursor: not-allowed; } .btn-secondary { display: inline-flex; align-items: center; justify-content: center; padding: 0.625rem 1rem; font-weight: 500; border-radius: 0.5rem; transition: background-color 0.2s; background-color: rgb(var(--color-primary-600)); color: white; } .btn-secondary:hover { background-color: rgb(var(--color-primary-700)); } .nav-link { font-weight: 500; color: #4B5563; } .dark .nav-link { color: #D1D5DB; } .nav-link:hover { color: rgb(var(--color-primary-600)); } .dark .nav-link:hover { color: rgb(var(--color-primary-400)); }"})]})},Lse=({notifications:t})=>{const[e,n]=N.useState(!1),r=N.useRef(null),i=()=>n(s=>!s);N.useEffect(()=>{const s=l=>{r.current&&!r.current.contains(l.target)&&n(!1)};return document.addEventListener("mousedown",s),()=>document.removeEventListener("mousedown",s)},[]);const a=t.length;return f.jsxs("div",{className:"relative",ref:r,children:[f.jsxs("button",{onClick:i,className:"relative p-2 text-gray-500 rounded-full hover:bg-gray-100 hover:text-gray-700 dark:text-gray-400 dark:hover:bg-gray-700 dark:hover:text-gray-200 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-primary-500","aria-label":"View notifications",children:[f.jsx(Ase,{className:"h-6 w-6"}),a>0&&f.jsx("span",{className:"absolute top-0 right-0 flex items-center justify-center h-5 w-5 text-xs font-bold text-white bg-red-500 rounded-full",children:a>9?"9+":a})]}),e&&f.jsxs("div",{className:"absolute right-0 mt-2 w-80 bg-white dark:bg-gray-800 rounded-lg shadow-xl border dark:border-gray-700 z-50",children:[f.jsxs("div",{className:"p-3 font-semibold text-gray-800 dark:text-white border-b dark:border-gray-700",children:["Notificaes (",a,")"]}),a>0?f.jsx("ul",{className:"max-h-80 overflow-y-auto divide-y dark:divide-gray-700",children:t.map(s=>f.jsx("li",{className:"p-3 hover:bg-gray-50 dark:hover:bg-gray-700",children:f.jsxs("div",{className:"flex items-start space-x-3",children:[f.jsx("div",{className:"flex-shrink-0 mt-1",children:s.type==="garantia"?f.jsx(rF,{className:"w-5 h-5 text-yellow-500"}):f.jsx(Ro,{className:"w-5 h-5 text-orange-500"})}),f.jsxs("div",{children:[f.jsx("p",{className:"text-sm text-gray-700 dark:text-gray-300",children:s.message}),f.jsxs("p",{className:"text-xs text-gray-500 dark:text-gray-400",children:["Expira em ",s.daysRemaining," dia(s)"]})]})]})},s.id))}):f.jsx("p",{className:"p-4 text-sm text-center text-gray-500 dark:text-gray-400",children:"Nenhuma notificao nova."})]})]})};function Vse(t,e,n){let r,i,a;if(e===0)r=i=a=n;else{const s=(h,p,g)=>(g<0&&(g+=1),g>1&&(g-=1),g<.16666666666666666?h+(p-h)*6*g:g<.5?p:g<.6666666666666666?h+(p-h)*(.6666666666666666-g)*6:h),l=n<.5?n*(1+e):n+e-n*e,c=2*n-l;r=s(c,l,t+1/3),i=s(c,l,t),a=s(c,l,t-1/3)}return[Math.round(r*255),Math.round(i*255),Math.round(a*255)]}function Use(t,e,n){t/=255,e/=255,n/=255;const r=Math.max(t,e,n),i=Math.min(t,e,n);let a=0,s=0,l=(r+i)/2;if(r!==i){const c=r-i;switch(s=l>.5?c/(2-r-i):c/(r+i),r){case t:a=(e-n)/c+(e<n?6:0);break;case e:a=(n-t)/c+2;break;case n:a=(t-e)/c+4;break}a/=6}return[a,s,l]}function Fse(t){const e=/^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i.exec(t);return e?[parseInt(e[1],16),parseInt(e[2],16),parseInt(e[3],16)]:null}const Bse={50:.95,100:.9,200:.75,300:.6,400:.45,500:1,600:.9,700:.75,800:.6,900:.49,950:.3};function zse(t){const e=Fse(t);if(!e)return console.error("Invalid base hex color"),{};const[n,r,i]=Use(...e),a={};for(const[s,l]of Object.entries(Bse)){let c;parseInt(s)<500?c=i+(1-i)*(1-l):parseInt(s)>500?c=i*l:c=i;const h=parseInt(s)<500?r*(1+(1-l)):r,[p,g,x]=Vse(n,Math.min(1,h),Math.max(0,Math.min(1,c)));a[s]=`${p} ${g} ${x}`}return a}function qse(t){const e=document.documentElement;for(const[n,r]of Object.entries(t))e.style.setProperty(`--color-primary-${n}`,r)}const cF=N.createContext(void 0),TO={companyName:"SGA+",slogan:"Gesto de Ativos Inteligente",logoUrl:"",primaryColor:"#4f46e5",institutionalMessage:"Relatrio confidencial gerado pelo Sistema de Gesto de Ativos.",cnpj:"",stateRegistration:"",municipalRegistration:"",address:{street:"",number:"",neighborhood:"",city:"",state:"",zipCode:""},bankInfo:{bankName:"",agency:"",accountNumber:"",pixKey:""}},Hse=({children:t})=>{const[e,n]=N.useState(()=>{try{const i=localStorage.getItem("branding");return i?JSON.parse(i):TO}catch{return TO}});N.useEffect(()=>{const i=zse(e.primaryColor);qse(i)},[e.primaryColor]);const r=i=>{localStorage.setItem("branding",JSON.stringify(i)),n(i)};return f.jsx(cF.Provider,{value:{branding:e,setBranding:r},children:t})},Kd=()=>{const t=N.useContext(cF);if(t===void 0)throw new Error("useBranding must be used within a BrandingProvider");return t},Gse=[{title:"Viso Geral",items:[{page:"dashboard",icon:f.jsx(xse,{className:"w-5 h-5"}),label:"Dashboard & BI"}]},{title:"Operacional",items:[{page:"assets",icon:f.jsx(MC,{className:"w-5 h-5"}),label:"Ativos & Mapa"},{page:"maintenance",icon:f.jsx(D_,{className:"w-5 h-5"}),label:"Manuteno & IA"},{page:"projects",icon:f.jsx(oF,{className:"w-5 h-5"}),label:"Projetos"},{page:"stock",icon:f.jsx(Ise,{className:"w-5 h-5"}),label:"Estoque & Peas"}]},{title:"Cadeia de Suprimentos",items:[{page:"purchasing",icon:f.jsx(Dse,{className:"w-5 h-5"}),label:"Compras"},{page:"suppliers",icon:f.jsx(Mse,{className:"w-5 h-5"}),label:"Fornecedores"}]},{title:"Comercial",items:[{page:"crm",icon:f.jsx(uF,{className:"w-5 h-5"}),label:"CRM"},{page:"sales",icon:f.jsx(jC,{className:"w-5 h-5"}),label:"Vendas"}]},{title:"Corporativo",items:[{page:"financial",icon:f.jsx(ax,{className:"w-5 h-5"}),label:"Financeiro"},{page:"fiscal",icon:f.jsx(lF,{className:"w-5 h-5"}),label:"Fiscal"},{page:"hr",icon:f.jsx(d1,{className:"w-5 h-5"}),label:"RH"},{page:"documents",icon:f.jsx(Nse,{className:"w-5 h-5"}),label:"Documentos"}]},{title:"Administrao",items:[{page:"users",icon:f.jsx(d1,{className:"w-5 h-5"}),label:"Usurios"},{page:"settings",icon:f.jsx(_se,{className:"w-5 h-5"}),label:"Configuraes"}]}],$se=({children:t,currentPage:e,setCurrentPage:n,onLogout:r,notifications:i,pageTitle:a})=>{const{user:s}=$s(),{branding:l}=Kd(),[c,h]=N.useState(!1),p=({page:x,icon:b,label:C})=>{const A=e===x;return f.jsx("li",{children:f.jsxs("button",{onClick:()=>{n(x),h(!1)},className:`flex items-center p-3 rounded-lg w-full text-left transition-all duration-200 mb-1 group ${A?"bg-primary-600 text-white shadow-glow":"text-gray-400 hover:bg-gray-800 hover:text-white"}`,children:[gh.cloneElement(b,{className:`w-5 h-5 flex-shrink-0 transition-colors ${A?"text-white":"text-gray-500 group-hover:text-white"}`}),f.jsx("span",{className:"ml-3 flex-1 whitespace-nowrap text-sm font-medium tracking-wide",children:C}),A&&f.jsx("div",{className:"w-1.5 h-1.5 rounded-full bg-white ml-2"})]})})},g=()=>{var x;return f.jsxs("div",{className:"flex flex-col h-full bg-[#111827] border-r border-gray-800",children:[" ",f.jsxs("div",{className:"flex items-center h-20 px-6 border-b border-gray-800 bg-[#0f172a]",children:[f.jsx("div",{className:"w-9 h-9 rounded-xl bg-gradient-to-br from-primary-500 to-primary-700 flex items-center justify-center mr-3 shadow-lg text-white",children:f.jsx(MC,{className:"w-5 h-5"})}),f.jsxs("div",{children:[f.jsx("span",{className:"text-lg font-bold text-white tracking-tight block",children:l.companyName}),f.jsx("span",{className:"text-[10px] text-gray-500 uppercase tracking-wider font-bold",children:"ERP Edition"})]})]}),f.jsx("nav",{className:"flex-1 px-4 py-6 space-y-8 overflow-y-auto custom-scrollbar",children:Gse.map((b,C)=>f.jsxs("div",{children:[f.jsx("h3",{className:"px-3 text-[11px] font-bold text-gray-500 uppercase tracking-wider mb-2",children:b.title}),f.jsx("ul",{className:"space-y-0.5",children:b.items.map(A=>f.jsx(p,{...A},A.page))})]},C))}),f.jsxs("div",{className:"p-4 border-t border-gray-800 bg-[#0f172a]",children:[f.jsxs("div",{className:"flex items-center mb-4 px-2",children:[f.jsx("div",{className:"w-10 h-10 rounded-full bg-gray-700 text-gray-300 flex items-center justify-center text-sm font-bold mr-3 border-2 border-gray-600",children:((x=s==null?void 0:s.name)==null?void 0:x.charAt(0))||"U"}),f.jsxs("div",{className:"flex-1 min-w-0",children:[f.jsx("p",{className:"text-sm font-semibold text-white truncate",children:s==null?void 0:s.name}),f.jsx("p",{className:"text-xs text-gray-400 truncate capitalize",children:s==null?void 0:s.role})]})]}),f.jsxs("button",{onClick:r,className:"flex items-center justify-center w-full px-4 py-2 text-sm font-medium text-gray-400 bg-gray-800 rounded-lg hover:bg-gray-700 hover:text-white transition-colors border border-gray-700",children:[f.jsx(nF,{className:"w-4 h-4 mr-2"}),"Sair"]})]})]})};return f.jsxs("div",{className:"h-screen flex overflow-hidden bg-gray-50 dark:bg-slate-900 font-sans",children:[f.jsx("aside",{className:"hidden lg:flex lg:flex-shrink-0 w-72 shadow-2xl z-30",children:f.jsx(g,{})}),f.jsxs("div",{className:`fixed inset-0 flex z-40 lg:hidden ${c?"block":"hidden"}`,role:"dialog","aria-modal":"true",children:[f.jsx("div",{className:"fixed inset-0 bg-gray-900 bg-opacity-75 backdrop-blur-sm transition-opacity",onClick:()=>h(!1)}),f.jsxs("div",{className:"relative flex-1 flex flex-col max-w-xs w-full bg-[#111827]",children:[f.jsx("div",{className:"absolute top-0 right-0 -mr-12 pt-2",children:f.jsx("button",{type:"button",className:"ml-1 flex items-center justify-center h-10 w-10 rounded-full focus:outline-none focus:ring-2 focus:ring-inset focus:ring-white",onClick:()=>h(!1),children:f.jsx(iF,{className:"h-6 w-6 text-white"})})}),f.jsx(g,{})]}),f.jsx("div",{className:"flex-shrink-0 w-14"})]}),f.jsxs("div",{className:"flex flex-col w-0 flex-1 overflow-hidden",children:[f.jsxs("header",{className:"relative z-10 flex-shrink-0 h-20 bg-[#111827] shadow-md flex justify-between items-center px-4 sm:px-8 lg:px-12",children:[f.jsxs("div",{className:"flex items-center",children:[f.jsx("button",{type:"button",className:"px-2 text-gray-400 focus:outline-none focus:ring-2 focus:ring-inset focus:ring-primary-500 lg:hidden mr-2",onClick:()=>h(!0),children:f.jsx(aF,{className:"h-6 w-6"})}),f.jsx("h1",{className:"text-2xl font-bold text-white tracking-tight",children:a})]}),f.jsx("div",{className:"flex items-center space-x-4",children:f.jsx(Lse,{notifications:i})})]}),f.jsx("main",{className:"flex-1 relative overflow-y-auto focus:outline-none custom-scrollbar bg-[#0f172a]",children:f.jsx("div",{className:"max-w-[1920px] mx-auto",children:t})})]})]})},Zt=()=>{const t=N.useContext(tF);if(t===void 0)throw new Error("useApp must be used within an AppProvider");return t},Vs=({title:t,value:e,icon:n,color:r})=>{const i=r.match(/bg-([a-z]+)-(\d+)/),a=i?i[1]:"gray";return f.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-2xl shadow-soft hover:shadow-lg transition-all duration-300 p-6 border border-gray-100 dark:border-gray-700 group relative overflow-hidden",children:[f.jsx("div",{className:`absolute top-0 right-0 w-24 h-24 bg-${a}-50 dark:bg-${a}-900/20 rounded-bl-full -mr-4 -mt-4 transition-transform group-hover:scale-110`}),f.jsxs("div",{className:"relative flex items-start justify-between",children:[f.jsxs("div",{children:[f.jsx("p",{className:"text-sm font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider mb-1",children:t}),f.jsx("h3",{className:"text-3xl font-bold text-gray-900 dark:text-white tracking-tight",children:e})]}),f.jsx("div",{className:`p-3 rounded-xl ${r} text-white shadow-md group-hover:scale-110 transition-transform duration-300`,children:n})]})]})};function dF(t){var e,n,r="";if(typeof t=="string"||typeof t=="number")r+=t;else if(typeof t=="object")if(Array.isArray(t)){var i=t.length;for(e=0;e<i;e++)t[e]&&(n=dF(t[e]))&&(r&&(r+=" "),r+=n)}else for(n in t)t[n]&&(r&&(r+=" "),r+=n);return r}function Ft(){for(var t,e,n=0,r="",i=arguments.length;n<i;n++)(t=arguments[n])&&(e=dF(t))&&(r&&(r+=" "),r+=e);return r}var Kse=["dangerouslySetInnerHTML","onCopy","onCopyCapture","onCut","onCutCapture","onPaste","onPasteCapture","onCompositionEnd","onCompositionEndCapture","onCompositionStart","onCompositionStartCapture","onCompositionUpdate","onCompositionUpdateCapture","onFocus","onFocusCapture","onBlur","onBlurCapture","onChange","onChangeCapture","onBeforeInput","onBeforeInputCapture","onInput","onInputCapture","onReset","onResetCapture","onSubmit","onSubmitCapture","onInvalid","onInvalidCapture","onLoad","onLoadCapture","onError","onErrorCapture","onKeyDown","onKeyDownCapture","onKeyPress","onKeyPressCapture","onKeyUp","onKeyUpCapture","onAbort","onAbortCapture","onCanPlay","onCanPlayCapture","onCanPlayThrough","onCanPlayThroughCapture","onDurationChange","onDurationChangeCapture","onEmptied","onEmptiedCapture","onEncrypted","onEncryptedCapture","onEnded","onEndedCapture","onLoadedData","onLoadedDataCapture","onLoadedMetadata","onLoadedMetadataCapture","onLoadStart","onLoadStartCapture","onPause","onPauseCapture","onPlay","onPlayCapture","onPlaying","onPlayingCapture","onProgress","onProgressCapture","onRateChange","onRateChangeCapture","onSeeked","onSeekedCapture","onSeeking","onSeekingCapture","onStalled","onStalledCapture","onSuspend","onSuspendCapture","onTimeUpdate","onTimeUpdateCapture","onVolumeChange","onVolumeChangeCapture","onWaiting","onWaitingCapture","onAuxClick","onAuxClickCapture","onClick","onClickCapture","onContextMenu","onContextMenuCapture","onDoubleClick","onDoubleClickCapture","onDrag","onDragCapture","onDragEnd","onDragEndCapture","onDragEnter","onDragEnterCapture","onDragExit","onDragExitCapture","onDragLeave","onDragLeaveCapture","onDragOver","onDragOverCapture","onDragStart","onDragStartCapture","onDrop","onDropCapture","onMouseDown","onMouseDownCapture","onMouseEnter","onMouseLeave","onMouseMove","onMouseMoveCapture","onMouseOut","onMouseOutCapture","onMouseOver","onMouseOverCapture","onMouseUp","onMouseUpCapture","onSelect","onSelectCapture","onTouchCancel","onTouchCancelCapture","onTouchEnd","onTouchEndCapture","onTouchMove","onTouchMoveCapture","onTouchStart","onTouchStartCapture","onPointerDown","onPointerDownCapture","onPointerMove","onPointerMoveCapture","onPointerUp","onPointerUpCapture","onPointerCancel","onPointerCancelCapture","onPointerEnter","onPointerEnterCapture","onPointerLeave","onPointerLeaveCapture","onPointerOver","onPointerOverCapture","onPointerOut","onPointerOutCapture","onGotPointerCapture","onGotPointerCaptureCapture","onLostPointerCapture","onLostPointerCaptureCapture","onScroll","onScrollCapture","onWheel","onWheelCapture","onAnimationStart","onAnimationStartCapture","onAnimationEnd","onAnimationEndCapture","onAnimationIteration","onAnimationIterationCapture","onTransitionEnd","onTransitionEndCapture"];function LC(t){if(typeof t!="string")return!1;var e=Kse;return e.includes(t)}var Wse=["aria-activedescendant","aria-atomic","aria-autocomplete","aria-busy","aria-checked","aria-colcount","aria-colindex","aria-colspan","aria-controls","aria-current","aria-describedby","aria-details","aria-disabled","aria-errormessage","aria-expanded","aria-flowto","aria-haspopup","aria-hidden","aria-invalid","aria-keyshortcuts","aria-label","aria-labelledby","aria-level","aria-live","aria-modal","aria-multiline","aria-multiselectable","aria-orientation","aria-owns","aria-placeholder","aria-posinset","aria-pressed","aria-readonly","aria-relevant","aria-required","aria-roledescription","aria-rowcount","aria-rowindex","aria-rowspan","aria-selected","aria-setsize","aria-sort","aria-valuemax","aria-valuemin","aria-valuenow","aria-valuetext","className","color","height","id","lang","max","media","method","min","name","style","target","width","role","tabIndex","accentHeight","accumulate","additive","alignmentBaseline","allowReorder","alphabetic","amplitude","arabicForm","ascent","attributeName","attributeType","autoReverse","azimuth","baseFrequency","baselineShift","baseProfile","bbox","begin","bias","by","calcMode","capHeight","clip","clipPath","clipPathUnits","clipRule","colorInterpolation","colorInterpolationFilters","colorProfile","colorRendering","contentScriptType","contentStyleType","cursor","cx","cy","d","decelerate","descent","diffuseConstant","direction","display","divisor","dominantBaseline","dur","dx","dy","edgeMode","elevation","enableBackground","end","exponent","externalResourcesRequired","fill","fillOpacity","fillRule","filter","filterRes","filterUnits","floodColor","floodOpacity","focusable","fontFamily","fontSize","fontSizeAdjust","fontStretch","fontStyle","fontVariant","fontWeight","format","from","fx","fy","g1","g2","glyphName","glyphOrientationHorizontal","glyphOrientationVertical","glyphRef","gradientTransform","gradientUnits","hanging","horizAdvX","horizOriginX","href","ideographic","imageRendering","in2","in","intercept","k1","k2","k3","k4","k","kernelMatrix","kernelUnitLength","kerning","keyPoints","keySplines","keyTimes","lengthAdjust","letterSpacing","lightingColor","limitingConeAngle","local","markerEnd","markerHeight","markerMid","markerStart","markerUnits","markerWidth","mask","maskContentUnits","maskUnits","mathematical","mode","numOctaves","offset","opacity","operator","order","orient","orientation","origin","overflow","overlinePosition","overlineThickness","paintOrder","panose1","pathLength","patternContentUnits","patternTransform","patternUnits","pointerEvents","pointsAtX","pointsAtY","pointsAtZ","preserveAlpha","preserveAspectRatio","primitiveUnits","r","radius","refX","refY","renderingIntent","repeatCount","repeatDur","requiredExtensions","requiredFeatures","restart","result","rotate","rx","ry","seed","shapeRendering","slope","spacing","specularConstant","specularExponent","speed","spreadMethod","startOffset","stdDeviation","stemh","stemv","stitchTiles","stopColor","stopOpacity","strikethroughPosition","strikethroughThickness","string","stroke","strokeDasharray","strokeDashoffset","strokeLinecap","strokeLinejoin","strokeMiterlimit","strokeOpacity","strokeWidth","surfaceScale","systemLanguage","tableValues","targetX","targetY","textAnchor","textDecoration","textLength","textRendering","to","transform","u1","u2","underlinePosition","underlineThickness","unicode","unicodeBidi","unicodeRange","unitsPerEm","vAlphabetic","values","vectorEffect","version","vertAdvY","vertOriginX","vertOriginY","vHanging","vIdeographic","viewTarget","visibility","vMathematical","widths","wordSpacing","writingMode","x1","x2","x","xChannelSelector","xHeight","xlinkActuate","xlinkArcrole","xlinkHref","xlinkRole","xlinkShow","xlinkTitle","xlinkType","xmlBase","xmlLang","xmlns","xmlnsXlink","xmlSpace","y1","y2","y","yChannelSelector","z","zoomAndPan","ref","key","angle"],Yse=new Set(Wse);function fF(t){return typeof t!="string"?!1:Yse.has(t)}function hF(t){return typeof t=="string"&&t.startsWith("data-")}function Ha(t){if(typeof t!="object"||t===null)return{};var e={};for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(fF(n)||hF(n))&&(e[n]=t[n]);return e}function Ld(t){if(t==null)return null;if(N.isValidElement(t)&&typeof t.props=="object"&&t.props!==null){var e=t.props;return Ha(e)}return typeof t=="object"&&!Array.isArray(t)?Ha(t):null}function Ai(t){var e={};for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(fF(n)||hF(n)||LC(n))&&(e[n]=t[n]);return e}function Zse(t){return t==null?null:N.isValidElement(t)?Ai(t.props):typeof t=="object"&&!Array.isArray(t)?Ai(t):null}var Jse=["children","width","height","viewBox","className","style","title","desc"];function f1(){return f1=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)({}).hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},f1.apply(null,arguments)}function Qse(t,e){if(t==null)return{};var n,r,i=Xse(t,e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);for(r=0;r<a.length;r++)n=a[r],e.indexOf(n)===-1&&{}.propertyIsEnumerable.call(t,n)&&(i[n]=t[n])}return i}function Xse(t,e){if(t==null)return{};var n={};for(var r in t)if({}.hasOwnProperty.call(t,r)){if(e.indexOf(r)!==-1)continue;n[r]=t[r]}return n}var VC=N.forwardRef((t,e)=>{var{children:n,width:r,height:i,viewBox:a,className:s,style:l,title:c,desc:h}=t,p=Qse(t,Jse),g=a||{width:r,height:i,x:0,y:0},x=Ft("recharts-surface",s);return N.createElement("svg",f1({},Ai(p),{className:x,width:r,height:i,style:l,viewBox:"".concat(g.x," ").concat(g.y," ").concat(g.width," ").concat(g.height),ref:e}),N.createElement("title",null,c),N.createElement("desc",null,h),n)}),eoe=["children","className"];function h1(){return h1=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)({}).hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},h1.apply(null,arguments)}function toe(t,e){if(t==null)return{};var n,r,i=noe(t,e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);for(r=0;r<a.length;r++)n=a[r],e.indexOf(n)===-1&&{}.propertyIsEnumerable.call(t,n)&&(i[n]=t[n])}return i}function noe(t,e){if(t==null)return{};var n={};for(var r in t)if({}.hasOwnProperty.call(t,r)){if(e.indexOf(r)!==-1)continue;n[r]=t[r]}return n}var Pr=N.forwardRef((t,e)=>{var{children:n,className:r}=t,i=toe(t,eoe),a=Ft("recharts-layer",r);return N.createElement("g",h1({className:a},Ai(i),{ref:e}),n)}),M_=Q4(),mF=N.createContext(null),roe=()=>N.useContext(mF);function vn(t){return function(){return t}}const pF=Math.cos,sx=Math.sin,Ws=Math.sqrt,ox=Math.PI,O_=2*ox,m1=Math.PI,p1=2*m1,ld=1e-6,ioe=p1-ld;function gF(t){this._+=t[0];for(let e=1,n=t.length;e<n;++e)this._+=arguments[e]+t[e]}function aoe(t){let e=Math.floor(t);if(!(e>=0))throw new Error(`invalid digits: ${t}`);if(e>15)return gF;const n=10**e;return function(r){this._+=r[0];for(let i=1,a=r.length;i<a;++i)this._+=Math.round(arguments[i]*n)/n+r[i]}}class soe{constructor(e){this._x0=this._y0=this._x1=this._y1=null,this._="",this._append=e==null?gF:aoe(e)}moveTo(e,n){this._append`M${this._x0=this._x1=+e},${this._y0=this._y1=+n}`}closePath(){this._x1!==null&&(this._x1=this._x0,this._y1=this._y0,this._append`Z`)}lineTo(e,n){this._append`L${this._x1=+e},${this._y1=+n}`}quadraticCurveTo(e,n,r,i){this._append`Q${+e},${+n},${this._x1=+r},${this._y1=+i}`}bezierCurveTo(e,n,r,i,a,s){this._append`C${+e},${+n},${+r},${+i},${this._x1=+a},${this._y1=+s}`}arcTo(e,n,r,i,a){if(e=+e,n=+n,r=+r,i=+i,a=+a,a<0)throw new Error(`negative radius: ${a}`);let s=this._x1,l=this._y1,c=r-e,h=i-n,p=s-e,g=l-n,x=p*p+g*g;if(this._x1===null)this._append`M${this._x1=e},${this._y1=n}`;else if(x>ld)if(!(Math.abs(g*c-h*p)>ld)||!a)this._append`L${this._x1=e},${this._y1=n}`;else{let b=r-s,C=i-l,A=c*c+h*h,D=b*b+C*C,R=Math.sqrt(A),j=Math.sqrt(x),O=a*Math.tan((m1-Math.acos((A+x-D)/(2*R*j)))/2),q=O/j,$=O/R;Math.abs(q-1)>ld&&this._append`L${e+q*p},${n+q*g}`,this._append`A${a},${a},0,0,${+(g*b>p*C)},${this._x1=e+$*c},${this._y1=n+$*h}`}}arc(e,n,r,i,a,s){if(e=+e,n=+n,r=+r,s=!!s,r<0)throw new Error(`negative radius: ${r}`);let l=r*Math.cos(i),c=r*Math.sin(i),h=e+l,p=n+c,g=1^s,x=s?i-a:a-i;this._x1===null?this._append`M${h},${p}`:(Math.abs(this._x1-h)>ld||Math.abs(this._y1-p)>ld)&&this._append`L${h},${p}`,r&&(x<0&&(x=x%p1+p1),x>ioe?this._append`A${r},${r},0,1,${g},${e-l},${n-c}A${r},${r},0,1,${g},${this._x1=h},${this._y1=p}`:x>ld&&this._append`A${r},${r},0,${+(x>=m1)},${g},${this._x1=e+r*Math.cos(a)},${this._y1=n+r*Math.sin(a)}`)}rect(e,n,r,i){this._append`M${this._x0=this._x1=+e},${this._y0=this._y1=+n}h${r=+r}v${+i}h${-r}Z`}toString(){return this._}}function UC(t){let e=3;return t.digits=function(n){if(!arguments.length)return e;if(n==null)e=null;else{const r=Math.floor(n);if(!(r>=0))throw new RangeError(`invalid digits: ${n}`);e=r}return t},()=>new soe(e)}function FC(t){return typeof t=="object"&&"length"in t?t:Array.from(t)}function yF(t){this._context=t}yF.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1,this._line?this._context.lineTo(t,e):this._context.moveTo(t,e);break;case 1:this._point=2;default:this._context.lineTo(t,e);break}}};function j_(t){return new yF(t)}function vF(t){return t[0]}function xF(t){return t[1]}function _F(t,e){var n=vn(!0),r=null,i=j_,a=null,s=UC(l);t=typeof t=="function"?t:t===void 0?vF:vn(t),e=typeof e=="function"?e:e===void 0?xF:vn(e);function l(c){var h,p=(c=FC(c)).length,g,x=!1,b;for(r==null&&(a=i(b=s())),h=0;h<=p;++h)!(h<p&&n(g=c[h],h,c))===x&&((x=!x)?a.lineStart():a.lineEnd()),x&&a.point(+t(g,h,c),+e(g,h,c));if(b)return a=null,b+""||null}return l.x=function(c){return arguments.length?(t=typeof c=="function"?c:vn(+c),l):t},l.y=function(c){return arguments.length?(e=typeof c=="function"?c:vn(+c),l):e},l.defined=function(c){return arguments.length?(n=typeof c=="function"?c:vn(!!c),l):n},l.curve=function(c){return arguments.length?(i=c,r!=null&&(a=i(r)),l):i},l.context=function(c){return arguments.length?(c==null?r=a=null:a=i(r=c),l):r},l}function Sv(t,e,n){var r=null,i=vn(!0),a=null,s=j_,l=null,c=UC(h);t=typeof t=="function"?t:t===void 0?vF:vn(+t),e=typeof e=="function"?e:vn(e===void 0?0:+e),n=typeof n=="function"?n:n===void 0?xF:vn(+n);function h(g){var x,b,C,A=(g=FC(g)).length,D,R=!1,j,O=new Array(A),q=new Array(A);for(a==null&&(l=s(j=c())),x=0;x<=A;++x){if(!(x<A&&i(D=g[x],x,g))===R)if(R=!R)b=x,l.areaStart(),l.lineStart();else{for(l.lineEnd(),l.lineStart(),C=x-1;C>=b;--C)l.point(O[C],q[C]);l.lineEnd(),l.areaEnd()}R&&(O[x]=+t(D,x,g),q[x]=+e(D,x,g),l.point(r?+r(D,x,g):O[x],n?+n(D,x,g):q[x]))}if(j)return l=null,j+""||null}function p(){return _F().defined(i).curve(s).context(a)}return h.x=function(g){return arguments.length?(t=typeof g=="function"?g:vn(+g),r=null,h):t},h.x0=function(g){return arguments.length?(t=typeof g=="function"?g:vn(+g),h):t},h.x1=function(g){return arguments.length?(r=g==null?null:typeof g=="function"?g:vn(+g),h):r},h.y=function(g){return arguments.length?(e=typeof g=="function"?g:vn(+g),n=null,h):e},h.y0=function(g){return arguments.length?(e=typeof g=="function"?g:vn(+g),h):e},h.y1=function(g){return arguments.length?(n=g==null?null:typeof g=="function"?g:vn(+g),h):n},h.lineX0=h.lineY0=function(){return p().x(t).y(e)},h.lineY1=function(){return p().x(t).y(n)},h.lineX1=function(){return p().x(r).y(e)},h.defined=function(g){return arguments.length?(i=typeof g=="function"?g:vn(!!g),h):i},h.curve=function(g){return arguments.length?(s=g,a!=null&&(l=s(a)),h):s},h.context=function(g){return arguments.length?(g==null?a=l=null:l=s(a=g),h):a},h}class bF{constructor(e,n){this._context=e,this._x=n}areaStart(){this._line=0}areaEnd(){this._line=NaN}lineStart(){this._point=0}lineEnd(){(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line}point(e,n){switch(e=+e,n=+n,this._point){case 0:{this._point=1,this._line?this._context.lineTo(e,n):this._context.moveTo(e,n);break}case 1:this._point=2;default:{this._x?this._context.bezierCurveTo(this._x0=(this._x0+e)/2,this._y0,this._x0,n,e,n):this._context.bezierCurveTo(this._x0,this._y0=(this._y0+n)/2,e,this._y0,e,n);break}}this._x0=e,this._y0=n}}function ooe(t){return new bF(t,!0)}function loe(t){return new bF(t,!1)}const BC={draw(t,e){const n=Ws(e/ox);t.moveTo(n,0),t.arc(0,0,n,0,O_)}},uoe={draw(t,e){const n=Ws(e/5)/2;t.moveTo(-3*n,-n),t.lineTo(-n,-n),t.lineTo(-n,-3*n),t.lineTo(n,-3*n),t.lineTo(n,-n),t.lineTo(3*n,-n),t.lineTo(3*n,n),t.lineTo(n,n),t.lineTo(n,3*n),t.lineTo(-n,3*n),t.lineTo(-n,n),t.lineTo(-3*n,n),t.closePath()}},wF=Ws(1/3),coe=wF*2,doe={draw(t,e){const n=Ws(e/coe),r=n*wF;t.moveTo(0,-n),t.lineTo(r,0),t.lineTo(0,n),t.lineTo(-r,0),t.closePath()}},foe={draw(t,e){const n=Ws(e),r=-n/2;t.rect(r,r,n,n)}},hoe=.8908130915292852,EF=sx(ox/10)/sx(7*ox/10),moe=sx(O_/10)*EF,poe=-pF(O_/10)*EF,goe={draw(t,e){const n=Ws(e*hoe),r=moe*n,i=poe*n;t.moveTo(0,-n),t.lineTo(r,i);for(let a=1;a<5;++a){const s=O_*a/5,l=pF(s),c=sx(s);t.lineTo(c*n,-l*n),t.lineTo(l*r-c*i,c*r+l*i)}t.closePath()}},RE=Ws(3),yoe={draw(t,e){const n=-Ws(e/(RE*3));t.moveTo(0,n*2),t.lineTo(-RE*n,-n),t.lineTo(RE*n,-n),t.closePath()}},ls=-.5,us=Ws(3)/2,g1=1/Ws(12),voe=(g1/2+1)*3,xoe={draw(t,e){const n=Ws(e/voe),r=n/2,i=n*g1,a=r,s=n*g1+n,l=-a,c=s;t.moveTo(r,i),t.lineTo(a,s),t.lineTo(l,c),t.lineTo(ls*r-us*i,us*r+ls*i),t.lineTo(ls*a-us*s,us*a+ls*s),t.lineTo(ls*l-us*c,us*l+ls*c),t.lineTo(ls*r+us*i,ls*i-us*r),t.lineTo(ls*a+us*s,ls*s-us*a),t.lineTo(ls*l+us*c,ls*c-us*l),t.closePath()}};function _oe(t,e){let n=null,r=UC(i);t=typeof t=="function"?t:vn(t||BC),e=typeof e=="function"?e:vn(e===void 0?64:+e);function i(){let a;if(n||(n=a=r()),t.apply(this,arguments).draw(n,+e.apply(this,arguments)),a)return n=null,a+""||null}return i.type=function(a){return arguments.length?(t=typeof a=="function"?a:vn(a),i):t},i.size=function(a){return arguments.length?(e=typeof a=="function"?a:vn(+a),i):e},i.context=function(a){return arguments.length?(n=a??null,i):n},i}function lx(){}function ux(t,e,n){t._context.bezierCurveTo((2*t._x0+t._x1)/3,(2*t._y0+t._y1)/3,(t._x0+2*t._x1)/3,(t._y0+2*t._y1)/3,(t._x0+4*t._x1+e)/6,(t._y0+4*t._y1+n)/6)}function TF(t){this._context=t}TF.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){switch(this._point){case 3:ux(this,this._x1,this._y1);case 2:this._context.lineTo(this._x1,this._y1);break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1,this._line?this._context.lineTo(t,e):this._context.moveTo(t,e);break;case 1:this._point=2;break;case 2:this._point=3,this._context.lineTo((5*this._x0+this._x1)/6,(5*this._y0+this._y1)/6);default:ux(this,t,e);break}this._x0=this._x1,this._x1=t,this._y0=this._y1,this._y1=e}};function boe(t){return new TF(t)}function SF(t){this._context=t}SF.prototype={areaStart:lx,areaEnd:lx,lineStart:function(){this._x0=this._x1=this._x2=this._x3=this._x4=this._y0=this._y1=this._y2=this._y3=this._y4=NaN,this._point=0},lineEnd:function(){switch(this._point){case 1:{this._context.moveTo(this._x2,this._y2),this._context.closePath();break}case 2:{this._context.moveTo((this._x2+2*this._x3)/3,(this._y2+2*this._y3)/3),this._context.lineTo((this._x3+2*this._x2)/3,(this._y3+2*this._y2)/3),this._context.closePath();break}case 3:{this.point(this._x2,this._y2),this.point(this._x3,this._y3),this.point(this._x4,this._y4);break}}},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1,this._x2=t,this._y2=e;break;case 1:this._point=2,this._x3=t,this._y3=e;break;case 2:this._point=3,this._x4=t,this._y4=e,this._context.moveTo((this._x0+4*this._x1+t)/6,(this._y0+4*this._y1+e)/6);break;default:ux(this,t,e);break}this._x0=this._x1,this._x1=t,this._y0=this._y1,this._y1=e}};function woe(t){return new SF(t)}function AF(t){this._context=t}AF.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===3)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1;break;case 1:this._point=2;break;case 2:this._point=3;var n=(this._x0+4*this._x1+t)/6,r=(this._y0+4*this._y1+e)/6;this._line?this._context.lineTo(n,r):this._context.moveTo(n,r);break;case 3:this._point=4;default:ux(this,t,e);break}this._x0=this._x1,this._x1=t,this._y0=this._y1,this._y1=e}};function Eoe(t){return new AF(t)}function CF(t){this._context=t}CF.prototype={areaStart:lx,areaEnd:lx,lineStart:function(){this._point=0},lineEnd:function(){this._point&&this._context.closePath()},point:function(t,e){t=+t,e=+e,this._point?this._context.lineTo(t,e):(this._point=1,this._context.moveTo(t,e))}};function Toe(t){return new CF(t)}function SO(t){return t<0?-1:1}function AO(t,e,n){var r=t._x1-t._x0,i=e-t._x1,a=(t._y1-t._y0)/(r||i<0&&-0),s=(n-t._y1)/(i||r<0&&-0),l=(a*i+s*r)/(r+i);return(SO(a)+SO(s))*Math.min(Math.abs(a),Math.abs(s),.5*Math.abs(l))||0}function CO(t,e){var n=t._x1-t._x0;return n?(3*(t._y1-t._y0)/n-e)/2:e}function kE(t,e,n){var r=t._x0,i=t._y0,a=t._x1,s=t._y1,l=(a-r)/3;t._context.bezierCurveTo(r+l,i+l*e,a-l,s-l*n,a,s)}function cx(t){this._context=t}cx.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=this._t0=NaN,this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x1,this._y1);break;case 3:kE(this,this._t0,CO(this,this._t0));break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){var n=NaN;if(t=+t,e=+e,!(t===this._x1&&e===this._y1)){switch(this._point){case 0:this._point=1,this._line?this._context.lineTo(t,e):this._context.moveTo(t,e);break;case 1:this._point=2;break;case 2:this._point=3,kE(this,CO(this,n=AO(this,t,e)),n);break;default:kE(this,this._t0,n=AO(this,t,e));break}this._x0=this._x1,this._x1=t,this._y0=this._y1,this._y1=e,this._t0=n}}};function IF(t){this._context=new NF(t)}(IF.prototype=Object.create(cx.prototype)).point=function(t,e){cx.prototype.point.call(this,e,t)};function NF(t){this._context=t}NF.prototype={moveTo:function(t,e){this._context.moveTo(e,t)},closePath:function(){this._context.closePath()},lineTo:function(t,e){this._context.lineTo(e,t)},bezierCurveTo:function(t,e,n,r,i,a){this._context.bezierCurveTo(e,t,r,n,a,i)}};function Soe(t){return new cx(t)}function Aoe(t){return new IF(t)}function PF(t){this._context=t}PF.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=[],this._y=[]},lineEnd:function(){var t=this._x,e=this._y,n=t.length;if(n)if(this._line?this._context.lineTo(t[0],e[0]):this._context.moveTo(t[0],e[0]),n===2)this._context.lineTo(t[1],e[1]);else for(var r=IO(t),i=IO(e),a=0,s=1;s<n;++a,++s)this._context.bezierCurveTo(r[0][a],i[0][a],r[1][a],i[1][a],t[s],e[s]);(this._line||this._line!==0&&n===1)&&this._context.closePath(),this._line=1-this._line,this._x=this._y=null},point:function(t,e){this._x.push(+t),this._y.push(+e)}};function IO(t){var e,n=t.length-1,r,i=new Array(n),a=new Array(n),s=new Array(n);for(i[0]=0,a[0]=2,s[0]=t[0]+2*t[1],e=1;e<n-1;++e)i[e]=1,a[e]=4,s[e]=4*t[e]+2*t[e+1];for(i[n-1]=2,a[n-1]=7,s[n-1]=8*t[n-1]+t[n],e=1;e<n;++e)r=i[e]/a[e-1],a[e]-=r,s[e]-=r*s[e-1];for(i[n-1]=s[n-1]/a[n-1],e=n-2;e>=0;--e)i[e]=(s[e]-i[e+1])/a[e];for(a[n-1]=(t[n]+i[n-1])/2,e=0;e<n-1;++e)a[e]=2*t[e+1]-i[e+1];return[i,a]}function Coe(t){return new PF(t)}function L_(t,e){this._context=t,this._t=e}L_.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=this._y=NaN,this._point=0},lineEnd:function(){0<this._t&&this._t<1&&this._point===2&&this._context.lineTo(this._x,this._y),(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line>=0&&(this._t=1-this._t,this._line=1-this._line)},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1,this._line?this._context.lineTo(t,e):this._context.moveTo(t,e);break;case 1:this._point=2;default:{if(this._t<=0)this._context.lineTo(this._x,e),this._context.lineTo(t,e);else{var n=this._x*(1-this._t)+t*this._t;this._context.lineTo(n,this._y),this._context.lineTo(n,e)}break}}this._x=t,this._y=e}};function Ioe(t){return new L_(t,.5)}function Noe(t){return new L_(t,0)}function Poe(t){return new L_(t,1)}function Vh(t,e){if((s=t.length)>1)for(var n=1,r,i,a=t[e[0]],s,l=a.length;n<s;++n)for(i=a,a=t[e[n]],r=0;r<l;++r)a[r][1]+=a[r][0]=isNaN(i[r][1])?i[r][0]:i[r][1]}function y1(t){for(var e=t.length,n=new Array(e);--e>=0;)n[e]=e;return n}function Doe(t,e){return t[e]}function Roe(t){const e=[];return e.key=t,e}function koe(){var t=vn([]),e=y1,n=Vh,r=Doe;function i(a){var s=Array.from(t.apply(this,arguments),Roe),l,c=s.length,h=-1,p;for(const g of a)for(l=0,++h;l<c;++l)(s[l][h]=[0,+r(g,s[l].key,h,a)]).data=g;for(l=0,p=FC(e(s));l<c;++l)s[p[l]].index=l;return n(s,p),s}return i.keys=function(a){return arguments.length?(t=typeof a=="function"?a:vn(Array.from(a)),i):t},i.value=function(a){return arguments.length?(r=typeof a=="function"?a:vn(+a),i):r},i.order=function(a){return arguments.length?(e=a==null?y1:typeof a=="function"?a:vn(Array.from(a)),i):e},i.offset=function(a){return arguments.length?(n=a??Vh,i):n},i}function Moe(t,e){if((r=t.length)>0){for(var n,r,i=0,a=t[0].length,s;i<a;++i){for(s=n=0;n<r;++n)s+=t[n][i][1]||0;if(s)for(n=0;n<r;++n)t[n][i][1]/=s}Vh(t,e)}}function Ooe(t,e){if((i=t.length)>0){for(var n=0,r=t[e[0]],i,a=r.length;n<a;++n){for(var s=0,l=0;s<i;++s)l+=t[s][n][1]||0;r[n][1]+=r[n][0]=-l/2}Vh(t,e)}}function joe(t,e){if(!(!((s=t.length)>0)||!((a=(i=t[e[0]]).length)>0))){for(var n=0,r=1,i,a,s;r<a;++r){for(var l=0,c=0,h=0;l<s;++l){for(var p=t[e[l]],g=p[r][1]||0,x=p[r-1][1]||0,b=(g-x)/2,C=0;C<l;++C){var A=t[e[C]],D=A[r][1]||0,R=A[r-1][1]||0;b+=D-R}c+=g,h+=b*g}i[r-1][1]+=i[r-1][0]=n,c&&(n-=h/c)}i[r-1][1]+=i[r-1][0]=n,Vh(t,e)}}var ME={},OE={},NO;function Loe(){return NO||(NO=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});function e(n){return n==="__proto__"}t.isUnsafeProperty=e})(OE)),OE}var jE={},PO;function DF(){return PO||(PO=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});function e(n){switch(typeof n){case"number":case"symbol":return!1;case"string":return n.includes(".")||n.includes("[")||n.includes("]")}}t.isDeepKey=e})(jE)),jE}var LE={},DO;function zC(){return DO||(DO=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});function e(n){var r;return typeof n=="string"||typeof n=="symbol"?n:Object.is((r=n==null?void 0:n.valueOf)==null?void 0:r.call(n),-0)?"-0":String(n)}t.toKey=e})(LE)),LE}var VE={},UE={},RO;function Voe(){return RO||(RO=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});function e(n){if(n==null)return"";if(typeof n=="string")return n;if(Array.isArray(n))return n.map(e).join(",");const r=String(n);return r==="0"&&Object.is(Number(n),-0)?"-0":r}t.toString=e})(UE)),UE}var kO;function qC(){return kO||(kO=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=Voe(),n=zC();function r(i){if(Array.isArray(i))return i.map(n.toKey);if(typeof i=="symbol")return[i];i=e.toString(i);const a=[],s=i.length;if(s===0)return a;let l=0,c="",h="",p=!1;for(i.charCodeAt(0)===46&&(a.push(""),l++);l<s;){const g=i[l];h?g==="\\"&&l+1<s?(l++,c+=i[l]):g===h?h="":c+=g:p?g==='"'||g==="'"?h=g:g==="]"?(p=!1,a.push(c),c=""):c+=g:g==="["?(p=!0,c&&(a.push(c),c="")):g==="."?c&&(a.push(c),c=""):c+=g,l++}return c&&a.push(c),a}t.toPath=r})(VE)),VE}var MO;function HC(){return MO||(MO=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=Loe(),n=DF(),r=zC(),i=qC();function a(l,c,h){if(l==null)return h;switch(typeof c){case"string":{if(e.isUnsafeProperty(c))return h;const p=l[c];return p===void 0?n.isDeepKey(c)?a(l,i.toPath(c),h):h:p}case"number":case"symbol":{typeof c=="number"&&(c=r.toKey(c));const p=l[c];return p===void 0?h:p}default:{if(Array.isArray(c))return s(l,c,h);if(Object.is(c==null?void 0:c.valueOf(),-0)?c="-0":c=String(c),e.isUnsafeProperty(c))return h;const p=l[c];return p===void 0?h:p}}}function s(l,c,h){if(c.length===0)return h;let p=l;for(let g=0;g<c.length;g++){if(p==null||e.isUnsafeProperty(c[g]))return h;p=p[c[g]]}return p===void 0?h:p}t.get=a})(ME)),ME}var FE,OO;function Uoe(){return OO||(OO=1,FE=HC().get),FE}var Foe=Uoe();const Vd=Vo(Foe);var Kr=t=>t===0?0:t>0?1:-1,Ga=t=>typeof t=="number"&&t!=+t,kl=t=>typeof t=="string"&&t.indexOf("%")===t.length-1,Je=t=>(typeof t=="number"||t instanceof Number)&&!Ga(t),ps=t=>Je(t)||typeof t=="string",Boe=0,rg=t=>{var e=++Boe;return"".concat(t||"").concat(e)},Si=function(e,n){var r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:0,i=arguments.length>3&&arguments[3]!==void 0?arguments[3]:!1;if(!Je(e)&&typeof e!="string")return r;var a;if(kl(e)){if(n==null)return r;var s=e.indexOf("%");a=n*parseFloat(e.slice(0,s))/100}else a=+e;return Ga(a)&&(a=r),i&&n!=null&&a>n&&(a=n),a},RF=t=>{if(!Array.isArray(t))return!1;for(var e=t.length,n={},r=0;r<e;r++)if(!n[t[r]])n[t[r]]=!0;else return!0;return!1};function jn(t,e,n){return Je(t)&&Je(e)?t+n*(e-t):e}function kF(t,e,n){if(!(!t||!t.length))return t.find(r=>r&&(typeof e=="function"?e(r):Vd(r,e))===n)}var Fn=t=>t===null||typeof t>"u",Ug=t=>Fn(t)?t:"".concat(t.charAt(0).toUpperCase()).concat(t.slice(1));function zoe(t){return t!=null}function Fg(){}var qoe=["type","size","sizeType"];function v1(){return v1=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)({}).hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},v1.apply(null,arguments)}function jO(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function LO(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?jO(Object(n),!0).forEach(function(r){Hoe(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):jO(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function Hoe(t,e,n){return(e=Goe(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function Goe(t){var e=$oe(t,"string");return typeof e=="symbol"?e:e+""}function $oe(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function Koe(t,e){if(t==null)return{};var n,r,i=Woe(t,e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);for(r=0;r<a.length;r++)n=a[r],e.indexOf(n)===-1&&{}.propertyIsEnumerable.call(t,n)&&(i[n]=t[n])}return i}function Woe(t,e){if(t==null)return{};var n={};for(var r in t)if({}.hasOwnProperty.call(t,r)){if(e.indexOf(r)!==-1)continue;n[r]=t[r]}return n}var MF={symbolCircle:BC,symbolCross:uoe,symbolDiamond:doe,symbolSquare:foe,symbolStar:goe,symbolTriangle:yoe,symbolWye:xoe},Yoe=Math.PI/180,Zoe=t=>{var e="symbol".concat(Ug(t));return MF[e]||BC},Joe=(t,e,n)=>{if(e==="area")return t;switch(n){case"cross":return 5*t*t/9;case"diamond":return .5*t*t/Math.sqrt(3);case"square":return t*t;case"star":{var r=18*Yoe;return 1.25*t*t*(Math.tan(r)-Math.tan(r*2)*Math.tan(r)**2)}case"triangle":return Math.sqrt(3)*t*t/4;case"wye":return(21-10*Math.sqrt(3))*t*t/8;default:return Math.PI*t*t/4}},Qoe=(t,e)=>{MF["symbol".concat(Ug(t))]=e},GC=t=>{var{type:e="circle",size:n=64,sizeType:r="area"}=t,i=Koe(t,qoe),a=LO(LO({},i),{},{type:e,size:n,sizeType:r}),s="circle";typeof e=="string"&&(s=e);var l=()=>{var x=Zoe(s),b=_oe().type(x).size(Joe(n,r,s)),C=b();if(C!==null)return C},{className:c,cx:h,cy:p}=a,g=Ai(a);return Je(h)&&Je(p)&&Je(n)?N.createElement("path",v1({},g,{className:Ft("recharts-symbols",c),transform:"translate(".concat(h,", ").concat(p,")"),d:l()})):null};GC.registerSymbol=Qoe;var OF=t=>"radius"in t&&"startAngle"in t&&"endAngle"in t,$C=(t,e)=>{if(!t||typeof t=="function"||typeof t=="boolean")return null;var n=t;if(N.isValidElement(t)&&(n=t.props),typeof n!="object"&&typeof n!="function")return null;var r={};return Object.keys(n).forEach(i=>{LC(i)&&(r[i]=(a=>n[i](n,a)))}),r},Xoe=(t,e,n)=>r=>(t(e,n,r),null),Bg=(t,e,n)=>{if(t===null||typeof t!="object"&&typeof t!="function")return null;var r=null;return Object.keys(t).forEach(i=>{var a=t[i];LC(i)&&typeof a=="function"&&(r||(r={}),r[i]=Xoe(a,e,n))}),r};function VO(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function ele(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?VO(Object(n),!0).forEach(function(r){tle(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):VO(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function tle(t,e,n){return(e=nle(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function nle(t){var e=rle(t,"string");return typeof e=="symbol"?e:e+""}function rle(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function dr(t,e){var n=ele({},t),r=e,i=Object.keys(e),a=i.reduce((s,l)=>(s[l]===void 0&&r[l]!==void 0&&(s[l]=r[l]),s),n);return a}function dx(){return dx=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)({}).hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},dx.apply(null,arguments)}function UO(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function ile(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?UO(Object(n),!0).forEach(function(r){ale(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):UO(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function ale(t,e,n){return(e=sle(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function sle(t){var e=ole(t,"string");return typeof e=="symbol"?e:e+""}function ole(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var ds=32,lle={align:"center",iconSize:14,inactiveColor:"#ccc",layout:"horizontal",verticalAlign:"middle"};function ule(t){var{data:e,iconType:n,inactiveColor:r}=t,i=ds/2,a=ds/6,s=ds/3,l=e.inactive?r:e.color,c=n??e.type;if(c==="none")return null;if(c==="plainline"){var h;return N.createElement("line",{strokeWidth:4,fill:"none",stroke:l,strokeDasharray:(h=e.payload)===null||h===void 0?void 0:h.strokeDasharray,x1:0,y1:i,x2:ds,y2:i,className:"recharts-legend-icon"})}if(c==="line")return N.createElement("path",{strokeWidth:4,fill:"none",stroke:l,d:"M0,".concat(i,"h").concat(s,`
            A`).concat(a,",").concat(a,",0,1,1,").concat(2*s,",").concat(i,`
            H`).concat(ds,"M").concat(2*s,",").concat(i,`
            A`).concat(a,",").concat(a,",0,1,1,").concat(s,",").concat(i),className:"recharts-legend-icon"});if(c==="rect")return N.createElement("path",{stroke:"none",fill:l,d:"M0,".concat(ds/8,"h").concat(ds,"v").concat(ds*3/4,"h").concat(-ds,"z"),className:"recharts-legend-icon"});if(N.isValidElement(e.legendIcon)){var p=ile({},e);return delete p.legendIcon,N.cloneElement(e.legendIcon,p)}return N.createElement(GC,{fill:l,cx:i,cy:i,size:ds,sizeType:"diameter",type:c})}function cle(t){var{payload:e,iconSize:n,layout:r,formatter:i,inactiveColor:a,iconType:s}=t,l={x:0,y:0,width:ds,height:ds},c={display:r==="horizontal"?"inline-block":"block",marginRight:10},h={display:"inline-block",verticalAlign:"middle",marginRight:4};return e.map((p,g)=>{var x=p.formatter||i,b=Ft({"recharts-legend-item":!0,["legend-item-".concat(g)]:!0,inactive:p.inactive});if(p.type==="none")return null;var C=p.inactive?a:p.color,A=x?x(p.value,p,g):p.value;return N.createElement("li",dx({className:b,style:c,key:"legend-item-".concat(g)},Bg(t,p,g)),N.createElement(VC,{width:n,height:n,viewBox:l,style:h,"aria-label":"".concat(A," legend icon")},N.createElement(ule,{data:p,iconType:s,inactiveColor:a})),N.createElement("span",{className:"recharts-legend-item-text",style:{color:C}},A))})}var dle=t=>{var e=dr(t,lle),{payload:n,layout:r,align:i}=e;if(!n||!n.length)return null;var a={padding:0,margin:0,textAlign:r==="horizontal"?i:"left"};return N.createElement("ul",{className:"recharts-default-legend",style:a},N.createElement(cle,dx({},e,{payload:n})))},BE={},zE={},FO;function fle(){return FO||(FO=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});function e(n,r){const i=new Map;for(let a=0;a<n.length;a++){const s=n[a],l=r(s);i.has(l)||i.set(l,s)}return Array.from(i.values())}t.uniqBy=e})(zE)),zE}var qE={},BO;function jF(){return BO||(BO=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});function e(n){return n}t.identity=e})(qE)),qE}var HE={},GE={},$E={},zO;function hle(){return zO||(zO=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});function e(n){return Number.isSafeInteger(n)&&n>=0}t.isLength=e})($E)),$E}var qO;function KC(){return qO||(qO=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=hle();function n(r){return r!=null&&typeof r!="function"&&e.isLength(r.length)}t.isArrayLike=n})(GE)),GE}var KE={},HO;function mle(){return HO||(HO=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});function e(n){return typeof n=="object"&&n!==null}t.isObjectLike=e})(KE)),KE}var GO;function ple(){return GO||(GO=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=KC(),n=mle();function r(i){return n.isObjectLike(i)&&e.isArrayLike(i)}t.isArrayLikeObject=r})(HE)),HE}var WE={},YE={},$O;function gle(){return $O||($O=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=HC();function n(r){return function(i){return e.get(i,r)}}t.property=n})(YE)),YE}var ZE={},JE={},QE={},XE={},KO;function LF(){return KO||(KO=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});function e(n){return n!==null&&(typeof n=="object"||typeof n=="function")}t.isObject=e})(XE)),XE}var eT={},WO;function VF(){return WO||(WO=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});function e(n){return n==null||typeof n!="object"&&typeof n!="function"}t.isPrimitive=e})(eT)),eT}var tT={},YO;function UF(){return YO||(YO=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});function e(n,r){return n===r||Number.isNaN(n)&&Number.isNaN(r)}t.eq=e})(tT)),tT}var ZO;function yle(){return ZO||(ZO=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=LF(),n=VF(),r=UF();function i(p,g,x){return typeof x!="function"?i(p,g,()=>{}):a(p,g,function b(C,A,D,R,j,O){const q=x(C,A,D,R,j,O);return q!==void 0?!!q:a(C,A,b,O)},new Map)}function a(p,g,x,b){if(g===p)return!0;switch(typeof g){case"object":return s(p,g,x,b);case"function":return Object.keys(g).length>0?a(p,{...g},x,b):r.eq(p,g);default:return e.isObject(p)?typeof g=="string"?g==="":!0:r.eq(p,g)}}function s(p,g,x,b){if(g==null)return!0;if(Array.isArray(g))return c(p,g,x,b);if(g instanceof Map)return l(p,g,x,b);if(g instanceof Set)return h(p,g,x,b);const C=Object.keys(g);if(p==null)return C.length===0;if(C.length===0)return!0;if(b!=null&&b.has(g))return b.get(g)===p;b==null||b.set(g,p);try{for(let A=0;A<C.length;A++){const D=C[A];if(!n.isPrimitive(p)&&!(D in p)||g[D]===void 0&&p[D]!==void 0||g[D]===null&&p[D]!==null||!x(p[D],g[D],D,p,g,b))return!1}return!0}finally{b==null||b.delete(g)}}function l(p,g,x,b){if(g.size===0)return!0;if(!(p instanceof Map))return!1;for(const[C,A]of g.entries()){const D=p.get(C);if(x(D,A,C,p,g,b)===!1)return!1}return!0}function c(p,g,x,b){if(g.length===0)return!0;if(!Array.isArray(p))return!1;const C=new Set;for(let A=0;A<g.length;A++){const D=g[A];let R=!1;for(let j=0;j<p.length;j++){if(C.has(j))continue;const O=p[j];let q=!1;if(x(O,D,A,p,g,b)&&(q=!0),q){C.add(j),R=!0;break}}if(!R)return!1}return!0}function h(p,g,x,b){return g.size===0?!0:p instanceof Set?c([...p],[...g],x,b):!1}t.isMatchWith=i,t.isSetMatch=h})(QE)),QE}var JO;function FF(){return JO||(JO=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=yle();function n(r,i){return e.isMatchWith(r,i,()=>{})}t.isMatch=n})(JE)),JE}var nT={},rT={},iT={},QO;function vle(){return QO||(QO=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});function e(n){return Object.getOwnPropertySymbols(n).filter(r=>Object.prototype.propertyIsEnumerable.call(n,r))}t.getSymbols=e})(iT)),iT}var aT={},XO;function BF(){return XO||(XO=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});function e(n){return n==null?n===void 0?"[object Undefined]":"[object Null]":Object.prototype.toString.call(n)}t.getTag=e})(aT)),aT}var sT={},e5;function zF(){return e5||(e5=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e="[object RegExp]",n="[object String]",r="[object Number]",i="[object Boolean]",a="[object Arguments]",s="[object Symbol]",l="[object Date]",c="[object Map]",h="[object Set]",p="[object Array]",g="[object Function]",x="[object ArrayBuffer]",b="[object Object]",C="[object Error]",A="[object DataView]",D="[object Uint8Array]",R="[object Uint8ClampedArray]",j="[object Uint16Array]",O="[object Uint32Array]",q="[object BigUint64Array]",$="[object Int8Array]",H="[object Int16Array]",U="[object Int32Array]",z="[object BigInt64Array]",B="[object Float32Array]",Z="[object Float64Array]";t.argumentsTag=a,t.arrayBufferTag=x,t.arrayTag=p,t.bigInt64ArrayTag=z,t.bigUint64ArrayTag=q,t.booleanTag=i,t.dataViewTag=A,t.dateTag=l,t.errorTag=C,t.float32ArrayTag=B,t.float64ArrayTag=Z,t.functionTag=g,t.int16ArrayTag=H,t.int32ArrayTag=U,t.int8ArrayTag=$,t.mapTag=c,t.numberTag=r,t.objectTag=b,t.regexpTag=e,t.setTag=h,t.stringTag=n,t.symbolTag=s,t.uint16ArrayTag=j,t.uint32ArrayTag=O,t.uint8ArrayTag=D,t.uint8ClampedArrayTag=R})(sT)),sT}var oT={},t5;function xle(){return t5||(t5=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});function e(n){return ArrayBuffer.isView(n)&&!(n instanceof DataView)}t.isTypedArray=e})(oT)),oT}var n5;function qF(){return n5||(n5=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=vle(),n=BF(),r=zF(),i=VF(),a=xle();function s(p,g){return l(p,void 0,p,new Map,g)}function l(p,g,x,b=new Map,C=void 0){const A=C==null?void 0:C(p,g,x,b);if(A!==void 0)return A;if(i.isPrimitive(p))return p;if(b.has(p))return b.get(p);if(Array.isArray(p)){const D=new Array(p.length);b.set(p,D);for(let R=0;R<p.length;R++)D[R]=l(p[R],R,x,b,C);return Object.hasOwn(p,"index")&&(D.index=p.index),Object.hasOwn(p,"input")&&(D.input=p.input),D}if(p instanceof Date)return new Date(p.getTime());if(p instanceof RegExp){const D=new RegExp(p.source,p.flags);return D.lastIndex=p.lastIndex,D}if(p instanceof Map){const D=new Map;b.set(p,D);for(const[R,j]of p)D.set(R,l(j,R,x,b,C));return D}if(p instanceof Set){const D=new Set;b.set(p,D);for(const R of p)D.add(l(R,void 0,x,b,C));return D}if(typeof Buffer<"u"&&Buffer.isBuffer(p))return p.subarray();if(a.isTypedArray(p)){const D=new(Object.getPrototypeOf(p)).constructor(p.length);b.set(p,D);for(let R=0;R<p.length;R++)D[R]=l(p[R],R,x,b,C);return D}if(p instanceof ArrayBuffer||typeof SharedArrayBuffer<"u"&&p instanceof SharedArrayBuffer)return p.slice(0);if(p instanceof DataView){const D=new DataView(p.buffer.slice(0),p.byteOffset,p.byteLength);return b.set(p,D),c(D,p,x,b,C),D}if(typeof File<"u"&&p instanceof File){const D=new File([p],p.name,{type:p.type});return b.set(p,D),c(D,p,x,b,C),D}if(typeof Blob<"u"&&p instanceof Blob){const D=new Blob([p],{type:p.type});return b.set(p,D),c(D,p,x,b,C),D}if(p instanceof Error){const D=new p.constructor;return b.set(p,D),D.message=p.message,D.name=p.name,D.stack=p.stack,D.cause=p.cause,c(D,p,x,b,C),D}if(p instanceof Boolean){const D=new Boolean(p.valueOf());return b.set(p,D),c(D,p,x,b,C),D}if(p instanceof Number){const D=new Number(p.valueOf());return b.set(p,D),c(D,p,x,b,C),D}if(p instanceof String){const D=new String(p.valueOf());return b.set(p,D),c(D,p,x,b,C),D}if(typeof p=="object"&&h(p)){const D=Object.create(Object.getPrototypeOf(p));return b.set(p,D),c(D,p,x,b,C),D}return p}function c(p,g,x=p,b,C){const A=[...Object.keys(g),...e.getSymbols(g)];for(let D=0;D<A.length;D++){const R=A[D],j=Object.getOwnPropertyDescriptor(p,R);(j==null||j.writable)&&(p[R]=l(g[R],R,x,b,C))}}function h(p){switch(n.getTag(p)){case r.argumentsTag:case r.arrayTag:case r.arrayBufferTag:case r.dataViewTag:case r.booleanTag:case r.dateTag:case r.float32ArrayTag:case r.float64ArrayTag:case r.int8ArrayTag:case r.int16ArrayTag:case r.int32ArrayTag:case r.mapTag:case r.numberTag:case r.objectTag:case r.regexpTag:case r.setTag:case r.stringTag:case r.symbolTag:case r.uint8ArrayTag:case r.uint8ClampedArrayTag:case r.uint16ArrayTag:case r.uint32ArrayTag:return!0;default:return!1}}t.cloneDeepWith=s,t.cloneDeepWithImpl=l,t.copyProperties=c})(rT)),rT}var r5;function _le(){return r5||(r5=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=qF();function n(r){return e.cloneDeepWithImpl(r,void 0,r,new Map,void 0)}t.cloneDeep=n})(nT)),nT}var i5;function ble(){return i5||(i5=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=FF(),n=_le();function r(i){return i=n.cloneDeep(i),a=>e.isMatch(a,i)}t.matches=r})(ZE)),ZE}var lT={},uT={},cT={},a5;function wle(){return a5||(a5=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=qF(),n=zF();function r(i,a){return e.cloneDeepWith(i,(s,l,c,h)=>{const p=a==null?void 0:a(s,l,c,h);if(p!==void 0)return p;if(typeof i=="object")switch(Object.prototype.toString.call(i)){case n.numberTag:case n.stringTag:case n.booleanTag:{const g=new i.constructor(i==null?void 0:i.valueOf());return e.copyProperties(g,i),g}case n.argumentsTag:{const g={};return e.copyProperties(g,i),g.length=i.length,g[Symbol.iterator]=i[Symbol.iterator],g}default:return}})}t.cloneDeepWith=r})(cT)),cT}var s5;function Ele(){return s5||(s5=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=wle();function n(r){return e.cloneDeepWith(r)}t.cloneDeep=n})(uT)),uT}var dT={},fT={},o5;function HF(){return o5||(o5=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=/^(?:0|[1-9]\d*)$/;function n(r,i=Number.MAX_SAFE_INTEGER){switch(typeof r){case"number":return Number.isInteger(r)&&r>=0&&r<i;case"symbol":return!1;case"string":return e.test(r)}}t.isIndex=n})(fT)),fT}var hT={},l5;function Tle(){return l5||(l5=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=BF();function n(r){return r!==null&&typeof r=="object"&&e.getTag(r)==="[object Arguments]"}t.isArguments=n})(hT)),hT}var u5;function Sle(){return u5||(u5=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=DF(),n=HF(),r=Tle(),i=qC();function a(s,l){let c;if(Array.isArray(l)?c=l:typeof l=="string"&&e.isDeepKey(l)&&(s==null?void 0:s[l])==null?c=i.toPath(l):c=[l],c.length===0)return!1;let h=s;for(let p=0;p<c.length;p++){const g=c[p];if((h==null||!Object.hasOwn(h,g))&&!((Array.isArray(h)||r.isArguments(h))&&n.isIndex(g)&&g<h.length))return!1;h=h[g]}return!0}t.has=a})(dT)),dT}var c5;function Ale(){return c5||(c5=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=FF(),n=zC(),r=Ele(),i=HC(),a=Sle();function s(l,c){switch(typeof l){case"object":{Object.is(l==null?void 0:l.valueOf(),-0)&&(l="-0");break}case"number":{l=n.toKey(l);break}}return c=r.cloneDeep(c),function(h){const p=i.get(h,l);return p===void 0?a.has(h,l):c===void 0?p===void 0:e.isMatch(p,c)}}t.matchesProperty=s})(lT)),lT}var d5;function Cle(){return d5||(d5=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=jF(),n=gle(),r=ble(),i=Ale();function a(s){if(s==null)return e.identity;switch(typeof s){case"function":return s;case"object":return Array.isArray(s)&&s.length===2?i.matchesProperty(s[0],s[1]):r.matches(s);case"string":case"symbol":case"number":return n.property(s)}}t.iteratee=a})(WE)),WE}var f5;function Ile(){return f5||(f5=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=fle(),n=jF(),r=ple(),i=Cle();function a(s,l=n.identity){return r.isArrayLikeObject(s)?e.uniqBy(Array.from(s),i.iteratee(l)):[]}t.uniqBy=a})(BE)),BE}var mT,h5;function Nle(){return h5||(h5=1,mT=Ile().uniqBy),mT}var Ple=Nle();const m5=Vo(Ple);function GF(t,e,n){return e===!0?m5(t,n):typeof e=="function"?m5(t,e):t}var pT={exports:{}},gT={},yT={exports:{}},vT={};/**
 * @license React
 * use-sync-external-store-shim.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var p5;function Dle(){if(p5)return vT;p5=1;var t=Kh();function e(g,x){return g===x&&(g!==0||1/g===1/x)||g!==g&&x!==x}var n=typeof Object.is=="function"?Object.is:e,r=t.useState,i=t.useEffect,a=t.useLayoutEffect,s=t.useDebugValue;function l(g,x){var b=x(),C=r({inst:{value:b,getSnapshot:x}}),A=C[0].inst,D=C[1];return a(function(){A.value=b,A.getSnapshot=x,c(A)&&D({inst:A})},[g,b,x]),i(function(){return c(A)&&D({inst:A}),g(function(){c(A)&&D({inst:A})})},[g]),s(b),b}function c(g){var x=g.getSnapshot;g=g.value;try{var b=x();return!n(g,b)}catch{return!0}}function h(g,x){return x()}var p=typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"?h:l;return vT.useSyncExternalStore=t.useSyncExternalStore!==void 0?t.useSyncExternalStore:p,vT}var g5;function Rle(){return g5||(g5=1,yT.exports=Dle()),yT.exports}/**
 * @license React
 * use-sync-external-store-shim/with-selector.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var y5;function kle(){if(y5)return gT;y5=1;var t=Kh(),e=Rle();function n(h,p){return h===p&&(h!==0||1/h===1/p)||h!==h&&p!==p}var r=typeof Object.is=="function"?Object.is:n,i=e.useSyncExternalStore,a=t.useRef,s=t.useEffect,l=t.useMemo,c=t.useDebugValue;return gT.useSyncExternalStoreWithSelector=function(h,p,g,x,b){var C=a(null);if(C.current===null){var A={hasValue:!1,value:null};C.current=A}else A=C.current;C=l(function(){function R(H){if(!j){if(j=!0,O=H,H=x(H),b!==void 0&&A.hasValue){var U=A.value;if(b(U,H))return q=U}return q=H}if(U=q,r(O,H))return U;var z=x(H);return b!==void 0&&b(U,z)?(O=H,U):(O=H,q=z)}var j=!1,O,q,$=g===void 0?null:g;return[function(){return R(p())},$===null?void 0:function(){return R($())}]},[p,g,x,b]);var D=i(h,C[0],C[1]);return s(function(){A.hasValue=!0,A.value=D},[D]),c(D),D},gT}var v5;function Mle(){return v5||(v5=1,pT.exports=kle()),pT.exports}var Ole=Mle(),WC=N.createContext(null),jle=t=>t,gn=()=>{var t=N.useContext(WC);return t?t.store.dispatch:jle},l0=()=>{},Lle=()=>l0,Vle=(t,e)=>t===e;function $e(t){var e=N.useContext(WC);return Ole.useSyncExternalStoreWithSelector(e?e.subscription.addNestedSub:Lle,e?e.store.getState:l0,e?e.store.getState:l0,e?t:l0,Vle)}function Ule(t,e=`expected a function, instead received ${typeof t}`){if(typeof t!="function")throw new TypeError(e)}function Fle(t,e=`expected an object, instead received ${typeof t}`){if(typeof t!="object")throw new TypeError(e)}function Ble(t,e="expected all items to be functions, instead received the following types: "){if(!t.every(n=>typeof n=="function")){const n=t.map(r=>typeof r=="function"?`function ${r.name||"unnamed"}()`:typeof r).join(", ");throw new TypeError(`${e}[${n}]`)}}var x5=t=>Array.isArray(t)?t:[t];function zle(t){const e=Array.isArray(t[0])?t[0]:t;return Ble(e,"createSelector expects all input-selectors to be functions, but received the following types: "),e}function qle(t,e){const n=[],{length:r}=t;for(let i=0;i<r;i++)n.push(t[i].apply(null,e));return n}var Hle=class{constructor(t){this.value=t}deref(){return this.value}},Gle=typeof WeakRef<"u"?WeakRef:Hle,$le=0,_5=1;function Av(){return{s:$le,v:void 0,o:null,p:null}}function $F(t,e={}){let n=Av();const{resultEqualityCheck:r}=e;let i,a=0;function s(){var g;let l=n;const{length:c}=arguments;for(let x=0,b=c;x<b;x++){const C=arguments[x];if(typeof C=="function"||typeof C=="object"&&C!==null){let A=l.o;A===null&&(l.o=A=new WeakMap);const D=A.get(C);D===void 0?(l=Av(),A.set(C,l)):l=D}else{let A=l.p;A===null&&(l.p=A=new Map);const D=A.get(C);D===void 0?(l=Av(),A.set(C,l)):l=D}}const h=l;let p;if(l.s===_5)p=l.v;else if(p=t.apply(null,arguments),a++,r){const x=((g=i==null?void 0:i.deref)==null?void 0:g.call(i))??i;x!=null&&r(x,p)&&(p=x,a!==0&&a--),i=typeof p=="object"&&p!==null||typeof p=="function"?new Gle(p):p}return h.s=_5,h.v=p,p}return s.clearCache=()=>{n=Av(),s.resetResultsCount()},s.resultsCount=()=>a,s.resetResultsCount=()=>{a=0},s}function Kle(t,...e){const n=typeof t=="function"?{memoize:t,memoizeOptions:e}:t,r=(...i)=>{let a=0,s=0,l,c={},h=i.pop();typeof h=="object"&&(c=h,h=i.pop()),Ule(h,`createSelector expects an output function after the inputs, but received: [${typeof h}]`);const p={...n,...c},{memoize:g,memoizeOptions:x=[],argsMemoize:b=$F,argsMemoizeOptions:C=[]}=p,A=x5(x),D=x5(C),R=zle(i),j=g(function(){return a++,h.apply(null,arguments)},...A),O=b(function(){s++;const $=qle(R,arguments);return l=j.apply(null,$),l},...D);return Object.assign(O,{resultFunc:h,memoizedResultFunc:j,dependencies:R,dependencyRecomputations:()=>s,resetDependencyRecomputations:()=>{s=0},lastResult:()=>l,recomputations:()=>a,resetRecomputations:()=>{a=0},memoize:g,argsMemoize:b})};return Object.assign(r,{withTypes:()=>r}),r}var pe=Kle($F),Wle=Object.assign((t,e=pe)=>{Fle(t,`createStructuredSelector expects first argument to be an object where each property is a selector, instead received a ${typeof t}`);const n=Object.keys(t),r=n.map(a=>t[a]);return e(r,(...a)=>a.reduce((s,l,c)=>(s[n[c]]=l,s),{}))},{withTypes:()=>Wle}),xT={},_T={},bT={},b5;function Yle(){return b5||(b5=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});function e(r){return typeof r=="symbol"?1:r===null?2:r===void 0?3:r!==r?4:0}const n=(r,i,a)=>{if(r!==i){const s=e(r),l=e(i);if(s===l&&s===0){if(r<i)return a==="desc"?1:-1;if(r>i)return a==="desc"?-1:1}return a==="desc"?l-s:s-l}return 0};t.compareValues=n})(bT)),bT}var wT={},ET={},w5;function KF(){return w5||(w5=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});function e(n){return typeof n=="symbol"||n instanceof Symbol}t.isSymbol=e})(ET)),ET}var E5;function Zle(){return E5||(E5=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=KF(),n=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,r=/^\w*$/;function i(a,s){return Array.isArray(a)?!1:typeof a=="number"||typeof a=="boolean"||a==null||e.isSymbol(a)?!0:typeof a=="string"&&(r.test(a)||!n.test(a))||s!=null&&Object.hasOwn(s,a)}t.isKey=i})(wT)),wT}var T5;function Jle(){return T5||(T5=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=Yle(),n=Zle(),r=qC();function i(a,s,l,c){if(a==null)return[];l=c?void 0:l,Array.isArray(a)||(a=Object.values(a)),Array.isArray(s)||(s=s==null?[null]:[s]),s.length===0&&(s=[null]),Array.isArray(l)||(l=l==null?[]:[l]),l=l.map(b=>String(b));const h=(b,C)=>{let A=b;for(let D=0;D<C.length&&A!=null;++D)A=A[C[D]];return A},p=(b,C)=>C==null||b==null?C:typeof b=="object"&&"key"in b?Object.hasOwn(C,b.key)?C[b.key]:h(C,b.path):typeof b=="function"?b(C):Array.isArray(b)?h(C,b):typeof C=="object"?C[b]:C,g=s.map(b=>(Array.isArray(b)&&b.length===1&&(b=b[0]),b==null||typeof b=="function"||Array.isArray(b)||n.isKey(b)?b:{key:b,path:r.toPath(b)}));return a.map(b=>({original:b,criteria:g.map(C=>p(C,b))})).slice().sort((b,C)=>{for(let A=0;A<g.length;A++){const D=e.compareValues(b.criteria[A],C.criteria[A],l[A]);if(D!==0)return D}return 0}).map(b=>b.original)}t.orderBy=i})(_T)),_T}var TT={},S5;function Qle(){return S5||(S5=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});function e(n,r=1){const i=[],a=Math.floor(r),s=(l,c)=>{for(let h=0;h<l.length;h++){const p=l[h];Array.isArray(p)&&c<a?s(p,c+1):i.push(p)}};return s(n,0),i}t.flatten=e})(TT)),TT}var ST={},A5;function WF(){return A5||(A5=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=HF(),n=KC(),r=LF(),i=UF();function a(s,l,c){return r.isObject(c)&&(typeof l=="number"&&n.isArrayLike(c)&&e.isIndex(l)&&l<c.length||typeof l=="string"&&l in c)?i.eq(c[l],s):!1}t.isIterateeCall=a})(ST)),ST}var C5;function Xle(){return C5||(C5=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=Jle(),n=Qle(),r=WF();function i(a,...s){const l=s.length;return l>1&&r.isIterateeCall(a,s[0],s[1])?s=[]:l>2&&r.isIterateeCall(s[0],s[1],s[2])&&(s=[s[0]]),e.orderBy(a,n.flatten(s),["asc"])}t.sortBy=i})(xT)),xT}var AT,I5;function eue(){return I5||(I5=1,AT=Xle().sortBy),AT}var tue=eue();const V_=Vo(tue);var YF=t=>t.legend.settings,nue=t=>t.legend.size,rue=t=>t.legend.payload,iue=pe([rue,YF],(t,e)=>{var{itemSorter:n}=e,r=t.flat(1);return n?V_(r,n):r});function aue(){return $e(iue)}var Cv=1;function ZF(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[],[e,n]=N.useState({height:0,left:0,top:0,width:0}),r=N.useCallback(i=>{if(i!=null){var a=i.getBoundingClientRect(),s={height:a.height,left:a.left,top:a.top,width:a.width};(Math.abs(s.height-e.height)>Cv||Math.abs(s.left-e.left)>Cv||Math.abs(s.top-e.top)>Cv||Math.abs(s.width-e.width)>Cv)&&n({height:s.height,left:s.left,top:s.top,width:s.width})}},[e.width,e.height,e.top,e.left,...t]);return[e,r]}function ei(t){return`Minified Redux error #${t}; visit https://redux.js.org/Errors?code=${t} for the full message or use the non-minified dev environment for full errors. `}var sue=typeof Symbol=="function"&&Symbol.observable||"@@observable",N5=sue,CT=()=>Math.random().toString(36).substring(7).split("").join("."),oue={INIT:`@@redux/INIT${CT()}`,REPLACE:`@@redux/REPLACE${CT()}`,PROBE_UNKNOWN_ACTION:()=>`@@redux/PROBE_UNKNOWN_ACTION${CT()}`},fx=oue;function YC(t){if(typeof t!="object"||t===null)return!1;let e=t;for(;Object.getPrototypeOf(e)!==null;)e=Object.getPrototypeOf(e);return Object.getPrototypeOf(t)===e||Object.getPrototypeOf(t)===null}function JF(t,e,n){if(typeof t!="function")throw new Error(ei(2));if(typeof e=="function"&&typeof n=="function"||typeof n=="function"&&typeof arguments[3]=="function")throw new Error(ei(0));if(typeof e=="function"&&typeof n>"u"&&(n=e,e=void 0),typeof n<"u"){if(typeof n!="function")throw new Error(ei(1));return n(JF)(t,e)}let r=t,i=e,a=new Map,s=a,l=0,c=!1;function h(){s===a&&(s=new Map,a.forEach((D,R)=>{s.set(R,D)}))}function p(){if(c)throw new Error(ei(3));return i}function g(D){if(typeof D!="function")throw new Error(ei(4));if(c)throw new Error(ei(5));let R=!0;h();const j=l++;return s.set(j,D),function(){if(R){if(c)throw new Error(ei(6));R=!1,h(),s.delete(j),a=null}}}function x(D){if(!YC(D))throw new Error(ei(7));if(typeof D.type>"u")throw new Error(ei(8));if(typeof D.type!="string")throw new Error(ei(17));if(c)throw new Error(ei(9));try{c=!0,i=r(i,D)}finally{c=!1}return(a=s).forEach(j=>{j()}),D}function b(D){if(typeof D!="function")throw new Error(ei(10));r=D,x({type:fx.REPLACE})}function C(){const D=g;return{subscribe(R){if(typeof R!="object"||R===null)throw new Error(ei(11));function j(){const q=R;q.next&&q.next(p())}return j(),{unsubscribe:D(j)}},[N5](){return this}}}return x({type:fx.INIT}),{dispatch:x,subscribe:g,getState:p,replaceReducer:b,[N5]:C}}function lue(t){Object.keys(t).forEach(e=>{const n=t[e];if(typeof n(void 0,{type:fx.INIT})>"u")throw new Error(ei(12));if(typeof n(void 0,{type:fx.PROBE_UNKNOWN_ACTION()})>"u")throw new Error(ei(13))})}function QF(t){const e=Object.keys(t),n={};for(let a=0;a<e.length;a++){const s=e[a];typeof t[s]=="function"&&(n[s]=t[s])}const r=Object.keys(n);let i;try{lue(n)}catch(a){i=a}return function(s={},l){if(i)throw i;let c=!1;const h={};for(let p=0;p<r.length;p++){const g=r[p],x=n[g],b=s[g],C=x(b,l);if(typeof C>"u")throw l&&l.type,new Error(ei(14));h[g]=C,c=c||C!==b}return c=c||r.length!==Object.keys(s).length,c?h:s}}function hx(...t){return t.length===0?e=>e:t.length===1?t[0]:t.reduce((e,n)=>(...r)=>e(n(...r)))}function uue(...t){return e=>(n,r)=>{const i=e(n,r);let a=()=>{throw new Error(ei(15))};const s={getState:i.getState,dispatch:(c,...h)=>a(c,...h)},l=t.map(c=>c(s));return a=hx(...l)(i.dispatch),{...i,dispatch:a}}}function XF(t){return YC(t)&&"type"in t&&typeof t.type=="string"}var eB=Symbol.for("immer-nothing"),P5=Symbol.for("immer-draftable"),Fi=Symbol.for("immer-state");function Us(t,...e){throw new Error(`[Immer] minified error nr: ${t}. Full error at: https://bit.ly/3cXEKWf`)}var Ua=Object,Uh=Ua.getPrototypeOf,mx="constructor",U_="prototype",x1="configurable",px="enumerable",u0="writable",ig="value",Ml=t=>!!t&&!!t[Fi];function Oo(t){var e;return t?tB(t)||F_(t)||!!t[P5]||!!((e=t[mx])!=null&&e[P5])||B_(t)||z_(t):!1}var cue=Ua[U_][mx].toString(),D5=new WeakMap;function tB(t){if(!t||!ZC(t))return!1;const e=Uh(t);if(e===null||e===Ua[U_])return!0;const n=Ua.hasOwnProperty.call(e,mx)&&e[mx];if(n===Object)return!0;if(!Wf(n))return!1;let r=D5.get(n);return r===void 0&&(r=Function.toString.call(n),D5.set(n,r)),r===cue}function zg(t,e,n=!0){qg(t)===0?(n?Reflect.ownKeys(t):Ua.keys(t)).forEach(i=>{e(i,t[i],t)}):t.forEach((r,i)=>e(i,r,t))}function qg(t){const e=t[Fi];return e?e.type_:F_(t)?1:B_(t)?2:z_(t)?3:0}var R5=(t,e,n=qg(t))=>n===2?t.has(e):Ua[U_].hasOwnProperty.call(t,e),_1=(t,e,n=qg(t))=>n===2?t.get(e):t[e],gx=(t,e,n,r=qg(t))=>{r===2?t.set(e,n):r===3?t.add(n):t[e]=n};function due(t,e){return t===e?t!==0||1/t===1/e:t!==t&&e!==e}var F_=Array.isArray,B_=t=>t instanceof Map,z_=t=>t instanceof Set,ZC=t=>typeof t=="object",Wf=t=>typeof t=="function",IT=t=>typeof t=="boolean",pl=t=>t.copy_||t.base_,JC=t=>t.modified_?t.copy_:t.base_;function b1(t,e){if(B_(t))return new Map(t);if(z_(t))return new Set(t);if(F_(t))return Array[U_].slice.call(t);const n=tB(t);if(e===!0||e==="class_only"&&!n){const r=Ua.getOwnPropertyDescriptors(t);delete r[Fi];let i=Reflect.ownKeys(r);for(let a=0;a<i.length;a++){const s=i[a],l=r[s];l[u0]===!1&&(l[u0]=!0,l[x1]=!0),(l.get||l.set)&&(r[s]={[x1]:!0,[u0]:!0,[px]:l[px],[ig]:t[s]})}return Ua.create(Uh(t),r)}else{const r=Uh(t);if(r!==null&&n)return{...t};const i=Ua.create(r);return Ua.assign(i,t)}}function QC(t,e=!1){return q_(t)||Ml(t)||(qg(t)>1&&Ua.defineProperties(t,{set:Iv,add:Iv,clear:Iv,delete:Iv}),Ua.freeze(t),e&&zg(t,(n,r)=>{QC(r,!0)},!1)),t}function fue(){Us(2)}var Iv={[ig]:fue};function q_(t){return t===null||!ZC(t)?!0:Ua.isFrozen(t)}var yx="MapSet",w1="Patches",nB={};function Fh(t){const e=nB[t];return e||Us(0,t),e}var hue=t=>!!nB[t],ag,rB=()=>ag,mue=(t,e)=>({drafts_:[],parent_:t,immer_:e,canAutoFreeze_:!0,unfinalizedDrafts_:0,handledSet_:new Set,processedForPatches_:new Set,mapSetPlugin_:hue(yx)?Fh(yx):void 0});function k5(t,e){e&&(t.patchPlugin_=Fh(w1),t.patches_=[],t.inversePatches_=[],t.patchListener_=e)}function E1(t){T1(t),t.drafts_.forEach(pue),t.drafts_=null}function T1(t){t===ag&&(ag=t.parent_)}var M5=t=>ag=mue(ag,t);function pue(t){const e=t[Fi];e.type_===0||e.type_===1?e.revoke_():e.revoked_=!0}function O5(t,e){e.unfinalizedDrafts_=e.drafts_.length;const n=e.drafts_[0];if(t!==void 0&&t!==n){n[Fi].modified_&&(E1(e),Us(4)),Oo(t)&&(t=j5(e,t));const{patchPlugin_:i}=e;i&&i.generateReplacementPatches_(n[Fi].base_,t,e)}else t=j5(e,n);return gue(e,t,!0),E1(e),e.patches_&&e.patchListener_(e.patches_,e.inversePatches_),t!==eB?t:void 0}function j5(t,e){if(q_(e))return e;const n=e[Fi];if(!n)return XC(e,t.handledSet_,t);if(!H_(n,t))return e;if(!n.modified_)return n.base_;if(!n.finalized_){const{callbacks_:r}=n;if(r)for(;r.length>0;)r.pop()(t);sB(n,t)}return n.copy_}function gue(t,e,n=!1){!t.parent_&&t.immer_.autoFreeze_&&t.canAutoFreeze_&&QC(e,n)}function iB(t){t.finalized_=!0,t.scope_.unfinalizedDrafts_--}var H_=(t,e)=>t.scope_===e,yue=[];function aB(t,e,n,r){const i=pl(t),a=t.type_;if(r!==void 0&&_1(i,r,a)===e){gx(i,r,n,a);return}if(!t.draftLocations_){const l=t.draftLocations_=new Map;zg(i,(c,h)=>{if(Ml(h)){const p=l.get(h)||[];p.push(c),l.set(h,p)}})}const s=t.draftLocations_.get(e)??yue;for(const l of s)gx(i,l,n,a)}function vue(t,e,n){t.callbacks_.push(function(i){var l;const a=e;if(!a||!H_(a,i))return;(l=i.mapSetPlugin_)==null||l.fixSetContents(a);const s=JC(a);aB(t,a.draft_??a,s,n),sB(a,i)})}function sB(t,e){var r;if(t.modified_&&!t.finalized_&&(t.type_===3||(((r=t.assigned_)==null?void 0:r.size)??0)>0)){const{patchPlugin_:i}=e;if(i){const a=i.getPath(t);a&&i.generatePatches_(t,a,e)}iB(t)}}function xue(t,e,n){const{scope_:r}=t;if(Ml(n)){const i=n[Fi];H_(i,r)&&i.callbacks_.push(function(){c0(t);const s=JC(i);aB(t,n,s,e)})}else Oo(n)&&t.callbacks_.push(function(){const a=pl(t);_1(a,e,t.type_)===n&&r.drafts_.length>1&&(t.assigned_.get(e)??!1)===!0&&t.copy_&&XC(_1(t.copy_,e,t.type_),r.handledSet_,r)})}function XC(t,e,n){return!n.immer_.autoFreeze_&&n.unfinalizedDrafts_<1||Ml(t)||e.has(t)||!Oo(t)||q_(t)||(e.add(t),zg(t,(r,i)=>{if(Ml(i)){const a=i[Fi];if(H_(a,n)){const s=JC(a);gx(t,r,s,t.type_),iB(a)}}else Oo(i)&&XC(i,e,n)})),t}function _ue(t,e){const n=F_(t),r={type_:n?1:0,scope_:e?e.scope_:rB(),modified_:!1,finalized_:!1,assigned_:void 0,parent_:e,base_:t,draft_:null,copy_:null,revoke_:null,isManual_:!1,callbacks_:void 0};let i=r,a=eI;n&&(i=[r],a=sg);const{revoke:s,proxy:l}=Proxy.revocable(i,a);return r.draft_=l,r.revoke_=s,[l,r]}var eI={get(t,e){if(e===Fi)return t;const n=pl(t);if(!R5(n,e,t.type_))return bue(t,n,e);const r=n[e];if(t.finalized_||!Oo(r))return r;if(r===NT(t.base_,e)){c0(t);const i=t.type_===1?+e:e,a=A1(t.scope_,r,t,i);return t.copy_[i]=a}return r},has(t,e){return e in pl(t)},ownKeys(t){return Reflect.ownKeys(pl(t))},set(t,e,n){const r=oB(pl(t),e);if(r!=null&&r.set)return r.set.call(t.draft_,n),!0;if(!t.modified_){const i=NT(pl(t),e),a=i==null?void 0:i[Fi];if(a&&a.base_===n)return t.copy_[e]=n,t.assigned_.set(e,!1),!0;if(due(n,i)&&(n!==void 0||R5(t.base_,e,t.type_)))return!0;c0(t),S1(t)}return t.copy_[e]===n&&(n!==void 0||e in t.copy_)||Number.isNaN(n)&&Number.isNaN(t.copy_[e])||(t.copy_[e]=n,t.assigned_.set(e,!0),xue(t,e,n)),!0},deleteProperty(t,e){return c0(t),NT(t.base_,e)!==void 0||e in t.base_?(t.assigned_.set(e,!1),S1(t)):t.assigned_.delete(e),t.copy_&&delete t.copy_[e],!0},getOwnPropertyDescriptor(t,e){const n=pl(t),r=Reflect.getOwnPropertyDescriptor(n,e);return r&&{[u0]:!0,[x1]:t.type_!==1||e!=="length",[px]:r[px],[ig]:n[e]}},defineProperty(){Us(11)},getPrototypeOf(t){return Uh(t.base_)},setPrototypeOf(){Us(12)}},sg={};zg(eI,(t,e)=>{sg[t]=function(){const n=arguments;return n[0]=n[0][0],e.apply(this,n)}});sg.deleteProperty=function(t,e){return sg.set.call(this,t,e,void 0)};sg.set=function(t,e,n){return eI.set.call(this,t[0],e,n,t[0])};function NT(t,e){const n=t[Fi];return(n?pl(n):t)[e]}function bue(t,e,n){var i;const r=oB(e,n);return r?ig in r?r[ig]:(i=r.get)==null?void 0:i.call(t.draft_):void 0}function oB(t,e){if(!(e in t))return;let n=Uh(t);for(;n;){const r=Object.getOwnPropertyDescriptor(n,e);if(r)return r;n=Uh(n)}}function S1(t){t.modified_||(t.modified_=!0,t.parent_&&S1(t.parent_))}function c0(t){t.copy_||(t.assigned_=new Map,t.copy_=b1(t.base_,t.scope_.immer_.useStrictShallowCopy_))}var wue=class{constructor(e){this.autoFreeze_=!0,this.useStrictShallowCopy_=!1,this.useStrictIteration_=!1,this.produce=(n,r,i)=>{if(Wf(n)&&!Wf(r)){const s=r;r=n;const l=this;return function(h=s,...p){return l.produce(h,g=>r.call(this,g,...p))}}Wf(r)||Us(6),i!==void 0&&!Wf(i)&&Us(7);let a;if(Oo(n)){const s=M5(this),l=A1(s,n,void 0);let c=!0;try{a=r(l),c=!1}finally{c?E1(s):T1(s)}return k5(s,i),O5(a,s)}else if(!n||!ZC(n)){if(a=r(n),a===void 0&&(a=n),a===eB&&(a=void 0),this.autoFreeze_&&QC(a,!0),i){const s=[],l=[];Fh(w1).generateReplacementPatches_(n,a,{patches_:s,inversePatches_:l}),i(s,l)}return a}else Us(1,n)},this.produceWithPatches=(n,r)=>{if(Wf(n))return(l,...c)=>this.produceWithPatches(l,h=>n(h,...c));let i,a;return[this.produce(n,r,(l,c)=>{i=l,a=c}),i,a]},IT(e==null?void 0:e.autoFreeze)&&this.setAutoFreeze(e.autoFreeze),IT(e==null?void 0:e.useStrictShallowCopy)&&this.setUseStrictShallowCopy(e.useStrictShallowCopy),IT(e==null?void 0:e.useStrictIteration)&&this.setUseStrictIteration(e.useStrictIteration)}createDraft(e){Oo(e)||Us(8),Ml(e)&&(e=Hs(e));const n=M5(this),r=A1(n,e,void 0);return r[Fi].isManual_=!0,T1(n),r}finishDraft(e,n){const r=e&&e[Fi];(!r||!r.isManual_)&&Us(9);const{scope_:i}=r;return k5(i,n),O5(void 0,i)}setAutoFreeze(e){this.autoFreeze_=e}setUseStrictShallowCopy(e){this.useStrictShallowCopy_=e}setUseStrictIteration(e){this.useStrictIteration_=e}shouldUseStrictIteration(){return this.useStrictIteration_}applyPatches(e,n){let r;for(r=n.length-1;r>=0;r--){const a=n[r];if(a.path.length===0&&a.op==="replace"){e=a.value;break}}r>-1&&(n=n.slice(r+1));const i=Fh(w1).applyPatches_;return Ml(e)?i(e,n):this.produce(e,a=>i(a,n))}};function A1(t,e,n,r){const[i,a]=B_(e)?Fh(yx).proxyMap_(e,n):z_(e)?Fh(yx).proxySet_(e,n):_ue(e,n);return((n==null?void 0:n.scope_)??rB()).drafts_.push(i),a.callbacks_=(n==null?void 0:n.callbacks_)??[],a.key_=r,n&&r!==void 0?vue(n,a,r):a.callbacks_.push(function(c){var p;(p=c.mapSetPlugin_)==null||p.fixSetContents(a);const{patchPlugin_:h}=c;a.modified_&&h&&h.generatePatches_(a,[],c)}),i}function Hs(t){return Ml(t)||Us(10,t),lB(t)}function lB(t){if(!Oo(t)||q_(t))return t;const e=t[Fi];let n,r=!0;if(e){if(!e.modified_)return e.base_;e.finalized_=!0,n=b1(t,e.scope_.immer_.useStrictShallowCopy_),r=e.scope_.immer_.shouldUseStrictIteration()}else n=b1(t,!0);return zg(n,(i,a)=>{gx(n,i,lB(a))},r),e&&(e.finalized_=!1),n}var Eue=new wue,uB=Eue.produce;function cB(t){return({dispatch:n,getState:r})=>i=>a=>typeof a=="function"?a(n,r,t):i(a)}var Tue=cB(),Sue=cB,Aue=typeof window<"u"&&window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__?window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__:function(){if(arguments.length!==0)return typeof arguments[0]=="object"?hx:hx.apply(null,arguments)};function gs(t,e){function n(...r){if(e){let i=e(...r);if(!i)throw new Error(za(0));return{type:t,payload:i.payload,..."meta"in i&&{meta:i.meta},..."error"in i&&{error:i.error}}}return{type:t,payload:r[0]}}return n.toString=()=>`${t}`,n.type=t,n.match=r=>XF(r)&&r.type===t,n}var dB=class wp extends Array{constructor(...e){super(...e),Object.setPrototypeOf(this,wp.prototype)}static get[Symbol.species](){return wp}concat(...e){return super.concat.apply(this,e)}prepend(...e){return e.length===1&&Array.isArray(e[0])?new wp(...e[0].concat(this)):new wp(...e.concat(this))}};function L5(t){return Oo(t)?uB(t,()=>{}):t}function Nv(t,e,n){return t.has(e)?t.get(e):t.set(e,n(e)).get(e)}function Cue(t){return typeof t=="boolean"}var Iue=()=>function(e){const{thunk:n=!0,immutableCheck:r=!0,serializableCheck:i=!0,actionCreatorCheck:a=!0}=e??{};let s=new dB;return n&&(Cue(n)?s.push(Tue):s.push(Sue(n.extraArgument))),s},fB="RTK_autoBatch",Mn=()=>t=>({payload:t,meta:{[fB]:!0}}),V5=t=>e=>{setTimeout(e,t)},hB=(t={type:"raf"})=>e=>(...n)=>{const r=e(...n);let i=!0,a=!1,s=!1;const l=new Set,c=t.type==="tick"?queueMicrotask:t.type==="raf"?typeof window<"u"&&window.requestAnimationFrame?window.requestAnimationFrame:V5(10):t.type==="callback"?t.queueNotification:V5(t.timeout),h=()=>{s=!1,a&&(a=!1,l.forEach(p=>p()))};return Object.assign({},r,{subscribe(p){const g=()=>i&&p(),x=r.subscribe(g);return l.add(p),()=>{x(),l.delete(p)}},dispatch(p){var g;try{return i=!((g=p==null?void 0:p.meta)!=null&&g[fB]),a=!i,a&&(s||(s=!0,c(h))),r.dispatch(p)}finally{i=!0}}})},Nue=t=>function(n){const{autoBatch:r=!0}=n??{};let i=new dB(t);return r&&i.push(hB(typeof r=="object"?r:void 0)),i};function Pue(t){const e=Iue(),{reducer:n=void 0,middleware:r,devTools:i=!0,preloadedState:a=void 0,enhancers:s=void 0}=t||{};let l;if(typeof n=="function")l=n;else if(YC(n))l=QF(n);else throw new Error(za(1));let c;typeof r=="function"?c=r(e):c=e();let h=hx;i&&(h=Aue({trace:!1,...typeof i=="object"&&i}));const p=uue(...c),g=Nue(p);let x=typeof s=="function"?s(g):g();const b=h(...x);return JF(l,a,b)}function mB(t){const e={},n=[];let r;const i={addCase(a,s){const l=typeof a=="string"?a:a.type;if(!l)throw new Error(za(28));if(l in e)throw new Error(za(29));return e[l]=s,i},addAsyncThunk(a,s){return s.pending&&(e[a.pending.type]=s.pending),s.rejected&&(e[a.rejected.type]=s.rejected),s.fulfilled&&(e[a.fulfilled.type]=s.fulfilled),s.settled&&n.push({matcher:a.settled,reducer:s.settled}),i},addMatcher(a,s){return n.push({matcher:a,reducer:s}),i},addDefaultCase(a){return r=a,i}};return t(i),[e,n,r]}function Due(t){return typeof t=="function"}function Rue(t,e){let[n,r,i]=mB(e),a;if(Due(t))a=()=>L5(t());else{const l=L5(t);a=()=>l}function s(l=a(),c){let h=[n[c.type],...r.filter(({matcher:p})=>p(c)).map(({reducer:p})=>p)];return h.filter(p=>!!p).length===0&&(h=[i]),h.reduce((p,g)=>{if(g)if(Ml(p)){const b=g(p,c);return b===void 0?p:b}else{if(Oo(p))return uB(p,x=>g(x,c));{const x=g(p,c);if(x===void 0){if(p===null)return p;throw Error("A case reducer on a non-draftable value must not return undefined")}return x}}return p},l)}return s.getInitialState=a,s}var kue="ModuleSymbhasOwnPr-0123456789ABCDEFGHNRVfgctiUvz_KqYTJkLxpZXIjQW",Mue=(t=21)=>{let e="",n=t;for(;n--;)e+=kue[Math.random()*64|0];return e},Oue=Symbol.for("rtk-slice-createasyncthunk");function jue(t,e){return`${t}/${e}`}function Lue({creators:t}={}){var n;const e=(n=t==null?void 0:t.asyncThunk)==null?void 0:n[Oue];return function(i){const{name:a,reducerPath:s=a}=i;if(!a)throw new Error(za(11));const l=(typeof i.reducers=="function"?i.reducers(Uue()):i.reducers)||{},c=Object.keys(l),h={sliceCaseReducersByName:{},sliceCaseReducersByType:{},actionCreators:{},sliceMatchers:[]},p={addCase(q,$){const H=typeof q=="string"?q:q.type;if(!H)throw new Error(za(12));if(H in h.sliceCaseReducersByType)throw new Error(za(13));return h.sliceCaseReducersByType[H]=$,p},addMatcher(q,$){return h.sliceMatchers.push({matcher:q,reducer:$}),p},exposeAction(q,$){return h.actionCreators[q]=$,p},exposeCaseReducer(q,$){return h.sliceCaseReducersByName[q]=$,p}};c.forEach(q=>{const $=l[q],H={reducerName:q,type:jue(a,q),createNotation:typeof i.reducers=="function"};Bue($)?que(H,$,p,e):Fue(H,$,p)});function g(){const[q={},$=[],H=void 0]=typeof i.extraReducers=="function"?mB(i.extraReducers):[i.extraReducers],U={...q,...h.sliceCaseReducersByType};return Rue(i.initialState,z=>{for(let B in U)z.addCase(B,U[B]);for(let B of h.sliceMatchers)z.addMatcher(B.matcher,B.reducer);for(let B of $)z.addMatcher(B.matcher,B.reducer);H&&z.addDefaultCase(H)})}const x=q=>q,b=new Map,C=new WeakMap;let A;function D(q,$){return A||(A=g()),A(q,$)}function R(){return A||(A=g()),A.getInitialState()}function j(q,$=!1){function H(z){let B=z[q];return typeof B>"u"&&$&&(B=Nv(C,H,R)),B}function U(z=x){const B=Nv(b,$,()=>new WeakMap);return Nv(B,z,()=>{const Z={};for(const[K,J]of Object.entries(i.selectors??{}))Z[K]=Vue(J,z,()=>Nv(C,z,R),$);return Z})}return{reducerPath:q,getSelectors:U,get selectors(){return U(H)},selectSlice:H}}const O={name:a,reducer:D,actions:h.actionCreators,caseReducers:h.sliceCaseReducersByName,getInitialState:R,...j(s),injectInto(q,{reducerPath:$,...H}={}){const U=$??s;return q.inject({reducerPath:U,reducer:D},H),{...O,...j(U,!0)}}};return O}}function Vue(t,e,n,r){function i(a,...s){let l=e(a);return typeof l>"u"&&r&&(l=n()),t(l,...s)}return i.unwrapped=t,i}var ma=Lue();function Uue(){function t(e,n){return{_reducerDefinitionType:"asyncThunk",payloadCreator:e,...n}}return t.withTypes=()=>t,{reducer(e){return Object.assign({[e.name](...n){return e(...n)}}[e.name],{_reducerDefinitionType:"reducer"})},preparedReducer(e,n){return{_reducerDefinitionType:"reducerWithPrepare",prepare:e,reducer:n}},asyncThunk:t}}function Fue({type:t,reducerName:e,createNotation:n},r,i){let a,s;if("reducer"in r){if(n&&!zue(r))throw new Error(za(17));a=r.reducer,s=r.prepare}else a=r;i.addCase(t,a).exposeCaseReducer(e,a).exposeAction(e,s?gs(t,s):gs(t))}function Bue(t){return t._reducerDefinitionType==="asyncThunk"}function zue(t){return t._reducerDefinitionType==="reducerWithPrepare"}function que({type:t,reducerName:e},n,r,i){if(!i)throw new Error(za(18));const{payloadCreator:a,fulfilled:s,pending:l,rejected:c,settled:h,options:p}=n,g=i(t,a,p);r.exposeAction(e,g),s&&r.addCase(g.fulfilled,s),l&&r.addCase(g.pending,l),c&&r.addCase(g.rejected,c),h&&r.addMatcher(g.settled,h),r.exposeCaseReducer(e,{fulfilled:s||Pv,pending:l||Pv,rejected:c||Pv,settled:h||Pv})}function Pv(){}var Hue="task",pB="listener",gB="completed",tI="cancelled",Gue=`task-${tI}`,$ue=`task-${gB}`,C1=`${pB}-${tI}`,Kue=`${pB}-${gB}`,G_=class{constructor(t){uE(this,"name","TaskAbortError");uE(this,"message");this.code=t,this.message=`${Hue} ${tI} (reason: ${t})`}},nI=(t,e)=>{if(typeof t!="function")throw new TypeError(za(32))},vx=()=>{},yB=(t,e=vx)=>(t.catch(e),t),vB=(t,e)=>(t.addEventListener("abort",e,{once:!0}),()=>t.removeEventListener("abort",e)),wd=(t,e)=>{const n=t.signal;n.aborted||("reason"in n||Object.defineProperty(n,"reason",{enumerable:!0,value:e,configurable:!0,writable:!0}),t.abort(e))},Ed=t=>{if(t.aborted){const{reason:e}=t;throw new G_(e)}};function xB(t,e){let n=vx;return new Promise((r,i)=>{const a=()=>i(new G_(t.reason));if(t.aborted){a();return}n=vB(t,a),e.finally(()=>n()).then(r,i)}).finally(()=>{n=vx})}var Wue=async(t,e)=>{try{return await Promise.resolve(),{status:"ok",value:await t()}}catch(n){return{status:n instanceof G_?"cancelled":"rejected",error:n}}finally{e==null||e()}},xx=t=>e=>yB(xB(t,e).then(n=>(Ed(t),n))),_B=t=>{const e=xx(t);return n=>e(new Promise(r=>setTimeout(r,n)))},{assign:dh}=Object,U5={},$_="listenerMiddleware",Yue=(t,e)=>{const n=r=>vB(t,()=>wd(r,t.reason));return(r,i)=>{nI(r);const a=new AbortController;n(a);const s=Wue(async()=>{Ed(t),Ed(a.signal);const l=await r({pause:xx(a.signal),delay:_B(a.signal),signal:a.signal});return Ed(a.signal),l},()=>wd(a,$ue));return i!=null&&i.autoJoin&&e.push(s.catch(vx)),{result:xx(t)(s),cancel(){wd(a,Gue)}}}},Zue=(t,e)=>{const n=async(r,i)=>{Ed(e);let a=()=>{};const l=[new Promise((c,h)=>{let p=t({predicate:r,effect:(g,x)=>{x.unsubscribe(),c([g,x.getState(),x.getOriginalState()])}});a=()=>{p(),h()}})];i!=null&&l.push(new Promise(c=>setTimeout(c,i,null)));try{const c=await xB(e,Promise.race(l));return Ed(e),c}finally{a()}};return(r,i)=>yB(n(r,i))},bB=t=>{let{type:e,actionCreator:n,matcher:r,predicate:i,effect:a}=t;if(e)i=gs(e).match;else if(n)e=n.type,i=n.match;else if(r)i=r;else if(!i)throw new Error(za(21));return nI(a),{predicate:i,type:e,effect:a}},wB=dh(t=>{const{type:e,predicate:n,effect:r}=bB(t);return{id:Mue(),effect:r,type:e,predicate:n,pending:new Set,unsubscribe:()=>{throw new Error(za(22))}}},{withTypes:()=>wB}),F5=(t,e)=>{const{type:n,effect:r,predicate:i}=bB(e);return Array.from(t.values()).find(a=>(typeof n=="string"?a.type===n:a.predicate===i)&&a.effect===r)},I1=t=>{t.pending.forEach(e=>{wd(e,C1)})},Jue=(t,e)=>()=>{for(const n of e.keys())I1(n);t.clear()},B5=(t,e,n)=>{try{t(e,n)}catch(r){setTimeout(()=>{throw r},0)}},EB=dh(gs(`${$_}/add`),{withTypes:()=>EB}),Que=gs(`${$_}/removeAll`),TB=dh(gs(`${$_}/remove`),{withTypes:()=>TB}),Xue=(...t)=>{console.error(`${$_}/error`,...t)},Hg=(t={})=>{const e=new Map,n=new Map,r=b=>{const C=n.get(b)??0;n.set(b,C+1)},i=b=>{const C=n.get(b)??1;C===1?n.delete(b):n.set(b,C-1)},{extra:a,onError:s=Xue}=t;nI(s);const l=b=>(b.unsubscribe=()=>e.delete(b.id),e.set(b.id,b),C=>{b.unsubscribe(),C!=null&&C.cancelActive&&I1(b)}),c=b=>{const C=F5(e,b)??wB(b);return l(C)};dh(c,{withTypes:()=>c});const h=b=>{const C=F5(e,b);return C&&(C.unsubscribe(),b.cancelActive&&I1(C)),!!C};dh(h,{withTypes:()=>h});const p=async(b,C,A,D)=>{const R=new AbortController,j=Zue(c,R.signal),O=[];try{b.pending.add(R),r(b),await Promise.resolve(b.effect(C,dh({},A,{getOriginalState:D,condition:(q,$)=>j(q,$).then(Boolean),take:j,delay:_B(R.signal),pause:xx(R.signal),extra:a,signal:R.signal,fork:Yue(R.signal,O),unsubscribe:b.unsubscribe,subscribe:()=>{e.set(b.id,b)},cancelActiveListeners:()=>{b.pending.forEach((q,$,H)=>{q!==R&&(wd(q,C1),H.delete(q))})},cancel:()=>{wd(R,C1),b.pending.delete(R)},throwIfCancelled:()=>{Ed(R.signal)}})))}catch(q){q instanceof G_||B5(s,q,{raisedBy:"effect"})}finally{await Promise.all(O),wd(R,Kue),i(b),b.pending.delete(R)}},g=Jue(e,n);return{middleware:b=>C=>A=>{if(!XF(A))return C(A);if(EB.match(A))return c(A.payload);if(Que.match(A)){g();return}if(TB.match(A))return h(A.payload);let D=b.getState();const R=()=>{if(D===U5)throw new Error(za(23));return D};let j;try{if(j=C(A),e.size>0){const O=b.getState(),q=Array.from(e.values());for(const $ of q){let H=!1;try{H=$.predicate(A,O,D)}catch(U){H=!1,B5(s,U,{raisedBy:"predicate"})}H&&p($,A,b,R)}}}finally{D=U5}return j},startListening:c,stopListening:h,clearListeners:g}};function za(t){return`Minified Redux Toolkit error #${t}; visit https://redux-toolkit.js.org/Errors?code=${t} for the full message or use the non-minified dev environment for full errors. `}var ece={layoutType:"horizontal",width:0,height:0,margin:{top:5,right:5,bottom:5,left:5},scale:1},SB=ma({name:"chartLayout",initialState:ece,reducers:{setLayout(t,e){t.layoutType=e.payload},setChartSize(t,e){t.width=e.payload.width,t.height=e.payload.height},setMargin(t,e){var n,r,i,a;t.margin.top=(n=e.payload.top)!==null&&n!==void 0?n:0,t.margin.right=(r=e.payload.right)!==null&&r!==void 0?r:0,t.margin.bottom=(i=e.payload.bottom)!==null&&i!==void 0?i:0,t.margin.left=(a=e.payload.left)!==null&&a!==void 0?a:0},setScale(t,e){t.scale=e.payload}}}),{setMargin:tce,setLayout:nce,setChartSize:rce,setScale:ice}=SB.actions,ace=SB.reducer;function AB(t,e,n){return Array.isArray(t)&&t&&e+n!==0?t.slice(e,n+1):t}function z5(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function Xf(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?z5(Object(n),!0).forEach(function(r){sce(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):z5(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function sce(t,e,n){return(e=oce(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function oce(t){var e=lce(t,"string");return typeof e=="symbol"?e:e+""}function lce(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function mn(t,e,n){return Fn(t)||Fn(e)?n:ps(e)?Vd(t,e,n):typeof e=="function"?e(t):n}var uce=(t,e,n)=>{if(e&&n){var{width:r,height:i}=n,{align:a,verticalAlign:s,layout:l}=e;if((l==="vertical"||l==="horizontal"&&s==="middle")&&a!=="center"&&Je(t[a]))return Xf(Xf({},t),{},{[a]:t[a]+(r||0)});if((l==="horizontal"||l==="vertical"&&a==="center")&&s!=="middle"&&Je(t[s]))return Xf(Xf({},t),{},{[s]:t[s]+(i||0)})}return t},_c=(t,e)=>t==="horizontal"&&e==="xAxis"||t==="vertical"&&e==="yAxis"||t==="centric"&&e==="angleAxis"||t==="radial"&&e==="radiusAxis",CB=(t,e,n,r)=>{if(r)return t.map(l=>l.coordinate);var i,a,s=t.map(l=>(l.coordinate===e&&(i=!0),l.coordinate===n&&(a=!0),l.coordinate));return i||s.push(e),a||s.push(n),s},IB=(t,e,n)=>{if(!t)return null;var{duplicateDomain:r,type:i,range:a,scale:s,realScaleType:l,isCategorical:c,categoricalDomain:h,tickCount:p,ticks:g,niceTicks:x,axisType:b}=t;if(!s)return null;var C=l==="scaleBand"&&s.bandwidth?s.bandwidth()/2:2,A=i==="category"&&s.bandwidth?s.bandwidth()/C:0;if(A=b==="angleAxis"&&a&&a.length>=2?Kr(a[0]-a[1])*2*A:A,g||x){var D=(g||x||[]).map((R,j)=>{var O=r?r.indexOf(R):R;return{coordinate:s(O)+A,value:R,offset:A,index:j}});return D.filter(R=>!Ga(R.coordinate))}return c&&h?h.map((R,j)=>({coordinate:s(R)+A,value:R,index:j,offset:A})):s.ticks&&p!=null?s.ticks(p).map((R,j)=>({coordinate:s(R)+A,value:R,offset:A,index:j})):s.domain().map((R,j)=>({coordinate:s(R)+A,value:r?r[R]:R,index:j,offset:A}))},q5=1e-4,cce=t=>{var e=t.domain();if(!(!e||e.length<=2)){var n=e.length,r=t.range(),i=Math.min(r[0],r[1])-q5,a=Math.max(r[0],r[1])+q5,s=t(e[0]),l=t(e[n-1]);(s<i||s>a||l<i||l>a)&&t.domain([e[0],e[n-1]])}},dce=(t,e)=>{if(!e||e.length!==2||!Je(e[0])||!Je(e[1]))return t;var n=Math.min(e[0],e[1]),r=Math.max(e[0],e[1]),i=[t[0],t[1]];return(!Je(t[0])||t[0]<n)&&(i[0]=n),(!Je(t[1])||t[1]>r)&&(i[1]=r),i[0]>r&&(i[0]=r),i[1]<n&&(i[1]=n),i},fce=t=>{var e=t.length;if(!(e<=0))for(var n=0,r=t[0].length;n<r;++n)for(var i=0,a=0,s=0;s<e;++s){var l=Ga(t[s][n][1])?t[s][n][0]:t[s][n][1];l>=0?(t[s][n][0]=i,t[s][n][1]=i+l,i=t[s][n][1]):(t[s][n][0]=a,t[s][n][1]=a+l,a=t[s][n][1])}},hce=t=>{var e=t.length;if(!(e<=0))for(var n=0,r=t[0].length;n<r;++n)for(var i=0,a=0;a<e;++a){var s=Ga(t[a][n][1])?t[a][n][0]:t[a][n][1];s>=0?(t[a][n][0]=i,t[a][n][1]=i+s,i=t[a][n][1]):(t[a][n][0]=0,t[a][n][1]=0)}},mce={sign:fce,expand:Moe,none:Vh,silhouette:Ooe,wiggle:joe,positive:hce},pce=(t,e,n)=>{var r=mce[n],i=koe().keys(e).value((a,s)=>Number(mn(a,s,0))).order(y1).offset(r);return i(t)};function gce(t){return t==null?void 0:String(t)}function H5(t){var{axis:e,ticks:n,bandSize:r,entry:i,index:a,dataKey:s}=t;if(e.type==="category"){if(!e.allowDuplicatedCategory&&e.dataKey&&!Fn(i[e.dataKey])){var l=kF(n,"value",i[e.dataKey]);if(l)return l.coordinate+r/2}return n[a]?n[a].coordinate+r/2:null}var c=mn(i,Fn(s)?e.dataKey:s);return Fn(c)?null:e.scale(c)}var G5=t=>{var{axis:e,ticks:n,offset:r,bandSize:i,entry:a,index:s}=t;if(e.type==="category")return n[s]?n[s].coordinate+r:null;var l=mn(a,e.dataKey,e.scale.domain()[s]);return Fn(l)?null:e.scale(l)-i/2+r},yce=t=>{var{numericAxis:e}=t,n=e.scale.domain();if(e.type==="number"){var r=Math.min(n[0],n[1]),i=Math.max(n[0],n[1]);return r<=0&&i>=0?0:i<0?i:r}return n[0]},vce=t=>{var e=t.flat(2).filter(Je);return[Math.min(...e),Math.max(...e)]},xce=t=>[t[0]===1/0?0:t[0],t[1]===-1/0?0:t[1]],_ce=(t,e,n)=>{if(t!=null)return xce(Object.keys(t).reduce((r,i)=>{var a=t[i],{stackedData:s}=a,l=s.reduce((c,h)=>{var p=AB(h,e,n),g=vce(p);return[Math.min(c[0],g[0]),Math.max(c[1],g[1])]},[1/0,-1/0]);return[Math.min(l[0],r[0]),Math.max(l[1],r[1])]},[1/0,-1/0]))},$5=/^dataMin[\s]*-[\s]*([0-9]+([.]{1}[0-9]+){0,1})$/,K5=/^dataMax[\s]*\+[\s]*([0-9]+([.]{1}[0-9]+){0,1})$/,Bh=(t,e,n)=>{if(t&&t.scale&&t.scale.bandwidth){var r=t.scale.bandwidth();if(!n||r>0)return r}if(t&&e&&e.length>=2){for(var i=V_(e,p=>p.coordinate),a=1/0,s=1,l=i.length;s<l;s++){var c=i[s],h=i[s-1];a=Math.min((c.coordinate||0)-(h.coordinate||0),a)}return a===1/0?0:a}return n?void 0:0};function W5(t){var{tooltipEntrySettings:e,dataKey:n,payload:r,value:i,name:a}=t;return Xf(Xf({},e),{},{dataKey:n,payload:r,value:i,name:a})}function lm(t,e){if(t)return String(t);if(typeof e=="string")return e}var bce=(t,e)=>{if(e==="horizontal")return t.chartX;if(e==="vertical")return t.chartY},wce=(t,e)=>e==="centric"?t.angle:t.radius,$l=t=>t.layout.width,Kl=t=>t.layout.height,Ece=t=>t.layout.scale,NB=t=>t.layout.margin,K_=pe(t=>t.cartesianAxis.xAxis,t=>Object.values(t)),W_=pe(t=>t.cartesianAxis.yAxis,t=>Object.values(t)),PB="data-recharts-item-index",DB="data-recharts-item-data-key",Gg=60;function Y5(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function Dv(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?Y5(Object(n),!0).forEach(function(r){Tce(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):Y5(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function Tce(t,e,n){return(e=Sce(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function Sce(t){var e=Ace(t,"string");return typeof e=="symbol"?e:e+""}function Ace(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var Cce=t=>t.brush.height;function Ice(t){var e=W_(t);return e.reduce((n,r)=>{if(r.orientation==="left"&&!r.mirror&&!r.hide){var i=typeof r.width=="number"?r.width:Gg;return n+i}return n},0)}function Nce(t){var e=W_(t);return e.reduce((n,r)=>{if(r.orientation==="right"&&!r.mirror&&!r.hide){var i=typeof r.width=="number"?r.width:Gg;return n+i}return n},0)}function Pce(t){var e=K_(t);return e.reduce((n,r)=>r.orientation==="top"&&!r.mirror&&!r.hide?n+r.height:n,0)}function Dce(t){var e=K_(t);return e.reduce((n,r)=>r.orientation==="bottom"&&!r.mirror&&!r.hide?n+r.height:n,0)}var Rr=pe([$l,Kl,NB,Cce,Ice,Nce,Pce,Dce,YF,nue],(t,e,n,r,i,a,s,l,c,h)=>{var p={left:(n.left||0)+i,right:(n.right||0)+a},g={top:(n.top||0)+s,bottom:(n.bottom||0)+l},x=Dv(Dv({},g),p),b=x.bottom;x.bottom+=r,x=uce(x,c,h);var C=t-x.left-x.right,A=e-x.top-x.bottom;return Dv(Dv({brushBottom:b},x),{},{width:Math.max(C,0),height:Math.max(A,0)})}),Rce=pe(Rr,t=>({x:t.left,y:t.top,width:t.width,height:t.height})),rI=pe($l,Kl,(t,e)=>({x:0,y:0,width:t,height:e})),kce=N.createContext(null),ai=()=>N.useContext(kce)!=null,Y_=t=>t.brush,Z_=pe([Y_,Rr,NB],(t,e,n)=>({height:t.height,x:Je(t.x)?t.x:e.left,y:Je(t.y)?t.y:e.top+e.height+e.brushBottom-((n==null?void 0:n.bottom)||0),width:Je(t.width)?t.width:e.width})),PT={},DT={},RT={},Z5;function Mce(){return Z5||(Z5=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});function e(n,r,{signal:i,edges:a}={}){let s,l=null;const c=a!=null&&a.includes("leading"),h=a==null||a.includes("trailing"),p=()=>{l!==null&&(n.apply(s,l),s=void 0,l=null)},g=()=>{h&&p(),A()};let x=null;const b=()=>{x!=null&&clearTimeout(x),x=setTimeout(()=>{x=null,g()},r)},C=()=>{x!==null&&(clearTimeout(x),x=null)},A=()=>{C(),s=void 0,l=null},D=()=>{p()},R=function(...j){if(i!=null&&i.aborted)return;s=this,l=j;const O=x==null;b(),c&&O&&p()};return R.schedule=b,R.cancel=A,R.flush=D,i==null||i.addEventListener("abort",A,{once:!0}),R}t.debounce=e})(RT)),RT}var J5;function Oce(){return J5||(J5=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=Mce();function n(r,i=0,a={}){typeof a!="object"&&(a={});const{leading:s=!1,trailing:l=!0,maxWait:c}=a,h=Array(2);s&&(h[0]="leading"),l&&(h[1]="trailing");let p,g=null;const x=e.debounce(function(...A){p=r.apply(this,A),g=null},i,{edges:h}),b=function(...A){return c!=null&&(g===null&&(g=Date.now()),Date.now()-g>=c)?(p=r.apply(this,A),g=Date.now(),x.cancel(),x.schedule(),p):(x.apply(this,A),p)},C=()=>(x.flush(),p);return b.cancel=x.cancel,b.flush=C,b}t.debounce=n})(DT)),DT}var Q5;function jce(){return Q5||(Q5=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=Oce();function n(r,i=0,a={}){const{leading:s=!0,trailing:l=!0}=a;return e.debounce(r,i,{leading:s,maxWait:i,trailing:l})}t.throttle=n})(PT)),PT}var kT,X5;function Lce(){return X5||(X5=1,kT=jce().throttle),kT}var Vce=Lce();const Uce=Vo(Vce);var _x=function(e,n){for(var r=arguments.length,i=new Array(r>2?r-2:0),a=2;a<r;a++)i[a-2]=arguments[a];if(typeof console<"u"&&console.warn&&(n===void 0&&console.warn("LogUtils requires an error message argument"),!e))if(n===void 0)console.warn("Minified exception occurred; use the non-minified dev environment for the full error message and additional helpful warnings.");else{var s=0;console.warn(n.replace(/%s/g,()=>i[s++]))}},RB=(t,e,n)=>{var{width:r="100%",height:i="100%",aspect:a,maxHeight:s}=n,l=kl(r)?t:Number(r),c=kl(i)?e:Number(i);return a&&a>0&&(l?c=l/a:c&&(l=c*a),s&&c!=null&&c>s&&(c=s)),{calculatedWidth:l,calculatedHeight:c}},Fce={width:0,height:0,overflow:"visible"},Bce={width:0,overflowX:"visible"},zce={height:0,overflowY:"visible"},qce={},Hce=t=>{var{width:e,height:n}=t,r=kl(e),i=kl(n);return r&&i?Fce:r?Bce:i?zce:qce};function Gce(t){var{width:e,height:n,aspect:r}=t,i=e,a=n;return i===void 0&&a===void 0?(i="100%",a="100%"):i===void 0?i=r&&r>0?void 0:"100%":a===void 0&&(a=r&&r>0?void 0:"100%"),{width:i,height:a}}function Cn(t){return Number.isFinite(t)}function jo(t){return typeof t=="number"&&t>0&&Number.isFinite(t)}function N1(){return N1=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)({}).hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},N1.apply(null,arguments)}function ej(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function tj(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?ej(Object(n),!0).forEach(function(r){$ce(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):ej(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function $ce(t,e,n){return(e=Kce(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function Kce(t){var e=Wce(t,"string");return typeof e=="symbol"?e:e+""}function Wce(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var kB=N.createContext({width:-1,height:-1});function Yce(t){return jo(t.width)&&jo(t.height)}function MB(t){var{children:e,width:n,height:r}=t,i=N.useMemo(()=>({width:n,height:r}),[n,r]);return Yce(i)?N.createElement(kB.Provider,{value:i},e):null}var iI=()=>N.useContext(kB),Zce=N.forwardRef((t,e)=>{var{aspect:n,initialDimension:r={width:-1,height:-1},width:i,height:a,minWidth:s=0,minHeight:l,maxHeight:c,children:h,debounce:p=0,id:g,className:x,onResize:b,style:C={}}=t,A=N.useRef(null),D=N.useRef();D.current=b,N.useImperativeHandle(e,()=>A.current);var[R,j]=N.useState({containerWidth:r.width,containerHeight:r.height}),O=N.useCallback((z,B)=>{j(Z=>{var K=Math.round(z),J=Math.round(B);return Z.containerWidth===K&&Z.containerHeight===J?Z:{containerWidth:K,containerHeight:J}})},[]);N.useEffect(()=>{if(A.current==null||typeof ResizeObserver>"u")return Fg;var z=J=>{var G,{width:Se,height:Oe}=J[0].contentRect;O(Se,Oe),(G=D.current)===null||G===void 0||G.call(D,Se,Oe)};p>0&&(z=Uce(z,p,{trailing:!0,leading:!1}));var B=new ResizeObserver(z),{width:Z,height:K}=A.current.getBoundingClientRect();return O(Z,K),B.observe(A.current),()=>{B.disconnect()}},[O,p]);var{containerWidth:q,containerHeight:$}=R;_x(!n||n>0,"The aspect(%s) must be greater than zero.",n);var{calculatedWidth:H,calculatedHeight:U}=RB(q,$,{width:i,height:a,aspect:n,maxHeight:c});return _x(H!=null&&H>0||U!=null&&U>0,`The width(%s) and height(%s) of chart should be greater than 0,
       please check the style of container, or the props width(%s) and height(%s),
       or add a minWidth(%s) or minHeight(%s) or use aspect(%s) to control the
       height and width.`,H,U,i,a,s,l,n),N.createElement("div",{id:g?"".concat(g):void 0,className:Ft("recharts-responsive-container",x),style:tj(tj({},C),{},{width:i,height:a,minWidth:s,minHeight:l,maxHeight:c}),ref:A},N.createElement("div",{style:Hce({width:i,height:a})},N.createElement(MB,{width:H,height:U},h)))}),Lp=N.forwardRef((t,e)=>{var n=iI();if(jo(n.width)&&jo(n.height))return t.children;var{width:r,height:i}=Gce({width:t.width,height:t.height,aspect:t.aspect}),{calculatedWidth:a,calculatedHeight:s}=RB(void 0,void 0,{width:r,height:i,aspect:t.aspect,maxHeight:t.maxHeight});return Je(a)&&Je(s)?N.createElement(MB,{width:a,height:s},t.children):N.createElement(Zce,N1({},t,{width:r,height:i,ref:e}))});function OB(t){if(t)return{x:t.x,y:t.y,upperWidth:"upperWidth"in t?t.upperWidth:t.width,lowerWidth:"lowerWidth"in t?t.lowerWidth:t.width,width:t.width,height:t.height}}var $g=()=>{var t,e=ai(),n=$e(Rce),r=$e(Z_),i=(t=$e(Y_))===null||t===void 0?void 0:t.padding;return!e||!r||!i?n:{width:r.width-i.left-i.right,height:r.height-i.top-i.bottom,x:i.left,y:i.top}},Jce={top:0,bottom:0,left:0,right:0,width:0,height:0,brushBottom:0},jB=()=>{var t;return(t=$e(Rr))!==null&&t!==void 0?t:Jce},aI=()=>$e($l),sI=()=>$e(Kl),Qce=()=>$e(t=>t.layout.margin),Lt=t=>t.layout.layoutType,Kg=()=>$e(Lt),Xce=()=>{var t=Kg();return t!==void 0},J_=t=>{var e=gn(),n=ai(),{width:r,height:i}=t,a=iI(),s=r,l=i;return a&&(s=a.width>0?a.width:r,l=a.height>0?a.height:i),N.useEffect(()=>{!n&&jo(s)&&jo(l)&&e(rce({width:s,height:l}))},[e,n,s,l]),null},LB=Symbol.for("immer-nothing"),nj=Symbol.for("immer-draftable"),$a=Symbol.for("immer-state");function Fs(t,...e){throw new Error(`[Immer] minified error nr: ${t}. Full error at: https://bit.ly/3cXEKWf`)}var og=Object.getPrototypeOf;function zh(t){return!!t&&!!t[$a]}function Ud(t){var e;return t?VB(t)||Array.isArray(t)||!!t[nj]||!!((e=t.constructor)!=null&&e[nj])||Wg(t)||X_(t):!1}var ede=Object.prototype.constructor.toString(),rj=new WeakMap;function VB(t){if(!t||typeof t!="object")return!1;const e=Object.getPrototypeOf(t);if(e===null||e===Object.prototype)return!0;const n=Object.hasOwnProperty.call(e,"constructor")&&e.constructor;if(n===Object)return!0;if(typeof n!="function")return!1;let r=rj.get(n);return r===void 0&&(r=Function.toString.call(n),rj.set(n,r)),r===ede}function bx(t,e,n=!0){Q_(t)===0?(n?Reflect.ownKeys(t):Object.keys(t)).forEach(i=>{e(i,t[i],t)}):t.forEach((r,i)=>e(i,r,t))}function Q_(t){const e=t[$a];return e?e.type_:Array.isArray(t)?1:Wg(t)?2:X_(t)?3:0}function P1(t,e){return Q_(t)===2?t.has(e):Object.prototype.hasOwnProperty.call(t,e)}function UB(t,e,n){const r=Q_(t);r===2?t.set(e,n):r===3?t.add(n):t[e]=n}function tde(t,e){return t===e?t!==0||1/t===1/e:t!==t&&e!==e}function Wg(t){return t instanceof Map}function X_(t){return t instanceof Set}function ud(t){return t.copy_||t.base_}function D1(t,e){if(Wg(t))return new Map(t);if(X_(t))return new Set(t);if(Array.isArray(t))return Array.prototype.slice.call(t);const n=VB(t);if(e===!0||e==="class_only"&&!n){const r=Object.getOwnPropertyDescriptors(t);delete r[$a];let i=Reflect.ownKeys(r);for(let a=0;a<i.length;a++){const s=i[a],l=r[s];l.writable===!1&&(l.writable=!0,l.configurable=!0),(l.get||l.set)&&(r[s]={configurable:!0,writable:!0,enumerable:l.enumerable,value:t[s]})}return Object.create(og(t),r)}else{const r=og(t);if(r!==null&&n)return{...t};const i=Object.create(r);return Object.assign(i,t)}}function oI(t,e=!1){return eb(t)||zh(t)||!Ud(t)||(Q_(t)>1&&Object.defineProperties(t,{set:Rv,add:Rv,clear:Rv,delete:Rv}),Object.freeze(t),e&&Object.values(t).forEach(n=>oI(n,!0))),t}function nde(){Fs(2)}var Rv={value:nde};function eb(t){return t===null||typeof t!="object"?!0:Object.isFrozen(t)}var rde={};function Fd(t){const e=rde[t];return e||Fs(0,t),e}var lg;function FB(){return lg}function ide(t,e){return{drafts_:[],parent_:t,immer_:e,canAutoFreeze_:!0,unfinalizedDrafts_:0}}function ij(t,e){e&&(Fd("Patches"),t.patches_=[],t.inversePatches_=[],t.patchListener_=e)}function R1(t){k1(t),t.drafts_.forEach(ade),t.drafts_=null}function k1(t){t===lg&&(lg=t.parent_)}function aj(t){return lg=ide(lg,t)}function ade(t){const e=t[$a];e.type_===0||e.type_===1?e.revoke_():e.revoked_=!0}function sj(t,e){e.unfinalizedDrafts_=e.drafts_.length;const n=e.drafts_[0];return t!==void 0&&t!==n?(n[$a].modified_&&(R1(e),Fs(4)),Ud(t)&&(t=wx(e,t),e.parent_||Ex(e,t)),e.patches_&&Fd("Patches").generateReplacementPatches_(n[$a].base_,t,e.patches_,e.inversePatches_)):t=wx(e,n,[]),R1(e),e.patches_&&e.patchListener_(e.patches_,e.inversePatches_),t!==LB?t:void 0}function wx(t,e,n){if(eb(e))return e;const r=t.immer_.shouldUseStrictIteration(),i=e[$a];if(!i)return bx(e,(a,s)=>oj(t,i,e,a,s,n),r),e;if(i.scope_!==t)return e;if(!i.modified_)return Ex(t,i.base_,!0),i.base_;if(!i.finalized_){i.finalized_=!0,i.scope_.unfinalizedDrafts_--;const a=i.copy_;let s=a,l=!1;i.type_===3&&(s=new Set(a),a.clear(),l=!0),bx(s,(c,h)=>oj(t,i,a,c,h,n,l),r),Ex(t,a,!1),n&&t.patches_&&Fd("Patches").generatePatches_(i,n,t.patches_,t.inversePatches_)}return i.copy_}function oj(t,e,n,r,i,a,s){if(i==null||typeof i!="object"&&!s)return;const l=eb(i);if(!(l&&!s)){if(zh(i)){const c=a&&e&&e.type_!==3&&!P1(e.assigned_,r)?a.concat(r):void 0,h=wx(t,i,c);if(UB(n,r,h),zh(h))t.canAutoFreeze_=!1;else return}else s&&n.add(i);if(Ud(i)&&!l){if(!t.immer_.autoFreeze_&&t.unfinalizedDrafts_<1||e&&e.base_&&e.base_[r]===i&&l)return;wx(t,i),(!e||!e.scope_.parent_)&&typeof r!="symbol"&&(Wg(n)?n.has(r):Object.prototype.propertyIsEnumerable.call(n,r))&&Ex(t,i)}}}function Ex(t,e,n=!1){!t.parent_&&t.immer_.autoFreeze_&&t.canAutoFreeze_&&oI(e,n)}function sde(t,e){const n=Array.isArray(t),r={type_:n?1:0,scope_:e?e.scope_:FB(),modified_:!1,finalized_:!1,assigned_:{},parent_:e,base_:t,draft_:null,copy_:null,revoke_:null,isManual_:!1};let i=r,a=lI;n&&(i=[r],a=ug);const{revoke:s,proxy:l}=Proxy.revocable(i,a);return r.draft_=l,r.revoke_=s,l}var lI={get(t,e){if(e===$a)return t;const n=ud(t);if(!P1(n,e))return ode(t,n,e);const r=n[e];return t.finalized_||!Ud(r)?r:r===MT(t.base_,e)?(OT(t),t.copy_[e]=O1(r,t)):r},has(t,e){return e in ud(t)},ownKeys(t){return Reflect.ownKeys(ud(t))},set(t,e,n){const r=BB(ud(t),e);if(r!=null&&r.set)return r.set.call(t.draft_,n),!0;if(!t.modified_){const i=MT(ud(t),e),a=i==null?void 0:i[$a];if(a&&a.base_===n)return t.copy_[e]=n,t.assigned_[e]=!1,!0;if(tde(n,i)&&(n!==void 0||P1(t.base_,e)))return!0;OT(t),M1(t)}return t.copy_[e]===n&&(n!==void 0||e in t.copy_)||Number.isNaN(n)&&Number.isNaN(t.copy_[e])||(t.copy_[e]=n,t.assigned_[e]=!0),!0},deleteProperty(t,e){return MT(t.base_,e)!==void 0||e in t.base_?(t.assigned_[e]=!1,OT(t),M1(t)):delete t.assigned_[e],t.copy_&&delete t.copy_[e],!0},getOwnPropertyDescriptor(t,e){const n=ud(t),r=Reflect.getOwnPropertyDescriptor(n,e);return r&&{writable:!0,configurable:t.type_!==1||e!=="length",enumerable:r.enumerable,value:n[e]}},defineProperty(){Fs(11)},getPrototypeOf(t){return og(t.base_)},setPrototypeOf(){Fs(12)}},ug={};bx(lI,(t,e)=>{ug[t]=function(){return arguments[0]=arguments[0][0],e.apply(this,arguments)}});ug.deleteProperty=function(t,e){return ug.set.call(this,t,e,void 0)};ug.set=function(t,e,n){return lI.set.call(this,t[0],e,n,t[0])};function MT(t,e){const n=t[$a];return(n?ud(n):t)[e]}function ode(t,e,n){var i;const r=BB(e,n);return r?"value"in r?r.value:(i=r.get)==null?void 0:i.call(t.draft_):void 0}function BB(t,e){if(!(e in t))return;let n=og(t);for(;n;){const r=Object.getOwnPropertyDescriptor(n,e);if(r)return r;n=og(n)}}function M1(t){t.modified_||(t.modified_=!0,t.parent_&&M1(t.parent_))}function OT(t){t.copy_||(t.copy_=D1(t.base_,t.scope_.immer_.useStrictShallowCopy_))}var lde=class{constructor(t){this.autoFreeze_=!0,this.useStrictShallowCopy_=!1,this.useStrictIteration_=!0,this.produce=(e,n,r)=>{if(typeof e=="function"&&typeof n!="function"){const a=n;n=e;const s=this;return function(c=a,...h){return s.produce(c,p=>n.call(this,p,...h))}}typeof n!="function"&&Fs(6),r!==void 0&&typeof r!="function"&&Fs(7);let i;if(Ud(e)){const a=aj(this),s=O1(e,void 0);let l=!0;try{i=n(s),l=!1}finally{l?R1(a):k1(a)}return ij(a,r),sj(i,a)}else if(!e||typeof e!="object"){if(i=n(e),i===void 0&&(i=e),i===LB&&(i=void 0),this.autoFreeze_&&oI(i,!0),r){const a=[],s=[];Fd("Patches").generateReplacementPatches_(e,i,a,s),r(a,s)}return i}else Fs(1,e)},this.produceWithPatches=(e,n)=>{if(typeof e=="function")return(s,...l)=>this.produceWithPatches(s,c=>e(c,...l));let r,i;return[this.produce(e,n,(s,l)=>{r=s,i=l}),r,i]},typeof(t==null?void 0:t.autoFreeze)=="boolean"&&this.setAutoFreeze(t.autoFreeze),typeof(t==null?void 0:t.useStrictShallowCopy)=="boolean"&&this.setUseStrictShallowCopy(t.useStrictShallowCopy),typeof(t==null?void 0:t.useStrictIteration)=="boolean"&&this.setUseStrictIteration(t.useStrictIteration)}createDraft(t){Ud(t)||Fs(8),zh(t)&&(t=ude(t));const e=aj(this),n=O1(t,void 0);return n[$a].isManual_=!0,k1(e),n}finishDraft(t,e){const n=t&&t[$a];(!n||!n.isManual_)&&Fs(9);const{scope_:r}=n;return ij(r,e),sj(void 0,r)}setAutoFreeze(t){this.autoFreeze_=t}setUseStrictShallowCopy(t){this.useStrictShallowCopy_=t}setUseStrictIteration(t){this.useStrictIteration_=t}shouldUseStrictIteration(){return this.useStrictIteration_}applyPatches(t,e){let n;for(n=e.length-1;n>=0;n--){const i=e[n];if(i.path.length===0&&i.op==="replace"){t=i.value;break}}n>-1&&(e=e.slice(n+1));const r=Fd("Patches").applyPatches_;return zh(t)?r(t,e):this.produce(t,i=>r(i,e))}};function O1(t,e){const n=Wg(t)?Fd("MapSet").proxyMap_(t,e):X_(t)?Fd("MapSet").proxySet_(t,e):sde(t,e);return(e?e.scope_:FB()).drafts_.push(n),n}function ude(t){return zh(t)||Fs(10,t),zB(t)}function zB(t){if(!Ud(t)||eb(t))return t;const e=t[$a];let n,r=!0;if(e){if(!e.modified_)return e.base_;e.finalized_=!0,n=D1(t,e.scope_.immer_.useStrictShallowCopy_),r=e.scope_.immer_.shouldUseStrictIteration()}else n=D1(t,!0);return bx(n,(i,a)=>{UB(n,i,zB(a))},r),e&&(e.finalized_=!1),n}var cde=new lde;cde.produce;var dde={settings:{layout:"horizontal",align:"center",verticalAlign:"middle",itemSorter:"value"},size:{width:0,height:0},payload:[]},qB=ma({name:"legend",initialState:dde,reducers:{setLegendSize(t,e){t.size.width=e.payload.width,t.size.height=e.payload.height},setLegendSettings(t,e){t.settings.align=e.payload.align,t.settings.layout=e.payload.layout,t.settings.verticalAlign=e.payload.verticalAlign,t.settings.itemSorter=e.payload.itemSorter},addLegendPayload:{reducer(t,e){t.payload.push(e.payload)},prepare:Mn()},replaceLegendPayload:{reducer(t,e){var{prev:n,next:r}=e.payload,i=Hs(t).payload.indexOf(n);i>-1&&(t.payload[i]=r)},prepare:Mn()},removeLegendPayload:{reducer(t,e){var n=Hs(t).payload.indexOf(e.payload);n>-1&&t.payload.splice(n,1)},prepare:Mn()}}}),{setLegendSize:lj,setLegendSettings:fde,addLegendPayload:HB,replaceLegendPayload:GB,removeLegendPayload:$B}=qB.actions,hde=qB.reducer,mde=["contextPayload"];function j1(){return j1=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)({}).hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},j1.apply(null,arguments)}function uj(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function qh(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?uj(Object(n),!0).forEach(function(r){pde(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):uj(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function pde(t,e,n){return(e=gde(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function gde(t){var e=yde(t,"string");return typeof e=="symbol"?e:e+""}function yde(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function vde(t,e){if(t==null)return{};var n,r,i=xde(t,e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);for(r=0;r<a.length;r++)n=a[r],e.indexOf(n)===-1&&{}.propertyIsEnumerable.call(t,n)&&(i[n]=t[n])}return i}function xde(t,e){if(t==null)return{};var n={};for(var r in t)if({}.hasOwnProperty.call(t,r)){if(e.indexOf(r)!==-1)continue;n[r]=t[r]}return n}function _de(t){return t.value}function bde(t){var{contextPayload:e}=t,n=vde(t,mde),r=GF(e,t.payloadUniqBy,_de),i=qh(qh({},n),{},{payload:r});return N.isValidElement(t.content)?N.cloneElement(t.content,i):typeof t.content=="function"?N.createElement(t.content,i):N.createElement(dle,i)}function wde(t,e,n,r,i,a){var{layout:s,align:l,verticalAlign:c}=e,h,p;return(!t||(t.left===void 0||t.left===null)&&(t.right===void 0||t.right===null))&&(l==="center"&&s==="vertical"?h={left:((r||0)-a.width)/2}:h=l==="right"?{right:n&&n.right||0}:{left:n&&n.left||0}),(!t||(t.top===void 0||t.top===null)&&(t.bottom===void 0||t.bottom===null))&&(c==="middle"?p={top:((i||0)-a.height)/2}:p=c==="bottom"?{bottom:n&&n.bottom||0}:{top:n&&n.top||0}),qh(qh({},h),p)}function Ede(t){var e=gn();return N.useEffect(()=>{e(fde(t))},[e,t]),null}function Tde(t){var e=gn();return N.useEffect(()=>(e(lj(t)),()=>{e(lj({width:0,height:0}))}),[e,t]),null}function Sde(t,e,n,r){return t==="vertical"&&Je(e)?{height:e}:t==="horizontal"?{width:n||r}:null}var Ade={align:"center",iconSize:14,itemSorter:"value",layout:"horizontal",verticalAlign:"bottom"};function fh(t){var e=dr(t,Ade),n=aue(),r=roe(),i=Qce(),{width:a,height:s,wrapperStyle:l,portal:c}=e,[h,p]=ZF([n]),g=aI(),x=sI();if(g==null||x==null)return null;var b=g-((i==null?void 0:i.left)||0)-((i==null?void 0:i.right)||0),C=Sde(e.layout,s,a,b),A=c?l:qh(qh({position:"absolute",width:(C==null?void 0:C.width)||a||"auto",height:(C==null?void 0:C.height)||s||"auto"},wde(l,e,i,g,x,h)),l),D=c??r;if(D==null||n==null)return null;var R=N.createElement("div",{className:"recharts-legend-wrapper",style:A,ref:p},N.createElement(Ede,{layout:e.layout,align:e.align,verticalAlign:e.verticalAlign,itemSorter:e.itemSorter}),!c&&N.createElement(Tde,{width:h.width,height:h.height}),N.createElement(bde,j1({},e,C,{margin:i,chartWidth:g,chartHeight:x,contextPayload:n})));return M_.createPortal(R,D)}fh.displayName="Legend";function L1(){return L1=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)({}).hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},L1.apply(null,arguments)}function cj(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function jT(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?cj(Object(n),!0).forEach(function(r){Cde(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):cj(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function Cde(t,e,n){return(e=Ide(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function Ide(t){var e=Nde(t,"string");return typeof e=="symbol"?e:e+""}function Nde(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function Pde(t){return Array.isArray(t)&&ps(t[0])&&ps(t[1])?t.join(" ~ "):t}var Dde=t=>{var{separator:e=" : ",contentStyle:n={},itemStyle:r={},labelStyle:i={},payload:a,formatter:s,itemSorter:l,wrapperClassName:c,labelClassName:h,label:p,labelFormatter:g,accessibilityLayer:x=!1}=t,b=()=>{if(a&&a.length){var $={padding:0,margin:0},H=(l?V_(a,l):a).map((U,z)=>{if(U.type==="none")return null;var B=U.formatter||s||Pde,{value:Z,name:K}=U,J=Z,G=K;if(B){var Se=B(Z,K,U,z,a);if(Array.isArray(Se))[J,G]=Se;else if(Se!=null)J=Se;else return null}var Oe=jT({display:"block",paddingTop:4,paddingBottom:4,color:U.color||"#000"},r);return N.createElement("li",{className:"recharts-tooltip-item",key:"tooltip-item-".concat(z),style:Oe},ps(G)?N.createElement("span",{className:"recharts-tooltip-item-name"},G):null,ps(G)?N.createElement("span",{className:"recharts-tooltip-item-separator"},e):null,N.createElement("span",{className:"recharts-tooltip-item-value"},J),N.createElement("span",{className:"recharts-tooltip-item-unit"},U.unit||""))});return N.createElement("ul",{className:"recharts-tooltip-item-list",style:$},H)}return null},C=jT({margin:0,padding:10,backgroundColor:"#fff",border:"1px solid #ccc",whiteSpace:"nowrap"},n),A=jT({margin:0},i),D=!Fn(p),R=D?p:"",j=Ft("recharts-default-tooltip",c),O=Ft("recharts-tooltip-label",h);D&&g&&a!==void 0&&a!==null&&(R=g(p,a));var q=x?{role:"status","aria-live":"assertive"}:{};return N.createElement("div",L1({className:j,style:C},q),N.createElement("p",{className:O,style:A},N.isValidElement(R)?R:"".concat(R)),b())},lp="recharts-tooltip-wrapper",Rde={visibility:"hidden"};function kde(t){var{coordinate:e,translateX:n,translateY:r}=t;return Ft(lp,{["".concat(lp,"-right")]:Je(n)&&e&&Je(e.x)&&n>=e.x,["".concat(lp,"-left")]:Je(n)&&e&&Je(e.x)&&n<e.x,["".concat(lp,"-bottom")]:Je(r)&&e&&Je(e.y)&&r>=e.y,["".concat(lp,"-top")]:Je(r)&&e&&Je(e.y)&&r<e.y})}function dj(t){var{allowEscapeViewBox:e,coordinate:n,key:r,offsetTopLeft:i,position:a,reverseDirection:s,tooltipDimension:l,viewBox:c,viewBoxDimension:h}=t;if(a&&Je(a[r]))return a[r];var p=n[r]-l-(i>0?i:0),g=n[r]+i;if(e[r])return s[r]?p:g;var x=c[r];if(x==null)return 0;if(s[r]){var b=p,C=x;return b<C?Math.max(g,x):Math.max(p,x)}if(h==null)return 0;var A=g+l,D=x+h;return A>D?Math.max(p,x):Math.max(g,x)}function Mde(t){var{translateX:e,translateY:n,useTranslate3d:r}=t;return{transform:r?"translate3d(".concat(e,"px, ").concat(n,"px, 0)"):"translate(".concat(e,"px, ").concat(n,"px)")}}function Ode(t){var{allowEscapeViewBox:e,coordinate:n,offsetTopLeft:r,position:i,reverseDirection:a,tooltipBox:s,useTranslate3d:l,viewBox:c}=t,h,p,g;return s.height>0&&s.width>0&&n?(p=dj({allowEscapeViewBox:e,coordinate:n,key:"x",offsetTopLeft:r,position:i,reverseDirection:a,tooltipDimension:s.width,viewBox:c,viewBoxDimension:c.width}),g=dj({allowEscapeViewBox:e,coordinate:n,key:"y",offsetTopLeft:r,position:i,reverseDirection:a,tooltipDimension:s.height,viewBox:c,viewBoxDimension:c.height}),h=Mde({translateX:p,translateY:g,useTranslate3d:l})):h=Rde,{cssProperties:h,cssClasses:kde({translateX:p,translateY:g,coordinate:n})}}function fj(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function kv(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?fj(Object(n),!0).forEach(function(r){V1(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):fj(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function V1(t,e,n){return(e=jde(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function jde(t){var e=Lde(t,"string");return typeof e=="symbol"?e:e+""}function Lde(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}class Vde extends N.PureComponent{constructor(){super(...arguments),V1(this,"state",{dismissed:!1,dismissedAtCoordinate:{x:0,y:0}}),V1(this,"handleKeyDown",e=>{if(e.key==="Escape"){var n,r,i,a;this.setState({dismissed:!0,dismissedAtCoordinate:{x:(n=(r=this.props.coordinate)===null||r===void 0?void 0:r.x)!==null&&n!==void 0?n:0,y:(i=(a=this.props.coordinate)===null||a===void 0?void 0:a.y)!==null&&i!==void 0?i:0}})}})}componentDidMount(){document.addEventListener("keydown",this.handleKeyDown)}componentWillUnmount(){document.removeEventListener("keydown",this.handleKeyDown)}componentDidUpdate(){var e,n;this.state.dismissed&&(((e=this.props.coordinate)===null||e===void 0?void 0:e.x)!==this.state.dismissedAtCoordinate.x||((n=this.props.coordinate)===null||n===void 0?void 0:n.y)!==this.state.dismissedAtCoordinate.y)&&(this.state.dismissed=!1)}render(){var{active:e,allowEscapeViewBox:n,animationDuration:r,animationEasing:i,children:a,coordinate:s,hasPayload:l,isAnimationActive:c,offset:h,position:p,reverseDirection:g,useTranslate3d:x,viewBox:b,wrapperStyle:C,lastBoundingBox:A,innerRef:D,hasPortalFromProps:R}=this.props,{cssClasses:j,cssProperties:O}=Ode({allowEscapeViewBox:n,coordinate:s,offsetTopLeft:h,position:p,reverseDirection:g,tooltipBox:{height:A.height,width:A.width},useTranslate3d:x,viewBox:b}),q=R?{}:kv(kv({transition:c&&e?"transform ".concat(r,"ms ").concat(i):void 0},O),{},{pointerEvents:"none",visibility:!this.state.dismissed&&e&&l?"visible":"hidden",position:"absolute",top:0,left:0}),$=kv(kv({},q),{},{visibility:!this.state.dismissed&&e&&l?"visible":"hidden"},C);return N.createElement("div",{xmlns:"http://www.w3.org/1999/xhtml",tabIndex:-1,className:j,style:$,ref:D},a)}}var Ude=()=>!(typeof window<"u"&&window.document&&window.document.createElement&&window.setTimeout),Wd={devToolsEnabled:!1,isSsr:Ude()},KB=()=>{var t;return(t=$e(e=>e.rootProps.accessibilityLayer))!==null&&t!==void 0?t:!0};function U1(){return U1=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)({}).hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},U1.apply(null,arguments)}function hj(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function mj(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?hj(Object(n),!0).forEach(function(r){Fde(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):hj(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function Fde(t,e,n){return(e=Bde(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function Bde(t){var e=zde(t,"string");return typeof e=="symbol"?e:e+""}function zde(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var pj={curveBasisClosed:woe,curveBasisOpen:Eoe,curveBasis:boe,curveBumpX:ooe,curveBumpY:loe,curveLinearClosed:Toe,curveLinear:j_,curveMonotoneX:Soe,curveMonotoneY:Aoe,curveNatural:Coe,curveStep:Ioe,curveStepAfter:Poe,curveStepBefore:Noe},Tx=t=>Cn(t.x)&&Cn(t.y),gj=t=>t.base!=null&&Tx(t.base)&&Tx(t),up=t=>t.x,cp=t=>t.y,qde=(t,e)=>{if(typeof t=="function")return t;var n="curve".concat(Ug(t));return(n==="curveMonotone"||n==="curveBump")&&e?pj["".concat(n).concat(e==="vertical"?"Y":"X")]:pj[n]||j_},Hde=t=>{var{type:e="linear",points:n=[],baseLine:r,layout:i,connectNulls:a=!1}=t,s=qde(e,i),l=a?n.filter(Tx):n,c;if(Array.isArray(r)){var h=n.map((b,C)=>mj(mj({},b),{},{base:r[C]}));i==="vertical"?c=Sv().y(cp).x1(up).x0(b=>b.base.x):c=Sv().x(up).y1(cp).y0(b=>b.base.y);var p=c.defined(gj).curve(s),g=a?h.filter(gj):h;return p(g)}i==="vertical"&&Je(r)?c=Sv().y(cp).x1(up).x0(r):Je(r)?c=Sv().x(up).y1(cp).y0(r):c=_F().x(up).y(cp);var x=c.defined(Tx).curve(s);return x(l)},uI=t=>{var{className:e,points:n,path:r,pathRef:i}=t;if((!n||!n.length)&&!r)return null;var a=n&&n.length?Hde(t):r;return N.createElement("path",U1({},Ha(t),$C(t),{className:Ft("recharts-curve",e),d:a===null?void 0:a,ref:i}))},Gde=["x","y","top","left","width","height","className"];function F1(){return F1=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)({}).hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},F1.apply(null,arguments)}function yj(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function $de(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?yj(Object(n),!0).forEach(function(r){Kde(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):yj(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function Kde(t,e,n){return(e=Wde(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function Wde(t){var e=Yde(t,"string");return typeof e=="symbol"?e:e+""}function Yde(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function Zde(t,e){if(t==null)return{};var n,r,i=Jde(t,e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);for(r=0;r<a.length;r++)n=a[r],e.indexOf(n)===-1&&{}.propertyIsEnumerable.call(t,n)&&(i[n]=t[n])}return i}function Jde(t,e){if(t==null)return{};var n={};for(var r in t)if({}.hasOwnProperty.call(t,r)){if(e.indexOf(r)!==-1)continue;n[r]=t[r]}return n}var Qde=(t,e,n,r,i,a)=>"M".concat(t,",").concat(i,"v").concat(r,"M").concat(a,",").concat(e,"h").concat(n),Xde=t=>{var{x:e=0,y:n=0,top:r=0,left:i=0,width:a=0,height:s=0,className:l}=t,c=Zde(t,Gde),h=$de({x:e,y:n,top:r,left:i,width:a,height:s},c);return!Je(e)||!Je(n)||!Je(a)||!Je(s)||!Je(r)||!Je(i)?null:N.createElement("path",F1({},Ai(h),{className:Ft("recharts-cross",l),d:Qde(e,n,a,s,r,i)}))};function efe(t,e,n,r){var i=r/2;return{stroke:"none",fill:"#ccc",x:t==="horizontal"?e.x-i:n.left+.5,y:t==="horizontal"?n.top+.5:e.y-i,width:t==="horizontal"?r:n.width-1,height:t==="horizontal"?n.height-1:r}}function vj(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function xj(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?vj(Object(n),!0).forEach(function(r){tfe(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):vj(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function tfe(t,e,n){return(e=nfe(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function nfe(t){var e=rfe(t,"string");return typeof e=="symbol"?e:e+""}function rfe(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var ife=t=>t.replace(/([A-Z])/g,e=>"-".concat(e.toLowerCase())),WB=(t,e,n)=>t.map(r=>"".concat(ife(r)," ").concat(e,"ms ").concat(n)).join(","),afe=(t,e)=>[Object.keys(t),Object.keys(e)].reduce((n,r)=>n.filter(i=>r.includes(i))),cg=(t,e)=>Object.keys(e).reduce((n,r)=>xj(xj({},n),{},{[r]:t(r,e[r])}),{});function _j(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function Ir(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?_j(Object(n),!0).forEach(function(r){sfe(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):_j(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function sfe(t,e,n){return(e=ofe(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function ofe(t){var e=lfe(t,"string");return typeof e=="symbol"?e:e+""}function lfe(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var Sx=(t,e,n)=>t+(e-t)*n,B1=t=>{var{from:e,to:n}=t;return e!==n},YB=(t,e,n)=>{var r=cg((i,a)=>{if(B1(a)){var[s,l]=t(a.from,a.to,a.velocity);return Ir(Ir({},a),{},{from:s,velocity:l})}return a},e);return n<1?cg((i,a)=>B1(a)?Ir(Ir({},a),{},{velocity:Sx(a.velocity,r[i].velocity,n),from:Sx(a.from,r[i].from,n)}):a,e):YB(t,r,n-1)};function ufe(t,e,n,r,i,a){var s,l=r.reduce((x,b)=>Ir(Ir({},x),{},{[b]:{from:t[b],velocity:0,to:e[b]}}),{}),c=()=>cg((x,b)=>b.from,l),h=()=>!Object.values(l).filter(B1).length,p=null,g=x=>{s||(s=x);var b=x-s,C=b/n.dt;l=YB(n,l,C),i(Ir(Ir(Ir({},t),e),c())),s=x,h()||(p=a.setTimeout(g))};return()=>(p=a.setTimeout(g),()=>{var x;(x=p)===null||x===void 0||x()})}function cfe(t,e,n,r,i,a,s){var l=null,c=i.reduce((g,x)=>Ir(Ir({},g),{},{[x]:[t[x],e[x]]}),{}),h,p=g=>{h||(h=g);var x=(g-h)/r,b=cg((A,D)=>Sx(...D,n(x)),c);if(a(Ir(Ir(Ir({},t),e),b)),x<1)l=s.setTimeout(p);else{var C=cg((A,D)=>Sx(...D,n(1)),c);a(Ir(Ir(Ir({},t),e),C))}};return()=>(l=s.setTimeout(p),()=>{var g;(g=l)===null||g===void 0||g()})}const dfe=(t,e,n,r,i,a)=>{var s=afe(t,e);return n==null?()=>(i(Ir(Ir({},t),e)),()=>{}):n.isStepper===!0?ufe(t,e,n,s,i,a):cfe(t,e,n,r,s,i,a)};var Ax=1e-4,ZB=(t,e)=>[0,3*t,3*e-6*t,3*t-3*e+1],JB=(t,e)=>t.map((n,r)=>n*e**r).reduce((n,r)=>n+r),bj=(t,e)=>n=>{var r=ZB(t,e);return JB(r,n)},ffe=(t,e)=>n=>{var r=ZB(t,e),i=[...r.map((a,s)=>a*s).slice(1),0];return JB(i,n)},hfe=function(){for(var e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];if(n.length===1)switch(n[0]){case"linear":return[0,0,1,1];case"ease":return[.25,.1,.25,1];case"ease-in":return[.42,0,1,1];case"ease-out":return[.42,0,.58,1];case"ease-in-out":return[0,0,.58,1];default:{var i,a=n[0].split("(");if(a[0]==="cubic-bezier"&&((i=a[1])===null||i===void 0?void 0:i.split(")")[0].split(",").length)===4){var s=a[1].split(")")[0].split(",").map(l=>parseFloat(l));return[s[0],s[1],s[2],s[3]]}}}return n.length===4?n:[0,0,1,1]},mfe=(t,e,n,r)=>{var i=bj(t,n),a=bj(e,r),s=ffe(t,n),l=h=>h>1?1:h<0?0:h,c=h=>{for(var p=h>1?1:h,g=p,x=0;x<8;++x){var b=i(g)-p,C=s(g);if(Math.abs(b-p)<Ax||C<Ax)return a(g);g=l(g-b/C)}return a(g)};return c.isStepper=!1,c},wj=function(){return mfe(...hfe(...arguments))},pfe=function(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},{stiff:n=100,damping:r=8,dt:i=17}=e,a=(s,l,c)=>{var h=-(s-l)*n,p=c*r,g=c+(h-p)*i/1e3,x=c*i/1e3+s;return Math.abs(x-l)<Ax&&Math.abs(g)<Ax?[l,0]:[x,g]};return a.isStepper=!0,a.dt=i,a},gfe=t=>{if(typeof t=="string")switch(t){case"ease":case"ease-in-out":case"ease-out":case"ease-in":case"linear":return wj(t);case"spring":return pfe();default:if(t.split("(")[0]==="cubic-bezier")return wj(t)}return typeof t=="function"?t:null};function yfe(t){var e,n=()=>null,r=!1,i=null,a=s=>{if(!r){if(Array.isArray(s)){if(!s.length)return;var l=s,[c,...h]=l;if(typeof c=="number"){i=t.setTimeout(a.bind(null,h),c);return}a(c),i=t.setTimeout(a.bind(null,h));return}typeof s=="string"&&(e=s,n(e)),typeof s=="object"&&(e=s,n(e)),typeof s=="function"&&s()}};return{stop:()=>{r=!0},start:s=>{r=!1,i&&(i(),i=null),a(s)},subscribe:s=>(n=s,()=>{n=()=>null}),getTimeoutController:()=>t}}class vfe{setTimeout(e){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,r=performance.now(),i=null,a=s=>{s-r>=n?e(s):typeof requestAnimationFrame=="function"&&(i=requestAnimationFrame(a))};return i=requestAnimationFrame(a),()=>{i!=null&&cancelAnimationFrame(i)}}}function xfe(){return yfe(new vfe)}var _fe=N.createContext(xfe);function bfe(t,e){var n=N.useContext(_fe);return N.useMemo(()=>e??n(t),[t,e,n])}var wfe={begin:0,duration:1e3,easing:"ease",isActive:!0,canBegin:!0,onAnimationEnd:()=>{},onAnimationStart:()=>{}},Ej={t:0},LT={t:1};function Yg(t){var e=dr(t,wfe),{isActive:n,canBegin:r,duration:i,easing:a,begin:s,onAnimationEnd:l,onAnimationStart:c,children:h}=e,p=n==="auto"?!Wd.isSsr:n,g=bfe(e.animationId,e.animationManager),[x,b]=N.useState(p?Ej:LT),C=N.useRef(null);return N.useEffect(()=>{p||b(LT)},[p]),N.useEffect(()=>{if(!p||!r)return Fg;var A=dfe(Ej,LT,gfe(a),i,b,g.getTimeoutController()),D=()=>{C.current=A()};return g.start([c,s,D,i,l]),()=>{g.stop(),C.current&&C.current(),l()}},[p,r,i,a,s,c,l,g]),h(x.t)}function Zg(t){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"animation-",n=N.useRef(rg(e)),r=N.useRef(t);return r.current!==t&&(n.current=rg(e),r.current=t),n.current}var Efe=["radius"],Tfe=["radius"];function Tj(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function Sj(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?Tj(Object(n),!0).forEach(function(r){Sfe(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):Tj(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function Sfe(t,e,n){return(e=Afe(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function Afe(t){var e=Cfe(t,"string");return typeof e=="symbol"?e:e+""}function Cfe(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function Cx(){return Cx=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)({}).hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},Cx.apply(null,arguments)}function Aj(t,e){if(t==null)return{};var n,r,i=Ife(t,e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);for(r=0;r<a.length;r++)n=a[r],e.indexOf(n)===-1&&{}.propertyIsEnumerable.call(t,n)&&(i[n]=t[n])}return i}function Ife(t,e){if(t==null)return{};var n={};for(var r in t)if({}.hasOwnProperty.call(t,r)){if(e.indexOf(r)!==-1)continue;n[r]=t[r]}return n}var Cj=(t,e,n,r,i)=>{var a=Math.min(Math.abs(n)/2,Math.abs(r)/2),s=r>=0?1:-1,l=n>=0?1:-1,c=r>=0&&n>=0||r<0&&n<0?1:0,h;if(a>0&&i instanceof Array){for(var p=[0,0,0,0],g=0,x=4;g<x;g++)p[g]=i[g]>a?a:i[g];h="M".concat(t,",").concat(e+s*p[0]),p[0]>0&&(h+="A ".concat(p[0],",").concat(p[0],",0,0,").concat(c,",").concat(t+l*p[0],",").concat(e)),h+="L ".concat(t+n-l*p[1],",").concat(e),p[1]>0&&(h+="A ".concat(p[1],",").concat(p[1],",0,0,").concat(c,`,
        `).concat(t+n,",").concat(e+s*p[1])),h+="L ".concat(t+n,",").concat(e+r-s*p[2]),p[2]>0&&(h+="A ".concat(p[2],",").concat(p[2],",0,0,").concat(c,`,
        `).concat(t+n-l*p[2],",").concat(e+r)),h+="L ".concat(t+l*p[3],",").concat(e+r),p[3]>0&&(h+="A ".concat(p[3],",").concat(p[3],",0,0,").concat(c,`,
        `).concat(t,",").concat(e+r-s*p[3])),h+="Z"}else if(a>0&&i===+i&&i>0){var b=Math.min(a,i);h="M ".concat(t,",").concat(e+s*b,`
            A `).concat(b,",").concat(b,",0,0,").concat(c,",").concat(t+l*b,",").concat(e,`
            L `).concat(t+n-l*b,",").concat(e,`
            A `).concat(b,",").concat(b,",0,0,").concat(c,",").concat(t+n,",").concat(e+s*b,`
            L `).concat(t+n,",").concat(e+r-s*b,`
            A `).concat(b,",").concat(b,",0,0,").concat(c,",").concat(t+n-l*b,",").concat(e+r,`
            L `).concat(t+l*b,",").concat(e+r,`
            A `).concat(b,",").concat(b,",0,0,").concat(c,",").concat(t,",").concat(e+r-s*b," Z")}else h="M ".concat(t,",").concat(e," h ").concat(n," v ").concat(r," h ").concat(-n," Z");return h},Ij={x:0,y:0,width:0,height:0,radius:0,isAnimationActive:!1,isUpdateAnimationActive:!1,animationBegin:0,animationDuration:1500,animationEasing:"ease"},QB=t=>{var e=dr(t,Ij),n=N.useRef(null),[r,i]=N.useState(-1);N.useEffect(()=>{if(n.current&&n.current.getTotalLength)try{var re=n.current.getTotalLength();re&&i(re)}catch{}},[]);var{x:a,y:s,width:l,height:c,radius:h,className:p}=e,{animationEasing:g,animationDuration:x,animationBegin:b,isAnimationActive:C,isUpdateAnimationActive:A}=e,D=N.useRef(l),R=N.useRef(c),j=N.useRef(a),O=N.useRef(s),q=N.useMemo(()=>({x:a,y:s,width:l,height:c,radius:h}),[a,s,l,c,h]),$=Zg(q,"rectangle-");if(a!==+a||s!==+s||l!==+l||c!==+c||l===0||c===0)return null;var H=Ft("recharts-rectangle",p);if(!A){var U=Ai(e),{radius:z}=U,B=Aj(U,Efe);return N.createElement("path",Cx({},B,{radius:typeof h=="number"?h:void 0,className:H,d:Cj(a,s,l,c,h)}))}var Z=D.current,K=R.current,J=j.current,G=O.current,Se="0px ".concat(r===-1?1:r,"px"),Oe="".concat(r,"px 0px"),ee=WB(["strokeDasharray"],x,typeof g=="string"?g:Ij.animationEasing);return N.createElement(Yg,{animationId:$,key:$,canBegin:r>0,duration:x,easing:g,isActive:A,begin:b},re=>{var le=jn(Z,l,re),Ne=jn(K,c,re),Pe=jn(J,a,re),X=jn(G,s,re);n.current&&(D.current=le,R.current=Ne,j.current=Pe,O.current=X);var ue;C?re>0?ue={transition:ee,strokeDasharray:Oe}:ue={strokeDasharray:Se}:ue={strokeDasharray:Oe};var be=Ai(e),{radius:Ce}=be,je=Aj(be,Tfe);return N.createElement("path",Cx({},je,{radius:typeof h=="number"?h:void 0,className:H,d:Cj(Pe,X,le,Ne,h),ref:n,style:Sj(Sj({},ue),e.style)}))})};function Nj(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function Pj(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?Nj(Object(n),!0).forEach(function(r){Nfe(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):Nj(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function Nfe(t,e,n){return(e=Pfe(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function Pfe(t){var e=Dfe(t,"string");return typeof e=="symbol"?e:e+""}function Dfe(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var Ix=Math.PI/180,Rfe=t=>t*180/Math.PI,wr=(t,e,n,r)=>({x:t+Math.cos(-Ix*r)*n,y:e+Math.sin(-Ix*r)*n}),XB=function(e,n){var r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{top:0,right:0,bottom:0,left:0};return Math.min(Math.abs(e-(r.left||0)-(r.right||0)),Math.abs(n-(r.top||0)-(r.bottom||0)))/2},kfe=(t,e)=>{var{x:n,y:r}=t,{x:i,y:a}=e;return Math.sqrt((n-i)**2+(r-a)**2)},Mfe=(t,e)=>{var{x:n,y:r}=t,{cx:i,cy:a}=e,s=kfe({x:n,y:r},{x:i,y:a});if(s<=0)return{radius:s,angle:0};var l=(n-i)/s,c=Math.acos(l);return r>a&&(c=2*Math.PI-c),{radius:s,angle:Rfe(c),angleInRadian:c}},Ofe=t=>{var{startAngle:e,endAngle:n}=t,r=Math.floor(e/360),i=Math.floor(n/360),a=Math.min(r,i);return{startAngle:e-a*360,endAngle:n-a*360}},jfe=(t,e)=>{var{startAngle:n,endAngle:r}=e,i=Math.floor(n/360),a=Math.floor(r/360),s=Math.min(i,a);return t+s*360},Lfe=(t,e)=>{var{chartX:n,chartY:r}=t,{radius:i,angle:a}=Mfe({x:n,y:r},e),{innerRadius:s,outerRadius:l}=e;if(i<s||i>l||i===0)return null;var{startAngle:c,endAngle:h}=Ofe(e),p=a,g;if(c<=h){for(;p>h;)p-=360;for(;p<c;)p+=360;g=p>=c&&p<=h}else{for(;p>c;)p-=360;for(;p<h;)p+=360;g=p>=h&&p<=c}return g?Pj(Pj({},e),{},{radius:i,angle:jfe(p,e)}):null};function ez(t){var{cx:e,cy:n,radius:r,startAngle:i,endAngle:a}=t,s=wr(e,n,r,i),l=wr(e,n,r,a);return{points:[s,l],cx:e,cy:n,radius:r,startAngle:i,endAngle:a}}function z1(){return z1=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)({}).hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},z1.apply(null,arguments)}var Vfe=(t,e)=>{var n=Kr(e-t),r=Math.min(Math.abs(e-t),359.999);return n*r},Mv=t=>{var{cx:e,cy:n,radius:r,angle:i,sign:a,isExternal:s,cornerRadius:l,cornerIsExternal:c}=t,h=l*(s?1:-1)+r,p=Math.asin(l/h)/Ix,g=c?i:i+a*p,x=wr(e,n,h,g),b=wr(e,n,r,g),C=c?i-a*p:i,A=wr(e,n,h*Math.cos(p*Ix),C);return{center:x,circleTangency:b,lineTangency:A,theta:p}},tz=t=>{var{cx:e,cy:n,innerRadius:r,outerRadius:i,startAngle:a,endAngle:s}=t,l=Vfe(a,s),c=a+l,h=wr(e,n,i,a),p=wr(e,n,i,c),g="M ".concat(h.x,",").concat(h.y,`
    A `).concat(i,",").concat(i,`,0,
    `).concat(+(Math.abs(l)>180),",").concat(+(a>c),`,
    `).concat(p.x,",").concat(p.y,`
  `);if(r>0){var x=wr(e,n,r,a),b=wr(e,n,r,c);g+="L ".concat(b.x,",").concat(b.y,`
            A `).concat(r,",").concat(r,`,0,
            `).concat(+(Math.abs(l)>180),",").concat(+(a<=c),`,
            `).concat(x.x,",").concat(x.y," Z")}else g+="L ".concat(e,",").concat(n," Z");return g},Ufe=t=>{var{cx:e,cy:n,innerRadius:r,outerRadius:i,cornerRadius:a,forceCornerRadius:s,cornerIsExternal:l,startAngle:c,endAngle:h}=t,p=Kr(h-c),{circleTangency:g,lineTangency:x,theta:b}=Mv({cx:e,cy:n,radius:i,angle:c,sign:p,cornerRadius:a,cornerIsExternal:l}),{circleTangency:C,lineTangency:A,theta:D}=Mv({cx:e,cy:n,radius:i,angle:h,sign:-p,cornerRadius:a,cornerIsExternal:l}),R=l?Math.abs(c-h):Math.abs(c-h)-b-D;if(R<0)return s?"M ".concat(x.x,",").concat(x.y,`
        a`).concat(a,",").concat(a,",0,0,1,").concat(a*2,`,0
        a`).concat(a,",").concat(a,",0,0,1,").concat(-a*2,`,0
      `):tz({cx:e,cy:n,innerRadius:r,outerRadius:i,startAngle:c,endAngle:h});var j="M ".concat(x.x,",").concat(x.y,`
    A`).concat(a,",").concat(a,",0,0,").concat(+(p<0),",").concat(g.x,",").concat(g.y,`
    A`).concat(i,",").concat(i,",0,").concat(+(R>180),",").concat(+(p<0),",").concat(C.x,",").concat(C.y,`
    A`).concat(a,",").concat(a,",0,0,").concat(+(p<0),",").concat(A.x,",").concat(A.y,`
  `);if(r>0){var{circleTangency:O,lineTangency:q,theta:$}=Mv({cx:e,cy:n,radius:r,angle:c,sign:p,isExternal:!0,cornerRadius:a,cornerIsExternal:l}),{circleTangency:H,lineTangency:U,theta:z}=Mv({cx:e,cy:n,radius:r,angle:h,sign:-p,isExternal:!0,cornerRadius:a,cornerIsExternal:l}),B=l?Math.abs(c-h):Math.abs(c-h)-$-z;if(B<0&&a===0)return"".concat(j,"L").concat(e,",").concat(n,"Z");j+="L".concat(U.x,",").concat(U.y,`
      A`).concat(a,",").concat(a,",0,0,").concat(+(p<0),",").concat(H.x,",").concat(H.y,`
      A`).concat(r,",").concat(r,",0,").concat(+(B>180),",").concat(+(p>0),",").concat(O.x,",").concat(O.y,`
      A`).concat(a,",").concat(a,",0,0,").concat(+(p<0),",").concat(q.x,",").concat(q.y,"Z")}else j+="L".concat(e,",").concat(n,"Z");return j},Ffe={cx:0,cy:0,innerRadius:0,outerRadius:0,startAngle:0,endAngle:0,cornerRadius:0,forceCornerRadius:!1,cornerIsExternal:!1},nz=t=>{var e=dr(t,Ffe),{cx:n,cy:r,innerRadius:i,outerRadius:a,cornerRadius:s,forceCornerRadius:l,cornerIsExternal:c,startAngle:h,endAngle:p,className:g}=e;if(a<i||h===p)return null;var x=Ft("recharts-sector",g),b=a-i,C=Si(s,b,0,!0),A;return C>0&&Math.abs(h-p)<360?A=Ufe({cx:n,cy:r,innerRadius:i,outerRadius:a,cornerRadius:Math.min(C,b/2),forceCornerRadius:l,cornerIsExternal:c,startAngle:h,endAngle:p}):A=tz({cx:n,cy:r,innerRadius:i,outerRadius:a,startAngle:h,endAngle:p}),N.createElement("path",z1({},Ai(e),{className:x,d:A}))};function Bfe(t,e,n){if(t==="horizontal")return[{x:e.x,y:n.top},{x:e.x,y:n.top+n.height}];if(t==="vertical")return[{x:n.left,y:e.y},{x:n.left+n.width,y:e.y}];if(OF(e)){if(t==="centric"){var{cx:r,cy:i,innerRadius:a,outerRadius:s,angle:l}=e,c=wr(r,i,a,l),h=wr(r,i,s,l);return[{x:c.x,y:c.y},{x:h.x,y:h.y}]}return ez(e)}}var VT={},UT={},FT={},Dj;function zfe(){return Dj||(Dj=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=KF();function n(r){return e.isSymbol(r)?NaN:Number(r)}t.toNumber=n})(FT)),FT}var Rj;function qfe(){return Rj||(Rj=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=zfe();function n(r){return r?(r=e.toNumber(r),r===1/0||r===-1/0?(r<0?-1:1)*Number.MAX_VALUE:r===r?r:0):r===0?r:0}t.toFinite=n})(UT)),UT}var kj;function Hfe(){return kj||(kj=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=WF(),n=qfe();function r(i,a,s){s&&typeof s!="number"&&e.isIterateeCall(i,a,s)&&(a=s=void 0),i=n.toFinite(i),a===void 0?(a=i,i=0):a=n.toFinite(a),s=s===void 0?i<a?1:-1:n.toFinite(s);const l=Math.max(Math.ceil((a-i)/(s||1)),0),c=new Array(l);for(let h=0;h<l;h++)c[h]=i,i+=s;return c}t.range=r})(VT)),VT}var BT,Mj;function Gfe(){return Mj||(Mj=1,BT=Hfe().range),BT}var $fe=Gfe();const rz=Vo($fe);function ec(t,e){return t==null||e==null?NaN:t<e?-1:t>e?1:t>=e?0:NaN}function Kfe(t,e){return t==null||e==null?NaN:e<t?-1:e>t?1:e>=t?0:NaN}function cI(t){let e,n,r;t.length!==2?(e=ec,n=(l,c)=>ec(t(l),c),r=(l,c)=>t(l)-c):(e=t===ec||t===Kfe?t:Wfe,n=t,r=t);function i(l,c,h=0,p=l.length){if(h<p){if(e(c,c)!==0)return p;do{const g=h+p>>>1;n(l[g],c)<0?h=g+1:p=g}while(h<p)}return h}function a(l,c,h=0,p=l.length){if(h<p){if(e(c,c)!==0)return p;do{const g=h+p>>>1;n(l[g],c)<=0?h=g+1:p=g}while(h<p)}return h}function s(l,c,h=0,p=l.length){const g=i(l,c,h,p-1);return g>h&&r(l[g-1],c)>-r(l[g],c)?g-1:g}return{left:i,center:s,right:a}}function Wfe(){return 0}function iz(t){return t===null?NaN:+t}function*Yfe(t,e){for(let n of t)n!=null&&(n=+n)>=n&&(yield n)}const Zfe=cI(ec),Jg=Zfe.right;cI(iz).center;class Oj extends Map{constructor(e,n=Xfe){if(super(),Object.defineProperties(this,{_intern:{value:new Map},_key:{value:n}}),e!=null)for(const[r,i]of e)this.set(r,i)}get(e){return super.get(jj(this,e))}has(e){return super.has(jj(this,e))}set(e,n){return super.set(Jfe(this,e),n)}delete(e){return super.delete(Qfe(this,e))}}function jj({_intern:t,_key:e},n){const r=e(n);return t.has(r)?t.get(r):n}function Jfe({_intern:t,_key:e},n){const r=e(n);return t.has(r)?t.get(r):(t.set(r,n),n)}function Qfe({_intern:t,_key:e},n){const r=e(n);return t.has(r)&&(n=t.get(r),t.delete(r)),n}function Xfe(t){return t!==null&&typeof t=="object"?t.valueOf():t}function ehe(t=ec){if(t===ec)return az;if(typeof t!="function")throw new TypeError("compare is not a function");return(e,n)=>{const r=t(e,n);return r||r===0?r:(t(n,n)===0)-(t(e,e)===0)}}function az(t,e){return(t==null||!(t>=t))-(e==null||!(e>=e))||(t<e?-1:t>e?1:0)}const the=Math.sqrt(50),nhe=Math.sqrt(10),rhe=Math.sqrt(2);function Nx(t,e,n){const r=(e-t)/Math.max(0,n),i=Math.floor(Math.log10(r)),a=r/Math.pow(10,i),s=a>=the?10:a>=nhe?5:a>=rhe?2:1;let l,c,h;return i<0?(h=Math.pow(10,-i)/s,l=Math.round(t*h),c=Math.round(e*h),l/h<t&&++l,c/h>e&&--c,h=-h):(h=Math.pow(10,i)*s,l=Math.round(t/h),c=Math.round(e/h),l*h<t&&++l,c*h>e&&--c),c<l&&.5<=n&&n<2?Nx(t,e,n*2):[l,c,h]}function q1(t,e,n){if(e=+e,t=+t,n=+n,!(n>0))return[];if(t===e)return[t];const r=e<t,[i,a,s]=r?Nx(e,t,n):Nx(t,e,n);if(!(a>=i))return[];const l=a-i+1,c=new Array(l);if(r)if(s<0)for(let h=0;h<l;++h)c[h]=(a-h)/-s;else for(let h=0;h<l;++h)c[h]=(a-h)*s;else if(s<0)for(let h=0;h<l;++h)c[h]=(i+h)/-s;else for(let h=0;h<l;++h)c[h]=(i+h)*s;return c}function H1(t,e,n){return e=+e,t=+t,n=+n,Nx(t,e,n)[2]}function G1(t,e,n){e=+e,t=+t,n=+n;const r=e<t,i=r?H1(e,t,n):H1(t,e,n);return(r?-1:1)*(i<0?1/-i:i)}function Lj(t,e){let n;for(const r of t)r!=null&&(n<r||n===void 0&&r>=r)&&(n=r);return n}function Vj(t,e){let n;for(const r of t)r!=null&&(n>r||n===void 0&&r>=r)&&(n=r);return n}function sz(t,e,n=0,r=1/0,i){if(e=Math.floor(e),n=Math.floor(Math.max(0,n)),r=Math.floor(Math.min(t.length-1,r)),!(n<=e&&e<=r))return t;for(i=i===void 0?az:ehe(i);r>n;){if(r-n>600){const c=r-n+1,h=e-n+1,p=Math.log(c),g=.5*Math.exp(2*p/3),x=.5*Math.sqrt(p*g*(c-g)/c)*(h-c/2<0?-1:1),b=Math.max(n,Math.floor(e-h*g/c+x)),C=Math.min(r,Math.floor(e+(c-h)*g/c+x));sz(t,e,b,C,i)}const a=t[e];let s=n,l=r;for(dp(t,n,e),i(t[r],a)>0&&dp(t,n,r);s<l;){for(dp(t,s,l),++s,--l;i(t[s],a)<0;)++s;for(;i(t[l],a)>0;)--l}i(t[n],a)===0?dp(t,n,l):(++l,dp(t,l,r)),l<=e&&(n=l+1),e<=l&&(r=l-1)}return t}function dp(t,e,n){const r=t[e];t[e]=t[n],t[n]=r}function ihe(t,e,n){if(t=Float64Array.from(Yfe(t)),!(!(r=t.length)||isNaN(e=+e))){if(e<=0||r<2)return Vj(t);if(e>=1)return Lj(t);var r,i=(r-1)*e,a=Math.floor(i),s=Lj(sz(t,a).subarray(0,a+1)),l=Vj(t.subarray(a+1));return s+(l-s)*(i-a)}}function ahe(t,e,n=iz){if(!(!(r=t.length)||isNaN(e=+e))){if(e<=0||r<2)return+n(t[0],0,t);if(e>=1)return+n(t[r-1],r-1,t);var r,i=(r-1)*e,a=Math.floor(i),s=+n(t[a],a,t),l=+n(t[a+1],a+1,t);return s+(l-s)*(i-a)}}function she(t,e,n){t=+t,e=+e,n=(i=arguments.length)<2?(e=t,t=0,1):i<3?1:+n;for(var r=-1,i=Math.max(0,Math.ceil((e-t)/n))|0,a=new Array(i);++r<i;)a[r]=t+r*n;return a}function vs(t,e){switch(arguments.length){case 0:break;case 1:this.range(t);break;default:this.range(e).domain(t);break}return this}function Wl(t,e){switch(arguments.length){case 0:break;case 1:{typeof t=="function"?this.interpolator(t):this.range(t);break}default:{this.domain(t),typeof e=="function"?this.interpolator(e):this.range(e);break}}return this}const $1=Symbol("implicit");function dI(){var t=new Oj,e=[],n=[],r=$1;function i(a){let s=t.get(a);if(s===void 0){if(r!==$1)return r;t.set(a,s=e.push(a)-1)}return n[s%n.length]}return i.domain=function(a){if(!arguments.length)return e.slice();e=[],t=new Oj;for(const s of a)t.has(s)||t.set(s,e.push(s)-1);return i},i.range=function(a){return arguments.length?(n=Array.from(a),i):n.slice()},i.unknown=function(a){return arguments.length?(r=a,i):r},i.copy=function(){return dI(e,n).unknown(r)},vs.apply(i,arguments),i}function fI(){var t=dI().unknown(void 0),e=t.domain,n=t.range,r=0,i=1,a,s,l=!1,c=0,h=0,p=.5;delete t.unknown;function g(){var x=e().length,b=i<r,C=b?i:r,A=b?r:i;a=(A-C)/Math.max(1,x-c+h*2),l&&(a=Math.floor(a)),C+=(A-C-a*(x-c))*p,s=a*(1-c),l&&(C=Math.round(C),s=Math.round(s));var D=she(x).map(function(R){return C+a*R});return n(b?D.reverse():D)}return t.domain=function(x){return arguments.length?(e(x),g()):e()},t.range=function(x){return arguments.length?([r,i]=x,r=+r,i=+i,g()):[r,i]},t.rangeRound=function(x){return[r,i]=x,r=+r,i=+i,l=!0,g()},t.bandwidth=function(){return s},t.step=function(){return a},t.round=function(x){return arguments.length?(l=!!x,g()):l},t.padding=function(x){return arguments.length?(c=Math.min(1,h=+x),g()):c},t.paddingInner=function(x){return arguments.length?(c=Math.min(1,x),g()):c},t.paddingOuter=function(x){return arguments.length?(h=+x,g()):h},t.align=function(x){return arguments.length?(p=Math.max(0,Math.min(1,x)),g()):p},t.copy=function(){return fI(e(),[r,i]).round(l).paddingInner(c).paddingOuter(h).align(p)},vs.apply(g(),arguments)}function oz(t){var e=t.copy;return t.padding=t.paddingOuter,delete t.paddingInner,delete t.paddingOuter,t.copy=function(){return oz(e())},t}function ohe(){return oz(fI.apply(null,arguments).paddingInner(1))}function hI(t,e,n){t.prototype=e.prototype=n,n.constructor=t}function lz(t,e){var n=Object.create(t.prototype);for(var r in e)n[r]=e[r];return n}function Qg(){}var dg=.7,Px=1/dg,hh="\\s*([+-]?\\d+)\\s*",fg="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)\\s*",ko="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)%\\s*",lhe=/^#([0-9a-f]{3,8})$/,uhe=new RegExp(`^rgb\\(${hh},${hh},${hh}\\)$`),che=new RegExp(`^rgb\\(${ko},${ko},${ko}\\)$`),dhe=new RegExp(`^rgba\\(${hh},${hh},${hh},${fg}\\)$`),fhe=new RegExp(`^rgba\\(${ko},${ko},${ko},${fg}\\)$`),hhe=new RegExp(`^hsl\\(${fg},${ko},${ko}\\)$`),mhe=new RegExp(`^hsla\\(${fg},${ko},${ko},${fg}\\)$`),Uj={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};hI(Qg,hg,{copy(t){return Object.assign(new this.constructor,this,t)},displayable(){return this.rgb().displayable()},hex:Fj,formatHex:Fj,formatHex8:phe,formatHsl:ghe,formatRgb:Bj,toString:Bj});function Fj(){return this.rgb().formatHex()}function phe(){return this.rgb().formatHex8()}function ghe(){return uz(this).formatHsl()}function Bj(){return this.rgb().formatRgb()}function hg(t){var e,n;return t=(t+"").trim().toLowerCase(),(e=lhe.exec(t))?(n=e[1].length,e=parseInt(e[1],16),n===6?zj(e):n===3?new ha(e>>8&15|e>>4&240,e>>4&15|e&240,(e&15)<<4|e&15,1):n===8?Ov(e>>24&255,e>>16&255,e>>8&255,(e&255)/255):n===4?Ov(e>>12&15|e>>8&240,e>>8&15|e>>4&240,e>>4&15|e&240,((e&15)<<4|e&15)/255):null):(e=uhe.exec(t))?new ha(e[1],e[2],e[3],1):(e=che.exec(t))?new ha(e[1]*255/100,e[2]*255/100,e[3]*255/100,1):(e=dhe.exec(t))?Ov(e[1],e[2],e[3],e[4]):(e=fhe.exec(t))?Ov(e[1]*255/100,e[2]*255/100,e[3]*255/100,e[4]):(e=hhe.exec(t))?Gj(e[1],e[2]/100,e[3]/100,1):(e=mhe.exec(t))?Gj(e[1],e[2]/100,e[3]/100,e[4]):Uj.hasOwnProperty(t)?zj(Uj[t]):t==="transparent"?new ha(NaN,NaN,NaN,0):null}function zj(t){return new ha(t>>16&255,t>>8&255,t&255,1)}function Ov(t,e,n,r){return r<=0&&(t=e=n=NaN),new ha(t,e,n,r)}function yhe(t){return t instanceof Qg||(t=hg(t)),t?(t=t.rgb(),new ha(t.r,t.g,t.b,t.opacity)):new ha}function K1(t,e,n,r){return arguments.length===1?yhe(t):new ha(t,e,n,r??1)}function ha(t,e,n,r){this.r=+t,this.g=+e,this.b=+n,this.opacity=+r}hI(ha,K1,lz(Qg,{brighter(t){return t=t==null?Px:Math.pow(Px,t),new ha(this.r*t,this.g*t,this.b*t,this.opacity)},darker(t){return t=t==null?dg:Math.pow(dg,t),new ha(this.r*t,this.g*t,this.b*t,this.opacity)},rgb(){return this},clamp(){return new ha(Td(this.r),Td(this.g),Td(this.b),Dx(this.opacity))},displayable(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:qj,formatHex:qj,formatHex8:vhe,formatRgb:Hj,toString:Hj}));function qj(){return`#${yd(this.r)}${yd(this.g)}${yd(this.b)}`}function vhe(){return`#${yd(this.r)}${yd(this.g)}${yd(this.b)}${yd((isNaN(this.opacity)?1:this.opacity)*255)}`}function Hj(){const t=Dx(this.opacity);return`${t===1?"rgb(":"rgba("}${Td(this.r)}, ${Td(this.g)}, ${Td(this.b)}${t===1?")":`, ${t})`}`}function Dx(t){return isNaN(t)?1:Math.max(0,Math.min(1,t))}function Td(t){return Math.max(0,Math.min(255,Math.round(t)||0))}function yd(t){return t=Td(t),(t<16?"0":"")+t.toString(16)}function Gj(t,e,n,r){return r<=0?t=e=n=NaN:n<=0||n>=1?t=e=NaN:e<=0&&(t=NaN),new Bs(t,e,n,r)}function uz(t){if(t instanceof Bs)return new Bs(t.h,t.s,t.l,t.opacity);if(t instanceof Qg||(t=hg(t)),!t)return new Bs;if(t instanceof Bs)return t;t=t.rgb();var e=t.r/255,n=t.g/255,r=t.b/255,i=Math.min(e,n,r),a=Math.max(e,n,r),s=NaN,l=a-i,c=(a+i)/2;return l?(e===a?s=(n-r)/l+(n<r)*6:n===a?s=(r-e)/l+2:s=(e-n)/l+4,l/=c<.5?a+i:2-a-i,s*=60):l=c>0&&c<1?0:s,new Bs(s,l,c,t.opacity)}function xhe(t,e,n,r){return arguments.length===1?uz(t):new Bs(t,e,n,r??1)}function Bs(t,e,n,r){this.h=+t,this.s=+e,this.l=+n,this.opacity=+r}hI(Bs,xhe,lz(Qg,{brighter(t){return t=t==null?Px:Math.pow(Px,t),new Bs(this.h,this.s,this.l*t,this.opacity)},darker(t){return t=t==null?dg:Math.pow(dg,t),new Bs(this.h,this.s,this.l*t,this.opacity)},rgb(){var t=this.h%360+(this.h<0)*360,e=isNaN(t)||isNaN(this.s)?0:this.s,n=this.l,r=n+(n<.5?n:1-n)*e,i=2*n-r;return new ha(zT(t>=240?t-240:t+120,i,r),zT(t,i,r),zT(t<120?t+240:t-120,i,r),this.opacity)},clamp(){return new Bs($j(this.h),jv(this.s),jv(this.l),Dx(this.opacity))},displayable(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl(){const t=Dx(this.opacity);return`${t===1?"hsl(":"hsla("}${$j(this.h)}, ${jv(this.s)*100}%, ${jv(this.l)*100}%${t===1?")":`, ${t})`}`}}));function $j(t){return t=(t||0)%360,t<0?t+360:t}function jv(t){return Math.max(0,Math.min(1,t||0))}function zT(t,e,n){return(t<60?e+(n-e)*t/60:t<180?n:t<240?e+(n-e)*(240-t)/60:e)*255}const mI=t=>()=>t;function _he(t,e){return function(n){return t+n*e}}function bhe(t,e,n){return t=Math.pow(t,n),e=Math.pow(e,n)-t,n=1/n,function(r){return Math.pow(t+r*e,n)}}function whe(t){return(t=+t)==1?cz:function(e,n){return n-e?bhe(e,n,t):mI(isNaN(e)?n:e)}}function cz(t,e){var n=e-t;return n?_he(t,n):mI(isNaN(t)?e:t)}const Kj=(function t(e){var n=whe(e);function r(i,a){var s=n((i=K1(i)).r,(a=K1(a)).r),l=n(i.g,a.g),c=n(i.b,a.b),h=cz(i.opacity,a.opacity);return function(p){return i.r=s(p),i.g=l(p),i.b=c(p),i.opacity=h(p),i+""}}return r.gamma=t,r})(1);function Ehe(t,e){e||(e=[]);var n=t?Math.min(e.length,t.length):0,r=e.slice(),i;return function(a){for(i=0;i<n;++i)r[i]=t[i]*(1-a)+e[i]*a;return r}}function The(t){return ArrayBuffer.isView(t)&&!(t instanceof DataView)}function She(t,e){var n=e?e.length:0,r=t?Math.min(n,t.length):0,i=new Array(r),a=new Array(n),s;for(s=0;s<r;++s)i[s]=um(t[s],e[s]);for(;s<n;++s)a[s]=e[s];return function(l){for(s=0;s<r;++s)a[s]=i[s](l);return a}}function Ahe(t,e){var n=new Date;return t=+t,e=+e,function(r){return n.setTime(t*(1-r)+e*r),n}}function Rx(t,e){return t=+t,e=+e,function(n){return t*(1-n)+e*n}}function Che(t,e){var n={},r={},i;(t===null||typeof t!="object")&&(t={}),(e===null||typeof e!="object")&&(e={});for(i in e)i in t?n[i]=um(t[i],e[i]):r[i]=e[i];return function(a){for(i in n)r[i]=n[i](a);return r}}var W1=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,qT=new RegExp(W1.source,"g");function Ihe(t){return function(){return t}}function Nhe(t){return function(e){return t(e)+""}}function Phe(t,e){var n=W1.lastIndex=qT.lastIndex=0,r,i,a,s=-1,l=[],c=[];for(t=t+"",e=e+"";(r=W1.exec(t))&&(i=qT.exec(e));)(a=i.index)>n&&(a=e.slice(n,a),l[s]?l[s]+=a:l[++s]=a),(r=r[0])===(i=i[0])?l[s]?l[s]+=i:l[++s]=i:(l[++s]=null,c.push({i:s,x:Rx(r,i)})),n=qT.lastIndex;return n<e.length&&(a=e.slice(n),l[s]?l[s]+=a:l[++s]=a),l.length<2?c[0]?Nhe(c[0].x):Ihe(e):(e=c.length,function(h){for(var p=0,g;p<e;++p)l[(g=c[p]).i]=g.x(h);return l.join("")})}function um(t,e){var n=typeof e,r;return e==null||n==="boolean"?mI(e):(n==="number"?Rx:n==="string"?(r=hg(e))?(e=r,Kj):Phe:e instanceof hg?Kj:e instanceof Date?Ahe:The(e)?Ehe:Array.isArray(e)?She:typeof e.valueOf!="function"&&typeof e.toString!="function"||isNaN(e)?Che:Rx)(t,e)}function pI(t,e){return t=+t,e=+e,function(n){return Math.round(t*(1-n)+e*n)}}function Dhe(t,e){e===void 0&&(e=t,t=um);for(var n=0,r=e.length-1,i=e[0],a=new Array(r<0?0:r);n<r;)a[n]=t(i,i=e[++n]);return function(s){var l=Math.max(0,Math.min(r-1,Math.floor(s*=r)));return a[l](s-l)}}function Rhe(t){return function(){return t}}function kx(t){return+t}var Wj=[0,1];function Ui(t){return t}function Y1(t,e){return(e-=t=+t)?function(n){return(n-t)/e}:Rhe(isNaN(e)?NaN:.5)}function khe(t,e){var n;return t>e&&(n=t,t=e,e=n),function(r){return Math.max(t,Math.min(e,r))}}function Mhe(t,e,n){var r=t[0],i=t[1],a=e[0],s=e[1];return i<r?(r=Y1(i,r),a=n(s,a)):(r=Y1(r,i),a=n(a,s)),function(l){return a(r(l))}}function Ohe(t,e,n){var r=Math.min(t.length,e.length)-1,i=new Array(r),a=new Array(r),s=-1;for(t[r]<t[0]&&(t=t.slice().reverse(),e=e.slice().reverse());++s<r;)i[s]=Y1(t[s],t[s+1]),a[s]=n(e[s],e[s+1]);return function(l){var c=Jg(t,l,1,r)-1;return a[c](i[c](l))}}function Xg(t,e){return e.domain(t.domain()).range(t.range()).interpolate(t.interpolate()).clamp(t.clamp()).unknown(t.unknown())}function tb(){var t=Wj,e=Wj,n=um,r,i,a,s=Ui,l,c,h;function p(){var x=Math.min(t.length,e.length);return s!==Ui&&(s=khe(t[0],t[x-1])),l=x>2?Ohe:Mhe,c=h=null,g}function g(x){return x==null||isNaN(x=+x)?a:(c||(c=l(t.map(r),e,n)))(r(s(x)))}return g.invert=function(x){return s(i((h||(h=l(e,t.map(r),Rx)))(x)))},g.domain=function(x){return arguments.length?(t=Array.from(x,kx),p()):t.slice()},g.range=function(x){return arguments.length?(e=Array.from(x),p()):e.slice()},g.rangeRound=function(x){return e=Array.from(x),n=pI,p()},g.clamp=function(x){return arguments.length?(s=x?!0:Ui,p()):s!==Ui},g.interpolate=function(x){return arguments.length?(n=x,p()):n},g.unknown=function(x){return arguments.length?(a=x,g):a},function(x,b){return r=x,i=b,p()}}function gI(){return tb()(Ui,Ui)}function jhe(t){return Math.abs(t=Math.round(t))>=1e21?t.toLocaleString("en").replace(/,/g,""):t.toString(10)}function Mx(t,e){if((n=(t=e?t.toExponential(e-1):t.toExponential()).indexOf("e"))<0)return null;var n,r=t.slice(0,n);return[r.length>1?r[0]+r.slice(2):r,+t.slice(n+1)]}function Hh(t){return t=Mx(Math.abs(t)),t?t[1]:NaN}function Lhe(t,e){return function(n,r){for(var i=n.length,a=[],s=0,l=t[0],c=0;i>0&&l>0&&(c+l+1>r&&(l=Math.max(1,r-c)),a.push(n.substring(i-=l,i+l)),!((c+=l+1)>r));)l=t[s=(s+1)%t.length];return a.reverse().join(e)}}function Vhe(t){return function(e){return e.replace(/[0-9]/g,function(n){return t[+n]})}}var Uhe=/^(?:(.)?([<>=^]))?([+\-( ])?([$#])?(0)?(\d+)?(,)?(\.\d+)?(~)?([a-z%])?$/i;function mg(t){if(!(e=Uhe.exec(t)))throw new Error("invalid format: "+t);var e;return new yI({fill:e[1],align:e[2],sign:e[3],symbol:e[4],zero:e[5],width:e[6],comma:e[7],precision:e[8]&&e[8].slice(1),trim:e[9],type:e[10]})}mg.prototype=yI.prototype;function yI(t){this.fill=t.fill===void 0?" ":t.fill+"",this.align=t.align===void 0?">":t.align+"",this.sign=t.sign===void 0?"-":t.sign+"",this.symbol=t.symbol===void 0?"":t.symbol+"",this.zero=!!t.zero,this.width=t.width===void 0?void 0:+t.width,this.comma=!!t.comma,this.precision=t.precision===void 0?void 0:+t.precision,this.trim=!!t.trim,this.type=t.type===void 0?"":t.type+""}yI.prototype.toString=function(){return this.fill+this.align+this.sign+this.symbol+(this.zero?"0":"")+(this.width===void 0?"":Math.max(1,this.width|0))+(this.comma?",":"")+(this.precision===void 0?"":"."+Math.max(0,this.precision|0))+(this.trim?"~":"")+this.type};function Fhe(t){e:for(var e=t.length,n=1,r=-1,i;n<e;++n)switch(t[n]){case".":r=i=n;break;case"0":r===0&&(r=n),i=n;break;default:if(!+t[n])break e;r>0&&(r=0);break}return r>0?t.slice(0,r)+t.slice(i+1):t}var dz;function Bhe(t,e){var n=Mx(t,e);if(!n)return t+"";var r=n[0],i=n[1],a=i-(dz=Math.max(-8,Math.min(8,Math.floor(i/3)))*3)+1,s=r.length;return a===s?r:a>s?r+new Array(a-s+1).join("0"):a>0?r.slice(0,a)+"."+r.slice(a):"0."+new Array(1-a).join("0")+Mx(t,Math.max(0,e+a-1))[0]}function Yj(t,e){var n=Mx(t,e);if(!n)return t+"";var r=n[0],i=n[1];return i<0?"0."+new Array(-i).join("0")+r:r.length>i+1?r.slice(0,i+1)+"."+r.slice(i+1):r+new Array(i-r.length+2).join("0")}const Zj={"%":(t,e)=>(t*100).toFixed(e),b:t=>Math.round(t).toString(2),c:t=>t+"",d:jhe,e:(t,e)=>t.toExponential(e),f:(t,e)=>t.toFixed(e),g:(t,e)=>t.toPrecision(e),o:t=>Math.round(t).toString(8),p:(t,e)=>Yj(t*100,e),r:Yj,s:Bhe,X:t=>Math.round(t).toString(16).toUpperCase(),x:t=>Math.round(t).toString(16)};function Jj(t){return t}var Qj=Array.prototype.map,Xj=["y","z","a","f","p","n","","m","","k","M","G","T","P","E","Z","Y"];function zhe(t){var e=t.grouping===void 0||t.thousands===void 0?Jj:Lhe(Qj.call(t.grouping,Number),t.thousands+""),n=t.currency===void 0?"":t.currency[0]+"",r=t.currency===void 0?"":t.currency[1]+"",i=t.decimal===void 0?".":t.decimal+"",a=t.numerals===void 0?Jj:Vhe(Qj.call(t.numerals,String)),s=t.percent===void 0?"%":t.percent+"",l=t.minus===void 0?"":t.minus+"",c=t.nan===void 0?"NaN":t.nan+"";function h(g){g=mg(g);var x=g.fill,b=g.align,C=g.sign,A=g.symbol,D=g.zero,R=g.width,j=g.comma,O=g.precision,q=g.trim,$=g.type;$==="n"?(j=!0,$="g"):Zj[$]||(O===void 0&&(O=12),q=!0,$="g"),(D||x==="0"&&b==="=")&&(D=!0,x="0",b="=");var H=A==="$"?n:A==="#"&&/[boxX]/.test($)?"0"+$.toLowerCase():"",U=A==="$"?r:/[%p]/.test($)?s:"",z=Zj[$],B=/[defgprs%]/.test($);O=O===void 0?6:/[gprs]/.test($)?Math.max(1,Math.min(21,O)):Math.max(0,Math.min(20,O));function Z(K){var J=H,G=U,Se,Oe,ee;if($==="c")G=z(K)+G,K="";else{K=+K;var re=K<0||1/K<0;if(K=isNaN(K)?c:z(Math.abs(K),O),q&&(K=Fhe(K)),re&&+K==0&&C!=="+"&&(re=!1),J=(re?C==="("?C:l:C==="-"||C==="("?"":C)+J,G=($==="s"?Xj[8+dz/3]:"")+G+(re&&C==="("?")":""),B){for(Se=-1,Oe=K.length;++Se<Oe;)if(ee=K.charCodeAt(Se),48>ee||ee>57){G=(ee===46?i+K.slice(Se+1):K.slice(Se))+G,K=K.slice(0,Se);break}}}j&&!D&&(K=e(K,1/0));var le=J.length+K.length+G.length,Ne=le<R?new Array(R-le+1).join(x):"";switch(j&&D&&(K=e(Ne+K,Ne.length?R-G.length:1/0),Ne=""),b){case"<":K=J+K+G+Ne;break;case"=":K=J+Ne+K+G;break;case"^":K=Ne.slice(0,le=Ne.length>>1)+J+K+G+Ne.slice(le);break;default:K=Ne+J+K+G;break}return a(K)}return Z.toString=function(){return g+""},Z}function p(g,x){var b=h((g=mg(g),g.type="f",g)),C=Math.max(-8,Math.min(8,Math.floor(Hh(x)/3)))*3,A=Math.pow(10,-C),D=Xj[8+C/3];return function(R){return b(A*R)+D}}return{format:h,formatPrefix:p}}var Lv,vI,fz;qhe({thousands:",",grouping:[3],currency:["$",""]});function qhe(t){return Lv=zhe(t),vI=Lv.format,fz=Lv.formatPrefix,Lv}function Hhe(t){return Math.max(0,-Hh(Math.abs(t)))}function Ghe(t,e){return Math.max(0,Math.max(-8,Math.min(8,Math.floor(Hh(e)/3)))*3-Hh(Math.abs(t)))}function $he(t,e){return t=Math.abs(t),e=Math.abs(e)-t,Math.max(0,Hh(e)-Hh(t))+1}function hz(t,e,n,r){var i=G1(t,e,n),a;switch(r=mg(r??",f"),r.type){case"s":{var s=Math.max(Math.abs(t),Math.abs(e));return r.precision==null&&!isNaN(a=Ghe(i,s))&&(r.precision=a),fz(r,s)}case"":case"e":case"g":case"p":case"r":{r.precision==null&&!isNaN(a=$he(i,Math.max(Math.abs(t),Math.abs(e))))&&(r.precision=a-(r.type==="e"));break}case"f":case"%":{r.precision==null&&!isNaN(a=Hhe(i))&&(r.precision=a-(r.type==="%")*2);break}}return vI(r)}function bc(t){var e=t.domain;return t.ticks=function(n){var r=e();return q1(r[0],r[r.length-1],n??10)},t.tickFormat=function(n,r){var i=e();return hz(i[0],i[i.length-1],n??10,r)},t.nice=function(n){n==null&&(n=10);var r=e(),i=0,a=r.length-1,s=r[i],l=r[a],c,h,p=10;for(l<s&&(h=s,s=l,l=h,h=i,i=a,a=h);p-- >0;){if(h=H1(s,l,n),h===c)return r[i]=s,r[a]=l,e(r);if(h>0)s=Math.floor(s/h)*h,l=Math.ceil(l/h)*h;else if(h<0)s=Math.ceil(s*h)/h,l=Math.floor(l*h)/h;else break;c=h}return t},t}function mz(){var t=gI();return t.copy=function(){return Xg(t,mz())},vs.apply(t,arguments),bc(t)}function pz(t){var e;function n(r){return r==null||isNaN(r=+r)?e:r}return n.invert=n,n.domain=n.range=function(r){return arguments.length?(t=Array.from(r,kx),n):t.slice()},n.unknown=function(r){return arguments.length?(e=r,n):e},n.copy=function(){return pz(t).unknown(e)},t=arguments.length?Array.from(t,kx):[0,1],bc(n)}function gz(t,e){t=t.slice();var n=0,r=t.length-1,i=t[n],a=t[r],s;return a<i&&(s=n,n=r,r=s,s=i,i=a,a=s),t[n]=e.floor(i),t[r]=e.ceil(a),t}function eL(t){return Math.log(t)}function tL(t){return Math.exp(t)}function Khe(t){return-Math.log(-t)}function Whe(t){return-Math.exp(-t)}function Yhe(t){return isFinite(t)?+("1e"+t):t<0?0:t}function Zhe(t){return t===10?Yhe:t===Math.E?Math.exp:e=>Math.pow(t,e)}function Jhe(t){return t===Math.E?Math.log:t===10&&Math.log10||t===2&&Math.log2||(t=Math.log(t),e=>Math.log(e)/t)}function nL(t){return(e,n)=>-t(-e,n)}function xI(t){const e=t(eL,tL),n=e.domain;let r=10,i,a;function s(){return i=Jhe(r),a=Zhe(r),n()[0]<0?(i=nL(i),a=nL(a),t(Khe,Whe)):t(eL,tL),e}return e.base=function(l){return arguments.length?(r=+l,s()):r},e.domain=function(l){return arguments.length?(n(l),s()):n()},e.ticks=l=>{const c=n();let h=c[0],p=c[c.length-1];const g=p<h;g&&([h,p]=[p,h]);let x=i(h),b=i(p),C,A;const D=l==null?10:+l;let R=[];if(!(r%1)&&b-x<D){if(x=Math.floor(x),b=Math.ceil(b),h>0){for(;x<=b;++x)for(C=1;C<r;++C)if(A=x<0?C/a(-x):C*a(x),!(A<h)){if(A>p)break;R.push(A)}}else for(;x<=b;++x)for(C=r-1;C>=1;--C)if(A=x>0?C/a(-x):C*a(x),!(A<h)){if(A>p)break;R.push(A)}R.length*2<D&&(R=q1(h,p,D))}else R=q1(x,b,Math.min(b-x,D)).map(a);return g?R.reverse():R},e.tickFormat=(l,c)=>{if(l==null&&(l=10),c==null&&(c=r===10?"s":","),typeof c!="function"&&(!(r%1)&&(c=mg(c)).precision==null&&(c.trim=!0),c=vI(c)),l===1/0)return c;const h=Math.max(1,r*l/e.ticks().length);return p=>{let g=p/a(Math.round(i(p)));return g*r<r-.5&&(g*=r),g<=h?c(p):""}},e.nice=()=>n(gz(n(),{floor:l=>a(Math.floor(i(l))),ceil:l=>a(Math.ceil(i(l)))})),e}function yz(){const t=xI(tb()).domain([1,10]);return t.copy=()=>Xg(t,yz()).base(t.base()),vs.apply(t,arguments),t}function rL(t){return function(e){return Math.sign(e)*Math.log1p(Math.abs(e/t))}}function iL(t){return function(e){return Math.sign(e)*Math.expm1(Math.abs(e))*t}}function _I(t){var e=1,n=t(rL(e),iL(e));return n.constant=function(r){return arguments.length?t(rL(e=+r),iL(e)):e},bc(n)}function vz(){var t=_I(tb());return t.copy=function(){return Xg(t,vz()).constant(t.constant())},vs.apply(t,arguments)}function aL(t){return function(e){return e<0?-Math.pow(-e,t):Math.pow(e,t)}}function Qhe(t){return t<0?-Math.sqrt(-t):Math.sqrt(t)}function Xhe(t){return t<0?-t*t:t*t}function bI(t){var e=t(Ui,Ui),n=1;function r(){return n===1?t(Ui,Ui):n===.5?t(Qhe,Xhe):t(aL(n),aL(1/n))}return e.exponent=function(i){return arguments.length?(n=+i,r()):n},bc(e)}function wI(){var t=bI(tb());return t.copy=function(){return Xg(t,wI()).exponent(t.exponent())},vs.apply(t,arguments),t}function eme(){return wI.apply(null,arguments).exponent(.5)}function sL(t){return Math.sign(t)*t*t}function tme(t){return Math.sign(t)*Math.sqrt(Math.abs(t))}function xz(){var t=gI(),e=[0,1],n=!1,r;function i(a){var s=tme(t(a));return isNaN(s)?r:n?Math.round(s):s}return i.invert=function(a){return t.invert(sL(a))},i.domain=function(a){return arguments.length?(t.domain(a),i):t.domain()},i.range=function(a){return arguments.length?(t.range((e=Array.from(a,kx)).map(sL)),i):e.slice()},i.rangeRound=function(a){return i.range(a).round(!0)},i.round=function(a){return arguments.length?(n=!!a,i):n},i.clamp=function(a){return arguments.length?(t.clamp(a),i):t.clamp()},i.unknown=function(a){return arguments.length?(r=a,i):r},i.copy=function(){return xz(t.domain(),e).round(n).clamp(t.clamp()).unknown(r)},vs.apply(i,arguments),bc(i)}function _z(){var t=[],e=[],n=[],r;function i(){var s=0,l=Math.max(1,e.length);for(n=new Array(l-1);++s<l;)n[s-1]=ahe(t,s/l);return a}function a(s){return s==null||isNaN(s=+s)?r:e[Jg(n,s)]}return a.invertExtent=function(s){var l=e.indexOf(s);return l<0?[NaN,NaN]:[l>0?n[l-1]:t[0],l<n.length?n[l]:t[t.length-1]]},a.domain=function(s){if(!arguments.length)return t.slice();t=[];for(let l of s)l!=null&&!isNaN(l=+l)&&t.push(l);return t.sort(ec),i()},a.range=function(s){return arguments.length?(e=Array.from(s),i()):e.slice()},a.unknown=function(s){return arguments.length?(r=s,a):r},a.quantiles=function(){return n.slice()},a.copy=function(){return _z().domain(t).range(e).unknown(r)},vs.apply(a,arguments)}function bz(){var t=0,e=1,n=1,r=[.5],i=[0,1],a;function s(c){return c!=null&&c<=c?i[Jg(r,c,0,n)]:a}function l(){var c=-1;for(r=new Array(n);++c<n;)r[c]=((c+1)*e-(c-n)*t)/(n+1);return s}return s.domain=function(c){return arguments.length?([t,e]=c,t=+t,e=+e,l()):[t,e]},s.range=function(c){return arguments.length?(n=(i=Array.from(c)).length-1,l()):i.slice()},s.invertExtent=function(c){var h=i.indexOf(c);return h<0?[NaN,NaN]:h<1?[t,r[0]]:h>=n?[r[n-1],e]:[r[h-1],r[h]]},s.unknown=function(c){return arguments.length&&(a=c),s},s.thresholds=function(){return r.slice()},s.copy=function(){return bz().domain([t,e]).range(i).unknown(a)},vs.apply(bc(s),arguments)}function wz(){var t=[.5],e=[0,1],n,r=1;function i(a){return a!=null&&a<=a?e[Jg(t,a,0,r)]:n}return i.domain=function(a){return arguments.length?(t=Array.from(a),r=Math.min(t.length,e.length-1),i):t.slice()},i.range=function(a){return arguments.length?(e=Array.from(a),r=Math.min(t.length,e.length-1),i):e.slice()},i.invertExtent=function(a){var s=e.indexOf(a);return[t[s-1],t[s]]},i.unknown=function(a){return arguments.length?(n=a,i):n},i.copy=function(){return wz().domain(t).range(e).unknown(n)},vs.apply(i,arguments)}const HT=new Date,GT=new Date;function kr(t,e,n,r){function i(a){return t(a=arguments.length===0?new Date:new Date(+a)),a}return i.floor=a=>(t(a=new Date(+a)),a),i.ceil=a=>(t(a=new Date(a-1)),e(a,1),t(a),a),i.round=a=>{const s=i(a),l=i.ceil(a);return a-s<l-a?s:l},i.offset=(a,s)=>(e(a=new Date(+a),s==null?1:Math.floor(s)),a),i.range=(a,s,l)=>{const c=[];if(a=i.ceil(a),l=l==null?1:Math.floor(l),!(a<s)||!(l>0))return c;let h;do c.push(h=new Date(+a)),e(a,l),t(a);while(h<a&&a<s);return c},i.filter=a=>kr(s=>{if(s>=s)for(;t(s),!a(s);)s.setTime(s-1)},(s,l)=>{if(s>=s)if(l<0)for(;++l<=0;)for(;e(s,-1),!a(s););else for(;--l>=0;)for(;e(s,1),!a(s););}),n&&(i.count=(a,s)=>(HT.setTime(+a),GT.setTime(+s),t(HT),t(GT),Math.floor(n(HT,GT))),i.every=a=>(a=Math.floor(a),!isFinite(a)||!(a>0)?null:a>1?i.filter(r?s=>r(s)%a===0:s=>i.count(0,s)%a===0):i)),i}const Ox=kr(()=>{},(t,e)=>{t.setTime(+t+e)},(t,e)=>e-t);Ox.every=t=>(t=Math.floor(t),!isFinite(t)||!(t>0)?null:t>1?kr(e=>{e.setTime(Math.floor(e/t)*t)},(e,n)=>{e.setTime(+e+n*t)},(e,n)=>(n-e)/t):Ox);Ox.range;const bl=1e3,fs=bl*60,wl=fs*60,Ol=wl*24,EI=Ol*7,oL=Ol*30,$T=Ol*365,vd=kr(t=>{t.setTime(t-t.getMilliseconds())},(t,e)=>{t.setTime(+t+e*bl)},(t,e)=>(e-t)/bl,t=>t.getUTCSeconds());vd.range;const TI=kr(t=>{t.setTime(t-t.getMilliseconds()-t.getSeconds()*bl)},(t,e)=>{t.setTime(+t+e*fs)},(t,e)=>(e-t)/fs,t=>t.getMinutes());TI.range;const SI=kr(t=>{t.setUTCSeconds(0,0)},(t,e)=>{t.setTime(+t+e*fs)},(t,e)=>(e-t)/fs,t=>t.getUTCMinutes());SI.range;const AI=kr(t=>{t.setTime(t-t.getMilliseconds()-t.getSeconds()*bl-t.getMinutes()*fs)},(t,e)=>{t.setTime(+t+e*wl)},(t,e)=>(e-t)/wl,t=>t.getHours());AI.range;const CI=kr(t=>{t.setUTCMinutes(0,0,0)},(t,e)=>{t.setTime(+t+e*wl)},(t,e)=>(e-t)/wl,t=>t.getUTCHours());CI.range;const ey=kr(t=>t.setHours(0,0,0,0),(t,e)=>t.setDate(t.getDate()+e),(t,e)=>(e-t-(e.getTimezoneOffset()-t.getTimezoneOffset())*fs)/Ol,t=>t.getDate()-1);ey.range;const nb=kr(t=>{t.setUTCHours(0,0,0,0)},(t,e)=>{t.setUTCDate(t.getUTCDate()+e)},(t,e)=>(e-t)/Ol,t=>t.getUTCDate()-1);nb.range;const Ez=kr(t=>{t.setUTCHours(0,0,0,0)},(t,e)=>{t.setUTCDate(t.getUTCDate()+e)},(t,e)=>(e-t)/Ol,t=>Math.floor(t/Ol));Ez.range;function Yd(t){return kr(e=>{e.setDate(e.getDate()-(e.getDay()+7-t)%7),e.setHours(0,0,0,0)},(e,n)=>{e.setDate(e.getDate()+n*7)},(e,n)=>(n-e-(n.getTimezoneOffset()-e.getTimezoneOffset())*fs)/EI)}const rb=Yd(0),jx=Yd(1),nme=Yd(2),rme=Yd(3),Gh=Yd(4),ime=Yd(5),ame=Yd(6);rb.range;jx.range;nme.range;rme.range;Gh.range;ime.range;ame.range;function Zd(t){return kr(e=>{e.setUTCDate(e.getUTCDate()-(e.getUTCDay()+7-t)%7),e.setUTCHours(0,0,0,0)},(e,n)=>{e.setUTCDate(e.getUTCDate()+n*7)},(e,n)=>(n-e)/EI)}const ib=Zd(0),Lx=Zd(1),sme=Zd(2),ome=Zd(3),$h=Zd(4),lme=Zd(5),ume=Zd(6);ib.range;Lx.range;sme.range;ome.range;$h.range;lme.range;ume.range;const II=kr(t=>{t.setDate(1),t.setHours(0,0,0,0)},(t,e)=>{t.setMonth(t.getMonth()+e)},(t,e)=>e.getMonth()-t.getMonth()+(e.getFullYear()-t.getFullYear())*12,t=>t.getMonth());II.range;const NI=kr(t=>{t.setUTCDate(1),t.setUTCHours(0,0,0,0)},(t,e)=>{t.setUTCMonth(t.getUTCMonth()+e)},(t,e)=>e.getUTCMonth()-t.getUTCMonth()+(e.getUTCFullYear()-t.getUTCFullYear())*12,t=>t.getUTCMonth());NI.range;const jl=kr(t=>{t.setMonth(0,1),t.setHours(0,0,0,0)},(t,e)=>{t.setFullYear(t.getFullYear()+e)},(t,e)=>e.getFullYear()-t.getFullYear(),t=>t.getFullYear());jl.every=t=>!isFinite(t=Math.floor(t))||!(t>0)?null:kr(e=>{e.setFullYear(Math.floor(e.getFullYear()/t)*t),e.setMonth(0,1),e.setHours(0,0,0,0)},(e,n)=>{e.setFullYear(e.getFullYear()+n*t)});jl.range;const Ll=kr(t=>{t.setUTCMonth(0,1),t.setUTCHours(0,0,0,0)},(t,e)=>{t.setUTCFullYear(t.getUTCFullYear()+e)},(t,e)=>e.getUTCFullYear()-t.getUTCFullYear(),t=>t.getUTCFullYear());Ll.every=t=>!isFinite(t=Math.floor(t))||!(t>0)?null:kr(e=>{e.setUTCFullYear(Math.floor(e.getUTCFullYear()/t)*t),e.setUTCMonth(0,1),e.setUTCHours(0,0,0,0)},(e,n)=>{e.setUTCFullYear(e.getUTCFullYear()+n*t)});Ll.range;function Tz(t,e,n,r,i,a){const s=[[vd,1,bl],[vd,5,5*bl],[vd,15,15*bl],[vd,30,30*bl],[a,1,fs],[a,5,5*fs],[a,15,15*fs],[a,30,30*fs],[i,1,wl],[i,3,3*wl],[i,6,6*wl],[i,12,12*wl],[r,1,Ol],[r,2,2*Ol],[n,1,EI],[e,1,oL],[e,3,3*oL],[t,1,$T]];function l(h,p,g){const x=p<h;x&&([h,p]=[p,h]);const b=g&&typeof g.range=="function"?g:c(h,p,g),C=b?b.range(h,+p+1):[];return x?C.reverse():C}function c(h,p,g){const x=Math.abs(p-h)/g,b=cI(([,,D])=>D).right(s,x);if(b===s.length)return t.every(G1(h/$T,p/$T,g));if(b===0)return Ox.every(Math.max(G1(h,p,g),1));const[C,A]=s[x/s[b-1][2]<s[b][2]/x?b-1:b];return C.every(A)}return[l,c]}const[cme,dme]=Tz(Ll,NI,ib,Ez,CI,SI),[fme,hme]=Tz(jl,II,rb,ey,AI,TI);function KT(t){if(0<=t.y&&t.y<100){var e=new Date(-1,t.m,t.d,t.H,t.M,t.S,t.L);return e.setFullYear(t.y),e}return new Date(t.y,t.m,t.d,t.H,t.M,t.S,t.L)}function WT(t){if(0<=t.y&&t.y<100){var e=new Date(Date.UTC(-1,t.m,t.d,t.H,t.M,t.S,t.L));return e.setUTCFullYear(t.y),e}return new Date(Date.UTC(t.y,t.m,t.d,t.H,t.M,t.S,t.L))}function fp(t,e,n){return{y:t,m:e,d:n,H:0,M:0,S:0,L:0}}function mme(t){var e=t.dateTime,n=t.date,r=t.time,i=t.periods,a=t.days,s=t.shortDays,l=t.months,c=t.shortMonths,h=hp(i),p=mp(i),g=hp(a),x=mp(a),b=hp(s),C=mp(s),A=hp(l),D=mp(l),R=hp(c),j=mp(c),O={a:re,A:le,b:Ne,B:Pe,c:null,d:hL,e:hL,f:Lme,g:Kme,G:Yme,H:Mme,I:Ome,j:jme,L:Sz,m:Vme,M:Ume,p:X,q:ue,Q:gL,s:yL,S:Fme,u:Bme,U:zme,V:qme,w:Hme,W:Gme,x:null,X:null,y:$me,Y:Wme,Z:Zme,"%":pL},q={a:be,A:Ce,b:je,B:Ve,c:null,d:mL,e:mL,f:epe,g:cpe,G:fpe,H:Jme,I:Qme,j:Xme,L:Cz,m:tpe,M:npe,p:Ze,q:It,Q:gL,s:yL,S:rpe,u:ipe,U:ape,V:spe,w:ope,W:lpe,x:null,X:null,y:upe,Y:dpe,Z:hpe,"%":pL},$={a:Z,A:K,b:J,B:G,c:Se,d:dL,e:dL,f:Pme,g:cL,G:uL,H:fL,I:fL,j:Ame,L:Nme,m:Sme,M:Cme,p:B,q:Tme,Q:Rme,s:kme,S:Ime,u:xme,U:_me,V:bme,w:vme,W:wme,x:Oe,X:ee,y:cL,Y:uL,Z:Eme,"%":Dme};O.x=H(n,O),O.X=H(r,O),O.c=H(e,O),q.x=H(n,q),q.X=H(r,q),q.c=H(e,q);function H(Te,st){return function(lt){var he=[],gt=-1,dt=0,yn=Te.length,sn,tr,jr;for(lt instanceof Date||(lt=new Date(+lt));++gt<yn;)Te.charCodeAt(gt)===37&&(he.push(Te.slice(dt,gt)),(tr=lL[sn=Te.charAt(++gt)])!=null?sn=Te.charAt(++gt):tr=sn==="e"?" ":"0",(jr=st[sn])&&(sn=jr(lt,tr)),he.push(sn),dt=gt+1);return he.push(Te.slice(dt,gt)),he.join("")}}function U(Te,st){return function(lt){var he=fp(1900,void 0,1),gt=z(he,Te,lt+="",0),dt,yn;if(gt!=lt.length)return null;if("Q"in he)return new Date(he.Q);if("s"in he)return new Date(he.s*1e3+("L"in he?he.L:0));if(st&&!("Z"in he)&&(he.Z=0),"p"in he&&(he.H=he.H%12+he.p*12),he.m===void 0&&(he.m="q"in he?he.q:0),"V"in he){if(he.V<1||he.V>53)return null;"w"in he||(he.w=1),"Z"in he?(dt=WT(fp(he.y,0,1)),yn=dt.getUTCDay(),dt=yn>4||yn===0?Lx.ceil(dt):Lx(dt),dt=nb.offset(dt,(he.V-1)*7),he.y=dt.getUTCFullYear(),he.m=dt.getUTCMonth(),he.d=dt.getUTCDate()+(he.w+6)%7):(dt=KT(fp(he.y,0,1)),yn=dt.getDay(),dt=yn>4||yn===0?jx.ceil(dt):jx(dt),dt=ey.offset(dt,(he.V-1)*7),he.y=dt.getFullYear(),he.m=dt.getMonth(),he.d=dt.getDate()+(he.w+6)%7)}else("W"in he||"U"in he)&&("w"in he||(he.w="u"in he?he.u%7:"W"in he?1:0),yn="Z"in he?WT(fp(he.y,0,1)).getUTCDay():KT(fp(he.y,0,1)).getDay(),he.m=0,he.d="W"in he?(he.w+6)%7+he.W*7-(yn+5)%7:he.w+he.U*7-(yn+6)%7);return"Z"in he?(he.H+=he.Z/100|0,he.M+=he.Z%100,WT(he)):KT(he)}}function z(Te,st,lt,he){for(var gt=0,dt=st.length,yn=lt.length,sn,tr;gt<dt;){if(he>=yn)return-1;if(sn=st.charCodeAt(gt++),sn===37){if(sn=st.charAt(gt++),tr=$[sn in lL?st.charAt(gt++):sn],!tr||(he=tr(Te,lt,he))<0)return-1}else if(sn!=lt.charCodeAt(he++))return-1}return he}function B(Te,st,lt){var he=h.exec(st.slice(lt));return he?(Te.p=p.get(he[0].toLowerCase()),lt+he[0].length):-1}function Z(Te,st,lt){var he=b.exec(st.slice(lt));return he?(Te.w=C.get(he[0].toLowerCase()),lt+he[0].length):-1}function K(Te,st,lt){var he=g.exec(st.slice(lt));return he?(Te.w=x.get(he[0].toLowerCase()),lt+he[0].length):-1}function J(Te,st,lt){var he=R.exec(st.slice(lt));return he?(Te.m=j.get(he[0].toLowerCase()),lt+he[0].length):-1}function G(Te,st,lt){var he=A.exec(st.slice(lt));return he?(Te.m=D.get(he[0].toLowerCase()),lt+he[0].length):-1}function Se(Te,st,lt){return z(Te,e,st,lt)}function Oe(Te,st,lt){return z(Te,n,st,lt)}function ee(Te,st,lt){return z(Te,r,st,lt)}function re(Te){return s[Te.getDay()]}function le(Te){return a[Te.getDay()]}function Ne(Te){return c[Te.getMonth()]}function Pe(Te){return l[Te.getMonth()]}function X(Te){return i[+(Te.getHours()>=12)]}function ue(Te){return 1+~~(Te.getMonth()/3)}function be(Te){return s[Te.getUTCDay()]}function Ce(Te){return a[Te.getUTCDay()]}function je(Te){return c[Te.getUTCMonth()]}function Ve(Te){return l[Te.getUTCMonth()]}function Ze(Te){return i[+(Te.getUTCHours()>=12)]}function It(Te){return 1+~~(Te.getUTCMonth()/3)}return{format:function(Te){var st=H(Te+="",O);return st.toString=function(){return Te},st},parse:function(Te){var st=U(Te+="",!1);return st.toString=function(){return Te},st},utcFormat:function(Te){var st=H(Te+="",q);return st.toString=function(){return Te},st},utcParse:function(Te){var st=U(Te+="",!0);return st.toString=function(){return Te},st}}}var lL={"-":"",_:" ",0:"0"},Zr=/^\s*\d+/,pme=/^%/,gme=/[\\^$*+?|[\]().{}]/g;function Kt(t,e,n){var r=t<0?"-":"",i=(r?-t:t)+"",a=i.length;return r+(a<n?new Array(n-a+1).join(e)+i:i)}function yme(t){return t.replace(gme,"\\$&")}function hp(t){return new RegExp("^(?:"+t.map(yme).join("|")+")","i")}function mp(t){return new Map(t.map((e,n)=>[e.toLowerCase(),n]))}function vme(t,e,n){var r=Zr.exec(e.slice(n,n+1));return r?(t.w=+r[0],n+r[0].length):-1}function xme(t,e,n){var r=Zr.exec(e.slice(n,n+1));return r?(t.u=+r[0],n+r[0].length):-1}function _me(t,e,n){var r=Zr.exec(e.slice(n,n+2));return r?(t.U=+r[0],n+r[0].length):-1}function bme(t,e,n){var r=Zr.exec(e.slice(n,n+2));return r?(t.V=+r[0],n+r[0].length):-1}function wme(t,e,n){var r=Zr.exec(e.slice(n,n+2));return r?(t.W=+r[0],n+r[0].length):-1}function uL(t,e,n){var r=Zr.exec(e.slice(n,n+4));return r?(t.y=+r[0],n+r[0].length):-1}function cL(t,e,n){var r=Zr.exec(e.slice(n,n+2));return r?(t.y=+r[0]+(+r[0]>68?1900:2e3),n+r[0].length):-1}function Eme(t,e,n){var r=/^(Z)|([+-]\d\d)(?::?(\d\d))?/.exec(e.slice(n,n+6));return r?(t.Z=r[1]?0:-(r[2]+(r[3]||"00")),n+r[0].length):-1}function Tme(t,e,n){var r=Zr.exec(e.slice(n,n+1));return r?(t.q=r[0]*3-3,n+r[0].length):-1}function Sme(t,e,n){var r=Zr.exec(e.slice(n,n+2));return r?(t.m=r[0]-1,n+r[0].length):-1}function dL(t,e,n){var r=Zr.exec(e.slice(n,n+2));return r?(t.d=+r[0],n+r[0].length):-1}function Ame(t,e,n){var r=Zr.exec(e.slice(n,n+3));return r?(t.m=0,t.d=+r[0],n+r[0].length):-1}function fL(t,e,n){var r=Zr.exec(e.slice(n,n+2));return r?(t.H=+r[0],n+r[0].length):-1}function Cme(t,e,n){var r=Zr.exec(e.slice(n,n+2));return r?(t.M=+r[0],n+r[0].length):-1}function Ime(t,e,n){var r=Zr.exec(e.slice(n,n+2));return r?(t.S=+r[0],n+r[0].length):-1}function Nme(t,e,n){var r=Zr.exec(e.slice(n,n+3));return r?(t.L=+r[0],n+r[0].length):-1}function Pme(t,e,n){var r=Zr.exec(e.slice(n,n+6));return r?(t.L=Math.floor(r[0]/1e3),n+r[0].length):-1}function Dme(t,e,n){var r=pme.exec(e.slice(n,n+1));return r?n+r[0].length:-1}function Rme(t,e,n){var r=Zr.exec(e.slice(n));return r?(t.Q=+r[0],n+r[0].length):-1}function kme(t,e,n){var r=Zr.exec(e.slice(n));return r?(t.s=+r[0],n+r[0].length):-1}function hL(t,e){return Kt(t.getDate(),e,2)}function Mme(t,e){return Kt(t.getHours(),e,2)}function Ome(t,e){return Kt(t.getHours()%12||12,e,2)}function jme(t,e){return Kt(1+ey.count(jl(t),t),e,3)}function Sz(t,e){return Kt(t.getMilliseconds(),e,3)}function Lme(t,e){return Sz(t,e)+"000"}function Vme(t,e){return Kt(t.getMonth()+1,e,2)}function Ume(t,e){return Kt(t.getMinutes(),e,2)}function Fme(t,e){return Kt(t.getSeconds(),e,2)}function Bme(t){var e=t.getDay();return e===0?7:e}function zme(t,e){return Kt(rb.count(jl(t)-1,t),e,2)}function Az(t){var e=t.getDay();return e>=4||e===0?Gh(t):Gh.ceil(t)}function qme(t,e){return t=Az(t),Kt(Gh.count(jl(t),t)+(jl(t).getDay()===4),e,2)}function Hme(t){return t.getDay()}function Gme(t,e){return Kt(jx.count(jl(t)-1,t),e,2)}function $me(t,e){return Kt(t.getFullYear()%100,e,2)}function Kme(t,e){return t=Az(t),Kt(t.getFullYear()%100,e,2)}function Wme(t,e){return Kt(t.getFullYear()%1e4,e,4)}function Yme(t,e){var n=t.getDay();return t=n>=4||n===0?Gh(t):Gh.ceil(t),Kt(t.getFullYear()%1e4,e,4)}function Zme(t){var e=t.getTimezoneOffset();return(e>0?"-":(e*=-1,"+"))+Kt(e/60|0,"0",2)+Kt(e%60,"0",2)}function mL(t,e){return Kt(t.getUTCDate(),e,2)}function Jme(t,e){return Kt(t.getUTCHours(),e,2)}function Qme(t,e){return Kt(t.getUTCHours()%12||12,e,2)}function Xme(t,e){return Kt(1+nb.count(Ll(t),t),e,3)}function Cz(t,e){return Kt(t.getUTCMilliseconds(),e,3)}function epe(t,e){return Cz(t,e)+"000"}function tpe(t,e){return Kt(t.getUTCMonth()+1,e,2)}function npe(t,e){return Kt(t.getUTCMinutes(),e,2)}function rpe(t,e){return Kt(t.getUTCSeconds(),e,2)}function ipe(t){var e=t.getUTCDay();return e===0?7:e}function ape(t,e){return Kt(ib.count(Ll(t)-1,t),e,2)}function Iz(t){var e=t.getUTCDay();return e>=4||e===0?$h(t):$h.ceil(t)}function spe(t,e){return t=Iz(t),Kt($h.count(Ll(t),t)+(Ll(t).getUTCDay()===4),e,2)}function ope(t){return t.getUTCDay()}function lpe(t,e){return Kt(Lx.count(Ll(t)-1,t),e,2)}function upe(t,e){return Kt(t.getUTCFullYear()%100,e,2)}function cpe(t,e){return t=Iz(t),Kt(t.getUTCFullYear()%100,e,2)}function dpe(t,e){return Kt(t.getUTCFullYear()%1e4,e,4)}function fpe(t,e){var n=t.getUTCDay();return t=n>=4||n===0?$h(t):$h.ceil(t),Kt(t.getUTCFullYear()%1e4,e,4)}function hpe(){return"+0000"}function pL(){return"%"}function gL(t){return+t}function yL(t){return Math.floor(+t/1e3)}var Ff,Nz,Pz;mpe({dateTime:"%x, %X",date:"%-m/%-d/%Y",time:"%-I:%M:%S %p",periods:["AM","PM"],days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],shortDays:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],months:["January","February","March","April","May","June","July","August","September","October","November","December"],shortMonths:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"]});function mpe(t){return Ff=mme(t),Nz=Ff.format,Ff.parse,Pz=Ff.utcFormat,Ff.utcParse,Ff}function ppe(t){return new Date(t)}function gpe(t){return t instanceof Date?+t:+new Date(+t)}function PI(t,e,n,r,i,a,s,l,c,h){var p=gI(),g=p.invert,x=p.domain,b=h(".%L"),C=h(":%S"),A=h("%I:%M"),D=h("%I %p"),R=h("%a %d"),j=h("%b %d"),O=h("%B"),q=h("%Y");function $(H){return(c(H)<H?b:l(H)<H?C:s(H)<H?A:a(H)<H?D:r(H)<H?i(H)<H?R:j:n(H)<H?O:q)(H)}return p.invert=function(H){return new Date(g(H))},p.domain=function(H){return arguments.length?x(Array.from(H,gpe)):x().map(ppe)},p.ticks=function(H){var U=x();return t(U[0],U[U.length-1],H??10)},p.tickFormat=function(H,U){return U==null?$:h(U)},p.nice=function(H){var U=x();return(!H||typeof H.range!="function")&&(H=e(U[0],U[U.length-1],H??10)),H?x(gz(U,H)):p},p.copy=function(){return Xg(p,PI(t,e,n,r,i,a,s,l,c,h))},p}function ype(){return vs.apply(PI(fme,hme,jl,II,rb,ey,AI,TI,vd,Nz).domain([new Date(2e3,0,1),new Date(2e3,0,2)]),arguments)}function vpe(){return vs.apply(PI(cme,dme,Ll,NI,ib,nb,CI,SI,vd,Pz).domain([Date.UTC(2e3,0,1),Date.UTC(2e3,0,2)]),arguments)}function ab(){var t=0,e=1,n,r,i,a,s=Ui,l=!1,c;function h(g){return g==null||isNaN(g=+g)?c:s(i===0?.5:(g=(a(g)-n)*i,l?Math.max(0,Math.min(1,g)):g))}h.domain=function(g){return arguments.length?([t,e]=g,n=a(t=+t),r=a(e=+e),i=n===r?0:1/(r-n),h):[t,e]},h.clamp=function(g){return arguments.length?(l=!!g,h):l},h.interpolator=function(g){return arguments.length?(s=g,h):s};function p(g){return function(x){var b,C;return arguments.length?([b,C]=x,s=g(b,C),h):[s(0),s(1)]}}return h.range=p(um),h.rangeRound=p(pI),h.unknown=function(g){return arguments.length?(c=g,h):c},function(g){return a=g,n=g(t),r=g(e),i=n===r?0:1/(r-n),h}}function wc(t,e){return e.domain(t.domain()).interpolator(t.interpolator()).clamp(t.clamp()).unknown(t.unknown())}function Dz(){var t=bc(ab()(Ui));return t.copy=function(){return wc(t,Dz())},Wl.apply(t,arguments)}function Rz(){var t=xI(ab()).domain([1,10]);return t.copy=function(){return wc(t,Rz()).base(t.base())},Wl.apply(t,arguments)}function kz(){var t=_I(ab());return t.copy=function(){return wc(t,kz()).constant(t.constant())},Wl.apply(t,arguments)}function DI(){var t=bI(ab());return t.copy=function(){return wc(t,DI()).exponent(t.exponent())},Wl.apply(t,arguments)}function xpe(){return DI.apply(null,arguments).exponent(.5)}function Mz(){var t=[],e=Ui;function n(r){if(r!=null&&!isNaN(r=+r))return e((Jg(t,r,1)-1)/(t.length-1))}return n.domain=function(r){if(!arguments.length)return t.slice();t=[];for(let i of r)i!=null&&!isNaN(i=+i)&&t.push(i);return t.sort(ec),n},n.interpolator=function(r){return arguments.length?(e=r,n):e},n.range=function(){return t.map((r,i)=>e(i/(t.length-1)))},n.quantiles=function(r){return Array.from({length:r+1},(i,a)=>ihe(t,a/r))},n.copy=function(){return Mz(e).domain(t)},Wl.apply(n,arguments)}function sb(){var t=0,e=.5,n=1,r=1,i,a,s,l,c,h=Ui,p,g=!1,x;function b(A){return isNaN(A=+A)?x:(A=.5+((A=+p(A))-a)*(r*A<r*a?l:c),h(g?Math.max(0,Math.min(1,A)):A))}b.domain=function(A){return arguments.length?([t,e,n]=A,i=p(t=+t),a=p(e=+e),s=p(n=+n),l=i===a?0:.5/(a-i),c=a===s?0:.5/(s-a),r=a<i?-1:1,b):[t,e,n]},b.clamp=function(A){return arguments.length?(g=!!A,b):g},b.interpolator=function(A){return arguments.length?(h=A,b):h};function C(A){return function(D){var R,j,O;return arguments.length?([R,j,O]=D,h=Dhe(A,[R,j,O]),b):[h(0),h(.5),h(1)]}}return b.range=C(um),b.rangeRound=C(pI),b.unknown=function(A){return arguments.length?(x=A,b):x},function(A){return p=A,i=A(t),a=A(e),s=A(n),l=i===a?0:.5/(a-i),c=a===s?0:.5/(s-a),r=a<i?-1:1,b}}function Oz(){var t=bc(sb()(Ui));return t.copy=function(){return wc(t,Oz())},Wl.apply(t,arguments)}function jz(){var t=xI(sb()).domain([.1,1,10]);return t.copy=function(){return wc(t,jz()).base(t.base())},Wl.apply(t,arguments)}function Lz(){var t=_I(sb());return t.copy=function(){return wc(t,Lz()).constant(t.constant())},Wl.apply(t,arguments)}function RI(){var t=bI(sb());return t.copy=function(){return wc(t,RI()).exponent(t.exponent())},Wl.apply(t,arguments)}function _pe(){return RI.apply(null,arguments).exponent(.5)}const Ep=Object.freeze(Object.defineProperty({__proto__:null,scaleBand:fI,scaleDiverging:Oz,scaleDivergingLog:jz,scaleDivergingPow:RI,scaleDivergingSqrt:_pe,scaleDivergingSymlog:Lz,scaleIdentity:pz,scaleImplicit:$1,scaleLinear:mz,scaleLog:yz,scaleOrdinal:dI,scalePoint:ohe,scalePow:wI,scaleQuantile:_z,scaleQuantize:bz,scaleRadial:xz,scaleSequential:Dz,scaleSequentialLog:Rz,scaleSequentialPow:DI,scaleSequentialQuantile:Mz,scaleSequentialSqrt:xpe,scaleSequentialSymlog:kz,scaleSqrt:eme,scaleSymlog:vz,scaleThreshold:wz,scaleTime:ype,scaleUtc:vpe,tickFormat:hz},Symbol.toStringTag,{value:"Module"}));var Ec=t=>t.chartData,kI=pe([Ec],t=>{var e=t.chartData!=null?t.chartData.length-1:0;return{chartData:t.chartData,computedData:t.computedData,dataEndIndex:e,dataStartIndex:0}}),ob=(t,e,n,r)=>r?kI(t):Ec(t);function oc(t){if(Array.isArray(t)&&t.length===2){var[e,n]=t;if(Cn(e)&&Cn(n))return!0}return!1}function vL(t,e,n){return n?t:[Math.min(t[0],e[0]),Math.max(t[1],e[1])]}function Vz(t,e){if(e&&typeof t!="function"&&Array.isArray(t)&&t.length===2){var[n,r]=t,i,a;if(Cn(n))i=n;else if(typeof n=="function")return;if(Cn(r))a=r;else if(typeof r=="function")return;var s=[i,a];if(oc(s))return s}}function bpe(t,e,n){if(!(!n&&e==null)){if(typeof t=="function"&&e!=null)try{var r=t(e,n);if(oc(r))return vL(r,e,n)}catch{}if(Array.isArray(t)&&t.length===2){var[i,a]=t,s,l;if(i==="auto")e!=null&&(s=Math.min(...e));else if(Je(i))s=i;else if(typeof i=="function")try{e!=null&&(s=i(e==null?void 0:e[0]))}catch{}else if(typeof i=="string"&&$5.test(i)){var c=$5.exec(i);if(c==null||e==null)s=void 0;else{var h=+c[1];s=e[0]-h}}else s=e==null?void 0:e[0];if(a==="auto")e!=null&&(l=Math.max(...e));else if(Je(a))l=a;else if(typeof a=="function")try{e!=null&&(l=a(e==null?void 0:e[1]))}catch{}else if(typeof a=="string"&&K5.test(a)){var p=K5.exec(a);if(p==null||e==null)l=void 0;else{var g=+p[1];l=e[1]+g}}else l=e==null?void 0:e[1];var x=[s,l];if(oc(x))return e==null?x:vL(x,e,n)}}}var cm=1e9,wpe={precision:20,rounding:4,toExpNeg:-7,toExpPos:21,LN10:"2.302585092994045684017991454684364207601101488628772976033327900967572609677352480235997205089598298341967784042286"},OI,Un=!0,ys="[DecimalError] ",Sd=ys+"Invalid argument: ",MI=ys+"Exponent out of range: ",dm=Math.floor,cd=Math.pow,Epe=/^(\d+(\.\d*)?|\.\d+)(e[+-]?\d+)?$/i,ja,$r=1e7,An=7,Uz=9007199254740991,Vx=dm(Uz/An),Ke={};Ke.absoluteValue=Ke.abs=function(){var t=new this.constructor(this);return t.s&&(t.s=1),t};Ke.comparedTo=Ke.cmp=function(t){var e,n,r,i,a=this;if(t=new a.constructor(t),a.s!==t.s)return a.s||-t.s;if(a.e!==t.e)return a.e>t.e^a.s<0?1:-1;for(r=a.d.length,i=t.d.length,e=0,n=r<i?r:i;e<n;++e)if(a.d[e]!==t.d[e])return a.d[e]>t.d[e]^a.s<0?1:-1;return r===i?0:r>i^a.s<0?1:-1};Ke.decimalPlaces=Ke.dp=function(){var t=this,e=t.d.length-1,n=(e-t.e)*An;if(e=t.d[e],e)for(;e%10==0;e/=10)n--;return n<0?0:n};Ke.dividedBy=Ke.div=function(t){return Al(this,new this.constructor(t))};Ke.dividedToIntegerBy=Ke.idiv=function(t){var e=this,n=e.constructor;return pn(Al(e,new n(t),0,1),n.precision)};Ke.equals=Ke.eq=function(t){return!this.cmp(t)};Ke.exponent=function(){return Er(this)};Ke.greaterThan=Ke.gt=function(t){return this.cmp(t)>0};Ke.greaterThanOrEqualTo=Ke.gte=function(t){return this.cmp(t)>=0};Ke.isInteger=Ke.isint=function(){return this.e>this.d.length-2};Ke.isNegative=Ke.isneg=function(){return this.s<0};Ke.isPositive=Ke.ispos=function(){return this.s>0};Ke.isZero=function(){return this.s===0};Ke.lessThan=Ke.lt=function(t){return this.cmp(t)<0};Ke.lessThanOrEqualTo=Ke.lte=function(t){return this.cmp(t)<1};Ke.logarithm=Ke.log=function(t){var e,n=this,r=n.constructor,i=r.precision,a=i+5;if(t===void 0)t=new r(10);else if(t=new r(t),t.s<1||t.eq(ja))throw Error(ys+"NaN");if(n.s<1)throw Error(ys+(n.s?"NaN":"-Infinity"));return n.eq(ja)?new r(0):(Un=!1,e=Al(pg(n,a),pg(t,a),a),Un=!0,pn(e,i))};Ke.minus=Ke.sub=function(t){var e=this;return t=new e.constructor(t),e.s==t.s?zz(e,t):Fz(e,(t.s=-t.s,t))};Ke.modulo=Ke.mod=function(t){var e,n=this,r=n.constructor,i=r.precision;if(t=new r(t),!t.s)throw Error(ys+"NaN");return n.s?(Un=!1,e=Al(n,t,0,1).times(t),Un=!0,n.minus(e)):pn(new r(n),i)};Ke.naturalExponential=Ke.exp=function(){return Bz(this)};Ke.naturalLogarithm=Ke.ln=function(){return pg(this)};Ke.negated=Ke.neg=function(){var t=new this.constructor(this);return t.s=-t.s||0,t};Ke.plus=Ke.add=function(t){var e=this;return t=new e.constructor(t),e.s==t.s?Fz(e,t):zz(e,(t.s=-t.s,t))};Ke.precision=Ke.sd=function(t){var e,n,r,i=this;if(t!==void 0&&t!==!!t&&t!==1&&t!==0)throw Error(Sd+t);if(e=Er(i)+1,r=i.d.length-1,n=r*An+1,r=i.d[r],r){for(;r%10==0;r/=10)n--;for(r=i.d[0];r>=10;r/=10)n++}return t&&e>n?e:n};Ke.squareRoot=Ke.sqrt=function(){var t,e,n,r,i,a,s,l=this,c=l.constructor;if(l.s<1){if(!l.s)return new c(0);throw Error(ys+"NaN")}for(t=Er(l),Un=!1,i=Math.sqrt(+l),i==0||i==1/0?(e=Ao(l.d),(e.length+t)%2==0&&(e+="0"),i=Math.sqrt(e),t=dm((t+1)/2)-(t<0||t%2),i==1/0?e="5e"+t:(e=i.toExponential(),e=e.slice(0,e.indexOf("e")+1)+t),r=new c(e)):r=new c(i.toString()),n=c.precision,i=s=n+3;;)if(a=r,r=a.plus(Al(l,a,s+2)).times(.5),Ao(a.d).slice(0,s)===(e=Ao(r.d)).slice(0,s)){if(e=e.slice(s-3,s+1),i==s&&e=="4999"){if(pn(a,n+1,0),a.times(a).eq(l)){r=a;break}}else if(e!="9999")break;s+=4}return Un=!0,pn(r,n)};Ke.times=Ke.mul=function(t){var e,n,r,i,a,s,l,c,h,p=this,g=p.constructor,x=p.d,b=(t=new g(t)).d;if(!p.s||!t.s)return new g(0);for(t.s*=p.s,n=p.e+t.e,c=x.length,h=b.length,c<h&&(a=x,x=b,b=a,s=c,c=h,h=s),a=[],s=c+h,r=s;r--;)a.push(0);for(r=h;--r>=0;){for(e=0,i=c+r;i>r;)l=a[i]+b[r]*x[i-r-1]+e,a[i--]=l%$r|0,e=l/$r|0;a[i]=(a[i]+e)%$r|0}for(;!a[--s];)a.pop();return e?++n:a.shift(),t.d=a,t.e=n,Un?pn(t,g.precision):t};Ke.toDecimalPlaces=Ke.todp=function(t,e){var n=this,r=n.constructor;return n=new r(n),t===void 0?n:(Lo(t,0,cm),e===void 0?e=r.rounding:Lo(e,0,8),pn(n,t+Er(n)+1,e))};Ke.toExponential=function(t,e){var n,r=this,i=r.constructor;return t===void 0?n=Bd(r,!0):(Lo(t,0,cm),e===void 0?e=i.rounding:Lo(e,0,8),r=pn(new i(r),t+1,e),n=Bd(r,!0,t+1)),n};Ke.toFixed=function(t,e){var n,r,i=this,a=i.constructor;return t===void 0?Bd(i):(Lo(t,0,cm),e===void 0?e=a.rounding:Lo(e,0,8),r=pn(new a(i),t+Er(i)+1,e),n=Bd(r.abs(),!1,t+Er(r)+1),i.isneg()&&!i.isZero()?"-"+n:n)};Ke.toInteger=Ke.toint=function(){var t=this,e=t.constructor;return pn(new e(t),Er(t)+1,e.rounding)};Ke.toNumber=function(){return+this};Ke.toPower=Ke.pow=function(t){var e,n,r,i,a,s,l=this,c=l.constructor,h=12,p=+(t=new c(t));if(!t.s)return new c(ja);if(l=new c(l),!l.s){if(t.s<1)throw Error(ys+"Infinity");return l}if(l.eq(ja))return l;if(r=c.precision,t.eq(ja))return pn(l,r);if(e=t.e,n=t.d.length-1,s=e>=n,a=l.s,s){if((n=p<0?-p:p)<=Uz){for(i=new c(ja),e=Math.ceil(r/An+4),Un=!1;n%2&&(i=i.times(l),_L(i.d,e)),n=dm(n/2),n!==0;)l=l.times(l),_L(l.d,e);return Un=!0,t.s<0?new c(ja).div(i):pn(i,r)}}else if(a<0)throw Error(ys+"NaN");return a=a<0&&t.d[Math.max(e,n)]&1?-1:1,l.s=1,Un=!1,i=t.times(pg(l,r+h)),Un=!0,i=Bz(i),i.s=a,i};Ke.toPrecision=function(t,e){var n,r,i=this,a=i.constructor;return t===void 0?(n=Er(i),r=Bd(i,n<=a.toExpNeg||n>=a.toExpPos)):(Lo(t,1,cm),e===void 0?e=a.rounding:Lo(e,0,8),i=pn(new a(i),t,e),n=Er(i),r=Bd(i,t<=n||n<=a.toExpNeg,t)),r};Ke.toSignificantDigits=Ke.tosd=function(t,e){var n=this,r=n.constructor;return t===void 0?(t=r.precision,e=r.rounding):(Lo(t,1,cm),e===void 0?e=r.rounding:Lo(e,0,8)),pn(new r(n),t,e)};Ke.toString=Ke.valueOf=Ke.val=Ke.toJSON=Ke[Symbol.for("nodejs.util.inspect.custom")]=function(){var t=this,e=Er(t),n=t.constructor;return Bd(t,e<=n.toExpNeg||e>=n.toExpPos)};function Fz(t,e){var n,r,i,a,s,l,c,h,p=t.constructor,g=p.precision;if(!t.s||!e.s)return e.s||(e=new p(t)),Un?pn(e,g):e;if(c=t.d,h=e.d,s=t.e,i=e.e,c=c.slice(),a=s-i,a){for(a<0?(r=c,a=-a,l=h.length):(r=h,i=s,l=c.length),s=Math.ceil(g/An),l=s>l?s+1:l+1,a>l&&(a=l,r.length=1),r.reverse();a--;)r.push(0);r.reverse()}for(l=c.length,a=h.length,l-a<0&&(a=l,r=h,h=c,c=r),n=0;a;)n=(c[--a]=c[a]+h[a]+n)/$r|0,c[a]%=$r;for(n&&(c.unshift(n),++i),l=c.length;c[--l]==0;)c.pop();return e.d=c,e.e=i,Un?pn(e,g):e}function Lo(t,e,n){if(t!==~~t||t<e||t>n)throw Error(Sd+t)}function Ao(t){var e,n,r,i=t.length-1,a="",s=t[0];if(i>0){for(a+=s,e=1;e<i;e++)r=t[e]+"",n=An-r.length,n&&(a+=Lu(n)),a+=r;s=t[e],r=s+"",n=An-r.length,n&&(a+=Lu(n))}else if(s===0)return"0";for(;s%10===0;)s/=10;return a+s}var Al=(function(){function t(r,i){var a,s=0,l=r.length;for(r=r.slice();l--;)a=r[l]*i+s,r[l]=a%$r|0,s=a/$r|0;return s&&r.unshift(s),r}function e(r,i,a,s){var l,c;if(a!=s)c=a>s?1:-1;else for(l=c=0;l<a;l++)if(r[l]!=i[l]){c=r[l]>i[l]?1:-1;break}return c}function n(r,i,a){for(var s=0;a--;)r[a]-=s,s=r[a]<i[a]?1:0,r[a]=s*$r+r[a]-i[a];for(;!r[0]&&r.length>1;)r.shift()}return function(r,i,a,s){var l,c,h,p,g,x,b,C,A,D,R,j,O,q,$,H,U,z,B=r.constructor,Z=r.s==i.s?1:-1,K=r.d,J=i.d;if(!r.s)return new B(r);if(!i.s)throw Error(ys+"Division by zero");for(c=r.e-i.e,U=J.length,$=K.length,b=new B(Z),C=b.d=[],h=0;J[h]==(K[h]||0);)++h;if(J[h]>(K[h]||0)&&--c,a==null?j=a=B.precision:s?j=a+(Er(r)-Er(i))+1:j=a,j<0)return new B(0);if(j=j/An+2|0,h=0,U==1)for(p=0,J=J[0],j++;(h<$||p)&&j--;h++)O=p*$r+(K[h]||0),C[h]=O/J|0,p=O%J|0;else{for(p=$r/(J[0]+1)|0,p>1&&(J=t(J,p),K=t(K,p),U=J.length,$=K.length),q=U,A=K.slice(0,U),D=A.length;D<U;)A[D++]=0;z=J.slice(),z.unshift(0),H=J[0],J[1]>=$r/2&&++H;do p=0,l=e(J,A,U,D),l<0?(R=A[0],U!=D&&(R=R*$r+(A[1]||0)),p=R/H|0,p>1?(p>=$r&&(p=$r-1),g=t(J,p),x=g.length,D=A.length,l=e(g,A,x,D),l==1&&(p--,n(g,U<x?z:J,x))):(p==0&&(l=p=1),g=J.slice()),x=g.length,x<D&&g.unshift(0),n(A,g,D),l==-1&&(D=A.length,l=e(J,A,U,D),l<1&&(p++,n(A,U<D?z:J,D))),D=A.length):l===0&&(p++,A=[0]),C[h++]=p,l&&A[0]?A[D++]=K[q]||0:(A=[K[q]],D=1);while((q++<$||A[0]!==void 0)&&j--)}return C[0]||C.shift(),b.e=c,pn(b,s?a+Er(b)+1:a)}})();function Bz(t,e){var n,r,i,a,s,l,c=0,h=0,p=t.constructor,g=p.precision;if(Er(t)>16)throw Error(MI+Er(t));if(!t.s)return new p(ja);for(Un=!1,l=g,s=new p(.03125);t.abs().gte(.1);)t=t.times(s),h+=5;for(r=Math.log(cd(2,h))/Math.LN10*2+5|0,l+=r,n=i=a=new p(ja),p.precision=l;;){if(i=pn(i.times(t),l),n=n.times(++c),s=a.plus(Al(i,n,l)),Ao(s.d).slice(0,l)===Ao(a.d).slice(0,l)){for(;h--;)a=pn(a.times(a),l);return p.precision=g,e==null?(Un=!0,pn(a,g)):a}a=s}}function Er(t){for(var e=t.e*An,n=t.d[0];n>=10;n/=10)e++;return e}function YT(t,e,n){if(e>t.LN10.sd())throw Un=!0,n&&(t.precision=n),Error(ys+"LN10 precision limit exceeded");return pn(new t(t.LN10),e)}function Lu(t){for(var e="";t--;)e+="0";return e}function pg(t,e){var n,r,i,a,s,l,c,h,p,g=1,x=10,b=t,C=b.d,A=b.constructor,D=A.precision;if(b.s<1)throw Error(ys+(b.s?"NaN":"-Infinity"));if(b.eq(ja))return new A(0);if(e==null?(Un=!1,h=D):h=e,b.eq(10))return e==null&&(Un=!0),YT(A,h);if(h+=x,A.precision=h,n=Ao(C),r=n.charAt(0),a=Er(b),Math.abs(a)<15e14){for(;r<7&&r!=1||r==1&&n.charAt(1)>3;)b=b.times(t),n=Ao(b.d),r=n.charAt(0),g++;a=Er(b),r>1?(b=new A("0."+n),a++):b=new A(r+"."+n.slice(1))}else return c=YT(A,h+2,D).times(a+""),b=pg(new A(r+"."+n.slice(1)),h-x).plus(c),A.precision=D,e==null?(Un=!0,pn(b,D)):b;for(l=s=b=Al(b.minus(ja),b.plus(ja),h),p=pn(b.times(b),h),i=3;;){if(s=pn(s.times(p),h),c=l.plus(Al(s,new A(i),h)),Ao(c.d).slice(0,h)===Ao(l.d).slice(0,h))return l=l.times(2),a!==0&&(l=l.plus(YT(A,h+2,D).times(a+""))),l=Al(l,new A(g),h),A.precision=D,e==null?(Un=!0,pn(l,D)):l;l=c,i+=2}}function xL(t,e){var n,r,i;for((n=e.indexOf("."))>-1&&(e=e.replace(".","")),(r=e.search(/e/i))>0?(n<0&&(n=r),n+=+e.slice(r+1),e=e.substring(0,r)):n<0&&(n=e.length),r=0;e.charCodeAt(r)===48;)++r;for(i=e.length;e.charCodeAt(i-1)===48;)--i;if(e=e.slice(r,i),e){if(i-=r,n=n-r-1,t.e=dm(n/An),t.d=[],r=(n+1)%An,n<0&&(r+=An),r<i){for(r&&t.d.push(+e.slice(0,r)),i-=An;r<i;)t.d.push(+e.slice(r,r+=An));e=e.slice(r),r=An-e.length}else r-=i;for(;r--;)e+="0";if(t.d.push(+e),Un&&(t.e>Vx||t.e<-Vx))throw Error(MI+n)}else t.s=0,t.e=0,t.d=[0];return t}function pn(t,e,n){var r,i,a,s,l,c,h,p,g=t.d;for(s=1,a=g[0];a>=10;a/=10)s++;if(r=e-s,r<0)r+=An,i=e,h=g[p=0];else{if(p=Math.ceil((r+1)/An),a=g.length,p>=a)return t;for(h=a=g[p],s=1;a>=10;a/=10)s++;r%=An,i=r-An+s}if(n!==void 0&&(a=cd(10,s-i-1),l=h/a%10|0,c=e<0||g[p+1]!==void 0||h%a,c=n<4?(l||c)&&(n==0||n==(t.s<0?3:2)):l>5||l==5&&(n==4||c||n==6&&(r>0?i>0?h/cd(10,s-i):0:g[p-1])%10&1||n==(t.s<0?8:7))),e<1||!g[0])return c?(a=Er(t),g.length=1,e=e-a-1,g[0]=cd(10,(An-e%An)%An),t.e=dm(-e/An)||0):(g.length=1,g[0]=t.e=t.s=0),t;if(r==0?(g.length=p,a=1,p--):(g.length=p+1,a=cd(10,An-r),g[p]=i>0?(h/cd(10,s-i)%cd(10,i)|0)*a:0),c)for(;;)if(p==0){(g[0]+=a)==$r&&(g[0]=1,++t.e);break}else{if(g[p]+=a,g[p]!=$r)break;g[p--]=0,a=1}for(r=g.length;g[--r]===0;)g.pop();if(Un&&(t.e>Vx||t.e<-Vx))throw Error(MI+Er(t));return t}function zz(t,e){var n,r,i,a,s,l,c,h,p,g,x=t.constructor,b=x.precision;if(!t.s||!e.s)return e.s?e.s=-e.s:e=new x(t),Un?pn(e,b):e;if(c=t.d,g=e.d,r=e.e,h=t.e,c=c.slice(),s=h-r,s){for(p=s<0,p?(n=c,s=-s,l=g.length):(n=g,r=h,l=c.length),i=Math.max(Math.ceil(b/An),l)+2,s>i&&(s=i,n.length=1),n.reverse(),i=s;i--;)n.push(0);n.reverse()}else{for(i=c.length,l=g.length,p=i<l,p&&(l=i),i=0;i<l;i++)if(c[i]!=g[i]){p=c[i]<g[i];break}s=0}for(p&&(n=c,c=g,g=n,e.s=-e.s),l=c.length,i=g.length-l;i>0;--i)c[l++]=0;for(i=g.length;i>s;){if(c[--i]<g[i]){for(a=i;a&&c[--a]===0;)c[a]=$r-1;--c[a],c[i]+=$r}c[i]-=g[i]}for(;c[--l]===0;)c.pop();for(;c[0]===0;c.shift())--r;return c[0]?(e.d=c,e.e=r,Un?pn(e,b):e):new x(0)}function Bd(t,e,n){var r,i=Er(t),a=Ao(t.d),s=a.length;return e?(n&&(r=n-s)>0?a=a.charAt(0)+"."+a.slice(1)+Lu(r):s>1&&(a=a.charAt(0)+"."+a.slice(1)),a=a+(i<0?"e":"e+")+i):i<0?(a="0."+Lu(-i-1)+a,n&&(r=n-s)>0&&(a+=Lu(r))):i>=s?(a+=Lu(i+1-s),n&&(r=n-i-1)>0&&(a=a+"."+Lu(r))):((r=i+1)<s&&(a=a.slice(0,r)+"."+a.slice(r)),n&&(r=n-s)>0&&(i+1===s&&(a+="."),a+=Lu(r))),t.s<0?"-"+a:a}function _L(t,e){if(t.length>e)return t.length=e,!0}function qz(t){var e,n,r;function i(a){var s=this;if(!(s instanceof i))return new i(a);if(s.constructor=i,a instanceof i){s.s=a.s,s.e=a.e,s.d=(a=a.d)?a.slice():a;return}if(typeof a=="number"){if(a*0!==0)throw Error(Sd+a);if(a>0)s.s=1;else if(a<0)a=-a,s.s=-1;else{s.s=0,s.e=0,s.d=[0];return}if(a===~~a&&a<1e7){s.e=0,s.d=[a];return}return xL(s,a.toString())}else if(typeof a!="string")throw Error(Sd+a);if(a.charCodeAt(0)===45?(a=a.slice(1),s.s=-1):s.s=1,Epe.test(a))xL(s,a);else throw Error(Sd+a)}if(i.prototype=Ke,i.ROUND_UP=0,i.ROUND_DOWN=1,i.ROUND_CEIL=2,i.ROUND_FLOOR=3,i.ROUND_HALF_UP=4,i.ROUND_HALF_DOWN=5,i.ROUND_HALF_EVEN=6,i.ROUND_HALF_CEIL=7,i.ROUND_HALF_FLOOR=8,i.clone=qz,i.config=i.set=Tpe,t===void 0&&(t={}),t)for(r=["precision","rounding","toExpNeg","toExpPos","LN10"],e=0;e<r.length;)t.hasOwnProperty(n=r[e++])||(t[n]=this[n]);return i.config(t),i}function Tpe(t){if(!t||typeof t!="object")throw Error(ys+"Object expected");var e,n,r,i=["precision",1,cm,"rounding",0,8,"toExpNeg",-1/0,0,"toExpPos",0,1/0];for(e=0;e<i.length;e+=3)if((r=t[n=i[e]])!==void 0)if(dm(r)===r&&r>=i[e+1]&&r<=i[e+2])this[n]=r;else throw Error(Sd+n+": "+r);if((r=t[n="LN10"])!==void 0)if(r==Math.LN10)this[n]=new this(r);else throw Error(Sd+n+": "+r);return this}var OI=qz(wpe);ja=new OI(1);const nn=OI;var Spe=t=>t,Hz={},Gz=t=>t===Hz,bL=t=>function e(){return arguments.length===0||arguments.length===1&&Gz(arguments.length<=0?void 0:arguments[0])?e:t(...arguments)},$z=(t,e)=>t===1?e:bL(function(){for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];var a=r.filter(s=>s!==Hz).length;return a>=t?e(...r):$z(t-a,bL(function(){for(var s=arguments.length,l=new Array(s),c=0;c<s;c++)l[c]=arguments[c];var h=r.map(p=>Gz(p)?l.shift():p);return e(...h,...l)}))}),Ape=t=>$z(t.length,t),Z1=(t,e)=>{for(var n=[],r=t;r<e;++r)n[r-t]=r;return n},Cpe=Ape((t,e)=>Array.isArray(e)?e.map(t):Object.keys(e).map(n=>e[n]).map(t)),Ipe=function(){for(var e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];if(!n.length)return Spe;var i=n.reverse(),a=i[0],s=i.slice(1);return function(){return s.reduce((l,c)=>c(l),a(...arguments))}},J1=t=>Array.isArray(t)?t.reverse():t.split("").reverse().join("");function Kz(t){var e;return t===0?e=1:e=Math.floor(new nn(t).abs().log(10).toNumber())+1,e}function Wz(t,e,n){for(var r=new nn(t),i=0,a=[];r.lt(e)&&i<1e5;)a.push(r.toNumber()),r=r.add(n),i++;return a}var Yz=t=>{var[e,n]=t,[r,i]=[e,n];return e>n&&([r,i]=[n,e]),[r,i]},Zz=(t,e,n)=>{if(t.lte(0))return new nn(0);var r=Kz(t.toNumber()),i=new nn(10).pow(r),a=t.div(i),s=r!==1?.05:.1,l=new nn(Math.ceil(a.div(s).toNumber())).add(n).mul(s),c=l.mul(i);return e?new nn(c.toNumber()):new nn(Math.ceil(c.toNumber()))},Npe=(t,e,n)=>{var r=new nn(1),i=new nn(t);if(!i.isint()&&n){var a=Math.abs(t);a<1?(r=new nn(10).pow(Kz(t)-1),i=new nn(Math.floor(i.div(r).toNumber())).mul(r)):a>1&&(i=new nn(Math.floor(t)))}else t===0?i=new nn(Math.floor((e-1)/2)):n||(i=new nn(Math.floor(t)));var s=Math.floor((e-1)/2),l=Ipe(Cpe(c=>i.add(new nn(c-s).mul(r)).toNumber()),Z1);return l(0,e)},Jz=function(e,n,r,i){var a=arguments.length>4&&arguments[4]!==void 0?arguments[4]:0;if(!Number.isFinite((n-e)/(r-1)))return{step:new nn(0),tickMin:new nn(0),tickMax:new nn(0)};var s=Zz(new nn(n).sub(e).div(r-1),i,a),l;e<=0&&n>=0?l=new nn(0):(l=new nn(e).add(n).div(2),l=l.sub(new nn(l).mod(s)));var c=Math.ceil(l.sub(e).div(s).toNumber()),h=Math.ceil(new nn(n).sub(l).div(s).toNumber()),p=c+h+1;return p>r?Jz(e,n,r,i,a+1):(p<r&&(h=n>0?h+(r-p):h,c=n>0?c:c+(r-p)),{step:s,tickMin:l.sub(new nn(c).mul(s)),tickMax:l.add(new nn(h).mul(s))})},Ppe=function(e){var[n,r]=e,i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:6,a=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0,s=Math.max(i,2),[l,c]=Yz([n,r]);if(l===-1/0||c===1/0){var h=c===1/0?[l,...Z1(0,i-1).map(()=>1/0)]:[...Z1(0,i-1).map(()=>-1/0),c];return n>r?J1(h):h}if(l===c)return Npe(l,i,a);var{step:p,tickMin:g,tickMax:x}=Jz(l,c,s,a,0),b=Wz(g,x.add(new nn(.1).mul(p)),p);return n>r?J1(b):b},Dpe=function(e,n){var[r,i]=e,a=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0,[s,l]=Yz([r,i]);if(s===-1/0||l===1/0)return[r,i];if(s===l)return[s];var c=Math.max(n,2),h=Zz(new nn(l).sub(s).div(c-1),a,0),p=[...Wz(new nn(s),new nn(l),h),l];return a===!1&&(p=p.map(g=>Math.round(g))),r>i?J1(p):p},Qz=t=>t.rootProps.maxBarSize,Rpe=t=>t.rootProps.barGap,Xz=t=>t.rootProps.barCategoryGap,kpe=t=>t.rootProps.barSize,ty=t=>t.rootProps.stackOffset,eq=t=>t.rootProps.reverseStackOrder,jI=t=>t.options.chartName,LI=t=>t.rootProps.syncId,tq=t=>t.rootProps.syncMethod,VI=t=>t.options.eventEmitter,ur={grid:-100,barBackground:-50,area:100,cursorRectangle:200,bar:300,line:400,axis:500,scatter:600,activeBar:1e3,cursorLine:1100,activeDot:1200,label:2e3},gl={allowDuplicatedCategory:!0,angleAxisId:0,reversed:!1,scale:"auto",tick:!0,type:"category"},ka={allowDataOverflow:!1,allowDuplicatedCategory:!0,radiusAxisId:0,scale:"auto",tick:!0,tickCount:5,type:"number"},lb=(t,e)=>{if(!(!t||!e))return t!=null&&t.reversed?[e[1],e[0]]:e},Mpe={allowDataOverflow:!1,allowDecimals:!1,allowDuplicatedCategory:!1,dataKey:void 0,domain:void 0,id:gl.angleAxisId,includeHidden:!1,name:void 0,reversed:gl.reversed,scale:gl.scale,tick:gl.tick,tickCount:void 0,ticks:void 0,type:gl.type,unit:void 0},Ope={allowDataOverflow:ka.allowDataOverflow,allowDecimals:!1,allowDuplicatedCategory:ka.allowDuplicatedCategory,dataKey:void 0,domain:void 0,id:ka.radiusAxisId,includeHidden:!1,name:void 0,reversed:!1,scale:ka.scale,tick:ka.tick,tickCount:ka.tickCount,ticks:void 0,type:ka.type,unit:void 0},jpe={allowDataOverflow:!1,allowDecimals:!1,allowDuplicatedCategory:gl.allowDuplicatedCategory,dataKey:void 0,domain:void 0,id:gl.angleAxisId,includeHidden:!1,name:void 0,reversed:!1,scale:gl.scale,tick:gl.tick,tickCount:void 0,ticks:void 0,type:"number",unit:void 0},Lpe={allowDataOverflow:ka.allowDataOverflow,allowDecimals:!1,allowDuplicatedCategory:ka.allowDuplicatedCategory,dataKey:void 0,domain:void 0,id:ka.radiusAxisId,includeHidden:!1,name:void 0,reversed:!1,scale:ka.scale,tick:ka.tick,tickCount:ka.tickCount,ticks:void 0,type:"category",unit:void 0},UI=(t,e)=>t.polarAxis.angleAxis[e]!=null?t.polarAxis.angleAxis[e]:t.layout.layoutType==="radial"?jpe:Mpe,FI=(t,e)=>t.polarAxis.radiusAxis[e]!=null?t.polarAxis.radiusAxis[e]:t.layout.layoutType==="radial"?Lpe:Ope,ub=t=>t.polarOptions,BI=pe([$l,Kl,Rr],XB),nq=pe([ub,BI],(t,e)=>{if(t!=null)return Si(t.innerRadius,e,0)}),rq=pe([ub,BI],(t,e)=>{if(t!=null)return Si(t.outerRadius,e,e*.8)}),Vpe=t=>{if(t==null)return[0,0];var{startAngle:e,endAngle:n}=t;return[e,n]},iq=pe([ub],Vpe);pe([UI,iq],lb);var aq=pe([BI,nq,rq],(t,e,n)=>{if(!(t==null||e==null||n==null))return[e,n]});pe([FI,aq],lb);var sq=pe([Lt,ub,nq,rq,$l,Kl],(t,e,n,r,i,a)=>{if(!(t!=="centric"&&t!=="radial"||e==null||n==null||r==null)){var{cx:s,cy:l,startAngle:c,endAngle:h}=e;return{cx:Si(s,i,i/2),cy:Si(l,a,a/2),innerRadius:n,outerRadius:r,startAngle:c,endAngle:h,clockWise:!1}}}),zn=(t,e)=>e,ny=(t,e,n)=>n;function zI(t){return t==null?void 0:t.id}function oq(t,e,n){var{chartData:r=[]}=e,{allowDuplicatedCategory:i,dataKey:a}=n,s=new Map;return t.forEach(l=>{var c,h=(c=l.data)!==null&&c!==void 0?c:r;if(!(h==null||h.length===0)){var p=zI(l);h.forEach((g,x)=>{var b=a==null||i?x:String(mn(g,a,null)),C=mn(g,l.dataKey,0),A;s.has(b)?A=s.get(b):A={},Object.assign(A,{[p]:C}),s.set(b,A)})}}),Array.from(s.values())}function cb(t){return t.stackId!=null&&t.dataKey!=null}var db=(t,e)=>t===e?!0:t==null||e==null?!1:t[0]===e[0]&&t[1]===e[1];function fb(t,e){return Array.isArray(t)&&Array.isArray(e)&&t.length===0&&e.length===0?!0:t===e}function Upe(t,e){if(t.length===e.length){for(var n=0;n<t.length;n++)if(t[n]!==e[n])return!1;return!0}return!1}var Mr=t=>{var e=Lt(t);return e==="horizontal"?"xAxis":e==="vertical"?"yAxis":e==="centric"?"angleAxis":"radiusAxis"},fm=t=>t.tooltip.settings.axisId;function wL(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function Ux(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?wL(Object(n),!0).forEach(function(r){Fpe(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):wL(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function Fpe(t,e,n){return(e=Bpe(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function Bpe(t){var e=zpe(t,"string");return typeof e=="symbol"?e:e+""}function zpe(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var Q1=[0,"auto"],qr={allowDataOverflow:!1,allowDecimals:!0,allowDuplicatedCategory:!0,angle:0,dataKey:void 0,domain:void 0,height:30,hide:!0,id:0,includeHidden:!1,interval:"preserveEnd",minTickGap:5,mirror:!1,name:void 0,orientation:"bottom",padding:{left:0,right:0},reversed:!1,scale:"auto",tick:!0,tickCount:5,tickFormatter:void 0,ticks:void 0,type:"category",unit:void 0},lq=(t,e)=>t.cartesianAxis.xAxis[e],Bo=(t,e)=>{var n=lq(t,e);return n??qr},Hr={allowDataOverflow:!1,allowDecimals:!0,allowDuplicatedCategory:!0,angle:0,dataKey:void 0,domain:Q1,hide:!0,id:0,includeHidden:!1,interval:"preserveEnd",minTickGap:5,mirror:!1,name:void 0,orientation:"left",padding:{top:0,bottom:0},reversed:!1,scale:"auto",tick:!0,tickCount:5,tickFormatter:void 0,ticks:void 0,type:"number",unit:void 0,width:Gg},uq=(t,e)=>t.cartesianAxis.yAxis[e],zo=(t,e)=>{var n=uq(t,e);return n??Hr},qpe={domain:[0,"auto"],includeHidden:!1,reversed:!1,allowDataOverflow:!1,allowDuplicatedCategory:!1,dataKey:void 0,id:0,name:"",range:[64,64],scale:"auto",type:"number",unit:""},qI=(t,e)=>{var n=t.cartesianAxis.zAxis[e];return n??qpe},Gn=(t,e,n)=>{switch(e){case"xAxis":return Bo(t,n);case"yAxis":return zo(t,n);case"zAxis":return qI(t,n);case"angleAxis":return UI(t,n);case"radiusAxis":return FI(t,n);default:throw new Error("Unexpected axis type: ".concat(e))}},Hpe=(t,e,n)=>{switch(e){case"xAxis":return Bo(t,n);case"yAxis":return zo(t,n);default:throw new Error("Unexpected axis type: ".concat(e))}},ry=(t,e,n)=>{switch(e){case"xAxis":return Bo(t,n);case"yAxis":return zo(t,n);case"angleAxis":return UI(t,n);case"radiusAxis":return FI(t,n);default:throw new Error("Unexpected axis type: ".concat(e))}},cq=t=>t.graphicalItems.cartesianItems.some(e=>e.type==="bar")||t.graphicalItems.polarItems.some(e=>e.type==="radialBar");function HI(t,e){return n=>{switch(t){case"xAxis":return"xAxisId"in n&&n.xAxisId===e;case"yAxis":return"yAxisId"in n&&n.yAxisId===e;case"zAxis":return"zAxisId"in n&&n.zAxisId===e;case"angleAxis":return"angleAxisId"in n&&n.angleAxisId===e;case"radiusAxis":return"radiusAxisId"in n&&n.radiusAxisId===e;default:return!1}}}var hb=t=>t.graphicalItems.cartesianItems,Gpe=pe([zn,ny],HI),GI=(t,e,n)=>t.filter(n).filter(r=>(e==null?void 0:e.includeHidden)===!0?!0:!r.hide),iy=pe([hb,Gn,Gpe],GI,{memoizeOptions:{resultEqualityCheck:fb}}),dq=pe([iy],t=>t.filter(e=>e.type==="area"||e.type==="bar").filter(cb)),fq=t=>t.filter(e=>!("stackId"in e)||e.stackId===void 0),$pe=pe([iy],fq),$I=t=>t.map(e=>e.data).filter(Boolean).flat(1),Kpe=pe([iy],$I,{memoizeOptions:{resultEqualityCheck:fb}}),KI=(t,e)=>{var{chartData:n=[],dataStartIndex:r,dataEndIndex:i}=e;return t.length>0?t:n.slice(r,i+1)},WI=pe([Kpe,ob],KI),YI=(t,e,n)=>(e==null?void 0:e.dataKey)!=null?t.map(r=>({value:mn(r,e.dataKey)})):n.length>0?n.map(r=>r.dataKey).flatMap(r=>t.map(i=>({value:mn(i,r)}))):t.map(r=>({value:r})),mb=pe([WI,Gn,iy],YI);function hq(t,e){switch(t){case"xAxis":return e.direction==="x";case"yAxis":return e.direction==="y";default:return!1}}function d0(t){if(ps(t)||t instanceof Date){var e=Number(t);if(Cn(e))return e}}function EL(t){if(Array.isArray(t)){var e=[d0(t[0]),d0(t[1])];return oc(e)?e:void 0}var n=d0(t);if(n!=null)return[n,n]}function Vl(t){return t.map(d0).filter(zoe)}function Wpe(t,e,n){return!n||typeof e!="number"||Ga(e)?[]:n.length?Vl(n.flatMap(r=>{var i=mn(t,r.dataKey),a,s;if(Array.isArray(i)?[a,s]=i:a=s=i,!(!Cn(a)||!Cn(s)))return[e-a,e+s]})):[]}var Or=t=>{var e=Mr(t),n=fm(t);return ry(t,e,n)},ay=pe([Or],t=>t==null?void 0:t.dataKey),Ype=pe([dq,ob,Or],oq),mq=(t,e,n,r)=>{var i={},a=e.reduce((s,l)=>(l.stackId==null||(s[l.stackId]==null&&(s[l.stackId]=[]),s[l.stackId].push(l)),s),i);return Object.fromEntries(Object.entries(a).map(s=>{var[l,c]=s,h=r?[...c].reverse():c,p=h.map(zI);return[l,{stackedData:pce(t,p,n),graphicalItems:h}]}))},X1=pe([Ype,dq,ty,eq],mq),pq=(t,e,n,r)=>{var{dataStartIndex:i,dataEndIndex:a}=e;if(r==null&&n!=="zAxis"){var s=_ce(t,i,a);if(!(s!=null&&s[0]===0&&s[1]===0))return s}},Zpe=pe([Gn],t=>t.allowDataOverflow),ZI=t=>{var e;if(t==null||!("domain"in t))return Q1;if(t.domain!=null)return t.domain;if(t.ticks!=null){if(t.type==="number"){var n=Vl(t.ticks);return[Math.min(...n),Math.max(...n)]}if(t.type==="category")return t.ticks.map(String)}return(e=t==null?void 0:t.domain)!==null&&e!==void 0?e:Q1},JI=pe([Gn],ZI),QI=pe([JI,Zpe],Vz),Jpe=pe([X1,Ec,zn,QI],pq,{memoizeOptions:{resultEqualityCheck:db}}),pb=t=>t.errorBars,Qpe=(t,e,n)=>t.flatMap(r=>e[r.id]).filter(Boolean).filter(r=>hq(n,r)),Fx=function(){for(var e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];var i=n.filter(Boolean);if(i.length!==0){var a=i.flat(),s=Math.min(...a),l=Math.max(...a);return[s,l]}},XI=(t,e,n,r,i)=>{var a,s;if(n.length>0&&t.forEach(l=>{n.forEach(c=>{var h,p,g=(h=r[c.id])===null||h===void 0?void 0:h.filter(R=>hq(i,R)),x=mn(l,(p=e.dataKey)!==null&&p!==void 0?p:c.dataKey),b=Wpe(l,x,g);if(b.length>=2){var C=Math.min(...b),A=Math.max(...b);(a==null||C<a)&&(a=C),(s==null||A>s)&&(s=A)}var D=EL(x);D!=null&&(a=a==null?D[0]:Math.min(a,D[0]),s=s==null?D[1]:Math.max(s,D[1]))})}),(e==null?void 0:e.dataKey)!=null&&t.forEach(l=>{var c=EL(mn(l,e.dataKey));c!=null&&(a=a==null?c[0]:Math.min(a,c[0]),s=s==null?c[1]:Math.max(s,c[1]))}),Cn(a)&&Cn(s))return[a,s]},Xpe=pe([WI,Gn,$pe,pb,zn],XI,{memoizeOptions:{resultEqualityCheck:db}});function ege(t){var{value:e}=t;if(ps(e)||e instanceof Date)return e}var tge=(t,e,n)=>{var r=t.map(ege).filter(i=>i!=null);return n&&(e.dataKey==null||e.allowDuplicatedCategory&&RF(r))?rz(0,t.length):e.allowDuplicatedCategory?r:Array.from(new Set(r))},gq=t=>t.referenceElements.dots,hm=(t,e,n)=>t.filter(r=>r.ifOverflow==="extendDomain").filter(r=>e==="xAxis"?r.xAxisId===n:r.yAxisId===n),nge=pe([gq,zn,ny],hm),yq=t=>t.referenceElements.areas,rge=pe([yq,zn,ny],hm),vq=t=>t.referenceElements.lines,ige=pe([vq,zn,ny],hm),xq=(t,e)=>{var n=Vl(t.map(r=>e==="xAxis"?r.x:r.y));if(n.length!==0)return[Math.min(...n),Math.max(...n)]},age=pe(nge,zn,xq),_q=(t,e)=>{var n=Vl(t.flatMap(r=>[e==="xAxis"?r.x1:r.y1,e==="xAxis"?r.x2:r.y2]));if(n.length!==0)return[Math.min(...n),Math.max(...n)]},sge=pe([rge,zn],_q);function oge(t){var e;if(t.x!=null)return Vl([t.x]);var n=(e=t.segment)===null||e===void 0?void 0:e.map(r=>r.x);return n==null||n.length===0?[]:Vl(n)}function lge(t){var e;if(t.y!=null)return Vl([t.y]);var n=(e=t.segment)===null||e===void 0?void 0:e.map(r=>r.y);return n==null||n.length===0?[]:Vl(n)}var bq=(t,e)=>{var n=t.flatMap(r=>e==="xAxis"?oge(r):lge(r));if(n.length!==0)return[Math.min(...n),Math.max(...n)]},uge=pe([ige,zn],bq),cge=pe(age,uge,sge,(t,e,n)=>Fx(t,n,e)),eN=(t,e,n,r,i,a,s,l)=>{if(n!=null)return n;var c=s==="vertical"&&l==="xAxis"||s==="horizontal"&&l==="yAxis",h=c?Fx(r,a,i):Fx(a,i);return bpe(e,h,t.allowDataOverflow)},dge=pe([Gn,JI,QI,Jpe,Xpe,cge,Lt,zn],eN,{memoizeOptions:{resultEqualityCheck:db}}),fge=[0,1],tN=(t,e,n,r,i,a,s)=>{if(!((t==null||n==null||n.length===0)&&s===void 0)){var{dataKey:l,type:c}=t,h=_c(e,a);if(h&&l==null){var p;return rz(0,(p=n==null?void 0:n.length)!==null&&p!==void 0?p:0)}return c==="category"?tge(r,t,h):i==="expand"?fge:s}},nN=pe([Gn,Lt,WI,mb,ty,zn,dge],tN),wq=(t,e,n,r,i)=>{if(t!=null){var{scale:a,type:s}=t;if(a==="auto")return e==="radial"&&i==="radiusAxis"?"band":e==="radial"&&i==="angleAxis"?"linear":s==="category"&&r&&(r.indexOf("LineChart")>=0||r.indexOf("AreaChart")>=0||r.indexOf("ComposedChart")>=0&&!n)?"point":s==="category"?"band":"linear";if(typeof a=="string"){var l="scale".concat(Ug(a));return l in Ep?l:"point"}}},mm=pe([Gn,Lt,cq,jI,zn],wq);function hge(t){if(t!=null){if(t in Ep)return Ep[t]();var e="scale".concat(Ug(t));if(e in Ep)return Ep[e]()}}function rN(t,e,n,r){if(!(n==null||r==null)){if(typeof t.scale=="function")return t.scale.copy().domain(n).range(r);var i=hge(e);if(i!=null){var a=i.domain(n).range(r);return cce(a),a}}}var iN=(t,e,n)=>{var r=ZI(e);if(!(n!=="auto"&&n!=="linear")){if(e!=null&&e.tickCount&&Array.isArray(r)&&(r[0]==="auto"||r[1]==="auto")&&oc(t))return Ppe(t,e.tickCount,e.allowDecimals);if(e!=null&&e.tickCount&&e.type==="number"&&oc(t))return Dpe(t,e.tickCount,e.allowDecimals)}},aN=pe([nN,ry,mm],iN),sN=(t,e,n,r)=>{if(r!=="angleAxis"&&(t==null?void 0:t.type)==="number"&&oc(e)&&Array.isArray(n)&&n.length>0){var i=e[0],a=n[0],s=e[1],l=n[n.length-1];return[Math.min(i,a),Math.max(s,l)]}return e},mge=pe([Gn,nN,aN,zn],sN),pge=pe(mb,Gn,(t,e)=>{if(!(!e||e.type!=="number")){var n=1/0,r=Array.from(Vl(t.map(l=>l.value))).sort((l,c)=>l-c);if(r.length<2)return 1/0;var i=r[r.length-1]-r[0];if(i===0)return 1/0;for(var a=0;a<r.length-1;a++){var s=r[a+1]-r[a];n=Math.min(n,s)}return n/i}}),Eq=pe(pge,Lt,Xz,Rr,(t,e,n,r)=>r,(t,e,n,r,i)=>{if(!Cn(t))return 0;var a=e==="vertical"?r.height:r.width;if(i==="gap")return t*a/2;if(i==="no-gap"){var s=Si(n,t*a),l=t*a/2;return l-s-(l-s)/a*s}return 0}),gge=(t,e)=>{var n=Bo(t,e);return n==null||typeof n.padding!="string"?0:Eq(t,"xAxis",e,n.padding)},yge=(t,e)=>{var n=zo(t,e);return n==null||typeof n.padding!="string"?0:Eq(t,"yAxis",e,n.padding)},vge=pe(Bo,gge,(t,e)=>{var n,r;if(t==null)return{left:0,right:0};var{padding:i}=t;return typeof i=="string"?{left:e,right:e}:{left:((n=i.left)!==null&&n!==void 0?n:0)+e,right:((r=i.right)!==null&&r!==void 0?r:0)+e}}),xge=pe(zo,yge,(t,e)=>{var n,r;if(t==null)return{top:0,bottom:0};var{padding:i}=t;return typeof i=="string"?{top:e,bottom:e}:{top:((n=i.top)!==null&&n!==void 0?n:0)+e,bottom:((r=i.bottom)!==null&&r!==void 0?r:0)+e}}),_ge=pe([Rr,vge,Z_,Y_,(t,e,n)=>n],(t,e,n,r,i)=>{var{padding:a}=r;return i?[a.left,n.width-a.right]:[t.left+e.left,t.left+t.width-e.right]}),bge=pe([Rr,Lt,xge,Z_,Y_,(t,e,n)=>n],(t,e,n,r,i,a)=>{var{padding:s}=i;return a?[r.height-s.bottom,s.top]:e==="horizontal"?[t.top+t.height-n.bottom,t.top+n.top]:[t.top+n.top,t.top+t.height-n.bottom]}),sy=(t,e,n,r)=>{var i;switch(e){case"xAxis":return _ge(t,n,r);case"yAxis":return bge(t,n,r);case"zAxis":return(i=qI(t,n))===null||i===void 0?void 0:i.range;case"angleAxis":return iq(t);case"radiusAxis":return aq(t,n);default:return}},Tq=pe([Gn,sy],lb),lc=pe([Gn,mm,mge,Tq],rN);pe([iy,pb,zn],Qpe);function Sq(t,e){return t.id<e.id?-1:t.id>e.id?1:0}var gb=(t,e)=>e,yb=(t,e,n)=>n,wge=pe(K_,gb,yb,(t,e,n)=>t.filter(r=>r.orientation===e).filter(r=>r.mirror===n).sort(Sq)),Ege=pe(W_,gb,yb,(t,e,n)=>t.filter(r=>r.orientation===e).filter(r=>r.mirror===n).sort(Sq)),Aq=(t,e)=>({width:t.width,height:e.height}),Tge=(t,e)=>{var n=typeof e.width=="number"?e.width:Gg;return{width:n,height:t.height}},Cq=pe(Rr,Bo,Aq),Sge=(t,e,n)=>{switch(e){case"top":return t.top;case"bottom":return n-t.bottom;default:return 0}},Age=(t,e,n)=>{switch(e){case"left":return t.left;case"right":return n-t.right;default:return 0}},Cge=pe(Kl,Rr,wge,gb,yb,(t,e,n,r,i)=>{var a={},s;return n.forEach(l=>{var c=Aq(e,l);s==null&&(s=Sge(e,r,t));var h=r==="top"&&!i||r==="bottom"&&i;a[l.id]=s-Number(h)*c.height,s+=(h?-1:1)*c.height}),a}),Ige=pe($l,Rr,Ege,gb,yb,(t,e,n,r,i)=>{var a={},s;return n.forEach(l=>{var c=Tge(e,l);s==null&&(s=Age(e,r,t));var h=r==="left"&&!i||r==="right"&&i;a[l.id]=s-Number(h)*c.width,s+=(h?-1:1)*c.width}),a}),Nge=(t,e)=>{var n=Bo(t,e);if(n!=null)return Cge(t,n.orientation,n.mirror)},Pge=pe([Rr,Bo,Nge,(t,e)=>e],(t,e,n,r)=>{if(e!=null){var i=n==null?void 0:n[r];return i==null?{x:t.left,y:0}:{x:t.left,y:i}}}),Dge=(t,e)=>{var n=zo(t,e);if(n!=null)return Ige(t,n.orientation,n.mirror)},Rge=pe([Rr,zo,Dge,(t,e)=>e],(t,e,n,r)=>{if(e!=null){var i=n==null?void 0:n[r];return i==null?{x:0,y:t.top}:{x:i,y:t.top}}}),Iq=pe(Rr,zo,(t,e)=>{var n=typeof e.width=="number"?e.width:Gg;return{width:n,height:t.height}}),TL=(t,e,n)=>{switch(e){case"xAxis":return Cq(t,n).width;case"yAxis":return Iq(t,n).height;default:return}},Nq=(t,e,n,r)=>{if(n!=null){var{allowDuplicatedCategory:i,type:a,dataKey:s}=n,l=_c(t,r),c=e.map(h=>h.value);if(s&&l&&a==="category"&&i&&RF(c))return c}},oN=pe([Lt,mb,Gn,zn],Nq),Pq=(t,e,n,r)=>{if(!(n==null||n.dataKey==null)){var{type:i,scale:a}=n,s=_c(t,r);if(s&&(i==="number"||a!=="auto"))return e.map(l=>l.value)}},lN=pe([Lt,mb,ry,zn],Pq),SL=pe([Lt,Hpe,mm,lc,oN,lN,sy,aN,zn],(t,e,n,r,i,a,s,l,c)=>{if(e!=null){var h=_c(t,c);return{angle:e.angle,interval:e.interval,minTickGap:e.minTickGap,orientation:e.orientation,tick:e.tick,tickCount:e.tickCount,tickFormatter:e.tickFormatter,ticks:e.ticks,type:e.type,unit:e.unit,axisType:c,categoricalDomain:a,duplicateDomain:i,isCategorical:h,niceTicks:l,range:s,realScaleType:n,scale:r}}}),kge=(t,e,n,r,i,a,s,l,c)=>{if(!(e==null||r==null)){var h=_c(t,c),{type:p,ticks:g,tickCount:x}=e,b=n==="scaleBand"&&typeof r.bandwidth=="function"?r.bandwidth()/2:2,C=p==="category"&&r.bandwidth?r.bandwidth()/b:0;C=c==="angleAxis"&&a!=null&&a.length>=2?Kr(a[0]-a[1])*2*C:C;var A=g||i;if(A){var D=A.map((R,j)=>{var O=s?s.indexOf(R):R;return{index:j,coordinate:r(O)+C,value:R,offset:C}});return D.filter(R=>Cn(R.coordinate))}return h&&l?l.map((R,j)=>({coordinate:r(R)+C,value:R,index:j,offset:C})).filter(R=>Cn(R.coordinate)):r.ticks?r.ticks(x).map(R=>({coordinate:r(R)+C,value:R,offset:C})):r.domain().map((R,j)=>({coordinate:r(R)+C,value:s?s[R]:R,index:j,offset:C}))}},Dq=pe([Lt,ry,mm,lc,aN,sy,oN,lN,zn],kge),Mge=(t,e,n,r,i,a,s)=>{if(!(e==null||n==null||r==null||r[0]===r[1])){var l=_c(t,s),{tickCount:c}=e,h=0;return h=s==="angleAxis"&&(r==null?void 0:r.length)>=2?Kr(r[0]-r[1])*2*h:h,l&&a?a.map((p,g)=>({coordinate:n(p)+h,value:p,index:g,offset:h})):n.ticks?n.ticks(c).map(p=>({coordinate:n(p)+h,value:p,offset:h})):n.domain().map((p,g)=>({coordinate:n(p)+h,value:i?i[p]:p,index:g,offset:h}))}},uc=pe([Lt,ry,lc,sy,oN,lN,zn],Mge),cc=pe(Gn,lc,(t,e)=>{if(!(t==null||e==null))return Ux(Ux({},t),{},{scale:e})}),Oge=pe([Gn,mm,nN,Tq],rN);pe((t,e,n)=>qI(t,n),Oge,(t,e)=>{if(!(t==null||e==null))return Ux(Ux({},t),{},{scale:e})});var jge=pe([Lt,K_,W_],(t,e,n)=>{switch(t){case"horizontal":return e.some(r=>r.reversed)?"right-to-left":"left-to-right";case"vertical":return n.some(r=>r.reversed)?"bottom-to-top":"top-to-bottom";case"centric":case"radial":return"left-to-right";default:return}}),Rq=t=>t.options.defaultTooltipEventType,kq=t=>t.options.validateTooltipEventTypes;function Mq(t,e,n){if(t==null)return e;var r=t?"axis":"item";return n==null?e:n.includes(r)?r:e}function uN(t,e){var n=Rq(t),r=kq(t);return Mq(e,n,r)}function Lge(t){return $e(e=>uN(e,t))}var Oq=(t,e)=>{var n,r=Number(e);if(!(Ga(r)||e==null))return r>=0?t==null||(n=t[r])===null||n===void 0?void 0:n.value:void 0},Vge=t=>t.tooltip.settings,Hu={active:!1,index:null,dataKey:void 0,coordinate:void 0},Uge={itemInteraction:{click:Hu,hover:Hu},axisInteraction:{click:Hu,hover:Hu},keyboardInteraction:Hu,syncInteraction:{active:!1,index:null,dataKey:void 0,label:void 0,coordinate:void 0,sourceViewBox:void 0},tooltipItemPayloads:[],settings:{shared:void 0,trigger:"hover",axisId:0,active:!1,defaultIndex:void 0}},jq=ma({name:"tooltip",initialState:Uge,reducers:{addTooltipEntrySettings:{reducer(t,e){t.tooltipItemPayloads.push(e.payload)},prepare:Mn()},replaceTooltipEntrySettings:{reducer(t,e){var{prev:n,next:r}=e.payload,i=Hs(t).tooltipItemPayloads.indexOf(n);i>-1&&(t.tooltipItemPayloads[i]=r)},prepare:Mn()},removeTooltipEntrySettings:{reducer(t,e){var n=Hs(t).tooltipItemPayloads.indexOf(e.payload);n>-1&&t.tooltipItemPayloads.splice(n,1)},prepare:Mn()},setTooltipSettingsState(t,e){t.settings=e.payload},setActiveMouseOverItemIndex(t,e){t.syncInteraction.active=!1,t.keyboardInteraction.active=!1,t.itemInteraction.hover.active=!0,t.itemInteraction.hover.index=e.payload.activeIndex,t.itemInteraction.hover.dataKey=e.payload.activeDataKey,t.itemInteraction.hover.coordinate=e.payload.activeCoordinate},mouseLeaveChart(t){t.itemInteraction.hover.active=!1,t.axisInteraction.hover.active=!1},mouseLeaveItem(t){t.itemInteraction.hover.active=!1},setActiveClickItemIndex(t,e){t.syncInteraction.active=!1,t.itemInteraction.click.active=!0,t.keyboardInteraction.active=!1,t.itemInteraction.click.index=e.payload.activeIndex,t.itemInteraction.click.dataKey=e.payload.activeDataKey,t.itemInteraction.click.coordinate=e.payload.activeCoordinate},setMouseOverAxisIndex(t,e){t.syncInteraction.active=!1,t.axisInteraction.hover.active=!0,t.keyboardInteraction.active=!1,t.axisInteraction.hover.index=e.payload.activeIndex,t.axisInteraction.hover.dataKey=e.payload.activeDataKey,t.axisInteraction.hover.coordinate=e.payload.activeCoordinate},setMouseClickAxisIndex(t,e){t.syncInteraction.active=!1,t.keyboardInteraction.active=!1,t.axisInteraction.click.active=!0,t.axisInteraction.click.index=e.payload.activeIndex,t.axisInteraction.click.dataKey=e.payload.activeDataKey,t.axisInteraction.click.coordinate=e.payload.activeCoordinate},setSyncInteraction(t,e){t.syncInteraction=e.payload},setKeyboardInteraction(t,e){t.keyboardInteraction.active=e.payload.active,t.keyboardInteraction.index=e.payload.activeIndex,t.keyboardInteraction.coordinate=e.payload.activeCoordinate,t.keyboardInteraction.dataKey=e.payload.activeDataKey}}}),{addTooltipEntrySettings:Fge,replaceTooltipEntrySettings:Bge,removeTooltipEntrySettings:zge,setTooltipSettingsState:qge,setActiveMouseOverItemIndex:Lq,mouseLeaveItem:Hge,mouseLeaveChart:Vq,setActiveClickItemIndex:Gge,setMouseOverAxisIndex:Uq,setMouseClickAxisIndex:$ge,setSyncInteraction:eA,setKeyboardInteraction:tA}=jq.actions,Kge=jq.reducer;function AL(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function Vv(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?AL(Object(n),!0).forEach(function(r){Wge(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):AL(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function Wge(t,e,n){return(e=Yge(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function Yge(t){var e=Zge(t,"string");return typeof e=="symbol"?e:e+""}function Zge(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function Jge(t,e,n){return e==="axis"?n==="click"?t.axisInteraction.click:t.axisInteraction.hover:n==="click"?t.itemInteraction.click:t.itemInteraction.hover}function Qge(t){return t.index!=null}var Fq=(t,e,n,r)=>{if(e==null)return Hu;var i=Jge(t,e,n);if(i==null)return Hu;if(i.active)return i;if(t.keyboardInteraction.active)return t.keyboardInteraction;if(t.syncInteraction.active&&t.syncInteraction.index!=null)return t.syncInteraction;var a=t.settings.active===!0;if(Qge(i)){if(a)return Vv(Vv({},i),{},{active:!0})}else if(r!=null)return{active:!0,coordinate:void 0,dataKey:void 0,index:r};return Vv(Vv({},Hu),{},{coordinate:i.coordinate})};function Xge(t){if(typeof t=="number")return Number.isFinite(t)?t:void 0;if(t instanceof Date){var e=t.valueOf();return Number.isFinite(e)?e:void 0}var n=Number(t);return Number.isFinite(n)?n:void 0}function eye(t,e){var n=Xge(t),r=e[0],i=e[1];if(n===void 0)return!1;var a=Math.min(r,i),s=Math.max(r,i);return n>=a&&n<=s}function tye(t,e,n){if(n==null||e==null)return!0;var r=mn(t,e);return r==null||!oc(n)?!0:eye(r,n)}var cN=(t,e,n,r)=>{var i=t==null?void 0:t.index;if(i==null)return null;var a=Number(i);if(!Cn(a))return i;var s=0,l=1/0;e.length>0&&(l=e.length-1);var c=Math.max(s,Math.min(a,l)),h=e[c];return h==null||tye(h,n,r)?String(c):null},Bq=(t,e,n,r,i,a,s,l)=>{if(!(a==null||l==null)){var c=s[0],h=c==null?void 0:l(c.positions,a);if(h!=null)return h;var p=i==null?void 0:i[Number(a)];if(p)switch(n){case"horizontal":return{x:p.coordinate,y:(r.top+e)/2};default:return{x:(r.left+t)/2,y:p.coordinate}}}},zq=(t,e,n,r)=>{if(e==="axis")return t.tooltipItemPayloads;if(t.tooltipItemPayloads.length===0)return[];var i;return n==="hover"?i=t.itemInteraction.hover.dataKey:i=t.itemInteraction.click.dataKey,i==null&&r!=null?[t.tooltipItemPayloads[0]]:t.tooltipItemPayloads.filter(a=>{var s;return((s=a.settings)===null||s===void 0?void 0:s.dataKey)===i})},oy=t=>t.options.tooltipPayloadSearcher,pm=t=>t.tooltip;function CL(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function IL(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?CL(Object(n),!0).forEach(function(r){nye(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):CL(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function nye(t,e,n){return(e=rye(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function rye(t){var e=iye(t,"string");return typeof e=="symbol"?e:e+""}function iye(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function aye(t,e){return t??e}var qq=(t,e,n,r,i,a,s)=>{if(!(e==null||a==null)){var{chartData:l,computedData:c,dataStartIndex:h,dataEndIndex:p}=n,g=[];return t.reduce((x,b)=>{var C,{dataDefinedOnItem:A,settings:D}=b,R=aye(A,l),j=Array.isArray(R)?AB(R,h,p):R,O=(C=D==null?void 0:D.dataKey)!==null&&C!==void 0?C:r,q=D==null?void 0:D.nameKey,$;if(r&&Array.isArray(j)&&!Array.isArray(j[0])&&s==="axis"?$=kF(j,r,i):$=a(j,e,c,q),Array.isArray($))$.forEach(U=>{var z=IL(IL({},D),{},{name:U.name,unit:U.unit,color:void 0,fill:void 0});x.push(W5({tooltipEntrySettings:z,dataKey:U.dataKey,payload:U.payload,value:mn(U.payload,U.dataKey),name:U.name}))});else{var H;x.push(W5({tooltipEntrySettings:D,dataKey:O,payload:$,value:mn($,O),name:(H=mn($,q))!==null&&H!==void 0?H:D==null?void 0:D.name}))}return x},g)}},dN=pe([Or,Lt,cq,jI,Mr],wq),sye=pe([t=>t.graphicalItems.cartesianItems,t=>t.graphicalItems.polarItems],(t,e)=>[...t,...e]),oye=pe([Mr,fm],HI),ly=pe([sye,Or,oye],GI,{memoizeOptions:{resultEqualityCheck:fb}}),lye=pe([ly],t=>t.filter(cb)),uye=pe([ly],$I,{memoizeOptions:{resultEqualityCheck:fb}}),gm=pe([uye,Ec],KI),cye=pe([lye,Ec,Or],oq),fN=pe([gm,Or,ly],YI),Hq=pe([Or],ZI),dye=pe([Or],t=>t.allowDataOverflow),Gq=pe([Hq,dye],Vz),fye=pe([ly],t=>t.filter(cb)),hye=pe([cye,fye,ty,eq],mq),mye=pe([hye,Ec,Mr,Gq],pq),pye=pe([ly],fq),gye=pe([gm,Or,pye,pb,Mr],XI,{memoizeOptions:{resultEqualityCheck:db}}),yye=pe([gq,Mr,fm],hm),vye=pe([yye,Mr],xq),xye=pe([yq,Mr,fm],hm),_ye=pe([xye,Mr],_q),bye=pe([vq,Mr,fm],hm),wye=pe([bye,Mr],bq),Eye=pe([vye,wye,_ye],Fx),Tye=pe([Or,Hq,Gq,mye,gye,Eye,Lt,Mr],eN),uy=pe([Or,Lt,gm,fN,ty,Mr,Tye],tN),Sye=pe([uy,Or,dN],iN),Aye=pe([Or,uy,Sye,Mr],sN),$q=t=>{var e=Mr(t),n=fm(t),r=!1;return sy(t,e,n,r)},Kq=pe([Or,$q],lb),Wq=pe([Or,dN,Aye,Kq],rN),Cye=pe([Lt,fN,Or,Mr],Nq),Iye=pe([Lt,fN,Or,Mr],Pq),Nye=(t,e,n,r,i,a,s,l)=>{if(e){var{type:c}=e,h=_c(t,l);if(r){var p=n==="scaleBand"&&r.bandwidth?r.bandwidth()/2:2,g=c==="category"&&r.bandwidth?r.bandwidth()/p:0;return g=l==="angleAxis"&&i!=null&&(i==null?void 0:i.length)>=2?Kr(i[0]-i[1])*2*g:g,h&&s?s.map((x,b)=>({coordinate:r(x)+g,value:x,index:b,offset:g})):r.domain().map((x,b)=>({coordinate:r(x)+g,value:a?a[x]:x,index:b,offset:g}))}}},Yl=pe([Lt,Or,dN,Wq,$q,Cye,Iye,Mr],Nye),hN=pe([Rq,kq,Vge],(t,e,n)=>Mq(n.shared,t,e)),Yq=t=>t.tooltip.settings.trigger,mN=t=>t.tooltip.settings.defaultIndex,vb=pe([pm,hN,Yq,mN],Fq),dc=pe([vb,gm,ay,uy],cN),Zq=pe([Yl,dc],Oq),Jq=pe([vb],t=>{if(t)return t.dataKey}),Qq=pe([pm,hN,Yq,mN],zq),Pye=pe([$l,Kl,Lt,Rr,Yl,mN,Qq,oy],Bq),Dye=pe([vb,Pye],(t,e)=>t!=null&&t.coordinate?t.coordinate:e),Rye=pe([vb],t=>t.active),kye=pe([Qq,dc,Ec,ay,Zq,oy,hN],qq),Mye=pe([kye],t=>{if(t!=null){var e=t.map(n=>n.payload).filter(n=>n!=null);return Array.from(new Set(e))}});function NL(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function PL(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?NL(Object(n),!0).forEach(function(r){Oye(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):NL(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function Oye(t,e,n){return(e=jye(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function jye(t){var e=Lye(t,"string");return typeof e=="symbol"?e:e+""}function Lye(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var Vye=()=>$e(Or),Uye=()=>{var t=Vye(),e=$e(Yl),n=$e(Wq);return Bh(!t||!n?void 0:PL(PL({},t),{},{scale:n}),e)};function DL(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function Bf(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?DL(Object(n),!0).forEach(function(r){Fye(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):DL(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function Fye(t,e,n){return(e=Bye(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function Bye(t){var e=zye(t,"string");return typeof e=="symbol"?e:e+""}function zye(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var qye=(t,e,n,r)=>{var i=e.find(a=>a&&a.index===n);if(i){if(t==="horizontal")return{x:i.coordinate,y:r.chartY};if(t==="vertical")return{x:r.chartX,y:i.coordinate}}return{x:0,y:0}},Hye=(t,e,n,r)=>{var i=e.find(h=>h&&h.index===n);if(i){if(t==="centric"){var a=i.coordinate,{radius:s}=r;return Bf(Bf(Bf({},r),wr(r.cx,r.cy,s,a)),{},{angle:a,radius:s})}var l=i.coordinate,{angle:c}=r;return Bf(Bf(Bf({},r),wr(r.cx,r.cy,l,c)),{},{angle:c,radius:l})}return{angle:0,clockWise:!1,cx:0,cy:0,endAngle:0,innerRadius:0,outerRadius:0,radius:0,startAngle:0,x:0,y:0}};function Gye(t,e){var{chartX:n,chartY:r}=t;return n>=e.left&&n<=e.left+e.width&&r>=e.top&&r<=e.top+e.height}var Xq=(t,e,n,r,i)=>{var a,s=-1,l=(a=e==null?void 0:e.length)!==null&&a!==void 0?a:0;if(l<=1||t==null)return 0;if(r==="angleAxis"&&i!=null&&Math.abs(Math.abs(i[1]-i[0])-360)<=1e-6)for(var c=0;c<l;c++){var h=c>0?n[c-1].coordinate:n[l-1].coordinate,p=n[c].coordinate,g=c>=l-1?n[0].coordinate:n[c+1].coordinate,x=void 0;if(Kr(p-h)!==Kr(g-p)){var b=[];if(Kr(g-p)===Kr(i[1]-i[0])){x=g;var C=p+i[1]-i[0];b[0]=Math.min(C,(C+h)/2),b[1]=Math.max(C,(C+h)/2)}else{x=h;var A=g+i[1]-i[0];b[0]=Math.min(p,(A+p)/2),b[1]=Math.max(p,(A+p)/2)}var D=[Math.min(p,(x+p)/2),Math.max(p,(x+p)/2)];if(t>D[0]&&t<=D[1]||t>=b[0]&&t<=b[1]){({index:s}=n[c]);break}}else{var R=Math.min(h,g),j=Math.max(h,g);if(t>(R+p)/2&&t<=(j+p)/2){({index:s}=n[c]);break}}}else if(e){for(var O=0;O<l;O++)if(O===0&&t<=(e[O].coordinate+e[O+1].coordinate)/2||O>0&&O<l-1&&t>(e[O].coordinate+e[O-1].coordinate)/2&&t<=(e[O].coordinate+e[O+1].coordinate)/2||O===l-1&&t>(e[O].coordinate+e[O-1].coordinate)/2){({index:s}=e[O]);break}}return s},$ye=()=>$e(jI),pN=(t,e)=>e,e7=(t,e,n)=>n,gN=(t,e,n,r)=>r,Kye=pe(Yl,t=>V_(t,e=>e.coordinate)),yN=pe([pm,pN,e7,gN],Fq),vN=pe([yN,gm,ay,uy],cN),Wye=(t,e,n)=>{if(e!=null){var r=pm(t);return e==="axis"?n==="hover"?r.axisInteraction.hover.dataKey:r.axisInteraction.click.dataKey:n==="hover"?r.itemInteraction.hover.dataKey:r.itemInteraction.click.dataKey}},t7=pe([pm,pN,e7,gN],zq),Bx=pe([$l,Kl,Lt,Rr,Yl,gN,t7,oy],Bq),Yye=pe([yN,Bx],(t,e)=>{var n;return(n=t.coordinate)!==null&&n!==void 0?n:e}),n7=pe([Yl,vN],Oq),Zye=pe([t7,vN,Ec,ay,n7,oy,pN],qq),Jye=pe([yN,vN],(t,e)=>({isActive:t.active&&e!=null,activeIndex:e})),Qye=(t,e,n,r,i,a,s)=>{if(!(!t||!n||!r||!i)&&Gye(t,s)){var l=bce(t,e),c=Xq(l,a,i,n,r),h=qye(e,i,c,t);return{activeIndex:String(c),activeCoordinate:h}}},Xye=(t,e,n,r,i,a,s)=>{if(!(!t||!r||!i||!a||!n)){var l=Lfe(t,n);if(l){var c=wce(l,e),h=Xq(c,s,a,r,i),p=Hye(e,a,h,l);return{activeIndex:String(h),activeCoordinate:p}}}},eve=(t,e,n,r,i,a,s,l)=>{if(!(!t||!e||!r||!i||!a))return e==="horizontal"||e==="vertical"?Qye(t,e,r,i,a,s,l):Xye(t,e,n,r,i,a,s)},tve=pe(t=>t.zIndex.zIndexMap,(t,e)=>e,(t,e,n)=>n,(t,e,n)=>{if(e!=null){var r=t[e];if(r!=null)return n?r.panoramaElementId:r.elementId}}),nve=pe(t=>t.zIndex.zIndexMap,t=>{var e=Object.keys(t).map(r=>parseInt(r,10)).concat(Object.values(ur)),n=Array.from(new Set(e));return n.sort((r,i)=>r-i)},{memoizeOptions:{resultEqualityCheck:Upe}});function RL(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function kL(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?RL(Object(n),!0).forEach(function(r){rve(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):RL(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function rve(t,e,n){return(e=ive(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function ive(t){var e=ave(t,"string");return typeof e=="symbol"?e:e+""}function ave(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var sve={},ove={zIndexMap:Object.values(ur).reduce((t,e)=>kL(kL({},t),{},{[e]:{elementId:void 0,panoramaElementId:void 0,consumers:0}}),sve)},lve=new Set(Object.values(ur));function uve(t){return lve.has(t)}var r7=ma({name:"zIndex",initialState:ove,reducers:{registerZIndexPortal:{reducer:(t,e)=>{var{zIndex:n}=e.payload;t.zIndexMap[n]?t.zIndexMap[n].consumers+=1:t.zIndexMap[n]={consumers:1,elementId:void 0,panoramaElementId:void 0}},prepare:Mn()},unregisterZIndexPortal:{reducer:(t,e)=>{var{zIndex:n}=e.payload;t.zIndexMap[n]&&(t.zIndexMap[n].consumers-=1,t.zIndexMap[n].consumers<=0&&!uve(n)&&delete t.zIndexMap[n])},prepare:Mn()},registerZIndexPortalId:{reducer:(t,e)=>{var{zIndex:n,elementId:r,isPanorama:i}=e.payload;t.zIndexMap[n]?i?t.zIndexMap[n].panoramaElementId=r:t.zIndexMap[n].elementId=r:t.zIndexMap[n]={consumers:0,elementId:i?void 0:r,panoramaElementId:i?r:void 0}},prepare:Mn()},unregisterZIndexPortalId:{reducer:(t,e)=>{var{zIndex:n}=e.payload;t.zIndexMap[n]&&(e.payload.isPanorama?t.zIndexMap[n].panoramaElementId=void 0:t.zIndexMap[n].elementId=void 0)},prepare:Mn()}}}),{registerZIndexPortal:cve,unregisterZIndexPortal:dve,registerZIndexPortalId:fve,unregisterZIndexPortalId:hve}=r7.actions,mve=r7.reducer;function zi(t){var{zIndex:e,children:n}=t,r=Xce(),i=r&&e!==void 0&&e!==0,a=ai(),s=gn();N.useLayoutEffect(()=>i?(s(cve({zIndex:e})),()=>{s(dve({zIndex:e}))}):Fg,[s,e,i]);var l=$e(h=>tve(h,e,a));if(!i)return n;if(!l)return null;var c=document.getElementById(l);return c?M_.createPortal(n,c):null}function nA(){return nA=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)({}).hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},nA.apply(null,arguments)}function ML(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function Uv(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?ML(Object(n),!0).forEach(function(r){pve(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):ML(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function pve(t,e,n){return(e=gve(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function gve(t){var e=yve(t,"string");return typeof e=="symbol"?e:e+""}function yve(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function vve(t){var{cursor:e,cursorComp:n,cursorProps:r}=t;return N.isValidElement(e)?N.cloneElement(e,r):N.createElement(n,r)}function xve(t){var e,{coordinate:n,payload:r,index:i,offset:a,tooltipAxisBandSize:s,layout:l,cursor:c,tooltipEventType:h,chartName:p}=t,g=n,x=r,b=i;if(!c||!g||p!=="ScatterChart"&&h!=="axis")return null;var C,A,D;if(p==="ScatterChart")C=g,A=Xde,D=ur.cursorLine;else if(p==="BarChart")C=efe(l,g,a,s),A=QB,D=ur.cursorRectangle;else if(l==="radial"&&OF(g)){var{cx:R,cy:j,radius:O,startAngle:q,endAngle:$}=ez(g);C={cx:R,cy:j,startAngle:q,endAngle:$,innerRadius:O,outerRadius:O},A=nz,D=ur.cursorLine}else C={points:Bfe(l,g,a)},A=uI,D=ur.cursorLine;var H=typeof c=="object"&&"className"in c?c.className:void 0,U=Uv(Uv(Uv(Uv({stroke:"#ccc",pointerEvents:"none"},a),C),Ld(c)),{},{payload:x,payloadIndex:b,className:Ft("recharts-tooltip-cursor",H)});return N.createElement(zi,{zIndex:(e=t.zIndex)!==null&&e!==void 0?e:D},N.createElement(vve,{cursor:c,cursorComp:A,cursorProps:U}))}function _ve(t){var e=Uye(),n=jB(),r=Kg(),i=$ye();return e==null||n==null||r==null||i==null?null:N.createElement(xve,nA({},t,{offset:n,layout:r,tooltipAxisBandSize:e,chartName:i}))}var i7=N.createContext(null),bve=()=>N.useContext(i7),ZT={exports:{}},OL;function wve(){return OL||(OL=1,(function(t){var e=Object.prototype.hasOwnProperty,n="~";function r(){}Object.create&&(r.prototype=Object.create(null),new r().__proto__||(n=!1));function i(c,h,p){this.fn=c,this.context=h,this.once=p||!1}function a(c,h,p,g,x){if(typeof p!="function")throw new TypeError("The listener must be a function");var b=new i(p,g||c,x),C=n?n+h:h;return c._events[C]?c._events[C].fn?c._events[C]=[c._events[C],b]:c._events[C].push(b):(c._events[C]=b,c._eventsCount++),c}function s(c,h){--c._eventsCount===0?c._events=new r:delete c._events[h]}function l(){this._events=new r,this._eventsCount=0}l.prototype.eventNames=function(){var h=[],p,g;if(this._eventsCount===0)return h;for(g in p=this._events)e.call(p,g)&&h.push(n?g.slice(1):g);return Object.getOwnPropertySymbols?h.concat(Object.getOwnPropertySymbols(p)):h},l.prototype.listeners=function(h){var p=n?n+h:h,g=this._events[p];if(!g)return[];if(g.fn)return[g.fn];for(var x=0,b=g.length,C=new Array(b);x<b;x++)C[x]=g[x].fn;return C},l.prototype.listenerCount=function(h){var p=n?n+h:h,g=this._events[p];return g?g.fn?1:g.length:0},l.prototype.emit=function(h,p,g,x,b,C){var A=n?n+h:h;if(!this._events[A])return!1;var D=this._events[A],R=arguments.length,j,O;if(D.fn){switch(D.once&&this.removeListener(h,D.fn,void 0,!0),R){case 1:return D.fn.call(D.context),!0;case 2:return D.fn.call(D.context,p),!0;case 3:return D.fn.call(D.context,p,g),!0;case 4:return D.fn.call(D.context,p,g,x),!0;case 5:return D.fn.call(D.context,p,g,x,b),!0;case 6:return D.fn.call(D.context,p,g,x,b,C),!0}for(O=1,j=new Array(R-1);O<R;O++)j[O-1]=arguments[O];D.fn.apply(D.context,j)}else{var q=D.length,$;for(O=0;O<q;O++)switch(D[O].once&&this.removeListener(h,D[O].fn,void 0,!0),R){case 1:D[O].fn.call(D[O].context);break;case 2:D[O].fn.call(D[O].context,p);break;case 3:D[O].fn.call(D[O].context,p,g);break;case 4:D[O].fn.call(D[O].context,p,g,x);break;default:if(!j)for($=1,j=new Array(R-1);$<R;$++)j[$-1]=arguments[$];D[O].fn.apply(D[O].context,j)}}return!0},l.prototype.on=function(h,p,g){return a(this,h,p,g,!1)},l.prototype.once=function(h,p,g){return a(this,h,p,g,!0)},l.prototype.removeListener=function(h,p,g,x){var b=n?n+h:h;if(!this._events[b])return this;if(!p)return s(this,b),this;var C=this._events[b];if(C.fn)C.fn===p&&(!x||C.once)&&(!g||C.context===g)&&s(this,b);else{for(var A=0,D=[],R=C.length;A<R;A++)(C[A].fn!==p||x&&!C[A].once||g&&C[A].context!==g)&&D.push(C[A]);D.length?this._events[b]=D.length===1?D[0]:D:s(this,b)}return this},l.prototype.removeAllListeners=function(h){var p;return h?(p=n?n+h:h,this._events[p]&&s(this,p)):(this._events=new r,this._eventsCount=0),this},l.prototype.off=l.prototype.removeListener,l.prototype.addListener=l.prototype.on,l.prefixed=n,l.EventEmitter=l,t.exports=l})(ZT)),ZT.exports}var Eve=wve();const Tve=Vo(Eve);var gg=new Tve,rA="recharts.syncEvent.tooltip",jL="recharts.syncEvent.brush";function xN(t,e){if(e){var n=Number.parseInt(e,10);if(!Ga(n))return t==null?void 0:t[n]}}var Sve={chartName:"",tooltipPayloadSearcher:void 0,eventEmitter:void 0,defaultTooltipEventType:"axis"},a7=ma({name:"options",initialState:Sve,reducers:{createEventEmitter:t=>{t.eventEmitter==null&&(t.eventEmitter=Symbol("rechartsEventEmitter"))}}}),Ave=a7.reducer,{createEventEmitter:Cve}=a7.actions;function Ive(t){return t.tooltip.syncInteraction}var Nve={chartData:void 0,computedData:void 0,dataStartIndex:0,dataEndIndex:0},s7=ma({name:"chartData",initialState:Nve,reducers:{setChartData(t,e){if(t.chartData=e.payload,e.payload==null){t.dataStartIndex=0,t.dataEndIndex=0;return}e.payload.length>0&&t.dataEndIndex!==e.payload.length-1&&(t.dataEndIndex=e.payload.length-1)},setComputedData(t,e){t.computedData=e.payload},setDataStartEndIndexes(t,e){var{startIndex:n,endIndex:r}=e.payload;n!=null&&(t.dataStartIndex=n),r!=null&&(t.dataEndIndex=r)}}}),{setChartData:LL,setDataStartEndIndexes:Pve,setComputedData:pAe}=s7.actions,Dve=s7.reducer,Rve=["x","y"];function VL(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function zf(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?VL(Object(n),!0).forEach(function(r){kve(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):VL(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function kve(t,e,n){return(e=Mve(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function Mve(t){var e=Ove(t,"string");return typeof e=="symbol"?e:e+""}function Ove(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function jve(t,e){if(t==null)return{};var n,r,i=Lve(t,e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);for(r=0;r<a.length;r++)n=a[r],e.indexOf(n)===-1&&{}.propertyIsEnumerable.call(t,n)&&(i[n]=t[n])}return i}function Lve(t,e){if(t==null)return{};var n={};for(var r in t)if({}.hasOwnProperty.call(t,r)){if(e.indexOf(r)!==-1)continue;n[r]=t[r]}return n}function Vve(){var t=$e(LI),e=$e(VI),n=gn(),r=$e(tq),i=$e(Yl),a=Kg(),s=$g(),l=$e(c=>c.rootProps.className);N.useEffect(()=>{if(t==null)return Fg;var c=(h,p,g)=>{if(e!==g&&t===h){if(r==="index"){var x;if(s&&p!==null&&p!==void 0&&(x=p.payload)!==null&&x!==void 0&&x.coordinate&&p.payload.sourceViewBox){var b=p.payload.coordinate,{x:C,y:A}=b,D=jve(b,Rve),{x:R,y:j,width:O,height:q}=p.payload.sourceViewBox,$=zf(zf({},D),{},{x:s.x+(O?(C-R)/O:0)*s.width,y:s.y+(q?(A-j)/q:0)*s.height});n(zf(zf({},p),{},{payload:zf(zf({},p.payload),{},{coordinate:$})}))}else n(p);return}if(i!=null){var H;if(typeof r=="function"){var U={activeTooltipIndex:p.payload.index==null?void 0:Number(p.payload.index),isTooltipActive:p.payload.active,activeIndex:p.payload.index==null?void 0:Number(p.payload.index),activeLabel:p.payload.label,activeDataKey:p.payload.dataKey,activeCoordinate:p.payload.coordinate},z=r(i,U);H=i[z]}else r==="value"&&(H=i.find(ee=>String(ee.value)===p.payload.label));var{coordinate:B}=p.payload;if(H==null||p.payload.active===!1||B==null||s==null){n(eA({active:!1,coordinate:void 0,dataKey:void 0,index:null,label:void 0,sourceViewBox:void 0}));return}var{x:Z,y:K}=B,J=Math.min(Z,s.x+s.width),G=Math.min(K,s.y+s.height),Se={x:a==="horizontal"?H.coordinate:J,y:a==="horizontal"?G:H.coordinate},Oe=eA({active:p.payload.active,coordinate:Se,dataKey:p.payload.dataKey,index:String(H.index),label:p.payload.label,sourceViewBox:p.payload.sourceViewBox});n(Oe)}}};return gg.on(rA,c),()=>{gg.off(rA,c)}},[l,n,e,t,r,i,a,s])}function Uve(){var t=$e(LI),e=$e(VI),n=gn();N.useEffect(()=>{if(t==null)return Fg;var r=(i,a,s)=>{e!==s&&t===i&&n(Pve(a))};return gg.on(jL,r),()=>{gg.off(jL,r)}},[n,e,t])}function Fve(){var t=gn();N.useEffect(()=>{t(Cve())},[t]),Vve(),Uve()}function Bve(t,e,n,r,i,a){var s=$e(b=>Wye(b,t,e)),l=$e(VI),c=$e(LI),h=$e(tq),p=$e(Ive),g=p==null?void 0:p.active,x=$g();N.useEffect(()=>{if(!g&&c!=null&&l!=null){var b=eA({active:a,coordinate:n,dataKey:s,index:i,label:typeof r=="number"?String(r):r,sourceViewBox:x});gg.emit(rA,c,b,l)}},[g,n,s,i,r,l,c,h,a,x])}function UL(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function FL(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?UL(Object(n),!0).forEach(function(r){zve(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):UL(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function zve(t,e,n){return(e=qve(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function qve(t){var e=Hve(t,"string");return typeof e=="symbol"?e:e+""}function Hve(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function Gve(t){return t.dataKey}function $ve(t,e){return N.isValidElement(t)?N.cloneElement(t,e):typeof t=="function"?N.createElement(t,e):N.createElement(Dde,e)}var BL=[],Kve={allowEscapeViewBox:{x:!1,y:!1},animationDuration:400,animationEasing:"ease",axisId:0,contentStyle:{},cursor:!0,filterNull:!0,isAnimationActive:!Wd.isSsr,itemSorter:"name",itemStyle:{},labelStyle:{},offset:10,reverseDirection:{x:!1,y:!1},separator:" : ",trigger:"hover",useTranslate3d:!1,wrapperStyle:{}};function Vp(t){var e,n,r=dr(t,Kve),{active:i,allowEscapeViewBox:a,animationDuration:s,animationEasing:l,content:c,filterNull:h,isAnimationActive:p,offset:g,payloadUniqBy:x,position:b,reverseDirection:C,useTranslate3d:A,wrapperStyle:D,cursor:R,shared:j,trigger:O,defaultIndex:q,portal:$,axisId:H}=r,U=gn(),z=typeof q=="number"?String(q):q;N.useEffect(()=>{U(qge({shared:j,trigger:O,axisId:H,active:i,defaultIndex:z}))},[U,j,O,H,i,z]);var B=$g(),Z=KB(),K=Lge(j),{activeIndex:J,isActive:G}=(e=$e(Ze=>Jye(Ze,K,O,z)))!==null&&e!==void 0?e:{},Se=$e(Ze=>Zye(Ze,K,O,z)),Oe=$e(Ze=>n7(Ze,K,O,z)),ee=$e(Ze=>Yye(Ze,K,O,z)),re=Se,le=bve(),Ne=(n=i??G)!==null&&n!==void 0?n:!1,[Pe,X]=ZF([re,Ne]),ue=K==="axis"?Oe:void 0;Bve(K,O,ee,ue,J,Ne);var be=$??le;if(be==null||B==null||K==null)return null;var Ce=re??BL;Ne||(Ce=BL),h&&Ce.length&&(Ce=GF(Ce.filter(Ze=>Ze.value!=null&&(Ze.hide!==!0||r.includeHidden)),x,Gve));var je=Ce.length>0,Ve=N.createElement(Vde,{allowEscapeViewBox:a,animationDuration:s,animationEasing:l,isAnimationActive:p,active:Ne,coordinate:ee,hasPayload:je,offset:g,position:b,reverseDirection:C,useTranslate3d:A,viewBox:B,wrapperStyle:D,lastBoundingBox:Pe,innerRef:X,hasPortalFromProps:!!$},$ve(c,FL(FL({},r),{},{payload:Ce,label:ue,active:Ne,activeIndex:J,coordinate:ee,accessibilityLayer:Z})));return N.createElement(N.Fragment,null,M_.createPortal(Ve,be),Ne&&N.createElement(_ve,{cursor:R,tooltipEventType:K,coordinate:ee,payload:Ce,index:J}))}var cy=t=>null;cy.displayName="Cell";function Wve(t,e,n){return(e=Yve(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function Yve(t){var e=Zve(t,"string");return typeof e=="symbol"?e:e+""}function Zve(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}class Jve{constructor(e){Wve(this,"cache",new Map),this.maxSize=e}get(e){var n=this.cache.get(e);return n!==void 0&&(this.cache.delete(e),this.cache.set(e,n)),n}set(e,n){if(this.cache.has(e))this.cache.delete(e);else if(this.cache.size>=this.maxSize){var r=this.cache.keys().next().value;r!=null&&this.cache.delete(r)}this.cache.set(e,n)}clear(){this.cache.clear()}size(){return this.cache.size}}function zL(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function Qve(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?zL(Object(n),!0).forEach(function(r){Xve(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):zL(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function Xve(t,e,n){return(e=e0e(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function e0e(t){var e=t0e(t,"string");return typeof e=="symbol"?e:e+""}function t0e(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var n0e={cacheSize:2e3,enableCache:!0},o7=Qve({},n0e),qL=new Jve(o7.cacheSize),r0e={position:"absolute",top:"-20000px",left:0,padding:0,margin:0,border:"none",whiteSpace:"pre"},HL="recharts_measurement_span";function i0e(t,e){var n=e.fontSize||"",r=e.fontFamily||"",i=e.fontWeight||"",a=e.fontStyle||"",s=e.letterSpacing||"",l=e.textTransform||"";return"".concat(t,"|").concat(n,"|").concat(r,"|").concat(i,"|").concat(a,"|").concat(s,"|").concat(l)}var GL=(t,e)=>{try{var n=document.getElementById(HL);n||(n=document.createElement("span"),n.setAttribute("id",HL),n.setAttribute("aria-hidden","true"),document.body.appendChild(n)),Object.assign(n.style,r0e,e),n.textContent="".concat(t);var r=n.getBoundingClientRect();return{width:r.width,height:r.height}}catch{return{width:0,height:0}}},Up=function(e){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(e==null||Wd.isSsr)return{width:0,height:0};if(!o7.enableCache)return GL(e,n);var r=i0e(e,n),i=qL.get(r);if(i)return i;var a=GL(e,n);return qL.set(r,a),a},$L=/(-?\d+(?:\.\d+)?[a-zA-Z%]*)([*/])(-?\d+(?:\.\d+)?[a-zA-Z%]*)/,KL=/(-?\d+(?:\.\d+)?[a-zA-Z%]*)([+-])(-?\d+(?:\.\d+)?[a-zA-Z%]*)/,a0e=/^px|cm|vh|vw|em|rem|%|mm|in|pt|pc|ex|ch|vmin|vmax|Q$/,s0e=/(-?\d+(?:\.\d+)?)([a-zA-Z%]+)?/,l7={cm:96/2.54,mm:96/25.4,pt:96/72,pc:96/6,in:96,Q:96/(2.54*40),px:1},o0e=Object.keys(l7),eh="NaN";function l0e(t,e){return t*l7[e]}class la{static parse(e){var n,[,r,i]=(n=s0e.exec(e))!==null&&n!==void 0?n:[];return new la(parseFloat(r),i??"")}constructor(e,n){this.num=e,this.unit=n,this.num=e,this.unit=n,Ga(e)&&(this.unit=""),n!==""&&!a0e.test(n)&&(this.num=NaN,this.unit=""),o0e.includes(n)&&(this.num=l0e(e,n),this.unit="px")}add(e){return this.unit!==e.unit?new la(NaN,""):new la(this.num+e.num,this.unit)}subtract(e){return this.unit!==e.unit?new la(NaN,""):new la(this.num-e.num,this.unit)}multiply(e){return this.unit!==""&&e.unit!==""&&this.unit!==e.unit?new la(NaN,""):new la(this.num*e.num,this.unit||e.unit)}divide(e){return this.unit!==""&&e.unit!==""&&this.unit!==e.unit?new la(NaN,""):new la(this.num/e.num,this.unit||e.unit)}toString(){return"".concat(this.num).concat(this.unit)}isNaN(){return Ga(this.num)}}function u7(t){if(t.includes(eh))return eh;for(var e=t;e.includes("*")||e.includes("/");){var n,[,r,i,a]=(n=$L.exec(e))!==null&&n!==void 0?n:[],s=la.parse(r??""),l=la.parse(a??""),c=i==="*"?s.multiply(l):s.divide(l);if(c.isNaN())return eh;e=e.replace($L,c.toString())}for(;e.includes("+")||/.-\d+(?:\.\d+)?/.test(e);){var h,[,p,g,x]=(h=KL.exec(e))!==null&&h!==void 0?h:[],b=la.parse(p??""),C=la.parse(x??""),A=g==="+"?b.add(C):b.subtract(C);if(A.isNaN())return eh;e=e.replace(KL,A.toString())}return e}var WL=/\(([^()]*)\)/;function u0e(t){for(var e=t,n;(n=WL.exec(e))!=null;){var[,r]=n;e=e.replace(WL,u7(r))}return e}function c0e(t){var e=t.replace(/\s+/g,"");return e=u0e(e),e=u7(e),e}function d0e(t){try{return c0e(t)}catch{return eh}}function JT(t){var e=d0e(t.slice(5,-1));return e===eh?"":e}var f0e=["x","y","lineHeight","capHeight","fill","scaleToFit","textAnchor","verticalAnchor"],h0e=["dx","dy","angle","className","breakAll"];function iA(){return iA=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)({}).hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},iA.apply(null,arguments)}function YL(t,e){if(t==null)return{};var n,r,i=m0e(t,e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);for(r=0;r<a.length;r++)n=a[r],e.indexOf(n)===-1&&{}.propertyIsEnumerable.call(t,n)&&(i[n]=t[n])}return i}function m0e(t,e){if(t==null)return{};var n={};for(var r in t)if({}.hasOwnProperty.call(t,r)){if(e.indexOf(r)!==-1)continue;n[r]=t[r]}return n}var c7=/[ \f\n\r\t\v\u2028\u2029]+/,d7=t=>{var{children:e,breakAll:n,style:r}=t;try{var i=[];Fn(e)||(n?i=e.toString().split(""):i=e.toString().split(c7));var a=i.map(l=>({word:l,width:Up(l,r).width})),s=n?0:Up("",r).width;return{wordsWithComputedWidth:a,spaceWidth:s}}catch{return null}};function p0e(t){return t==="start"||t==="middle"||t==="end"||t==="inherit"}var f7=(t,e,n,r)=>t.reduce((i,a)=>{var{word:s,width:l}=a,c=i[i.length-1];if(c&&l!=null&&(e==null||r||c.width+l+n<Number(e)))c.words.push(s),c.width+=l+n;else{var h={words:[s],width:l};i.push(h)}return i},[]),h7=t=>t.reduce((e,n)=>e.width>n.width?e:n),g0e="",ZL=(t,e,n,r,i,a,s,l)=>{var c=t.slice(0,e),h=d7({breakAll:n,style:r,children:c+g0e});if(!h)return[!1,[]];var p=f7(h.wordsWithComputedWidth,a,s,l),g=p.length>i||h7(p).width>Number(a);return[g,p]},y0e=(t,e,n,r,i)=>{var{maxLines:a,children:s,style:l,breakAll:c}=t,h=Je(a),p=String(s),g=f7(e,r,n,i);if(!h||i)return g;var x=g.length>a||h7(g).width>Number(r);if(!x)return g;for(var b=0,C=p.length-1,A=0,D;b<=C&&A<=p.length-1;){var R=Math.floor((b+C)/2),j=R-1,[O,q]=ZL(p,j,c,l,a,r,n,i),[$]=ZL(p,R,c,l,a,r,n,i);if(!O&&!$&&(b=R+1),O&&$&&(C=R-1),!O&&$){D=q;break}A++}return D||g},JL=t=>{var e=Fn(t)?[]:t.toString().split(c7);return[{words:e,width:void 0}]},v0e=t=>{var{width:e,scaleToFit:n,children:r,style:i,breakAll:a,maxLines:s}=t;if((e||n)&&!Wd.isSsr){var l,c,h=d7({breakAll:a,children:r,style:i});if(h){var{wordsWithComputedWidth:p,spaceWidth:g}=h;l=p,c=g}else return JL(r);return y0e({breakAll:a,children:r,maxLines:s,style:i},l,c,e,!!n)}return JL(r)},m7="#808080",x0e={angle:0,breakAll:!1,capHeight:"0.71em",fill:m7,lineHeight:"1em",scaleToFit:!1,textAnchor:"start",verticalAnchor:"end",x:0,y:0},xb=N.forwardRef((t,e)=>{var n=dr(t,x0e),{x:r,y:i,lineHeight:a,capHeight:s,fill:l,scaleToFit:c,textAnchor:h,verticalAnchor:p}=n,g=YL(n,f0e),x=N.useMemo(()=>v0e({breakAll:g.breakAll,children:g.children,maxLines:g.maxLines,scaleToFit:c,style:g.style,width:g.width}),[g.breakAll,g.children,g.maxLines,c,g.style,g.width]),{dx:b,dy:C,angle:A,className:D,breakAll:R}=g,j=YL(g,h0e);if(!ps(r)||!ps(i)||x.length===0)return null;var O=Number(r)+(Je(b)?b:0),q=Number(i)+(Je(C)?C:0);if(!Cn(O)||!Cn(q))return null;var $;switch(p){case"start":$=JT("calc(".concat(s,")"));break;case"middle":$=JT("calc(".concat((x.length-1)/2," * -").concat(a," + (").concat(s," / 2))"));break;default:$=JT("calc(".concat(x.length-1," * -").concat(a,")"));break}var H=[];if(c){var U=x[0].width,{width:z}=g;H.push("scale(".concat(Je(z)&&Je(U)?z/U:1,")"))}return A&&H.push("rotate(".concat(A,", ").concat(O,", ").concat(q,")")),H.length&&(j.transform=H.join(" ")),N.createElement("text",iA({},Ai(j),{ref:e,x:O,y:q,className:Ft("recharts-text",D),textAnchor:h,fill:l.includes("url")?m7:l}),x.map((B,Z)=>{var K=B.words.join(R?"":" ");return N.createElement("tspan",{x:O,dy:Z===0?$:a,key:"".concat(K,"-").concat(Z)},K)}))});xb.displayName="Text";var _0e=["labelRef"];function b0e(t,e){if(t==null)return{};var n,r,i=w0e(t,e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);for(r=0;r<a.length;r++)n=a[r],e.indexOf(n)===-1&&{}.propertyIsEnumerable.call(t,n)&&(i[n]=t[n])}return i}function w0e(t,e){if(t==null)return{};var n={};for(var r in t)if({}.hasOwnProperty.call(t,r)){if(e.indexOf(r)!==-1)continue;n[r]=t[r]}return n}function QL(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function ar(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?QL(Object(n),!0).forEach(function(r){E0e(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):QL(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function E0e(t,e,n){return(e=T0e(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function T0e(t){var e=S0e(t,"string");return typeof e=="symbol"?e:e+""}function S0e(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function yl(){return yl=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)({}).hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},yl.apply(null,arguments)}var p7=N.createContext(null),g7=t=>{var{x:e,y:n,upperWidth:r,lowerWidth:i,width:a,height:s,children:l}=t,c=N.useMemo(()=>({x:e,y:n,upperWidth:r,lowerWidth:i,width:a,height:s}),[e,n,r,i,a,s]);return N.createElement(p7.Provider,{value:c},l)},y7=()=>{var t=N.useContext(p7),e=$g();return t||OB(e)},A0e=N.createContext(null),C0e=()=>{var t=N.useContext(A0e),e=$e(sq);return t||e},I0e=t=>{var{value:e,formatter:n}=t,r=Fn(t.children)?e:t.children;return typeof n=="function"?n(r):r},_N=t=>t!=null&&typeof t=="function",N0e=(t,e)=>{var n=Kr(e-t),r=Math.min(Math.abs(e-t),360);return n*r},P0e=(t,e,n,r,i)=>{var{offset:a,className:s}=t,{cx:l,cy:c,innerRadius:h,outerRadius:p,startAngle:g,endAngle:x,clockWise:b}=i,C=(h+p)/2,A=N0e(g,x),D=A>=0?1:-1,R,j;switch(e){case"insideStart":R=g+D*a,j=b;break;case"insideEnd":R=x-D*a,j=!b;break;case"end":R=x+D*a,j=b;break;default:throw new Error("Unsupported position ".concat(e))}j=A<=0?j:!j;var O=wr(l,c,C,R),q=wr(l,c,C,R+(j?1:-1)*359),$="M".concat(O.x,",").concat(O.y,`
    A`).concat(C,",").concat(C,",0,1,").concat(j?0:1,`,
    `).concat(q.x,",").concat(q.y),H=Fn(t.id)?rg("recharts-radial-line-"):t.id;return N.createElement("text",yl({},r,{dominantBaseline:"central",className:Ft("recharts-radial-bar-label",s)}),N.createElement("defs",null,N.createElement("path",{id:H,d:$})),N.createElement("textPath",{xlinkHref:"#".concat(H)},n))},D0e=(t,e,n)=>{var{cx:r,cy:i,innerRadius:a,outerRadius:s,startAngle:l,endAngle:c}=t,h=(l+c)/2;if(n==="outside"){var{x:p,y:g}=wr(r,i,s+e,h);return{x:p,y:g,textAnchor:p>=r?"start":"end",verticalAnchor:"middle"}}if(n==="center")return{x:r,y:i,textAnchor:"middle",verticalAnchor:"middle"};if(n==="centerTop")return{x:r,y:i,textAnchor:"middle",verticalAnchor:"start"};if(n==="centerBottom")return{x:r,y:i,textAnchor:"middle",verticalAnchor:"end"};var x=(a+s)/2,{x:b,y:C}=wr(r,i,x,h);return{x:b,y:C,textAnchor:"middle",verticalAnchor:"middle"}},aA=t=>"cx"in t&&Je(t.cx),R0e=(t,e)=>{var{parentViewBox:n,offset:r,position:i}=t,a;n!=null&&!aA(n)&&(a=n);var{x:s,y:l,upperWidth:c,lowerWidth:h,height:p}=e,g=s,x=s+(c-h)/2,b=(g+x)/2,C=(c+h)/2,A=g+c/2,D=p>=0?1:-1,R=D*r,j=D>0?"end":"start",O=D>0?"start":"end",q=c>=0?1:-1,$=q*r,H=q>0?"end":"start",U=q>0?"start":"end";if(i==="top"){var z={x:g+c/2,y:l-R,textAnchor:"middle",verticalAnchor:j};return ar(ar({},z),a?{height:Math.max(l-a.y,0),width:c}:{})}if(i==="bottom"){var B={x:x+h/2,y:l+p+R,textAnchor:"middle",verticalAnchor:O};return ar(ar({},B),a?{height:Math.max(a.y+a.height-(l+p),0),width:h}:{})}if(i==="left"){var Z={x:b-$,y:l+p/2,textAnchor:H,verticalAnchor:"middle"};return ar(ar({},Z),a?{width:Math.max(Z.x-a.x,0),height:p}:{})}if(i==="right"){var K={x:b+C+$,y:l+p/2,textAnchor:U,verticalAnchor:"middle"};return ar(ar({},K),a?{width:Math.max(a.x+a.width-K.x,0),height:p}:{})}var J=a?{width:C,height:p}:{};return i==="insideLeft"?ar({x:b+$,y:l+p/2,textAnchor:U,verticalAnchor:"middle"},J):i==="insideRight"?ar({x:b+C-$,y:l+p/2,textAnchor:H,verticalAnchor:"middle"},J):i==="insideTop"?ar({x:g+c/2,y:l+R,textAnchor:"middle",verticalAnchor:O},J):i==="insideBottom"?ar({x:x+h/2,y:l+p-R,textAnchor:"middle",verticalAnchor:j},J):i==="insideTopLeft"?ar({x:g+$,y:l+R,textAnchor:U,verticalAnchor:O},J):i==="insideTopRight"?ar({x:g+c-$,y:l+R,textAnchor:H,verticalAnchor:O},J):i==="insideBottomLeft"?ar({x:x+$,y:l+p-R,textAnchor:U,verticalAnchor:j},J):i==="insideBottomRight"?ar({x:x+h-$,y:l+p-R,textAnchor:H,verticalAnchor:j},J):i&&typeof i=="object"&&(Je(i.x)||kl(i.x))&&(Je(i.y)||kl(i.y))?ar({x:s+Si(i.x,C),y:l+Si(i.y,p),textAnchor:"end",verticalAnchor:"end"},J):ar({x:A,y:l+p/2,textAnchor:"middle",verticalAnchor:"middle"},J)},k0e={angle:0,offset:5,zIndex:ur.label,position:"middle",textBreakAll:!1};function Vu(t){var e=dr(t,k0e),{viewBox:n,position:r,value:i,children:a,content:s,className:l="",textBreakAll:c,labelRef:h}=e,p=C0e(),g=y7(),x=r==="center"?g:p??g,b,C,A;if(n==null?b=x:aA(n)?b=n:b=OB(n),!b||Fn(i)&&Fn(a)&&!N.isValidElement(s)&&typeof s!="function")return null;var D=ar(ar({},e),{},{viewBox:b});if(N.isValidElement(s)){var{labelRef:R}=D,j=b0e(D,_0e);return N.cloneElement(s,j)}if(typeof s=="function"){if(C=N.createElement(s,D),N.isValidElement(C))return C}else C=I0e(e);var O=Ai(e);if(aA(b)){if(r==="insideStart"||r==="insideEnd"||r==="end")return P0e(e,r,C,O,b);A=D0e(b,e.offset,e.position)}else A=R0e(e,b);return N.createElement(zi,{zIndex:e.zIndex},N.createElement(xb,yl({ref:h,className:Ft("recharts-label",l)},O,A,{textAnchor:p0e(O.textAnchor)?O.textAnchor:A.textAnchor,breakAll:c}),C))}Vu.displayName="Label";var M0e=(t,e,n)=>{if(!t)return null;var r={viewBox:e,labelRef:n};return t===!0?N.createElement(Vu,yl({key:"label-implicit"},r)):ps(t)?N.createElement(Vu,yl({key:"label-implicit",value:t},r)):N.isValidElement(t)?t.type===Vu?N.cloneElement(t,ar({key:"label-implicit"},r)):N.createElement(Vu,yl({key:"label-implicit",content:t},r)):_N(t)?N.createElement(Vu,yl({key:"label-implicit",content:t},r)):t&&typeof t=="object"?N.createElement(Vu,yl({},t,{key:"label-implicit"},r)):null};function v7(t){var{label:e,labelRef:n}=t,r=y7();return M0e(e,r,n)||null}var QT={},XT={},XL;function O0e(){return XL||(XL=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});function e(n){return n[n.length-1]}t.last=e})(XT)),XT}var eS={},e4;function j0e(){return e4||(e4=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});function e(n){return Array.isArray(n)?n:Array.from(n)}t.toArray=e})(eS)),eS}var t4;function L0e(){return t4||(t4=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=O0e(),n=j0e(),r=KC();function i(a){if(r.isArrayLike(a))return e.last(n.toArray(a))}t.last=i})(QT)),QT}var tS,n4;function V0e(){return n4||(n4=1,tS=L0e().last),tS}var U0e=V0e();const F0e=Vo(U0e);var B0e=["valueAccessor"],z0e=["dataKey","clockWise","id","textBreakAll","zIndex"];function zx(){return zx=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)({}).hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},zx.apply(null,arguments)}function r4(t,e){if(t==null)return{};var n,r,i=q0e(t,e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);for(r=0;r<a.length;r++)n=a[r],e.indexOf(n)===-1&&{}.propertyIsEnumerable.call(t,n)&&(i[n]=t[n])}return i}function q0e(t,e){if(t==null)return{};var n={};for(var r in t)if({}.hasOwnProperty.call(t,r)){if(e.indexOf(r)!==-1)continue;n[r]=t[r]}return n}var H0e=t=>Array.isArray(t.value)?F0e(t.value):t.value,x7=N.createContext(void 0),_7=x7.Provider,b7=N.createContext(void 0),G0e=b7.Provider;function $0e(){return N.useContext(x7)}function K0e(){return N.useContext(b7)}function f0(t){var{valueAccessor:e=H0e}=t,n=r4(t,B0e),{dataKey:r,clockWise:i,id:a,textBreakAll:s,zIndex:l}=n,c=r4(n,z0e),h=$0e(),p=K0e(),g=h||p;return!g||!g.length?null:N.createElement(zi,{zIndex:l??ur.label},N.createElement(Pr,{className:"recharts-label-list"},g.map((x,b)=>{var C,A=Fn(r)?e(x,b):mn(x&&x.payload,r),D=Fn(a)?{}:{id:"".concat(a,"-").concat(b)};return N.createElement(Vu,zx({key:"label-".concat(b)},Ai(x),c,D,{fill:(C=n.fill)!==null&&C!==void 0?C:x.fill,parentViewBox:x.parentViewBox,value:A,textBreakAll:s,viewBox:x.viewBox,index:b,zIndex:0}))})))}f0.displayName="LabelList";function bN(t){var{label:e}=t;return e?e===!0?N.createElement(f0,{key:"labelList-implicit"}):N.isValidElement(e)||_N(e)?N.createElement(f0,{key:"labelList-implicit",content:e}):typeof e=="object"?N.createElement(f0,zx({key:"labelList-implicit"},e,{type:String(e.type)})):null:null}function sA(){return sA=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)({}).hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},sA.apply(null,arguments)}var w7=t=>{var{cx:e,cy:n,r,className:i}=t,a=Ft("recharts-dot",i);return Je(e)&&Je(n)&&Je(r)?N.createElement("circle",sA({},Ha(t),$C(t),{className:a,cx:e,cy:n,r})):null},E7=t=>t.graphicalItems.polarItems,W0e=pe([zn,ny],HI),_b=pe([E7,Gn,W0e],GI),Y0e=pe([_b],$I),bb=pe([Y0e,kI],KI),Z0e=pe([bb,Gn,_b],YI);pe([bb,Gn,_b],(t,e,n)=>n.length>0?t.flatMap(r=>n.flatMap(i=>{var a,s=mn(r,(a=e.dataKey)!==null&&a!==void 0?a:i.dataKey);return{value:s,errorDomain:[]}})).filter(Boolean):(e==null?void 0:e.dataKey)!=null?t.map(r=>({value:mn(r,e.dataKey),errorDomain:[]})):t.map(r=>({value:r,errorDomain:[]})));var i4=()=>{},J0e=pe([bb,Gn,_b,pb,zn],XI),Q0e=pe([Gn,JI,QI,i4,J0e,i4,Lt,zn],eN),T7=pe([Gn,Lt,bb,Z0e,ty,zn,Q0e],tN),X0e=pe([T7,Gn,mm],iN);pe([Gn,T7,X0e,zn],sN);var exe={radiusAxis:{},angleAxis:{}},S7=ma({name:"polarAxis",initialState:exe,reducers:{addRadiusAxis(t,e){t.radiusAxis[e.payload.id]=e.payload},removeRadiusAxis(t,e){delete t.radiusAxis[e.payload.id]},addAngleAxis(t,e){t.angleAxis[e.payload.id]=e.payload},removeAngleAxis(t,e){delete t.angleAxis[e.payload.id]}}}),{addRadiusAxis:gAe,removeRadiusAxis:yAe,addAngleAxis:vAe,removeAngleAxis:xAe}=S7.actions,txe=S7.reducer;function a4(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function s4(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?a4(Object(n),!0).forEach(function(r){nxe(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):a4(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function nxe(t,e,n){return(e=rxe(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function rxe(t){var e=ixe(t,"string");return typeof e=="symbol"?e:e+""}function ixe(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var axe=(t,e)=>e,wN=pe([E7,axe],(t,e)=>t.filter(n=>n.type==="pie").find(n=>n.id===e)),sxe=[],EN=(t,e,n)=>(n==null?void 0:n.length)===0?sxe:n,A7=pe([kI,wN,EN],(t,e,n)=>{var{chartData:r}=t;if(e!=null){var i;if((e==null?void 0:e.data)!=null&&e.data.length>0?i=e.data:i=r,(!i||!i.length)&&n!=null&&(i=n.map(a=>s4(s4({},e.presentationProps),a.props))),i!=null)return i}}),oxe=pe([A7,wN,EN],(t,e,n)=>{if(!(t==null||e==null))return t.map((r,i)=>{var a,s=mn(r,e.nameKey,e.name),l;return n!=null&&(a=n[i])!==null&&a!==void 0&&(a=a.props)!==null&&a!==void 0&&a.fill?l=n[i].props.fill:typeof r=="object"&&r!=null&&"fill"in r?l=r.fill:l=e.fill,{value:lm(s,e.dataKey),color:l,payload:r,type:e.legendType}})}),lxe=pe([A7,wN,EN,Rr],(t,e,n,r)=>{if(!(e==null||t==null))return u_e({offset:r,pieSettings:e,displayedData:t,cells:n})}),nS={exports:{}},cn={};/**
 * @license React
 * react-is.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var o4;function uxe(){if(o4)return cn;o4=1;var t=Symbol.for("react.transitional.element"),e=Symbol.for("react.portal"),n=Symbol.for("react.fragment"),r=Symbol.for("react.strict_mode"),i=Symbol.for("react.profiler"),a=Symbol.for("react.consumer"),s=Symbol.for("react.context"),l=Symbol.for("react.forward_ref"),c=Symbol.for("react.suspense"),h=Symbol.for("react.suspense_list"),p=Symbol.for("react.memo"),g=Symbol.for("react.lazy"),x=Symbol.for("react.view_transition"),b=Symbol.for("react.client.reference");function C(A){if(typeof A=="object"&&A!==null){var D=A.$$typeof;switch(D){case t:switch(A=A.type,A){case n:case i:case r:case c:case h:case x:return A;default:switch(A=A&&A.$$typeof,A){case s:case l:case g:case p:return A;case a:return A;default:return D}}case e:return D}}}return cn.ContextConsumer=a,cn.ContextProvider=s,cn.Element=t,cn.ForwardRef=l,cn.Fragment=n,cn.Lazy=g,cn.Memo=p,cn.Portal=e,cn.Profiler=i,cn.StrictMode=r,cn.Suspense=c,cn.SuspenseList=h,cn.isContextConsumer=function(A){return C(A)===a},cn.isContextProvider=function(A){return C(A)===s},cn.isElement=function(A){return typeof A=="object"&&A!==null&&A.$$typeof===t},cn.isForwardRef=function(A){return C(A)===l},cn.isFragment=function(A){return C(A)===n},cn.isLazy=function(A){return C(A)===g},cn.isMemo=function(A){return C(A)===p},cn.isPortal=function(A){return C(A)===e},cn.isProfiler=function(A){return C(A)===i},cn.isStrictMode=function(A){return C(A)===r},cn.isSuspense=function(A){return C(A)===c},cn.isSuspenseList=function(A){return C(A)===h},cn.isValidElementType=function(A){return typeof A=="string"||typeof A=="function"||A===n||A===i||A===r||A===c||A===h||typeof A=="object"&&A!==null&&(A.$$typeof===g||A.$$typeof===p||A.$$typeof===s||A.$$typeof===a||A.$$typeof===l||A.$$typeof===b||A.getModuleId!==void 0)},cn.typeOf=C,cn}var l4;function cxe(){return l4||(l4=1,nS.exports=uxe()),nS.exports}var dxe=cxe(),u4=t=>typeof t=="string"?t:t?t.displayName||t.name||"Component":"",c4=null,rS=null,C7=t=>{if(t===c4&&Array.isArray(rS))return rS;var e=[];return N.Children.forEach(t,n=>{Fn(n)||(dxe.isFragment(n)?e=e.concat(C7(n.props.children)):e.push(n))}),rS=e,c4=t,e};function TN(t,e){var n=[],r=[];return Array.isArray(e)?r=e.map(i=>u4(i)):r=[u4(e)],C7(t).forEach(i=>{var a=Vd(i,"type.displayName")||Vd(i,"type.name");a&&r.indexOf(a)!==-1&&n.push(i)}),n}var I7=t=>t&&typeof t=="object"&&"clipDot"in t?!!t.clipDot:!0,iS={},d4;function fxe(){return d4||(d4=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});function e(n){var i;if(typeof n!="object"||n==null)return!1;if(Object.getPrototypeOf(n)===null)return!0;if(Object.prototype.toString.call(n)!=="[object Object]"){const a=n[Symbol.toStringTag];return a==null||!((i=Object.getOwnPropertyDescriptor(n,Symbol.toStringTag))!=null&&i.writable)?!1:n.toString()===`[object ${a}]`}let r=n;for(;Object.getPrototypeOf(r)!==null;)r=Object.getPrototypeOf(r);return Object.getPrototypeOf(n)===r}t.isPlainObject=e})(iS)),iS}var aS,f4;function hxe(){return f4||(f4=1,aS=fxe().isPlainObject),aS}var mxe=hxe();const pxe=Vo(mxe);function h4(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function m4(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?h4(Object(n),!0).forEach(function(r){gxe(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):h4(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function gxe(t,e,n){return(e=yxe(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function yxe(t){var e=vxe(t,"string");return typeof e=="symbol"?e:e+""}function vxe(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function qx(){return qx=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)({}).hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},qx.apply(null,arguments)}var p4=(t,e,n,r,i)=>{var a=n-r,s;return s="M ".concat(t,",").concat(e),s+="L ".concat(t+n,",").concat(e),s+="L ".concat(t+n-a/2,",").concat(e+i),s+="L ".concat(t+n-a/2-r,",").concat(e+i),s+="L ".concat(t,",").concat(e," Z"),s},xxe={x:0,y:0,upperWidth:0,lowerWidth:0,height:0,isUpdateAnimationActive:!1,animationBegin:0,animationDuration:1500,animationEasing:"ease"},_xe=t=>{var e=dr(t,xxe),{x:n,y:r,upperWidth:i,lowerWidth:a,height:s,className:l}=e,{animationEasing:c,animationDuration:h,animationBegin:p,isUpdateAnimationActive:g}=e,x=N.useRef(null),[b,C]=N.useState(-1),A=N.useRef(i),D=N.useRef(a),R=N.useRef(s),j=N.useRef(n),O=N.useRef(r),q=Zg(t,"trapezoid-");if(N.useEffect(()=>{if(x.current&&x.current.getTotalLength)try{var Se=x.current.getTotalLength();Se&&C(Se)}catch{}},[]),n!==+n||r!==+r||i!==+i||a!==+a||s!==+s||i===0&&a===0||s===0)return null;var $=Ft("recharts-trapezoid",l);if(!g)return N.createElement("g",null,N.createElement("path",qx({},Ai(e),{className:$,d:p4(n,r,i,a,s)})));var H=A.current,U=D.current,z=R.current,B=j.current,Z=O.current,K="0px ".concat(b===-1?1:b,"px"),J="".concat(b,"px 0px"),G=WB(["strokeDasharray"],h,c);return N.createElement(Yg,{animationId:q,key:q,canBegin:b>0,duration:h,easing:c,isActive:g,begin:p},Se=>{var Oe=jn(H,i,Se),ee=jn(U,a,Se),re=jn(z,s,Se),le=jn(B,n,Se),Ne=jn(Z,r,Se);x.current&&(A.current=Oe,D.current=ee,R.current=re,j.current=le,O.current=Ne);var Pe=Se>0?{transition:G,strokeDasharray:J}:{strokeDasharray:K};return N.createElement("path",qx({},Ai(e),{className:$,d:p4(le,Ne,Oe,ee,re),ref:x,style:m4(m4({},Pe),e.style)}))})},bxe=["option","shapeType","propTransformer","activeClassName"];function wxe(t,e){if(t==null)return{};var n,r,i=Exe(t,e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);for(r=0;r<a.length;r++)n=a[r],e.indexOf(n)===-1&&{}.propertyIsEnumerable.call(t,n)&&(i[n]=t[n])}return i}function Exe(t,e){if(t==null)return{};var n={};for(var r in t)if({}.hasOwnProperty.call(t,r)){if(e.indexOf(r)!==-1)continue;n[r]=t[r]}return n}function g4(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function Hx(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?g4(Object(n),!0).forEach(function(r){Txe(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):g4(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function Txe(t,e,n){return(e=Sxe(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function Sxe(t){var e=Axe(t,"string");return typeof e=="symbol"?e:e+""}function Axe(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function Cxe(t,e){return Hx(Hx({},e),t)}function Ixe(t,e){return t==="symbols"}function y4(t){var{shapeType:e,elementProps:n}=t;switch(e){case"rectangle":return N.createElement(QB,n);case"trapezoid":return N.createElement(_xe,n);case"sector":return N.createElement(nz,n);case"symbols":if(Ixe(e))return N.createElement(GC,n);break;case"curve":return N.createElement(uI,n);default:return null}}function Nxe(t){return N.isValidElement(t)?t.props:t}function SN(t){var{option:e,shapeType:n,propTransformer:r=Cxe,activeClassName:i="recharts-active-shape"}=t,a=wxe(t,bxe),s;if(N.isValidElement(e))s=N.cloneElement(e,Hx(Hx({},a),Nxe(e)));else if(typeof e=="function")s=e(a);else if(pxe(e)&&typeof e!="boolean"){var l=r(e,a);s=N.createElement(y4,{shapeType:n,elementProps:l})}else{var c=a;s=N.createElement(y4,{shapeType:n,elementProps:c})}return a.isActive?N.createElement(Pr,{className:i},s):s}var AN=(t,e)=>{var n=gn();return(r,i)=>a=>{t==null||t(r,i,a),n(Lq({activeIndex:String(i),activeDataKey:e,activeCoordinate:r.tooltipPosition}))}},CN=t=>{var e=gn();return(n,r)=>i=>{t==null||t(n,r,i),e(Hge())}},IN=(t,e)=>{var n=gn();return(r,i)=>a=>{t==null||t(r,i,a),n(Gge({activeIndex:String(i),activeDataKey:e,activeCoordinate:r.tooltipPosition}))}};function NN(t){var{tooltipEntrySettings:e}=t,n=gn(),r=ai(),i=N.useRef(null);return N.useLayoutEffect(()=>{r||(i.current===null?n(Fge(e)):i.current!==e&&n(Bge({prev:i.current,next:e})),i.current=e)},[e,n,r]),N.useLayoutEffect(()=>()=>{i.current&&(n(zge(i.current)),i.current=null)},[n]),null}function N7(t){var{legendPayload:e}=t,n=gn(),r=ai(),i=N.useRef(null);return N.useLayoutEffect(()=>{r||(i.current===null?n(HB(e)):i.current!==e&&n(GB({prev:i.current,next:e})),i.current=e)},[n,r,e]),N.useLayoutEffect(()=>()=>{i.current&&(n($B(i.current)),i.current=null)},[n]),null}function Pxe(t){var{legendPayload:e}=t,n=gn(),r=$e(Lt),i=N.useRef(null);return N.useLayoutEffect(()=>{r!=="centric"&&r!=="radial"||(i.current===null?n(HB(e)):i.current!==e&&n(GB({prev:i.current,next:e})),i.current=e)},[n,r,e]),N.useLayoutEffect(()=>()=>{i.current&&(n($B(i.current)),i.current=null)},[n]),null}var sS,Dxe=()=>{var[t]=N.useState(()=>rg("uid-"));return t},Rxe=(sS=J9.useId)!==null&&sS!==void 0?sS:Dxe;function P7(t,e){var n=Rxe();return e||(t?"".concat(t,"-").concat(n):n)}var kxe=N.createContext(void 0),PN=t=>{var{id:e,type:n,children:r}=t,i=P7("recharts-".concat(n),e);return N.createElement(kxe.Provider,{value:i},r(i))},Mxe={cartesianItems:[],polarItems:[]},D7=ma({name:"graphicalItems",initialState:Mxe,reducers:{addCartesianGraphicalItem:{reducer(t,e){t.cartesianItems.push(e.payload)},prepare:Mn()},replaceCartesianGraphicalItem:{reducer(t,e){var{prev:n,next:r}=e.payload,i=Hs(t).cartesianItems.indexOf(n);i>-1&&(t.cartesianItems[i]=r)},prepare:Mn()},removeCartesianGraphicalItem:{reducer(t,e){var n=Hs(t).cartesianItems.indexOf(e.payload);n>-1&&t.cartesianItems.splice(n,1)},prepare:Mn()},addPolarGraphicalItem:{reducer(t,e){t.polarItems.push(e.payload)},prepare:Mn()},removePolarGraphicalItem:{reducer(t,e){var n=Hs(t).polarItems.indexOf(e.payload);n>-1&&t.polarItems.splice(n,1)},prepare:Mn()}}}),{addCartesianGraphicalItem:Oxe,replaceCartesianGraphicalItem:jxe,removeCartesianGraphicalItem:Lxe,addPolarGraphicalItem:Vxe,removePolarGraphicalItem:Uxe}=D7.actions,Fxe=D7.reducer,Bxe=t=>{var e=gn(),n=N.useRef(null);return N.useLayoutEffect(()=>{n.current===null?e(Oxe(t)):n.current!==t&&e(jxe({prev:n.current,next:t})),n.current=t},[e,t]),N.useLayoutEffect(()=>()=>{n.current&&(e(Lxe(n.current)),n.current=null)},[e]),null},R7=N.memo(Bxe);function zxe(t){var e=gn();return N.useLayoutEffect(()=>(e(Vxe(t)),()=>{e(Uxe(t))}),[e,t]),null}var qxe=["key"],Hxe=["onMouseEnter","onClick","onMouseLeave"],Gxe=["id"],$xe=["id"];function v4(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function Qn(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?v4(Object(n),!0).forEach(function(r){Kxe(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):v4(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function Kxe(t,e,n){return(e=Wxe(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function Wxe(t){var e=Yxe(t,"string");return typeof e=="symbol"?e:e+""}function Yxe(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function fc(){return fc=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)({}).hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},fc.apply(null,arguments)}function wb(t,e){if(t==null)return{};var n,r,i=Zxe(t,e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);for(r=0;r<a.length;r++)n=a[r],e.indexOf(n)===-1&&{}.propertyIsEnumerable.call(t,n)&&(i[n]=t[n])}return i}function Zxe(t,e){if(t==null)return{};var n={};for(var r in t)if({}.hasOwnProperty.call(t,r)){if(e.indexOf(r)!==-1)continue;n[r]=t[r]}return n}function Jxe(t){var e=N.useMemo(()=>TN(t.children,cy),[t.children]),n=$e(r=>oxe(r,t.id,e));return n==null?null:N.createElement(Pxe,{legendPayload:n})}var Qxe=N.memo(t=>{var{dataKey:e,nameKey:n,sectors:r,stroke:i,strokeWidth:a,fill:s,name:l,hide:c,tooltipType:h}=t,p={dataDefinedOnItem:r.map(g=>g.tooltipPayload),positions:r.map(g=>g.tooltipPosition),settings:{stroke:i,strokeWidth:a,fill:s,dataKey:e,nameKey:n,name:lm(l,e),hide:c,type:h,color:s,unit:""}};return N.createElement(NN,{tooltipEntrySettings:p})}),Xxe=(t,e)=>t>e?"start":t<e?"end":"middle",e_e=(t,e,n)=>Si(typeof e=="function"?e(t):e,n,n*.8),t_e=(t,e,n)=>{var{top:r,left:i,width:a,height:s}=e,l=XB(a,s),c=i+Si(t.cx,a,a/2),h=r+Si(t.cy,s,s/2),p=Si(t.innerRadius,l,0),g=e_e(n,t.outerRadius,l),x=t.maxRadius||Math.sqrt(a*a+s*s)/2;return{cx:c,cy:h,innerRadius:p,outerRadius:g,maxRadius:x}},n_e=(t,e)=>{var n=Kr(e-t),r=Math.min(Math.abs(e-t),360);return n*r};function r_e(t){return t&&typeof t=="object"&&"className"in t&&typeof t.className=="string"?t.className:""}var i_e=(t,e)=>{if(N.isValidElement(t))return N.cloneElement(t,e);if(typeof t=="function")return t(e);var n=Ft("recharts-pie-label-line",typeof t!="boolean"?t.className:""),{key:r}=e,i=wb(e,qxe);return N.createElement(uI,fc({},i,{type:"linear",className:n}))},a_e=(t,e,n)=>{if(N.isValidElement(t))return N.cloneElement(t,e);var r=n;if(typeof t=="function"&&(r=t(e),N.isValidElement(r)))return r;var i=Ft("recharts-pie-label-text",r_e(t));return N.createElement(xb,fc({},e,{alignmentBaseline:"middle",className:i}),r)};function s_e(t){var{sectors:e,props:n,showLabels:r}=t,{label:i,labelLine:a,dataKey:s}=n;if(!r||!i||!e)return null;var l=Ha(n),c=Ld(i),h=Ld(a),p=typeof i=="object"&&"offsetRadius"in i&&typeof i.offsetRadius=="number"&&i.offsetRadius||20,g=e.map((x,b)=>{var C=(x.startAngle+x.endAngle)/2,A=wr(x.cx,x.cy,x.outerRadius+p,C),D=Qn(Qn(Qn(Qn({},l),x),{},{stroke:"none"},c),{},{index:b,textAnchor:Xxe(A.x,x.cx)},A),R=Qn(Qn(Qn(Qn({},l),x),{},{fill:"none",stroke:x.fill},h),{},{index:b,points:[wr(x.cx,x.cy,x.outerRadius,C),A],key:"line"});return N.createElement(zi,{zIndex:ur.label,key:"label-".concat(x.startAngle,"-").concat(x.endAngle,"-").concat(x.midAngle,"-").concat(b)},N.createElement(Pr,null,a&&i_e(a,R),a_e(i,D,mn(x,s))))});return N.createElement(Pr,{className:"recharts-pie-labels"},g)}function o_e(t){var{sectors:e,props:n,showLabels:r}=t,{label:i}=n;return typeof i=="object"&&i!=null&&"position"in i?N.createElement(bN,{label:i}):N.createElement(s_e,{sectors:e,props:n,showLabels:r})}function l_e(t){var{sectors:e,activeShape:n,inactiveShape:r,allOtherPieProps:i,shape:a}=t,s=$e(dc),{onMouseEnter:l,onClick:c,onMouseLeave:h}=i,p=wb(i,Hxe),g=AN(l,i.dataKey),x=CN(h),b=IN(c,i.dataKey);return e==null||e.length===0?null:N.createElement(N.Fragment,null,e.map((C,A)=>{if((C==null?void 0:C.startAngle)===0&&(C==null?void 0:C.endAngle)===0&&e.length!==1)return null;var D=String(A)===s,R=s?r:null,j=n&&D?n:R,O=Qn(Qn({},C),{},{stroke:C.stroke,tabIndex:-1,[PB]:A,[DB]:i.dataKey});return N.createElement(Pr,fc({key:"sector-".concat(C==null?void 0:C.startAngle,"-").concat(C==null?void 0:C.endAngle,"-").concat(C.midAngle,"-").concat(A),tabIndex:-1,className:"recharts-pie-sector"},Bg(p,C,A),{onMouseEnter:g(C,A),onMouseLeave:x(C,A),onClick:b(C,A)}),N.createElement(SN,fc({option:a??j,shapeType:"sector",isActive:D},O)))}))}function u_e(t){var e,{pieSettings:n,displayedData:r,cells:i,offset:a}=t,{cornerRadius:s,startAngle:l,endAngle:c,dataKey:h,nameKey:p,tooltipType:g}=n,x=Math.abs(n.minAngle),b=n_e(l,c),C=Math.abs(b),A=r.length<=1?0:(e=n.paddingAngle)!==null&&e!==void 0?e:0,D=r.filter(H=>mn(H,h,0)!==0).length,R=(C>=360?D:D-1)*A,j=C-D*x-R,O=r.reduce((H,U)=>{var z=mn(U,h,0);return H+(Je(z)?z:0)},0),q;if(O>0){var $;q=r.map((H,U)=>{var z=mn(H,h,0),B=mn(H,p,U),Z=t_e(n,a,H),K=(Je(z)?z:0)/O,J,G=Qn(Qn({},H),i&&i[U]&&i[U].props);U?J=$.endAngle+Kr(b)*A*(z!==0?1:0):J=l;var Se=J+Kr(b)*((z!==0?x:0)+K*j),Oe=(J+Se)/2,ee=(Z.innerRadius+Z.outerRadius)/2,re=[{name:B,value:z,payload:G,dataKey:h,type:g}],le=wr(Z.cx,Z.cy,ee,Oe);return $=Qn(Qn(Qn(Qn({},n.presentationProps),{},{percent:K,cornerRadius:typeof s=="string"?parseFloat(s):s,name:B,tooltipPayload:re,midAngle:Oe,middleRadius:ee,tooltipPosition:le},G),Z),{},{value:z,startAngle:J,endAngle:Se,payload:G,paddingAngle:Kr(b)*A}),$})}return q}function c_e(t){var{showLabels:e,sectors:n,children:r}=t,i=N.useMemo(()=>!e||!n?[]:n.map(a=>({value:a.value,payload:a.payload,clockWise:!1,parentViewBox:void 0,viewBox:{cx:a.cx,cy:a.cy,innerRadius:a.innerRadius,outerRadius:a.outerRadius,startAngle:a.startAngle,endAngle:a.endAngle,clockWise:!1},fill:a.fill})),[n,e]);return N.createElement(G0e,{value:e?i:void 0},r)}function d_e(t){var{props:e,previousSectorsRef:n}=t,{sectors:r,isAnimationActive:i,animationBegin:a,animationDuration:s,animationEasing:l,activeShape:c,inactiveShape:h,onAnimationStart:p,onAnimationEnd:g}=e,x=Zg(e,"recharts-pie-"),b=n.current,[C,A]=N.useState(!1),D=N.useCallback(()=>{typeof g=="function"&&g(),A(!1)},[g]),R=N.useCallback(()=>{typeof p=="function"&&p(),A(!0)},[p]);return N.createElement(c_e,{showLabels:!C,sectors:r},N.createElement(Yg,{animationId:x,begin:a,duration:s,isActive:i,easing:l,onAnimationStart:R,onAnimationEnd:D,key:x},j=>{var O=[],q=r&&r[0],$=q==null?void 0:q.startAngle;return r==null||r.forEach((H,U)=>{var z=b&&b[U],B=U>0?Vd(H,"paddingAngle",0):0;if(z){var Z=jn(z.endAngle-z.startAngle,H.endAngle-H.startAngle,j),K=Qn(Qn({},H),{},{startAngle:$+B,endAngle:$+Z+B});O.push(K),$=K.endAngle}else{var{endAngle:J,startAngle:G}=H,Se=jn(0,J-G,j),Oe=Qn(Qn({},H),{},{startAngle:$+B,endAngle:$+Se+B});O.push(Oe),$=Oe.endAngle}}),n.current=O,N.createElement(Pr,null,N.createElement(l_e,{sectors:O,activeShape:c,inactiveShape:h,allOtherPieProps:e,shape:e.shape}))}),N.createElement(o_e,{showLabels:!C,sectors:r,props:e}),e.children)}var f_e={animationBegin:400,animationDuration:1500,animationEasing:"ease",cx:"50%",cy:"50%",dataKey:"value",endAngle:360,fill:"#808080",hide:!1,innerRadius:0,isAnimationActive:!Wd.isSsr,labelLine:!0,legendType:"rect",minAngle:0,nameKey:"name",outerRadius:"80%",paddingAngle:0,rootTabIndex:0,startAngle:0,stroke:"#fff",zIndex:ur.area};function h_e(t){var{id:e}=t,n=wb(t,Gxe),{hide:r,className:i,rootTabIndex:a}=t,s=N.useMemo(()=>TN(t.children,cy),[t.children]),l=$e(p=>lxe(p,e,s)),c=N.useRef(null),h=Ft("recharts-pie",i);return r||l==null?(c.current=null,N.createElement(Pr,{tabIndex:a,className:h})):N.createElement(zi,{zIndex:t.zIndex},N.createElement(Qxe,{dataKey:t.dataKey,nameKey:t.nameKey,sectors:l,stroke:t.stroke,strokeWidth:t.strokeWidth,fill:t.fill,name:t.name,hide:t.hide,tooltipType:t.tooltipType}),N.createElement(Pr,{tabIndex:a,className:h},N.createElement(d_e,{props:Qn(Qn({},n),{},{sectors:l}),previousSectorsRef:c})))}function k7(t){var e=dr(t,f_e),{id:n}=e,r=wb(e,$xe),i=Ha(r);return N.createElement(PN,{id:n,type:"pie"},a=>N.createElement(N.Fragment,null,N.createElement(zxe,{type:"pie",id:a,data:r.data,dataKey:r.dataKey,hide:r.hide,angleAxisId:0,radiusAxisId:0,name:r.name,nameKey:r.nameKey,tooltipType:r.tooltipType,legendType:r.legendType,fill:r.fill,cx:r.cx,cy:r.cy,startAngle:r.startAngle,endAngle:r.endAngle,paddingAngle:r.paddingAngle,minAngle:r.minAngle,innerRadius:r.innerRadius,outerRadius:r.outerRadius,cornerRadius:r.cornerRadius,presentationProps:i,maxRadius:e.maxRadius}),N.createElement(Jxe,fc({},r,{id:a})),N.createElement(h_e,fc({},r,{id:a}))))}k7.displayName="Pie";var m_e=["points"];function x4(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function oS(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?x4(Object(n),!0).forEach(function(r){p_e(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):x4(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function p_e(t,e,n){return(e=g_e(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function g_e(t){var e=y_e(t,"string");return typeof e=="symbol"?e:e+""}function y_e(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function Gx(){return Gx=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)({}).hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},Gx.apply(null,arguments)}function v_e(t,e){if(t==null)return{};var n,r,i=x_e(t,e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);for(r=0;r<a.length;r++)n=a[r],e.indexOf(n)===-1&&{}.propertyIsEnumerable.call(t,n)&&(i[n]=t[n])}return i}function x_e(t,e){if(t==null)return{};var n={};for(var r in t)if({}.hasOwnProperty.call(t,r)){if(e.indexOf(r)!==-1)continue;n[r]=t[r]}return n}function __e(t){var{option:e,dotProps:n,className:r}=t;if(N.isValidElement(e))return N.cloneElement(e,n);if(typeof e=="function")return e(n);var i=Ft(r,typeof e!="boolean"?e.className:""),a=n??{},{points:s}=a,l=v_e(a,m_e);return N.createElement(w7,Gx({},l,{className:i}))}function b_e(t,e){return t==null?!1:e?!0:t.length===1}function w_e(t){var{points:e,dot:n,className:r,dotClassName:i,dataKey:a,baseProps:s,needClip:l,clipPathId:c,zIndex:h=ur.scatter}=t;if(!b_e(e,n))return null;var p=I7(n),g=Zse(n),x=e.map((C,A)=>{var D,R,j=oS(oS(oS({r:3},s),g),{},{index:A,cx:(D=C.x)!==null&&D!==void 0?D:void 0,cy:(R=C.y)!==null&&R!==void 0?R:void 0,dataKey:a,value:C.value,payload:C.payload,points:e});return N.createElement(__e,{key:"dot-".concat(A),option:n,dotProps:j,className:i})}),b={};return l&&c!=null&&(b.clipPath="url(#clipPath-".concat(p?"":"dots-").concat(c,")")),N.createElement(zi,{zIndex:h},N.createElement(Pr,Gx({className:r},b),x))}function _4(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function b4(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?_4(Object(n),!0).forEach(function(r){E_e(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):_4(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function E_e(t,e,n){return(e=T_e(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function T_e(t){var e=S_e(t,"string");return typeof e=="symbol"?e:e+""}function S_e(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var A_e={xAxis:{},yAxis:{},zAxis:{}},M7=ma({name:"cartesianAxis",initialState:A_e,reducers:{addXAxis:{reducer(t,e){t.xAxis[e.payload.id]=e.payload},prepare:Mn()},replaceXAxis:{reducer(t,e){var{prev:n,next:r}=e.payload;t.xAxis[n.id]!==void 0&&(n.id!==r.id&&delete t.xAxis[n.id],t.xAxis[r.id]=r)},prepare:Mn()},removeXAxis:{reducer(t,e){delete t.xAxis[e.payload.id]},prepare:Mn()},addYAxis:{reducer(t,e){t.yAxis[e.payload.id]=e.payload},prepare:Mn()},replaceYAxis:{reducer(t,e){var{prev:n,next:r}=e.payload;t.yAxis[n.id]!==void 0&&(n.id!==r.id&&delete t.yAxis[n.id],t.yAxis[r.id]=r)},prepare:Mn()},removeYAxis:{reducer(t,e){delete t.yAxis[e.payload.id]},prepare:Mn()},addZAxis:{reducer(t,e){t.zAxis[e.payload.id]=e.payload},prepare:Mn()},replaceZAxis:{reducer(t,e){var{prev:n,next:r}=e.payload;t.zAxis[n.id]!==void 0&&(n.id!==r.id&&delete t.zAxis[n.id],t.zAxis[r.id]=r)},prepare:Mn()},removeZAxis:{reducer(t,e){delete t.zAxis[e.payload.id]},prepare:Mn()},updateYAxisWidth(t,e){var{id:n,width:r}=e.payload,i=t.yAxis[n];if(i){var a=i.widthHistory||[];if(a.length===3&&a[0]===a[2]&&r===a[1]&&r!==i.width&&Math.abs(r-a[0])<=1)return;var s=[...a,r].slice(-3);t.yAxis[n]=b4(b4({},t.yAxis[n]),{},{width:r,widthHistory:s})}}}}),{addXAxis:C_e,replaceXAxis:I_e,removeXAxis:N_e,addYAxis:P_e,replaceYAxis:D_e,removeYAxis:R_e,addZAxis:_Ae,replaceZAxis:bAe,removeZAxis:wAe,updateYAxisWidth:k_e}=M7.actions,M_e=M7.reducer,O_e=pe([Rr],t=>({top:t.top,bottom:t.bottom,left:t.left,right:t.right})),j_e=pe([O_e,$l,Kl],(t,e,n)=>{if(!(!t||e==null||n==null))return{x:t.left,y:t.top,width:Math.max(0,e-t.left-t.right),height:Math.max(0,n-t.top-t.bottom)}}),DN=()=>$e(j_e),L_e=()=>$e(Mye);function w4(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function lS(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?w4(Object(n),!0).forEach(function(r){V_e(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):w4(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function V_e(t,e,n){return(e=U_e(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function U_e(t){var e=F_e(t,"string");return typeof e=="symbol"?e:e+""}function F_e(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var B_e=t=>{var{point:e,childIndex:n,mainColor:r,activeDot:i,dataKey:a,clipPath:s}=t;if(i===!1||e.x==null||e.y==null)return null;var l={index:n,dataKey:a,cx:e.x,cy:e.y,r:4,fill:r??"none",strokeWidth:2,stroke:"#fff",payload:e.payload,value:e.value},c=lS(lS(lS({},l),Ld(i)),$C(i)),h;return N.isValidElement(i)?h=N.cloneElement(i,c):typeof i=="function"?h=i(c):h=N.createElement(w7,c),N.createElement(Pr,{className:"recharts-active-dot",clipPath:s},h)};function z_e(t){var{points:e,mainColor:n,activeDot:r,itemDataKey:i,clipPath:a,zIndex:s=ur.activeDot}=t,l=$e(dc),c=L_e();if(e==null||c==null)return null;var h=e.find(p=>c.includes(p.payload));return Fn(h)?null:N.createElement(zi,{zIndex:s},N.createElement(B_e,{point:h,childIndex:Number(l),mainColor:n,dataKey:i,activeDot:r,clipPath:a}))}var q_e="Invariant failed";function H_e(t,e){throw new Error(q_e)}var G_e=["x","y"];function oA(){return oA=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)({}).hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},oA.apply(null,arguments)}function E4(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function pp(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?E4(Object(n),!0).forEach(function(r){$_e(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):E4(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function $_e(t,e,n){return(e=K_e(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function K_e(t){var e=W_e(t,"string");return typeof e=="symbol"?e:e+""}function W_e(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function Y_e(t,e){if(t==null)return{};var n,r,i=Z_e(t,e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);for(r=0;r<a.length;r++)n=a[r],e.indexOf(n)===-1&&{}.propertyIsEnumerable.call(t,n)&&(i[n]=t[n])}return i}function Z_e(t,e){if(t==null)return{};var n={};for(var r in t)if({}.hasOwnProperty.call(t,r)){if(e.indexOf(r)!==-1)continue;n[r]=t[r]}return n}function J_e(t,e){var{x:n,y:r}=t,i=Y_e(t,G_e),a="".concat(n),s=parseInt(a,10),l="".concat(r),c=parseInt(l,10),h="".concat(e.height||i.height),p=parseInt(h,10),g="".concat(e.width||i.width),x=parseInt(g,10);return pp(pp(pp(pp(pp({},e),i),s?{x:s}:{}),c?{y:c}:{}),{},{height:p,width:x,name:e.name,radius:e.radius})}function $x(t){return N.createElement(SN,oA({shapeType:"rectangle",propTransformer:J_e,activeClassName:"recharts-active-bar"},t))}var Q_e=function(e){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0;return(r,i)=>{if(Je(e))return e;var a=Je(r)||Fn(r);return a?e(r,i):(a||H_e(),n)}},X_e={},O7=ma({name:"errorBars",initialState:X_e,reducers:{addErrorBar:(t,e)=>{var{itemId:n,errorBar:r}=e.payload;t[n]||(t[n]=[]),t[n].push(r)},replaceErrorBar:(t,e)=>{var{itemId:n,prev:r,next:i}=e.payload;t[n]&&(t[n]=t[n].map(a=>a.dataKey===r.dataKey&&a.direction===r.direction?i:a))},removeErrorBar:(t,e)=>{var{itemId:n,errorBar:r}=e.payload;t[n]&&(t[n]=t[n].filter(i=>i.dataKey!==r.dataKey||i.direction!==r.direction))}}}),{addErrorBar:EAe,replaceErrorBar:TAe,removeErrorBar:SAe}=O7.actions,ebe=O7.reducer,tbe=["children"];function nbe(t,e){if(t==null)return{};var n,r,i=rbe(t,e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);for(r=0;r<a.length;r++)n=a[r],e.indexOf(n)===-1&&{}.propertyIsEnumerable.call(t,n)&&(i[n]=t[n])}return i}function rbe(t,e){if(t==null)return{};var n={};for(var r in t)if({}.hasOwnProperty.call(t,r)){if(e.indexOf(r)!==-1)continue;n[r]=t[r]}return n}var ibe={data:[],xAxisId:"xAxis-0",yAxisId:"yAxis-0",dataPointFormatter:()=>({x:0,y:0,value:0}),errorBarOffset:0},abe=N.createContext(ibe);function j7(t){var{children:e}=t,n=nbe(t,tbe);return N.createElement(abe.Provider,{value:n},e)}function RN(t,e){var n,r,i=$e(h=>Bo(h,t)),a=$e(h=>zo(h,e)),s=(n=i==null?void 0:i.allowDataOverflow)!==null&&n!==void 0?n:qr.allowDataOverflow,l=(r=a==null?void 0:a.allowDataOverflow)!==null&&r!==void 0?r:Hr.allowDataOverflow,c=s||l;return{needClip:c,needClipX:s,needClipY:l}}function L7(t){var{xAxisId:e,yAxisId:n,clipPathId:r}=t,i=DN(),{needClipX:a,needClipY:s,needClip:l}=RN(e,n);if(!l||!i)return null;var{x:c,y:h,width:p,height:g}=i;return N.createElement("clipPath",{id:"clipPath-".concat(r)},N.createElement("rect",{x:a?c:c-p/2,y:s?h:h-g/2,width:a?p:p*2,height:s?g:g*2}))}function sbe(t,e){return t&&typeof t=="object"&&"zIndex"in t&&typeof t.zIndex=="number"&&Cn(t.zIndex)?t.zIndex:e}var uS={exports:{}},cS={};/**
 * @license React
 * use-sync-external-store-with-selector.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var T4;function obe(){if(T4)return cS;T4=1;var t=Kh();function e(c,h){return c===h&&(c!==0||1/c===1/h)||c!==c&&h!==h}var n=typeof Object.is=="function"?Object.is:e,r=t.useSyncExternalStore,i=t.useRef,a=t.useEffect,s=t.useMemo,l=t.useDebugValue;return cS.useSyncExternalStoreWithSelector=function(c,h,p,g,x){var b=i(null);if(b.current===null){var C={hasValue:!1,value:null};b.current=C}else C=b.current;b=s(function(){function D($){if(!R){if(R=!0,j=$,$=g($),x!==void 0&&C.hasValue){var H=C.value;if(x(H,$))return O=H}return O=$}if(H=O,n(j,$))return H;var U=g($);return x!==void 0&&x(H,U)?(j=$,H):(j=$,O=U)}var R=!1,j,O,q=p===void 0?null:p;return[function(){return D(h())},q===null?void 0:function(){return D(q())}]},[h,p,g,x]);var A=r(c,b[0],b[1]);return a(function(){C.hasValue=!0,C.value=A},[A]),l(A),A},cS}var S4;function lbe(){return S4||(S4=1,uS.exports=obe()),uS.exports}lbe();function ube(t){t()}function cbe(){let t=null,e=null;return{clear(){t=null,e=null},notify(){ube(()=>{let n=t;for(;n;)n.callback(),n=n.next})},get(){const n=[];let r=t;for(;r;)n.push(r),r=r.next;return n},subscribe(n){let r=!0;const i=e={callback:n,next:null,prev:e};return i.prev?i.prev.next=i:t=i,function(){!r||t===null||(r=!1,i.next?i.next.prev=i.prev:e=i.prev,i.prev?i.prev.next=i.next:t=i.next)}}}}var A4={notify(){},get:()=>[]};function dbe(t,e){let n,r=A4,i=0,a=!1;function s(A){p();const D=r.subscribe(A);let R=!1;return()=>{R||(R=!0,D(),g())}}function l(){r.notify()}function c(){C.onStateChange&&C.onStateChange()}function h(){return a}function p(){i++,n||(n=t.subscribe(c),r=cbe())}function g(){i--,n&&i===0&&(n(),n=void 0,r.clear(),r=A4)}function x(){a||(a=!0,p())}function b(){a&&(a=!1,g())}const C={addNestedSub:s,notifyNestedSubs:l,handleChangeWrapper:c,isSubscribed:h,trySubscribe:x,tryUnsubscribe:b,getListeners:()=>r};return C}var fbe=()=>typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",hbe=fbe(),mbe=()=>typeof navigator<"u"&&navigator.product==="ReactNative",pbe=mbe(),gbe=()=>hbe||pbe?N.useLayoutEffect:N.useEffect,ybe=gbe();function C4(t,e){return t===e?t!==0||e!==0||1/t===1/e:t!==t&&e!==e}function vbe(t,e){if(C4(t,e))return!0;if(typeof t!="object"||t===null||typeof e!="object"||e===null)return!1;const n=Object.keys(t),r=Object.keys(e);if(n.length!==r.length)return!1;for(let i=0;i<n.length;i++)if(!Object.prototype.hasOwnProperty.call(e,n[i])||!C4(t[n[i]],e[n[i]]))return!1;return!0}var dS=Symbol.for("react-redux-context"),fS=typeof globalThis<"u"?globalThis:{};function xbe(){if(!N.createContext)return{};const t=fS[dS]??(fS[dS]=new Map);let e=t.get(N.createContext);return e||(e=N.createContext(null),t.set(N.createContext,e)),e}var _be=xbe();function bbe(t){const{children:e,context:n,serverState:r,store:i}=t,a=N.useMemo(()=>{const c=dbe(i);return{store:i,subscription:c,getServerState:r?()=>r:void 0}},[i,r]),s=N.useMemo(()=>i.getState(),[i]);ybe(()=>{const{subscription:c}=a;return c.onStateChange=c.notifyNestedSubs,c.trySubscribe(),s!==i.getState()&&c.notifyNestedSubs(),()=>{c.tryUnsubscribe(),c.onStateChange=void 0}},[a,s]);const l=n||_be;return N.createElement(l.Provider,{value:a},e)}var wbe=bbe,Ebe=new Set(["axisLine","tickLine","activeBar","activeDot","activeLabel","activeShape","allowEscapeViewBox","background","cursor","dot","label","line","margin","padding","position","shape","style","tick","wrapperStyle"]);function Tbe(t,e){return t==null&&e==null?!0:typeof t=="number"&&typeof e=="number"?t===e||t!==t&&e!==e:t===e}function Eb(t,e){var n=new Set([...Object.keys(t),...Object.keys(e)]);for(var r of n)if(Ebe.has(r)){if(t[r]==null&&e[r]==null)continue;if(!vbe(t[r],e[r]))return!1}else if(!Tbe(t[r],e[r]))return!1;return!0}var Sbe=["onMouseEnter","onMouseLeave","onClick"],Abe=["value","background","tooltipPosition"],Cbe=["id"],Ibe=["onMouseEnter","onClick","onMouseLeave"];function Ul(){return Ul=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)({}).hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},Ul.apply(null,arguments)}function I4(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function Vi(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?I4(Object(n),!0).forEach(function(r){Nbe(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):I4(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function Nbe(t,e,n){return(e=Pbe(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function Pbe(t){var e=Dbe(t,"string");return typeof e=="symbol"?e:e+""}function Dbe(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function Kx(t,e){if(t==null)return{};var n,r,i=Rbe(t,e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);for(r=0;r<a.length;r++)n=a[r],e.indexOf(n)===-1&&{}.propertyIsEnumerable.call(t,n)&&(i[n]=t[n])}return i}function Rbe(t,e){if(t==null)return{};var n={};for(var r in t)if({}.hasOwnProperty.call(t,r)){if(e.indexOf(r)!==-1)continue;n[r]=t[r]}return n}var kbe=t=>{var{dataKey:e,name:n,fill:r,legendType:i,hide:a}=t;return[{inactive:a,dataKey:e,type:i,color:r,value:lm(n,e),payload:t}]},Mbe=N.memo(t=>{var{dataKey:e,stroke:n,strokeWidth:r,fill:i,name:a,hide:s,unit:l,tooltipType:c}=t,h={dataDefinedOnItem:void 0,positions:void 0,settings:{stroke:n,strokeWidth:r,fill:i,dataKey:e,nameKey:void 0,name:lm(a,e),hide:s,type:c,color:i,unit:l}};return N.createElement(NN,{tooltipEntrySettings:h})});function Obe(t){var e=$e(dc),{data:n,dataKey:r,background:i,allOtherBarProps:a}=t,{onMouseEnter:s,onMouseLeave:l,onClick:c}=a,h=Kx(a,Sbe),p=AN(s,r),g=CN(l),x=IN(c,r);if(!i||n==null)return null;var b=Ld(i);return N.createElement(zi,{zIndex:sbe(i,ur.barBackground)},n.map((C,A)=>{var{value:D,background:R,tooltipPosition:j}=C,O=Kx(C,Abe);if(!R)return null;var q=p(C,A),$=g(C,A),H=x(C,A),U=Vi(Vi(Vi(Vi(Vi({option:i,isActive:String(A)===e},O),{},{fill:"#eee"},R),b),Bg(h,C,A)),{},{onMouseEnter:q,onMouseLeave:$,onClick:H,dataKey:r,index:A,className:"recharts-bar-background-rectangle"});return N.createElement($x,Ul({key:"background-bar-".concat(A)},U))}))}function jbe(t){var{showLabels:e,children:n,rects:r}=t,i=r==null?void 0:r.map(a=>{var s={x:a.x,y:a.y,width:a.width,lowerWidth:a.width,upperWidth:a.width,height:a.height};return Vi(Vi({},s),{},{value:a.value,payload:a.payload,parentViewBox:a.parentViewBox,viewBox:s,fill:a.fill})});return N.createElement(_7,{value:e?i:void 0},n)}function Lbe(t){var{shape:e,activeBar:n,baseProps:r,entry:i,index:a,dataKey:s}=t,l=$e(dc),c=$e(Jq),h=n&&String(a)===l&&(c==null||s===c),p=h?n:e;return h?N.createElement(zi,{zIndex:ur.activeBar},N.createElement($x,Ul({},r,{name:String(r.name)},i,{isActive:h,option:p,index:a,dataKey:s}))):N.createElement($x,Ul({},r,{name:String(r.name)},i,{isActive:h,option:p,index:a,dataKey:s}))}function Vbe(t){var{shape:e,baseProps:n,entry:r,index:i,dataKey:a}=t;return N.createElement($x,Ul({},n,{name:String(n.name)},r,{isActive:!1,option:e,index:i,dataKey:a}))}function Ube(t){var e,{data:n,props:r}=t,i=(e=Ha(r))!==null&&e!==void 0?e:{},{id:a}=i,s=Kx(i,Cbe),{shape:l,dataKey:c,activeBar:h}=r,{onMouseEnter:p,onClick:g,onMouseLeave:x}=r,b=Kx(r,Ibe),C=AN(p,c),A=CN(x),D=IN(g,c);return n?N.createElement(N.Fragment,null,n.map((R,j)=>N.createElement(Pr,Ul({key:"rectangle-".concat(R==null?void 0:R.x,"-").concat(R==null?void 0:R.y,"-").concat(R==null?void 0:R.value,"-").concat(j),className:"recharts-bar-rectangle"},Bg(b,R,j),{onMouseEnter:C(R,j),onMouseLeave:A(R,j),onClick:D(R,j)}),h?N.createElement(Lbe,{shape:l,activeBar:h,baseProps:s,entry:R,index:j,dataKey:c}):N.createElement(Vbe,{shape:l,baseProps:s,entry:R,index:j,dataKey:c})))):null}function Fbe(t){var{props:e,previousRectanglesRef:n}=t,{data:r,layout:i,isAnimationActive:a,animationBegin:s,animationDuration:l,animationEasing:c,onAnimationEnd:h,onAnimationStart:p}=e,g=n.current,x=Zg(e,"recharts-bar-"),[b,C]=N.useState(!1),A=!b,D=N.useCallback(()=>{typeof h=="function"&&h(),C(!1)},[h]),R=N.useCallback(()=>{typeof p=="function"&&p(),C(!0)},[p]);return N.createElement(jbe,{showLabels:A,rects:r},N.createElement(Yg,{animationId:x,begin:s,duration:l,isActive:a,easing:c,onAnimationEnd:D,onAnimationStart:R,key:x},j=>{var O=j===1?r:r==null?void 0:r.map((q,$)=>{var H=g&&g[$];if(H)return Vi(Vi({},q),{},{x:jn(H.x,q.x,j),y:jn(H.y,q.y,j),width:jn(H.width,q.width,j),height:jn(H.height,q.height,j)});if(i==="horizontal"){var U=jn(0,q.height,j),z=jn(q.stackedBarStart,q.y,j);return Vi(Vi({},q),{},{y:z,height:U})}var B=jn(0,q.width,j),Z=jn(q.stackedBarStart,q.x,j);return Vi(Vi({},q),{},{width:B,x:Z})});return j>0&&(n.current=O??null),O==null?null:N.createElement(Pr,null,N.createElement(Ube,{props:e,data:O}))}),N.createElement(bN,{label:e.label}),e.children)}function Bbe(t){var e=N.useRef(null);return N.createElement(Fbe,{previousRectanglesRef:e,props:t})}var V7=0,zbe=(t,e)=>{var n=Array.isArray(t.value)?t.value[1]:t.value;return{x:t.x,y:t.y,value:n,errorVal:mn(t,e)}};class qbe extends N.PureComponent{render(){var{hide:e,data:n,dataKey:r,className:i,xAxisId:a,yAxisId:s,needClip:l,background:c,id:h}=this.props;if(e||n==null)return null;var p=Ft("recharts-bar",i),g=h;return N.createElement(Pr,{className:p,id:h},l&&N.createElement("defs",null,N.createElement(L7,{clipPathId:g,xAxisId:a,yAxisId:s})),N.createElement(Pr,{className:"recharts-bar-rectangles",clipPath:l?"url(#clipPath-".concat(g,")"):void 0},N.createElement(Obe,{data:n,dataKey:r,background:c,allOtherBarProps:this.props}),N.createElement(Bbe,this.props)))}}var Hbe={activeBar:!1,animationBegin:0,animationDuration:400,animationEasing:"ease",background:!1,hide:!1,isAnimationActive:"auto",label:!1,legendType:"rect",minPointSize:V7,xAxisId:0,yAxisId:0,zIndex:ur.bar};function Gbe(t){var{xAxisId:e,yAxisId:n,hide:r,legendType:i,minPointSize:a,activeBar:s,animationBegin:l,animationDuration:c,animationEasing:h,isAnimationActive:p}=t,{needClip:g}=RN(e,n),x=Kg(),b=ai(),C=TN(t.children,cy),A=$e(j=>xwe(j,e,n,b,t.id,C));if(x!=="vertical"&&x!=="horizontal")return null;var D,R=A==null?void 0:A[0];return R==null||R.height==null||R.width==null?D=0:D=x==="vertical"?R.height/2:R.width/2,N.createElement(j7,{xAxisId:e,yAxisId:n,data:A,dataPointFormatter:zbe,errorBarOffset:D},N.createElement(qbe,Ul({},t,{layout:x,needClip:g,data:A,xAxisId:e,yAxisId:n,hide:r,legendType:i,minPointSize:a,activeBar:s,animationBegin:l,animationDuration:c,animationEasing:h,isAnimationActive:p})))}function $be(t){var{layout:e,barSettings:{dataKey:n,minPointSize:r},pos:i,bandSize:a,xAxis:s,yAxis:l,xAxisTicks:c,yAxisTicks:h,stackedData:p,displayedData:g,offset:x,cells:b,parentViewBox:C,dataStartIndex:A}=t,D=e==="horizontal"?l:s,R=p?D.scale.domain():null,j=yce({numericAxis:D}),O=D.scale(j);return g.map((q,$)=>{var H,U,z,B,Z,K;p?H=dce(p[$+A],R):(H=mn(q,n),Array.isArray(H)||(H=[j,H]));var J=Q_e(r,V7)(H[1],$);if(e==="horizontal"){var G,[Se,Oe]=[l.scale(H[0]),l.scale(H[1])];U=G5({axis:s,ticks:c,bandSize:a,offset:i.offset,entry:q,index:$}),z=(G=Oe??Se)!==null&&G!==void 0?G:void 0,B=i.size;var ee=Se-Oe;if(Z=Ga(ee)?0:ee,K={x:U,y:x.top,width:B,height:x.height},Math.abs(J)>0&&Math.abs(Z)<Math.abs(J)){var re=Kr(Z||J)*(Math.abs(J)-Math.abs(Z));z-=re,Z+=re}}else{var[le,Ne]=[s.scale(H[0]),s.scale(H[1])];if(U=le,z=G5({axis:l,ticks:h,bandSize:a,offset:i.offset,entry:q,index:$}),B=Ne-le,Z=i.size,K={x:x.left,y:z,width:x.width,height:Z},Math.abs(J)>0&&Math.abs(B)<Math.abs(J)){var Pe=Kr(B||J)*(Math.abs(J)-Math.abs(B));B+=Pe}}if(U==null||z==null||B==null||Z==null)return null;var X=Vi(Vi({},q),{},{stackedBarStart:O,x:U,y:z,width:B,height:Z,value:p?H:H[1],payload:q,background:K,tooltipPosition:{x:U+B/2,y:z+Z/2},parentViewBox:C},b&&b[$]&&b[$].props);return X}).filter(Boolean)}function Kbe(t){var e=dr(t,Hbe),n=ai();return N.createElement(PN,{id:e.id,type:"bar"},r=>N.createElement(N.Fragment,null,N.createElement(N7,{legendPayload:kbe(e)}),N.createElement(Mbe,{dataKey:e.dataKey,stroke:e.stroke,strokeWidth:e.strokeWidth,fill:e.fill,name:e.name,hide:e.hide,unit:e.unit,tooltipType:e.tooltipType}),N.createElement(R7,{type:"bar",id:r,data:void 0,xAxisId:e.xAxisId,yAxisId:e.yAxisId,zAxisId:0,dataKey:e.dataKey,stackId:gce(e.stackId),hide:e.hide,barSize:e.barSize,minPointSize:e.minPointSize,maxBarSize:e.maxBarSize,isPanorama:n}),N.createElement(zi,{zIndex:e.zIndex},N.createElement(Gbe,Ul({},e,{id:r})))))}var Ku=N.memo(Kbe,Eb);Ku.displayName="Bar";function N4(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function Fv(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?N4(Object(n),!0).forEach(function(r){Wbe(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):N4(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function Wbe(t,e,n){return(e=Ybe(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function Ybe(t){var e=Zbe(t,"string");return typeof e=="symbol"?e:e+""}function Zbe(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var Jbe=(t,e)=>e,Qbe=(t,e,n)=>n,Xbe=(t,e,n,r)=>r,ewe=(t,e,n,r,i)=>i,dy=pe([hb,ewe],(t,e)=>t.filter(n=>n.type==="bar").find(n=>n.id===e)),twe=pe([dy],t=>t==null?void 0:t.maxBarSize),nwe=(t,e,n,r,i,a)=>a,P4=(t,e,n)=>{var r=n??t;if(!Fn(r))return Si(r,e,0)},rwe=pe([Lt,hb,Jbe,Qbe,Xbe],(t,e,n,r,i)=>e.filter(a=>t==="horizontal"?a.xAxisId===n:a.yAxisId===r).filter(a=>a.isPanorama===i).filter(a=>a.hide===!1).filter(a=>a.type==="bar")),iwe=(t,e,n,r)=>{var i=Lt(t);return i==="horizontal"?X1(t,"yAxis",n,r):X1(t,"xAxis",e,r)},awe=(t,e,n)=>{var r=Lt(t);return r==="horizontal"?TL(t,"xAxis",e):TL(t,"yAxis",n)},swe=(t,e,n)=>{var r={},i=t.filter(cb),a=t.filter(h=>h.stackId==null),s=i.reduce((h,p)=>(h[p.stackId]||(h[p.stackId]=[]),h[p.stackId].push(p),h),r),l=Object.entries(s).map(h=>{var[p,g]=h,x=g.map(C=>C.dataKey),b=P4(e,n,g[0].barSize);return{stackId:p,dataKeys:x,barSize:b}}),c=a.map(h=>{var p=[h.dataKey].filter(x=>x!=null),g=P4(e,n,h.barSize);return{stackId:void 0,dataKeys:p,barSize:g}});return[...l,...c]},owe=pe([rwe,kpe,awe],swe),lwe=(t,e,n,r,i)=>{var a,s,l=dy(t,e,n,r,i);if(l!=null){var c=Lt(t),h=Qz(t),{maxBarSize:p}=l,g=Fn(p)?h:p,x,b;return c==="horizontal"?(x=cc(t,"xAxis",e,r),b=uc(t,"xAxis",e,r)):(x=cc(t,"yAxis",n,r),b=uc(t,"yAxis",n,r)),(a=(s=Bh(x,b,!0))!==null&&s!==void 0?s:g)!==null&&a!==void 0?a:0}},U7=(t,e,n,r)=>{var i=Lt(t),a,s;return i==="horizontal"?(a=cc(t,"xAxis",e,r),s=uc(t,"xAxis",e,r)):(a=cc(t,"yAxis",n,r),s=uc(t,"yAxis",n,r)),Bh(a,s)};function uwe(t,e,n,r,i){var a=r.length;if(!(a<1)){var s=Si(t,n,0,!0),l,c=[];if(Cn(r[0].barSize)){var h=!1,p=n/a,g=r.reduce((R,j)=>R+(j.barSize||0),0);g+=(a-1)*s,g>=n&&(g-=(a-1)*s,s=0),g>=n&&p>0&&(h=!0,p*=.9,g=a*p);var x=(n-g)/2>>0,b={offset:x-s,size:0};l=r.reduce((R,j)=>{var O,q={stackId:j.stackId,dataKeys:j.dataKeys,position:{offset:b.offset+b.size+s,size:h?p:(O=j.barSize)!==null&&O!==void 0?O:0}},$=[...R,q];return b=$[$.length-1].position,$},c)}else{var C=Si(e,n,0,!0);n-2*C-(a-1)*s<=0&&(s=0);var A=(n-2*C-(a-1)*s)/a;A>1&&(A>>=0);var D=Cn(i)?Math.min(A,i):A;l=r.reduce((R,j,O)=>[...R,{stackId:j.stackId,dataKeys:j.dataKeys,position:{offset:C+(A+s)*O+(A-D)/2,size:D}}],c)}return l}}var cwe=(t,e,n,r,i,a,s)=>{var l=Fn(s)?e:s,c=uwe(n,r,i!==a?i:a,t,l);return i!==a&&c!=null&&(c=c.map(h=>Fv(Fv({},h),{},{position:Fv(Fv({},h.position),{},{offset:h.position.offset-i/2})}))),c},dwe=pe([owe,Qz,Rpe,Xz,lwe,U7,twe],cwe),fwe=(t,e,n,r)=>cc(t,"xAxis",e,r),hwe=(t,e,n,r)=>cc(t,"yAxis",n,r),mwe=(t,e,n,r)=>uc(t,"xAxis",e,r),pwe=(t,e,n,r)=>uc(t,"yAxis",n,r),gwe=pe([dwe,dy],(t,e)=>{if(!(t==null||e==null)){var n=t.find(r=>r.stackId===e.stackId&&e.dataKey!=null&&r.dataKeys.includes(e.dataKey));if(n!=null)return n.position}}),ywe=(t,e)=>{var n=zI(e);if(!(!t||n==null||e==null)){var{stackId:r}=e;if(r!=null){var i=t[r];if(i){var{stackedData:a}=i;if(a)return a.find(s=>s.key===n)}}}},vwe=pe([iwe,dy],ywe),xwe=pe([Rr,rI,fwe,hwe,mwe,pwe,gwe,Lt,ob,U7,vwe,dy,nwe],(t,e,n,r,i,a,s,l,c,h,p,g,x)=>{var{chartData:b,dataStartIndex:C,dataEndIndex:A}=c;if(!(g==null||s==null||e==null||l!=="horizontal"&&l!=="vertical"||n==null||r==null||i==null||a==null||h==null)){var{data:D}=g,R;if(D!=null&&D.length>0?R=D:R=b==null?void 0:b.slice(C,A+1),R!=null)return $be({layout:l,barSettings:g,pos:s,parentViewBox:e,bandSize:h,xAxis:n,yAxis:r,xAxisTicks:i,yAxisTicks:a,stackedData:p,displayedData:R,offset:t,cells:x,dataStartIndex:C})}}),F7=t=>{var{chartData:e}=t,n=gn(),r=ai();return N.useEffect(()=>r?()=>{}:(n(LL(e)),()=>{n(LL(void 0))}),[e,n,r]),null},D4={x:0,y:0,width:0,height:0,padding:{top:0,right:0,bottom:0,left:0}},B7=ma({name:"brush",initialState:D4,reducers:{setBrushSettings(t,e){return e.payload==null?D4:e.payload}}}),{setBrushSettings:AAe}=B7.actions,_we=B7.reducer;function R4(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function Bv(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?R4(Object(n),!0).forEach(function(r){z7(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):R4(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function z7(t,e,n){return(e=bwe(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function bwe(t){var e=wwe(t,"string");return typeof e=="symbol"?e:e+""}function wwe(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var Ewe=(t,e)=>{var{x:n,y:r}=t,{x:i,y:a}=e;return{x:Math.min(n,i),y:Math.min(r,a),width:Math.abs(i-n),height:Math.abs(a-r)}},Twe=t=>{var{x1:e,y1:n,x2:r,y2:i}=t;return Ewe({x:e,y:n},{x:r,y:i})};class Tb{static create(e){return new Tb(e)}constructor(e){this.scale=e}get domain(){return this.scale.domain}get range(){return this.scale.range}get rangeMin(){return this.range()[0]}get rangeMax(){return this.range()[1]}get bandwidth(){return this.scale.bandwidth}apply(e){var{bandAware:n,position:r}=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(e!==void 0){if(r)switch(r){case"start":return this.scale(e);case"middle":{var i=this.bandwidth?this.bandwidth()/2:0;return this.scale(e)+i}case"end":{var a=this.bandwidth?this.bandwidth():0;return this.scale(e)+a}default:return this.scale(e)}if(n){var s=this.bandwidth?this.bandwidth()/2:0;return this.scale(e)+s}return this.scale(e)}}isInRange(e){var n=this.range(),r=n[0],i=n[n.length-1];return r<=i?e>=r&&e<=i:e>=i&&e<=r}}z7(Tb,"EPS",1e-4);var Swe=t=>{var e=Object.keys(t).reduce((n,r)=>Bv(Bv({},n),{},{[r]:Tb.create(t[r])}),{});return Bv(Bv({},e),{},{apply(n){var{bandAware:r,position:i}=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return Object.fromEntries(Object.entries(n).map(a=>{var[s,l]=a;return[s,e[s].apply(l,{bandAware:r,position:i})]}))},isInRange(n){return Object.keys(n).every(r=>e[r].isInRange(n[r]))}})};function Awe(t){return(t%180+180)%180}var Cwe=function(e){var{width:n,height:r}=e,i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,a=Awe(i),s=a*Math.PI/180,l=Math.atan(r/n),c=s>l&&s<Math.PI-l?r/Math.sin(s):n/Math.cos(s);return Math.abs(c)},Iwe={dots:[],areas:[],lines:[]},q7=ma({name:"referenceElements",initialState:Iwe,reducers:{addDot:(t,e)=>{t.dots.push(e.payload)},removeDot:(t,e)=>{var n=Hs(t).dots.findIndex(r=>r===e.payload);n!==-1&&t.dots.splice(n,1)},addArea:(t,e)=>{t.areas.push(e.payload)},removeArea:(t,e)=>{var n=Hs(t).areas.findIndex(r=>r===e.payload);n!==-1&&t.areas.splice(n,1)},addLine:(t,e)=>{t.lines.push(e.payload)},removeLine:(t,e)=>{var n=Hs(t).lines.findIndex(r=>r===e.payload);n!==-1&&t.lines.splice(n,1)}}}),{addDot:CAe,removeDot:IAe,addArea:NAe,removeArea:PAe,addLine:Nwe,removeLine:Pwe}=q7.actions,Dwe=q7.reducer,H7=N.createContext(void 0),Rwe=t=>{var{children:e}=t,[n]=N.useState("".concat(rg("recharts"),"-clip")),r=DN();if(r==null)return null;var{x:i,y:a,width:s,height:l}=r;return N.createElement(H7.Provider,{value:n},N.createElement("defs",null,N.createElement("clipPath",{id:n},N.createElement("rect",{x:i,y:a,height:l,width:s}))),e)},kwe=()=>N.useContext(H7);function k4(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function M4(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?k4(Object(n),!0).forEach(function(r){Mwe(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):k4(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function Mwe(t,e,n){return(e=Owe(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function Owe(t){var e=jwe(t,"string");return typeof e=="symbol"?e:e+""}function jwe(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function Wx(){return Wx=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)({}).hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},Wx.apply(null,arguments)}var Lwe=(t,e)=>{var n;if(N.isValidElement(t))n=N.cloneElement(t,e);else if(typeof t=="function")n=t(e);else{if(!Cn(e.x1)||!Cn(e.y1)||!Cn(e.x2)||!Cn(e.y2))return null;n=N.createElement("line",Wx({},e,{className:"recharts-reference-line-line"}))}return n},Vwe=(t,e,n,r,i,a)=>{var{x:s,width:l}=a,c=i.y.apply(t,{position:n});if(Ga(c)||e==="discard"&&!i.y.isInRange(c))return null;var h=[{x:s+l,y:c},{x:s,y:c}];return r==="left"?h.reverse():h},Uwe=(t,e,n,r,i,a)=>{var{y:s,height:l}=a,c=i.x.apply(t,{position:n});if(Ga(c)||e==="discard"&&!i.x.isInRange(c))return null;var h=[{x:c,y:s+l},{x:c,y:s}];return r==="top"?h.reverse():h},Fwe=(t,e,n,r)=>{var i=t.map(a=>r.apply(a,{position:n}));return e==="discard"&&i.some(a=>!r.isInRange(a))?null:i},Bwe=(t,e,n,r,i,a)=>{var{x:s,y:l,segment:c,ifOverflow:h}=a,p=ps(s),g=ps(l);return g?Vwe(l,h,n,i,t,e):p?Uwe(s,h,n,r,t,e):c!=null&&c.length===2?Fwe(c,h,n,t):null};function zwe(t){var e=gn();return N.useEffect(()=>(e(Nwe(t)),()=>{e(Pwe(t))})),null}function qwe(t){var{xAxisId:e,yAxisId:n,shape:r,className:i,ifOverflow:a}=t,s=ai(),l=kwe(),c=$e(H=>Bo(H,e)),h=$e(H=>zo(H,n)),p=$e(H=>lc(H,"xAxis",e,s)),g=$e(H=>lc(H,"yAxis",n,s)),x=$g();if(!l||!x||c==null||h==null||p==null||g==null)return null;var b=Swe({x:p,y:g}),C=Bwe(b,x,t.position,c.orientation,h.orientation,t);if(!C)return null;var[{x:A,y:D},{x:R,y:j}]=C,O=a==="hidden"?"url(#".concat(l,")"):void 0,q=M4(M4({clipPath:O},Ai(t)),{},{x1:A,y1:D,x2:R,y2:j}),$=Twe({x1:A,y1:D,x2:R,y2:j});return N.createElement(zi,{zIndex:t.zIndex},N.createElement(Pr,{className:Ft("recharts-reference-line",i)},Lwe(r,q),N.createElement(g7,Wx({},$,{lowerWidth:$.width,upperWidth:$.width}),N.createElement(v7,{label:t.label}),t.children)))}var Hwe={ifOverflow:"discard",xAxisId:0,yAxisId:0,fill:"none",stroke:"#ccc",fillOpacity:1,strokeWidth:1,position:"middle",zIndex:ur.line};function G7(t){var e=dr(t,Hwe);return N.createElement(N.Fragment,null,N.createElement(zwe,{yAxisId:e.yAxisId,xAxisId:e.xAxisId,ifOverflow:e.ifOverflow,x:e.x,y:e.y,segment:e.segment}),N.createElement(qwe,e))}G7.displayName="ReferenceLine";function $7(t,e){if(e<1)return[];if(e===1)return t;for(var n=[],r=0;r<t.length;r+=e)n.push(t[r]);return n}function Gwe(t,e,n){var r={width:t.width+e.width,height:t.height+e.height};return Cwe(r,n)}function $we(t,e,n){var r=n==="width",{x:i,y:a,width:s,height:l}=t;return e===1?{start:r?i:a,end:r?i+s:a+l}:{start:r?i+s:a+l,end:r?i:a}}function Yx(t,e,n,r,i){if(t*e<t*r||t*e>t*i)return!1;var a=n();return t*(e-t*a/2-r)>=0&&t*(e+t*a/2-i)<=0}function Kwe(t,e){return $7(t,e+1)}function Wwe(t,e,n,r,i){for(var a=(r||[]).slice(),{start:s,end:l}=e,c=0,h=1,p=s,g=function(){var C=r==null?void 0:r[c];if(C===void 0)return{v:$7(r,h)};var A=c,D,R=()=>(D===void 0&&(D=n(C,A)),D),j=C.coordinate,O=c===0||Yx(t,j,R,p,l);O||(c=0,p=s,h+=1),O&&(p=j+t*(R()/2+i),c+=h)},x;h<=a.length;)if(x=g(),x)return x.v;return[]}function O4(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function vi(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?O4(Object(n),!0).forEach(function(r){Ywe(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):O4(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function Ywe(t,e,n){return(e=Zwe(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function Zwe(t){var e=Jwe(t,"string");return typeof e=="symbol"?e:e+""}function Jwe(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function Qwe(t,e,n,r,i){for(var a=(r||[]).slice(),s=a.length,{start:l}=e,{end:c}=e,h=function(x){var b=a[x],C,A=()=>(C===void 0&&(C=n(b,x)),C);if(x===s-1){var D=t*(b.coordinate+t*A()/2-c);a[x]=b=vi(vi({},b),{},{tickCoord:D>0?b.coordinate-D*t:b.coordinate})}else a[x]=b=vi(vi({},b),{},{tickCoord:b.coordinate});if(b.tickCoord!=null){var R=Yx(t,b.tickCoord,A,l,c);R&&(c=b.tickCoord-t*(A()/2+i),a[x]=vi(vi({},b),{},{isShow:!0}))}},p=s-1;p>=0;p--)h(p);return a}function Xwe(t,e,n,r,i,a){var s=(r||[]).slice(),l=s.length,{start:c,end:h}=e;if(a){var p=r[l-1],g=n(p,l-1),x=t*(p.coordinate+t*g/2-h);if(s[l-1]=p=vi(vi({},p),{},{tickCoord:x>0?p.coordinate-x*t:p.coordinate}),p.tickCoord!=null){var b=Yx(t,p.tickCoord,()=>g,c,h);b&&(h=p.tickCoord-t*(g/2+i),s[l-1]=vi(vi({},p),{},{isShow:!0}))}}for(var C=a?l-1:l,A=function(j){var O=s[j],q,$=()=>(q===void 0&&(q=n(O,j)),q);if(j===0){var H=t*(O.coordinate-t*$()/2-c);s[j]=O=vi(vi({},O),{},{tickCoord:H<0?O.coordinate-H*t:O.coordinate})}else s[j]=O=vi(vi({},O),{},{tickCoord:O.coordinate});if(O.tickCoord!=null){var U=Yx(t,O.tickCoord,$,c,h);U&&(c=O.tickCoord+t*($()/2+i),s[j]=vi(vi({},O),{},{isShow:!0}))}},D=0;D<C;D++)A(D);return s}function kN(t,e,n){var{tick:r,ticks:i,viewBox:a,minTickGap:s,orientation:l,interval:c,tickFormatter:h,unit:p,angle:g}=t;if(!i||!i.length||!r)return[];if(Je(c)||Wd.isSsr){var x;return(x=Kwe(i,Je(c)?c:0))!==null&&x!==void 0?x:[]}var b=[],C=l==="top"||l==="bottom"?"width":"height",A=p&&C==="width"?Up(p,{fontSize:e,letterSpacing:n}):{width:0,height:0},D=(O,q)=>{var $=typeof h=="function"?h(O.value,q):O.value;return C==="width"?Gwe(Up($,{fontSize:e,letterSpacing:n}),A,g):Up($,{fontSize:e,letterSpacing:n})[C]},R=i.length>=2?Kr(i[1].coordinate-i[0].coordinate):1,j=$we(a,R,C);return c==="equidistantPreserveStart"?Wwe(R,j,D,i,s):(c==="preserveStart"||c==="preserveStartEnd"?b=Xwe(R,j,D,i,s,c==="preserveStartEnd"):b=Qwe(R,j,D,i,s),b.filter(O=>O.isShow))}var eEe=t=>{var{ticks:e,label:n,labelGapWithTick:r=5,tickSize:i=0,tickMargin:a=0}=t,s=0;if(e){Array.from(e).forEach(p=>{if(p){var g=p.getBoundingClientRect();g.width>s&&(s=g.width)}});var l=n?n.getBoundingClientRect().width:0,c=i+a,h=s+c+l+(n?r:0);return Math.round(h)}return 0},tEe=["axisLine","width","height","className","hide","ticks","axisType"];function nEe(t,e){if(t==null)return{};var n,r,i=rEe(t,e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);for(r=0;r<a.length;r++)n=a[r],e.indexOf(n)===-1&&{}.propertyIsEnumerable.call(t,n)&&(i[n]=t[n])}return i}function rEe(t,e){if(t==null)return{};var n={};for(var r in t)if({}.hasOwnProperty.call(t,r)){if(e.indexOf(r)!==-1)continue;n[r]=t[r]}return n}function zd(){return zd=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)({}).hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},zd.apply(null,arguments)}function j4(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function _r(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?j4(Object(n),!0).forEach(function(r){iEe(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):j4(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function iEe(t,e,n){return(e=aEe(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function aEe(t){var e=sEe(t,"string");return typeof e=="symbol"?e:e+""}function sEe(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var Cl={x:0,y:0,width:0,height:0,viewBox:{x:0,y:0,width:0,height:0},orientation:"bottom",ticks:[],stroke:"#666",tickLine:!0,axisLine:!0,tick:!0,mirror:!1,minTickGap:5,tickSize:6,tickMargin:2,interval:"preserveEnd",zIndex:ur.axis};function oEe(t){var{x:e,y:n,width:r,height:i,orientation:a,mirror:s,axisLine:l,otherSvgProps:c}=t;if(!l)return null;var h=_r(_r(_r({},c),Ha(l)),{},{fill:"none"});if(a==="top"||a==="bottom"){var p=+(a==="top"&&!s||a==="bottom"&&s);h=_r(_r({},h),{},{x1:e,y1:n+p*i,x2:e+r,y2:n+p*i})}else{var g=+(a==="left"&&!s||a==="right"&&s);h=_r(_r({},h),{},{x1:e+g*r,y1:n,x2:e+g*r,y2:n+i})}return N.createElement("line",zd({},h,{className:Ft("recharts-cartesian-axis-line",Vd(l,"className"))}))}function lEe(t,e,n,r,i,a,s,l,c){var h,p,g,x,b,C,A=l?-1:1,D=t.tickSize||s,R=Je(t.tickCoord)?t.tickCoord:t.coordinate;switch(a){case"top":h=p=t.coordinate,x=n+ +!l*i,g=x-A*D,C=g-A*c,b=R;break;case"left":g=x=t.coordinate,p=e+ +!l*r,h=p-A*D,b=h-A*c,C=R;break;case"right":g=x=t.coordinate,p=e+ +l*r,h=p+A*D,b=h+A*c,C=R;break;default:h=p=t.coordinate,x=n+ +l*i,g=x+A*D,C=g+A*c,b=R;break}return{line:{x1:h,y1:g,x2:p,y2:x},tick:{x:b,y:C}}}function uEe(t,e){switch(t){case"left":return e?"start":"end";case"right":return e?"end":"start";default:return"middle"}}function cEe(t,e){switch(t){case"left":case"right":return"middle";case"top":return e?"start":"end";default:return e?"end":"start"}}function dEe(t){var{option:e,tickProps:n,value:r}=t,i,a=Ft(n.className,"recharts-cartesian-axis-tick-value");if(N.isValidElement(e))i=N.cloneElement(e,_r(_r({},n),{},{className:a}));else if(typeof e=="function")i=e(_r(_r({},n),{},{className:a}));else{var s="recharts-cartesian-axis-tick-value";typeof e!="boolean"&&(s=Ft(s,e==null?void 0:e.className)),i=N.createElement(xb,zd({},n,{className:s}),r)}return i}var fEe=N.forwardRef((t,e)=>{var{ticks:n=[],tick:r,tickLine:i,stroke:a,tickFormatter:s,unit:l,padding:c,tickTextProps:h,orientation:p,mirror:g,x,y:b,width:C,height:A,tickSize:D,tickMargin:R,fontSize:j,letterSpacing:O,getTicksConfig:q,events:$,axisType:H}=t,U=kN(_r(_r({},q),{},{ticks:n}),j,O),z=uEe(p,g),B=cEe(p,g),Z=Ha(q),K=Ld(r),J={};typeof i=="object"&&(J=i);var G=_r(_r({},Z),{},{fill:"none"},J),Se=U.map(re=>_r({entry:re},lEe(re,x,b,C,A,p,D,g,R))),Oe=Se.map(re=>{var{entry:le,line:Ne}=re;return N.createElement(Pr,{className:"recharts-cartesian-axis-tick",key:"tick-".concat(le.value,"-").concat(le.coordinate,"-").concat(le.tickCoord)},i&&N.createElement("line",zd({},G,Ne,{className:Ft("recharts-cartesian-axis-tick-line",Vd(i,"className"))})))}),ee=Se.map((re,le)=>{var{entry:Ne,tick:Pe}=re,X=_r(_r(_r(_r({textAnchor:z,verticalAnchor:B},Z),{},{stroke:"none",fill:a},K),Pe),{},{index:le,payload:Ne,visibleTicksCount:U.length,tickFormatter:s,padding:c},h);return N.createElement(Pr,zd({className:"recharts-cartesian-axis-tick-label",key:"tick-label-".concat(Ne.value,"-").concat(Ne.coordinate,"-").concat(Ne.tickCoord)},Bg($,Ne,le)),r&&N.createElement(dEe,{option:r,tickProps:X,value:"".concat(typeof s=="function"?s(Ne.value,le):Ne.value).concat(l||"")}))});return N.createElement("g",{className:"recharts-cartesian-axis-ticks recharts-".concat(H,"-ticks")},ee.length>0&&N.createElement(zi,{zIndex:ur.label},N.createElement("g",{className:"recharts-cartesian-axis-tick-labels recharts-".concat(H,"-tick-labels"),ref:e},ee)),Oe.length>0&&N.createElement("g",{className:"recharts-cartesian-axis-tick-lines recharts-".concat(H,"-tick-lines")},Oe))}),hEe=N.forwardRef((t,e)=>{var{axisLine:n,width:r,height:i,className:a,hide:s,ticks:l,axisType:c}=t,h=nEe(t,tEe),[p,g]=N.useState(""),[x,b]=N.useState(""),C=N.useRef(null);N.useImperativeHandle(e,()=>({getCalculatedWidth:()=>{var D;return eEe({ticks:C.current,label:(D=t.labelRef)===null||D===void 0?void 0:D.current,labelGapWithTick:5,tickSize:t.tickSize,tickMargin:t.tickMargin})}}));var A=N.useCallback(D=>{if(D){var R=D.getElementsByClassName("recharts-cartesian-axis-tick-value");C.current=R;var j=R[0];if(j){var O=window.getComputedStyle(j),q=O.fontSize,$=O.letterSpacing;(q!==p||$!==x)&&(g(q),b($))}}},[p,x]);return s||r!=null&&r<=0||i!=null&&i<=0?null:N.createElement(zi,{zIndex:t.zIndex},N.createElement(Pr,{className:Ft("recharts-cartesian-axis",a)},N.createElement(oEe,{x:t.x,y:t.y,width:r,height:i,orientation:t.orientation,mirror:t.mirror,axisLine:n,otherSvgProps:Ha(t)}),N.createElement(fEe,{ref:A,axisType:c,events:h,fontSize:p,getTicksConfig:t,height:t.height,letterSpacing:x,mirror:t.mirror,orientation:t.orientation,padding:t.padding,stroke:t.stroke,tick:t.tick,tickFormatter:t.tickFormatter,tickLine:t.tickLine,tickMargin:t.tickMargin,tickSize:t.tickSize,tickTextProps:t.tickTextProps,ticks:l,unit:t.unit,width:t.width,x:t.x,y:t.y}),N.createElement(g7,{x:t.x,y:t.y,width:t.width,height:t.height,lowerWidth:t.width,upperWidth:t.width},N.createElement(v7,{label:t.label,labelRef:t.labelRef}),t.children)))}),MN=N.forwardRef((t,e)=>{var n=dr(t,Cl);return N.createElement(hEe,zd({},n,{ref:e}))});MN.displayName="CartesianAxis";var mEe=["x1","y1","x2","y2","key"],pEe=["offset"],gEe=["xAxisId","yAxisId"],yEe=["xAxisId","yAxisId"];function L4(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function wi(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?L4(Object(n),!0).forEach(function(r){vEe(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):L4(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function vEe(t,e,n){return(e=xEe(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function xEe(t){var e=_Ee(t,"string");return typeof e=="symbol"?e:e+""}function _Ee(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function xd(){return xd=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)({}).hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},xd.apply(null,arguments)}function Zx(t,e){if(t==null)return{};var n,r,i=bEe(t,e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);for(r=0;r<a.length;r++)n=a[r],e.indexOf(n)===-1&&{}.propertyIsEnumerable.call(t,n)&&(i[n]=t[n])}return i}function bEe(t,e){if(t==null)return{};var n={};for(var r in t)if({}.hasOwnProperty.call(t,r)){if(e.indexOf(r)!==-1)continue;n[r]=t[r]}return n}var wEe=t=>{var{fill:e}=t;if(!e||e==="none")return null;var{fillOpacity:n,x:r,y:i,width:a,height:s,ry:l}=t;return N.createElement("rect",{x:r,y:i,ry:l,width:a,height:s,stroke:"none",fill:e,fillOpacity:n,className:"recharts-cartesian-grid-bg"})};function K7(t){var{option:e,lineItemProps:n}=t,r;if(N.isValidElement(e))r=N.cloneElement(e,n);else if(typeof e=="function")r=e(n);else{var i,{x1:a,y1:s,x2:l,y2:c,key:h}=n,p=Zx(n,mEe),g=(i=Ha(p))!==null&&i!==void 0?i:{},{offset:x}=g,b=Zx(g,pEe);r=N.createElement("line",xd({},b,{x1:a,y1:s,x2:l,y2:c,fill:"none",key:h}))}return r}function EEe(t){var{x:e,width:n,horizontal:r=!0,horizontalPoints:i}=t;if(!r||!i||!i.length)return null;var{xAxisId:a,yAxisId:s}=t,l=Zx(t,gEe),c=i.map((h,p)=>{var g=wi(wi({},l),{},{x1:e,y1:h,x2:e+n,y2:h,key:"line-".concat(p),index:p});return N.createElement(K7,{key:"line-".concat(p),option:r,lineItemProps:g})});return N.createElement("g",{className:"recharts-cartesian-grid-horizontal"},c)}function TEe(t){var{y:e,height:n,vertical:r=!0,verticalPoints:i}=t;if(!r||!i||!i.length)return null;var{xAxisId:a,yAxisId:s}=t,l=Zx(t,yEe),c=i.map((h,p)=>{var g=wi(wi({},l),{},{x1:h,y1:e,x2:h,y2:e+n,key:"line-".concat(p),index:p});return N.createElement(K7,{option:r,lineItemProps:g,key:"line-".concat(p)})});return N.createElement("g",{className:"recharts-cartesian-grid-vertical"},c)}function SEe(t){var{horizontalFill:e,fillOpacity:n,x:r,y:i,width:a,height:s,horizontalPoints:l,horizontal:c=!0}=t;if(!c||!e||!e.length||l==null)return null;var h=l.map(g=>Math.round(g+i-i)).sort((g,x)=>g-x);i!==h[0]&&h.unshift(0);var p=h.map((g,x)=>{var b=!h[x+1],C=b?i+s-g:h[x+1]-g;if(C<=0)return null;var A=x%e.length;return N.createElement("rect",{key:"react-".concat(x),y:g,x:r,height:C,width:a,stroke:"none",fill:e[A],fillOpacity:n,className:"recharts-cartesian-grid-bg"})});return N.createElement("g",{className:"recharts-cartesian-gridstripes-horizontal"},p)}function AEe(t){var{vertical:e=!0,verticalFill:n,fillOpacity:r,x:i,y:a,width:s,height:l,verticalPoints:c}=t;if(!e||!n||!n.length)return null;var h=c.map(g=>Math.round(g+i-i)).sort((g,x)=>g-x);i!==h[0]&&h.unshift(0);var p=h.map((g,x)=>{var b=!h[x+1],C=b?i+s-g:h[x+1]-g;if(C<=0)return null;var A=x%n.length;return N.createElement("rect",{key:"react-".concat(x),x:g,y:a,width:C,height:l,stroke:"none",fill:n[A],fillOpacity:r,className:"recharts-cartesian-grid-bg"})});return N.createElement("g",{className:"recharts-cartesian-gridstripes-vertical"},p)}var CEe=(t,e)=>{var{xAxis:n,width:r,height:i,offset:a}=t;return CB(kN(wi(wi(wi({},Cl),n),{},{ticks:IB(n),viewBox:{x:0,y:0,width:r,height:i}})),a.left,a.left+a.width,e)},IEe=(t,e)=>{var{yAxis:n,width:r,height:i,offset:a}=t;return CB(kN(wi(wi(wi({},Cl),n),{},{ticks:IB(n),viewBox:{x:0,y:0,width:r,height:i}})),a.top,a.top+a.height,e)},NEe={horizontal:!0,vertical:!0,horizontalPoints:[],verticalPoints:[],stroke:"#ccc",fill:"none",verticalFill:[],horizontalFill:[],xAxisId:0,yAxisId:0,syncWithTicks:!1,zIndex:ur.grid};function yg(t){var e=aI(),n=sI(),r=jB(),i=wi(wi({},dr(t,NEe)),{},{x:Je(t.x)?t.x:r.left,y:Je(t.y)?t.y:r.top,width:Je(t.width)?t.width:r.width,height:Je(t.height)?t.height:r.height}),{xAxisId:a,yAxisId:s,x:l,y:c,width:h,height:p,syncWithTicks:g,horizontalValues:x,verticalValues:b}=i,C=ai(),A=$e(B=>SL(B,"xAxis",a,C)),D=$e(B=>SL(B,"yAxis",s,C));if(!jo(h)||!jo(p)||!Je(l)||!Je(c))return null;var R=i.verticalCoordinatesGenerator||CEe,j=i.horizontalCoordinatesGenerator||IEe,{horizontalPoints:O,verticalPoints:q}=i;if((!O||!O.length)&&typeof j=="function"){var $=x&&x.length,H=j({yAxis:D?wi(wi({},D),{},{ticks:$?x:D.ticks}):void 0,width:e??h,height:n??p,offset:r},$?!0:g);_x(Array.isArray(H),"horizontalCoordinatesGenerator should return Array but instead it returned [".concat(typeof H,"]")),Array.isArray(H)&&(O=H)}if((!q||!q.length)&&typeof R=="function"){var U=b&&b.length,z=R({xAxis:A?wi(wi({},A),{},{ticks:U?b:A.ticks}):void 0,width:e??h,height:n??p,offset:r},U?!0:g);_x(Array.isArray(z),"verticalCoordinatesGenerator should return Array but instead it returned [".concat(typeof z,"]")),Array.isArray(z)&&(q=z)}return N.createElement(zi,{zIndex:i.zIndex},N.createElement("g",{className:"recharts-cartesian-grid"},N.createElement(wEe,{fill:i.fill,fillOpacity:i.fillOpacity,x:i.x,y:i.y,width:i.width,height:i.height,ry:i.ry}),N.createElement(SEe,xd({},i,{horizontalPoints:O})),N.createElement(AEe,xd({},i,{verticalPoints:q})),N.createElement(EEe,xd({},i,{offset:r,horizontalPoints:O,xAxis:A,yAxis:D})),N.createElement(TEe,xd({},i,{offset:r,verticalPoints:q,xAxis:A,yAxis:D}))))}yg.displayName="CartesianGrid";var W7=(t,e,n,r)=>cc(t,"xAxis",e,r),Y7=(t,e,n,r)=>uc(t,"xAxis",e,r),Z7=(t,e,n,r)=>cc(t,"yAxis",n,r),J7=(t,e,n,r)=>uc(t,"yAxis",n,r),PEe=pe([Lt,W7,Z7,Y7,J7],(t,e,n,r,i)=>_c(t,"xAxis")?Bh(e,r,!1):Bh(n,i,!1)),DEe=(t,e,n,r,i)=>i;function REe(t){return t.type==="line"}var kEe=pe([hb,DEe],(t,e)=>t.filter(REe).find(n=>n.id===e)),MEe=pe([Lt,W7,Z7,Y7,J7,kEe,PEe,ob],(t,e,n,r,i,a,s,l)=>{var{chartData:c,dataStartIndex:h,dataEndIndex:p}=l;if(!(a==null||e==null||n==null||r==null||i==null||r.length===0||i.length===0||s==null||t!=="horizontal"&&t!=="vertical")){var{dataKey:g,data:x}=a,b;if(x!=null&&x.length>0?b=x:b=c==null?void 0:c.slice(h,p+1),b!=null)return tTe({layout:t,xAxis:e,yAxis:n,xAxisTicks:r,yAxisTicks:i,dataKey:g,bandSize:s,displayedData:b})}});function OEe(t){var e=Ld(t),n=3,r=2;if(e!=null){var{r:i,strokeWidth:a}=e,s=Number(i),l=Number(a);return(Number.isNaN(s)||s<0)&&(s=n),(Number.isNaN(l)||l<0)&&(l=r),{r:s,strokeWidth:l}}return{r:n,strokeWidth:r}}var jEe=["id"],LEe=["type","layout","connectNulls","needClip","shape"],VEe=["activeDot","animateNewValues","animationBegin","animationDuration","animationEasing","connectNulls","dot","hide","isAnimationActive","label","legendType","xAxisId","yAxisId","id"];function vg(){return vg=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)({}).hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},vg.apply(null,arguments)}function V4(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function wo(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?V4(Object(n),!0).forEach(function(r){UEe(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):V4(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function UEe(t,e,n){return(e=FEe(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function FEe(t){var e=BEe(t,"string");return typeof e=="symbol"?e:e+""}function BEe(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function ON(t,e){if(t==null)return{};var n,r,i=zEe(t,e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);for(r=0;r<a.length;r++)n=a[r],e.indexOf(n)===-1&&{}.propertyIsEnumerable.call(t,n)&&(i[n]=t[n])}return i}function zEe(t,e){if(t==null)return{};var n={};for(var r in t)if({}.hasOwnProperty.call(t,r)){if(e.indexOf(r)!==-1)continue;n[r]=t[r]}return n}var qEe=t=>{var{dataKey:e,name:n,stroke:r,legendType:i,hide:a}=t;return[{inactive:a,dataKey:e,type:i,color:r,value:lm(n,e),payload:t}]},HEe=N.memo(t=>{var{dataKey:e,data:n,stroke:r,strokeWidth:i,fill:a,name:s,hide:l,unit:c,tooltipType:h}=t,p={dataDefinedOnItem:n,positions:void 0,settings:{stroke:r,strokeWidth:i,fill:a,dataKey:e,nameKey:void 0,name:lm(s,e),hide:l,type:h,color:r,unit:c}};return N.createElement(NN,{tooltipEntrySettings:p})}),Q7=(t,e)=>"".concat(e,"px ").concat(t-e,"px");function GEe(t,e){for(var n=t.length%2!==0?[...t,0]:t,r=[],i=0;i<e;++i)r=[...r,...n];return r}var $Ee=(t,e,n)=>{var r=n.reduce((g,x)=>g+x);if(!r)return Q7(e,t);for(var i=Math.floor(t/r),a=t%r,s=e-t,l=[],c=0,h=0;c<n.length;h+=n[c],++c)if(h+n[c]>a){l=[...n.slice(0,c),a-h];break}var p=l.length%2===0?[0,s]:[s];return[...GEe(n,i),...l,...p].map(g=>"".concat(g,"px")).join(", ")};function KEe(t){var{clipPathId:e,points:n,props:r}=t,{dot:i,dataKey:a,needClip:s}=r,{id:l}=r,c=ON(r,jEe),h=Ha(c);return N.createElement(w_e,{points:n,dot:i,className:"recharts-line-dots",dotClassName:"recharts-line-dot",dataKey:a,baseProps:h,needClip:s,clipPathId:e})}function WEe(t){var{showLabels:e,children:n,points:r}=t,i=N.useMemo(()=>r==null?void 0:r.map(a=>{var s,l,c={x:(s=a.x)!==null&&s!==void 0?s:0,y:(l=a.y)!==null&&l!==void 0?l:0,width:0,lowerWidth:0,upperWidth:0,height:0};return wo(wo({},c),{},{value:a.value,payload:a.payload,viewBox:c,parentViewBox:void 0,fill:void 0})}),[r]);return N.createElement(_7,{value:e?i:void 0},n)}function U4(t){var{clipPathId:e,pathRef:n,points:r,strokeDasharray:i,props:a}=t,{type:s,layout:l,connectNulls:c,needClip:h,shape:p}=a,g=ON(a,LEe),x=wo(wo({},Ai(g)),{},{fill:"none",className:"recharts-line-curve",clipPath:h?"url(#clipPath-".concat(e,")"):void 0,points:r,type:s,layout:l,connectNulls:c,strokeDasharray:i??a.strokeDasharray});return N.createElement(N.Fragment,null,(r==null?void 0:r.length)>1&&N.createElement(SN,vg({shapeType:"curve",option:p},x,{pathRef:n})),N.createElement(KEe,{points:r,clipPathId:e,props:a}))}function YEe(t){try{return t&&t.getTotalLength&&t.getTotalLength()||0}catch{return 0}}function ZEe(t){var{clipPathId:e,props:n,pathRef:r,previousPointsRef:i,longestAnimatedLengthRef:a}=t,{points:s,strokeDasharray:l,isAnimationActive:c,animationBegin:h,animationDuration:p,animationEasing:g,animateNewValues:x,width:b,height:C,onAnimationEnd:A,onAnimationStart:D}=n,R=i.current,j=Zg(s,"recharts-line-"),O=N.useRef(j),[q,$]=N.useState(!1),H=!q,U=N.useCallback(()=>{typeof A=="function"&&A(),$(!1)},[A]),z=N.useCallback(()=>{typeof D=="function"&&D(),$(!0)},[D]),B=YEe(r.current),Z=N.useRef(0);O.current!==j&&(Z.current=a.current,O.current=j);var K=Z.current;return N.createElement(WEe,{points:s,showLabels:H},n.children,N.createElement(Yg,{animationId:j,begin:h,duration:p,isActive:c,easing:g,onAnimationEnd:U,onAnimationStart:z,key:j},J=>{var G=jn(K,B+K,J),Se=Math.min(G,B),Oe;if(c)if(l){var ee="".concat(l).split(/[,\s]+/gim).map(Ne=>parseFloat(Ne));Oe=$Ee(Se,B,ee)}else Oe=Q7(B,Se);else Oe=l==null?void 0:String(l);if(J>0&&B>0&&(i.current=s,a.current=Math.max(a.current,Se)),R){var re=R.length/s.length,le=J===1?s:s.map((Ne,Pe)=>{var X=Math.floor(Pe*re);if(R[X]){var ue=R[X];return wo(wo({},Ne),{},{x:jn(ue.x,Ne.x,J),y:jn(ue.y,Ne.y,J)})}return x?wo(wo({},Ne),{},{x:jn(b*2,Ne.x,J),y:jn(C/2,Ne.y,J)}):wo(wo({},Ne),{},{x:Ne.x,y:Ne.y})});return i.current=le,N.createElement(U4,{props:n,points:le,clipPathId:e,pathRef:r,strokeDasharray:Oe})}return N.createElement(U4,{props:n,points:s,clipPathId:e,pathRef:r,strokeDasharray:Oe})}),N.createElement(bN,{label:n.label}))}function JEe(t){var{clipPathId:e,props:n}=t,r=N.useRef(null),i=N.useRef(0),a=N.useRef(null);return N.createElement(ZEe,{props:n,clipPathId:e,previousPointsRef:r,longestAnimatedLengthRef:i,pathRef:a})}var QEe=(t,e)=>{var n,r;return{x:(n=t.x)!==null&&n!==void 0?n:void 0,y:(r=t.y)!==null&&r!==void 0?r:void 0,value:t.value,errorVal:mn(t.payload,e)}};class XEe extends N.Component{render(){var{hide:e,dot:n,points:r,className:i,xAxisId:a,yAxisId:s,top:l,left:c,width:h,height:p,id:g,needClip:x,zIndex:b}=this.props;if(e)return null;var C=Ft("recharts-line",i),A=g,{r:D,strokeWidth:R}=OEe(n),j=I7(n),O=D*2+R,q=x?"url(#clipPath-".concat(j?"":"dots-").concat(A,")"):void 0;return N.createElement(zi,{zIndex:b},N.createElement(Pr,{className:C},x&&N.createElement("defs",null,N.createElement(L7,{clipPathId:A,xAxisId:a,yAxisId:s}),!j&&N.createElement("clipPath",{id:"clipPath-dots-".concat(A)},N.createElement("rect",{x:c-O/2,y:l-O/2,width:h+O,height:p+O}))),N.createElement(j7,{xAxisId:a,yAxisId:s,data:r,dataPointFormatter:QEe,errorBarOffset:0},N.createElement(JEe,{props:this.props,clipPathId:A}))),N.createElement(z_e,{activeDot:this.props.activeDot,points:r,mainColor:this.props.stroke,itemDataKey:this.props.dataKey,clipPath:q}))}}var X7={activeDot:!0,animateNewValues:!0,animationBegin:0,animationDuration:1500,animationEasing:"ease",connectNulls:!1,dot:!0,fill:"#fff",hide:!1,isAnimationActive:"auto",label:!1,legendType:"line",stroke:"#3182bd",strokeWidth:1,xAxisId:0,yAxisId:0,zIndex:ur.line,type:"linear"};function eTe(t){var e=dr(t,X7),{activeDot:n,animateNewValues:r,animationBegin:i,animationDuration:a,animationEasing:s,connectNulls:l,dot:c,hide:h,isAnimationActive:p,label:g,legendType:x,xAxisId:b,yAxisId:C,id:A}=e,D=ON(e,VEe),{needClip:R}=RN(b,C),j=DN(),O=Kg(),q=ai(),$=$e(Z=>MEe(Z,b,C,q,A));if(O!=="horizontal"&&O!=="vertical"||$==null||j==null)return null;var{height:H,width:U,x:z,y:B}=j;return N.createElement(XEe,vg({},D,{id:A,connectNulls:l,dot:c,activeDot:n,animateNewValues:r,animationBegin:i,animationDuration:a,animationEasing:s,isAnimationActive:p,hide:h,label:g,legendType:x,xAxisId:b,yAxisId:C,points:$,layout:O,height:H,width:U,left:z,top:B,needClip:R}))}function tTe(t){var{layout:e,xAxis:n,yAxis:r,xAxisTicks:i,yAxisTicks:a,dataKey:s,bandSize:l,displayedData:c}=t;return c.map((h,p)=>{var g=mn(h,s);if(e==="horizontal"){var x=H5({axis:n,ticks:i,bandSize:l,entry:h,index:p}),b=Fn(g)?null:r.scale(g);return{x,y:b,value:g,payload:h}}var C=Fn(g)?null:n.scale(g),A=H5({axis:r,ticks:a,bandSize:l,entry:h,index:p});return C==null||A==null?null:{x:C,y:A,value:g,payload:h}}).filter(Boolean)}function nTe(t){var e=dr(t,X7),n=ai();return N.createElement(PN,{id:e.id,type:"line"},r=>N.createElement(N.Fragment,null,N.createElement(N7,{legendPayload:qEe(e)}),N.createElement(HEe,{dataKey:e.dataKey,data:e.data,stroke:e.stroke,strokeWidth:e.strokeWidth,fill:e.fill,name:e.name,hide:e.hide,unit:e.unit,tooltipType:e.tooltipType}),N.createElement(R7,{type:"line",id:r,data:e.data,xAxisId:e.xAxisId,yAxisId:e.yAxisId,zAxisId:0,dataKey:e.dataKey,hide:e.hide,isPanorama:n}),N.createElement(eTe,vg({},e,{id:r}))))}var Sb=N.memo(nTe,Eb);Sb.displayName="Line";var rTe=["domain","range"],iTe=["domain","range"];function F4(t,e){if(t==null)return{};var n,r,i=aTe(t,e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);for(r=0;r<a.length;r++)n=a[r],e.indexOf(n)===-1&&{}.propertyIsEnumerable.call(t,n)&&(i[n]=t[n])}return i}function aTe(t,e){if(t==null)return{};var n={};for(var r in t)if({}.hasOwnProperty.call(t,r)){if(e.indexOf(r)!==-1)continue;n[r]=t[r]}return n}function B4(t,e){return t===e?!0:Array.isArray(t)&&t.length===2&&Array.isArray(e)&&e.length===2?t[0]===e[0]&&t[1]===e[1]:!1}function e8(t,e){if(t===e)return!0;var{domain:n,range:r}=t,i=F4(t,rTe),{domain:a,range:s}=e,l=F4(e,iTe);return!B4(n,a)||!B4(r,s)?!1:Eb(i,l)}var sTe=["dangerouslySetInnerHTML","ticks"],oTe=["id"];function lA(){return lA=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)({}).hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},lA.apply(null,arguments)}function z4(t,e){if(t==null)return{};var n,r,i=lTe(t,e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);for(r=0;r<a.length;r++)n=a[r],e.indexOf(n)===-1&&{}.propertyIsEnumerable.call(t,n)&&(i[n]=t[n])}return i}function lTe(t,e){if(t==null)return{};var n={};for(var r in t)if({}.hasOwnProperty.call(t,r)){if(e.indexOf(r)!==-1)continue;n[r]=t[r]}return n}function uTe(t){var e=gn(),n=N.useRef(null);return N.useLayoutEffect(()=>{n.current===null?e(C_e(t)):n.current!==t&&e(I_e({prev:n.current,next:t})),n.current=t},[t,e]),N.useLayoutEffect(()=>()=>{n.current&&(e(N_e(n.current)),n.current=null)},[e]),null}var cTe=t=>{var{xAxisId:e,className:n}=t,r=$e(rI),i=ai(),a="xAxis",s=$e(D=>lc(D,a,e,i)),l=$e(D=>Dq(D,a,e,i)),c=$e(D=>Cq(D,e)),h=$e(D=>Pge(D,e)),p=$e(D=>lq(D,e));if(c==null||h==null||p==null)return null;var{dangerouslySetInnerHTML:g,ticks:x}=t,b=z4(t,sTe),{id:C}=p,A=z4(p,oTe);return N.createElement(MN,lA({},b,A,{scale:s,x:h.x,y:h.y,width:c.width,height:c.height,className:Ft("recharts-".concat(a," ").concat(a),n),viewBox:r,ticks:l,axisType:a}))},dTe={allowDataOverflow:qr.allowDataOverflow,allowDecimals:qr.allowDecimals,allowDuplicatedCategory:qr.allowDuplicatedCategory,angle:qr.angle,axisLine:Cl.axisLine,height:qr.height,hide:!1,includeHidden:qr.includeHidden,interval:qr.interval,minTickGap:qr.minTickGap,mirror:qr.mirror,orientation:qr.orientation,padding:qr.padding,reversed:qr.reversed,scale:qr.scale,tick:qr.tick,tickCount:qr.tickCount,tickLine:Cl.tickLine,tickSize:Cl.tickSize,type:qr.type,xAxisId:0},fTe=t=>{var e=dr(t,dTe);return N.createElement(N.Fragment,null,N.createElement(uTe,{allowDataOverflow:e.allowDataOverflow,allowDecimals:e.allowDecimals,allowDuplicatedCategory:e.allowDuplicatedCategory,angle:e.angle,dataKey:e.dataKey,domain:e.domain,height:e.height,hide:e.hide,id:e.xAxisId,includeHidden:e.includeHidden,interval:e.interval,minTickGap:e.minTickGap,mirror:e.mirror,name:e.name,orientation:e.orientation,padding:e.padding,reversed:e.reversed,scale:e.scale,tick:e.tick,tickCount:e.tickCount,tickFormatter:e.tickFormatter,ticks:e.ticks,type:e.type,unit:e.unit}),N.createElement(cTe,e))},xg=N.memo(fTe,e8);xg.displayName="XAxis";var hTe=["dangerouslySetInnerHTML","ticks"],mTe=["id"];function uA(){return uA=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)({}).hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},uA.apply(null,arguments)}function q4(t,e){if(t==null)return{};var n,r,i=pTe(t,e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);for(r=0;r<a.length;r++)n=a[r],e.indexOf(n)===-1&&{}.propertyIsEnumerable.call(t,n)&&(i[n]=t[n])}return i}function pTe(t,e){if(t==null)return{};var n={};for(var r in t)if({}.hasOwnProperty.call(t,r)){if(e.indexOf(r)!==-1)continue;n[r]=t[r]}return n}function gTe(t){var e=gn(),n=N.useRef(null);return N.useLayoutEffect(()=>{n.current===null?e(P_e(t)):n.current!==t&&e(D_e({prev:n.current,next:t})),n.current=t},[t,e]),N.useLayoutEffect(()=>()=>{n.current&&(e(R_e(n.current)),n.current=null)},[e]),null}var yTe=t=>{var{yAxisId:e,className:n,width:r,label:i}=t,a=N.useRef(null),s=N.useRef(null),l=$e(rI),c=ai(),h=gn(),p="yAxis",g=$e($=>lc($,p,e,c)),x=$e($=>Iq($,e)),b=$e($=>Rge($,e)),C=$e($=>Dq($,p,e,c)),A=$e($=>uq($,e));if(N.useLayoutEffect(()=>{if(!(r!=="auto"||!x||_N(i)||N.isValidElement(i)||A==null)){var $=a.current;if($){var H=$.getCalculatedWidth();Math.round(x.width)!==Math.round(H)&&h(k_e({id:e,width:H}))}}},[C,x,h,i,e,r,A]),x==null||b==null||A==null)return null;var{dangerouslySetInnerHTML:D,ticks:R}=t,j=q4(t,hTe),{id:O}=A,q=q4(A,mTe);return N.createElement(MN,uA({},j,q,{ref:a,labelRef:s,scale:g,x:b.x,y:b.y,tickTextProps:r==="auto"?{width:void 0}:{width:r},width:x.width,height:x.height,className:Ft("recharts-".concat(p," ").concat(p),n),viewBox:l,ticks:C,axisType:p}))},vTe={allowDataOverflow:Hr.allowDataOverflow,allowDecimals:Hr.allowDecimals,allowDuplicatedCategory:Hr.allowDuplicatedCategory,angle:Hr.angle,axisLine:Cl.axisLine,hide:!1,includeHidden:Hr.includeHidden,interval:Hr.interval,minTickGap:Hr.minTickGap,mirror:Hr.mirror,orientation:Hr.orientation,padding:Hr.padding,reversed:Hr.reversed,scale:Hr.scale,tick:Hr.tick,tickCount:Hr.tickCount,tickLine:Cl.tickLine,tickSize:Cl.tickSize,type:Hr.type,width:Hr.width,yAxisId:0},xTe=t=>{var e=dr(t,vTe);return N.createElement(N.Fragment,null,N.createElement(gTe,{interval:e.interval,id:e.yAxisId,scale:e.scale,type:e.type,domain:e.domain,allowDataOverflow:e.allowDataOverflow,dataKey:e.dataKey,allowDuplicatedCategory:e.allowDuplicatedCategory,allowDecimals:e.allowDecimals,tickCount:e.tickCount,padding:e.padding,includeHidden:e.includeHidden,reversed:e.reversed,ticks:e.ticks,width:e.width,orientation:e.orientation,mirror:e.mirror,hide:e.hide,unit:e.unit,name:e.name,angle:e.angle,minTickGap:e.minTickGap,tick:e.tick,tickFormatter:e.tickFormatter}),N.createElement(yTe,e))},mh=N.memo(xTe,e8);mh.displayName="YAxis";var _Te=(t,e)=>e,jN=pe([_Te,Lt,sq,Mr,Kq,Yl,Kye,Rr],eve),LN=t=>{var e=t.currentTarget.getBoundingClientRect(),n=e.width/t.currentTarget.offsetWidth,r=e.height/t.currentTarget.offsetHeight;return{chartX:Math.round((t.clientX-e.left)/n),chartY:Math.round((t.clientY-e.top)/r)}},t8=gs("mouseClick"),n8=Hg();n8.startListening({actionCreator:t8,effect:(t,e)=>{var n=t.payload,r=jN(e.getState(),LN(n));(r==null?void 0:r.activeIndex)!=null&&e.dispatch($ge({activeIndex:r.activeIndex,activeDataKey:void 0,activeCoordinate:r.activeCoordinate}))}});var cA=gs("mouseMove"),r8=Hg(),zv=null;r8.startListening({actionCreator:cA,effect:(t,e)=>{var n=t.payload;zv!==null&&cancelAnimationFrame(zv);var r=LN(n);zv=requestAnimationFrame(()=>{var i=e.getState(),a=uN(i,i.tooltip.settings.shared);if(a==="axis"){var s=jN(i,r);(s==null?void 0:s.activeIndex)!=null?e.dispatch(Uq({activeIndex:s.activeIndex,activeDataKey:void 0,activeCoordinate:s.activeCoordinate})):e.dispatch(Vq())}zv=null})}});var H4={accessibilityLayer:!0,barCategoryGap:"10%",barGap:4,barSize:void 0,className:void 0,maxBarSize:void 0,stackOffset:"none",syncId:void 0,syncMethod:"index",baseValue:void 0,reverseStackOrder:!1},i8=ma({name:"rootProps",initialState:H4,reducers:{updateOptions:(t,e)=>{var n;t.accessibilityLayer=e.payload.accessibilityLayer,t.barCategoryGap=e.payload.barCategoryGap,t.barGap=(n=e.payload.barGap)!==null&&n!==void 0?n:H4.barGap,t.barSize=e.payload.barSize,t.maxBarSize=e.payload.maxBarSize,t.stackOffset=e.payload.stackOffset,t.syncId=e.payload.syncId,t.syncMethod=e.payload.syncMethod,t.className=e.payload.className,t.baseValue=e.payload.baseValue,t.reverseStackOrder=e.payload.reverseStackOrder}}}),bTe=i8.reducer,{updateOptions:wTe}=i8.actions,a8=ma({name:"polarOptions",initialState:null,reducers:{updatePolarOptions:(t,e)=>e.payload}}),{updatePolarOptions:ETe}=a8.actions,TTe=a8.reducer,s8=gs("keyDown"),o8=gs("focus"),VN=Hg();VN.startListening({actionCreator:s8,effect:(t,e)=>{var n=e.getState(),r=n.rootProps.accessibilityLayer!==!1;if(r){var{keyboardInteraction:i}=n.tooltip,a=t.payload;if(!(a!=="ArrowRight"&&a!=="ArrowLeft"&&a!=="Enter")){var s=cN(i,gm(n),ay(n),uy(n)),l=s==null?-1:Number(s);if(!(!Number.isFinite(l)||l<0)){var c=Yl(n);if(a==="Enter"){var h=Bx(n,"axis","hover",String(i.index));e.dispatch(tA({active:!i.active,activeIndex:i.index,activeDataKey:i.dataKey,activeCoordinate:h}));return}var p=jge(n),g=p==="left-to-right"?1:-1,x=a==="ArrowRight"?1:-1,b=l+x*g;if(!(c==null||b>=c.length||b<0)){var C=Bx(n,"axis","hover",String(b));e.dispatch(tA({active:!0,activeIndex:b.toString(),activeDataKey:void 0,activeCoordinate:C}))}}}}}});VN.startListening({actionCreator:o8,effect:(t,e)=>{var n=e.getState(),r=n.rootProps.accessibilityLayer!==!1;if(r){var{keyboardInteraction:i}=n.tooltip;if(!i.active&&i.index==null){var a="0",s=Bx(n,"axis","hover",String(a));e.dispatch(tA({activeDataKey:void 0,active:!0,activeIndex:a,activeCoordinate:s}))}}}});var cs=gs("externalEvent"),l8=Hg(),hS=new Map;l8.startListening({actionCreator:cs,effect:(t,e)=>{var{handler:n,reactEvent:r}=t.payload;if(n!=null){r.persist();var i=r.type,a=hS.get(i);a!==void 0&&cancelAnimationFrame(a);var s=requestAnimationFrame(()=>{try{var l=e.getState(),c={activeCoordinate:Dye(l),activeDataKey:Jq(l),activeIndex:dc(l),activeLabel:Zq(l),activeTooltipIndex:dc(l),isTooltipActive:Rye(l)};n(c,r)}finally{hS.delete(i)}});hS.set(i,s)}}});var STe=pe([pm],t=>t.tooltipItemPayloads),ATe=pe([STe,oy,(t,e,n)=>e,(t,e,n)=>n],(t,e,n,r)=>{var i=t.find(l=>l.settings.dataKey===r);if(i!=null){var{positions:a}=i;if(a!=null){var s=e(a,n);return s}}}),u8=gs("touchMove"),c8=Hg();c8.startListening({actionCreator:u8,effect:(t,e)=>{var n=t.payload;if(!(n.touches==null||n.touches.length===0)){var r=e.getState(),i=uN(r,r.tooltip.settings.shared);if(i==="axis"){var a=jN(r,LN({clientX:n.touches[0].clientX,clientY:n.touches[0].clientY,currentTarget:n.currentTarget}));(a==null?void 0:a.activeIndex)!=null&&e.dispatch(Uq({activeIndex:a.activeIndex,activeDataKey:void 0,activeCoordinate:a.activeCoordinate}))}else if(i==="item"){var s,l=n.touches[0];if(document.elementFromPoint==null)return;var c=document.elementFromPoint(l.clientX,l.clientY);if(!c||!c.getAttribute)return;var h=c.getAttribute(PB),p=(s=c.getAttribute(DB))!==null&&s!==void 0?s:void 0,g=ATe(e.getState(),h,p);e.dispatch(Lq({activeDataKey:p,activeIndex:h,activeCoordinate:g}))}}}});var CTe=QF({brush:_we,cartesianAxis:M_e,chartData:Dve,errorBars:ebe,graphicalItems:Fxe,layout:ace,legend:hde,options:Ave,polarAxis:txe,polarOptions:TTe,referenceElements:Dwe,rootProps:bTe,tooltip:Kge,zIndex:mve}),ITe=function(e){return Pue({reducer:CTe,preloadedState:e,middleware:n=>{var r;return n({serializableCheck:!1,immutableCheck:!["commonjs","es6","production"].includes((r="es6")!==null&&r!==void 0?r:"")}).concat([n8.middleware,r8.middleware,VN.middleware,l8.middleware,c8.middleware])},enhancers:n=>{var r=n;return typeof n=="function"&&(r=n()),r.concat(hB({type:"raf"}))},devTools:Wd.devToolsEnabled})};function d8(t){var{preloadedState:e,children:n,reduxStoreName:r}=t,i=ai(),a=N.useRef(null);if(i)return n;a.current==null&&(a.current=ITe(e));var s=WC;return N.createElement(wbe,{context:s,store:a.current},n)}function NTe(t){var{layout:e,margin:n}=t,r=gn(),i=ai();return N.useEffect(()=>{i||(r(nce(e)),r(tce(n)))},[r,i,e,n]),null}var f8=N.memo(NTe,Eb);function h8(t){var e=gn();return N.useEffect(()=>{e(wTe(t))},[e,t]),null}function G4(t){var{zIndex:e,isPanorama:n}=t,r=n?"recharts-zindex-panorama-":"recharts-zindex-",i=P7("".concat(r).concat(e)),a=gn();return N.useLayoutEffect(()=>(a(fve({zIndex:e,elementId:i,isPanorama:n})),()=>{a(hve({zIndex:e,isPanorama:n}))}),[a,e,i,n]),N.createElement("g",{id:i})}function $4(t){var{children:e,isPanorama:n}=t,r=$e(nve);if(!r||r.length===0)return e;var i=r.filter(s=>s<0),a=r.filter(s=>s>0);return N.createElement(N.Fragment,null,i.map(s=>N.createElement(G4,{key:s,zIndex:s,isPanorama:n})),e,a.map(s=>N.createElement(G4,{key:s,zIndex:s,isPanorama:n})))}var PTe=["children"];function DTe(t,e){if(t==null)return{};var n,r,i=RTe(t,e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);for(r=0;r<a.length;r++)n=a[r],e.indexOf(n)===-1&&{}.propertyIsEnumerable.call(t,n)&&(i[n]=t[n])}return i}function RTe(t,e){if(t==null)return{};var n={};for(var r in t)if({}.hasOwnProperty.call(t,r)){if(e.indexOf(r)!==-1)continue;n[r]=t[r]}return n}function Jx(){return Jx=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)({}).hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},Jx.apply(null,arguments)}var kTe={width:"100%",height:"100%",display:"block"},MTe=N.forwardRef((t,e)=>{var n=aI(),r=sI(),i=KB();if(!jo(n)||!jo(r))return null;var{children:a,otherAttributes:s,title:l,desc:c}=t,h,p;return s!=null&&(typeof s.tabIndex=="number"?h=s.tabIndex:h=i?0:void 0,typeof s.role=="string"?p=s.role:p=i?"application":void 0),N.createElement(VC,Jx({},s,{title:l,desc:c,role:p,tabIndex:h,width:n,height:r,style:kTe,ref:e}),a)}),OTe=t=>{var{children:e}=t,n=$e(Z_);if(!n)return null;var{width:r,height:i,y:a,x:s}=n;return N.createElement(VC,{width:r,height:i,x:s,y:a},e)},K4=N.forwardRef((t,e)=>{var{children:n}=t,r=DTe(t,PTe),i=ai();return i?N.createElement(OTe,null,N.createElement($4,{isPanorama:!0},n)):N.createElement(MTe,Jx({ref:e},r),N.createElement($4,{isPanorama:!1},n))});function jTe(){var t=gn(),[e,n]=N.useState(null),r=$e(Ece);return N.useEffect(()=>{if(e!=null){var i=e.getBoundingClientRect(),a=i.width/e.offsetWidth;Cn(a)&&a!==r&&t(ice(a))}},[e,t,r]),n}function W4(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function LTe(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?W4(Object(n),!0).forEach(function(r){VTe(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):W4(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function VTe(t,e,n){return(e=UTe(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function UTe(t){var e=FTe(t,"string");return typeof e=="symbol"?e:e+""}function FTe(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function qd(){return qd=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)({}).hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},qd.apply(null,arguments)}var BTe=()=>(Fve(),null);function Qx(t){if(typeof t=="number")return t;if(typeof t=="string"){var e=parseFloat(t);if(!Number.isNaN(e))return e}return 0}var zTe=N.forwardRef((t,e)=>{var n,r,i=N.useRef(null),[a,s]=N.useState({containerWidth:Qx((n=t.style)===null||n===void 0?void 0:n.width),containerHeight:Qx((r=t.style)===null||r===void 0?void 0:r.height)}),l=N.useCallback((h,p)=>{s(g=>{var x=Math.round(h),b=Math.round(p);return g.containerWidth===x&&g.containerHeight===b?g:{containerWidth:x,containerHeight:b}})},[]),c=N.useCallback(h=>{if(typeof e=="function"&&e(h),h!=null&&typeof ResizeObserver<"u"){var{width:p,height:g}=h.getBoundingClientRect();l(p,g);var x=C=>{var{width:A,height:D}=C[0].contentRect;l(A,D)},b=new ResizeObserver(x);b.observe(h),i.current=b}},[e,l]);return N.useEffect(()=>()=>{var h=i.current;h!=null&&h.disconnect()},[l]),N.createElement(N.Fragment,null,N.createElement(J_,{width:a.containerWidth,height:a.containerHeight}),N.createElement("div",qd({ref:c},t)))}),qTe=N.forwardRef((t,e)=>{var{width:n,height:r}=t,[i,a]=N.useState({containerWidth:Qx(n),containerHeight:Qx(r)}),s=N.useCallback((c,h)=>{a(p=>{var g=Math.round(c),x=Math.round(h);return p.containerWidth===g&&p.containerHeight===x?p:{containerWidth:g,containerHeight:x}})},[]),l=N.useCallback(c=>{if(typeof e=="function"&&e(c),c!=null){var{width:h,height:p}=c.getBoundingClientRect();s(h,p)}},[e,s]);return N.createElement(N.Fragment,null,N.createElement(J_,{width:i.containerWidth,height:i.containerHeight}),N.createElement("div",qd({ref:l},t)))}),HTe=N.forwardRef((t,e)=>{var{width:n,height:r}=t;return N.createElement(N.Fragment,null,N.createElement(J_,{width:n,height:r}),N.createElement("div",qd({ref:e},t)))}),GTe=N.forwardRef((t,e)=>{var{width:n,height:r}=t;return kl(n)||kl(r)?N.createElement(qTe,qd({},t,{ref:e})):N.createElement(HTe,qd({},t,{ref:e}))});function $Te(t){return t===!0?zTe:GTe}var KTe=N.forwardRef((t,e)=>{var{children:n,className:r,height:i,onClick:a,onContextMenu:s,onDoubleClick:l,onMouseDown:c,onMouseEnter:h,onMouseLeave:p,onMouseMove:g,onMouseUp:x,onTouchEnd:b,onTouchMove:C,onTouchStart:A,style:D,width:R,responsive:j,dispatchTouchEvents:O=!0}=t,q=N.useRef(null),$=gn(),[H,U]=N.useState(null),[z,B]=N.useState(null),Z=jTe(),K=iI(),J=(K==null?void 0:K.width)>0?K.width:R,G=(K==null?void 0:K.height)>0?K.height:i,Se=N.useCallback(Te=>{Z(Te),typeof e=="function"&&e(Te),U(Te),B(Te),Te!=null&&(q.current=Te)},[Z,e,U,B]),Oe=N.useCallback(Te=>{$(t8(Te)),$(cs({handler:a,reactEvent:Te}))},[$,a]),ee=N.useCallback(Te=>{$(cA(Te)),$(cs({handler:h,reactEvent:Te}))},[$,h]),re=N.useCallback(Te=>{$(Vq()),$(cs({handler:p,reactEvent:Te}))},[$,p]),le=N.useCallback(Te=>{$(cA(Te)),$(cs({handler:g,reactEvent:Te}))},[$,g]),Ne=N.useCallback(()=>{$(o8())},[$]),Pe=N.useCallback(Te=>{$(s8(Te.key))},[$]),X=N.useCallback(Te=>{$(cs({handler:s,reactEvent:Te}))},[$,s]),ue=N.useCallback(Te=>{$(cs({handler:l,reactEvent:Te}))},[$,l]),be=N.useCallback(Te=>{$(cs({handler:c,reactEvent:Te}))},[$,c]),Ce=N.useCallback(Te=>{$(cs({handler:x,reactEvent:Te}))},[$,x]),je=N.useCallback(Te=>{$(cs({handler:A,reactEvent:Te}))},[$,A]),Ve=N.useCallback(Te=>{O&&$(u8(Te)),$(cs({handler:C,reactEvent:Te}))},[$,O,C]),Ze=N.useCallback(Te=>{$(cs({handler:b,reactEvent:Te}))},[$,b]),It=$Te(j);return N.createElement(i7.Provider,{value:H},N.createElement(mF.Provider,{value:z},N.createElement(It,{width:J??(D==null?void 0:D.width),height:G??(D==null?void 0:D.height),className:Ft("recharts-wrapper",r),style:LTe({position:"relative",cursor:"default",width:J,height:G},D),onClick:Oe,onContextMenu:X,onDoubleClick:ue,onFocus:Ne,onKeyDown:Pe,onMouseDown:be,onMouseEnter:ee,onMouseLeave:re,onMouseMove:le,onMouseUp:Ce,onTouchEnd:Ze,onTouchMove:Ve,onTouchStart:je,ref:Se},N.createElement(BTe,null),n)))}),WTe=["width","height","responsive","children","className","style","compact","title","desc"];function YTe(t,e){if(t==null)return{};var n,r,i=ZTe(t,e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);for(r=0;r<a.length;r++)n=a[r],e.indexOf(n)===-1&&{}.propertyIsEnumerable.call(t,n)&&(i[n]=t[n])}return i}function ZTe(t,e){if(t==null)return{};var n={};for(var r in t)if({}.hasOwnProperty.call(t,r)){if(e.indexOf(r)!==-1)continue;n[r]=t[r]}return n}var m8=N.forwardRef((t,e)=>{var{width:n,height:r,responsive:i,children:a,className:s,style:l,compact:c,title:h,desc:p}=t,g=YTe(t,WTe),x=Ha(g);return c?N.createElement(N.Fragment,null,N.createElement(J_,{width:n,height:r}),N.createElement(K4,{otherAttributes:x,title:h,desc:p},a)):N.createElement(KTe,{className:s,style:l,width:n,height:r,responsive:i??!1,onClick:t.onClick,onMouseLeave:t.onMouseLeave,onMouseEnter:t.onMouseEnter,onMouseMove:t.onMouseMove,onMouseDown:t.onMouseDown,onMouseUp:t.onMouseUp,onContextMenu:t.onContextMenu,onDoubleClick:t.onDoubleClick,onTouchStart:t.onTouchStart,onTouchMove:t.onTouchMove,onTouchEnd:t.onTouchEnd},N.createElement(K4,{otherAttributes:x,title:h,desc:p,ref:e},N.createElement(Rwe,null,a)))});function dA(){return dA=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)({}).hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},dA.apply(null,arguments)}var JTe={top:5,right:5,bottom:5,left:5},QTe={accessibilityLayer:!0,layout:"horizontal",stackOffset:"none",barCategoryGap:"10%",barGap:4,margin:JTe,reverseStackOrder:!1,syncMethod:"index",responsive:!1},p8=N.forwardRef(function(e,n){var r,i=dr(e.categoricalChartProps,QTe),{chartName:a,defaultTooltipEventType:s,validateTooltipEventTypes:l,tooltipPayloadSearcher:c,categoricalChartProps:h}=e,p={chartName:a,defaultTooltipEventType:s,validateTooltipEventTypes:l,tooltipPayloadSearcher:c,eventEmitter:void 0};return N.createElement(d8,{preloadedState:{options:p},reduxStoreName:(r=h.id)!==null&&r!==void 0?r:a},N.createElement(F7,{chartData:h.data}),N.createElement(f8,{layout:i.layout,margin:i.margin}),N.createElement(h8,{baseValue:i.baseValue,accessibilityLayer:i.accessibilityLayer,barCategoryGap:i.barCategoryGap,maxBarSize:i.maxBarSize,stackOffset:i.stackOffset,barGap:i.barGap,barSize:i.barSize,syncId:i.syncId,syncMethod:i.syncMethod,className:i.className,reverseStackOrder:i.reverseStackOrder}),N.createElement(m8,dA({},i,{ref:n})))}),XTe=["axis","item"],g8=N.forwardRef((t,e)=>N.createElement(p8,{chartName:"BarChart",defaultTooltipEventType:"axis",validateTooltipEventTypes:XTe,tooltipPayloadSearcher:xN,categoricalChartProps:t,ref:e}));function eSe(t){var e=gn();return N.useEffect(()=>{e(ETe(t))},[e,t]),null}var tSe=["layout"];function fA(){return fA=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)({}).hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},fA.apply(null,arguments)}function nSe(t,e){if(t==null)return{};var n,r,i=rSe(t,e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);for(r=0;r<a.length;r++)n=a[r],e.indexOf(n)===-1&&{}.propertyIsEnumerable.call(t,n)&&(i[n]=t[n])}return i}function rSe(t,e){if(t==null)return{};var n={};for(var r in t)if({}.hasOwnProperty.call(t,r)){if(e.indexOf(r)!==-1)continue;n[r]=t[r]}return n}var iSe={top:5,right:5,bottom:5,left:5},aSe={accessibilityLayer:!0,stackOffset:"none",barCategoryGap:"10%",barGap:4,margin:iSe,reverseStackOrder:!1,syncMethod:"index",layout:"radial",responsive:!1},sSe=N.forwardRef(function(e,n){var r,i=dr(e.categoricalChartProps,aSe),{layout:a}=i,s=nSe(i,tSe),{chartName:l,defaultTooltipEventType:c,validateTooltipEventTypes:h,tooltipPayloadSearcher:p}=e,g={chartName:l,defaultTooltipEventType:c,validateTooltipEventTypes:h,tooltipPayloadSearcher:p,eventEmitter:void 0};return N.createElement(d8,{preloadedState:{options:g},reduxStoreName:(r=i.id)!==null&&r!==void 0?r:l},N.createElement(F7,{chartData:i.data}),N.createElement(f8,{layout:a,margin:i.margin}),N.createElement(h8,{baseValue:void 0,accessibilityLayer:i.accessibilityLayer,barCategoryGap:i.barCategoryGap,maxBarSize:i.maxBarSize,stackOffset:i.stackOffset,barGap:i.barGap,barSize:i.barSize,syncId:i.syncId,syncMethod:i.syncMethod,className:i.className,reverseStackOrder:i.reverseStackOrder}),N.createElement(eSe,{cx:i.cx,cy:i.cy,startAngle:i.startAngle,endAngle:i.endAngle,innerRadius:i.innerRadius,outerRadius:i.outerRadius}),N.createElement(m8,fA({},s,{ref:n})))}),oSe=["item"],lSe={layout:"centric",startAngle:0,endAngle:360,cx:"50%",cy:"50%",innerRadius:0,outerRadius:"80%"},uSe=N.forwardRef((t,e)=>{var n=dr(t,lSe);return N.createElement(sSe,{chartName:"PieChart",defaultTooltipEventType:"item",validateTooltipEventTypes:oSe,tooltipPayloadSearcher:xN,categoricalChartProps:n,ref:e})}),cSe=["axis"],y8=N.forwardRef((t,e)=>N.createElement(p8,{chartName:"ComposedChart",defaultTooltipEventType:"axis",validateTooltipEventTypes:cSe,tooltipPayloadSearcher:xN,categoricalChartProps:t,ref:e}));const ht=t=>new Intl.NumberFormat("pt-BR",{style:"currency",currency:"BRL"}).format(t),Bn=t=>{if(!t)return"N/A";const e=new Date(t);return isNaN(e.getTime())?"Data Invlida":new Date(e.getUTCFullYear(),e.getUTCMonth(),e.getUTCDate()).toLocaleDateString("pt-BR",{})};lr.ACTIVE+"",lr.IN_REPAIR+"",lr.DECOMMISSIONED+"",lr.IDLE+"";const dSe=({assets:t})=>{const e=N.useMemo(()=>{const n={};t.forEach(b=>{b.maintenanceHistory.forEach(C=>{if(!C.date)return;const[A,D]=C.date.split("-").map(Number),R=`${A}-${String(D).padStart(2,"0")}`;n[R]=(n[R]||0)+C.cost})});const i=Object.keys(n).sort().map(b=>{const[C,A]=b.split("-").map(Number),R=new Date(Date.UTC(C,A-1,2)).toLocaleString("pt-BR",{month:"short",year:"2-digit",timeZone:"UTC"}).replace(".","").replace(" de ","/");return{name:R.charAt(0).toUpperCase()+R.slice(1),Custo:n[b]}});if(i.length<2)return i;let a=0,s=0,l=0,c=0;const h=i.length;i.forEach((b,C)=>{const A=C,D=b.Custo;a+=A,s+=D,l+=A*D,c+=A*A});const p=h*c-a*a,g=p!==0?(h*l-a*s)/p:0,x=(s-g*a)/h;return i.map((b,C)=>({...b,Tendncia:Math.max(0,g*C+x)}))},[t]);return f.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-xl shadow-lg p-6 h-96",children:[f.jsx("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white mb-4",children:"Custo de Manuteno Mensal"}),f.jsx(Lp,{width:"100%",height:"100%",children:f.jsxs(g8,{data:e,margin:{top:5,right:20,left:-10,bottom:5},children:[f.jsx(yg,{strokeDasharray:"3 3",vertical:!1,stroke:"rgba(128, 128, 128, 0.2)"}),f.jsx(xg,{dataKey:"name"}),f.jsx(mh,{tickFormatter:n=>`R$${n}`}),f.jsx(Vp,{formatter:n=>ht(n)}),f.jsx(fh,{}),f.jsx(Ku,{dataKey:"Custo",fill:"#f97316"}),f.jsx(Sb,{type:"monotone",dataKey:"Tendncia",stroke:"#ff7300",strokeWidth:2,dot:!1,strokeDasharray:"5 5",activeDot:{r:6}})]})})]})},fSe=({invoices:t,contracts:e,assets:n})=>{const r=N.useMemo(()=>{const i=[];return Array.from({length:6},(s,l)=>{const c=new Date;return c.setMonth(c.getMonth()-l),{month:c.getMonth(),year:c.getFullYear(),name:c.toLocaleString("pt-BR",{month:"short"})}}).reverse().forEach(s=>{const l=t.filter(x=>new Date(x.issueDate).getMonth()===s.month&&new Date(x.issueDate).getFullYear()===s.year&&x.status===Xn.PAID).reduce((x,b)=>x+b.total,0),c=e.filter(x=>x.status===Va.ACTIVE&&new Date(x.startDate)<=new Date(s.year,s.month+1,0)&&new Date(x.endDate)>=new Date(s.year,s.month,1)).reduce((x,b)=>x+b.monthlyValue,0),h=n.flatMap(x=>x.maintenanceHistory).filter(x=>{const b=new Date(x.date);return b.getMonth()===s.month&&b.getFullYear()===s.year}).reduce((x,b)=>x+b.cost,0),p=c+h,g=l-p;i.push({name:s.name.charAt(0).toUpperCase()+s.name.slice(1),Faturamento:l,Custos:p,Resultado:g})}),i},[t,e,n]);return f.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-xl shadow-lg p-6 h-96",children:[f.jsx("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white mb-4",children:"Viso Financeira (ltimos 6 meses)"}),f.jsx(Lp,{width:"100%",height:"90%",children:f.jsxs(y8,{data:r,margin:{top:5,right:20,left:10,bottom:5},children:[f.jsx(yg,{strokeDasharray:"3 3",vertical:!1}),f.jsx(xg,{dataKey:"name"}),f.jsx(mh,{tickFormatter:i=>`R$${(i/1e3).toFixed(0)}k`}),f.jsx(Vp,{formatter:i=>ht(i)}),f.jsx(fh,{}),f.jsx(Ku,{dataKey:"Faturamento",fill:"#22c55e"}),f.jsx(Ku,{dataKey:"Custos",fill:"#ef4444"}),f.jsx(Sb,{type:"monotone",dataKey:"Resultado",stroke:"#3b82f6",strokeWidth:3})]})})]})},hSe=({assets:t})=>{const[e,n]=N.useState(""),[r,i]=N.useState(""),[a,s]=N.useState(!1),[l,c]=N.useState(""),h=async()=>{if(e.trim()){s(!0),c(""),i("");try{const x=await $ie(e,t);i(x)}catch(x){c("Falha ao obter resposta da IA. Tente novamente."),console.error(x)}finally{s(!1)}}},p=x=>{x.key==="Enter"&&h()},g=["Quais ativos esto em manuteno?","Resuma o status dos equipamentos de TI.","Qual o ativo com maior valor de compra?","Liste os ativos ociosos."];return f.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-xl shadow-lg p-6",children:[f.jsxs("div",{className:"flex items-center mb-4",children:[f.jsx(yse,{className:"w-6 h-6 text-primary-500 mr-3"}),f.jsx("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white",children:"Assistente Inteligente SGA"})]}),f.jsxs("div",{className:"relative flex items-center mb-4",children:[f.jsx("input",{type:"text",value:e,onChange:x=>n(x.target.value),onKeyDown:p,placeholder:"Pergunte sobre seus ativos...",className:"w-full p-3 pr-12 text-gray-900 border border-gray-300 rounded-lg bg-gray-50 focus:ring-primary-500 focus:border-primary-500 dark:bg-gray-700 dark:border-gray-600 dark:placeholder-gray-400 dark:text-white dark:focus:ring-primary-500 dark:focus:border-primary-500",disabled:a}),f.jsx("button",{onClick:h,disabled:a,className:"absolute right-2.5 bottom-2.5 bg-primary-600 hover:bg-primary-700 focus:ring-4 focus:outline-none focus:ring-primary-300 font-medium rounded-lg text-sm px-3 py-2 text-white dark:bg-primary-600 dark:hover:bg-primary-700 dark:focus:ring-primary-800 disabled:opacity-50",children:f.jsx(vse,{className:"w-4 h-4"})})]}),a?f.jsxs("div",{className:"flex items-center justify-center p-4",children:[f.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-primary-500"}),f.jsx("p",{className:"ml-3 text-gray-600 dark:text-gray-300",children:"Analisando dados..."})]}):l?f.jsx("p",{className:"text-red-500",children:l}):r?f.jsx("div",{className:"mt-4 p-4 bg-gray-50 dark:bg-gray-700 rounded-lg",children:f.jsx("p",{className:"text-gray-800 dark:text-gray-200 whitespace-pre-wrap",children:r})}):f.jsxs("div",{className:"mt-4 text-center text-gray-500 dark:text-gray-400",children:[f.jsx("p",{className:"mb-2",children:"Experimente uma destas perguntas:"}),f.jsx("div",{className:"flex flex-wrap justify-center gap-2",children:g.map(x=>f.jsx("button",{onClick:()=>n(x),className:"text-xs bg-gray-200 dark:bg-gray-700 px-3 py-1 rounded-full hover:bg-primary-100 dark:hover:bg-primary-900",children:x},x))})]})]})},v8=({predictions:t})=>{const{isLoading:e}=Zt(),n=r=>r>.75?"text-red-500 font-bold":r>.5?"text-yellow-500 font-semibold":"text-green-500";return f.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-xl shadow-lg p-6 h-96 flex flex-col",children:[f.jsxs("div",{className:"flex items-center mb-4",children:[f.jsx(OC,{className:"w-6 h-6 text-yellow-400 mr-3"}),f.jsx("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white",children:"Previses de Falha (IA)"})]}),e?f.jsx("div",{className:"flex-grow flex items-center justify-center text-center",children:f.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-primary-500"})}):t.length>0?f.jsx("div",{className:"overflow-y-auto flex-grow",children:f.jsx("ul",{className:"divide-y divide-gray-200 dark:divide-gray-700",children:t.sort((r,i)=>i.probability-r.probability).map(r=>f.jsxs("li",{className:"py-3",children:[f.jsxs("div",{className:"flex items-center justify-between",children:[f.jsx("p",{className:"text-sm font-medium text-gray-900 dark:text-white truncate",children:r.assetName}),f.jsxs("p",{className:`text-sm ${n(r.probability)}`,children:[(r.probability*100).toFixed(1),"%"]})]}),f.jsxs("div",{className:"mt-1 flex items-center justify-between",children:[f.jsxs("p",{className:"text-xs text-gray-500 dark:text-gray-400",children:["Data Prevista: ",Bn(r.predictedDate)]}),f.jsx("button",{className:"text-xs font-medium text-primary-600 hover:underline",children:"Agendar Inspeo"})]})]},r.assetId))})}):f.jsx("div",{className:"flex-grow flex items-center justify-center text-center",children:f.jsxs("div",{children:[f.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:"Nenhuma predio de falha crtica no momento."}),f.jsx("p",{className:"text-xs text-gray-400 dark:text-gray-500 mt-1",children:"A IA est monitorando seus ativos."})]})})]})},Y4=()=>{var x;const{assets:t,invoices:e,contracts:n,failurePredictions:r,deals:i,projects:a,employees:s,isLoading:l,error:c}=Zt(),{user:h}=$s(),{branding:p}=Kd(),g=N.useMemo(()=>{const b=new Date().getMonth(),C=new Date().getFullYear(),A=t.reduce((H,U)=>H+U.purchaseValue,0),D=t.filter(H=>H.status===lr.IN_REPAIR).length,R=e.filter(H=>new Date(H.issueDate).getMonth()===b&&new Date(H.issueDate).getFullYear()===C&&H.status===Xn.PAID).reduce((H,U)=>H+U.total,0),j=n.filter(H=>H.status===Va.ACTIVE).reduce((H,U)=>H+U.monthlyValue,0),O=a.filter(H=>H.status==="Em Andamento").length,q=s.filter(H=>H.status==="Ativo").length,$=i.reduce((H,U)=>H+(U.stage!=="Fechado"?U.value:0),0);return{totalValue:A,inRepairCount:D,monthlyRevenue:R,fixedCosts:j,activeProjects:O,totalEmployees:q,salesPipeline:$}},[t,e,n,a,s,i]);return f.jsxs("div",{className:"p-4 md:p-8 space-y-8",children:[f.jsxs("div",{className:"flex flex-col md:flex-row justify-between items-center",children:[f.jsxs("div",{children:[f.jsxs("h2",{className:"text-2xl font-bold text-gray-800 dark:text-white",children:["Bem-vindo, ",(x=h==null?void 0:h.name)==null?void 0:x.split(" ")[0],"!"]}),f.jsxs("p",{className:"text-gray-500 dark:text-gray-400 mt-1",children:["Viso executiva integrada da ",p.companyName,"."]})]}),f.jsx("div",{className:"text-sm text-gray-500 dark:text-gray-400 bg-white dark:bg-gray-800 px-4 py-2 rounded-lg shadow-sm",children:new Date().toLocaleDateString("pt-BR",{weekday:"long",year:"numeric",month:"long",day:"numeric"})})]}),c&&f.jsx("div",{className:"bg-red-100 border-l-4 border-red-500 text-red-700 p-4",role:"alert",children:f.jsx("p",{children:c})}),l?f.jsx("div",{className:"flex justify-center items-center h-64",children:f.jsx("div",{className:"animate-spin rounded-full h-16 w-16 border-t-2 border-b-2 border-primary-500"})}):f.jsxs(f.Fragment,{children:[f.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-6",children:[f.jsx(Vs,{title:"Receita Mensal",value:ht(g.monthlyRevenue),icon:f.jsx(kse,{className:"w-6 h-6 text-white"}),color:"bg-emerald-500"}),f.jsx(Vs,{title:"Custos Fixos",value:ht(g.fixedCosts),icon:f.jsx(jC,{className:"w-6 h-6 text-white"}),color:"bg-rose-500"}),f.jsx(Vs,{title:"Pipeline de Vendas",value:ht(g.salesPipeline),icon:f.jsx(uF,{className:"w-6 h-6 text-white"}),color:"bg-violet-500"}),f.jsx(Vs,{title:"Patrimnio (Ativos)",value:ht(g.totalValue),icon:f.jsx(kC,{className:"w-6 h-6 text-white"}),color:"bg-blue-500"})]}),f.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-3 gap-6",children:[f.jsx(Vs,{title:"Projetos Ativos",value:g.activeProjects.toString(),icon:f.jsx(oF,{className:"w-6 h-6 text-white"}),color:"bg-indigo-500"}),f.jsx(Vs,{title:"Colaboradores",value:g.totalEmployees.toString(),icon:f.jsx(d1,{className:"w-6 h-6 text-white"}),color:"bg-cyan-500"}),f.jsx(Vs,{title:"Em Manuteno",value:g.inRepairCount.toString(),icon:f.jsx(D_,{className:"w-6 h-6 text-white"}),color:"bg-amber-500"})]}),f.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6 h-full",children:[f.jsxs("div",{className:"lg:col-span-2 flex flex-col space-y-6",children:[f.jsx(fSe,{invoices:e,contracts:n,assets:t}),f.jsx(dSe,{assets:t})]}),f.jsxs("div",{className:"flex flex-col space-y-6",children:[f.jsx(v8,{predictions:r}),f.jsx(hSe,{assets:t})]})]})]})]})},mSe=(t,e,n="descending")=>{const[r,i]=N.useState({key:e,direction:n});return{sortedItems:N.useMemo(()=>{let l=[...t];return r!==null&&l.sort((c,h)=>{const p=c[r.key],g=h[r.key];return p==null?1:g==null?-1:p<g?r.direction==="ascending"?-1:1:p>g?r.direction==="ascending"?1:-1:0}),l},[t,r]),requestSort:l=>{let c="ascending";r&&r.key===l&&r.direction==="ascending"&&(c="descending"),i({key:l,direction:c})},sortConfig:r}},pSe=({score:t})=>{if(t===void 0)return f.jsx("span",{children:"N/A"});const e=()=>t>70?"bg-green-500":t>40?"bg-yellow-500":"bg-red-500";return f.jsxs("div",{className:"flex items-center justify-center",title:`Sade: ${t}%`,children:[f.jsx("div",{className:"w-20 bg-gray-200 dark:bg-gray-700 rounded-full h-2.5",children:f.jsx("div",{className:`${e()} h-2.5 rounded-full transition-all duration-500`,style:{width:`${t}%`}})}),f.jsxs("span",{className:"ml-2 text-xs font-medium text-gray-700 dark:text-gray-300",children:[t,"%"]})]})},gSe=({itemsPerPage:t,totalItems:e,currentPage:n,paginate:r})=>{const i=Math.ceil(e/t),a=(n-1)*t+1,s=Math.min(n*t,e);return i<=1?null:f.jsxs("nav",{className:"flex flex-col md:flex-row justify-between items-start md:items-center space-y-3 md:space-y-0 pt-4","aria-label":"Table navigation",children:[f.jsxs("span",{className:"text-sm font-normal text-gray-500 dark:text-gray-400",children:["Mostrando ",f.jsxs("span",{className:"font-semibold text-gray-900 dark:text-white",children:[a,"-",s]})," de ",f.jsx("span",{className:"font-semibold text-gray-900 dark:text-white",children:e})]}),f.jsxs("ul",{className:"inline-flex items-stretch -space-x-px",children:[f.jsx("li",{children:f.jsxs("button",{onClick:()=>r(n-1),disabled:n===1,className:"flex items-center justify-center h-full py-1.5 px-3 ml-0 text-gray-500 bg-white rounded-l-lg border border-gray-300 hover:bg-gray-100 hover:text-gray-700 dark:bg-gray-800 dark:border-gray-700 dark:text-gray-400 dark:hover:bg-gray-700 dark:hover:text-white disabled:opacity-50 disabled:cursor-not-allowed",children:[f.jsx("span",{className:"sr-only",children:"Anterior"}),f.jsx("svg",{className:"w-5 h-5","aria-hidden":"true",fill:"currentColor",viewBox:"0 0 20 20",xmlns:"http://www.w3.org/2000/svg",children:f.jsx("path",{fillRule:"evenodd",d:"M12.707 5.293a1 1 0 010 1.414L9.414 10l3.293 3.293a1 1 0 01-1.414 1.414l-4-4a1 1 0 010-1.414l4-4a1 1 0 011.414 0z",clipRule:"evenodd"})})]})}),f.jsx("li",{children:f.jsxs("span",{className:"flex items-center justify-center text-sm py-2 px-3 leading-tight text-gray-500 bg-white border-t border-b border-gray-300 dark:bg-gray-800 dark:border-gray-700 dark:text-gray-400",children:["Pgina ",n," de ",i]})}),f.jsx("li",{children:f.jsxs("button",{onClick:()=>r(n+1),disabled:n===i,className:"flex items-center justify-center h-full py-1.5 px-3 leading-tight text-gray-500 bg-white rounded-r-lg border border-gray-300 hover:bg-gray-100 hover:text-gray-700 dark:bg-gray-800 dark:border-gray-700 dark:text-gray-400 dark:hover:bg-gray-700 dark:hover:text-white disabled:opacity-50 disabled:cursor-not-allowed",children:[f.jsx("span",{className:"sr-only",children:"Prximo"}),f.jsx("svg",{className:"w-5 h-5","aria-hidden":"true",fill:"currentColor",viewBox:"0 0 20 20",xmlns:"http://www.w3.org/2000/svg",children:f.jsx("path",{fillRule:"evenodd",d:"M7.293 14.707a1 1 0 010-1.414L10.586 10 7.293 6.707a1 1 0 011.414-1.414l4 4a1 1 0 010 1.414l-4 4a1 1 0 01-1.414 0z",clipRule:"evenodd"})})]})})]})]})},ySe={[lr.ACTIVE]:"bg-emerald-100 text-emerald-700 border-emerald-200",[lr.IN_REPAIR]:"bg-orange-100 text-orange-700 border-orange-200",[lr.DECOMMISSIONED]:"bg-slate-100 text-slate-700 border-slate-200",[lr.IDLE]:"bg-blue-100 text-blue-700 border-blue-200"},vSe={[sr.APPROVED]:"bg-teal-100 text-teal-700 border-teal-200",[sr.AUTO_APPROVED]:"bg-sky-100 text-sky-700 border-sky-200",[sr.PENDING]:"bg-amber-100 text-amber-700 border-amber-200",[sr.REJECTED]:"bg-rose-100 text-rose-700 border-rose-200"},xSe=({status:t,type:e,title:n})=>{const r="inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium border";let i="bg-gray-100 text-gray-800 border-gray-200";return e==="asset"?i=ySe[t]||i:e==="approval"?i=vSe[t]||i:["Pago","Concludo","Entregue","Faturado","Recebido","Ativo"].includes(t)?i="bg-emerald-100 text-emerald-700 border-emerald-200":["Pendente","Aberto","Em Andamento","Planejamento"].includes(t)?i="bg-yellow-100 text-yellow-700 border-yellow-200":["Vencido","Cancelado","Atrasado","Rejeitado"].includes(t)?i="bg-red-100 text-red-700 border-red-200":["Parcial","Negociao","Proposta"].includes(t)&&(i="bg-blue-100 text-blue-700 border-blue-200"),f.jsxs("span",{className:`${r} ${i}`,title:n,children:[f.jsx("span",{className:`w-1.5 h-1.5 rounded-full mr-1.5 ${i.replace("bg-","bg-").replace("text-","bg-").replace("border-","").split(" ")[1].replace("text","bg").replace("700","500")}`}),t]})},_Se=({assets:t,onEdit:e,onAddMaintenance:n,onDelete:r,requestSort:i,sortConfig:a,pagination:s})=>{const{suppliers:l}=Zt(),c=g=>{var x;return g?((x=l.find(b=>b.id===g))==null?void 0:x.name)||"Desconhecido":"N/A"},h=g=>{var D;const x=new Date,b=new Date(Date.UTC(x.getUTCFullYear(),x.getUTCMonth(),x.getUTCDate())),C=R=>{const[j,O,q]=R.split("-").map(Number);return new Date(Date.UTC(j,O-1,q))},A=(D=g.documents)==null?void 0:D.filter(R=>R.type===bi.WARRANTY&&R.expiryDate).map(R=>{const O=C(R.expiryDate).getTime()-b.getTime(),q=Math.ceil(O/(1e3*3600*24));return{...R,diffDays:q}}).sort((R,j)=>R.diffDays-j.diffDays)[0];return A?A.diffDays<0?f.jsx(Ro,{className:"w-5 h-5 ml-2 text-red-500",title:"Garantia expirada!"}):A.diffDays<=30?f.jsx(Ro,{className:"w-5 h-5 ml-2 text-yellow-500",title:`Garantia expira em ${A.diffDays} dia(s)!`}):null:null},p=g=>!a||a.key!==g?f.jsx(bse,{className:"w-4 h-4 ml-1.5 text-gray-400 group-hover:text-gray-500"}):a.direction==="ascending"?f.jsx(wse,{className:"w-4 h-4 ml-1.5 text-primary-600"}):f.jsx(Ese,{className:"w-4 h-4 ml-1.5 text-primary-600"});return f.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-2xl shadow-soft border border-gray-100 dark:border-gray-700 overflow-hidden",children:[f.jsxs("div",{className:"p-6 border-b border-gray-100 dark:border-gray-700 flex justify-between items-center",children:[f.jsx("h3",{className:"text-lg font-bold text-gray-900 dark:text-white",children:"Inventrio de Ativos"}),f.jsxs("span",{className:"text-sm text-gray-500 bg-gray-100 dark:bg-gray-700 px-3 py-1 rounded-full",children:[s.totalItems," itens"]})]}),f.jsxs("div",{className:"overflow-x-auto",children:[f.jsxs("table",{className:"w-full text-sm text-left text-gray-500 dark:text-gray-400",children:[f.jsx("thead",{className:"text-xs text-gray-500 uppercase bg-gray-50 dark:bg-gray-700/50 dark:text-gray-400",children:f.jsxs("tr",{children:[f.jsx("th",{scope:"col",className:"px-6 py-4 font-semibold",children:f.jsxs("button",{onClick:()=>i("name"),className:"flex items-center group hover:text-gray-700",children:["Nome do Ativo ",p("name")]})}),f.jsx("th",{scope:"col",className:"px-6 py-4 font-semibold",children:"Tipo"}),f.jsx("th",{scope:"col",className:"px-6 py-4 font-semibold",children:"Fornecedor"}),f.jsx("th",{scope:"col",className:"px-6 py-4 font-semibold text-center",children:f.jsxs("button",{onClick:()=>i("healthScore"),className:"flex items-center group justify-center hover:text-gray-700",children:["Sade ",p("healthScore")]})}),f.jsx("th",{scope:"col",className:"px-6 py-4 font-semibold",children:f.jsxs("button",{onClick:()=>i("purchaseDate"),className:"flex items-center group hover:text-gray-700",children:["Compra ",p("purchaseDate")]})}),f.jsx("th",{scope:"col",className:"px-6 py-4 font-semibold text-right",children:"Valor"}),f.jsx("th",{scope:"col",className:"px-6 py-4 font-semibold text-center",children:"Status"}),f.jsx("th",{scope:"col",className:"px-6 py-4 font-semibold text-center",children:"Aes"})]})}),f.jsx("tbody",{className:"divide-y divide-gray-100 dark:divide-gray-700",children:t.map(g=>f.jsxs("tr",{className:"bg-white dark:bg-gray-800 hover:bg-gray-50 dark:hover:bg-gray-700/50 transition-colors duration-150",children:[f.jsx("th",{scope:"row",className:"px-6 py-4 font-medium text-gray-900 whitespace-nowrap dark:text-white",children:f.jsxs("div",{className:"flex items-center",children:[f.jsx("div",{className:"w-8 h-8 rounded-lg bg-primary-50 dark:bg-primary-900/30 text-primary-600 flex items-center justify-center mr-3 text-xs font-bold",children:g.name.substring(0,2).toUpperCase()}),f.jsxs("div",{children:[f.jsx("p",{className:"text-sm",children:g.name}),h(g)&&f.jsx("span",{className:"text-xs text-red-500 flex items-center mt-0.5",children:"Garantia expirando"})]})]})}),f.jsx("td",{className:"px-6 py-4",children:g.type}),f.jsx("td",{className:"px-6 py-4 text-gray-500",children:c(g.supplierId)}),f.jsx("td",{className:"px-6 py-4 text-center",children:f.jsx(pSe,{score:g.healthScore})}),f.jsx("td",{className:"px-6 py-4 text-gray-500",children:Bn(g.purchaseDate)}),f.jsx("td",{className:"px-6 py-4 text-right font-medium text-gray-900 dark:text-white",children:ht(g.purchaseValue)}),f.jsx("td",{className:"px-6 py-4 text-center",children:f.jsx(xSe,{status:g.status,type:"asset"})}),f.jsx("td",{className:"px-6 py-4 text-center",children:f.jsxs("div",{className:"flex items-center justify-center space-x-3",children:[!g.isConsumable&&f.jsx("button",{onClick:()=>n(g),className:"text-gray-400 hover:text-blue-600 transition-colors",title:"Manuteno",children:f.jsx(bSe,{className:"w-4 h-4"})}),f.jsx("button",{onClick:()=>e(g),className:"text-gray-400 hover:text-yellow-600 transition-colors",title:"Editar",children:f.jsx(wSe,{className:"w-4 h-4"})}),f.jsx("button",{onClick:()=>r(g.id),className:"text-gray-400 hover:text-red-600 transition-colors",title:"Excluir",children:f.jsx(ESe,{className:"w-4 h-4"})})]})})]},g.id))})]}),t.length===0&&s.totalItems>0&&f.jsx("div",{className:"text-center py-12 text-gray-500 dark:text-gray-400",children:"Nenhum ativo para exibir nesta pgina."}),s.totalItems===0&&f.jsx("div",{className:"text-center py-12 text-gray-500 dark:text-gray-400",children:"Nenhum ativo encontrado."})]}),f.jsx("div",{className:"p-4 border-t border-gray-100 dark:border-gray-700 bg-gray-50 dark:bg-gray-800/50",children:f.jsx(gSe,{...s})})]})},bSe=({className:t})=>f.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor",className:t,children:f.jsx("path",{fillRule:"evenodd",d:"M11.42 15.17L17.25 21A2.652 2.652 0 0021 17.25l-5.877-5.877M11.42 15.17l2.496-3.03c.317-.384.74-.626 1.208-.766M11.42 15.17l-4.655 5.653a2.548 2.548 0 11-3.586-3.586l6.837-5.63m5.108-.233c.55-.164 1.163-.188 1.743-.14a4.5 4.5 0 004.474-4.474c-.047-.58-.188-1.193-.332-1.743L14 12l-4.655 5.653a2.548 2.548 0 11-3.586-3.586l6.837-5.63m5.108-.233c-.55-.164-1.163-.188-1.743-.14a4.5 4.5 0 00-4.474-4.474c-.047-.58-.188-1.193-.332-1.743L14 12",clipRule:"evenodd"})}),wSe=({className:t})=>f.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor",className:t,children:f.jsx("path",{d:"M21.731 2.269a2.625 2.625 0 00-3.712 0l-1.157 1.157 3.712 3.712 1.157-1.157a2.625 2.625 0 000-3.712zM19.513 8.199l-3.712-3.712-12.15 12.15a5.25 5.25 0 00-1.32 2.214l-.8 2.685a.75.75 0 00.933.933l2.685-.8a5.25 5.25 0 002.214-1.32L19.513 8.2z"})}),ESe=({className:t})=>f.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor",className:t,children:f.jsx("path",{fillRule:"evenodd",d:"M16.5 4.478v.227a48.816 48.816 0 013.878.512.75.75 0 11-.49 1.478l-.56 12.57c-.04.962-.81 1.733-1.771 1.733H6.544c-.96 0-1.731-.77-1.771-1.734l-.56-12.57a48.829 48.829 0 013.878-.512V4.478c0-.69.527-1.26 1.215-1.337a48.963 48.963 0 016.196 0c.688.077 1.215.647 1.215 1.337zM15 6.75a.75.75 0 10-1.5 0v8.25a.75.75 0 101.5 0v-8.25zm-4.5 0a.75.75 0 10-1.5 0v8.25a.75.75 0 101.5 0v-8.25z",clipRule:"evenodd"})}),ph=({label:t,id:e,className:n,labelClassName:r,...i})=>f.jsxs("div",{children:[f.jsx("label",{htmlFor:e,className:r||"block mb-2 text-sm font-medium text-gray-900 dark:text-white",children:t}),f.jsx("input",{type:"date",id:e,className:n||"input-style",...i})]}),UN=t=>new Promise((e,n)=>{const r=new FileReader;r.readAsDataURL(t),r.onload=()=>{typeof r.result=="string"?e(r.result):n(new Error("Failed to convert file to base64"))},r.onerror=i=>n(i)}),FN=(t,e=1)=>t.size/1024/1024<=e,TSe=(t,e)=>{const n=document.createElement("a");n.href=t,n.download=e,document.body.appendChild(n),n.click(),document.body.removeChild(n)},SSe=({isOpen:t,onClose:e,onSave:n})=>{const{suppliers:r}=Zt(),i={name:"",type:"",location:"",purchaseDate:new Date().toISOString().split("T")[0],expirationDate:"",purchaseValue:0,status:lr.ACTIVE,documents:[],components:[],supplierId:"",isConsumable:!1,quantity:0,reorderLevel:0},[a,s]=N.useState(i),[l,c]=N.useState(!1),[h,p]=N.useState(null),[g,x]=N.useState("details"),[b,C]=N.useState([]),[A,D]=N.useState(bi.INVOICE),[R,j]=N.useState(""),[O,q]=N.useState(null),[$,H]=N.useState([]),[U,z]=N.useState(""),[B,Z]=N.useState(""),[K,J]=N.useState(1),G=X=>{const{name:ue,value:be}=X.target;if(ue==="isConsumable"){const{checked:Ce}=X.target;s(je=>({...je,isConsumable:Ce}))}else s(Ce=>({...Ce,[ue]:["purchaseValue","quantity","reorderLevel"].includes(ue)?parseFloat(be)||0:be}))},Se=async X=>{if(X.preventDefault(),!O){alert("Por favor, selecione um arquivo.");return}if(!FN(O)){alert("O arquivo deve ter no mximo 1MB.");return}try{const ue=await UN(O),be={id:`doc_${Date.now()}`,name:O.name,type:A,uploadDate:new Date().toISOString().split("T")[0],...A===bi.WARRANTY&&R&&{expiryDate:R}};C(je=>[...je,be]),q(null),D(bi.INVOICE),j("");const Ce=document.getElementById("newDocFile");Ce&&(Ce.value="")}catch(ue){console.error("Error processing file",ue),alert("Erro ao processar arquivo.")}},Oe=X=>{C(ue=>ue.filter(be=>be.id!==X))},ee=X=>{if(X.preventDefault(),!U.trim()||K<=0)return;const ue={id:`comp_${Date.now()}`,name:U,serialNumber:B,quantity:K};H(be=>[...be,ue]),z(""),Z(""),J(1)},re=X=>{H(ue=>ue.filter(be=>be.id!==X))},le=async X=>{if(X.preventDefault(),a.isConsumable){if(!a.name||!a.type||!a.location){p("Para itens de estoque, preencha Nome, Categoria e Localizao.");return}}else if(!a.name||!a.type||!a.location||a.purchaseValue<=0){p("Por favor, preencha todos os campos obrigatrios na aba 'Detalhes'."),x("details");return}c(!0),p(null);try{const ue={...a,documents:b,components:$};await n(ue),Ne()}catch(ue){console.error("Failed to save asset:",ue),p("Falha ao salvar o ativo. Tente novamente.")}finally{c(!1)}},Ne=()=>{s(i),p(null),C([]),H([]),q(null),D(bi.INVOICE),j(""),x("details"),e()},Pe=({tab:X,label:ue})=>f.jsx("button",{type:"button",onClick:()=>x(X),className:`px-4 py-2 text-sm font-medium rounded-t-lg ${g===X?"text-primary-600 border-b-2 border-primary-600":"text-gray-500 hover:text-gray-700"}`,children:ue});return t?f.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-60 z-50 flex justify-center items-center p-4",children:f.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-xl p-6 w-full max-w-2xl max-h-[90vh] flex flex-col",onClick:X=>X.stopPropagation(),children:[f.jsxs("div",{className:"flex justify-between items-center mb-4 border-b pb-3 dark:border-gray-600",children:[f.jsx("h2",{className:"text-xl font-bold text-gray-900 dark:text-white",children:"Adicionar Novo Ativo"}),f.jsx("button",{onClick:Ne,disabled:l,className:"text-gray-400 hover:text-gray-600 dark:hover:text-gray-200 text-2xl leading-none",children:""})]}),f.jsx("div",{className:"border-b border-gray-200 dark:border-gray-700",children:f.jsxs("nav",{className:"-mb-px flex space-x-6",children:[f.jsx(Pe,{tab:"details",label:"Detalhes"}),!a.isConsumable&&f.jsxs(f.Fragment,{children:[f.jsx(Pe,{tab:"documents",label:"Documentos"}),f.jsx(Pe,{tab:"components",label:"Componentes"})]})]})}),f.jsxs("form",{onSubmit:le,className:"flex-grow overflow-y-auto pt-4 space-y-4",children:[h&&f.jsx("div",{className:"bg-red-100 border border-red-400 text-red-700 px-4 py-3 rounded",role:"alert",children:h}),g==="details"&&f.jsxs("div",{className:"space-y-4",children:[f.jsxs("div",{className:"flex items-center p-3 bg-gray-50 dark:bg-gray-700/50 rounded-md",children:[f.jsx("input",{type:"checkbox",name:"isConsumable",id:"isConsumable",checked:a.isConsumable,onChange:G,className:"h-4 w-4 rounded border-gray-300 text-primary-600 focus:ring-primary-500"}),f.jsx("label",{htmlFor:"isConsumable",className:"ml-3 block text-sm font-medium text-gray-900 dark:text-white",children:"Este  um item consumvel (gerenciado por estoque)"})]}),f.jsxs("div",{children:[f.jsx("label",{htmlFor:"name",className:"label-style",children:a.isConsumable?"Nome do Item":"Nome do Ativo"}),f.jsx("input",{type:"text",name:"name",id:"name",value:a.name,onChange:G,required:!0,className:"input-style",placeholder:a.isConsumable?"Ex: Toner HP 85A":"Ex: Laptop Dell XPS 15"})]}),f.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[f.jsxs("div",{children:[f.jsx("label",{htmlFor:"type",className:"label-style",children:a.isConsumable?"Categoria":"Tipo"}),f.jsx("input",{type:"text",name:"type",id:"type",value:a.type,onChange:G,required:!0,className:"input-style",placeholder:a.isConsumable?"Ex: Suprimentos":"Ex: Equipamento de TI"})]}),f.jsxs("div",{children:[f.jsx("label",{htmlFor:"location",className:"label-style",children:"Localizao"}),f.jsx("input",{type:"text",name:"location",id:"location",value:a.location,onChange:G,required:!0,className:"input-style",placeholder:"Ex: Escritrio 101"})]})]}),a.isConsumable?f.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[f.jsxs("div",{children:[f.jsx("label",{htmlFor:"quantity",className:"label-style",children:"Qtd. Inicial"}),f.jsx("input",{type:"number",name:"quantity",value:a.quantity,onChange:G,className:"input-style",min:"0"})]}),f.jsxs("div",{children:[f.jsx("label",{htmlFor:"reorderLevel",className:"label-style",children:"Nvel Mnimo"}),f.jsx("input",{type:"number",name:"reorderLevel",value:a.reorderLevel,onChange:G,className:"input-style",min:"0"})]})]}):f.jsxs(f.Fragment,{children:[f.jsxs("div",{children:[f.jsx("label",{htmlFor:"supplierId",className:"label-style",children:"Fornecedor / Locador"}),f.jsxs("select",{name:"supplierId",id:"supplierId",value:a.supplierId,onChange:G,className:"input-style",children:[f.jsx("option",{value:"",children:"Nenhum / Compra Prpria"}),r.map(X=>f.jsx("option",{value:X.id,children:X.name},X.id))]})]}),f.jsxs("div",{children:[f.jsx("label",{htmlFor:"purchaseValue",className:"label-style",children:"Valor de Compra (R$)"}),f.jsx("input",{type:"number",name:"purchaseValue",id:"purchaseValue",value:a.purchaseValue,onChange:G,required:!0,min:"0.01",step:"0.01",className:"input-style",placeholder:"0,00"})]}),f.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[f.jsx(ph,{label:"Data da Compra",id:"purchaseDate",name:"purchaseDate",value:a.purchaseDate,onChange:G,required:!0}),f.jsx(ph,{label:"Data de Expirao",id:"expirationDate",name:"expirationDate",value:a.expirationDate,onChange:G,required:!0})]}),f.jsxs("div",{children:[f.jsx("label",{htmlFor:"status",className:"label-style",children:"Status"}),f.jsx("select",{name:"status",id:"status",value:a.status,onChange:G,required:!0,className:"input-style",children:Object.values(lr).map(X=>f.jsx("option",{value:X,children:X},X))})]})]})]}),g==="documents"&&f.jsxs("div",{className:"space-y-4",children:[f.jsx("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white",children:"Documentos e Garantias"}),b.length>0?f.jsx("ul",{className:"space-y-3 mb-4 max-h-48 overflow-y-auto p-2 border rounded-md dark:border-gray-600",children:b.map(X=>f.jsxs("li",{className:"text-sm p-3 bg-gray-50 dark:bg-gray-700/50 rounded-md border dark:border-gray-600",children:[f.jsxs("div",{className:"flex justify-between items-start mb-2",children:[f.jsx("span",{className:"font-medium truncate flex-grow",children:X.name}),f.jsx("button",{type:"button",onClick:()=>Oe(X.id),className:"text-red-500 hover:text-red-700 font-bold ml-2 text-lg leading-none flex-shrink-0",children:""})]}),f.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-2",children:[f.jsxs("div",{children:[f.jsx("span",{className:"text-xs text-gray-500",children:"Tipo:"})," ",X.type]}),X.expiryDate&&f.jsxs("div",{children:[f.jsx("span",{className:"text-xs text-gray-500",children:"Expira:"})," ",X.expiryDate]})]})]},X.id))}):f.jsx("p",{className:"text-sm text-center p-4 bg-gray-50 dark:bg-gray-700/50 rounded-md",children:"Nenhum documento adicionado."}),f.jsx("div",{className:"bg-gray-100 dark:bg-gray-700/50 p-3 rounded-lg",children:f.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-3 items-end",children:[f.jsxs("div",{className:"sm:col-span-2",children:[f.jsx("label",{htmlFor:"newDocFile",className:"label-style-sm",children:"Arquivo (Max 1MB)"}),f.jsx("input",{type:"file",id:"newDocFile",onChange:X=>q(X.target.files?X.target.files[0]:null),className:"input-style-sm file-input"})]}),f.jsxs("div",{children:[f.jsx("label",{htmlFor:"newDocType",className:"label-style-sm",children:"Tipo"}),f.jsx("select",{id:"newDocType",value:A,onChange:X=>D(X.target.value),className:"input-style-sm",children:Object.values(bi).map(X=>f.jsx("option",{value:X,children:X},X))})]}),A===bi.WARRANTY&&f.jsxs("div",{children:[f.jsx("label",{htmlFor:"newDocExpiry",className:"label-style-sm",children:"Expirao"}),f.jsx("input",{type:"date",id:"newDocExpiry",value:R,onChange:X=>j(X.target.value),className:"input-style-sm",required:!0})]}),f.jsx("div",{className:A===bi.WARRANTY?"sm:col-span-2":"",children:f.jsx("button",{type:"button",onClick:Se,className:"w-full btn-primary btn-sm",children:"Adicionar Documento"})})]})})]}),g==="components"&&f.jsxs("div",{className:"space-y-4",children:[f.jsx("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white",children:"Componentes"}),$.length>0?f.jsx("ul",{className:"space-y-3 mb-4 max-h-48 overflow-y-auto p-2 border rounded-md dark:border-gray-600",children:$.map(X=>f.jsxs("li",{className:"text-sm p-3 bg-gray-50 dark:bg-gray-700/50 rounded-md border dark:border-gray-600",children:[f.jsx("div",{className:"flex justify-end",children:f.jsx("button",{type:"button",onClick:()=>re(X.id),className:"text-red-500 hover:text-red-700 font-bold text-lg -mt-2 -mr-1",children:""})}),f.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-5 gap-2 items-center",children:[f.jsx("div",{className:"sm:col-span-3",children:f.jsx("strong",{children:X.name})}),f.jsxs("div",{className:"sm:col-span-2 text-right",children:["Qtd: ",X.quantity]})]})]},X.id))}):f.jsx("p",{className:"text-sm text-center p-4 bg-gray-50 dark:bg-gray-700/50 rounded-md",children:"Nenhum componente adicionado."}),f.jsx("div",{className:"bg-gray-100 dark:bg-gray-700/50 p-3 rounded-lg",children:f.jsxs("div",{className:"space-y-3",children:[f.jsxs("div",{className:"grid grid-cols-3 gap-2 items-end",children:[f.jsxs("div",{children:[f.jsx("label",{className:"label-style-sm",children:"Nome"}),f.jsx("input",{type:"text",value:U,onChange:X=>z(X.target.value),className:"input-style-sm",required:!0})]}),f.jsxs("div",{children:[f.jsx("label",{className:"label-style-sm",children:"N de Srie"}),f.jsx("input",{type:"text",value:B,onChange:X=>Z(X.target.value),className:"input-style-sm"})]}),f.jsxs("div",{children:[f.jsx("label",{className:"label-style-sm",children:"Qtd."}),f.jsx("input",{type:"number",value:K,onChange:X=>J(parseInt(X.target.value)||1),className:"input-style-sm",min:"1",required:!0})]})]}),f.jsx("button",{type:"button",onClick:ee,className:"w-full btn-primary btn-sm",children:"Adicionar Componente"})]})})]}),f.jsxs("div",{className:"flex justify-end gap-4 pt-4 mt-auto border-t dark:border-gray-600",children:[f.jsx("button",{type:"button",onClick:Ne,disabled:l,className:"px-5 py-2.5 text-sm font-medium text-gray-700 bg-gray-100 rounded-lg hover:bg-gray-200 dark:bg-gray-600 dark:text-gray-200 dark:hover:bg-gray-500",children:"Cancelar"}),f.jsxs("button",{type:"submit",disabled:l,className:"px-5 py-2.5 text-sm font-medium text-white bg-primary-600 rounded-lg hover:bg-primary-700 focus:ring-4 focus:ring-primary-300 disabled:opacity-50 flex items-center",children:[l&&f.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-white mr-2"}),l?"Salvando...":"Salvar Ativo"]})]})]}),f.jsx("style",{children:`
          .label-style { display: block; margin-bottom: 0.5rem; font-size: 0.875rem; font-weight: 500; color: #111827; } .dark .label-style { color: white; }
          .label-style-sm { display: block; margin-bottom: 0.25rem; font-size: 0.75rem; font-weight: 500; color: #374151; } .dark .label-style-sm { color: #D1D5DB; }
          .input-style { background-color: #F9FAFB; border: 1px solid #D1D5DB; color: #111827; font-size: 0.875rem; border-radius: 0.5rem; display: block; width: 100%; padding: 0.625rem; } .dark .input-style { background-color: #374151; border-color: #4B5563; color: white; }
          .input-style-sm { background-color: #FFF; border: 1px solid #D1D5DB; color: #111827; font-size: 0.875rem; border-radius: 0.5rem; display: block; width: 100%; padding: 0.5rem; } .dark .input-style-sm { background-color: #4B5563; border-color: #6B7280; color: white; }
          .file-input::file-selector-button{font-semibold;background-color:#eef2ff;color:#4338ca;border:0;padding:.25rem .5rem;border-radius:.25rem;cursor:pointer;margin-right:.5rem;font-size:0.75rem} .dark .file-input::file-selector-button{background-color:#312e81;color:#c7d2fe;}
          .btn-primary { background-color: rgb(var(--color-primary-600)); } .btn-primary:hover { background-color: rgb(var(--color-primary-700)); }
          .btn-sm{ padding: 0.25rem 0.75rem; font-size: 0.875rem; }
        `})]})}):null},ASe=({isOpen:t,onClose:e,onSave:n,asset:r})=>{const{suppliers:i}=Zt(),[a,s]=N.useState(r),[l,c]=N.useState(!1),[h,p]=N.useState(null),[g,x]=N.useState("details"),[b,C]=N.useState(bi.INVOICE),[A,D]=N.useState(""),[R,j]=N.useState(null),[O,q]=N.useState(""),[$,H]=N.useState(""),[U,z]=N.useState(1);N.useEffect(()=>{r&&s({...r,documents:r.documents||[],components:r.components||[]})},[r]);const B=re=>{const{name:le,value:Ne}=re.target;s(Pe=>({...Pe,[le]:le==="purchaseValue"?parseFloat(Ne)||0:Ne}))},Z=re=>{if(re.preventDefault(),!R)return;const le={id:`doc_${Date.now()}`,name:R.name,type:b,uploadDate:new Date().toISOString().split("T")[0],...b===bi.WARRANTY&&A&&{expiryDate:A}};s(Pe=>({...Pe,documents:[...Pe.documents||[],le]})),j(null),C(bi.INVOICE),D("");const Ne=document.getElementById("editNewDocFile");Ne&&(Ne.value="")},K=re=>{s(le=>{var Ne;return{...le,documents:(Ne=le.documents)==null?void 0:Ne.filter(Pe=>Pe.id!==re)}})},J=re=>{if(re.preventDefault(),!O.trim()||U<=0)return;const le={id:`comp_${Date.now()}`,name:O,serialNumber:$,quantity:U};s(Ne=>({...Ne,components:[...Ne.components||[],le]})),q(""),H(""),z(1)},G=re=>{s(le=>{var Ne;return{...le,components:(Ne=le.components)==null?void 0:Ne.filter(Pe=>Pe.id!==re)}})},Se=async re=>{if(re.preventDefault(),!a.name||!a.type||!a.location||a.purchaseValue<=0||!a.expirationDate){p("Por favor, preencha todos os campos obrigatrios na aba 'Detalhes'."),x("details");return}c(!0),p(null);try{await n(a),e()}catch{p("Falha ao atualizar o ativo.")}finally{c(!1)}},Oe=()=>{const re=a.type.toLowerCase();return re.includes("ti")||re.includes("eletrnico")?f.jsxs("div",{children:[f.jsx("label",{children:"Nmero de Srie"}),f.jsx("input",{type:"text",name:"serialNumber",value:a.serialNumber||"",onChange:B,className:"input-style"})]}):re.includes("veculo")?f.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[f.jsxs("div",{children:[f.jsx("label",{children:"Placa"}),f.jsx("input",{type:"text",name:"vehiclePlate",value:a.vehiclePlate||"",onChange:B,className:"input-style"})]}),f.jsxs("div",{children:[f.jsx("label",{children:"RENAVAM"}),f.jsx("input",{type:"text",name:"vehicleRenavam",value:a.vehicleRenavam||"",onChange:B,className:"input-style"})]})]}):null},ee=({tab:re,label:le})=>f.jsx("button",{type:"button",onClick:()=>x(re),className:`px-4 py-2 text-sm font-medium rounded-t-lg ${g===re?"text-primary-600 border-b-2 border-primary-600":"text-gray-500 hover:text-gray-700"}`,children:le});return t?f.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-60 z-50 flex justify-center items-center p-4",children:f.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-xl p-6 w-full max-w-2xl max-h-[90vh] flex flex-col",onClick:re=>re.stopPropagation(),children:[f.jsxs("div",{className:"flex justify-between items-center mb-4 border-b pb-3",children:[f.jsx("h2",{className:"text-xl font-bold",children:"Editar Ativo"}),f.jsx("button",{onClick:e,disabled:l,children:""})]}),f.jsx("div",{className:"border-b border-gray-200 dark:border-gray-700",children:f.jsxs("nav",{className:"-mb-px flex space-x-6",children:[f.jsx(ee,{tab:"details",label:"Detalhes"}),f.jsx(ee,{tab:"documents",label:"Documentos"}),f.jsx(ee,{tab:"components",label:"Componentes"})]})}),f.jsxs("form",{onSubmit:Se,className:"flex-grow overflow-y-auto pt-4 space-y-4",children:[h&&f.jsx("div",{className:"bg-red-100 text-red-700 p-3 rounded",children:h}),g==="details"&&f.jsxs("div",{className:"space-y-4",children:[f.jsxs("div",{children:[f.jsx("label",{children:"Nome"}),f.jsx("input",{type:"text",name:"name",value:a.name,onChange:B,required:!0,className:"input-style"})]}),f.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[f.jsxs("div",{children:[f.jsx("label",{children:"Categoria"}),f.jsx("input",{type:"text",name:"type",value:a.type,onChange:B,required:!0,className:"input-style"})]}),f.jsxs("div",{children:[f.jsx("label",{children:"Localizao"}),f.jsx("input",{type:"text",name:"location",value:a.location,onChange:B,required:!0,className:"input-style"})]})]}),f.jsxs("div",{children:[f.jsx("label",{htmlFor:"supplierId",children:"Fornecedor / Locador"}),f.jsxs("select",{name:"supplierId",id:"supplierId",value:a.supplierId||"",onChange:B,className:"input-style",children:[f.jsx("option",{value:"",children:"Nenhum / Compra Prpria"}),i.map(re=>f.jsx("option",{value:re.id,children:re.name},re.id))]})]}),Oe(),f.jsxs("div",{children:[f.jsx("label",{children:"Valor de Compra (R$)"}),f.jsx("input",{type:"number",name:"purchaseValue",value:a.purchaseValue,onChange:B,required:!0,min:"0.01",step:"0.01",className:"input-style"})]}),f.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[f.jsx(ph,{label:"Data da Compra",id:"purchaseDate",name:"purchaseDate",value:a.purchaseDate,onChange:B,required:!0}),f.jsx(ph,{label:"Data de Expirao",id:"expirationDate",name:"expirationDate",value:a.expirationDate,onChange:B,required:!0})]}),f.jsx("select",{name:"status",value:a.status,onChange:B,required:!0,className:"input-style",children:Object.values(lr).map(re=>f.jsx("option",{value:re,children:re},re))})]}),g==="documents"&&f.jsxs("div",{className:"space-y-4",children:[f.jsx("h3",{className:"text-lg font-semibold",children:"Documentos e Garantias"}),a.documents&&a.documents.length>0?f.jsx("ul",{className:"space-y-2",children:a.documents.map(re=>f.jsxs("li",{className:"flex justify-between items-center text-sm p-2 bg-gray-50 rounded",children:[f.jsxs("span",{children:[re.name," (",re.type,")"]}),f.jsx("button",{type:"button",onClick:()=>K(re.id),children:""})]},re.id))}):f.jsx("p",{className:"text-sm text-center",children:"Nenhum documento."}),f.jsx("div",{className:"bg-gray-100 p-3 rounded-lg",children:f.jsxs("form",{onSubmit:Z,className:"grid grid-cols-2 gap-3 items-end",children:[f.jsxs("div",{className:"col-span-2",children:[f.jsx("label",{className:"text-xs",children:"Arquivo"}),f.jsx("input",{type:"file",id:"editNewDocFile",onChange:re=>j(re.target.files?re.target.files[0]:null),className:"input-style-sm file-input"})]}),f.jsxs("div",{children:[f.jsx("label",{className:"text-xs",children:"Tipo"}),f.jsx("select",{value:b,onChange:re=>C(re.target.value),className:"input-style-sm",children:Object.values(bi).map(re=>f.jsx("option",{value:re,children:re},re))})]}),b===bi.WARRANTY&&f.jsx(ph,{label:"Expirao",id:"editNewDocExpiry",value:A,onChange:re=>D(re.target.value),className:"input-style-sm",labelClassName:"text-xs",required:!0}),f.jsx("div",{className:b===bi.WARRANTY?"col-span-2":"",children:f.jsx("button",{type:"submit",className:"w-full btn-primary btn-sm",children:"Adicionar Documento"})})]})})]}),g==="components"&&f.jsxs("div",{className:"space-y-4",children:[f.jsx("h3",{className:"text-lg font-semibold",children:"Componentes"}),a.components&&a.components.length>0?f.jsx("ul",{className:"space-y-2",children:a.components.map(re=>f.jsxs("li",{className:"flex justify-between items-center text-sm p-2 bg-gray-50 rounded",children:[f.jsxs("span",{children:[re.quantity,"x ",re.name," ",re.serialNumber&&`(S/N: ${re.serialNumber})`]}),f.jsx("button",{type:"button",onClick:()=>G(re.id),children:""})]},re.id))}):f.jsx("p",{className:"text-sm text-center",children:"Nenhum componente."}),f.jsx("div",{className:"bg-gray-100 p-3 rounded-lg",children:f.jsxs("form",{onSubmit:J,className:"space-y-3",children:[f.jsxs("div",{className:"grid grid-cols-3 gap-2 items-end",children:[f.jsxs("div",{children:[f.jsx("label",{className:"text-xs",children:"Nome"}),f.jsx("input",{type:"text",value:O,onChange:re=>q(re.target.value),className:"input-style-sm",required:!0})]}),f.jsxs("div",{children:[f.jsx("label",{className:"text-xs",children:"N de Srie"}),f.jsx("input",{type:"text",value:$,onChange:re=>H(re.target.value),className:"input-style-sm"})]}),f.jsxs("div",{children:[f.jsx("label",{className:"text-xs",children:"Qtd."}),f.jsx("input",{type:"number",value:U,onChange:re=>z(parseInt(re.target.value)||1),className:"input-style-sm",min:"1",required:!0})]})]}),f.jsx("button",{type:"submit",className:"w-full btn-primary btn-sm",children:"Adicionar Componente"})]})})]}),f.jsxs("div",{className:"flex justify-end gap-4 pt-4 mt-auto border-t",children:[f.jsx("button",{type:"button",onClick:e,disabled:l,className:"btn-secondary",children:"Cancelar"}),f.jsx("button",{type:"submit",disabled:l,className:"btn-primary",children:l?"Salvando...":"Salvar Alteraes"})]})]}),f.jsx("style",{children:"label{display:block;margin-bottom:.5rem;font-size:.875rem;font-weight:500;}.input-style{width:100%;padding:.625rem;border-radius:.5rem;border:1px solid #D1D5DB;}.input-style-sm{width:100%;padding:.5rem;border-radius:.5rem;font-size:.875rem;border:1px solid #D1D5DB;}.file-input::file-selector-button{font-semibold;background-color:#eef2ff;color:#4338ca;border:0;padding:.5rem;border-radius:.25rem;cursor:pointer;margin-right:1rem;}.dark .file-input::file-selector-button{background-color:#312e81;color:#c7d2fe;}.btn-primary{background-color:rgb(var(--color-primary-600));color:#fff;}.btn-secondary{background-color:#e5e7eb;color:#1f2937;}.dark .btn-secondary{background-color:#4b5563;color:#e5e7eb;}button{padding:.5rem 1rem;border-radius:.5rem;font-weight:500;}button:disabled{opacity:.5;}.btn-sm{padding:.25rem .75rem;}"})]})}):null},CSe=({isOpen:t,onClose:e,onSave:n,assetId:r})=>{const{suppliers:i}=Zt(),a={description:"",cost:0,date:new Date().toISOString().split("T")[0],supplierId:""},[s,l]=N.useState(a),[c,h]=N.useState(!1),[p,g]=N.useState(null),x=A=>{const{name:D,value:R}=A.target;l(j=>({...j,[D]:D==="cost"?parseFloat(R)||0:R}))},b=async A=>{if(A.preventDefault(),!s.description||s.cost<=0){g("Por favor, preencha a descrio e um custo vlido.");return}h(!0),g(null);try{await n({...s,assetId:r}),C()}catch(D){console.error("Failed to save maintenance record:",D),g("Falha ao salvar o registro. Tente novamente.")}finally{h(!1)}},C=()=>{l(a),g(null),e()};return t?f.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-60 z-50 flex justify-center items-center p-4",children:f.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-xl p-6 w-full max-w-lg",onClick:A=>A.stopPropagation(),children:[f.jsxs("div",{className:"flex justify-between items-center mb-6 border-b pb-3 dark:border-gray-600",children:[f.jsx("h2",{className:"text-xl font-bold text-gray-900 dark:text-white",children:"Adicionar Registro de Manuteno"}),f.jsx("button",{onClick:C,disabled:c,className:"text-gray-400 hover:text-gray-600 dark:hover:text-gray-200 text-2xl leading-none",children:""})]}),f.jsxs("form",{onSubmit:b,className:"space-y-4",children:[p&&f.jsx("div",{className:"bg-red-100 border border-red-400 text-red-700 px-4 py-3 rounded",role:"alert",children:p}),f.jsxs("div",{children:[f.jsx("label",{htmlFor:"description",className:"block mb-2 text-sm font-medium text-gray-900 dark:text-white",children:"Descrio do Servio"}),f.jsx("input",{type:"text",name:"description",id:"description",value:s.description,onChange:x,required:!0,className:"input-style",placeholder:"Ex: Troca de bateria"})]}),f.jsxs("div",{children:[f.jsx("label",{htmlFor:"supplierId",className:"block mb-2 text-sm font-medium text-gray-900 dark:text-white",children:"Fornecedor"}),f.jsxs("select",{name:"supplierId",id:"supplierId",value:s.supplierId,onChange:x,className:"input-style",children:[f.jsx("option",{value:"",children:"Selecione um fornecedor (opcional)"}),i.map(A=>f.jsx("option",{value:A.id,children:A.name},A.id))]})]}),f.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[f.jsxs("div",{children:[f.jsx("label",{htmlFor:"cost",className:"block mb-2 text-sm font-medium text-gray-900 dark:text-white",children:"Custo (R$)"}),f.jsx("input",{type:"number",name:"cost",id:"cost",value:s.cost,onChange:x,required:!0,min:"0.01",step:"0.01",className:"input-style",placeholder:"0,00"})]}),f.jsx(ph,{label:"Data do Servio",id:"date",name:"date",value:s.date,onChange:x,required:!0})]}),f.jsxs("div",{children:[f.jsx("label",{htmlFor:"images",className:"block mb-2 text-sm font-medium text-gray-900 dark:text-white",children:"Anexar Imagens da Inspeo"}),f.jsx("input",{type:"file",name:"images",id:"images",multiple:!0,className:"input-style file:mr-4 file:py-2 file:px-4 file:rounded-full file:border-0 file:text-sm file:font-semibold file:bg-primary-50 file:text-primary-700 hover:file:bg-primary-100"}),f.jsx("p",{className:"mt-1 text-xs text-gray-500 dark:text-gray-400",children:"O upload de arquivos no est implementado nesta demonstrao."})]}),f.jsxs("div",{className:"flex justify-end gap-4 pt-4 mt-6 border-t dark:border-gray-600",children:[f.jsx("button",{type:"button",onClick:C,disabled:c,className:"px-5 py-2.5 text-sm font-medium text-gray-700 bg-gray-100 rounded-lg hover:bg-gray-200 dark:bg-gray-600 dark:text-gray-200 dark:hover:bg-gray-500",children:"Cancelar"}),f.jsxs("button",{type:"submit",disabled:c,className:"px-5 py-2.5 text-sm font-medium text-white bg-primary-600 rounded-lg hover:bg-primary-700 focus:ring-4 focus:ring-primary-300 disabled:opacity-50 flex items-center",children:[c&&f.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-white mr-2"}),c?"Salvando...":"Salvar Registro"]})]})]}),f.jsx("style",{children:`
          .input-style { background-color: #F9FAFB; border: 1px solid #D1D5DB; color: #111827; font-size: 0.875rem; border-radius: 0.5rem; display: block; width: 100%; padding: 0.625rem; }
          .dark .input-style { background-color: #374151; border-color: #4B5563; color: white; }
        `})]})}):null},ym=({isOpen:t,onClose:e,onConfirm:n,title:r,message:i})=>t?f.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-60 z-50 flex justify-center items-center p-4","aria-modal":"true",role:"dialog",children:f.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-xl p-6 w-full max-w-md",onClick:a=>a.stopPropagation(),children:[f.jsx("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white mb-4",children:r}),f.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-300 mb-6",children:i}),f.jsxs("div",{className:"flex justify-end gap-4",children:[f.jsx("button",{onClick:e,className:"px-4 py-2 text-sm font-medium text-gray-700 bg-gray-100 rounded-lg hover:bg-gray-200 dark:bg-gray-600 dark:text-gray-200 dark:hover:bg-gray-500",children:"Cancelar"}),f.jsx("button",{onClick:n,className:"px-4 py-2 text-sm font-medium text-white bg-red-600 rounded-lg hover:bg-red-700 focus:ring-4 focus:ring-red-300 dark:focus:ring-red-800",children:"Confirmar"})]})]})}):null;function pd(t){if(t==null)return"";const e=String(t);return/[",\n\r]/.test(e)?`"${e.replace(/"/g,'""')}"`:e}function x8(t,e){let n=`${pd(e.companyName)}
`;return e.slogan&&(n+=`${pd(e.slogan)}
`),n+=`${pd(t)}
`,n+=`${pd(`Exportado em: ${new Date().toLocaleString("pt-BR")}`)}
`,e.institutionalMessage&&(n+=`${pd(e.institutionalMessage)}
`),n+=`
`,n}function ISe(t,e){const n=x8("Relatrio de Ativos",e),r=["ID","Nome","Tipo","Localizacao","Data de Compra","Data de Expiracao","Valor de Compra","Status","Score de Saude","Custo Total de Manutencao"],i=t.map(a=>{const s=a.maintenanceHistory.reduce((l,c)=>l+c.cost,0);return[a.id,a.name,a.type,a.location,a.purchaseDate,a.expirationDate,a.purchaseValue,a.status,a.healthScore,s].map(pd).join(",")});return n+[r.join(","),...i].join(`
`)}const NSe=(t,e)=>{if(!t||t.length===0){alert("Nenhum ativo para exportar.");return}const n=ISe(t,e),r=new Blob([`\uFEFF${n}`],{type:"text/csv;charset=utf-8;"}),i=document.createElement("a"),a=URL.createObjectURL(r),s=(e.companyName||"sga").replace(/[^a-z0-9]/gi,"_").toLowerCase();i.setAttribute("href",a),i.setAttribute("download",`${s}_export_ativos.csv`),i.style.visibility="hidden",document.body.appendChild(i),i.click(),document.body.removeChild(i),URL.revokeObjectURL(a)};function PSe(t,e){const n=x8("Relatrio de Estoque",e),r=["ID","Nome do Item","SKU","Quantidade","Localizao","Limite Mnimo","ltima Atualizao","N do Lote","Data de Validade"],i=t.map(a=>[a.id,a.name,a.sku,a.quantity,a.location,a.threshold,new Date(a.lastUpdated).toLocaleString("pt-BR"),a.lotNumber||"",a.expiryDate||""].map(pd).join(","));return n+[r.join(","),...i].join(`
`)}const DSe=(t,e)=>{if(!t||t.length===0){alert("Nenhum item de estoque para exportar.");return}const n=PSe(t,e),r=new Blob([`\uFEFF${n}`],{type:"text/csv;charset=utf-8;"}),i=document.createElement("a"),a=URL.createObjectURL(r),s=(e.companyName||"sga").replace(/[^a-z0-9]/gi,"_").toLowerCase();i.setAttribute("href",a),i.setAttribute("download",`${s}_export_estoque.csv`),i.style.visibility="hidden",document.body.appendChild(i),i.click(),document.body.removeChild(i),URL.revokeObjectURL(a)},RSe=t=>{let e=100;const n=new Date(t.purchaseDate),i=new Date(t.expirationDate).getTime()-n.getTime(),a=new Date().getTime()-n.getTime();if(i>0&&a>0){const l=a/i;e-=l*30}switch(t.status){case lr.IN_REPAIR:e-=40;break;case lr.IDLE:e-=10;break;case lr.DECOMMISSIONED:return 0}const s=t.maintenanceHistory.reduce((l,c)=>l+c.cost,0)/t.purchaseValue;return t.purchaseValue>0&&(e-=Math.min(s*50,30)),Math.max(0,Math.round(e))};function _8(t,e){const n=N.useRef(e);N.useEffect(function(){e!==n.current&&t.attributionControl!=null&&(n.current!=null&&t.attributionControl.removeAttribution(n.current),e!=null&&t.attributionControl.addAttribution(e)),n.current=e},[t,e])}const kSe=1;function MSe(t){return Object.freeze({__version:kSe,map:t})}function OSe(t,e){return Object.freeze({...t,...e})}const BN=N.createContext(null);function b8(){const t=N.use(BN);if(t==null)throw new Error("No context provided: useLeafletContext() can only be used in a descendant of <MapContainer>");return t}function jSe(t){function e(n,r){const{instance:i,context:a}=t(n).current;N.useImperativeHandle(r,()=>i);const{children:s}=n;return s==null?null:gh.createElement(BN,{value:a},s)}return N.forwardRef(e)}function LSe(t){function e(n,r){const[i,a]=N.useState(!1),{instance:s}=t(n,a).current;N.useImperativeHandle(r,()=>s),N.useEffect(function(){i&&s.update()},[s,i,n.children]);const l=s._contentNode;return l?M_.createPortal(n.children,l):null}return N.forwardRef(e)}function VSe(t){function e(n,r){const{instance:i}=t(n).current;return N.useImperativeHandle(r,()=>i),null}return N.forwardRef(e)}function w8(t,e){const n=N.useRef(void 0);N.useEffect(function(){return e!=null&&t.instance.on(e),n.current=e,function(){n.current!=null&&t.instance.off(n.current),n.current=null}},[t,e])}function zN(t,e){const n=t.pane??e.pane;return n?{...t,pane:n}:t}function USe(t,e){return function(r,i){const a=b8(),s=t(zN(r,a),a);return _8(a.map,r.attribution),w8(s.current,r.eventHandlers),e(s.current,a,r,i),s}}var Tp={exports:{}};/* @preserve
 * Leaflet 1.9.4, a JS library for interactive maps. https://leafletjs.com
 * (c) 2010-2023 Vladimir Agafonkin, (c) 2010-2011 CloudMade
 */var FSe=Tp.exports,Z4;function BSe(){return Z4||(Z4=1,(function(t,e){(function(n,r){r(e)})(FSe,(function(n){var r="1.9.4";function i(d){var y,T,P,M;for(T=1,P=arguments.length;T<P;T++){M=arguments[T];for(y in M)d[y]=M[y]}return d}var a=Object.create||(function(){function d(){}return function(y){return d.prototype=y,new d}})();function s(d,y){var T=Array.prototype.slice;if(d.bind)return d.bind.apply(d,T.call(arguments,1));var P=T.call(arguments,2);return function(){return d.apply(y,P.length?P.concat(T.call(arguments)):arguments)}}var l=0;function c(d){return"_leaflet_id"in d||(d._leaflet_id=++l),d._leaflet_id}function h(d,y,T){var P,M,W,te;return te=function(){P=!1,M&&(W.apply(T,M),M=!1)},W=function(){P?M=arguments:(d.apply(T,arguments),setTimeout(te,y),P=!0)},W}function p(d,y,T){var P=y[1],M=y[0],W=P-M;return d===P&&T?d:((d-M)%W+W)%W+M}function g(){return!1}function x(d,y){if(y===!1)return d;var T=Math.pow(10,y===void 0?6:y);return Math.round(d*T)/T}function b(d){return d.trim?d.trim():d.replace(/^\s+|\s+$/g,"")}function C(d){return b(d).split(/\s+/)}function A(d,y){Object.prototype.hasOwnProperty.call(d,"options")||(d.options=d.options?a(d.options):{});for(var T in y)d.options[T]=y[T];return d.options}function D(d,y,T){var P=[];for(var M in d)P.push(encodeURIComponent(T?M.toUpperCase():M)+"="+encodeURIComponent(d[M]));return(!y||y.indexOf("?")===-1?"?":"&")+P.join("&")}var R=/\{ *([\w_ -]+) *\}/g;function j(d,y){return d.replace(R,function(T,P){var M=y[P];if(M===void 0)throw new Error("No value provided for variable "+T);return typeof M=="function"&&(M=M(y)),M})}var O=Array.isArray||function(d){return Object.prototype.toString.call(d)==="[object Array]"};function q(d,y){for(var T=0;T<d.length;T++)if(d[T]===y)return T;return-1}var $="data:image/gif;base64,R0lGODlhAQABAAD/ACwAAAAAAQABAAACADs=";function H(d){return window["webkit"+d]||window["moz"+d]||window["ms"+d]}var U=0;function z(d){var y=+new Date,T=Math.max(0,16-(y-U));return U=y+T,window.setTimeout(d,T)}var B=window.requestAnimationFrame||H("RequestAnimationFrame")||z,Z=window.cancelAnimationFrame||H("CancelAnimationFrame")||H("CancelRequestAnimationFrame")||function(d){window.clearTimeout(d)};function K(d,y,T){if(T&&B===z)d.call(y);else return B.call(window,s(d,y))}function J(d){d&&Z.call(window,d)}var G={__proto__:null,extend:i,create:a,bind:s,get lastId(){return l},stamp:c,throttle:h,wrapNum:p,falseFn:g,formatNum:x,trim:b,splitWords:C,setOptions:A,getParamString:D,template:j,isArray:O,indexOf:q,emptyImageUrl:$,requestFn:B,cancelFn:Z,requestAnimFrame:K,cancelAnimFrame:J};function Se(){}Se.extend=function(d){var y=function(){A(this),this.initialize&&this.initialize.apply(this,arguments),this.callInitHooks()},T=y.__super__=this.prototype,P=a(T);P.constructor=y,y.prototype=P;for(var M in this)Object.prototype.hasOwnProperty.call(this,M)&&M!=="prototype"&&M!=="__super__"&&(y[M]=this[M]);return d.statics&&i(y,d.statics),d.includes&&(Oe(d.includes),i.apply(null,[P].concat(d.includes))),i(P,d),delete P.statics,delete P.includes,P.options&&(P.options=T.options?a(T.options):{},i(P.options,d.options)),P._initHooks=[],P.callInitHooks=function(){if(!this._initHooksCalled){T.callInitHooks&&T.callInitHooks.call(this),this._initHooksCalled=!0;for(var W=0,te=P._initHooks.length;W<te;W++)P._initHooks[W].call(this)}},y},Se.include=function(d){var y=this.prototype.options;return i(this.prototype,d),d.options&&(this.prototype.options=y,this.mergeOptions(d.options)),this},Se.mergeOptions=function(d){return i(this.prototype.options,d),this},Se.addInitHook=function(d){var y=Array.prototype.slice.call(arguments,1),T=typeof d=="function"?d:function(){this[d].apply(this,y)};return this.prototype._initHooks=this.prototype._initHooks||[],this.prototype._initHooks.push(T),this};function Oe(d){if(!(typeof L>"u"||!L||!L.Mixin)){d=O(d)?d:[d];for(var y=0;y<d.length;y++)d[y]===L.Mixin.Events&&console.warn("Deprecated include of L.Mixin.Events: this property will be removed in future releases, please inherit from L.Evented instead.",new Error().stack)}}var ee={on:function(d,y,T){if(typeof d=="object")for(var P in d)this._on(P,d[P],y);else{d=C(d);for(var M=0,W=d.length;M<W;M++)this._on(d[M],y,T)}return this},off:function(d,y,T){if(!arguments.length)delete this._events;else if(typeof d=="object")for(var P in d)this._off(P,d[P],y);else{d=C(d);for(var M=arguments.length===1,W=0,te=d.length;W<te;W++)M?this._off(d[W]):this._off(d[W],y,T)}return this},_on:function(d,y,T,P){if(typeof y!="function"){console.warn("wrong listener type: "+typeof y);return}if(this._listens(d,y,T)===!1){T===this&&(T=void 0);var M={fn:y,ctx:T};P&&(M.once=!0),this._events=this._events||{},this._events[d]=this._events[d]||[],this._events[d].push(M)}},_off:function(d,y,T){var P,M,W;if(this._events&&(P=this._events[d],!!P)){if(arguments.length===1){if(this._firingCount)for(M=0,W=P.length;M<W;M++)P[M].fn=g;delete this._events[d];return}if(typeof y!="function"){console.warn("wrong listener type: "+typeof y);return}var te=this._listens(d,y,T);if(te!==!1){var oe=P[te];this._firingCount&&(oe.fn=g,this._events[d]=P=P.slice()),P.splice(te,1)}}},fire:function(d,y,T){if(!this.listens(d,T))return this;var P=i({},y,{type:d,target:this,sourceTarget:y&&y.sourceTarget||this});if(this._events){var M=this._events[d];if(M){this._firingCount=this._firingCount+1||1;for(var W=0,te=M.length;W<te;W++){var oe=M[W],ge=oe.fn;oe.once&&this.off(d,ge,oe.ctx),ge.call(oe.ctx||this,P)}this._firingCount--}}return T&&this._propagateEvent(P),this},listens:function(d,y,T,P){typeof d!="string"&&console.warn('"string" type argument expected');var M=y;typeof y!="function"&&(P=!!y,M=void 0,T=void 0);var W=this._events&&this._events[d];if(W&&W.length&&this._listens(d,M,T)!==!1)return!0;if(P){for(var te in this._eventParents)if(this._eventParents[te].listens(d,y,T,P))return!0}return!1},_listens:function(d,y,T){if(!this._events)return!1;var P=this._events[d]||[];if(!y)return!!P.length;T===this&&(T=void 0);for(var M=0,W=P.length;M<W;M++)if(P[M].fn===y&&P[M].ctx===T)return M;return!1},once:function(d,y,T){if(typeof d=="object")for(var P in d)this._on(P,d[P],y,!0);else{d=C(d);for(var M=0,W=d.length;M<W;M++)this._on(d[M],y,T,!0)}return this},addEventParent:function(d){return this._eventParents=this._eventParents||{},this._eventParents[c(d)]=d,this},removeEventParent:function(d){return this._eventParents&&delete this._eventParents[c(d)],this},_propagateEvent:function(d){for(var y in this._eventParents)this._eventParents[y].fire(d.type,i({layer:d.target,propagatedFrom:d.target},d),!0)}};ee.addEventListener=ee.on,ee.removeEventListener=ee.clearAllEventListeners=ee.off,ee.addOneTimeEventListener=ee.once,ee.fireEvent=ee.fire,ee.hasEventListeners=ee.listens;var re=Se.extend(ee);function le(d,y,T){this.x=T?Math.round(d):d,this.y=T?Math.round(y):y}var Ne=Math.trunc||function(d){return d>0?Math.floor(d):Math.ceil(d)};le.prototype={clone:function(){return new le(this.x,this.y)},add:function(d){return this.clone()._add(Pe(d))},_add:function(d){return this.x+=d.x,this.y+=d.y,this},subtract:function(d){return this.clone()._subtract(Pe(d))},_subtract:function(d){return this.x-=d.x,this.y-=d.y,this},divideBy:function(d){return this.clone()._divideBy(d)},_divideBy:function(d){return this.x/=d,this.y/=d,this},multiplyBy:function(d){return this.clone()._multiplyBy(d)},_multiplyBy:function(d){return this.x*=d,this.y*=d,this},scaleBy:function(d){return new le(this.x*d.x,this.y*d.y)},unscaleBy:function(d){return new le(this.x/d.x,this.y/d.y)},round:function(){return this.clone()._round()},_round:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this},floor:function(){return this.clone()._floor()},_floor:function(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this},ceil:function(){return this.clone()._ceil()},_ceil:function(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this},trunc:function(){return this.clone()._trunc()},_trunc:function(){return this.x=Ne(this.x),this.y=Ne(this.y),this},distanceTo:function(d){d=Pe(d);var y=d.x-this.x,T=d.y-this.y;return Math.sqrt(y*y+T*T)},equals:function(d){return d=Pe(d),d.x===this.x&&d.y===this.y},contains:function(d){return d=Pe(d),Math.abs(d.x)<=Math.abs(this.x)&&Math.abs(d.y)<=Math.abs(this.y)},toString:function(){return"Point("+x(this.x)+", "+x(this.y)+")"}};function Pe(d,y,T){return d instanceof le?d:O(d)?new le(d[0],d[1]):d==null?d:typeof d=="object"&&"x"in d&&"y"in d?new le(d.x,d.y):new le(d,y,T)}function X(d,y){if(d)for(var T=y?[d,y]:d,P=0,M=T.length;P<M;P++)this.extend(T[P])}X.prototype={extend:function(d){var y,T;if(!d)return this;if(d instanceof le||typeof d[0]=="number"||"x"in d)y=T=Pe(d);else if(d=ue(d),y=d.min,T=d.max,!y||!T)return this;return!this.min&&!this.max?(this.min=y.clone(),this.max=T.clone()):(this.min.x=Math.min(y.x,this.min.x),this.max.x=Math.max(T.x,this.max.x),this.min.y=Math.min(y.y,this.min.y),this.max.y=Math.max(T.y,this.max.y)),this},getCenter:function(d){return Pe((this.min.x+this.max.x)/2,(this.min.y+this.max.y)/2,d)},getBottomLeft:function(){return Pe(this.min.x,this.max.y)},getTopRight:function(){return Pe(this.max.x,this.min.y)},getTopLeft:function(){return this.min},getBottomRight:function(){return this.max},getSize:function(){return this.max.subtract(this.min)},contains:function(d){var y,T;return typeof d[0]=="number"||d instanceof le?d=Pe(d):d=ue(d),d instanceof X?(y=d.min,T=d.max):y=T=d,y.x>=this.min.x&&T.x<=this.max.x&&y.y>=this.min.y&&T.y<=this.max.y},intersects:function(d){d=ue(d);var y=this.min,T=this.max,P=d.min,M=d.max,W=M.x>=y.x&&P.x<=T.x,te=M.y>=y.y&&P.y<=T.y;return W&&te},overlaps:function(d){d=ue(d);var y=this.min,T=this.max,P=d.min,M=d.max,W=M.x>y.x&&P.x<T.x,te=M.y>y.y&&P.y<T.y;return W&&te},isValid:function(){return!!(this.min&&this.max)},pad:function(d){var y=this.min,T=this.max,P=Math.abs(y.x-T.x)*d,M=Math.abs(y.y-T.y)*d;return ue(Pe(y.x-P,y.y-M),Pe(T.x+P,T.y+M))},equals:function(d){return d?(d=ue(d),this.min.equals(d.getTopLeft())&&this.max.equals(d.getBottomRight())):!1}};function ue(d,y){return!d||d instanceof X?d:new X(d,y)}function be(d,y){if(d)for(var T=y?[d,y]:d,P=0,M=T.length;P<M;P++)this.extend(T[P])}be.prototype={extend:function(d){var y=this._southWest,T=this._northEast,P,M;if(d instanceof je)P=d,M=d;else if(d instanceof be){if(P=d._southWest,M=d._northEast,!P||!M)return this}else return d?this.extend(Ve(d)||Ce(d)):this;return!y&&!T?(this._southWest=new je(P.lat,P.lng),this._northEast=new je(M.lat,M.lng)):(y.lat=Math.min(P.lat,y.lat),y.lng=Math.min(P.lng,y.lng),T.lat=Math.max(M.lat,T.lat),T.lng=Math.max(M.lng,T.lng)),this},pad:function(d){var y=this._southWest,T=this._northEast,P=Math.abs(y.lat-T.lat)*d,M=Math.abs(y.lng-T.lng)*d;return new be(new je(y.lat-P,y.lng-M),new je(T.lat+P,T.lng+M))},getCenter:function(){return new je((this._southWest.lat+this._northEast.lat)/2,(this._southWest.lng+this._northEast.lng)/2)},getSouthWest:function(){return this._southWest},getNorthEast:function(){return this._northEast},getNorthWest:function(){return new je(this.getNorth(),this.getWest())},getSouthEast:function(){return new je(this.getSouth(),this.getEast())},getWest:function(){return this._southWest.lng},getSouth:function(){return this._southWest.lat},getEast:function(){return this._northEast.lng},getNorth:function(){return this._northEast.lat},contains:function(d){typeof d[0]=="number"||d instanceof je||"lat"in d?d=Ve(d):d=Ce(d);var y=this._southWest,T=this._northEast,P,M;return d instanceof be?(P=d.getSouthWest(),M=d.getNorthEast()):P=M=d,P.lat>=y.lat&&M.lat<=T.lat&&P.lng>=y.lng&&M.lng<=T.lng},intersects:function(d){d=Ce(d);var y=this._southWest,T=this._northEast,P=d.getSouthWest(),M=d.getNorthEast(),W=M.lat>=y.lat&&P.lat<=T.lat,te=M.lng>=y.lng&&P.lng<=T.lng;return W&&te},overlaps:function(d){d=Ce(d);var y=this._southWest,T=this._northEast,P=d.getSouthWest(),M=d.getNorthEast(),W=M.lat>y.lat&&P.lat<T.lat,te=M.lng>y.lng&&P.lng<T.lng;return W&&te},toBBoxString:function(){return[this.getWest(),this.getSouth(),this.getEast(),this.getNorth()].join(",")},equals:function(d,y){return d?(d=Ce(d),this._southWest.equals(d.getSouthWest(),y)&&this._northEast.equals(d.getNorthEast(),y)):!1},isValid:function(){return!!(this._southWest&&this._northEast)}};function Ce(d,y){return d instanceof be?d:new be(d,y)}function je(d,y,T){if(isNaN(d)||isNaN(y))throw new Error("Invalid LatLng object: ("+d+", "+y+")");this.lat=+d,this.lng=+y,T!==void 0&&(this.alt=+T)}je.prototype={equals:function(d,y){if(!d)return!1;d=Ve(d);var T=Math.max(Math.abs(this.lat-d.lat),Math.abs(this.lng-d.lng));return T<=(y===void 0?1e-9:y)},toString:function(d){return"LatLng("+x(this.lat,d)+", "+x(this.lng,d)+")"},distanceTo:function(d){return It.distance(this,Ve(d))},wrap:function(){return It.wrapLatLng(this)},toBounds:function(d){var y=180*d/40075017,T=y/Math.cos(Math.PI/180*this.lat);return Ce([this.lat-y,this.lng-T],[this.lat+y,this.lng+T])},clone:function(){return new je(this.lat,this.lng,this.alt)}};function Ve(d,y,T){return d instanceof je?d:O(d)&&typeof d[0]!="object"?d.length===3?new je(d[0],d[1],d[2]):d.length===2?new je(d[0],d[1]):null:d==null?d:typeof d=="object"&&"lat"in d?new je(d.lat,"lng"in d?d.lng:d.lon,d.alt):y===void 0?null:new je(d,y,T)}var Ze={latLngToPoint:function(d,y){var T=this.projection.project(d),P=this.scale(y);return this.transformation._transform(T,P)},pointToLatLng:function(d,y){var T=this.scale(y),P=this.transformation.untransform(d,T);return this.projection.unproject(P)},project:function(d){return this.projection.project(d)},unproject:function(d){return this.projection.unproject(d)},scale:function(d){return 256*Math.pow(2,d)},zoom:function(d){return Math.log(d/256)/Math.LN2},getProjectedBounds:function(d){if(this.infinite)return null;var y=this.projection.bounds,T=this.scale(d),P=this.transformation.transform(y.min,T),M=this.transformation.transform(y.max,T);return new X(P,M)},infinite:!1,wrapLatLng:function(d){var y=this.wrapLng?p(d.lng,this.wrapLng,!0):d.lng,T=this.wrapLat?p(d.lat,this.wrapLat,!0):d.lat,P=d.alt;return new je(T,y,P)},wrapLatLngBounds:function(d){var y=d.getCenter(),T=this.wrapLatLng(y),P=y.lat-T.lat,M=y.lng-T.lng;if(P===0&&M===0)return d;var W=d.getSouthWest(),te=d.getNorthEast(),oe=new je(W.lat-P,W.lng-M),ge=new je(te.lat-P,te.lng-M);return new be(oe,ge)}},It=i({},Ze,{wrapLng:[-180,180],R:6371e3,distance:function(d,y){var T=Math.PI/180,P=d.lat*T,M=y.lat*T,W=Math.sin((y.lat-d.lat)*T/2),te=Math.sin((y.lng-d.lng)*T/2),oe=W*W+Math.cos(P)*Math.cos(M)*te*te,ge=2*Math.atan2(Math.sqrt(oe),Math.sqrt(1-oe));return this.R*ge}}),Te=6378137,st={R:Te,MAX_LATITUDE:85.0511287798,project:function(d){var y=Math.PI/180,T=this.MAX_LATITUDE,P=Math.max(Math.min(T,d.lat),-T),M=Math.sin(P*y);return new le(this.R*d.lng*y,this.R*Math.log((1+M)/(1-M))/2)},unproject:function(d){var y=180/Math.PI;return new je((2*Math.atan(Math.exp(d.y/this.R))-Math.PI/2)*y,d.x*y/this.R)},bounds:(function(){var d=Te*Math.PI;return new X([-d,-d],[d,d])})()};function lt(d,y,T,P){if(O(d)){this._a=d[0],this._b=d[1],this._c=d[2],this._d=d[3];return}this._a=d,this._b=y,this._c=T,this._d=P}lt.prototype={transform:function(d,y){return this._transform(d.clone(),y)},_transform:function(d,y){return y=y||1,d.x=y*(this._a*d.x+this._b),d.y=y*(this._c*d.y+this._d),d},untransform:function(d,y){return y=y||1,new le((d.x/y-this._b)/this._a,(d.y/y-this._d)/this._c)}};function he(d,y,T,P){return new lt(d,y,T,P)}var gt=i({},It,{code:"EPSG:3857",projection:st,transformation:(function(){var d=.5/(Math.PI*st.R);return he(d,.5,-d,.5)})()}),dt=i({},gt,{code:"EPSG:900913"});function yn(d){return document.createElementNS("http://www.w3.org/2000/svg",d)}function sn(d,y){var T="",P,M,W,te,oe,ge;for(P=0,W=d.length;P<W;P++){for(oe=d[P],M=0,te=oe.length;M<te;M++)ge=oe[M],T+=(M?"L":"M")+ge.x+" "+ge.y;T+=y?ae.svg?"z":"x":""}return T||"M0 0"}var tr=document.documentElement.style,jr="ActiveXObject"in window,In=jr&&!document.addEventListener,Nn="msLaunchUri"in navigator&&!("documentMode"in document),qi=we("webkit"),Zl=we("android"),Ys=we("android 2")||we("android 3"),Tr=parseInt(/WebKit\/([0-9]+)|$/.exec(navigator.userAgent)[1],10),xs=Zl&&we("Google")&&Tr<537&&!("AudioNode"in window),_s=!!window.opera,Zs=!Nn&&we("chrome"),pa=we("gecko")&&!qi&&!_s&&!jr,Tc=!Zs&&we("safari"),qo=we("phantom"),Js="OTransition"in tr,Sc=navigator.platform.indexOf("Win")===0,Ni=jr&&"transition"in tr,$n="WebKitCSSMatrix"in window&&"m11"in new window.WebKitCSSMatrix&&!Ys,si="MozPerspective"in tr,Pn=!window.L_DISABLE_3D&&(Ni||$n||si)&&!Js&&!qo,bs=typeof orientation<"u"||we("mobile"),Ho=bs&&qi,Ac=bs&&$n,Hi=!window.PointerEvent&&window.MSPointerEvent,ws=!!(window.PointerEvent||Hi),Dn="ontouchstart"in window||!!window.TouchEvent,ga=!window.L_NO_TOUCH&&(Dn||ws),ya=bs&&_s,Gi=bs&&pa,Jd=(window.devicePixelRatio||window.screen.deviceXDPI/window.screen.logicalXDPI)>1,Cc=(function(){var d=!1;try{var y=Object.defineProperty({},"passive",{get:function(){d=!0}});window.addEventListener("testPassiveEventSupport",g,y),window.removeEventListener("testPassiveEventSupport",g,y)}catch{}return d})(),va=(function(){return!!document.createElement("canvas").getContext})(),Ka=!!(document.createElementNS&&yn("svg").createSVGRect),Qd=!!Ka&&(function(){var d=document.createElement("div");return d.innerHTML="<svg/>",(d.firstChild&&d.firstChild.namespaceURI)==="http://www.w3.org/2000/svg"})(),Qs=!Ka&&(function(){try{var d=document.createElement("div");d.innerHTML='<v:shape adj="1"/>';var y=d.firstChild;return y.style.behavior="url(#default#VML)",y&&typeof y.adj=="object"}catch{return!1}})(),Go=navigator.platform.indexOf("Mac")===0,xe=navigator.platform.indexOf("Linux")===0;function we(d){return navigator.userAgent.toLowerCase().indexOf(d)>=0}var ae={ie:jr,ielt9:In,edge:Nn,webkit:qi,android:Zl,android23:Ys,androidStock:xs,opera:_s,chrome:Zs,gecko:pa,safari:Tc,phantom:qo,opera12:Js,win:Sc,ie3d:Ni,webkit3d:$n,gecko3d:si,any3d:Pn,mobile:bs,mobileWebkit:Ho,mobileWebkit3d:Ac,msPointer:Hi,pointer:ws,touch:ga,touchNative:Dn,mobileOpera:ya,mobileGecko:Gi,retina:Jd,passiveEvents:Cc,canvas:va,svg:Ka,vml:Qs,inlineSvg:Qd,mac:Go,linux:xe},tt=ae.msPointer?"MSPointerDown":"pointerdown",Xe=ae.msPointer?"MSPointerMove":"pointermove",yt=ae.msPointer?"MSPointerUp":"pointerup",_t=ae.msPointer?"MSPointerCancel":"pointercancel",Jt={touchstart:tt,touchmove:Xe,touchend:yt,touchcancel:_t},fr={touchstart:Ki,touchmove:nr,touchend:nr,touchcancel:nr},Kn={},Wt=!1;function oi(d,y,T){return y==="touchstart"&&li(),fr[y]?(T=fr[y].bind(this,T),d.addEventListener(Jt[y],T,!1),T):(console.warn("wrong event specified:",y),g)}function Xs(d,y,T){if(!Jt[y]){console.warn("wrong event specified:",y);return}d.removeEventListener(Jt[y],T,!1)}function $i(d){Kn[d.pointerId]=d}function eo(d){Kn[d.pointerId]&&(Kn[d.pointerId]=d)}function Pi(d){delete Kn[d.pointerId]}function li(){Wt||(document.addEventListener(tt,$i,!0),document.addEventListener(Xe,eo,!0),document.addEventListener(yt,Pi,!0),document.addEventListener(_t,Pi,!0),Wt=!0)}function nr(d,y){if(y.pointerType!==(y.MSPOINTER_TYPE_MOUSE||"mouse")){y.touches=[];for(var T in Kn)y.touches.push(Kn[T]);y.changedTouches=[y],d(y)}}function Ki(d,y){y.MSPOINTER_TYPE_TOUCH&&y.pointerType===y.MSPOINTER_TYPE_TOUCH&&En(y),nr(d,y)}function Rn(d){var y={},T,P;for(P in d)T=d[P],y[P]=T&&T.bind?T.bind(d):T;return d=y,y.type="dblclick",y.detail=2,y.isTrusted=!1,y._simulated=!0,y}var to=200;function Sr(d,y){d.addEventListener("dblclick",y);var T=0,P;function M(W){if(W.detail!==1){P=W.detail;return}if(!(W.pointerType==="mouse"||W.sourceCapabilities&&!W.sourceCapabilities.firesTouchEvents)){var te=so(W);if(!(te.some(function(ge){return ge instanceof HTMLLabelElement&&ge.attributes.for})&&!te.some(function(ge){return ge instanceof HTMLInputElement||ge instanceof HTMLSelectElement}))){var oe=Date.now();oe-T<=to?(P++,P===2&&y(Rn(W))):P=1,T=oe}}}return d.addEventListener("click",M),{dblclick:y,simDblclick:M}}function Wa(d,y){d.removeEventListener("dblclick",y.dblclick),d.removeEventListener("click",y.simDblclick)}var Wi=Ko(["transform","webkitTransform","OTransform","MozTransform","msTransform"]),Es=Ko(["webkitTransition","transition","OTransition","MozTransition","msTransition"]),Jl=Es==="webkitTransition"||Es==="OTransition"?Es+"End":"transitionend";function Ql(d){return typeof d=="string"?document.getElementById(d):d}function no(d,y){var T=d.style[y]||d.currentStyle&&d.currentStyle[y];if((!T||T==="auto")&&document.defaultView){var P=document.defaultView.getComputedStyle(d,null);T=P?P[y]:null}return T==="auto"?null:T}function wt(d,y,T){var P=document.createElement(d);return P.className=y||"",T&&T.appendChild(P),P}function Tt(d){var y=d.parentNode;y&&y.removeChild(d)}function bn(d){for(;d.firstChild;)d.removeChild(d.firstChild)}function wn(d){var y=d.parentNode;y&&y.lastChild!==d&&y.appendChild(d)}function Di(d){var y=d.parentNode;y&&y.firstChild!==d&&y.insertBefore(d,y.firstChild)}function $o(d,y){if(d.classList!==void 0)return d.classList.contains(y);var T=Ya(d);return T.length>0&&new RegExp("(^|\\s)"+y+"(\\s|$)").test(T)}function He(d,y){if(d.classList!==void 0)for(var T=C(y),P=0,M=T.length;P<M;P++)d.classList.add(T[P]);else if(!$o(d,y)){var W=Ya(d);Yi(d,(W?W+" ":"")+y)}}function Qt(d,y){d.classList!==void 0?d.classList.remove(y):Yi(d,b((" "+Ya(d)+" ").replace(" "+y+" "," ")))}function Yi(d,y){d.className.baseVal===void 0?d.className=y:d.className.baseVal=y}function Ya(d){return d.correspondingElement&&(d=d.correspondingElement),d.className.baseVal===void 0?d.className:d.className.baseVal}function dn(d,y){"opacity"in d.style?d.style.opacity=y:"filter"in d.style&&Xl(d,y)}function Xl(d,y){var T=!1,P="DXImageTransform.Microsoft.Alpha";try{T=d.filters.item(P)}catch{if(y===1)return}y=Math.round(y*100),T?(T.Enabled=y!==100,T.Opacity=y):d.style.filter+=" progid:"+P+"(opacity="+y+")"}function Ko(d){for(var y=document.documentElement.style,T=0;T<d.length;T++)if(d[T]in y)return d[T];return!1}function xa(d,y,T){var P=y||new le(0,0);d.style[Wi]=(ae.ie3d?"translate("+P.x+"px,"+P.y+"px)":"translate3d("+P.x+"px,"+P.y+"px,0)")+(T?" scale("+T+")":"")}function Xt(d,y){d._leaflet_pos=y,ae.any3d?xa(d,y):(d.style.left=y.x+"px",d.style.top=y.y+"px")}function Za(d){return d._leaflet_pos||new le(0,0)}var Zi,hr,eu;if("onselectstart"in document)Zi=function(){at(window,"selectstart",En)},hr=function(){Vt(window,"selectstart",En)};else{var Ts=Ko(["userSelect","WebkitUserSelect","OUserSelect","MozUserSelect","msUserSelect"]);Zi=function(){if(Ts){var d=document.documentElement.style;eu=d[Ts],d[Ts]="none"}},hr=function(){Ts&&(document.documentElement.style[Ts]=eu,eu=void 0)}}function Wo(){at(window,"dragstart",En)}function ro(){Vt(window,"dragstart",En)}var Yo,Ja;function io(d){for(;d.tabIndex===-1;)d=d.parentNode;d.style&&(ui(),Yo=d,Ja=d.style.outlineStyle,d.style.outlineStyle="none",at(window,"keydown",ui))}function ui(){Yo&&(Yo.style.outlineStyle=Ja,Yo=void 0,Ja=void 0,Vt(window,"keydown",ui))}function tu(d){do d=d.parentNode;while((!d.offsetWidth||!d.offsetHeight)&&d!==document.body);return d}function ci(d){var y=d.getBoundingClientRect();return{x:y.width/d.offsetWidth||1,y:y.height/d.offsetHeight||1,boundingClientRect:y}}var ao={__proto__:null,TRANSFORM:Wi,TRANSITION:Es,TRANSITION_END:Jl,get:Ql,getStyle:no,create:wt,remove:Tt,empty:bn,toFront:wn,toBack:Di,hasClass:$o,addClass:He,removeClass:Qt,setClass:Yi,getClass:Ya,setOpacity:dn,testProp:Ko,setTransform:xa,setPosition:Xt,getPosition:Za,get disableTextSelection(){return Zi},get enableTextSelection(){return hr},disableImageDrag:Wo,enableImageDrag:ro,preventOutline:io,restoreOutline:ui,getSizedParentNode:tu,getScale:ci};function at(d,y,T,P){if(y&&typeof y=="object")for(var M in y)di(d,M,y[M],T);else{y=C(y);for(var W=0,te=y.length;W<te;W++)di(d,y[W],T,P)}return this}var Lr="_leaflet_events";function Vt(d,y,T,P){if(arguments.length===1)Ss(d),delete d[Lr];else if(y&&typeof y=="object")for(var M in y)As(d,M,y[M],T);else if(y=C(y),arguments.length===2)Ss(d,function(oe){return q(y,oe)!==-1});else for(var W=0,te=y.length;W<te;W++)As(d,y[W],T,P);return this}function Ss(d,y){for(var T in d[Lr]){var P=T.split(/\d/)[0];(!y||y(P))&&As(d,P,null,null,T)}}var Ri={mouseenter:"mouseover",mouseleave:"mouseout",wheel:!("onwheel"in window)&&"mousewheel"};function di(d,y,T,P){var M=y+c(T)+(P?"_"+c(P):"");if(d[Lr]&&d[Lr][M])return this;var W=function(oe){return T.call(P||d,oe||window.event)},te=W;!ae.touchNative&&ae.pointer&&y.indexOf("touch")===0?W=oi(d,y,W):ae.touch&&y==="dblclick"?W=Sr(d,W):"addEventListener"in d?y==="touchstart"||y==="touchmove"||y==="wheel"||y==="mousewheel"?d.addEventListener(Ri[y]||y,W,ae.passiveEvents?{passive:!1}:!1):y==="mouseenter"||y==="mouseleave"?(W=function(oe){oe=oe||window.event,wa(d,oe)&&te(oe)},d.addEventListener(Ri[y],W,!1)):d.addEventListener(y,te,!1):d.attachEvent("on"+y,W),d[Lr]=d[Lr]||{},d[Lr][M]=W}function As(d,y,T,P,M){M=M||y+c(T)+(P?"_"+c(P):"");var W=d[Lr]&&d[Lr][M];if(!W)return this;!ae.touchNative&&ae.pointer&&y.indexOf("touch")===0?Xs(d,y,W):ae.touch&&y==="dblclick"?Wa(d,W):"removeEventListener"in d?d.removeEventListener(Ri[y]||y,W,!1):d.detachEvent("on"+y,W),d[Lr][M]=null}function Nt(d){return d.stopPropagation?d.stopPropagation():d.originalEvent?d.originalEvent._stopped=!0:d.cancelBubble=!0,this}function Ji(d){return di(d,"wheel",Nt),this}function Cs(d){return at(d,"mousedown touchstart dblclick contextmenu",Nt),d._leaflet_disable_click=!0,this}function En(d){return d.preventDefault?d.preventDefault():d.returnValue=!1,this}function _a(d){return En(d),Nt(d),this}function so(d){if(d.composedPath)return d.composedPath();for(var y=[],T=d.target;T;)y.push(T),T=T.parentNode;return y}function Qa(d,y){if(!y)return new le(d.clientX,d.clientY);var T=ci(y),P=T.boundingClientRect;return new le((d.clientX-P.left)/T.x-y.clientLeft,(d.clientY-P.top)/T.y-y.clientTop)}var ba=ae.linux&&ae.chrome?window.devicePixelRatio:ae.mac?window.devicePixelRatio*3:window.devicePixelRatio>0?2*window.devicePixelRatio:1;function mr(d){return ae.edge?d.wheelDeltaY/2:d.deltaY&&d.deltaMode===0?-d.deltaY/ba:d.deltaY&&d.deltaMode===1?-d.deltaY*20:d.deltaY&&d.deltaMode===2?-d.deltaY*60:d.deltaX||d.deltaZ?0:d.wheelDelta?(d.wheelDeltaY||d.wheelDelta)/2:d.detail&&Math.abs(d.detail)<32765?-d.detail*20:d.detail?d.detail/-32765*60:0}function wa(d,y){var T=y.relatedTarget;if(!T)return!0;try{for(;T&&T!==d;)T=T.parentNode}catch{return!1}return T!==d}var Xa={__proto__:null,on:at,off:Vt,stopPropagation:Nt,disableScrollPropagation:Ji,disableClickPropagation:Cs,preventDefault:En,stop:_a,getPropagationPath:so,getMousePosition:Qa,getWheelDelta:mr,isExternalTarget:wa,addListener:at,removeListener:Vt},Is=re.extend({run:function(d,y,T,P){this.stop(),this._el=d,this._inProgress=!0,this._duration=T||.25,this._easeOutPower=1/Math.max(P||.5,.2),this._startPos=Za(d),this._offset=y.subtract(this._startPos),this._startTime=+new Date,this.fire("start"),this._animate()},stop:function(){this._inProgress&&(this._step(!0),this._complete())},_animate:function(){this._animId=K(this._animate,this),this._step()},_step:function(d){var y=+new Date-this._startTime,T=this._duration*1e3;y<T?this._runFrame(this._easeOut(y/T),d):(this._runFrame(1),this._complete())},_runFrame:function(d,y){var T=this._startPos.add(this._offset.multiplyBy(d));y&&T._round(),Xt(this._el,T),this.fire("step")},_complete:function(){J(this._animId),this._inProgress=!1,this.fire("end")},_easeOut:function(d){return 1-Math.pow(1-d,this._easeOutPower)}}),bt=re.extend({options:{crs:gt,center:void 0,zoom:void 0,minZoom:void 0,maxZoom:void 0,layers:[],maxBounds:void 0,renderer:void 0,zoomAnimation:!0,zoomAnimationThreshold:4,fadeAnimation:!0,markerZoomAnimation:!0,transform3DLimit:8388608,zoomSnap:1,zoomDelta:1,trackResize:!0},initialize:function(d,y){y=A(this,y),this._handlers=[],this._layers={},this._zoomBoundLayers={},this._sizeChanged=!0,this._initContainer(d),this._initLayout(),this._onResize=s(this._onResize,this),this._initEvents(),y.maxBounds&&this.setMaxBounds(y.maxBounds),y.zoom!==void 0&&(this._zoom=this._limitZoom(y.zoom)),y.center&&y.zoom!==void 0&&this.setView(Ve(y.center),y.zoom,{reset:!0}),this.callInitHooks(),this._zoomAnimated=Es&&ae.any3d&&!ae.mobileOpera&&this.options.zoomAnimation,this._zoomAnimated&&(this._createAnimProxy(),at(this._proxy,Jl,this._catchTransitionEnd,this)),this._addLayers(this.options.layers)},setView:function(d,y,T){if(y=y===void 0?this._zoom:this._limitZoom(y),d=this._limitCenter(Ve(d),y,this.options.maxBounds),T=T||{},this._stop(),this._loaded&&!T.reset&&T!==!0){T.animate!==void 0&&(T.zoom=i({animate:T.animate},T.zoom),T.pan=i({animate:T.animate,duration:T.duration},T.pan));var P=this._zoom!==y?this._tryAnimatedZoom&&this._tryAnimatedZoom(d,y,T.zoom):this._tryAnimatedPan(d,T.pan);if(P)return clearTimeout(this._sizeTimer),this}return this._resetView(d,y,T.pan&&T.pan.noMoveStart),this},setZoom:function(d,y){return this._loaded?this.setView(this.getCenter(),d,{zoom:y}):(this._zoom=d,this)},zoomIn:function(d,y){return d=d||(ae.any3d?this.options.zoomDelta:1),this.setZoom(this._zoom+d,y)},zoomOut:function(d,y){return d=d||(ae.any3d?this.options.zoomDelta:1),this.setZoom(this._zoom-d,y)},setZoomAround:function(d,y,T){var P=this.getZoomScale(y),M=this.getSize().divideBy(2),W=d instanceof le?d:this.latLngToContainerPoint(d),te=W.subtract(M).multiplyBy(1-1/P),oe=this.containerPointToLatLng(M.add(te));return this.setView(oe,y,{zoom:T})},_getBoundsCenterZoom:function(d,y){y=y||{},d=d.getBounds?d.getBounds():Ce(d);var T=Pe(y.paddingTopLeft||y.padding||[0,0]),P=Pe(y.paddingBottomRight||y.padding||[0,0]),M=this.getBoundsZoom(d,!1,T.add(P));if(M=typeof y.maxZoom=="number"?Math.min(y.maxZoom,M):M,M===1/0)return{center:d.getCenter(),zoom:M};var W=P.subtract(T).divideBy(2),te=this.project(d.getSouthWest(),M),oe=this.project(d.getNorthEast(),M),ge=this.unproject(te.add(oe).divideBy(2).add(W),M);return{center:ge,zoom:M}},fitBounds:function(d,y){if(d=Ce(d),!d.isValid())throw new Error("Bounds are not valid.");var T=this._getBoundsCenterZoom(d,y);return this.setView(T.center,T.zoom,y)},fitWorld:function(d){return this.fitBounds([[-90,-180],[90,180]],d)},panTo:function(d,y){return this.setView(d,this._zoom,{pan:y})},panBy:function(d,y){if(d=Pe(d).round(),y=y||{},!d.x&&!d.y)return this.fire("moveend");if(y.animate!==!0&&!this.getSize().contains(d))return this._resetView(this.unproject(this.project(this.getCenter()).add(d)),this.getZoom()),this;if(this._panAnim||(this._panAnim=new Is,this._panAnim.on({step:this._onPanTransitionStep,end:this._onPanTransitionEnd},this)),y.noMoveStart||this.fire("movestart"),y.animate!==!1){He(this._mapPane,"leaflet-pan-anim");var T=this._getMapPanePos().subtract(d).round();this._panAnim.run(this._mapPane,T,y.duration||.25,y.easeLinearity)}else this._rawPanBy(d),this.fire("move").fire("moveend");return this},flyTo:function(d,y,T){if(T=T||{},T.animate===!1||!ae.any3d)return this.setView(d,y,T);this._stop();var P=this.project(this.getCenter()),M=this.project(d),W=this.getSize(),te=this._zoom;d=Ve(d),y=y===void 0?te:y;var oe=Math.max(W.x,W.y),ge=oe*this.getZoomScale(te,y),De=M.distanceTo(P)||1,Fe=1.42,nt=Fe*Fe;function vt(qn){var ks=qn?-1:1,nl=qn?ge:oe,Em=ge*ge-oe*oe+ks*nt*nt*De*De,Kc=2*nl*nt*De,Wc=Em/Kc,yo=Math.sqrt(Wc*Wc+1)-Wc,Ms=yo<1e-9?-18:Math.log(yo);return Ms}function Ar(qn){return(Math.exp(qn)-Math.exp(-qn))/2}function Wn(qn){return(Math.exp(qn)+Math.exp(-qn))/2}function Oi(qn){return Ar(qn)/Wn(qn)}var Bt=vt(0);function zt(qn){return oe*(Wn(Bt)/Wn(Bt+Fe*qn))}function St(qn){return oe*(Wn(Bt)*Oi(Bt+Fe*qn)-Ar(Bt))/nt}function po(qn){return 1-Math.pow(1-qn,1.5)}var na=Date.now(),ff=(vt(1)-Bt)/Fe,go=T.duration?1e3*T.duration:1e3*ff*.8;function wm(){var qn=(Date.now()-na)/go,ks=po(qn)*ff;qn<=1?(this._flyToFrame=K(wm,this),this._move(this.unproject(P.add(M.subtract(P).multiplyBy(St(ks)/De)),te),this.getScaleZoom(oe/zt(ks),te),{flyTo:!0})):this._move(d,y)._moveEnd(!0)}return this._moveStart(!0,T.noMoveStart),wm.call(this),this},flyToBounds:function(d,y){var T=this._getBoundsCenterZoom(d,y);return this.flyTo(T.center,T.zoom,y)},setMaxBounds:function(d){return d=Ce(d),this.listens("moveend",this._panInsideMaxBounds)&&this.off("moveend",this._panInsideMaxBounds),d.isValid()?(this.options.maxBounds=d,this._loaded&&this._panInsideMaxBounds(),this.on("moveend",this._panInsideMaxBounds)):(this.options.maxBounds=null,this)},setMinZoom:function(d){var y=this.options.minZoom;return this.options.minZoom=d,this._loaded&&y!==d&&(this.fire("zoomlevelschange"),this.getZoom()<this.options.minZoom)?this.setZoom(d):this},setMaxZoom:function(d){var y=this.options.maxZoom;return this.options.maxZoom=d,this._loaded&&y!==d&&(this.fire("zoomlevelschange"),this.getZoom()>this.options.maxZoom)?this.setZoom(d):this},panInsideBounds:function(d,y){this._enforcingBounds=!0;var T=this.getCenter(),P=this._limitCenter(T,this._zoom,Ce(d));return T.equals(P)||this.panTo(P,y),this._enforcingBounds=!1,this},panInside:function(d,y){y=y||{};var T=Pe(y.paddingTopLeft||y.padding||[0,0]),P=Pe(y.paddingBottomRight||y.padding||[0,0]),M=this.project(this.getCenter()),W=this.project(d),te=this.getPixelBounds(),oe=ue([te.min.add(T),te.max.subtract(P)]),ge=oe.getSize();if(!oe.contains(W)){this._enforcingBounds=!0;var De=W.subtract(oe.getCenter()),Fe=oe.extend(W).getSize().subtract(ge);M.x+=De.x<0?-Fe.x:Fe.x,M.y+=De.y<0?-Fe.y:Fe.y,this.panTo(this.unproject(M),y),this._enforcingBounds=!1}return this},invalidateSize:function(d){if(!this._loaded)return this;d=i({animate:!1,pan:!0},d===!0?{animate:!0}:d);var y=this.getSize();this._sizeChanged=!0,this._lastCenter=null;var T=this.getSize(),P=y.divideBy(2).round(),M=T.divideBy(2).round(),W=P.subtract(M);return!W.x&&!W.y?this:(d.animate&&d.pan?this.panBy(W):(d.pan&&this._rawPanBy(W),this.fire("move"),d.debounceMoveend?(clearTimeout(this._sizeTimer),this._sizeTimer=setTimeout(s(this.fire,this,"moveend"),200)):this.fire("moveend")),this.fire("resize",{oldSize:y,newSize:T}))},stop:function(){return this.setZoom(this._limitZoom(this._zoom)),this.options.zoomSnap||this.fire("viewreset"),this._stop()},locate:function(d){if(d=this._locateOptions=i({timeout:1e4,watch:!1},d),!("geolocation"in navigator))return this._handleGeolocationError({code:0,message:"Geolocation not supported."}),this;var y=s(this._handleGeolocationResponse,this),T=s(this._handleGeolocationError,this);return d.watch?this._locationWatchId=navigator.geolocation.watchPosition(y,T,d):navigator.geolocation.getCurrentPosition(y,T,d),this},stopLocate:function(){return navigator.geolocation&&navigator.geolocation.clearWatch&&navigator.geolocation.clearWatch(this._locationWatchId),this._locateOptions&&(this._locateOptions.setView=!1),this},_handleGeolocationError:function(d){if(this._container._leaflet_id){var y=d.code,T=d.message||(y===1?"permission denied":y===2?"position unavailable":"timeout");this._locateOptions.setView&&!this._loaded&&this.fitWorld(),this.fire("locationerror",{code:y,message:"Geolocation error: "+T+"."})}},_handleGeolocationResponse:function(d){if(this._container._leaflet_id){var y=d.coords.latitude,T=d.coords.longitude,P=new je(y,T),M=P.toBounds(d.coords.accuracy*2),W=this._locateOptions;if(W.setView){var te=this.getBoundsZoom(M);this.setView(P,W.maxZoom?Math.min(te,W.maxZoom):te)}var oe={latlng:P,bounds:M,timestamp:d.timestamp};for(var ge in d.coords)typeof d.coords[ge]=="number"&&(oe[ge]=d.coords[ge]);this.fire("locationfound",oe)}},addHandler:function(d,y){if(!y)return this;var T=this[d]=new y(this);return this._handlers.push(T),this.options[d]&&T.enable(),this},remove:function(){if(this._initEvents(!0),this.options.maxBounds&&this.off("moveend",this._panInsideMaxBounds),this._containerId!==this._container._leaflet_id)throw new Error("Map container is being reused by another instance");try{delete this._container._leaflet_id,delete this._containerId}catch{this._container._leaflet_id=void 0,this._containerId=void 0}this._locationWatchId!==void 0&&this.stopLocate(),this._stop(),Tt(this._mapPane),this._clearControlPos&&this._clearControlPos(),this._resizeRequest&&(J(this._resizeRequest),this._resizeRequest=null),this._clearHandlers(),this._loaded&&this.fire("unload");var d;for(d in this._layers)this._layers[d].remove();for(d in this._panes)Tt(this._panes[d]);return this._layers=[],this._panes=[],delete this._mapPane,delete this._renderer,this},createPane:function(d,y){var T="leaflet-pane"+(d?" leaflet-"+d.replace("Pane","")+"-pane":""),P=wt("div",T,y||this._mapPane);return d&&(this._panes[d]=P),P},getCenter:function(){return this._checkIfLoaded(),this._lastCenter&&!this._moved()?this._lastCenter.clone():this.layerPointToLatLng(this._getCenterLayerPoint())},getZoom:function(){return this._zoom},getBounds:function(){var d=this.getPixelBounds(),y=this.unproject(d.getBottomLeft()),T=this.unproject(d.getTopRight());return new be(y,T)},getMinZoom:function(){return this.options.minZoom===void 0?this._layersMinZoom||0:this.options.minZoom},getMaxZoom:function(){return this.options.maxZoom===void 0?this._layersMaxZoom===void 0?1/0:this._layersMaxZoom:this.options.maxZoom},getBoundsZoom:function(d,y,T){d=Ce(d),T=Pe(T||[0,0]);var P=this.getZoom()||0,M=this.getMinZoom(),W=this.getMaxZoom(),te=d.getNorthWest(),oe=d.getSouthEast(),ge=this.getSize().subtract(T),De=ue(this.project(oe,P),this.project(te,P)).getSize(),Fe=ae.any3d?this.options.zoomSnap:1,nt=ge.x/De.x,vt=ge.y/De.y,Ar=y?Math.max(nt,vt):Math.min(nt,vt);return P=this.getScaleZoom(Ar,P),Fe&&(P=Math.round(P/(Fe/100))*(Fe/100),P=y?Math.ceil(P/Fe)*Fe:Math.floor(P/Fe)*Fe),Math.max(M,Math.min(W,P))},getSize:function(){return(!this._size||this._sizeChanged)&&(this._size=new le(this._container.clientWidth||0,this._container.clientHeight||0),this._sizeChanged=!1),this._size.clone()},getPixelBounds:function(d,y){var T=this._getTopLeftPoint(d,y);return new X(T,T.add(this.getSize()))},getPixelOrigin:function(){return this._checkIfLoaded(),this._pixelOrigin},getPixelWorldBounds:function(d){return this.options.crs.getProjectedBounds(d===void 0?this.getZoom():d)},getPane:function(d){return typeof d=="string"?this._panes[d]:d},getPanes:function(){return this._panes},getContainer:function(){return this._container},getZoomScale:function(d,y){var T=this.options.crs;return y=y===void 0?this._zoom:y,T.scale(d)/T.scale(y)},getScaleZoom:function(d,y){var T=this.options.crs;y=y===void 0?this._zoom:y;var P=T.zoom(d*T.scale(y));return isNaN(P)?1/0:P},project:function(d,y){return y=y===void 0?this._zoom:y,this.options.crs.latLngToPoint(Ve(d),y)},unproject:function(d,y){return y=y===void 0?this._zoom:y,this.options.crs.pointToLatLng(Pe(d),y)},layerPointToLatLng:function(d){var y=Pe(d).add(this.getPixelOrigin());return this.unproject(y)},latLngToLayerPoint:function(d){var y=this.project(Ve(d))._round();return y._subtract(this.getPixelOrigin())},wrapLatLng:function(d){return this.options.crs.wrapLatLng(Ve(d))},wrapLatLngBounds:function(d){return this.options.crs.wrapLatLngBounds(Ce(d))},distance:function(d,y){return this.options.crs.distance(Ve(d),Ve(y))},containerPointToLayerPoint:function(d){return Pe(d).subtract(this._getMapPanePos())},layerPointToContainerPoint:function(d){return Pe(d).add(this._getMapPanePos())},containerPointToLatLng:function(d){var y=this.containerPointToLayerPoint(Pe(d));return this.layerPointToLatLng(y)},latLngToContainerPoint:function(d){return this.layerPointToContainerPoint(this.latLngToLayerPoint(Ve(d)))},mouseEventToContainerPoint:function(d){return Qa(d,this._container)},mouseEventToLayerPoint:function(d){return this.containerPointToLayerPoint(this.mouseEventToContainerPoint(d))},mouseEventToLatLng:function(d){return this.layerPointToLatLng(this.mouseEventToLayerPoint(d))},_initContainer:function(d){var y=this._container=Ql(d);if(y){if(y._leaflet_id)throw new Error("Map container is already initialized.")}else throw new Error("Map container not found.");at(y,"scroll",this._onScroll,this),this._containerId=c(y)},_initLayout:function(){var d=this._container;this._fadeAnimated=this.options.fadeAnimation&&ae.any3d,He(d,"leaflet-container"+(ae.touch?" leaflet-touch":"")+(ae.retina?" leaflet-retina":"")+(ae.ielt9?" leaflet-oldie":"")+(ae.safari?" leaflet-safari":"")+(this._fadeAnimated?" leaflet-fade-anim":""));var y=no(d,"position");y!=="absolute"&&y!=="relative"&&y!=="fixed"&&y!=="sticky"&&(d.style.position="relative"),this._initPanes(),this._initControlPos&&this._initControlPos()},_initPanes:function(){var d=this._panes={};this._paneRenderers={},this._mapPane=this.createPane("mapPane",this._container),Xt(this._mapPane,new le(0,0)),this.createPane("tilePane"),this.createPane("overlayPane"),this.createPane("shadowPane"),this.createPane("markerPane"),this.createPane("tooltipPane"),this.createPane("popupPane"),this.options.markerZoomAnimation||(He(d.markerPane,"leaflet-zoom-hide"),He(d.shadowPane,"leaflet-zoom-hide"))},_resetView:function(d,y,T){Xt(this._mapPane,new le(0,0));var P=!this._loaded;this._loaded=!0,y=this._limitZoom(y),this.fire("viewprereset");var M=this._zoom!==y;this._moveStart(M,T)._move(d,y)._moveEnd(M),this.fire("viewreset"),P&&this.fire("load")},_moveStart:function(d,y){return d&&this.fire("zoomstart"),y||this.fire("movestart"),this},_move:function(d,y,T,P){y===void 0&&(y=this._zoom);var M=this._zoom!==y;return this._zoom=y,this._lastCenter=d,this._pixelOrigin=this._getNewPixelOrigin(d),P?T&&T.pinch&&this.fire("zoom",T):((M||T&&T.pinch)&&this.fire("zoom",T),this.fire("move",T)),this},_moveEnd:function(d){return d&&this.fire("zoomend"),this.fire("moveend")},_stop:function(){return J(this._flyToFrame),this._panAnim&&this._panAnim.stop(),this},_rawPanBy:function(d){Xt(this._mapPane,this._getMapPanePos().subtract(d))},_getZoomSpan:function(){return this.getMaxZoom()-this.getMinZoom()},_panInsideMaxBounds:function(){this._enforcingBounds||this.panInsideBounds(this.options.maxBounds)},_checkIfLoaded:function(){if(!this._loaded)throw new Error("Set map center and zoom first.")},_initEvents:function(d){this._targets={},this._targets[c(this._container)]=this;var y=d?Vt:at;y(this._container,"click dblclick mousedown mouseup mouseover mouseout mousemove contextmenu keypress keydown keyup",this._handleDOMEvent,this),this.options.trackResize&&y(window,"resize",this._onResize,this),ae.any3d&&this.options.transform3DLimit&&(d?this.off:this.on).call(this,"moveend",this._onMoveEnd)},_onResize:function(){J(this._resizeRequest),this._resizeRequest=K(function(){this.invalidateSize({debounceMoveend:!0})},this)},_onScroll:function(){this._container.scrollTop=0,this._container.scrollLeft=0},_onMoveEnd:function(){var d=this._getMapPanePos();Math.max(Math.abs(d.x),Math.abs(d.y))>=this.options.transform3DLimit&&this._resetView(this.getCenter(),this.getZoom())},_findEventTargets:function(d,y){for(var T=[],P,M=y==="mouseout"||y==="mouseover",W=d.target||d.srcElement,te=!1;W;){if(P=this._targets[c(W)],P&&(y==="click"||y==="preclick")&&this._draggableMoved(P)){te=!0;break}if(P&&P.listens(y,!0)&&(M&&!wa(W,d)||(T.push(P),M))||W===this._container)break;W=W.parentNode}return!T.length&&!te&&!M&&this.listens(y,!0)&&(T=[this]),T},_isClickDisabled:function(d){for(;d&&d!==this._container;){if(d._leaflet_disable_click)return!0;d=d.parentNode}},_handleDOMEvent:function(d){var y=d.target||d.srcElement;if(!(!this._loaded||y._leaflet_disable_events||d.type==="click"&&this._isClickDisabled(y))){var T=d.type;T==="mousedown"&&io(y),this._fireDOMEvent(d,T)}},_mouseEvents:["click","dblclick","mouseover","mouseout","contextmenu"],_fireDOMEvent:function(d,y,T){if(d.type==="click"){var P=i({},d);P.type="preclick",this._fireDOMEvent(P,P.type,T)}var M=this._findEventTargets(d,y);if(T){for(var W=[],te=0;te<T.length;te++)T[te].listens(y,!0)&&W.push(T[te]);M=W.concat(M)}if(M.length){y==="contextmenu"&&En(d);var oe=M[0],ge={originalEvent:d};if(d.type!=="keypress"&&d.type!=="keydown"&&d.type!=="keyup"){var De=oe.getLatLng&&(!oe._radius||oe._radius<=10);ge.containerPoint=De?this.latLngToContainerPoint(oe.getLatLng()):this.mouseEventToContainerPoint(d),ge.layerPoint=this.containerPointToLayerPoint(ge.containerPoint),ge.latlng=De?oe.getLatLng():this.layerPointToLatLng(ge.layerPoint)}for(te=0;te<M.length;te++)if(M[te].fire(y,ge,!0),ge.originalEvent._stopped||M[te].options.bubblingMouseEvents===!1&&q(this._mouseEvents,y)!==-1)return}},_draggableMoved:function(d){return d=d.dragging&&d.dragging.enabled()?d:this,d.dragging&&d.dragging.moved()||this.boxZoom&&this.boxZoom.moved()},_clearHandlers:function(){for(var d=0,y=this._handlers.length;d<y;d++)this._handlers[d].disable()},whenReady:function(d,y){return this._loaded?d.call(y||this,{target:this}):this.on("load",d,y),this},_getMapPanePos:function(){return Za(this._mapPane)||new le(0,0)},_moved:function(){var d=this._getMapPanePos();return d&&!d.equals([0,0])},_getTopLeftPoint:function(d,y){var T=d&&y!==void 0?this._getNewPixelOrigin(d,y):this.getPixelOrigin();return T.subtract(this._getMapPanePos())},_getNewPixelOrigin:function(d,y){var T=this.getSize()._divideBy(2);return this.project(d,y)._subtract(T)._add(this._getMapPanePos())._round()},_latLngToNewLayerPoint:function(d,y,T){var P=this._getNewPixelOrigin(T,y);return this.project(d,y)._subtract(P)},_latLngBoundsToNewLayerBounds:function(d,y,T){var P=this._getNewPixelOrigin(T,y);return ue([this.project(d.getSouthWest(),y)._subtract(P),this.project(d.getNorthWest(),y)._subtract(P),this.project(d.getSouthEast(),y)._subtract(P),this.project(d.getNorthEast(),y)._subtract(P)])},_getCenterLayerPoint:function(){return this.containerPointToLayerPoint(this.getSize()._divideBy(2))},_getCenterOffset:function(d){return this.latLngToLayerPoint(d).subtract(this._getCenterLayerPoint())},_limitCenter:function(d,y,T){if(!T)return d;var P=this.project(d,y),M=this.getSize().divideBy(2),W=new X(P.subtract(M),P.add(M)),te=this._getBoundsOffset(W,T,y);return Math.abs(te.x)<=1&&Math.abs(te.y)<=1?d:this.unproject(P.add(te),y)},_limitOffset:function(d,y){if(!y)return d;var T=this.getPixelBounds(),P=new X(T.min.add(d),T.max.add(d));return d.add(this._getBoundsOffset(P,y))},_getBoundsOffset:function(d,y,T){var P=ue(this.project(y.getNorthEast(),T),this.project(y.getSouthWest(),T)),M=P.min.subtract(d.min),W=P.max.subtract(d.max),te=this._rebound(M.x,-W.x),oe=this._rebound(M.y,-W.y);return new le(te,oe)},_rebound:function(d,y){return d+y>0?Math.round(d-y)/2:Math.max(0,Math.ceil(d))-Math.max(0,Math.floor(y))},_limitZoom:function(d){var y=this.getMinZoom(),T=this.getMaxZoom(),P=ae.any3d?this.options.zoomSnap:1;return P&&(d=Math.round(d/P)*P),Math.max(y,Math.min(T,d))},_onPanTransitionStep:function(){this.fire("move")},_onPanTransitionEnd:function(){Qt(this._mapPane,"leaflet-pan-anim"),this.fire("moveend")},_tryAnimatedPan:function(d,y){var T=this._getCenterOffset(d)._trunc();return(y&&y.animate)!==!0&&!this.getSize().contains(T)?!1:(this.panBy(T,y),!0)},_createAnimProxy:function(){var d=this._proxy=wt("div","leaflet-proxy leaflet-zoom-animated");this._panes.mapPane.appendChild(d),this.on("zoomanim",function(y){var T=Wi,P=this._proxy.style[T];xa(this._proxy,this.project(y.center,y.zoom),this.getZoomScale(y.zoom,1)),P===this._proxy.style[T]&&this._animatingZoom&&this._onZoomTransitionEnd()},this),this.on("load moveend",this._animMoveEnd,this),this._on("unload",this._destroyAnimProxy,this)},_destroyAnimProxy:function(){Tt(this._proxy),this.off("load moveend",this._animMoveEnd,this),delete this._proxy},_animMoveEnd:function(){var d=this.getCenter(),y=this.getZoom();xa(this._proxy,this.project(d,y),this.getZoomScale(y,1))},_catchTransitionEnd:function(d){this._animatingZoom&&d.propertyName.indexOf("transform")>=0&&this._onZoomTransitionEnd()},_nothingToAnimate:function(){return!this._container.getElementsByClassName("leaflet-zoom-animated").length},_tryAnimatedZoom:function(d,y,T){if(this._animatingZoom)return!0;if(T=T||{},!this._zoomAnimated||T.animate===!1||this._nothingToAnimate()||Math.abs(y-this._zoom)>this.options.zoomAnimationThreshold)return!1;var P=this.getZoomScale(y),M=this._getCenterOffset(d)._divideBy(1-1/P);return T.animate!==!0&&!this.getSize().contains(M)?!1:(K(function(){this._moveStart(!0,T.noMoveStart||!1)._animateZoom(d,y,!0)},this),!0)},_animateZoom:function(d,y,T,P){this._mapPane&&(T&&(this._animatingZoom=!0,this._animateToCenter=d,this._animateToZoom=y,He(this._mapPane,"leaflet-zoom-anim")),this.fire("zoomanim",{center:d,zoom:y,noUpdate:P}),this._tempFireZoomEvent||(this._tempFireZoomEvent=this._zoom!==this._animateToZoom),this._move(this._animateToCenter,this._animateToZoom,void 0,!0),setTimeout(s(this._onZoomTransitionEnd,this),250))},_onZoomTransitionEnd:function(){this._animatingZoom&&(this._mapPane&&Qt(this._mapPane,"leaflet-zoom-anim"),this._animatingZoom=!1,this._move(this._animateToCenter,this._animateToZoom,void 0,!0),this._tempFireZoomEvent&&this.fire("zoom"),delete this._tempFireZoomEvent,this.fire("move"),this._moveEnd(!0))}});function oo(d,y){return new bt(d,y)}var Vr=Se.extend({options:{position:"topright"},initialize:function(d){A(this,d)},getPosition:function(){return this.options.position},setPosition:function(d){var y=this._map;return y&&y.removeControl(this),this.options.position=d,y&&y.addControl(this),this},getContainer:function(){return this._container},addTo:function(d){this.remove(),this._map=d;var y=this._container=this.onAdd(d),T=this.getPosition(),P=d._controlCorners[T];return He(y,"leaflet-control"),T.indexOf("bottom")!==-1?P.insertBefore(y,P.firstChild):P.appendChild(y),this._map.on("unload",this.remove,this),this},remove:function(){return this._map?(Tt(this._container),this.onRemove&&this.onRemove(this._map),this._map.off("unload",this.remove,this),this._map=null,this):this},_refocusOnMap:function(d){this._map&&d&&d.screenX>0&&d.screenY>0&&this._map.getContainer().focus()}}),fi=function(d){return new Vr(d)};bt.include({addControl:function(d){return d.addTo(this),this},removeControl:function(d){return d.remove(),this},_initControlPos:function(){var d=this._controlCorners={},y="leaflet-",T=this._controlContainer=wt("div",y+"control-container",this._container);function P(M,W){var te=y+M+" "+y+W;d[M+W]=wt("div",te,T)}P("top","left"),P("top","right"),P("bottom","left"),P("bottom","right")},_clearControlPos:function(){for(var d in this._controlCorners)Tt(this._controlCorners[d]);Tt(this._controlContainer),delete this._controlCorners,delete this._controlContainer}});var Zo=Vr.extend({options:{collapsed:!0,position:"topright",autoZIndex:!0,hideSingleBase:!1,sortLayers:!1,sortFunction:function(d,y,T,P){return T<P?-1:P<T?1:0}},initialize:function(d,y,T){A(this,T),this._layerControlInputs=[],this._layers=[],this._lastZIndex=0,this._handlingClick=!1,this._preventClick=!1;for(var P in d)this._addLayer(d[P],P);for(P in y)this._addLayer(y[P],P,!0)},onAdd:function(d){this._initLayout(),this._update(),this._map=d,d.on("zoomend",this._checkDisabledLayers,this);for(var y=0;y<this._layers.length;y++)this._layers[y].layer.on("add remove",this._onLayerChange,this);return this._container},addTo:function(d){return Vr.prototype.addTo.call(this,d),this._expandIfNotCollapsed()},onRemove:function(){this._map.off("zoomend",this._checkDisabledLayers,this);for(var d=0;d<this._layers.length;d++)this._layers[d].layer.off("add remove",this._onLayerChange,this)},addBaseLayer:function(d,y){return this._addLayer(d,y),this._map?this._update():this},addOverlay:function(d,y){return this._addLayer(d,y,!0),this._map?this._update():this},removeLayer:function(d){d.off("add remove",this._onLayerChange,this);var y=this._getLayer(c(d));return y&&this._layers.splice(this._layers.indexOf(y),1),this._map?this._update():this},expand:function(){He(this._container,"leaflet-control-layers-expanded"),this._section.style.height=null;var d=this._map.getSize().y-(this._container.offsetTop+50);return d<this._section.clientHeight?(He(this._section,"leaflet-control-layers-scrollbar"),this._section.style.height=d+"px"):Qt(this._section,"leaflet-control-layers-scrollbar"),this._checkDisabledLayers(),this},collapse:function(){return Qt(this._container,"leaflet-control-layers-expanded"),this},_initLayout:function(){var d="leaflet-control-layers",y=this._container=wt("div",d),T=this.options.collapsed;y.setAttribute("aria-haspopup",!0),Cs(y),Ji(y);var P=this._section=wt("section",d+"-list");T&&(this._map.on("click",this.collapse,this),at(y,{mouseenter:this._expandSafely,mouseleave:this.collapse},this));var M=this._layersLink=wt("a",d+"-toggle",y);M.href="#",M.title="Layers",M.setAttribute("role","button"),at(M,{keydown:function(W){W.keyCode===13&&this._expandSafely()},click:function(W){En(W),this._expandSafely()}},this),T||this.expand(),this._baseLayersList=wt("div",d+"-base",P),this._separator=wt("div",d+"-separator",P),this._overlaysList=wt("div",d+"-overlays",P),y.appendChild(P)},_getLayer:function(d){for(var y=0;y<this._layers.length;y++)if(this._layers[y]&&c(this._layers[y].layer)===d)return this._layers[y]},_addLayer:function(d,y,T){this._map&&d.on("add remove",this._onLayerChange,this),this._layers.push({layer:d,name:y,overlay:T}),this.options.sortLayers&&this._layers.sort(s(function(P,M){return this.options.sortFunction(P.layer,M.layer,P.name,M.name)},this)),this.options.autoZIndex&&d.setZIndex&&(this._lastZIndex++,d.setZIndex(this._lastZIndex)),this._expandIfNotCollapsed()},_update:function(){if(!this._container)return this;bn(this._baseLayersList),bn(this._overlaysList),this._layerControlInputs=[];var d,y,T,P,M=0;for(T=0;T<this._layers.length;T++)P=this._layers[T],this._addItem(P),y=y||P.overlay,d=d||!P.overlay,M+=P.overlay?0:1;return this.options.hideSingleBase&&(d=d&&M>1,this._baseLayersList.style.display=d?"":"none"),this._separator.style.display=y&&d?"":"none",this},_onLayerChange:function(d){this._handlingClick||this._update();var y=this._getLayer(c(d.target)),T=y.overlay?d.type==="add"?"overlayadd":"overlayremove":d.type==="add"?"baselayerchange":null;T&&this._map.fire(T,y)},_createRadioElement:function(d,y){var T='<input type="radio" class="leaflet-control-layers-selector" name="'+d+'"'+(y?' checked="checked"':"")+"/>",P=document.createElement("div");return P.innerHTML=T,P.firstChild},_addItem:function(d){var y=document.createElement("label"),T=this._map.hasLayer(d.layer),P;d.overlay?(P=document.createElement("input"),P.type="checkbox",P.className="leaflet-control-layers-selector",P.defaultChecked=T):P=this._createRadioElement("leaflet-base-layers_"+c(this),T),this._layerControlInputs.push(P),P.layerId=c(d.layer),at(P,"click",this._onInputClick,this);var M=document.createElement("span");M.innerHTML=" "+d.name;var W=document.createElement("span");y.appendChild(W),W.appendChild(P),W.appendChild(M);var te=d.overlay?this._overlaysList:this._baseLayersList;return te.appendChild(y),this._checkDisabledLayers(),y},_onInputClick:function(){if(!this._preventClick){var d=this._layerControlInputs,y,T,P=[],M=[];this._handlingClick=!0;for(var W=d.length-1;W>=0;W--)y=d[W],T=this._getLayer(y.layerId).layer,y.checked?P.push(T):y.checked||M.push(T);for(W=0;W<M.length;W++)this._map.hasLayer(M[W])&&this._map.removeLayer(M[W]);for(W=0;W<P.length;W++)this._map.hasLayer(P[W])||this._map.addLayer(P[W]);this._handlingClick=!1,this._refocusOnMap()}},_checkDisabledLayers:function(){for(var d=this._layerControlInputs,y,T,P=this._map.getZoom(),M=d.length-1;M>=0;M--)y=d[M],T=this._getLayer(y.layerId).layer,y.disabled=T.options.minZoom!==void 0&&P<T.options.minZoom||T.options.maxZoom!==void 0&&P>T.options.maxZoom},_expandIfNotCollapsed:function(){return this._map&&!this.options.collapsed&&this.expand(),this},_expandSafely:function(){var d=this._section;this._preventClick=!0,at(d,"click",En),this.expand();var y=this;setTimeout(function(){Vt(d,"click",En),y._preventClick=!1})}}),Ic=function(d,y,T){return new Zo(d,y,T)},Ns=Vr.extend({options:{position:"topleft",zoomInText:'<span aria-hidden="true">+</span>',zoomInTitle:"Zoom in",zoomOutText:'<span aria-hidden="true">&#x2212;</span>',zoomOutTitle:"Zoom out"},onAdd:function(d){var y="leaflet-control-zoom",T=wt("div",y+" leaflet-bar"),P=this.options;return this._zoomInButton=this._createButton(P.zoomInText,P.zoomInTitle,y+"-in",T,this._zoomIn),this._zoomOutButton=this._createButton(P.zoomOutText,P.zoomOutTitle,y+"-out",T,this._zoomOut),this._updateDisabled(),d.on("zoomend zoomlevelschange",this._updateDisabled,this),T},onRemove:function(d){d.off("zoomend zoomlevelschange",this._updateDisabled,this)},disable:function(){return this._disabled=!0,this._updateDisabled(),this},enable:function(){return this._disabled=!1,this._updateDisabled(),this},_zoomIn:function(d){!this._disabled&&this._map._zoom<this._map.getMaxZoom()&&this._map.zoomIn(this._map.options.zoomDelta*(d.shiftKey?3:1))},_zoomOut:function(d){!this._disabled&&this._map._zoom>this._map.getMinZoom()&&this._map.zoomOut(this._map.options.zoomDelta*(d.shiftKey?3:1))},_createButton:function(d,y,T,P,M){var W=wt("a",T,P);return W.innerHTML=d,W.href="#",W.title=y,W.setAttribute("role","button"),W.setAttribute("aria-label",y),Cs(W),at(W,"click",_a),at(W,"click",M,this),at(W,"click",this._refocusOnMap,this),W},_updateDisabled:function(){var d=this._map,y="leaflet-disabled";Qt(this._zoomInButton,y),Qt(this._zoomOutButton,y),this._zoomInButton.setAttribute("aria-disabled","false"),this._zoomOutButton.setAttribute("aria-disabled","false"),(this._disabled||d._zoom===d.getMinZoom())&&(He(this._zoomOutButton,y),this._zoomOutButton.setAttribute("aria-disabled","true")),(this._disabled||d._zoom===d.getMaxZoom())&&(He(this._zoomInButton,y),this._zoomInButton.setAttribute("aria-disabled","true"))}});bt.mergeOptions({zoomControl:!0}),bt.addInitHook(function(){this.options.zoomControl&&(this.zoomControl=new Ns,this.addControl(this.zoomControl))});var Xd=function(d){return new Ns(d)},Nc=Vr.extend({options:{position:"bottomleft",maxWidth:100,metric:!0,imperial:!0},onAdd:function(d){var y="leaflet-control-scale",T=wt("div",y),P=this.options;return this._addScales(P,y+"-line",T),d.on(P.updateWhenIdle?"moveend":"move",this._update,this),d.whenReady(this._update,this),T},onRemove:function(d){d.off(this.options.updateWhenIdle?"moveend":"move",this._update,this)},_addScales:function(d,y,T){d.metric&&(this._mScale=wt("div",y,T)),d.imperial&&(this._iScale=wt("div",y,T))},_update:function(){var d=this._map,y=d.getSize().y/2,T=d.distance(d.containerPointToLatLng([0,y]),d.containerPointToLatLng([this.options.maxWidth,y]));this._updateScales(T)},_updateScales:function(d){this.options.metric&&d&&this._updateMetric(d),this.options.imperial&&d&&this._updateImperial(d)},_updateMetric:function(d){var y=this._getRoundNum(d),T=y<1e3?y+" m":y/1e3+" km";this._updateScale(this._mScale,T,y/d)},_updateImperial:function(d){var y=d*3.2808399,T,P,M;y>5280?(T=y/5280,P=this._getRoundNum(T),this._updateScale(this._iScale,P+" mi",P/T)):(M=this._getRoundNum(y),this._updateScale(this._iScale,M+" ft",M/y))},_updateScale:function(d,y,T){d.style.width=Math.round(this.options.maxWidth*T)+"px",d.innerHTML=y},_getRoundNum:function(d){var y=Math.pow(10,(Math.floor(d)+"").length-1),T=d/y;return T=T>=10?10:T>=5?5:T>=3?3:T>=2?2:1,y*T}}),Jo=function(d){return new Nc(d)},Pc='<svg aria-hidden="true" xmlns="http://www.w3.org/2000/svg" width="12" height="8" viewBox="0 0 12 8" class="leaflet-attribution-flag"><path fill="#4C7BE1" d="M0 0h12v4H0z"/><path fill="#FFD500" d="M0 4h12v3H0z"/><path fill="#E0BC00" d="M0 7h12v1H0z"/></svg>',nu=Vr.extend({options:{position:"bottomright",prefix:'<a href="https://leafletjs.com" title="A JavaScript library for interactive maps">'+(ae.inlineSvg?Pc+" ":"")+"Leaflet</a>"},initialize:function(d){A(this,d),this._attributions={}},onAdd:function(d){d.attributionControl=this,this._container=wt("div","leaflet-control-attribution"),Cs(this._container);for(var y in d._layers)d._layers[y].getAttribution&&this.addAttribution(d._layers[y].getAttribution());return this._update(),d.on("layeradd",this._addAttribution,this),this._container},onRemove:function(d){d.off("layeradd",this._addAttribution,this)},_addAttribution:function(d){d.layer.getAttribution&&(this.addAttribution(d.layer.getAttribution()),d.layer.once("remove",function(){this.removeAttribution(d.layer.getAttribution())},this))},setPrefix:function(d){return this.options.prefix=d,this._update(),this},addAttribution:function(d){return d?(this._attributions[d]||(this._attributions[d]=0),this._attributions[d]++,this._update(),this):this},removeAttribution:function(d){return d?(this._attributions[d]&&(this._attributions[d]--,this._update()),this):this},_update:function(){if(this._map){var d=[];for(var y in this._attributions)this._attributions[y]&&d.push(y);var T=[];this.options.prefix&&T.push(this.options.prefix),d.length&&T.push(d.join(", ")),this._container.innerHTML=T.join(' <span aria-hidden="true">|</span> ')}}});bt.mergeOptions({attributionControl:!0}),bt.addInitHook(function(){this.options.attributionControl&&new nu().addTo(this)});var ru=function(d){return new nu(d)};Vr.Layers=Zo,Vr.Zoom=Ns,Vr.Scale=Nc,Vr.Attribution=nu,fi.layers=Ic,fi.zoom=Xd,fi.scale=Jo,fi.attribution=ru;var ki=Se.extend({initialize:function(d){this._map=d},enable:function(){return this._enabled?this:(this._enabled=!0,this.addHooks(),this)},disable:function(){return this._enabled?(this._enabled=!1,this.removeHooks(),this):this},enabled:function(){return!!this._enabled}});ki.addTo=function(d,y){return d.addHandler(y,this),this};var ef={Events:ee},Ea=ae.touch?"touchstart mousedown":"mousedown",Ta=re.extend({options:{clickTolerance:3},initialize:function(d,y,T,P){A(this,P),this._element=d,this._dragStartTarget=y||d,this._preventOutline=T},enable:function(){this._enabled||(at(this._dragStartTarget,Ea,this._onDown,this),this._enabled=!0)},disable:function(){this._enabled&&(Ta._dragging===this&&this.finishDrag(!0),Vt(this._dragStartTarget,Ea,this._onDown,this),this._enabled=!1,this._moved=!1)},_onDown:function(d){if(this._enabled&&(this._moved=!1,!$o(this._element,"leaflet-zoom-anim"))){if(d.touches&&d.touches.length!==1){Ta._dragging===this&&this.finishDrag();return}if(!(Ta._dragging||d.shiftKey||d.which!==1&&d.button!==1&&!d.touches)&&(Ta._dragging=this,this._preventOutline&&io(this._element),Wo(),Zi(),!this._moving)){this.fire("down");var y=d.touches?d.touches[0]:d,T=tu(this._element);this._startPoint=new le(y.clientX,y.clientY),this._startPos=Za(this._element),this._parentScale=ci(T);var P=d.type==="mousedown";at(document,P?"mousemove":"touchmove",this._onMove,this),at(document,P?"mouseup":"touchend touchcancel",this._onUp,this)}}},_onMove:function(d){if(this._enabled){if(d.touches&&d.touches.length>1){this._moved=!0;return}var y=d.touches&&d.touches.length===1?d.touches[0]:d,T=new le(y.clientX,y.clientY)._subtract(this._startPoint);!T.x&&!T.y||Math.abs(T.x)+Math.abs(T.y)<this.options.clickTolerance||(T.x/=this._parentScale.x,T.y/=this._parentScale.y,En(d),this._moved||(this.fire("dragstart"),this._moved=!0,He(document.body,"leaflet-dragging"),this._lastTarget=d.target||d.srcElement,window.SVGElementInstance&&this._lastTarget instanceof window.SVGElementInstance&&(this._lastTarget=this._lastTarget.correspondingUseElement),He(this._lastTarget,"leaflet-drag-target")),this._newPos=this._startPos.add(T),this._moving=!0,this._lastEvent=d,this._updatePosition())}},_updatePosition:function(){var d={originalEvent:this._lastEvent};this.fire("predrag",d),Xt(this._element,this._newPos),this.fire("drag",d)},_onUp:function(){this._enabled&&this.finishDrag()},finishDrag:function(d){Qt(document.body,"leaflet-dragging"),this._lastTarget&&(Qt(this._lastTarget,"leaflet-drag-target"),this._lastTarget=null),Vt(document,"mousemove touchmove",this._onMove,this),Vt(document,"mouseup touchend touchcancel",this._onUp,this),ro(),hr();var y=this._moved&&this._moving;this._moving=!1,Ta._dragging=!1,y&&this.fire("dragend",{noInertia:d,distance:this._newPos.distanceTo(this._startPos)})}});function Dc(d,y,T){var P,M=[1,4,2,8],W,te,oe,ge,De,Fe,nt,vt;for(W=0,Fe=d.length;W<Fe;W++)d[W]._code=ve(d[W],y);for(oe=0;oe<4;oe++){for(nt=M[oe],P=[],W=0,Fe=d.length,te=Fe-1;W<Fe;te=W++)ge=d[W],De=d[te],ge._code&nt?De._code&nt||(vt=ce(De,ge,nt,y,T),vt._code=ve(vt,y),P.push(vt)):(De._code&nt&&(vt=ce(De,ge,nt,y,T),vt._code=ve(vt,y),P.push(vt)),P.push(ge));d=P}return d}function Rc(d,y){var T,P,M,W,te,oe,ge,De,Fe;if(!d||d.length===0)throw new Error("latlngs not passed");Mt(d)||(console.warn("latlngs are not flat! Only the first ring will be used"),d=d[0]);var nt=Ve([0,0]),vt=Ce(d),Ar=vt.getNorthWest().distanceTo(vt.getSouthWest())*vt.getNorthEast().distanceTo(vt.getNorthWest());Ar<1700&&(nt=iu(d));var Wn=d.length,Oi=[];for(T=0;T<Wn;T++){var Bt=Ve(d[T]);Oi.push(y.project(Ve([Bt.lat-nt.lat,Bt.lng-nt.lng])))}for(oe=ge=De=0,T=0,P=Wn-1;T<Wn;P=T++)M=Oi[T],W=Oi[P],te=M.y*W.x-W.y*M.x,ge+=(M.x+W.x)*te,De+=(M.y+W.y)*te,oe+=te*3;oe===0?Fe=Oi[0]:Fe=[ge/oe,De/oe];var zt=y.unproject(Pe(Fe));return Ve([zt.lat+nt.lat,zt.lng+nt.lng])}function iu(d){for(var y=0,T=0,P=0,M=0;M<d.length;M++){var W=Ve(d[M]);y+=W.lat,T+=W.lng,P++}return Ve([y/P,T/P])}var lo={__proto__:null,clipPolygon:Dc,polygonCenter:Rc,centroid:iu};function Ur(d,y){if(!y||!d.length)return d.slice();var T=y*y;return d=k(d,T),d=Ps(d,T),d}function kc(d,y,T){return Math.sqrt(ct(d,y,T,!0))}function tf(d,y,T){return ct(d,y,T)}function Ps(d,y){var T=d.length,P=typeof Uint8Array<"u"?Uint8Array:Array,M=new P(T);M[0]=M[T-1]=1,E(d,M,y,0,T-1);var W,te=[];for(W=0;W<T;W++)M[W]&&te.push(d[W]);return te}function E(d,y,T,P,M){var W=0,te,oe,ge;for(oe=P+1;oe<=M-1;oe++)ge=ct(d[oe],d[P],d[M],!0),ge>W&&(te=oe,W=ge);W>T&&(y[te]=1,E(d,y,T,P,te),E(d,y,T,te,M))}function k(d,y){for(var T=[d[0]],P=1,M=0,W=d.length;P<W;P++)Ue(d[P],d[M])>y&&(T.push(d[P]),M=P);return M<W-1&&T.push(d[W-1]),T}var F;function Q(d,y,T,P,M){var W=P?F:ve(d,T),te=ve(y,T),oe,ge,De;for(F=te;;){if(!(W|te))return[d,y];if(W&te)return!1;oe=W||te,ge=ce(d,y,oe,T,M),De=ve(ge,T),oe===W?(d=ge,W=De):(y=ge,te=De)}}function ce(d,y,T,P,M){var W=y.x-d.x,te=y.y-d.y,oe=P.min,ge=P.max,De,Fe;return T&8?(De=d.x+W*(ge.y-d.y)/te,Fe=ge.y):T&4?(De=d.x+W*(oe.y-d.y)/te,Fe=oe.y):T&2?(De=ge.x,Fe=d.y+te*(ge.x-d.x)/W):T&1&&(De=oe.x,Fe=d.y+te*(oe.x-d.x)/W),new le(De,Fe,M)}function ve(d,y){var T=0;return d.x<y.min.x?T|=1:d.x>y.max.x&&(T|=2),d.y<y.min.y?T|=4:d.y>y.max.y&&(T|=8),T}function Ue(d,y){var T=y.x-d.x,P=y.y-d.y;return T*T+P*P}function ct(d,y,T,P){var M=y.x,W=y.y,te=T.x-M,oe=T.y-W,ge=te*te+oe*oe,De;return ge>0&&(De=((d.x-M)*te+(d.y-W)*oe)/ge,De>1?(M=T.x,W=T.y):De>0&&(M+=te*De,W+=oe*De)),te=d.x-M,oe=d.y-W,P?te*te+oe*oe:new le(M,W)}function Mt(d){return!O(d[0])||typeof d[0][0]!="object"&&typeof d[0][0]<"u"}function Ot(d){return console.warn("Deprecated use of _flat, please use L.LineUtil.isFlat instead."),Mt(d)}function fn(d,y){var T,P,M,W,te,oe,ge,De;if(!d||d.length===0)throw new Error("latlngs not passed");Mt(d)||(console.warn("latlngs are not flat! Only the first ring will be used"),d=d[0]);var Fe=Ve([0,0]),nt=Ce(d),vt=nt.getNorthWest().distanceTo(nt.getSouthWest())*nt.getNorthEast().distanceTo(nt.getNorthWest());vt<1700&&(Fe=iu(d));var Ar=d.length,Wn=[];for(T=0;T<Ar;T++){var Oi=Ve(d[T]);Wn.push(y.project(Ve([Oi.lat-Fe.lat,Oi.lng-Fe.lng])))}for(T=0,P=0;T<Ar-1;T++)P+=Wn[T].distanceTo(Wn[T+1])/2;if(P===0)De=Wn[0];else for(T=0,W=0;T<Ar-1;T++)if(te=Wn[T],oe=Wn[T+1],M=te.distanceTo(oe),W+=M,W>P){ge=(W-P)/M,De=[oe.x-ge*(oe.x-te.x),oe.y-ge*(oe.y-te.y)];break}var Bt=y.unproject(Pe(De));return Ve([Bt.lat+Fe.lat,Bt.lng+Fe.lng])}var Qi={__proto__:null,simplify:Ur,pointToSegmentDistance:kc,closestPointOnSegment:tf,clipSegment:Q,_getEdgeIntersection:ce,_getBitCode:ve,_sqClosestPointOnSegment:ct,isFlat:Mt,_flat:Ot,polylineCenter:fn},Xi={project:function(d){return new le(d.lng,d.lat)},unproject:function(d){return new je(d.y,d.x)},bounds:new X([-180,-90],[180,90])},Mi={R:6378137,R_MINOR:6356752314245179e-9,bounds:new X([-2003750834279e-5,-1549657073972e-5],[2003750834279e-5,1876465623138e-5]),project:function(d){var y=Math.PI/180,T=this.R,P=d.lat*y,M=this.R_MINOR/T,W=Math.sqrt(1-M*M),te=W*Math.sin(P),oe=Math.tan(Math.PI/4-P/2)/Math.pow((1-te)/(1+te),W/2);return P=-T*Math.log(Math.max(oe,1e-10)),new le(d.lng*y*T,P)},unproject:function(d){for(var y=180/Math.PI,T=this.R,P=this.R_MINOR/T,M=Math.sqrt(1-P*P),W=Math.exp(-d.y/T),te=Math.PI/2-2*Math.atan(W),oe=0,ge=.1,De;oe<15&&Math.abs(ge)>1e-7;oe++)De=M*Math.sin(te),De=Math.pow((1-De)/(1+De),M/2),ge=Math.PI/2-2*Math.atan(W*De)-te,te+=ge;return new je(te*y,d.x*y/T)}},Sa={__proto__:null,LonLat:Xi,Mercator:Mi,SphericalMercator:st},Qo=i({},It,{code:"EPSG:3395",projection:Mi,transformation:(function(){var d=.5/(Math.PI*Mi.R);return he(d,.5,-d,.5)})()}),Xo=i({},It,{code:"EPSG:4326",projection:Xi,transformation:he(1/180,1,-1/180,.5)}),au=i({},Ze,{projection:Xi,transformation:he(1,0,-1,0),scale:function(d){return Math.pow(2,d)},zoom:function(d){return Math.log(d)/Math.LN2},distance:function(d,y){var T=y.lng-d.lng,P=y.lat-d.lat;return Math.sqrt(T*T+P*P)},infinite:!0});Ze.Earth=It,Ze.EPSG3395=Qo,Ze.EPSG3857=gt,Ze.EPSG900913=dt,Ze.EPSG4326=Xo,Ze.Simple=au;var Aa=re.extend({options:{pane:"overlayPane",attribution:null,bubblingMouseEvents:!0},addTo:function(d){return d.addLayer(this),this},remove:function(){return this.removeFrom(this._map||this._mapToAdd)},removeFrom:function(d){return d&&d.removeLayer(this),this},getPane:function(d){return this._map.getPane(d?this.options[d]||d:this.options.pane)},addInteractiveTarget:function(d){return this._map._targets[c(d)]=this,this},removeInteractiveTarget:function(d){return delete this._map._targets[c(d)],this},getAttribution:function(){return this.options.attribution},_layerAdd:function(d){var y=d.target;if(y.hasLayer(this)){if(this._map=y,this._zoomAnimated=y._zoomAnimated,this.getEvents){var T=this.getEvents();y.on(T,this),this.once("remove",function(){y.off(T,this)},this)}this.onAdd(y),this.fire("add"),y.fire("layeradd",{layer:this})}}});bt.include({addLayer:function(d){if(!d._layerAdd)throw new Error("The provided object is not a Layer.");var y=c(d);return this._layers[y]?this:(this._layers[y]=d,d._mapToAdd=this,d.beforeAdd&&d.beforeAdd(this),this.whenReady(d._layerAdd,d),this)},removeLayer:function(d){var y=c(d);return this._layers[y]?(this._loaded&&d.onRemove(this),delete this._layers[y],this._loaded&&(this.fire("layerremove",{layer:d}),d.fire("remove")),d._map=d._mapToAdd=null,this):this},hasLayer:function(d){return c(d)in this._layers},eachLayer:function(d,y){for(var T in this._layers)d.call(y,this._layers[T]);return this},_addLayers:function(d){d=d?O(d)?d:[d]:[];for(var y=0,T=d.length;y<T;y++)this.addLayer(d[y])},_addZoomLimit:function(d){(!isNaN(d.options.maxZoom)||!isNaN(d.options.minZoom))&&(this._zoomBoundLayers[c(d)]=d,this._updateZoomLevels())},_removeZoomLimit:function(d){var y=c(d);this._zoomBoundLayers[y]&&(delete this._zoomBoundLayers[y],this._updateZoomLevels())},_updateZoomLevels:function(){var d=1/0,y=-1/0,T=this._getZoomSpan();for(var P in this._zoomBoundLayers){var M=this._zoomBoundLayers[P].options;d=M.minZoom===void 0?d:Math.min(d,M.minZoom),y=M.maxZoom===void 0?y:Math.max(y,M.maxZoom)}this._layersMaxZoom=y===-1/0?void 0:y,this._layersMinZoom=d===1/0?void 0:d,T!==this._getZoomSpan()&&this.fire("zoomlevelschange"),this.options.maxZoom===void 0&&this._layersMaxZoom&&this.getZoom()>this._layersMaxZoom&&this.setZoom(this._layersMaxZoom),this.options.minZoom===void 0&&this._layersMinZoom&&this.getZoom()<this._layersMinZoom&&this.setZoom(this._layersMinZoom)}});var su=Aa.extend({initialize:function(d,y){A(this,y),this._layers={};var T,P;if(d)for(T=0,P=d.length;T<P;T++)this.addLayer(d[T])},addLayer:function(d){var y=this.getLayerId(d);return this._layers[y]=d,this._map&&this._map.addLayer(d),this},removeLayer:function(d){var y=d in this._layers?d:this.getLayerId(d);return this._map&&this._layers[y]&&this._map.removeLayer(this._layers[y]),delete this._layers[y],this},hasLayer:function(d){var y=typeof d=="number"?d:this.getLayerId(d);return y in this._layers},clearLayers:function(){return this.eachLayer(this.removeLayer,this)},invoke:function(d){var y=Array.prototype.slice.call(arguments,1),T,P;for(T in this._layers)P=this._layers[T],P[d]&&P[d].apply(P,y);return this},onAdd:function(d){this.eachLayer(d.addLayer,d)},onRemove:function(d){this.eachLayer(d.removeLayer,d)},eachLayer:function(d,y){for(var T in this._layers)d.call(y,this._layers[T]);return this},getLayer:function(d){return this._layers[d]},getLayers:function(){var d=[];return this.eachLayer(d.push,d),d},setZIndex:function(d){return this.invoke("setZIndex",d)},getLayerId:function(d){return c(d)}}),Cb=function(d,y){return new su(d,y)},es=su.extend({addLayer:function(d){return this.hasLayer(d)?this:(d.addEventParent(this),su.prototype.addLayer.call(this,d),this.fire("layeradd",{layer:d}))},removeLayer:function(d){return this.hasLayer(d)?(d in this._layers&&(d=this._layers[d]),d.removeEventParent(this),su.prototype.removeLayer.call(this,d),this.fire("layerremove",{layer:d})):this},setStyle:function(d){return this.invoke("setStyle",d)},bringToFront:function(){return this.invoke("bringToFront")},bringToBack:function(){return this.invoke("bringToBack")},getBounds:function(){var d=new be;for(var y in this._layers){var T=this._layers[y];d.extend(T.getBounds?T.getBounds():T.getLatLng())}return d}}),fy=function(d,y){return new es(d,y)},ts=Se.extend({options:{popupAnchor:[0,0],tooltipAnchor:[0,0],crossOrigin:!1},initialize:function(d){A(this,d)},createIcon:function(d){return this._createIcon("icon",d)},createShadow:function(d){return this._createIcon("shadow",d)},_createIcon:function(d,y){var T=this._getIconUrl(d);if(!T){if(d==="icon")throw new Error("iconUrl not set in Icon options (see the docs).");return null}var P=this._createImg(T,y&&y.tagName==="IMG"?y:null);return this._setIconStyles(P,d),(this.options.crossOrigin||this.options.crossOrigin==="")&&(P.crossOrigin=this.options.crossOrigin===!0?"":this.options.crossOrigin),P},_setIconStyles:function(d,y){var T=this.options,P=T[y+"Size"];typeof P=="number"&&(P=[P,P]);var M=Pe(P),W=Pe(y==="shadow"&&T.shadowAnchor||T.iconAnchor||M&&M.divideBy(2,!0));d.className="leaflet-marker-"+y+" "+(T.className||""),W&&(d.style.marginLeft=-W.x+"px",d.style.marginTop=-W.y+"px"),M&&(d.style.width=M.x+"px",d.style.height=M.y+"px")},_createImg:function(d,y){return y=y||document.createElement("img"),y.src=d,y},_getIconUrl:function(d){return ae.retina&&this.options[d+"RetinaUrl"]||this.options[d+"Url"]}});function Mc(d){return new ts(d)}var Oc=ts.extend({options:{iconUrl:"marker-icon.png",iconRetinaUrl:"marker-icon-2x.png",shadowUrl:"marker-shadow.png",iconSize:[25,41],iconAnchor:[12,41],popupAnchor:[1,-34],tooltipAnchor:[16,-28],shadowSize:[41,41]},_getIconUrl:function(d){return typeof Oc.imagePath!="string"&&(Oc.imagePath=this._detectIconPath()),(this.options.imagePath||Oc.imagePath)+ts.prototype._getIconUrl.call(this,d)},_stripUrl:function(d){var y=function(T,P,M){var W=P.exec(T);return W&&W[M]};return d=y(d,/^url\((['"])?(.+)\1\)$/,2),d&&y(d,/^(.*)marker-icon\.png$/,1)},_detectIconPath:function(){var d=wt("div","leaflet-default-icon-path",document.body),y=no(d,"background-image")||no(d,"backgroundImage");if(document.body.removeChild(d),y=this._stripUrl(y),y)return y;var T=document.querySelector('link[href$="leaflet.css"]');return T?T.href.substring(0,T.href.length-11-1):""}}),jc=ki.extend({initialize:function(d){this._marker=d},addHooks:function(){var d=this._marker._icon;this._draggable||(this._draggable=new Ta(d,d,!0)),this._draggable.on({dragstart:this._onDragStart,predrag:this._onPreDrag,drag:this._onDrag,dragend:this._onDragEnd},this).enable(),He(d,"leaflet-marker-draggable")},removeHooks:function(){this._draggable.off({dragstart:this._onDragStart,predrag:this._onPreDrag,drag:this._onDrag,dragend:this._onDragEnd},this).disable(),this._marker._icon&&Qt(this._marker._icon,"leaflet-marker-draggable")},moved:function(){return this._draggable&&this._draggable._moved},_adjustPan:function(d){var y=this._marker,T=y._map,P=this._marker.options.autoPanSpeed,M=this._marker.options.autoPanPadding,W=Za(y._icon),te=T.getPixelBounds(),oe=T.getPixelOrigin(),ge=ue(te.min._subtract(oe).add(M),te.max._subtract(oe).subtract(M));if(!ge.contains(W)){var De=Pe((Math.max(ge.max.x,W.x)-ge.max.x)/(te.max.x-ge.max.x)-(Math.min(ge.min.x,W.x)-ge.min.x)/(te.min.x-ge.min.x),(Math.max(ge.max.y,W.y)-ge.max.y)/(te.max.y-ge.max.y)-(Math.min(ge.min.y,W.y)-ge.min.y)/(te.min.y-ge.min.y)).multiplyBy(P);T.panBy(De,{animate:!1}),this._draggable._newPos._add(De),this._draggable._startPos._add(De),Xt(y._icon,this._draggable._newPos),this._onDrag(d),this._panRequest=K(this._adjustPan.bind(this,d))}},_onDragStart:function(){this._oldLatLng=this._marker.getLatLng(),this._marker.closePopup&&this._marker.closePopup(),this._marker.fire("movestart").fire("dragstart")},_onPreDrag:function(d){this._marker.options.autoPan&&(J(this._panRequest),this._panRequest=K(this._adjustPan.bind(this,d)))},_onDrag:function(d){var y=this._marker,T=y._shadow,P=Za(y._icon),M=y._map.layerPointToLatLng(P);T&&Xt(T,P),y._latlng=M,d.latlng=M,d.oldLatLng=this._oldLatLng,y.fire("move",d).fire("drag",d)},_onDragEnd:function(d){J(this._panRequest),delete this._oldLatLng,this._marker.fire("moveend").fire("dragend",d)}}),Lc=Aa.extend({options:{icon:new Oc,interactive:!0,keyboard:!0,title:"",alt:"Marker",zIndexOffset:0,opacity:1,riseOnHover:!1,riseOffset:250,pane:"markerPane",shadowPane:"shadowPane",bubblingMouseEvents:!1,autoPanOnFocus:!0,draggable:!1,autoPan:!1,autoPanPadding:[50,50],autoPanSpeed:10},initialize:function(d,y){A(this,y),this._latlng=Ve(d)},onAdd:function(d){this._zoomAnimated=this._zoomAnimated&&d.options.markerZoomAnimation,this._zoomAnimated&&d.on("zoomanim",this._animateZoom,this),this._initIcon(),this.update()},onRemove:function(d){this.dragging&&this.dragging.enabled()&&(this.options.draggable=!0,this.dragging.removeHooks()),delete this.dragging,this._zoomAnimated&&d.off("zoomanim",this._animateZoom,this),this._removeIcon(),this._removeShadow()},getEvents:function(){return{zoom:this.update,viewreset:this.update}},getLatLng:function(){return this._latlng},setLatLng:function(d){var y=this._latlng;return this._latlng=Ve(d),this.update(),this.fire("move",{oldLatLng:y,latlng:this._latlng})},setZIndexOffset:function(d){return this.options.zIndexOffset=d,this.update()},getIcon:function(){return this.options.icon},setIcon:function(d){return this.options.icon=d,this._map&&(this._initIcon(),this.update()),this._popup&&this.bindPopup(this._popup,this._popup.options),this},getElement:function(){return this._icon},update:function(){if(this._icon&&this._map){var d=this._map.latLngToLayerPoint(this._latlng).round();this._setPos(d)}return this},_initIcon:function(){var d=this.options,y="leaflet-zoom-"+(this._zoomAnimated?"animated":"hide"),T=d.icon.createIcon(this._icon),P=!1;T!==this._icon&&(this._icon&&this._removeIcon(),P=!0,d.title&&(T.title=d.title),T.tagName==="IMG"&&(T.alt=d.alt||"")),He(T,y),d.keyboard&&(T.tabIndex="0",T.setAttribute("role","button")),this._icon=T,d.riseOnHover&&this.on({mouseover:this._bringToFront,mouseout:this._resetZIndex}),this.options.autoPanOnFocus&&at(T,"focus",this._panOnFocus,this);var M=d.icon.createShadow(this._shadow),W=!1;M!==this._shadow&&(this._removeShadow(),W=!0),M&&(He(M,y),M.alt=""),this._shadow=M,d.opacity<1&&this._updateOpacity(),P&&this.getPane().appendChild(this._icon),this._initInteraction(),M&&W&&this.getPane(d.shadowPane).appendChild(this._shadow)},_removeIcon:function(){this.options.riseOnHover&&this.off({mouseover:this._bringToFront,mouseout:this._resetZIndex}),this.options.autoPanOnFocus&&Vt(this._icon,"focus",this._panOnFocus,this),Tt(this._icon),this.removeInteractiveTarget(this._icon),this._icon=null},_removeShadow:function(){this._shadow&&Tt(this._shadow),this._shadow=null},_setPos:function(d){this._icon&&Xt(this._icon,d),this._shadow&&Xt(this._shadow,d),this._zIndex=d.y+this.options.zIndexOffset,this._resetZIndex()},_updateZIndex:function(d){this._icon&&(this._icon.style.zIndex=this._zIndex+d)},_animateZoom:function(d){var y=this._map._latLngToNewLayerPoint(this._latlng,d.zoom,d.center).round();this._setPos(y)},_initInteraction:function(){if(this.options.interactive&&(He(this._icon,"leaflet-interactive"),this.addInteractiveTarget(this._icon),jc)){var d=this.options.draggable;this.dragging&&(d=this.dragging.enabled(),this.dragging.disable()),this.dragging=new jc(this),d&&this.dragging.enable()}},setOpacity:function(d){return this.options.opacity=d,this._map&&this._updateOpacity(),this},_updateOpacity:function(){var d=this.options.opacity;this._icon&&dn(this._icon,d),this._shadow&&dn(this._shadow,d)},_bringToFront:function(){this._updateZIndex(this.options.riseOffset)},_resetZIndex:function(){this._updateZIndex(0)},_panOnFocus:function(){var d=this._map;if(d){var y=this.options.icon.options,T=y.iconSize?Pe(y.iconSize):Pe(0,0),P=y.iconAnchor?Pe(y.iconAnchor):Pe(0,0);d.panInside(this._latlng,{paddingTopLeft:P,paddingBottomRight:T.subtract(P)})}},_getPopupAnchor:function(){return this.options.icon.options.popupAnchor},_getTooltipAnchor:function(){return this.options.icon.options.tooltipAnchor}});function hy(d,y){return new Lc(d,y)}var ns=Aa.extend({options:{stroke:!0,color:"#3388ff",weight:3,opacity:1,lineCap:"round",lineJoin:"round",dashArray:null,dashOffset:null,fill:!1,fillColor:null,fillOpacity:.2,fillRule:"evenodd",interactive:!0,bubblingMouseEvents:!0},beforeAdd:function(d){this._renderer=d.getRenderer(this)},onAdd:function(){this._renderer._initPath(this),this._reset(),this._renderer._addPath(this)},onRemove:function(){this._renderer._removePath(this)},redraw:function(){return this._map&&this._renderer._updatePath(this),this},setStyle:function(d){return A(this,d),this._renderer&&(this._renderer._updateStyle(this),this.options.stroke&&d&&Object.prototype.hasOwnProperty.call(d,"weight")&&this._updateBounds()),this},bringToFront:function(){return this._renderer&&this._renderer._bringToFront(this),this},bringToBack:function(){return this._renderer&&this._renderer._bringToBack(this),this},getElement:function(){return this._path},_reset:function(){this._project(),this._update()},_clickTolerance:function(){return(this.options.stroke?this.options.weight/2:0)+(this._renderer.options.tolerance||0)}}),ou=ns.extend({options:{fill:!0,radius:10},initialize:function(d,y){A(this,y),this._latlng=Ve(d),this._radius=this.options.radius},setLatLng:function(d){var y=this._latlng;return this._latlng=Ve(d),this.redraw(),this.fire("move",{oldLatLng:y,latlng:this._latlng})},getLatLng:function(){return this._latlng},setRadius:function(d){return this.options.radius=this._radius=d,this.redraw()},getRadius:function(){return this._radius},setStyle:function(d){var y=d&&d.radius||this._radius;return ns.prototype.setStyle.call(this,d),this.setRadius(y),this},_project:function(){this._point=this._map.latLngToLayerPoint(this._latlng),this._updateBounds()},_updateBounds:function(){var d=this._radius,y=this._radiusY||d,T=this._clickTolerance(),P=[d+T,y+T];this._pxBounds=new X(this._point.subtract(P),this._point.add(P))},_update:function(){this._map&&this._updatePath()},_updatePath:function(){this._renderer._updateCircle(this)},_empty:function(){return this._radius&&!this._renderer._bounds.intersects(this._pxBounds)},_containsPoint:function(d){return d.distanceTo(this._point)<=this._radius+this._clickTolerance()}});function my(d,y){return new ou(d,y)}var nf=ou.extend({initialize:function(d,y,T){if(typeof y=="number"&&(y=i({},T,{radius:y})),A(this,y),this._latlng=Ve(d),isNaN(this.options.radius))throw new Error("Circle radius cannot be NaN");this._mRadius=this.options.radius},setRadius:function(d){return this._mRadius=d,this.redraw()},getRadius:function(){return this._mRadius},getBounds:function(){var d=[this._radius,this._radiusY||this._radius];return new be(this._map.layerPointToLatLng(this._point.subtract(d)),this._map.layerPointToLatLng(this._point.add(d)))},setStyle:ns.prototype.setStyle,_project:function(){var d=this._latlng.lng,y=this._latlng.lat,T=this._map,P=T.options.crs;if(P.distance===It.distance){var M=Math.PI/180,W=this._mRadius/It.R/M,te=T.project([y+W,d]),oe=T.project([y-W,d]),ge=te.add(oe).divideBy(2),De=T.unproject(ge).lat,Fe=Math.acos((Math.cos(W*M)-Math.sin(y*M)*Math.sin(De*M))/(Math.cos(y*M)*Math.cos(De*M)))/M;(isNaN(Fe)||Fe===0)&&(Fe=W/Math.cos(Math.PI/180*y)),this._point=ge.subtract(T.getPixelOrigin()),this._radius=isNaN(Fe)?0:ge.x-T.project([De,d-Fe]).x,this._radiusY=ge.y-te.y}else{var nt=P.unproject(P.project(this._latlng).subtract([this._mRadius,0]));this._point=T.latLngToLayerPoint(this._latlng),this._radius=this._point.x-T.latLngToLayerPoint(nt).x}this._updateBounds()}});function py(d,y,T){return new nf(d,y,T)}var Ds=ns.extend({options:{smoothFactor:1,noClip:!1},initialize:function(d,y){A(this,y),this._setLatLngs(d)},getLatLngs:function(){return this._latlngs},setLatLngs:function(d){return this._setLatLngs(d),this.redraw()},isEmpty:function(){return!this._latlngs.length},closestLayerPoint:function(d){for(var y=1/0,T=null,P=ct,M,W,te=0,oe=this._parts.length;te<oe;te++)for(var ge=this._parts[te],De=1,Fe=ge.length;De<Fe;De++){M=ge[De-1],W=ge[De];var nt=P(d,M,W,!0);nt<y&&(y=nt,T=P(d,M,W))}return T&&(T.distance=Math.sqrt(y)),T},getCenter:function(){if(!this._map)throw new Error("Must add layer to map before using getCenter()");return fn(this._defaultShape(),this._map.options.crs)},getBounds:function(){return this._bounds},addLatLng:function(d,y){return y=y||this._defaultShape(),d=Ve(d),y.push(d),this._bounds.extend(d),this.redraw()},_setLatLngs:function(d){this._bounds=new be,this._latlngs=this._convertLatLngs(d)},_defaultShape:function(){return Mt(this._latlngs)?this._latlngs:this._latlngs[0]},_convertLatLngs:function(d){for(var y=[],T=Mt(d),P=0,M=d.length;P<M;P++)T?(y[P]=Ve(d[P]),this._bounds.extend(y[P])):y[P]=this._convertLatLngs(d[P]);return y},_project:function(){var d=new X;this._rings=[],this._projectLatlngs(this._latlngs,this._rings,d),this._bounds.isValid()&&d.isValid()&&(this._rawPxBounds=d,this._updateBounds())},_updateBounds:function(){var d=this._clickTolerance(),y=new le(d,d);this._rawPxBounds&&(this._pxBounds=new X([this._rawPxBounds.min.subtract(y),this._rawPxBounds.max.add(y)]))},_projectLatlngs:function(d,y,T){var P=d[0]instanceof je,M=d.length,W,te;if(P){for(te=[],W=0;W<M;W++)te[W]=this._map.latLngToLayerPoint(d[W]),T.extend(te[W]);y.push(te)}else for(W=0;W<M;W++)this._projectLatlngs(d[W],y,T)},_clipPoints:function(){var d=this._renderer._bounds;if(this._parts=[],!(!this._pxBounds||!this._pxBounds.intersects(d))){if(this.options.noClip){this._parts=this._rings;return}var y=this._parts,T,P,M,W,te,oe,ge;for(T=0,M=0,W=this._rings.length;T<W;T++)for(ge=this._rings[T],P=0,te=ge.length;P<te-1;P++)oe=Q(ge[P],ge[P+1],d,P,!0),oe&&(y[M]=y[M]||[],y[M].push(oe[0]),(oe[1]!==ge[P+1]||P===te-2)&&(y[M].push(oe[1]),M++))}},_simplifyPoints:function(){for(var d=this._parts,y=this.options.smoothFactor,T=0,P=d.length;T<P;T++)d[T]=Ur(d[T],y)},_update:function(){this._map&&(this._clipPoints(),this._simplifyPoints(),this._updatePath())},_updatePath:function(){this._renderer._updatePoly(this)},_containsPoint:function(d,y){var T,P,M,W,te,oe,ge=this._clickTolerance();if(!this._pxBounds||!this._pxBounds.contains(d))return!1;for(T=0,W=this._parts.length;T<W;T++)for(oe=this._parts[T],P=0,te=oe.length,M=te-1;P<te;M=P++)if(!(!y&&P===0)&&kc(d,oe[M],oe[P])<=ge)return!0;return!1}});function Ib(d,y){return new Ds(d,y)}Ds._flat=Ot;var lu=Ds.extend({options:{fill:!0},isEmpty:function(){return!this._latlngs.length||!this._latlngs[0].length},getCenter:function(){if(!this._map)throw new Error("Must add layer to map before using getCenter()");return Rc(this._defaultShape(),this._map.options.crs)},_convertLatLngs:function(d){var y=Ds.prototype._convertLatLngs.call(this,d),T=y.length;return T>=2&&y[0]instanceof je&&y[0].equals(y[T-1])&&y.pop(),y},_setLatLngs:function(d){Ds.prototype._setLatLngs.call(this,d),Mt(this._latlngs)&&(this._latlngs=[this._latlngs])},_defaultShape:function(){return Mt(this._latlngs[0])?this._latlngs[0]:this._latlngs[0][0]},_clipPoints:function(){var d=this._renderer._bounds,y=this.options.weight,T=new le(y,y);if(d=new X(d.min.subtract(T),d.max.add(T)),this._parts=[],!(!this._pxBounds||!this._pxBounds.intersects(d))){if(this.options.noClip){this._parts=this._rings;return}for(var P=0,M=this._rings.length,W;P<M;P++)W=Dc(this._rings[P],d,!0),W.length&&this._parts.push(W)}},_updatePath:function(){this._renderer._updatePoly(this,!0)},_containsPoint:function(d){var y=!1,T,P,M,W,te,oe,ge,De;if(!this._pxBounds||!this._pxBounds.contains(d))return!1;for(W=0,ge=this._parts.length;W<ge;W++)for(T=this._parts[W],te=0,De=T.length,oe=De-1;te<De;oe=te++)P=T[te],M=T[oe],P.y>d.y!=M.y>d.y&&d.x<(M.x-P.x)*(d.y-P.y)/(M.y-P.y)+P.x&&(y=!y);return y||Ds.prototype._containsPoint.call(this,d,!0)}});function Nb(d,y){return new lu(d,y)}var Rs=es.extend({initialize:function(d,y){A(this,y),this._layers={},d&&this.addData(d)},addData:function(d){var y=O(d)?d:d.features,T,P,M;if(y){for(T=0,P=y.length;T<P;T++)M=y[T],(M.geometries||M.geometry||M.features||M.coordinates)&&this.addData(M);return this}var W=this.options;if(W.filter&&!W.filter(d))return this;var te=Fr(d,W);return te?(te.feature=sf(d),te.defaultOptions=te.options,this.resetStyle(te),W.onEachFeature&&W.onEachFeature(d,te),this.addLayer(te)):this},resetStyle:function(d){return d===void 0?this.eachLayer(this.resetStyle,this):(d.options=i({},d.defaultOptions),this._setLayerStyle(d,this.options.style),this)},setStyle:function(d){return this.eachLayer(function(y){this._setLayerStyle(y,d)},this)},_setLayerStyle:function(d,y){d.setStyle&&(typeof y=="function"&&(y=y(d.feature)),d.setStyle(y))}});function Fr(d,y){var T=d.type==="Feature"?d.geometry:d,P=T?T.coordinates:null,M=[],W=y&&y.pointToLayer,te=y&&y.coordsToLatLng||rf,oe,ge,De,Fe;if(!P&&!T)return null;switch(T.type){case"Point":return oe=te(P),uu(W,d,oe,y);case"MultiPoint":for(De=0,Fe=P.length;De<Fe;De++)oe=te(P[De]),M.push(uu(W,d,oe,y));return new es(M);case"LineString":case"MultiLineString":return ge=Vc(P,T.type==="LineString"?0:1,te),new Ds(ge,y);case"Polygon":case"MultiPolygon":return ge=Vc(P,T.type==="Polygon"?1:2,te),new lu(ge,y);case"GeometryCollection":for(De=0,Fe=T.geometries.length;De<Fe;De++){var nt=Fr({geometry:T.geometries[De],type:"Feature",properties:d.properties},y);nt&&M.push(nt)}return new es(M);case"FeatureCollection":for(De=0,Fe=T.features.length;De<Fe;De++){var vt=Fr(T.features[De],y);vt&&M.push(vt)}return new es(M);default:throw new Error("Invalid GeoJSON object.")}}function uu(d,y,T,P){return d?d(y,T):new Lc(T,P&&P.markersInheritOptions&&P)}function rf(d){return new je(d[1],d[0],d[2])}function Vc(d,y,T){for(var P=[],M=0,W=d.length,te;M<W;M++)te=y?Vc(d[M],y-1,T):(T||rf)(d[M]),P.push(te);return P}function af(d,y){return d=Ve(d),d.alt!==void 0?[x(d.lng,y),x(d.lat,y),x(d.alt,y)]:[x(d.lng,y),x(d.lat,y)]}function Uc(d,y,T,P){for(var M=[],W=0,te=d.length;W<te;W++)M.push(y?Uc(d[W],Mt(d[W])?0:y-1,T,P):af(d[W],P));return!y&&T&&M.length>0&&M.push(M[0].slice()),M}function uo(d,y){return d.feature?i({},d.feature,{geometry:y}):sf(y)}function sf(d){return d.type==="Feature"||d.type==="FeatureCollection"?d:{type:"Feature",properties:{},geometry:d}}var co={toGeoJSON:function(d){return uo(this,{type:"Point",coordinates:af(this.getLatLng(),d)})}};Lc.include(co),nf.include(co),ou.include(co),Ds.include({toGeoJSON:function(d){var y=!Mt(this._latlngs),T=Uc(this._latlngs,y?1:0,!1,d);return uo(this,{type:(y?"Multi":"")+"LineString",coordinates:T})}}),lu.include({toGeoJSON:function(d){var y=!Mt(this._latlngs),T=y&&!Mt(this._latlngs[0]),P=Uc(this._latlngs,T?2:y?1:0,!0,d);return y||(P=[P]),uo(this,{type:(T?"Multi":"")+"Polygon",coordinates:P})}}),su.include({toMultiPoint:function(d){var y=[];return this.eachLayer(function(T){y.push(T.toGeoJSON(d).geometry.coordinates)}),uo(this,{type:"MultiPoint",coordinates:y})},toGeoJSON:function(d){var y=this.feature&&this.feature.geometry&&this.feature.geometry.type;if(y==="MultiPoint")return this.toMultiPoint(d);var T=y==="GeometryCollection",P=[];return this.eachLayer(function(M){if(M.toGeoJSON){var W=M.toGeoJSON(d);if(T)P.push(W.geometry);else{var te=sf(W);te.type==="FeatureCollection"?P.push.apply(P,te.features):P.push(te)}}}),T?uo(this,{geometries:P,type:"GeometryCollection"}):{type:"FeatureCollection",features:P}}});function of(d,y){return new Rs(d,y)}var Fc=of,cu=Aa.extend({options:{opacity:1,alt:"",interactive:!1,crossOrigin:!1,errorOverlayUrl:"",zIndex:1,className:""},initialize:function(d,y,T){this._url=d,this._bounds=Ce(y),A(this,T)},onAdd:function(){this._image||(this._initImage(),this.options.opacity<1&&this._updateOpacity()),this.options.interactive&&(He(this._image,"leaflet-interactive"),this.addInteractiveTarget(this._image)),this.getPane().appendChild(this._image),this._reset()},onRemove:function(){Tt(this._image),this.options.interactive&&this.removeInteractiveTarget(this._image)},setOpacity:function(d){return this.options.opacity=d,this._image&&this._updateOpacity(),this},setStyle:function(d){return d.opacity&&this.setOpacity(d.opacity),this},bringToFront:function(){return this._map&&wn(this._image),this},bringToBack:function(){return this._map&&Di(this._image),this},setUrl:function(d){return this._url=d,this._image&&(this._image.src=d),this},setBounds:function(d){return this._bounds=Ce(d),this._map&&this._reset(),this},getEvents:function(){var d={zoom:this._reset,viewreset:this._reset};return this._zoomAnimated&&(d.zoomanim=this._animateZoom),d},setZIndex:function(d){return this.options.zIndex=d,this._updateZIndex(),this},getBounds:function(){return this._bounds},getElement:function(){return this._image},_initImage:function(){var d=this._url.tagName==="IMG",y=this._image=d?this._url:wt("img");if(He(y,"leaflet-image-layer"),this._zoomAnimated&&He(y,"leaflet-zoom-animated"),this.options.className&&He(y,this.options.className),y.onselectstart=g,y.onmousemove=g,y.onload=s(this.fire,this,"load"),y.onerror=s(this._overlayOnError,this,"error"),(this.options.crossOrigin||this.options.crossOrigin==="")&&(y.crossOrigin=this.options.crossOrigin===!0?"":this.options.crossOrigin),this.options.zIndex&&this._updateZIndex(),d){this._url=y.src;return}y.src=this._url,y.alt=this.options.alt},_animateZoom:function(d){var y=this._map.getZoomScale(d.zoom),T=this._map._latLngBoundsToNewLayerBounds(this._bounds,d.zoom,d.center).min;xa(this._image,T,y)},_reset:function(){var d=this._image,y=new X(this._map.latLngToLayerPoint(this._bounds.getNorthWest()),this._map.latLngToLayerPoint(this._bounds.getSouthEast())),T=y.getSize();Xt(d,y.min),d.style.width=T.x+"px",d.style.height=T.y+"px"},_updateOpacity:function(){dn(this._image,this.options.opacity)},_updateZIndex:function(){this._image&&this.options.zIndex!==void 0&&this.options.zIndex!==null&&(this._image.style.zIndex=this.options.zIndex)},_overlayOnError:function(){this.fire("error");var d=this.options.errorOverlayUrl;d&&this._url!==d&&(this._url=d,this._image.src=d)},getCenter:function(){return this._bounds.getCenter()}}),gy=function(d,y,T){return new cu(d,y,T)},fo=cu.extend({options:{autoplay:!0,loop:!0,keepAspectRatio:!0,muted:!1,playsInline:!0},_initImage:function(){var d=this._url.tagName==="VIDEO",y=this._image=d?this._url:wt("video");if(He(y,"leaflet-image-layer"),this._zoomAnimated&&He(y,"leaflet-zoom-animated"),this.options.className&&He(y,this.options.className),y.onselectstart=g,y.onmousemove=g,y.onloadeddata=s(this.fire,this,"load"),d){for(var T=y.getElementsByTagName("source"),P=[],M=0;M<T.length;M++)P.push(T[M].src);this._url=T.length>0?P:[y.src];return}O(this._url)||(this._url=[this._url]),!this.options.keepAspectRatio&&Object.prototype.hasOwnProperty.call(y.style,"objectFit")&&(y.style.objectFit="fill"),y.autoplay=!!this.options.autoplay,y.loop=!!this.options.loop,y.muted=!!this.options.muted,y.playsInline=!!this.options.playsInline;for(var W=0;W<this._url.length;W++){var te=wt("source");te.src=this._url[W],y.appendChild(te)}}});function du(d,y,T){return new fo(d,y,T)}var lf=cu.extend({_initImage:function(){var d=this._image=this._url;He(d,"leaflet-image-layer"),this._zoomAnimated&&He(d,"leaflet-zoom-animated"),this.options.className&&He(d,this.options.className),d.onselectstart=g,d.onmousemove=g}});function yy(d,y,T){return new lf(d,y,T)}var Br=Aa.extend({options:{interactive:!1,offset:[0,0],className:"",pane:void 0,content:""},initialize:function(d,y){d&&(d instanceof je||O(d))?(this._latlng=Ve(d),A(this,y)):(A(this,d),this._source=y),this.options.content&&(this._content=this.options.content)},openOn:function(d){return d=arguments.length?d:this._source._map,d.hasLayer(this)||d.addLayer(this),this},close:function(){return this._map&&this._map.removeLayer(this),this},toggle:function(d){return this._map?this.close():(arguments.length?this._source=d:d=this._source,this._prepareOpen(),this.openOn(d._map)),this},onAdd:function(d){this._zoomAnimated=d._zoomAnimated,this._container||this._initLayout(),d._fadeAnimated&&dn(this._container,0),clearTimeout(this._removeTimeout),this.getPane().appendChild(this._container),this.update(),d._fadeAnimated&&dn(this._container,1),this.bringToFront(),this.options.interactive&&(He(this._container,"leaflet-interactive"),this.addInteractiveTarget(this._container))},onRemove:function(d){d._fadeAnimated?(dn(this._container,0),this._removeTimeout=setTimeout(s(Tt,void 0,this._container),200)):Tt(this._container),this.options.interactive&&(Qt(this._container,"leaflet-interactive"),this.removeInteractiveTarget(this._container))},getLatLng:function(){return this._latlng},setLatLng:function(d){return this._latlng=Ve(d),this._map&&(this._updatePosition(),this._adjustPan()),this},getContent:function(){return this._content},setContent:function(d){return this._content=d,this.update(),this},getElement:function(){return this._container},update:function(){this._map&&(this._container.style.visibility="hidden",this._updateContent(),this._updateLayout(),this._updatePosition(),this._container.style.visibility="",this._adjustPan())},getEvents:function(){var d={zoom:this._updatePosition,viewreset:this._updatePosition};return this._zoomAnimated&&(d.zoomanim=this._animateZoom),d},isOpen:function(){return!!this._map&&this._map.hasLayer(this)},bringToFront:function(){return this._map&&wn(this._container),this},bringToBack:function(){return this._map&&Di(this._container),this},_prepareOpen:function(d){var y=this._source;if(!y._map)return!1;if(y instanceof es){y=null;var T=this._source._layers;for(var P in T)if(T[P]._map){y=T[P];break}if(!y)return!1;this._source=y}if(!d)if(y.getCenter)d=y.getCenter();else if(y.getLatLng)d=y.getLatLng();else if(y.getBounds)d=y.getBounds().getCenter();else throw new Error("Unable to get source layer LatLng.");return this.setLatLng(d),this._map&&this.update(),!0},_updateContent:function(){if(this._content){var d=this._contentNode,y=typeof this._content=="function"?this._content(this._source||this):this._content;if(typeof y=="string")d.innerHTML=y;else{for(;d.hasChildNodes();)d.removeChild(d.firstChild);d.appendChild(y)}this.fire("contentupdate")}},_updatePosition:function(){if(this._map){var d=this._map.latLngToLayerPoint(this._latlng),y=Pe(this.options.offset),T=this._getAnchor();this._zoomAnimated?Xt(this._container,d.add(T)):y=y.add(d).add(T);var P=this._containerBottom=-y.y,M=this._containerLeft=-Math.round(this._containerWidth/2)+y.x;this._container.style.bottom=P+"px",this._container.style.left=M+"px"}},_getAnchor:function(){return[0,0]}});bt.include({_initOverlay:function(d,y,T,P){var M=y;return M instanceof d||(M=new d(P).setContent(y)),T&&M.setLatLng(T),M}}),Aa.include({_initOverlay:function(d,y,T,P){var M=T;return M instanceof d?(A(M,P),M._source=this):(M=y&&!P?y:new d(P,this),M.setContent(T)),M}});var Bc=Br.extend({options:{pane:"popupPane",offset:[0,7],maxWidth:300,minWidth:50,maxHeight:null,autoPan:!0,autoPanPaddingTopLeft:null,autoPanPaddingBottomRight:null,autoPanPadding:[5,5],keepInView:!1,closeButton:!0,autoClose:!0,closeOnEscapeKey:!0,className:""},openOn:function(d){return d=arguments.length?d:this._source._map,!d.hasLayer(this)&&d._popup&&d._popup.options.autoClose&&d.removeLayer(d._popup),d._popup=this,Br.prototype.openOn.call(this,d)},onAdd:function(d){Br.prototype.onAdd.call(this,d),d.fire("popupopen",{popup:this}),this._source&&(this._source.fire("popupopen",{popup:this},!0),this._source instanceof ns||this._source.on("preclick",Nt))},onRemove:function(d){Br.prototype.onRemove.call(this,d),d.fire("popupclose",{popup:this}),this._source&&(this._source.fire("popupclose",{popup:this},!0),this._source instanceof ns||this._source.off("preclick",Nt))},getEvents:function(){var d=Br.prototype.getEvents.call(this);return(this.options.closeOnClick!==void 0?this.options.closeOnClick:this._map.options.closePopupOnClick)&&(d.preclick=this.close),this.options.keepInView&&(d.moveend=this._adjustPan),d},_initLayout:function(){var d="leaflet-popup",y=this._container=wt("div",d+" "+(this.options.className||"")+" leaflet-zoom-animated"),T=this._wrapper=wt("div",d+"-content-wrapper",y);if(this._contentNode=wt("div",d+"-content",T),Cs(y),Ji(this._contentNode),at(y,"contextmenu",Nt),this._tipContainer=wt("div",d+"-tip-container",y),this._tip=wt("div",d+"-tip",this._tipContainer),this.options.closeButton){var P=this._closeButton=wt("a",d+"-close-button",y);P.setAttribute("role","button"),P.setAttribute("aria-label","Close popup"),P.href="#close",P.innerHTML='<span aria-hidden="true">&#215;</span>',at(P,"click",function(M){En(M),this.close()},this)}},_updateLayout:function(){var d=this._contentNode,y=d.style;y.width="",y.whiteSpace="nowrap";var T=d.offsetWidth;T=Math.min(T,this.options.maxWidth),T=Math.max(T,this.options.minWidth),y.width=T+1+"px",y.whiteSpace="",y.height="";var P=d.offsetHeight,M=this.options.maxHeight,W="leaflet-popup-scrolled";M&&P>M?(y.height=M+"px",He(d,W)):Qt(d,W),this._containerWidth=this._container.offsetWidth},_animateZoom:function(d){var y=this._map._latLngToNewLayerPoint(this._latlng,d.zoom,d.center),T=this._getAnchor();Xt(this._container,y.add(T))},_adjustPan:function(){if(this.options.autoPan){if(this._map._panAnim&&this._map._panAnim.stop(),this._autopanning){this._autopanning=!1;return}var d=this._map,y=parseInt(no(this._container,"marginBottom"),10)||0,T=this._container.offsetHeight+y,P=this._containerWidth,M=new le(this._containerLeft,-T-this._containerBottom);M._add(Za(this._container));var W=d.layerPointToContainerPoint(M),te=Pe(this.options.autoPanPadding),oe=Pe(this.options.autoPanPaddingTopLeft||te),ge=Pe(this.options.autoPanPaddingBottomRight||te),De=d.getSize(),Fe=0,nt=0;W.x+P+ge.x>De.x&&(Fe=W.x+P-De.x+ge.x),W.x-Fe-oe.x<0&&(Fe=W.x-oe.x),W.y+T+ge.y>De.y&&(nt=W.y+T-De.y+ge.y),W.y-nt-oe.y<0&&(nt=W.y-oe.y),(Fe||nt)&&(this.options.keepInView&&(this._autopanning=!0),d.fire("autopanstart").panBy([Fe,nt]))}},_getAnchor:function(){return Pe(this._source&&this._source._getPopupAnchor?this._source._getPopupAnchor():[0,0])}}),vy=function(d,y){return new Bc(d,y)};bt.mergeOptions({closePopupOnClick:!0}),bt.include({openPopup:function(d,y,T){return this._initOverlay(Bc,d,y,T).openOn(this),this},closePopup:function(d){return d=arguments.length?d:this._popup,d&&d.close(),this}}),Aa.include({bindPopup:function(d,y){return this._popup=this._initOverlay(Bc,this._popup,d,y),this._popupHandlersAdded||(this.on({click:this._openPopup,keypress:this._onKeyPress,remove:this.closePopup,move:this._movePopup}),this._popupHandlersAdded=!0),this},unbindPopup:function(){return this._popup&&(this.off({click:this._openPopup,keypress:this._onKeyPress,remove:this.closePopup,move:this._movePopup}),this._popupHandlersAdded=!1,this._popup=null),this},openPopup:function(d){return this._popup&&(this instanceof es||(this._popup._source=this),this._popup._prepareOpen(d||this._latlng)&&this._popup.openOn(this._map)),this},closePopup:function(){return this._popup&&this._popup.close(),this},togglePopup:function(){return this._popup&&this._popup.toggle(this),this},isPopupOpen:function(){return this._popup?this._popup.isOpen():!1},setPopupContent:function(d){return this._popup&&this._popup.setContent(d),this},getPopup:function(){return this._popup},_openPopup:function(d){if(!(!this._popup||!this._map)){_a(d);var y=d.layer||d.target;if(this._popup._source===y&&!(y instanceof ns)){this._map.hasLayer(this._popup)?this.closePopup():this.openPopup(d.latlng);return}this._popup._source=y,this.openPopup(d.latlng)}},_movePopup:function(d){this._popup.setLatLng(d.latlng)},_onKeyPress:function(d){d.originalEvent.keyCode===13&&this._openPopup(d)}});var zc=Br.extend({options:{pane:"tooltipPane",offset:[0,0],direction:"auto",permanent:!1,sticky:!1,opacity:.9},onAdd:function(d){Br.prototype.onAdd.call(this,d),this.setOpacity(this.options.opacity),d.fire("tooltipopen",{tooltip:this}),this._source&&(this.addEventParent(this._source),this._source.fire("tooltipopen",{tooltip:this},!0))},onRemove:function(d){Br.prototype.onRemove.call(this,d),d.fire("tooltipclose",{tooltip:this}),this._source&&(this.removeEventParent(this._source),this._source.fire("tooltipclose",{tooltip:this},!0))},getEvents:function(){var d=Br.prototype.getEvents.call(this);return this.options.permanent||(d.preclick=this.close),d},_initLayout:function(){var d="leaflet-tooltip",y=d+" "+(this.options.className||"")+" leaflet-zoom-"+(this._zoomAnimated?"animated":"hide");this._contentNode=this._container=wt("div",y),this._container.setAttribute("role","tooltip"),this._container.setAttribute("id","leaflet-tooltip-"+c(this))},_updateLayout:function(){},_adjustPan:function(){},_setPosition:function(d){var y,T,P=this._map,M=this._container,W=P.latLngToContainerPoint(P.getCenter()),te=P.layerPointToContainerPoint(d),oe=this.options.direction,ge=M.offsetWidth,De=M.offsetHeight,Fe=Pe(this.options.offset),nt=this._getAnchor();oe==="top"?(y=ge/2,T=De):oe==="bottom"?(y=ge/2,T=0):oe==="center"?(y=ge/2,T=De/2):oe==="right"?(y=0,T=De/2):oe==="left"?(y=ge,T=De/2):te.x<W.x?(oe="right",y=0,T=De/2):(oe="left",y=ge+(Fe.x+nt.x)*2,T=De/2),d=d.subtract(Pe(y,T,!0)).add(Fe).add(nt),Qt(M,"leaflet-tooltip-right"),Qt(M,"leaflet-tooltip-left"),Qt(M,"leaflet-tooltip-top"),Qt(M,"leaflet-tooltip-bottom"),He(M,"leaflet-tooltip-"+oe),Xt(M,d)},_updatePosition:function(){var d=this._map.latLngToLayerPoint(this._latlng);this._setPosition(d)},setOpacity:function(d){this.options.opacity=d,this._container&&dn(this._container,d)},_animateZoom:function(d){var y=this._map._latLngToNewLayerPoint(this._latlng,d.zoom,d.center);this._setPosition(y)},_getAnchor:function(){return Pe(this._source&&this._source._getTooltipAnchor&&!this.options.sticky?this._source._getTooltipAnchor():[0,0])}}),Pb=function(d,y){return new zc(d,y)};bt.include({openTooltip:function(d,y,T){return this._initOverlay(zc,d,y,T).openOn(this),this},closeTooltip:function(d){return d.close(),this}}),Aa.include({bindTooltip:function(d,y){return this._tooltip&&this.isTooltipOpen()&&this.unbindTooltip(),this._tooltip=this._initOverlay(zc,this._tooltip,d,y),this._initTooltipInteractions(),this._tooltip.options.permanent&&this._map&&this._map.hasLayer(this)&&this.openTooltip(),this},unbindTooltip:function(){return this._tooltip&&(this._initTooltipInteractions(!0),this.closeTooltip(),this._tooltip=null),this},_initTooltipInteractions:function(d){if(!(!d&&this._tooltipHandlersAdded)){var y=d?"off":"on",T={remove:this.closeTooltip,move:this._moveTooltip};this._tooltip.options.permanent?T.add=this._openTooltip:(T.mouseover=this._openTooltip,T.mouseout=this.closeTooltip,T.click=this._openTooltip,this._map?this._addFocusListeners():T.add=this._addFocusListeners),this._tooltip.options.sticky&&(T.mousemove=this._moveTooltip),this[y](T),this._tooltipHandlersAdded=!d}},openTooltip:function(d){return this._tooltip&&(this instanceof es||(this._tooltip._source=this),this._tooltip._prepareOpen(d)&&(this._tooltip.openOn(this._map),this.getElement?this._setAriaDescribedByOnLayer(this):this.eachLayer&&this.eachLayer(this._setAriaDescribedByOnLayer,this))),this},closeTooltip:function(){if(this._tooltip)return this._tooltip.close()},toggleTooltip:function(){return this._tooltip&&this._tooltip.toggle(this),this},isTooltipOpen:function(){return this._tooltip.isOpen()},setTooltipContent:function(d){return this._tooltip&&this._tooltip.setContent(d),this},getTooltip:function(){return this._tooltip},_addFocusListeners:function(){this.getElement?this._addFocusListenersOnLayer(this):this.eachLayer&&this.eachLayer(this._addFocusListenersOnLayer,this)},_addFocusListenersOnLayer:function(d){var y=typeof d.getElement=="function"&&d.getElement();y&&(at(y,"focus",function(){this._tooltip._source=d,this.openTooltip()},this),at(y,"blur",this.closeTooltip,this))},_setAriaDescribedByOnLayer:function(d){var y=typeof d.getElement=="function"&&d.getElement();y&&y.setAttribute("aria-describedby",this._tooltip._container.id)},_openTooltip:function(d){if(!(!this._tooltip||!this._map)){if(this._map.dragging&&this._map.dragging.moving()&&!this._openOnceFlag){this._openOnceFlag=!0;var y=this;this._map.once("moveend",function(){y._openOnceFlag=!1,y._openTooltip(d)});return}this._tooltip._source=d.layer||d.target,this.openTooltip(this._tooltip.options.sticky?d.latlng:void 0)}},_moveTooltip:function(d){var y=d.latlng,T,P;this._tooltip.options.sticky&&d.originalEvent&&(T=this._map.mouseEventToContainerPoint(d.originalEvent),P=this._map.containerPointToLayerPoint(T),y=this._map.layerPointToLatLng(P)),this._tooltip.setLatLng(y)}});var xy=ts.extend({options:{iconSize:[12,12],html:!1,bgPos:null,className:"leaflet-div-icon"},createIcon:function(d){var y=d&&d.tagName==="DIV"?d:document.createElement("div"),T=this.options;if(T.html instanceof Element?(bn(y),y.appendChild(T.html)):y.innerHTML=T.html!==!1?T.html:"",T.bgPos){var P=Pe(T.bgPos);y.style.backgroundPosition=-P.x+"px "+-P.y+"px"}return this._setIconStyles(y,"icon"),y},createShadow:function(){return null}});function Db(d){return new xy(d)}ts.Default=Oc;var fu=Aa.extend({options:{tileSize:256,opacity:1,updateWhenIdle:ae.mobile,updateWhenZooming:!0,updateInterval:200,zIndex:1,bounds:null,minZoom:0,maxZoom:void 0,maxNativeZoom:void 0,minNativeZoom:void 0,noWrap:!1,pane:"tilePane",className:"",keepBuffer:2},initialize:function(d){A(this,d)},onAdd:function(){this._initContainer(),this._levels={},this._tiles={},this._resetView()},beforeAdd:function(d){d._addZoomLimit(this)},onRemove:function(d){this._removeAllTiles(),Tt(this._container),d._removeZoomLimit(this),this._container=null,this._tileZoom=void 0},bringToFront:function(){return this._map&&(wn(this._container),this._setAutoZIndex(Math.max)),this},bringToBack:function(){return this._map&&(Di(this._container),this._setAutoZIndex(Math.min)),this},getContainer:function(){return this._container},setOpacity:function(d){return this.options.opacity=d,this._updateOpacity(),this},setZIndex:function(d){return this.options.zIndex=d,this._updateZIndex(),this},isLoading:function(){return this._loading},redraw:function(){if(this._map){this._removeAllTiles();var d=this._clampZoom(this._map.getZoom());d!==this._tileZoom&&(this._tileZoom=d,this._updateLevels()),this._update()}return this},getEvents:function(){var d={viewprereset:this._invalidateAll,viewreset:this._resetView,zoom:this._resetView,moveend:this._onMoveEnd};return this.options.updateWhenIdle||(this._onMove||(this._onMove=h(this._onMoveEnd,this.options.updateInterval,this)),d.move=this._onMove),this._zoomAnimated&&(d.zoomanim=this._animateZoom),d},createTile:function(){return document.createElement("div")},getTileSize:function(){var d=this.options.tileSize;return d instanceof le?d:new le(d,d)},_updateZIndex:function(){this._container&&this.options.zIndex!==void 0&&this.options.zIndex!==null&&(this._container.style.zIndex=this.options.zIndex)},_setAutoZIndex:function(d){for(var y=this.getPane().children,T=-d(-1/0,1/0),P=0,M=y.length,W;P<M;P++)W=y[P].style.zIndex,y[P]!==this._container&&W&&(T=d(T,+W));isFinite(T)&&(this.options.zIndex=T+d(-1,1),this._updateZIndex())},_updateOpacity:function(){if(this._map&&!ae.ielt9){dn(this._container,this.options.opacity);var d=+new Date,y=!1,T=!1;for(var P in this._tiles){var M=this._tiles[P];if(!(!M.current||!M.loaded)){var W=Math.min(1,(d-M.loaded)/200);dn(M.el,W),W<1?y=!0:(M.active?T=!0:this._onOpaqueTile(M),M.active=!0)}}T&&!this._noPrune&&this._pruneTiles(),y&&(J(this._fadeFrame),this._fadeFrame=K(this._updateOpacity,this))}},_onOpaqueTile:g,_initContainer:function(){this._container||(this._container=wt("div","leaflet-layer "+(this.options.className||"")),this._updateZIndex(),this.options.opacity<1&&this._updateOpacity(),this.getPane().appendChild(this._container))},_updateLevels:function(){var d=this._tileZoom,y=this.options.maxZoom;if(d!==void 0){for(var T in this._levels)T=Number(T),this._levels[T].el.children.length||T===d?(this._levels[T].el.style.zIndex=y-Math.abs(d-T),this._onUpdateLevel(T)):(Tt(this._levels[T].el),this._removeTilesAtZoom(T),this._onRemoveLevel(T),delete this._levels[T]);var P=this._levels[d],M=this._map;return P||(P=this._levels[d]={},P.el=wt("div","leaflet-tile-container leaflet-zoom-animated",this._container),P.el.style.zIndex=y,P.origin=M.project(M.unproject(M.getPixelOrigin()),d).round(),P.zoom=d,this._setZoomTransform(P,M.getCenter(),M.getZoom()),g(P.el.offsetWidth),this._onCreateLevel(P)),this._level=P,P}},_onUpdateLevel:g,_onRemoveLevel:g,_onCreateLevel:g,_pruneTiles:function(){if(this._map){var d,y,T=this._map.getZoom();if(T>this.options.maxZoom||T<this.options.minZoom){this._removeAllTiles();return}for(d in this._tiles)y=this._tiles[d],y.retain=y.current;for(d in this._tiles)if(y=this._tiles[d],y.current&&!y.active){var P=y.coords;this._retainParent(P.x,P.y,P.z,P.z-5)||this._retainChildren(P.x,P.y,P.z,P.z+2)}for(d in this._tiles)this._tiles[d].retain||this._removeTile(d)}},_removeTilesAtZoom:function(d){for(var y in this._tiles)this._tiles[y].coords.z===d&&this._removeTile(y)},_removeAllTiles:function(){for(var d in this._tiles)this._removeTile(d)},_invalidateAll:function(){for(var d in this._levels)Tt(this._levels[d].el),this._onRemoveLevel(Number(d)),delete this._levels[d];this._removeAllTiles(),this._tileZoom=void 0},_retainParent:function(d,y,T,P){var M=Math.floor(d/2),W=Math.floor(y/2),te=T-1,oe=new le(+M,+W);oe.z=+te;var ge=this._tileCoordsToKey(oe),De=this._tiles[ge];return De&&De.active?(De.retain=!0,!0):(De&&De.loaded&&(De.retain=!0),te>P?this._retainParent(M,W,te,P):!1)},_retainChildren:function(d,y,T,P){for(var M=2*d;M<2*d+2;M++)for(var W=2*y;W<2*y+2;W++){var te=new le(M,W);te.z=T+1;var oe=this._tileCoordsToKey(te),ge=this._tiles[oe];if(ge&&ge.active){ge.retain=!0;continue}else ge&&ge.loaded&&(ge.retain=!0);T+1<P&&this._retainChildren(M,W,T+1,P)}},_resetView:function(d){var y=d&&(d.pinch||d.flyTo);this._setView(this._map.getCenter(),this._map.getZoom(),y,y)},_animateZoom:function(d){this._setView(d.center,d.zoom,!0,d.noUpdate)},_clampZoom:function(d){var y=this.options;return y.minNativeZoom!==void 0&&d<y.minNativeZoom?y.minNativeZoom:y.maxNativeZoom!==void 0&&y.maxNativeZoom<d?y.maxNativeZoom:d},_setView:function(d,y,T,P){var M=Math.round(y);this.options.maxZoom!==void 0&&M>this.options.maxZoom||this.options.minZoom!==void 0&&M<this.options.minZoom?M=void 0:M=this._clampZoom(M);var W=this.options.updateWhenZooming&&M!==this._tileZoom;(!P||W)&&(this._tileZoom=M,this._abortLoading&&this._abortLoading(),this._updateLevels(),this._resetGrid(),M!==void 0&&this._update(d),T||this._pruneTiles(),this._noPrune=!!T),this._setZoomTransforms(d,y)},_setZoomTransforms:function(d,y){for(var T in this._levels)this._setZoomTransform(this._levels[T],d,y)},_setZoomTransform:function(d,y,T){var P=this._map.getZoomScale(T,d.zoom),M=d.origin.multiplyBy(P).subtract(this._map._getNewPixelOrigin(y,T)).round();ae.any3d?xa(d.el,M,P):Xt(d.el,M)},_resetGrid:function(){var d=this._map,y=d.options.crs,T=this._tileSize=this.getTileSize(),P=this._tileZoom,M=this._map.getPixelWorldBounds(this._tileZoom);M&&(this._globalTileRange=this._pxBoundsToTileRange(M)),this._wrapX=y.wrapLng&&!this.options.noWrap&&[Math.floor(d.project([0,y.wrapLng[0]],P).x/T.x),Math.ceil(d.project([0,y.wrapLng[1]],P).x/T.y)],this._wrapY=y.wrapLat&&!this.options.noWrap&&[Math.floor(d.project([y.wrapLat[0],0],P).y/T.x),Math.ceil(d.project([y.wrapLat[1],0],P).y/T.y)]},_onMoveEnd:function(){!this._map||this._map._animatingZoom||this._update()},_getTiledPixelBounds:function(d){var y=this._map,T=y._animatingZoom?Math.max(y._animateToZoom,y.getZoom()):y.getZoom(),P=y.getZoomScale(T,this._tileZoom),M=y.project(d,this._tileZoom).floor(),W=y.getSize().divideBy(P*2);return new X(M.subtract(W),M.add(W))},_update:function(d){var y=this._map;if(y){var T=this._clampZoom(y.getZoom());if(d===void 0&&(d=y.getCenter()),this._tileZoom!==void 0){var P=this._getTiledPixelBounds(d),M=this._pxBoundsToTileRange(P),W=M.getCenter(),te=[],oe=this.options.keepBuffer,ge=new X(M.getBottomLeft().subtract([oe,-oe]),M.getTopRight().add([oe,-oe]));if(!(isFinite(M.min.x)&&isFinite(M.min.y)&&isFinite(M.max.x)&&isFinite(M.max.y)))throw new Error("Attempted to load an infinite number of tiles");for(var De in this._tiles){var Fe=this._tiles[De].coords;(Fe.z!==this._tileZoom||!ge.contains(new le(Fe.x,Fe.y)))&&(this._tiles[De].current=!1)}if(Math.abs(T-this._tileZoom)>1){this._setView(d,T);return}for(var nt=M.min.y;nt<=M.max.y;nt++)for(var vt=M.min.x;vt<=M.max.x;vt++){var Ar=new le(vt,nt);if(Ar.z=this._tileZoom,!!this._isValidTile(Ar)){var Wn=this._tiles[this._tileCoordsToKey(Ar)];Wn?Wn.current=!0:te.push(Ar)}}if(te.sort(function(Bt,zt){return Bt.distanceTo(W)-zt.distanceTo(W)}),te.length!==0){this._loading||(this._loading=!0,this.fire("loading"));var Oi=document.createDocumentFragment();for(vt=0;vt<te.length;vt++)this._addTile(te[vt],Oi);this._level.el.appendChild(Oi)}}}},_isValidTile:function(d){var y=this._map.options.crs;if(!y.infinite){var T=this._globalTileRange;if(!y.wrapLng&&(d.x<T.min.x||d.x>T.max.x)||!y.wrapLat&&(d.y<T.min.y||d.y>T.max.y))return!1}if(!this.options.bounds)return!0;var P=this._tileCoordsToBounds(d);return Ce(this.options.bounds).overlaps(P)},_keyToBounds:function(d){return this._tileCoordsToBounds(this._keyToTileCoords(d))},_tileCoordsToNwSe:function(d){var y=this._map,T=this.getTileSize(),P=d.scaleBy(T),M=P.add(T),W=y.unproject(P,d.z),te=y.unproject(M,d.z);return[W,te]},_tileCoordsToBounds:function(d){var y=this._tileCoordsToNwSe(d),T=new be(y[0],y[1]);return this.options.noWrap||(T=this._map.wrapLatLngBounds(T)),T},_tileCoordsToKey:function(d){return d.x+":"+d.y+":"+d.z},_keyToTileCoords:function(d){var y=d.split(":"),T=new le(+y[0],+y[1]);return T.z=+y[2],T},_removeTile:function(d){var y=this._tiles[d];y&&(Tt(y.el),delete this._tiles[d],this.fire("tileunload",{tile:y.el,coords:this._keyToTileCoords(d)}))},_initTile:function(d){He(d,"leaflet-tile");var y=this.getTileSize();d.style.width=y.x+"px",d.style.height=y.y+"px",d.onselectstart=g,d.onmousemove=g,ae.ielt9&&this.options.opacity<1&&dn(d,this.options.opacity)},_addTile:function(d,y){var T=this._getTilePos(d),P=this._tileCoordsToKey(d),M=this.createTile(this._wrapCoords(d),s(this._tileReady,this,d));this._initTile(M),this.createTile.length<2&&K(s(this._tileReady,this,d,null,M)),Xt(M,T),this._tiles[P]={el:M,coords:d,current:!0},y.appendChild(M),this.fire("tileloadstart",{tile:M,coords:d})},_tileReady:function(d,y,T){y&&this.fire("tileerror",{error:y,tile:T,coords:d});var P=this._tileCoordsToKey(d);T=this._tiles[P],T&&(T.loaded=+new Date,this._map._fadeAnimated?(dn(T.el,0),J(this._fadeFrame),this._fadeFrame=K(this._updateOpacity,this)):(T.active=!0,this._pruneTiles()),y||(He(T.el,"leaflet-tile-loaded"),this.fire("tileload",{tile:T.el,coords:d})),this._noTilesToLoad()&&(this._loading=!1,this.fire("load"),ae.ielt9||!this._map._fadeAnimated?K(this._pruneTiles,this):setTimeout(s(this._pruneTiles,this),250)))},_getTilePos:function(d){return d.scaleBy(this.getTileSize()).subtract(this._level.origin)},_wrapCoords:function(d){var y=new le(this._wrapX?p(d.x,this._wrapX):d.x,this._wrapY?p(d.y,this._wrapY):d.y);return y.z=d.z,y},_pxBoundsToTileRange:function(d){var y=this.getTileSize();return new X(d.min.unscaleBy(y).floor(),d.max.unscaleBy(y).ceil().subtract([1,1]))},_noTilesToLoad:function(){for(var d in this._tiles)if(!this._tiles[d].loaded)return!1;return!0}});function _y(d){return new fu(d)}var ho=fu.extend({options:{minZoom:0,maxZoom:18,subdomains:"abc",errorTileUrl:"",zoomOffset:0,tms:!1,zoomReverse:!1,detectRetina:!1,crossOrigin:!1,referrerPolicy:!1},initialize:function(d,y){this._url=d,y=A(this,y),y.detectRetina&&ae.retina&&y.maxZoom>0?(y.tileSize=Math.floor(y.tileSize/2),y.zoomReverse?(y.zoomOffset--,y.minZoom=Math.min(y.maxZoom,y.minZoom+1)):(y.zoomOffset++,y.maxZoom=Math.max(y.minZoom,y.maxZoom-1)),y.minZoom=Math.max(0,y.minZoom)):y.zoomReverse?y.minZoom=Math.min(y.maxZoom,y.minZoom):y.maxZoom=Math.max(y.minZoom,y.maxZoom),typeof y.subdomains=="string"&&(y.subdomains=y.subdomains.split("")),this.on("tileunload",this._onTileRemove)},setUrl:function(d,y){return this._url===d&&y===void 0&&(y=!0),this._url=d,y||this.redraw(),this},createTile:function(d,y){var T=document.createElement("img");return at(T,"load",s(this._tileOnLoad,this,y,T)),at(T,"error",s(this._tileOnError,this,y,T)),(this.options.crossOrigin||this.options.crossOrigin==="")&&(T.crossOrigin=this.options.crossOrigin===!0?"":this.options.crossOrigin),typeof this.options.referrerPolicy=="string"&&(T.referrerPolicy=this.options.referrerPolicy),T.alt="",T.src=this.getTileUrl(d),T},getTileUrl:function(d){var y={r:ae.retina?"@2x":"",s:this._getSubdomain(d),x:d.x,y:d.y,z:this._getZoomForUrl()};if(this._map&&!this._map.options.crs.infinite){var T=this._globalTileRange.max.y-d.y;this.options.tms&&(y.y=T),y["-y"]=T}return j(this._url,i(y,this.options))},_tileOnLoad:function(d,y){ae.ielt9?setTimeout(s(d,this,null,y),0):d(null,y)},_tileOnError:function(d,y,T){var P=this.options.errorTileUrl;P&&y.getAttribute("src")!==P&&(y.src=P),d(T,y)},_onTileRemove:function(d){d.tile.onload=null},_getZoomForUrl:function(){var d=this._tileZoom,y=this.options.maxZoom,T=this.options.zoomReverse,P=this.options.zoomOffset;return T&&(d=y-d),d+P},_getSubdomain:function(d){var y=Math.abs(d.x+d.y)%this.options.subdomains.length;return this.options.subdomains[y]},_abortLoading:function(){var d,y;for(d in this._tiles)if(this._tiles[d].coords.z!==this._tileZoom&&(y=this._tiles[d].el,y.onload=g,y.onerror=g,!y.complete)){y.src=$;var T=this._tiles[d].coords;Tt(y),delete this._tiles[d],this.fire("tileabort",{tile:y,coords:T})}},_removeTile:function(d){var y=this._tiles[d];if(y)return y.el.setAttribute("src",$),fu.prototype._removeTile.call(this,d)},_tileReady:function(d,y,T){if(!(!this._map||T&&T.getAttribute("src")===$))return fu.prototype._tileReady.call(this,d,y,T)}});function ea(d,y){return new ho(d,y)}var qc=ho.extend({defaultWmsParams:{service:"WMS",request:"GetMap",layers:"",styles:"",format:"image/jpeg",transparent:!1,version:"1.1.1"},options:{crs:null,uppercase:!1},initialize:function(d,y){this._url=d;var T=i({},this.defaultWmsParams);for(var P in y)P in this.options||(T[P]=y[P]);y=A(this,y);var M=y.detectRetina&&ae.retina?2:1,W=this.getTileSize();T.width=W.x*M,T.height=W.y*M,this.wmsParams=T},onAdd:function(d){this._crs=this.options.crs||d.options.crs,this._wmsVersion=parseFloat(this.wmsParams.version);var y=this._wmsVersion>=1.3?"crs":"srs";this.wmsParams[y]=this._crs.code,ho.prototype.onAdd.call(this,d)},getTileUrl:function(d){var y=this._tileCoordsToNwSe(d),T=this._crs,P=ue(T.project(y[0]),T.project(y[1])),M=P.min,W=P.max,te=(this._wmsVersion>=1.3&&this._crs===Xo?[M.y,M.x,W.y,W.x]:[M.x,M.y,W.x,W.y]).join(","),oe=ho.prototype.getTileUrl.call(this,d);return oe+D(this.wmsParams,oe,this.options.uppercase)+(this.options.uppercase?"&BBOX=":"&bbox=")+te},setParams:function(d,y){return i(this.wmsParams,d),y||this.redraw(),this}});function ta(d,y){return new qc(d,y)}ho.WMS=qc,ea.wms=ta;var hi=Aa.extend({options:{padding:.1},initialize:function(d){A(this,d),c(this),this._layers=this._layers||{}},onAdd:function(){this._container||(this._initContainer(),He(this._container,"leaflet-zoom-animated")),this.getPane().appendChild(this._container),this._update(),this.on("update",this._updatePaths,this)},onRemove:function(){this.off("update",this._updatePaths,this),this._destroyContainer()},getEvents:function(){var d={viewreset:this._reset,zoom:this._onZoom,moveend:this._update,zoomend:this._onZoomEnd};return this._zoomAnimated&&(d.zoomanim=this._onAnimZoom),d},_onAnimZoom:function(d){this._updateTransform(d.center,d.zoom)},_onZoom:function(){this._updateTransform(this._map.getCenter(),this._map.getZoom())},_updateTransform:function(d,y){var T=this._map.getZoomScale(y,this._zoom),P=this._map.getSize().multiplyBy(.5+this.options.padding),M=this._map.project(this._center,y),W=P.multiplyBy(-T).add(M).subtract(this._map._getNewPixelOrigin(d,y));ae.any3d?xa(this._container,W,T):Xt(this._container,W)},_reset:function(){this._update(),this._updateTransform(this._center,this._zoom);for(var d in this._layers)this._layers[d]._reset()},_onZoomEnd:function(){for(var d in this._layers)this._layers[d]._project()},_updatePaths:function(){for(var d in this._layers)this._layers[d]._update()},_update:function(){var d=this.options.padding,y=this._map.getSize(),T=this._map.containerPointToLayerPoint(y.multiplyBy(-d)).round();this._bounds=new X(T,T.add(y.multiplyBy(1+d*2)).round()),this._center=this._map.getCenter(),this._zoom=this._map.getZoom()}}),uf=hi.extend({options:{tolerance:0},getEvents:function(){var d=hi.prototype.getEvents.call(this);return d.viewprereset=this._onViewPreReset,d},_onViewPreReset:function(){this._postponeUpdatePaths=!0},onAdd:function(){hi.prototype.onAdd.call(this),this._draw()},_initContainer:function(){var d=this._container=document.createElement("canvas");at(d,"mousemove",this._onMouseMove,this),at(d,"click dblclick mousedown mouseup contextmenu",this._onClick,this),at(d,"mouseout",this._handleMouseOut,this),d._leaflet_disable_events=!0,this._ctx=d.getContext("2d")},_destroyContainer:function(){J(this._redrawRequest),delete this._ctx,Tt(this._container),Vt(this._container),delete this._container},_updatePaths:function(){if(!this._postponeUpdatePaths){var d;this._redrawBounds=null;for(var y in this._layers)d=this._layers[y],d._update();this._redraw()}},_update:function(){if(!(this._map._animatingZoom&&this._bounds)){hi.prototype._update.call(this);var d=this._bounds,y=this._container,T=d.getSize(),P=ae.retina?2:1;Xt(y,d.min),y.width=P*T.x,y.height=P*T.y,y.style.width=T.x+"px",y.style.height=T.y+"px",ae.retina&&this._ctx.scale(2,2),this._ctx.translate(-d.min.x,-d.min.y),this.fire("update")}},_reset:function(){hi.prototype._reset.call(this),this._postponeUpdatePaths&&(this._postponeUpdatePaths=!1,this._updatePaths())},_initPath:function(d){this._updateDashArray(d),this._layers[c(d)]=d;var y=d._order={layer:d,prev:this._drawLast,next:null};this._drawLast&&(this._drawLast.next=y),this._drawLast=y,this._drawFirst=this._drawFirst||this._drawLast},_addPath:function(d){this._requestRedraw(d)},_removePath:function(d){var y=d._order,T=y.next,P=y.prev;T?T.prev=P:this._drawLast=P,P?P.next=T:this._drawFirst=T,delete d._order,delete this._layers[c(d)],this._requestRedraw(d)},_updatePath:function(d){this._extendRedrawBounds(d),d._project(),d._update(),this._requestRedraw(d)},_updateStyle:function(d){this._updateDashArray(d),this._requestRedraw(d)},_updateDashArray:function(d){if(typeof d.options.dashArray=="string"){var y=d.options.dashArray.split(/[, ]+/),T=[],P,M;for(M=0;M<y.length;M++){if(P=Number(y[M]),isNaN(P))return;T.push(P)}d.options._dashArray=T}else d.options._dashArray=d.options.dashArray},_requestRedraw:function(d){this._map&&(this._extendRedrawBounds(d),this._redrawRequest=this._redrawRequest||K(this._redraw,this))},_extendRedrawBounds:function(d){if(d._pxBounds){var y=(d.options.weight||0)+1;this._redrawBounds=this._redrawBounds||new X,this._redrawBounds.extend(d._pxBounds.min.subtract([y,y])),this._redrawBounds.extend(d._pxBounds.max.add([y,y]))}},_redraw:function(){this._redrawRequest=null,this._redrawBounds&&(this._redrawBounds.min._floor(),this._redrawBounds.max._ceil()),this._clear(),this._draw(),this._redrawBounds=null},_clear:function(){var d=this._redrawBounds;if(d){var y=d.getSize();this._ctx.clearRect(d.min.x,d.min.y,y.x,y.y)}else this._ctx.save(),this._ctx.setTransform(1,0,0,1,0,0),this._ctx.clearRect(0,0,this._container.width,this._container.height),this._ctx.restore()},_draw:function(){var d,y=this._redrawBounds;if(this._ctx.save(),y){var T=y.getSize();this._ctx.beginPath(),this._ctx.rect(y.min.x,y.min.y,T.x,T.y),this._ctx.clip()}this._drawing=!0;for(var P=this._drawFirst;P;P=P.next)d=P.layer,(!y||d._pxBounds&&d._pxBounds.intersects(y))&&d._updatePath();this._drawing=!1,this._ctx.restore()},_updatePoly:function(d,y){if(this._drawing){var T,P,M,W,te=d._parts,oe=te.length,ge=this._ctx;if(oe){for(ge.beginPath(),T=0;T<oe;T++){for(P=0,M=te[T].length;P<M;P++)W=te[T][P],ge[P?"lineTo":"moveTo"](W.x,W.y);y&&ge.closePath()}this._fillStroke(ge,d)}}},_updateCircle:function(d){if(!(!this._drawing||d._empty())){var y=d._point,T=this._ctx,P=Math.max(Math.round(d._radius),1),M=(Math.max(Math.round(d._radiusY),1)||P)/P;M!==1&&(T.save(),T.scale(1,M)),T.beginPath(),T.arc(y.x,y.y/M,P,0,Math.PI*2,!1),M!==1&&T.restore(),this._fillStroke(T,d)}},_fillStroke:function(d,y){var T=y.options;T.fill&&(d.globalAlpha=T.fillOpacity,d.fillStyle=T.fillColor||T.color,d.fill(T.fillRule||"evenodd")),T.stroke&&T.weight!==0&&(d.setLineDash&&d.setLineDash(y.options&&y.options._dashArray||[]),d.globalAlpha=T.opacity,d.lineWidth=T.weight,d.strokeStyle=T.color,d.lineCap=T.lineCap,d.lineJoin=T.lineJoin,d.stroke())},_onClick:function(d){for(var y=this._map.mouseEventToLayerPoint(d),T,P,M=this._drawFirst;M;M=M.next)T=M.layer,T.options.interactive&&T._containsPoint(y)&&(!(d.type==="click"||d.type==="preclick")||!this._map._draggableMoved(T))&&(P=T);this._fireEvent(P?[P]:!1,d)},_onMouseMove:function(d){if(!(!this._map||this._map.dragging.moving()||this._map._animatingZoom)){var y=this._map.mouseEventToLayerPoint(d);this._handleMouseHover(d,y)}},_handleMouseOut:function(d){var y=this._hoveredLayer;y&&(Qt(this._container,"leaflet-interactive"),this._fireEvent([y],d,"mouseout"),this._hoveredLayer=null,this._mouseHoverThrottled=!1)},_handleMouseHover:function(d,y){if(!this._mouseHoverThrottled){for(var T,P,M=this._drawFirst;M;M=M.next)T=M.layer,T.options.interactive&&T._containsPoint(y)&&(P=T);P!==this._hoveredLayer&&(this._handleMouseOut(d),P&&(He(this._container,"leaflet-interactive"),this._fireEvent([P],d,"mouseover"),this._hoveredLayer=P)),this._fireEvent(this._hoveredLayer?[this._hoveredLayer]:!1,d),this._mouseHoverThrottled=!0,setTimeout(s(function(){this._mouseHoverThrottled=!1},this),32)}},_fireEvent:function(d,y,T){this._map._fireDOMEvent(y,T||y.type,d)},_bringToFront:function(d){var y=d._order;if(y){var T=y.next,P=y.prev;if(T)T.prev=P;else return;P?P.next=T:T&&(this._drawFirst=T),y.prev=this._drawLast,this._drawLast.next=y,y.next=null,this._drawLast=y,this._requestRedraw(d)}},_bringToBack:function(d){var y=d._order;if(y){var T=y.next,P=y.prev;if(P)P.next=T;else return;T?T.prev=P:P&&(this._drawLast=P),y.prev=null,y.next=this._drawFirst,this._drawFirst.prev=y,this._drawFirst=y,this._requestRedraw(d)}}});function Hc(d){return ae.canvas?new uf(d):null}var mo=(function(){try{return document.namespaces.add("lvml","urn:schemas-microsoft-com:vml"),function(d){return document.createElement("<lvml:"+d+' class="lvml">')}}catch{}return function(d){return document.createElement("<"+d+' xmlns="urn:schemas-microsoft.com:vml" class="lvml">')}})(),vm={_initContainer:function(){this._container=wt("div","leaflet-vml-container")},_update:function(){this._map._animatingZoom||(hi.prototype._update.call(this),this.fire("update"))},_initPath:function(d){var y=d._container=mo("shape");He(y,"leaflet-vml-shape "+(this.options.className||"")),y.coordsize="1 1",d._path=mo("path"),y.appendChild(d._path),this._updateStyle(d),this._layers[c(d)]=d},_addPath:function(d){var y=d._container;this._container.appendChild(y),d.options.interactive&&d.addInteractiveTarget(y)},_removePath:function(d){var y=d._container;Tt(y),d.removeInteractiveTarget(y),delete this._layers[c(d)]},_updateStyle:function(d){var y=d._stroke,T=d._fill,P=d.options,M=d._container;M.stroked=!!P.stroke,M.filled=!!P.fill,P.stroke?(y||(y=d._stroke=mo("stroke")),M.appendChild(y),y.weight=P.weight+"px",y.color=P.color,y.opacity=P.opacity,P.dashArray?y.dashStyle=O(P.dashArray)?P.dashArray.join(" "):P.dashArray.replace(/( *, *)/g," "):y.dashStyle="",y.endcap=P.lineCap.replace("butt","flat"),y.joinstyle=P.lineJoin):y&&(M.removeChild(y),d._stroke=null),P.fill?(T||(T=d._fill=mo("fill")),M.appendChild(T),T.color=P.fillColor||P.color,T.opacity=P.fillOpacity):T&&(M.removeChild(T),d._fill=null)},_updateCircle:function(d){var y=d._point.round(),T=Math.round(d._radius),P=Math.round(d._radiusY||T);this._setPath(d,d._empty()?"M0 0":"AL "+y.x+","+y.y+" "+T+","+P+" 0,"+65535*360)},_setPath:function(d,y){d._path.v=y},_bringToFront:function(d){wn(d._container)},_bringToBack:function(d){Di(d._container)}},rs=ae.vml?mo:yn,hu=hi.extend({_initContainer:function(){this._container=rs("svg"),this._container.setAttribute("pointer-events","none"),this._rootGroup=rs("g"),this._container.appendChild(this._rootGroup)},_destroyContainer:function(){Tt(this._container),Vt(this._container),delete this._container,delete this._rootGroup,delete this._svgSize},_update:function(){if(!(this._map._animatingZoom&&this._bounds)){hi.prototype._update.call(this);var d=this._bounds,y=d.getSize(),T=this._container;(!this._svgSize||!this._svgSize.equals(y))&&(this._svgSize=y,T.setAttribute("width",y.x),T.setAttribute("height",y.y)),Xt(T,d.min),T.setAttribute("viewBox",[d.min.x,d.min.y,y.x,y.y].join(" ")),this.fire("update")}},_initPath:function(d){var y=d._path=rs("path");d.options.className&&He(y,d.options.className),d.options.interactive&&He(y,"leaflet-interactive"),this._updateStyle(d),this._layers[c(d)]=d},_addPath:function(d){this._rootGroup||this._initContainer(),this._rootGroup.appendChild(d._path),d.addInteractiveTarget(d._path)},_removePath:function(d){Tt(d._path),d.removeInteractiveTarget(d._path),delete this._layers[c(d)]},_updatePath:function(d){d._project(),d._update()},_updateStyle:function(d){var y=d._path,T=d.options;y&&(T.stroke?(y.setAttribute("stroke",T.color),y.setAttribute("stroke-opacity",T.opacity),y.setAttribute("stroke-width",T.weight),y.setAttribute("stroke-linecap",T.lineCap),y.setAttribute("stroke-linejoin",T.lineJoin),T.dashArray?y.setAttribute("stroke-dasharray",T.dashArray):y.removeAttribute("stroke-dasharray"),T.dashOffset?y.setAttribute("stroke-dashoffset",T.dashOffset):y.removeAttribute("stroke-dashoffset")):y.setAttribute("stroke","none"),T.fill?(y.setAttribute("fill",T.fillColor||T.color),y.setAttribute("fill-opacity",T.fillOpacity),y.setAttribute("fill-rule",T.fillRule||"evenodd")):y.setAttribute("fill","none"))},_updatePoly:function(d,y){this._setPath(d,sn(d._parts,y))},_updateCircle:function(d){var y=d._point,T=Math.max(Math.round(d._radius),1),P=Math.max(Math.round(d._radiusY),1)||T,M="a"+T+","+P+" 0 1,0 ",W=d._empty()?"M0 0":"M"+(y.x-T)+","+y.y+M+T*2+",0 "+M+-T*2+",0 ";this._setPath(d,W)},_setPath:function(d,y){d._path.setAttribute("d",y)},_bringToFront:function(d){wn(d._path)},_bringToBack:function(d){Di(d._path)}});ae.vml&&hu.include(vm);function Gc(d){return ae.svg||ae.vml?new hu(d):null}bt.include({getRenderer:function(d){var y=d.options.renderer||this._getPaneRenderer(d.options.pane)||this.options.renderer||this._renderer;return y||(y=this._renderer=this._createRenderer()),this.hasLayer(y)||this.addLayer(y),y},_getPaneRenderer:function(d){if(d==="overlayPane"||d===void 0)return!1;var y=this._paneRenderers[d];return y===void 0&&(y=this._createRenderer({pane:d}),this._paneRenderers[d]=y),y},_createRenderer:function(d){return this.options.preferCanvas&&Hc(d)||Gc(d)}});var el=lu.extend({initialize:function(d,y){lu.prototype.initialize.call(this,this._boundsToLatLngs(d),y)},setBounds:function(d){return this.setLatLngs(this._boundsToLatLngs(d))},_boundsToLatLngs:function(d){return d=Ce(d),[d.getSouthWest(),d.getNorthWest(),d.getNorthEast(),d.getSouthEast()]}});function Rb(d,y){return new el(d,y)}hu.create=rs,hu.pointsToPath=sn,Rs.geometryToLayer=Fr,Rs.coordsToLatLng=rf,Rs.coordsToLatLngs=Vc,Rs.latLngToCoords=af,Rs.latLngsToCoords=Uc,Rs.getFeature=uo,Rs.asFeature=sf,bt.mergeOptions({boxZoom:!0});var mi=ki.extend({initialize:function(d){this._map=d,this._container=d._container,this._pane=d._panes.overlayPane,this._resetStateTimeout=0,d.on("unload",this._destroy,this)},addHooks:function(){at(this._container,"mousedown",this._onMouseDown,this)},removeHooks:function(){Vt(this._container,"mousedown",this._onMouseDown,this)},moved:function(){return this._moved},_destroy:function(){Tt(this._pane),delete this._pane},_resetState:function(){this._resetStateTimeout=0,this._moved=!1},_clearDeferredResetState:function(){this._resetStateTimeout!==0&&(clearTimeout(this._resetStateTimeout),this._resetStateTimeout=0)},_onMouseDown:function(d){if(!d.shiftKey||d.which!==1&&d.button!==1)return!1;this._clearDeferredResetState(),this._resetState(),Zi(),Wo(),this._startPoint=this._map.mouseEventToContainerPoint(d),at(document,{contextmenu:_a,mousemove:this._onMouseMove,mouseup:this._onMouseUp,keydown:this._onKeyDown},this)},_onMouseMove:function(d){this._moved||(this._moved=!0,this._box=wt("div","leaflet-zoom-box",this._container),He(this._container,"leaflet-crosshair"),this._map.fire("boxzoomstart")),this._point=this._map.mouseEventToContainerPoint(d);var y=new X(this._point,this._startPoint),T=y.getSize();Xt(this._box,y.min),this._box.style.width=T.x+"px",this._box.style.height=T.y+"px"},_finish:function(){this._moved&&(Tt(this._box),Qt(this._container,"leaflet-crosshair")),hr(),ro(),Vt(document,{contextmenu:_a,mousemove:this._onMouseMove,mouseup:this._onMouseUp,keydown:this._onKeyDown},this)},_onMouseUp:function(d){if(!(d.which!==1&&d.button!==1)&&(this._finish(),!!this._moved)){this._clearDeferredResetState(),this._resetStateTimeout=setTimeout(s(this._resetState,this),0);var y=new be(this._map.containerPointToLatLng(this._startPoint),this._map.containerPointToLatLng(this._point));this._map.fitBounds(y).fire("boxzoomend",{boxZoomBounds:y})}},_onKeyDown:function(d){d.keyCode===27&&(this._finish(),this._clearDeferredResetState(),this._resetState())}});bt.addInitHook("addHandler","boxZoom",mi),bt.mergeOptions({doubleClickZoom:!0});var cf=ki.extend({addHooks:function(){this._map.on("dblclick",this._onDoubleClick,this)},removeHooks:function(){this._map.off("dblclick",this._onDoubleClick,this)},_onDoubleClick:function(d){var y=this._map,T=y.getZoom(),P=y.options.zoomDelta,M=d.originalEvent.shiftKey?T-P:T+P;y.options.doubleClickZoom==="center"?y.setZoom(M):y.setZoomAround(d.containerPoint,M)}});bt.addInitHook("addHandler","doubleClickZoom",cf),bt.mergeOptions({dragging:!0,inertia:!0,inertiaDeceleration:3400,inertiaMaxSpeed:1/0,easeLinearity:.2,worldCopyJump:!1,maxBoundsViscosity:0});var is=ki.extend({addHooks:function(){if(!this._draggable){var d=this._map;this._draggable=new Ta(d._mapPane,d._container),this._draggable.on({dragstart:this._onDragStart,drag:this._onDrag,dragend:this._onDragEnd},this),this._draggable.on("predrag",this._onPreDragLimit,this),d.options.worldCopyJump&&(this._draggable.on("predrag",this._onPreDragWrap,this),d.on("zoomend",this._onZoomEnd,this),d.whenReady(this._onZoomEnd,this))}He(this._map._container,"leaflet-grab leaflet-touch-drag"),this._draggable.enable(),this._positions=[],this._times=[]},removeHooks:function(){Qt(this._map._container,"leaflet-grab"),Qt(this._map._container,"leaflet-touch-drag"),this._draggable.disable()},moved:function(){return this._draggable&&this._draggable._moved},moving:function(){return this._draggable&&this._draggable._moving},_onDragStart:function(){var d=this._map;if(d._stop(),this._map.options.maxBounds&&this._map.options.maxBoundsViscosity){var y=Ce(this._map.options.maxBounds);this._offsetLimit=ue(this._map.latLngToContainerPoint(y.getNorthWest()).multiplyBy(-1),this._map.latLngToContainerPoint(y.getSouthEast()).multiplyBy(-1).add(this._map.getSize())),this._viscosity=Math.min(1,Math.max(0,this._map.options.maxBoundsViscosity))}else this._offsetLimit=null;d.fire("movestart").fire("dragstart"),d.options.inertia&&(this._positions=[],this._times=[])},_onDrag:function(d){if(this._map.options.inertia){var y=this._lastTime=+new Date,T=this._lastPos=this._draggable._absPos||this._draggable._newPos;this._positions.push(T),this._times.push(y),this._prunePositions(y)}this._map.fire("move",d).fire("drag",d)},_prunePositions:function(d){for(;this._positions.length>1&&d-this._times[0]>50;)this._positions.shift(),this._times.shift()},_onZoomEnd:function(){var d=this._map.getSize().divideBy(2),y=this._map.latLngToLayerPoint([0,0]);this._initialWorldOffset=y.subtract(d).x,this._worldWidth=this._map.getPixelWorldBounds().getSize().x},_viscousLimit:function(d,y){return d-(d-y)*this._viscosity},_onPreDragLimit:function(){if(!(!this._viscosity||!this._offsetLimit)){var d=this._draggable._newPos.subtract(this._draggable._startPos),y=this._offsetLimit;d.x<y.min.x&&(d.x=this._viscousLimit(d.x,y.min.x)),d.y<y.min.y&&(d.y=this._viscousLimit(d.y,y.min.y)),d.x>y.max.x&&(d.x=this._viscousLimit(d.x,y.max.x)),d.y>y.max.y&&(d.y=this._viscousLimit(d.y,y.max.y)),this._draggable._newPos=this._draggable._startPos.add(d)}},_onPreDragWrap:function(){var d=this._worldWidth,y=Math.round(d/2),T=this._initialWorldOffset,P=this._draggable._newPos.x,M=(P-y+T)%d+y-T,W=(P+y+T)%d-y-T,te=Math.abs(M+T)<Math.abs(W+T)?M:W;this._draggable._absPos=this._draggable._newPos.clone(),this._draggable._newPos.x=te},_onDragEnd:function(d){var y=this._map,T=y.options,P=!T.inertia||d.noInertia||this._times.length<2;if(y.fire("dragend",d),P)y.fire("moveend");else{this._prunePositions(+new Date);var M=this._lastPos.subtract(this._positions[0]),W=(this._lastTime-this._times[0])/1e3,te=T.easeLinearity,oe=M.multiplyBy(te/W),ge=oe.distanceTo([0,0]),De=Math.min(T.inertiaMaxSpeed,ge),Fe=oe.multiplyBy(De/ge),nt=De/(T.inertiaDeceleration*te),vt=Fe.multiplyBy(-nt/2).round();!vt.x&&!vt.y?y.fire("moveend"):(vt=y._limitOffset(vt,y.options.maxBounds),K(function(){y.panBy(vt,{duration:nt,easeLinearity:te,noMoveStart:!0,animate:!0})}))}}});bt.addInitHook("addHandler","dragging",is),bt.mergeOptions({keyboard:!0,keyboardPanDelta:80});var xm=ki.extend({keyCodes:{left:[37],right:[39],down:[40],up:[38],zoomIn:[187,107,61,171],zoomOut:[189,109,54,173]},initialize:function(d){this._map=d,this._setPanDelta(d.options.keyboardPanDelta),this._setZoomDelta(d.options.zoomDelta)},addHooks:function(){var d=this._map._container;d.tabIndex<=0&&(d.tabIndex="0"),at(d,{focus:this._onFocus,blur:this._onBlur,mousedown:this._onMouseDown},this),this._map.on({focus:this._addHooks,blur:this._removeHooks},this)},removeHooks:function(){this._removeHooks(),Vt(this._map._container,{focus:this._onFocus,blur:this._onBlur,mousedown:this._onMouseDown},this),this._map.off({focus:this._addHooks,blur:this._removeHooks},this)},_onMouseDown:function(){if(!this._focused){var d=document.body,y=document.documentElement,T=d.scrollTop||y.scrollTop,P=d.scrollLeft||y.scrollLeft;this._map._container.focus(),window.scrollTo(P,T)}},_onFocus:function(){this._focused=!0,this._map.fire("focus")},_onBlur:function(){this._focused=!1,this._map.fire("blur")},_setPanDelta:function(d){var y=this._panKeys={},T=this.keyCodes,P,M;for(P=0,M=T.left.length;P<M;P++)y[T.left[P]]=[-1*d,0];for(P=0,M=T.right.length;P<M;P++)y[T.right[P]]=[d,0];for(P=0,M=T.down.length;P<M;P++)y[T.down[P]]=[0,d];for(P=0,M=T.up.length;P<M;P++)y[T.up[P]]=[0,-1*d]},_setZoomDelta:function(d){var y=this._zoomKeys={},T=this.keyCodes,P,M;for(P=0,M=T.zoomIn.length;P<M;P++)y[T.zoomIn[P]]=d;for(P=0,M=T.zoomOut.length;P<M;P++)y[T.zoomOut[P]]=-d},_addHooks:function(){at(document,"keydown",this._onKeyDown,this)},_removeHooks:function(){Vt(document,"keydown",this._onKeyDown,this)},_onKeyDown:function(d){if(!(d.altKey||d.ctrlKey||d.metaKey)){var y=d.keyCode,T=this._map,P;if(y in this._panKeys){if(!T._panAnim||!T._panAnim._inProgress)if(P=this._panKeys[y],d.shiftKey&&(P=Pe(P).multiplyBy(3)),T.options.maxBounds&&(P=T._limitOffset(Pe(P),T.options.maxBounds)),T.options.worldCopyJump){var M=T.wrapLatLng(T.unproject(T.project(T.getCenter()).add(P)));T.panTo(M)}else T.panBy(P)}else if(y in this._zoomKeys)T.setZoom(T.getZoom()+(d.shiftKey?3:1)*this._zoomKeys[y]);else if(y===27&&T._popup&&T._popup.options.closeOnEscapeKey)T.closePopup();else return;_a(d)}}});bt.addInitHook("addHandler","keyboard",xm),bt.mergeOptions({scrollWheelZoom:!0,wheelDebounceTime:40,wheelPxPerZoomLevel:60});var $c=ki.extend({addHooks:function(){at(this._map._container,"wheel",this._onWheelScroll,this),this._delta=0},removeHooks:function(){Vt(this._map._container,"wheel",this._onWheelScroll,this)},_onWheelScroll:function(d){var y=mr(d),T=this._map.options.wheelDebounceTime;this._delta+=y,this._lastMousePos=this._map.mouseEventToContainerPoint(d),this._startTime||(this._startTime=+new Date);var P=Math.max(T-(+new Date-this._startTime),0);clearTimeout(this._timer),this._timer=setTimeout(s(this._performZoom,this),P),_a(d)},_performZoom:function(){var d=this._map,y=d.getZoom(),T=this._map.options.zoomSnap||0;d._stop();var P=this._delta/(this._map.options.wheelPxPerZoomLevel*4),M=4*Math.log(2/(1+Math.exp(-Math.abs(P))))/Math.LN2,W=T?Math.ceil(M/T)*T:M,te=d._limitZoom(y+(this._delta>0?W:-W))-y;this._delta=0,this._startTime=null,te&&(d.options.scrollWheelZoom==="center"?d.setZoom(y+te):d.setZoomAround(this._lastMousePos,y+te))}});bt.addInitHook("addHandler","scrollWheelZoom",$c);var tl=600;bt.mergeOptions({tapHold:ae.touchNative&&ae.safari&&ae.mobile,tapTolerance:15});var df=ki.extend({addHooks:function(){at(this._map._container,"touchstart",this._onDown,this)},removeHooks:function(){Vt(this._map._container,"touchstart",this._onDown,this)},_onDown:function(d){if(clearTimeout(this._holdTimeout),d.touches.length===1){var y=d.touches[0];this._startPos=this._newPos=new le(y.clientX,y.clientY),this._holdTimeout=setTimeout(s(function(){this._cancel(),this._isTapValid()&&(at(document,"touchend",En),at(document,"touchend touchcancel",this._cancelClickPrevent),this._simulateEvent("contextmenu",y))},this),tl),at(document,"touchend touchcancel contextmenu",this._cancel,this),at(document,"touchmove",this._onMove,this)}},_cancelClickPrevent:function d(){Vt(document,"touchend",En),Vt(document,"touchend touchcancel",d)},_cancel:function(){clearTimeout(this._holdTimeout),Vt(document,"touchend touchcancel contextmenu",this._cancel,this),Vt(document,"touchmove",this._onMove,this)},_onMove:function(d){var y=d.touches[0];this._newPos=new le(y.clientX,y.clientY)},_isTapValid:function(){return this._newPos.distanceTo(this._startPos)<=this._map.options.tapTolerance},_simulateEvent:function(d,y){var T=new MouseEvent(d,{bubbles:!0,cancelable:!0,view:window,screenX:y.screenX,screenY:y.screenY,clientX:y.clientX,clientY:y.clientY});T._simulated=!0,y.target.dispatchEvent(T)}});bt.addInitHook("addHandler","tapHold",df),bt.mergeOptions({touchZoom:ae.touch,bounceAtZoomLimits:!0});var _m=ki.extend({addHooks:function(){He(this._map._container,"leaflet-touch-zoom"),at(this._map._container,"touchstart",this._onTouchStart,this)},removeHooks:function(){Qt(this._map._container,"leaflet-touch-zoom"),Vt(this._map._container,"touchstart",this._onTouchStart,this)},_onTouchStart:function(d){var y=this._map;if(!(!d.touches||d.touches.length!==2||y._animatingZoom||this._zooming)){var T=y.mouseEventToContainerPoint(d.touches[0]),P=y.mouseEventToContainerPoint(d.touches[1]);this._centerPoint=y.getSize()._divideBy(2),this._startLatLng=y.containerPointToLatLng(this._centerPoint),y.options.touchZoom!=="center"&&(this._pinchStartLatLng=y.containerPointToLatLng(T.add(P)._divideBy(2))),this._startDist=T.distanceTo(P),this._startZoom=y.getZoom(),this._moved=!1,this._zooming=!0,y._stop(),at(document,"touchmove",this._onTouchMove,this),at(document,"touchend touchcancel",this._onTouchEnd,this),En(d)}},_onTouchMove:function(d){if(!(!d.touches||d.touches.length!==2||!this._zooming)){var y=this._map,T=y.mouseEventToContainerPoint(d.touches[0]),P=y.mouseEventToContainerPoint(d.touches[1]),M=T.distanceTo(P)/this._startDist;if(this._zoom=y.getScaleZoom(M,this._startZoom),!y.options.bounceAtZoomLimits&&(this._zoom<y.getMinZoom()&&M<1||this._zoom>y.getMaxZoom()&&M>1)&&(this._zoom=y._limitZoom(this._zoom)),y.options.touchZoom==="center"){if(this._center=this._startLatLng,M===1)return}else{var W=T._add(P)._divideBy(2)._subtract(this._centerPoint);if(M===1&&W.x===0&&W.y===0)return;this._center=y.unproject(y.project(this._pinchStartLatLng,this._zoom).subtract(W),this._zoom)}this._moved||(y._moveStart(!0,!1),this._moved=!0),J(this._animRequest);var te=s(y._move,y,this._center,this._zoom,{pinch:!0,round:!1},void 0);this._animRequest=K(te,this,!0),En(d)}},_onTouchEnd:function(){if(!this._moved||!this._zooming){this._zooming=!1;return}this._zooming=!1,J(this._animRequest),Vt(document,"touchmove",this._onTouchMove,this),Vt(document,"touchend touchcancel",this._onTouchEnd,this),this._map.options.zoomAnimation?this._map._animateZoom(this._center,this._map._limitZoom(this._zoom),!0,this._map.options.zoomSnap):this._map._resetView(this._center,this._map._limitZoom(this._zoom))}});bt.addInitHook("addHandler","touchZoom",_m),bt.BoxZoom=mi,bt.DoubleClickZoom=cf,bt.Drag=is,bt.Keyboard=xm,bt.ScrollWheelZoom=$c,bt.TapHold=df,bt.TouchZoom=_m,n.Bounds=X,n.Browser=ae,n.CRS=Ze,n.Canvas=uf,n.Circle=nf,n.CircleMarker=ou,n.Class=Se,n.Control=Vr,n.DivIcon=xy,n.DivOverlay=Br,n.DomEvent=Xa,n.DomUtil=ao,n.Draggable=Ta,n.Evented=re,n.FeatureGroup=es,n.GeoJSON=Rs,n.GridLayer=fu,n.Handler=ki,n.Icon=ts,n.ImageOverlay=cu,n.LatLng=je,n.LatLngBounds=be,n.Layer=Aa,n.LayerGroup=su,n.LineUtil=Qi,n.Map=bt,n.Marker=Lc,n.Mixin=ef,n.Path=ns,n.Point=le,n.PolyUtil=lo,n.Polygon=lu,n.Polyline=Ds,n.Popup=Bc,n.PosAnimation=Is,n.Projection=Sa,n.Rectangle=el,n.Renderer=hi,n.SVG=hu,n.SVGOverlay=lf,n.TileLayer=ho,n.Tooltip=zc,n.Transformation=lt,n.Util=G,n.VideoOverlay=fo,n.bind=s,n.bounds=ue,n.canvas=Hc,n.circle=py,n.circleMarker=my,n.control=fi,n.divIcon=Db,n.extend=i,n.featureGroup=fy,n.geoJSON=of,n.geoJson=Fc,n.gridLayer=_y,n.icon=Mc,n.imageOverlay=gy,n.latLng=Ve,n.latLngBounds=Ce,n.layerGroup=Cb,n.map=oo,n.marker=hy,n.point=Pe,n.polygon=Nb,n.polyline=Ib,n.popup=vy,n.rectangle=Rb,n.setOptions=A,n.stamp=c,n.svg=Gc,n.svgOverlay=yy,n.tileLayer=ea,n.tooltip=Pb,n.transformation=he,n.version=r,n.videoOverlay=du;var bm=window.L;n.noConflict=function(){return window.L=bm,this},window.L=n}))})(Tp,Tp.exports)),Tp.exports}var Ab=BSe();function qN(t,e,n){return Object.freeze({instance:t,context:e,container:n})}function HN(t,e){return e==null?function(r,i){const a=N.useRef(void 0);return a.current||(a.current=t(r,i)),a}:function(r,i){const a=N.useRef(void 0);a.current||(a.current=t(r,i));const s=N.useRef(r),{instance:l}=a.current;return N.useEffect(function(){s.current!==r&&(e(l,r,s.current),s.current=r)},[l,r,e]),a}}function zSe(t,e){N.useEffect(function(){return(e.layerContainer??e.map).addLayer(t.instance),function(){var a;(a=e.layerContainer)==null||a.removeLayer(t.instance),e.map.removeLayer(t.instance)}},[e,t])}function E8(t){return function(n){const r=b8(),i=t(zN(n,r),r);return _8(r.map,n.attribution),w8(i.current,n.eventHandlers),zSe(i.current,r),i}}function qSe(t,e){const n=HN(t,e),r=E8(n);return jSe(r)}function HSe(t,e){const n=HN(t),r=USe(n,e);return LSe(r)}function GSe(t,e){const n=HN(t,e),r=E8(n);return VSe(r)}function $Se(t,e,n){const{opacity:r,zIndex:i}=e;r!=null&&r!==n.opacity&&t.setOpacity(r),i!=null&&i!==n.zIndex&&t.setZIndex(i)}function KSe({bounds:t,boundsOptions:e,center:n,children:r,className:i,id:a,placeholder:s,style:l,whenReady:c,zoom:h,...p},g){const[x]=N.useState({className:i,id:a,style:l}),[b,C]=N.useState(null),A=N.useRef(void 0);N.useImperativeHandle(g,()=>(b==null?void 0:b.map)??null,[b]);const D=N.useCallback(j=>{if(j!==null&&!A.current){const O=new Ab.Map(j,p);A.current=O,n!=null&&h!=null?O.setView(n,h):t!=null&&O.fitBounds(t,e),c!=null&&O.whenReady(c),C(MSe(O))}},[]);N.useEffect(()=>()=>{b==null||b.map.remove()},[b]);const R=b?gh.createElement(BN,{value:b},r):s??null;return gh.createElement("div",{...x,ref:D},R)}const WSe=N.forwardRef(KSe),YSe=qSe(function({position:e,...n},r){const i=new Ab.Marker(e,n);return qN(i,OSe(r,{overlayContainer:i}))},function(e,n,r){n.position!==r.position&&e.setLatLng(n.position),n.icon!=null&&n.icon!==r.icon&&e.setIcon(n.icon),n.zIndexOffset!=null&&n.zIndexOffset!==r.zIndexOffset&&e.setZIndexOffset(n.zIndexOffset),n.opacity!=null&&n.opacity!==r.opacity&&e.setOpacity(n.opacity),e.dragging!=null&&n.draggable!==r.draggable&&(n.draggable===!0?e.dragging.enable():e.dragging.disable())}),ZSe=HSe(function(e,n){const r=new Ab.Popup(e,n.overlayContainer);return qN(r,n)},function(e,n,{position:r},i){N.useEffect(function(){const{instance:s}=e;function l(h){h.popup===s&&(s.update(),i(!0))}function c(h){h.popup===s&&i(!1)}return n.map.on({popupopen:l,popupclose:c}),n.overlayContainer==null?(r!=null&&s.setLatLng(r),s.openOn(n.map)):n.overlayContainer.bindPopup(s),function(){var p;n.map.off({popupopen:l,popupclose:c}),(p=n.overlayContainer)==null||p.unbindPopup(),n.map.removeLayer(s)}},[e,n,i,r])}),JSe=GSe(function({url:e,...n},r){const i=new Ab.TileLayer(e,zN(n,r));return qN(i,r)},function(e,n,r){$Se(e,n,r);const{url:i}=n;i!=null&&i!==r.url&&e.setUrl(i)}),QSe=()=>{const{assets:t,suppliers:e,addAsset:n,updateAsset:r,deleteAsset:i,addMaintenance:a,isLoading:s,error:l}=Zt(),{branding:c}=Kd(),[h,p]=N.useState("list"),[g,x]=N.useState(!1),[b,C]=N.useState(!1),[A,D]=N.useState(!1),[R,j]=N.useState(!1),[O,q]=N.useState(null),[$,H]=N.useState(null),[U,z]=N.useState(""),[B,Z]=N.useState(""),[K,J]=N.useState(""),[G,Se]=N.useState(""),[Oe,ee]=N.useState(1),[re]=N.useState(10),le=N.useMemo(()=>t.map(he=>({...he,healthScore:RSe(he)})),[t]),Ne=N.useMemo(()=>{const he=U.toLowerCase().split(" ").filter(gt=>gt.trim()!=="");return le.filter(gt=>{const dt=K?gt.status===K:!0,yn=B?gt.type===B:!0,sn=G?gt.supplierId===G:!0,tr=U?he.every(jr=>`${gt.name} ${gt.type} ${gt.location}`.toLowerCase().includes(jr)):!0;return dt&&yn&&tr&&sn})},[le,K,B,U,G]),{sortedItems:Pe,requestSort:X,sortConfig:ue}=mSe(Ne,"purchaseDate"),be=Oe*re,Ce=be-re,je=Pe.slice(Ce,be),Ve=Math.ceil(Pe.length/re),Ze=he=>{he>0&&he<=Ve&&ee(he)},It=N.useMemo(()=>Array.from(new Set(t.map(he=>he.type))).sort(),[t]),Te=N.useMemo(()=>{const he=t.filter(gt=>{var dt;return(dt=gt.coordinates)==null?void 0:dt.lat});return he.length>0?[he[0].coordinates.lat,he[0].coordinates.lng]:[-23.55052,-46.633308]},[t]),st=he=>{switch(he){case lr.ACTIVE:return"text-green-600";case lr.IN_REPAIR:return"text-orange-600";case lr.DECOMMISSIONED:return"text-slate-600";default:return"text-gray-600"}},lt=async()=>{$&&(await i($),j(!1),H(null))};return f.jsxs("div",{className:"p-4 md:p-8 space-y-6",children:[f.jsxs("div",{className:"flex flex-col md:flex-row justify-between items-start md:items-center gap-4",children:[f.jsxs("div",{children:[f.jsx("h1",{className:"text-3xl font-bold text-gray-800 dark:text-white",children:"Gesto de Ativos"}),f.jsx("p",{className:"text-gray-500 dark:text-gray-400",children:"Controle total do inventrio fsico e digital."})]}),f.jsxs("div",{className:"flex items-center space-x-2",children:[f.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-sm p-1 flex border dark:border-gray-700 mr-2",children:[f.jsx("button",{onClick:()=>p("list"),className:`p-2 rounded-md ${h==="list"?"bg-gray-100 dark:bg-gray-700 text-primary-600":"text-gray-500"}`,title:"Lista",children:f.jsx(sF,{className:"w-5 h-5"})}),f.jsx("button",{onClick:()=>p("map"),className:`p-2 rounded-md ${h==="map"?"bg-gray-100 dark:bg-gray-700 text-primary-600":"text-gray-500"}`,title:"Mapa",children:f.jsx(Pse,{className:"w-5 h-5"})})]}),f.jsxs("button",{onClick:()=>NSe(Pe,c),className:"btn btn-secondary",children:[f.jsx(ix,{className:"w-5 h-5 mr-2"}),"CSV"]}),f.jsxs("button",{onClick:()=>x(!0),className:"btn btn-primary",children:[f.jsx(Ba,{className:"w-5 h-5 mr-2"}),"Novo Ativo"]})]})]}),l&&f.jsx("div",{className:"bg-red-100 border-l-4 border-red-500 text-red-700 p-4",role:"alert",children:f.jsx("p",{children:l})}),s?f.jsx("div",{className:"flex justify-center items-center h-64",children:f.jsx("div",{className:"animate-spin rounded-full h-16 w-16 border-t-2 border-b-2 border-primary-500"})}):f.jsx(f.Fragment,{children:h==="list"?f.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-xl shadow-lg p-6",children:[f.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-4 mb-6",children:[f.jsx("div",{className:"lg:col-span-1",children:f.jsx("input",{type:"text",value:U,onChange:he=>z(he.target.value),className:"input-style w-full",placeholder:"Buscar ativo..."})}),f.jsx("div",{children:f.jsxs("select",{value:B,onChange:he=>Z(he.target.value),className:"input-style w-full",children:[f.jsx("option",{value:"",children:"Todos os Tipos"}),It.map(he=>f.jsx("option",{value:he,children:he},he))]})}),f.jsx("div",{children:f.jsxs("select",{value:K,onChange:he=>J(he.target.value),className:"input-style w-full",children:[f.jsx("option",{value:"",children:"Todos os Status"}),Object.values(lr).map(he=>f.jsx("option",{value:he,children:he},he))]})}),f.jsx("div",{children:f.jsxs("select",{value:G,onChange:he=>Se(he.target.value),className:"input-style w-full",children:[f.jsx("option",{value:"",children:"Todos Fornecedores"}),e.map(he=>f.jsx("option",{value:he.id,children:he.name},he.id))]})})]}),f.jsx(_Se,{assets:je,onEdit:he=>{q(he),C(!0)},onAddMaintenance:he=>{q(he),D(!0)},onDelete:he=>{H(he),j(!0)},requestSort:X,sortConfig:ue,pagination:{itemsPerPage:re,totalItems:Pe.length,currentPage:Oe,paginate:Ze}})]}):f.jsx("div",{className:"bg-white dark:bg-gray-800 rounded-xl shadow-lg h-[calc(100vh-250px)] p-4",children:f.jsxs(WSe,{center:Te,zoom:13,scrollWheelZoom:!0,style:{height:"100%",width:"100%",borderRadius:"0.75rem"},children:[f.jsx(JSe,{attribution:" OpenStreetMap contributors",url:"https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png"}),t.filter(he=>{var gt;return(gt=he.coordinates)==null?void 0:gt.lat}).map(he=>f.jsx(YSe,{position:[he.coordinates.lat,he.coordinates.lng],children:f.jsx(ZSe,{children:f.jsxs("div",{className:"p-1",children:[f.jsx("h3",{className:"font-bold text-md mb-1 text-gray-800",children:he.name}),f.jsxs("p",{className:"text-sm text-gray-600",children:[f.jsx("strong",{children:"Local:"})," ",he.location]}),f.jsxs("p",{className:"text-sm text-gray-600",children:[f.jsx("strong",{children:"Status:"})," ",f.jsx("span",{className:`font-semibold ${st(he.status)}`,children:he.status})]})]})})},he.id))]})})}),g&&f.jsx(SSe,{isOpen:g,onClose:()=>x(!1),onSave:n}),b&&O&&f.jsx(ASe,{isOpen:b,onClose:()=>C(!1),onSave:r,asset:O}),A&&O&&f.jsx(CSe,{isOpen:A,onClose:()=>D(!1),onSave:a,assetId:O.id}),R&&f.jsx(ym,{isOpen:R,onClose:()=>j(!1),onConfirm:lt,title:"Excluir Ativo",message:"Esta ao no pode ser desfeita."}),f.jsx("style",{children:".btn {display:inline-flex;align-items:center;justify-content:center;padding:0.5rem 1rem;font-weight:500;border-radius:0.5rem;}.btn-primary {background-color:rgb(var(--color-primary-600));color:#fff}.btn-secondary {background-color:#e5e7eb;color:#1f2937}.input-style{padding:0.5rem;border-radius:0.5rem;border:1px solid #d1d5db;background-color:#f9fafb}.dark .input-style{background-color:#374151;border-color:#4b5563;color:white}"})]})},XSe=({isOpen:t,onClose:e,record:n,onUpdate:r})=>{const[i,a]=N.useState(""),[s,l]=N.useState(!1),{user:c}=$s(),{assets:h}=Zt(),p="Gerente";if(!t)return null;const g=n.status===sr.PENDING&&n.nextApprover===p,x=async C=>{if(l(!0),!h.find($=>$.id===n.assetId))return;const D={actor:p,status:C,comment:i,date:new Date().toISOString()},R=[...n.approvalHistory,D];let j,O=C;C===sr.APPROVED&&n.nextApprover==="Gerente"&&n.cost>5e3&&(O=sr.PENDING,j="Diretor");const q={...n,status:O,nextApprover:j,approvalHistory:R};try{await r(n.assetId,q),e()}catch($){console.error("Failed to update maintenance record:",$)}finally{l(!1)}},b=C=>{switch(C){case sr.APPROVED:case sr.AUTO_APPROVED:return f.jsx("div",{className:"bg-green-500 rounded-full h-8 w-8 flex items-center justify-center ring-8 ring-white dark:ring-gray-800",children:f.jsx(R_,{className:"h-5 w-5 text-white"})});case sr.REJECTED:return f.jsx("div",{className:"bg-red-500 rounded-full h-8 w-8 flex items-center justify-center ring-8 ring-white dark:ring-gray-800",children:f.jsx(Cse,{className:"h-5 w-5 text-white"})});case sr.PENDING:default:return f.jsx("div",{className:"bg-yellow-500 rounded-full h-8 w-8 flex items-center justify-center ring-8 ring-white dark:ring-gray-800",children:f.jsx(k_,{className:"h-5 w-5 text-white"})})}};return f.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-60 z-50 flex justify-center items-center p-4",children:f.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-xl p-6 w-full max-w-2xl max-h-[90vh] overflow-y-auto",onClick:C=>C.stopPropagation(),children:[f.jsxs("div",{className:"flex justify-between items-center mb-4 border-b pb-3 dark:border-gray-600",children:[f.jsxs("div",{children:[f.jsx("h2",{className:"text-xl font-bold text-gray-900 dark:text-white",children:"Detalhes da Solicitao"}),f.jsxs("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:["Ativo: ",n.assetName]})]}),f.jsx("button",{onClick:e,disabled:s,className:"text-gray-400 hover:text-gray-600 text-2xl",children:""})]}),f.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[f.jsxs("div",{children:[f.jsx("h3",{className:"text-lg font-semibold mb-4 dark:text-white",children:"Linha do Tempo"}),f.jsx("ol",{className:"relative border-l border-gray-200 dark:border-gray-700 ml-4",children:n.approvalHistory.map((C,A)=>f.jsxs("li",{className:"mb-10 ml-8",children:[f.jsx("span",{className:"absolute -left-4 flex items-center justify-center",children:b(C.status)}),f.jsxs("h4",{className:"flex items-center mb-1 text-md font-semibold text-gray-900 dark:text-white",children:[C.actor,f.jsx("span",{className:"bg-blue-100 text-blue-800 text-xs font-medium mr-2 px-2.5 py-0.5 rounded dark:bg-blue-900 dark:text-blue-300 ml-3",children:C.status})]}),f.jsx("time",{className:"block mb-2 text-xs font-normal leading-none text-gray-400 dark:text-gray-500",children:new Date(C.date).toLocaleString("pt-BR")}),C.comment&&f.jsxs("p",{className:"text-sm font-normal text-gray-500 dark:text-gray-400 italic",children:['"',C.comment,'"']})]},A))})]}),f.jsxs("div",{children:[f.jsx("h3",{className:"text-lg font-semibold mb-4 dark:text-white",children:"Detalhes e Aes"}),f.jsxs("div",{className:"space-y-4 bg-gray-50 dark:bg-gray-700/50 p-4 rounded-lg",children:[f.jsxs("div",{children:[f.jsx("span",{className:"font-semibold dark:text-gray-200",children:"Descrio:"}),f.jsx("p",{className:"text-sm dark:text-gray-300",children:n.description})]}),f.jsxs("div",{children:[f.jsx("span",{className:"font-semibold dark:text-gray-200",children:"Fornecedor:"}),f.jsx("p",{className:"text-sm dark:text-gray-300",children:n.supplier||"N/A"})]}),f.jsxs("div",{children:[f.jsx("span",{className:"font-semibold dark:text-gray-200",children:"Custo:"}),f.jsx("p",{className:"text-sm font-bold text-primary-600 dark:text-primary-400",children:ht(n.cost)})]})]}),g&&f.jsxs("div",{className:"mt-6",children:[f.jsx("label",{htmlFor:"comment",className:"block mb-2 text-sm font-medium text-gray-900 dark:text-white",children:"Adicionar Comentrio (Opcional)"}),f.jsx("textarea",{id:"comment",value:i,onChange:C=>a(C.target.value),rows:3,className:"input-style",placeholder:"Justificativa para a ao..."}),f.jsxs("div",{className:"flex justify-end gap-4 mt-4",children:[f.jsx("button",{onClick:()=>x(sr.REJECTED),disabled:s,className:"btn-danger",children:"Rejeitar"}),f.jsx("button",{onClick:()=>x(sr.APPROVED),disabled:s,className:"btn-success",children:"Aprovar"})]})]}),n.status!==sr.PENDING&&f.jsx("p",{className:"mt-6 text-center text-sm text-gray-500 dark:text-gray-400 p-4 bg-gray-100 dark:bg-gray-700 rounded-md",children:"Esta solicitao j foi finalizada."})]})]}),f.jsx("style",{children:`
                    .input-style { background-color: #F9FAFB; border: 1px solid #D1D5DB; color: #111827; font-size: 0.875rem; border-radius: 0.5rem; display: block; width: 100%; padding: 0.625rem; } .dark .input-style { background-color: #374151; border-color: #4B5563; color: white; }
                    .btn-danger { background-color: #dc2626; color:white; padding: 0.5rem 1rem; border-radius:0.5rem; font-weight: 500;} .btn-danger:hover:not(:disabled) { background-color: #b91c1c; } .btn-danger:disabled { opacity: 0.5; }
                    .btn-success { background-color: #16a34a; color:white; padding: 0.5rem 1rem; border-radius:0.5rem; font-weight: 500;} .btn-success:hover:not(:disabled) { background-color: #15803d; } .btn-success:disabled { opacity: 0.5; }
                `})]})})},e1e=()=>{const{assets:t,suppliers:e,failurePredictions:n,updateMaintenanceRecord:r}=Zt(),[i,a]=N.useState("history"),[s,l]=N.useState("all"),[c,h]=N.useState(null),[p,g]=N.useState(!1),x=R=>{var j;return R?((j=e.find(O=>O.id===R))==null?void 0:j.name)||"Desconhecido":"N/A"},b=N.useMemo(()=>t.flatMap(R=>R.maintenanceHistory.map(j=>({...j,assetId:R.id,assetName:R.name,assetStatus:R.status,assetType:R.type}))).sort((R,j)=>new Date(j.date).getTime()-new Date(R.date).getTime()),[t]),C=N.useMemo(()=>s==="in_repair"?b.filter(R=>R.assetStatus===lr.IN_REPAIR):b,[b,s]),A=N.useMemo(()=>b.filter(R=>R.status===sr.PENDING),[b]),D=({tab:R,label:j,icon:O,count:q})=>f.jsxs("button",{onClick:()=>a(R),className:`flex items-center px-6 py-4 text-sm font-medium border-b-2 transition-colors ${i===R?"border-primary-500 text-primary-600 dark:text-primary-400":"border-transparent text-gray-500 hover:text-gray-700 dark:text-gray-400"}`,children:[O," ",f.jsx("span",{className:"ml-2",children:j}),q!==void 0&&q>0&&f.jsx("span",{className:"ml-2 bg-red-100 text-red-600 text-xs font-bold px-2 py-0.5 rounded-full",children:q})]});return f.jsxs("div",{className:"p-4 md:p-8 space-y-6",children:[f.jsxs("div",{children:[f.jsx("h1",{className:"text-3xl font-bold text-gray-800 dark:text-white",children:"Centro de Manuteno"}),f.jsx("p",{className:"text-gray-500 dark:text-gray-400",children:"Gerencie manutenes corretivas, preventivas e aprovaes."})]}),f.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-xl shadow-lg",children:[f.jsxs("div",{className:"flex border-b dark:border-gray-700 overflow-x-auto",children:[f.jsx(D,{tab:"history",label:"Histrico Geral",icon:f.jsx(D_,{className:"w-5 h-5"})}),f.jsx(D,{tab:"approvals",label:"Aprovaes Pendentes",icon:f.jsx(c1,{className:"w-5 h-5"}),count:A.length}),f.jsx(D,{tab:"predictions",label:"IA Preditiva",icon:f.jsx(OC,{className:"w-5 h-5"})})]}),f.jsxs("div",{className:"p-6",children:[i==="history"&&f.jsxs("div",{children:[f.jsxs("div",{className:"flex justify-between items-center mb-4",children:[f.jsxs("div",{className:"flex space-x-2",children:[f.jsx("button",{onClick:()=>l("all"),className:`px-3 py-1 text-sm rounded-md ${s==="all"?"bg-primary-100 text-primary-800 dark:bg-primary-900 dark:text-primary-200":"bg-gray-100 text-gray-600 dark:bg-gray-700 dark:text-gray-300"}`,children:"Todos"}),f.jsx("button",{onClick:()=>l("in_repair"),className:`px-3 py-1 text-sm rounded-md ${s==="in_repair"?"bg-orange-100 text-orange-800 dark:bg-orange-900 dark:text-orange-200":"bg-gray-100 text-gray-600 dark:bg-gray-700 dark:text-gray-300"}`,children:"Em Reparo"})]}),f.jsxs("p",{className:"text-sm font-bold dark:text-white",children:["Total: ",ht(C.reduce((R,j)=>R+j.cost,0))]})]}),f.jsxs("div",{className:"overflow-x-auto",children:[f.jsxs("table",{className:"w-full text-sm text-left text-gray-500 dark:text-gray-400",children:[f.jsx("thead",{className:"text-xs text-gray-700 uppercase bg-gray-50 dark:bg-gray-700 dark:text-gray-400",children:f.jsxs("tr",{children:[f.jsx("th",{className:"px-6 py-3",children:"Data"}),f.jsx("th",{className:"px-6 py-3",children:"Ativo"}),f.jsx("th",{className:"px-6 py-3",children:"Servio"}),f.jsx("th",{className:"px-6 py-3",children:"Fornecedor"}),f.jsx("th",{className:"px-6 py-3 text-right",children:"Custo"})]})}),f.jsx("tbody",{children:C.map(R=>f.jsxs("tr",{className:"border-b dark:border-gray-700 hover:bg-gray-50 dark:hover:bg-gray-700",children:[f.jsx("td",{className:"px-6 py-4",children:Bn(R.date)}),f.jsx("td",{className:"px-6 py-4 font-medium text-gray-900 dark:text-white",children:R.assetName}),f.jsx("td",{className:"px-6 py-4",children:R.description}),f.jsx("td",{className:"px-6 py-4",children:x(R.supplierId)}),f.jsx("td",{className:"px-6 py-4 text-right font-mono",children:ht(R.cost)})]},R.id))})]}),C.length===0&&f.jsx("p",{className:"text-center py-8 text-gray-500",children:"Nenhum registro encontrado."})]})]}),i==="approvals"&&f.jsx("div",{children:f.jsxs("div",{className:"overflow-x-auto",children:[f.jsxs("table",{className:"w-full text-sm text-left text-gray-500 dark:text-gray-400",children:[f.jsx("thead",{className:"text-xs text-gray-700 uppercase bg-gray-50 dark:bg-gray-700 dark:text-gray-400",children:f.jsxs("tr",{children:[f.jsx("th",{className:"px-6 py-3",children:"Data"}),f.jsx("th",{className:"px-6 py-3",children:"Ativo"}),f.jsx("th",{className:"px-6 py-3",children:"Descrio"}),f.jsx("th",{className:"px-6 py-3",children:"Aprovador"}),f.jsx("th",{className:"px-6 py-3 text-right",children:"Valor"}),f.jsx("th",{className:"px-6 py-3 text-center",children:"Ao"})]})}),f.jsx("tbody",{children:A.map(R=>f.jsxs("tr",{className:"border-b dark:border-gray-700 bg-yellow-50 dark:bg-yellow-900/10",children:[f.jsx("td",{className:"px-6 py-4",children:Bn(R.date)}),f.jsx("td",{className:"px-6 py-4 font-bold",children:R.assetName}),f.jsx("td",{className:"px-6 py-4",children:R.description}),f.jsx("td",{className:"px-6 py-4",children:R.nextApprover}),f.jsx("td",{className:"px-6 py-4 text-right",children:ht(R.cost)}),f.jsx("td",{className:"px-6 py-4 text-center",children:f.jsx("button",{onClick:()=>{h(R),g(!0)},className:"text-primary-600 hover:underline font-medium",children:"Revisar"})})]},R.id))})]}),A.length===0&&f.jsxs("div",{className:"flex flex-col items-center justify-center py-10",children:[f.jsx(c1,{className:"w-12 h-12 text-green-500 mb-2"}),f.jsx("p",{className:"text-gray-500",children:"Tudo certo! Nenhuma aprovao pendente."})]})]})}),i==="predictions"&&f.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-8",children:[f.jsxs("div",{children:[f.jsx("h3",{className:"text-lg font-semibold mb-4 dark:text-white",children:"Anlise de Risco (IA)"}),f.jsx("p",{className:"text-sm text-gray-500 mb-4",children:"O sistema analisa idade, histrico e frequncia de quebras para prever falhas."}),f.jsx(v8,{predictions:n})]}),f.jsxs("div",{className:"bg-blue-50 dark:bg-blue-900/20 p-6 rounded-xl",children:[f.jsx("h4",{className:"font-bold text-blue-800 dark:text-blue-300 mb-2",children:"Dica do Especialista"}),f.jsx("p",{className:"text-sm text-blue-700 dark:text-blue-200",children:"Ativos com mais de 5 anos e manutenes frequentes devem ser priorizados para substituio no prximo ciclo oramentrio."})]})]})]})]}),p&&c&&f.jsx(XSe,{isOpen:p,onClose:()=>{g(!1),h(null)},record:c,onUpdate:r})]})},T8=N.createContext(void 0),mS=t=>{const e=window.document.documentElement,n=t==="dark"||t==="system"&&window.matchMedia("(prefers-color-scheme: dark)").matches;e.classList.toggle("dark",n)},t1e=({children:t})=>{const[e,n]=N.useState(()=>localStorage.getItem("theme")||"system");N.useEffect(()=>{mS(e);const a=window.matchMedia("(prefers-color-scheme: dark)"),s=()=>{e==="system"&&mS("system")};return a.addEventListener("change",s),()=>a.removeEventListener("change",s)},[e]);const i={theme:e,setTheme:a=>{localStorage.setItem("theme",a),n(a),mS(a)}};return f.jsx(T8.Provider,{value:i,children:t})},n1e=()=>{const t=N.useContext(T8);if(t===void 0)throw new Error("useTheme must be used within a ThemeProvider");return t},S8=({message:t,type:e,onClose:n,isOpen:r})=>{if(!r)return null;const i="fixed bottom-5 right-5 p-4 rounded-lg shadow-lg flex items-center z-[100] transition-opacity duration-300",a={success:"bg-green-500 text-white",error:"bg-red-500 text-white",info:"bg-blue-500 text-white"};return f.jsxs("div",{className:`${i} ${a[e]}`,role:"alert",children:[f.jsx("span",{children:t}),f.jsx("button",{onClick:n,className:"ml-4 font-bold text-xl leading-none","aria-label":"Close",children:""})]})},A8=dQ("syncWithERP"),r1e=async t=>{console.log(`Iniciando chamada da Cloud Function para sincronizar ativos com ${t}...`);try{const e=await A8({erpSystem:t,syncType:"assets"});return console.log("Resposta da Cloud Function (ativos):",e.data),e.data}catch(e){throw console.error(`Erro ao chamar a Cloud Function syncWithERP (ativos) para ${t}:`,e),new Error("Falha ao sincronizar ativos com o ERP via Cloud Function.")}},i1e=async t=>{console.log(`Iniciando chamada da Cloud Function para puxar dados de ${t}...`);try{const e=await A8({erpSystem:t,syncType:"financials"});return console.log("Resposta da Cloud Function (financeiro):",e.data),e.data}catch(e){throw console.error(`Erro ao chamar a Cloud Function syncWithERP (financeiro) para ${t}:`,e),new Error("Falha ao buscar dados financeiros do ERP via Cloud Function.")}},a1e=()=>{const{branding:t,setBranding:e}=Kd(),{theme:n,setTheme:r}=n1e(),{user:i}=$s(),{users:a}=Zt(),[s,l]=N.useState("branding"),[c,h]=N.useState(t),[p,g]=N.useState(!1),[x,b]=N.useState(!1),[C,A]=N.useState({message:"",type:"success",isOpen:!1}),[D,R]=N.useState("SAP"),[j,O]=N.useState(!1),[q,$]=N.useState(!1);N.useEffect(()=>{(async()=>{if(i!=null&&i.tenantId)try{const Z=await Gae(i.tenantId);if(Z){const K={...t,...Z,address:{...t.address,...Z.address||{}},bankInfo:{...t.bankInfo,...Z.bankInfo||{}}};e(K),h(K)}}catch(Z){console.error("Error loading settings",Z)}})()},[i==null?void 0:i.tenantId]);const H=async()=>{O(!0),A({message:`Sincronizando ativos com ${D}...`,type:"info",isOpen:!0});try{await r1e(D),A({message:"Sincronizao de ativos concluda com sucesso!",type:"success",isOpen:!0})}catch{A({message:"Falha na sincronizao com o ERP.",type:"error",isOpen:!0})}finally{O(!1),setTimeout(()=>A(B=>({...B,isOpen:!1})),4e3)}},U=async()=>{$(!0),A({message:`Buscando dados financeiros de ${D}...`,type:"info",isOpen:!0});try{const B=await i1e(D);A({message:`${B.data.length} registros financeiros foram puxados do ERP.`,type:"success",isOpen:!0})}catch{A({message:"Falha ao buscar dados do ERP.",type:"error",isOpen:!0})}finally{$(!1),setTimeout(()=>A(B=>({...B,isOpen:!1})),4e3)}},z=({tabName:B,label:Z})=>f.jsx("button",{onClick:()=>l(B),className:["whitespace-nowrap py-4 px-1 border-b-2 font-medium text-sm transition-colors duration-200",s===B?"border-primary-500 text-primary-600 dark:border-primary-400 dark:text-primary-400":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300 dark:text-gray-400 dark:hover:text-gray-300 dark:hover:border-gray-500"].join(" "),children:Z});return f.jsxs("div",{className:"p-4 md:p-8 space-y-6",children:[f.jsx("div",{className:"border-b border-gray-200 dark:border-gray-700",children:f.jsxs("nav",{className:"-mb-px flex space-x-8 overflow-x-auto","aria-label":"Tabs",children:[f.jsx(z,{tabName:"branding",label:"Dados da Empresa"}),f.jsx(z,{tabName:"plans",label:"Planos e Assinatura"}),f.jsx(z,{tabName:"preferences",label:"Preferncias"}),f.jsx(z,{tabName:"integrations",label:"Integraes (ERP)"}),f.jsx(z,{tabName:"access",label:"Controle de Acesso"}),f.jsx(z,{tabName:"security",label:"Segurana"})]})}),f.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-xl shadow-lg p-6",children:[s==="branding"&&f.jsx("div",{}),s==="integrations"&&f.jsxs("div",{children:[f.jsx("h2",{className:"text-xl font-semibold text-gray-900 dark:text-white mb-6",children:"Integrao com ERP"}),f.jsxs("div",{className:"space-y-6 max-w-xl",children:[f.jsxs("div",{children:[f.jsx("p",{className:"text-gray-600 dark:text-gray-400 mb-4",children:"Sincronize os dados do SGA+ com seu sistema de gesto empresarial (ERP). Esta  uma funcionalidade Enterprise. A implementao atual  uma simulao para demonstrar o fluxo de dados."}),f.jsx("label",{htmlFor:"erp",className:"label-style",children:"Selecione o Sistema ERP"}),f.jsxs("select",{id:"erp",name:"erp",value:D,onChange:B=>R(B.target.value),className:"input-style",children:[f.jsx("option",{value:"SAP",children:"SAP"}),f.jsx("option",{value:"Totvs",children:"Totvs"}),f.jsx("option",{value:"Oracle",children:"Oracle"})]})]}),f.jsxs("div",{className:"flex flex-col sm:flex-row gap-4 pt-4 border-t dark:border-gray-700",children:[f.jsxs("button",{onClick:H,disabled:j||q,className:"btn-primary flex items-center justify-center px-4 py-2 w-full sm:w-auto",children:[j&&f.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-white mr-2"}),"Sincronizar Ativos para o ERP"]}),f.jsxs("button",{onClick:U,disabled:j||q,className:"btn-outline flex items-center justify-center px-4 py-2 w-full sm:w-auto",children:[q&&f.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-current mr-2"}),"Puxar Dados Financeiros do ERP"]})]})]})]}),s==="plans"&&f.jsx("div",{}),s==="preferences"&&f.jsx("div",{}),s==="access"&&f.jsx("div",{}),s==="security"&&f.jsx("div",{})]}),f.jsx(S8,{...C,onClose:()=>A(B=>({...B,isOpen:!1}))}),f.jsx("style",{children:`
              .btn-primary { padding: 0.5rem 1rem; font-size: 0.875rem; border-radius: 0.5rem; transition: all 0.2s; background-color: rgb(var(--color-primary-600)); color: white; }
              .btn-primary:hover { background-color: rgb(var(--color-primary-700)); }
              .btn-primary:disabled { background-color: #9CA3AF; cursor: not-allowed; }
              .input-style { background-color: #F9FAFB; border: 1px solid #D1D5DB; color: #111827; font-size: 0.875rem; border-radius: 0.5rem; display: block; width: 100%; padding: 0.625rem; }
              .dark .input-style { background-color: #374151; border-color: #4B5563; color: white; }
              .btn-sm { padding: 0.25rem 0.75rem; font-size: 0.875rem; border-radius: 0.375rem; transition: all 0.2s; }
              .btn-outline { border: 1px solid #d1d5db; color: #374151; }
              .btn-outline:hover { background-color: #f3f4f6; }
              .btn-outline:disabled { color: #9CA3AF; border-color: #D1D5DB; cursor: not-allowed; }
              .dark .btn-outline { border-color: #4b5563; color: #e5e7eb; }
              .dark .btn-outline:hover { background-color: #374151; }
              .dark .btn-outline:disabled { color: #6B7280; border-color: #4B5563; }
              .label-style { display: block; font-size: 0.875rem; font-weight: 500; color: #374151; margin-bottom: 0.25rem; }
              .dark .label-style { color: #D1D5DB; }
            `})]})},s1e=({suppliers:t,onEdit:e,onDelete:n})=>f.jsxs("div",{className:"overflow-x-auto",children:[f.jsxs("table",{className:"w-full text-sm text-left text-gray-500 dark:text-gray-400",children:[f.jsx("thead",{className:"text-xs text-gray-700 uppercase bg-gray-50 dark:bg-gray-700 dark:text-gray-400",children:f.jsxs("tr",{children:[f.jsx("th",{scope:"col",className:"px-6 py-3",children:"Nome do Fornecedor"}),f.jsx("th",{scope:"col",className:"px-6 py-3",children:"Categoria"}),f.jsx("th",{scope:"col",className:"px-6 py-3",children:"Contato"}),f.jsx("th",{scope:"col",className:"px-6 py-3",children:"Email"}),f.jsx("th",{scope:"col",className:"px-6 py-3",children:"Telefone"}),f.jsx("th",{scope:"col",className:"px-6 py-3 text-center",children:"Aes"})]})}),f.jsx("tbody",{children:t.map(r=>f.jsxs("tr",{className:"bg-white border-b dark:bg-gray-800 dark:border-gray-700 hover:bg-gray-50 dark:hover:bg-gray-600",children:[f.jsx("th",{scope:"row",className:"px-6 py-4 font-medium text-gray-900 whitespace-nowrap dark:text-white",children:r.name}),f.jsx("td",{className:"px-6 py-4",children:r.category}),f.jsx("td",{className:"px-6 py-4",children:r.contactPerson||"N/A"}),f.jsx("td",{className:"px-6 py-4",children:r.email}),f.jsx("td",{className:"px-6 py-4",children:r.phone}),f.jsxs("td",{className:"px-6 py-4 text-center space-x-2",children:[f.jsx("button",{onClick:()=>e(r),className:"font-medium text-yellow-600 dark:text-yellow-500 hover:underline",children:"Editar"}),f.jsx("button",{onClick:()=>n(r.id),className:"font-medium text-red-600 dark:text-red-500 hover:underline",children:"Excluir"})]})]},r.id))})]}),t.length===0&&f.jsx("div",{className:"text-center py-10 text-gray-500 dark:text-gray-400",children:"Nenhum fornecedor encontrado."})]}),o1e=({isOpen:t,onClose:e,onSave:n})=>{const r={name:"",category:"",contactPerson:"",email:"",phone:"",address:""},[i,a]=N.useState(r),[s,l]=N.useState(!1),[c,h]=N.useState(null),p=b=>{const{name:C,value:A}=b.target;a(D=>({...D,[C]:A}))},g=async b=>{if(b.preventDefault(),!i.name||!i.category||!i.email||!i.phone){h("Por favor, preencha os campos obrigatrios (Nome, Categoria, E-mail, Telefone).");return}l(!0),h(null);try{await n(i),x()}catch{h("Falha ao salvar o fornecedor.")}finally{l(!1)}},x=()=>{a(r),h(null),e()};return t?f.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-60 z-50 flex justify-center items-center p-4",children:f.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-xl p-6 w-full max-w-lg",onClick:b=>b.stopPropagation(),children:[f.jsxs("div",{className:"flex justify-between items-center mb-6 border-b pb-3 dark:border-gray-600",children:[f.jsx("h2",{className:"text-xl font-bold",children:"Adicionar Novo Fornecedor"}),f.jsx("button",{onClick:x,disabled:s,children:""})]}),f.jsxs("form",{onSubmit:g,className:"space-y-4",children:[c&&f.jsx("div",{className:"bg-red-100 p-3 rounded text-red-700",children:c}),f.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[f.jsxs("div",{children:[f.jsx("label",{htmlFor:"name",children:"Nome do Fornecedor*"}),f.jsx("input",{type:"text",name:"name",value:i.name,onChange:p,required:!0,className:"input-style"})]}),f.jsxs("div",{children:[f.jsx("label",{htmlFor:"category",children:"Categoria*"}),f.jsx("input",{type:"text",name:"category",value:i.category,onChange:p,required:!0,className:"input-style",placeholder:"Ex: Manuteno de TI"})]})]}),f.jsxs("div",{children:[f.jsx("label",{htmlFor:"contactPerson",children:"Pessoa de Contato"}),f.jsx("input",{type:"text",name:"contactPerson",value:i.contactPerson,onChange:p,className:"input-style"})]}),f.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[f.jsxs("div",{children:[f.jsx("label",{htmlFor:"email",children:"E-mail*"}),f.jsx("input",{type:"email",name:"email",value:i.email,onChange:p,required:!0,className:"input-style"})]}),f.jsxs("div",{children:[f.jsx("label",{htmlFor:"phone",children:"Telefone*"}),f.jsx("input",{type:"tel",name:"phone",value:i.phone,onChange:p,required:!0,className:"input-style"})]})]}),f.jsxs("div",{children:[f.jsx("label",{htmlFor:"address",children:"Endereo"}),f.jsx("input",{type:"text",name:"address",value:i.address,onChange:p,className:"input-style"})]}),f.jsxs("div",{className:"flex justify-end gap-4 pt-4 mt-6 border-t dark:border-gray-600",children:[f.jsx("button",{type:"button",onClick:x,disabled:s,className:"btn-secondary",children:"Cancelar"}),f.jsx("button",{type:"submit",disabled:s,className:"btn-primary",children:s?"Salvando...":"Salvar Fornecedor"})]})]}),f.jsx("style",{children:".input-style { width: 100%; padding: 0.625rem; border-radius: 0.5rem; border: 1px solid #D1D5DB; } label { display: block; margin-bottom: 0.5rem; font-weight: 500; } .btn-primary, .btn-secondary { padding: 0.5rem 1rem; border-radius:0.5rem; font-weight: 500; } .btn-primary { background-color:rgb(var(--color-primary-600)); color:white; } .btn-secondary { background-color:#e5e7eb; color:#1f2937; } .dark .btn-secondary { background-color:#4b5563; color:#e5e7eb; } button:disabled { opacity: 0.5; }"})]})}):null},l1e=({isOpen:t,onClose:e,onSave:n,supplier:r})=>{const[i,a]=N.useState(r),[s,l]=N.useState(!1),[c,h]=N.useState(null);N.useEffect(()=>{a(r)},[r]);const p=x=>{const{name:b,value:C}=x.target;a(A=>({...A,[b]:C}))},g=async x=>{if(x.preventDefault(),!i.name||!i.category||!i.email||!i.phone){h("Por favor, preencha os campos obrigatrios.");return}l(!0),h(null);try{await n(r.id,i),e()}catch{h("Falha ao atualizar o fornecedor.")}finally{l(!1)}};return t?f.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-60 z-50 flex justify-center items-center p-4",children:f.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-xl p-6 w-full max-w-lg",onClick:x=>x.stopPropagation(),children:[f.jsxs("div",{className:"flex justify-between items-center mb-6 border-b pb-3 dark:border-gray-600",children:[f.jsx("h2",{className:"text-xl font-bold",children:"Editar Fornecedor"}),f.jsx("button",{onClick:e,disabled:s,children:""})]}),f.jsxs("form",{onSubmit:g,className:"space-y-4",children:[c&&f.jsx("div",{className:"bg-red-100 p-3 rounded text-red-700",children:c}),f.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[f.jsxs("div",{children:[f.jsx("label",{htmlFor:"name",children:"Nome*"}),f.jsx("input",{type:"text",name:"name",value:i.name,onChange:p,required:!0,className:"input-style"})]}),f.jsxs("div",{children:[f.jsx("label",{htmlFor:"category",children:"Categoria*"}),f.jsx("input",{type:"text",name:"category",value:i.category,onChange:p,required:!0,className:"input-style"})]})]}),f.jsxs("div",{children:[f.jsx("label",{htmlFor:"contactPerson",children:"Pessoa de Contato"}),f.jsx("input",{type:"text",name:"contactPerson",value:i.contactPerson,onChange:p,className:"input-style"})]}),f.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[f.jsxs("div",{children:[f.jsx("label",{htmlFor:"email",children:"E-mail*"}),f.jsx("input",{type:"email",name:"email",value:i.email,onChange:p,required:!0,className:"input-style"})]}),f.jsxs("div",{children:[f.jsx("label",{htmlFor:"phone",children:"Telefone*"}),f.jsx("input",{type:"tel",name:"phone",value:i.phone,onChange:p,required:!0,className:"input-style"})]})]}),f.jsxs("div",{children:[f.jsx("label",{htmlFor:"address",children:"Endereo"}),f.jsx("input",{type:"text",name:"address",value:i.address,onChange:p,className:"input-style"})]}),f.jsxs("div",{className:"flex justify-end gap-4 pt-4 mt-6 border-t dark:border-gray-600",children:[f.jsx("button",{type:"button",onClick:e,disabled:s,className:"btn-secondary",children:"Cancelar"}),f.jsx("button",{type:"submit",disabled:s,className:"btn-primary",children:s?"Salvando...":"Salvar Alteraes"})]})]}),f.jsx("style",{children:".input-style { width: 100%; padding: 0.625rem; border-radius: 0.5rem; border: 1px solid #D1D5DB; } label { display: block; margin-bottom: 0.5rem; font-weight: 500; } .btn-primary, .btn-secondary { padding: 0.5rem 1rem; border-radius:0.5rem; font-weight: 500; } .btn-primary { background-color:rgb(var(--color-primary-600)); color:white; } .btn-secondary { background-color:#e5e7eb; color:#1f2937; } .dark .btn-secondary { background-color:#4b5563; color:#e5e7eb; } button:disabled { opacity: 0.5; }"})]})}):null},u1e=()=>{const{suppliers:t,addSupplier:e,updateSupplier:n,deleteSupplier:r,isLoading:i,error:a}=Zt(),[s,l]=N.useState(""),[c,h]=N.useState(!1),[p,g]=N.useState(!1),[x,b]=N.useState(!1),[C,A]=N.useState(null),[D,R]=N.useState(null),j=N.useMemo(()=>{const H=s.toLowerCase();return t.filter(U=>U.name.toLowerCase().includes(H)||U.category.toLowerCase().includes(H)||U.contactPerson&&U.contactPerson.toLowerCase().includes(H))},[t,s]),O=H=>{A(H),g(!0)},q=H=>{R(H),b(!0)},$=async()=>{D&&(await r(D),b(!1),R(null))};return f.jsxs("div",{className:"p-4 md:p-8 space-y-6",children:[f.jsxs("div",{className:"flex flex-col md:flex-row justify-between items-start md:items-center",children:[f.jsx("p",{className:"text-gray-500 dark:text-gray-400",children:"Centralize as informaes e o histrico de seus fornecedores."}),f.jsxs("button",{onClick:()=>h(!0),className:"btn btn-primary",children:[f.jsx(Ba,{className:"w-5 h-5 mr-2"}),"Adicionar Fornecedor"]})]}),a&&f.jsx("div",{className:"bg-red-100 border-l-4 border-red-500 text-red-700 p-4",role:"alert",children:f.jsx("p",{children:a})}),i?f.jsx("div",{className:"flex justify-center items-center h-64",children:f.jsx("div",{className:"animate-spin rounded-full h-16 w-16 border-t-2 border-b-2 border-primary-500"})}):f.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-xl shadow-lg p-6",children:[f.jsxs("div",{className:"mb-4",children:[f.jsx("label",{htmlFor:"searchFilter",className:"block mb-2 text-sm font-medium text-gray-900 dark:text-white",children:"Buscar Fornecedor"}),f.jsx("input",{type:"text",id:"searchFilter",value:s,onChange:H=>l(H.target.value),className:"bg-gray-50 border border-gray-300 text-gray-900 text-sm rounded-lg focus:ring-primary-500 focus:border-primary-500 block w-full p-2.5 dark:bg-gray-700 dark:border-gray-600 dark:placeholder-gray-400 dark:text-white",placeholder:"Buscar por nome, categoria ou contato..."})]}),f.jsx(s1e,{suppliers:j,onEdit:O,onDelete:q})]}),f.jsx(o1e,{isOpen:c,onClose:()=>h(!1),onSave:e}),p&&C&&f.jsx(l1e,{isOpen:p,onClose:()=>g(!1),onSave:n,supplier:C}),x&&f.jsx(ym,{isOpen:x,onClose:()=>b(!1),onConfirm:$,title:"Confirmar Excluso",message:"Tem certeza de que deseja excluir este fornecedor? Esta ao no pode ser desfeita."}),f.jsx("style",{children:".btn {display:inline-flex;align-items:center;justify-content:center;padding:0.5rem 1rem;font-weight:500;border-radius:0.5rem;transition:background-color .2s}.btn-primary {background-color:rgb(var(--color-primary-600));color:#fff}.btn-primary:hover {background-color:rgb(var(--color-primary-700))}"})]})},c1e=({items:t,onEdit:e,onDelete:n,onRequestPurchase:r,onMove:i,onHistory:a})=>{const s=l=>{if(!l)return"";const c=new Date;c.setHours(0,0,0,0);const p=new Date(l).getTime()-c.getTime(),g=Math.ceil(p/(1e3*60*60*24));return g<0?"bg-red-50 dark:bg-red-900/50":g<=30?"bg-yellow-50 dark:bg-yellow-900/50":""};return f.jsxs("div",{className:"overflow-x-auto",children:[f.jsxs("table",{className:"w-full text-sm text-left text-gray-500 dark:text-gray-400",children:[f.jsx("thead",{className:"text-xs text-gray-700 uppercase bg-gray-50 dark:bg-gray-700 dark:text-gray-400",children:f.jsxs("tr",{children:[f.jsx("th",{scope:"col",className:"px-6 py-3",children:"Nome do Item"}),f.jsx("th",{scope:"col",className:"px-6 py-3",children:"SKU"}),f.jsx("th",{scope:"col",className:"px-6 py-3",children:"Lote"}),f.jsx("th",{scope:"col",className:"px-6 py-3",children:"Validade"}),f.jsx("th",{scope:"col",className:"px-6 py-3 text-center",children:"Qtd."}),f.jsx("th",{scope:"col",className:"px-6 py-3",children:"Localizao"}),f.jsx("th",{scope:"col",className:"px-6 py-3 text-center",children:"Aes"})]})}),f.jsx("tbody",{children:t.map(l=>{const c=l.quantity<=l.threshold,h=s(l.expiryDate);return f.jsxs("tr",{className:`border-b dark:border-gray-700 ${h||(c?"bg-orange-50 dark:bg-orange-900/50":"bg-white dark:bg-gray-800")} hover:bg-gray-50 dark:hover:bg-gray-600`,children:[f.jsx("th",{scope:"row",className:"px-6 py-4 font-medium text-gray-900 whitespace-nowrap dark:text-white",children:f.jsxs("div",{className:"flex items-center",children:[l.name,c&&f.jsx(Ro,{className:"w-4 h-4 ml-2 text-orange-600",title:`Estoque baixo! Limite: ${l.threshold}.`}),h.includes("yellow")&&f.jsx(Ro,{className:"w-4 h-4 ml-2 text-yellow-600",title:"Validade prxima!"}),h.includes("red")&&f.jsx(Ro,{className:"w-4 h-4 ml-2 text-red-600",title:"Produto vencido!"})]})}),f.jsx("td",{className:"px-6 py-4 font-mono",children:l.sku}),f.jsx("td",{className:"px-6 py-4",children:l.lotNumber||"N/A"}),f.jsx("td",{className:"px-6 py-4",children:l.expiryDate?Bn(l.expiryDate):"N/A"}),f.jsx("td",{className:`px-6 py-4 text-center font-bold ${c?"text-orange-700 dark:text-orange-300":"text-gray-800 dark:text-gray-200"}`,children:l.quantity}),f.jsx("td",{className:"px-6 py-4",children:l.location}),f.jsxs("td",{className:"px-6 py-4 text-center flex items-center justify-center space-x-2",children:[f.jsx("button",{onClick:()=>i(l),className:"p-1 text-blue-600 hover:bg-blue-100 rounded",title:"Movimentar",children:f.jsx(nF,{className:"w-4 h-4 transform rotate-90"})}),f.jsx("button",{onClick:()=>a(l),className:"p-1 text-gray-600 hover:bg-gray-100 rounded",title:"Histrico",children:f.jsx(k_,{className:"w-4 h-4"})}),f.jsx("div",{className:"h-4 border-l border-gray-300 mx-1"}),c&&f.jsx("button",{onClick:()=>r(l),className:"text-xs font-medium text-blue-600 hover:underline",children:"Comprar"}),f.jsx("button",{onClick:()=>e(l),className:"text-xs font-medium text-yellow-600 hover:underline",children:"Editar"}),f.jsx("button",{onClick:()=>n(l.id),className:"text-xs font-medium text-red-600 hover:underline",children:"Excluir"})]})]},l.id)})})]}),t.length===0&&f.jsx("div",{className:"text-center py-10 text-gray-500 dark:text-gray-400",children:"Nenhum item encontrado no estoque."})]})},d1e=({isOpen:t,onClose:e,onSave:n})=>{const r={name:"",sku:"",quantity:0,location:"",threshold:10,lotNumber:"",expiryDate:""},[i,a]=N.useState(r),[s,l]=N.useState(!1),[c,h]=N.useState(null),p=b=>{const{name:C,value:A}=b.target;a(D=>({...D,[C]:["quantity","threshold"].includes(C)?parseInt(A)||0:A}))},g=async b=>{if(b.preventDefault(),!i.name||!i.sku||!i.location){h("Por favor, preencha todos os campos obrigatrios.");return}l(!0),h(null);try{await n(i),x()}catch{h("Falha ao salvar o item.")}finally{l(!1)}},x=()=>{a(r),h(null),e()};return t?f.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-60 z-50 flex justify-center items-center p-4",children:f.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-xl p-6 w-full max-w-lg",onClick:b=>b.stopPropagation(),children:[f.jsxs("div",{className:"flex justify-between items-center mb-6 border-b pb-3 dark:border-gray-600",children:[f.jsx("h2",{className:"text-xl font-bold text-gray-900 dark:text-white",children:"Adicionar Item ao Estoque"}),f.jsx("button",{onClick:x,disabled:s,children:""})]}),f.jsxs("form",{onSubmit:g,className:"space-y-4",children:[c&&f.jsx("div",{className:"bg-red-100 border border-red-400 text-red-700 px-4 py-3 rounded",children:c}),f.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[f.jsxs("div",{children:[f.jsx("label",{htmlFor:"name",children:"Nome do Item"}),f.jsx("input",{type:"text",name:"name",id:"name",value:i.name,onChange:p,required:!0,className:"input-style",placeholder:"Ex: Memria RAM 16GB DDR4"})]}),f.jsxs("div",{children:[f.jsx("label",{htmlFor:"sku",children:"SKU / Cdigo"}),f.jsx("input",{type:"text",name:"sku",id:"sku",value:i.sku,onChange:p,required:!0,className:"input-style",placeholder:"Ex: MEM-DDR4-16G-3200"})]})]}),f.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[f.jsxs("div",{children:[f.jsx("label",{htmlFor:"lotNumber",children:"Nmero do Lote"}),f.jsx("input",{type:"text",name:"lotNumber",id:"lotNumber",value:i.lotNumber,onChange:p,className:"input-style"})]}),f.jsxs("div",{children:[f.jsx("label",{htmlFor:"expiryDate",children:"Data de Validade"}),f.jsx("input",{type:"date",name:"expiryDate",id:"expiryDate",value:i.expiryDate,onChange:p,className:"input-style"})]})]}),f.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[f.jsxs("div",{children:[f.jsx("label",{htmlFor:"quantity",children:"Quantidade Inicial"}),f.jsx("input",{type:"number",name:"quantity",id:"quantity",value:i.quantity,onChange:p,required:!0,min:"0",className:"input-style"})]}),f.jsxs("div",{children:[f.jsx("label",{htmlFor:"threshold",children:"Limite Mnimo (Alerta)"}),f.jsx("input",{type:"number",name:"threshold",id:"threshold",value:i.threshold,onChange:p,required:!0,min:"0",className:"input-style"})]})]}),f.jsxs("div",{children:[f.jsx("label",{htmlFor:"location",children:"Localizao"}),f.jsx("input",{type:"text",name:"location",id:"location",value:i.location,onChange:p,required:!0,className:"input-style",placeholder:"Ex: Almoxarifado TI, Prateleira B-05"})]}),f.jsxs("div",{className:"flex justify-end gap-4 pt-4 mt-6 border-t dark:border-gray-600",children:[f.jsx("button",{type:"button",onClick:x,disabled:s,className:"btn-secondary",children:"Cancelar"}),f.jsx("button",{type:"submit",disabled:s,className:"btn-primary",children:s?"Salvando...":"Salvar Item"})]})]}),f.jsx("style",{children:".input-style { background-color: #F9FAFB; border: 1px solid #D1D5DB; color: #111827; font-size: 0.875rem; border-radius: 0.5rem; display: block; width: 100%; padding: 0.625rem; } .dark .input-style { background-color: #374151; border-color: #4B5563; color: white; } label { display: block; margin-bottom: 0.5rem; font-size: 0.875rem; font-weight: 500; } .btn-primary, .btn-secondary { padding: 0.5rem 1rem; border-radius:0.5rem; font-weight: 500; } .btn-primary { background-color:rgb(var(--color-primary-600)); color:white; } .btn-secondary { background-color:#e5e7eb; color:#1f2937; } .dark .btn-secondary { background-color:#4b5563; color:#e5e7eb; } button:disabled { opacity: 0.5; }"})]})}):null},f1e=({isOpen:t,onClose:e,onSave:n,item:r})=>{const[i,a]=N.useState(r),[s,l]=N.useState(!1),[c,h]=N.useState(null);N.useEffect(()=>{a({...r,expiryDate:r.expiryDate?r.expiryDate.split("T")[0]:""})},[r]);const p=x=>{const{name:b,value:C}=x.target;a(A=>({...A,[b]:["quantity","threshold"].includes(b)?parseInt(C)||0:C}))},g=async x=>{if(x.preventDefault(),!i.name||!i.sku||!i.location){h("Por favor, preencha todos os campos obrigatrios.");return}l(!0),h(null);try{await n(r.id,i),e()}catch{h("Falha ao atualizar o item.")}finally{l(!1)}};return t?f.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-60 z-50 flex justify-center items-center p-4",children:f.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-xl p-6 w-full max-w-lg",onClick:x=>x.stopPropagation(),children:[f.jsxs("div",{className:"flex justify-between items-center mb-6 border-b pb-3 dark:border-gray-600",children:[f.jsx("h2",{className:"text-xl font-bold text-gray-900 dark:text-white",children:"Editar Item do Estoque"}),f.jsx("button",{onClick:e,disabled:s,children:""})]}),f.jsxs("form",{onSubmit:g,className:"space-y-4",children:[c&&f.jsx("div",{className:"bg-red-100 border border-red-400 text-red-700 px-4 py-3 rounded",children:c}),f.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[f.jsxs("div",{children:[f.jsx("label",{htmlFor:"name",children:"Nome do Item"}),f.jsx("input",{type:"text",name:"name",id:"name",value:i.name,onChange:p,required:!0,className:"input-style"})]}),f.jsxs("div",{children:[f.jsx("label",{htmlFor:"sku",children:"SKU / Cdigo"}),f.jsx("input",{type:"text",name:"sku",id:"sku",value:i.sku,onChange:p,required:!0,className:"input-style"})]})]}),f.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[f.jsxs("div",{children:[f.jsx("label",{htmlFor:"lotNumber",children:"Nmero do Lote"}),f.jsx("input",{type:"text",name:"lotNumber",id:"lotNumber",value:i.lotNumber||"",onChange:p,className:"input-style"})]}),f.jsxs("div",{children:[f.jsx("label",{htmlFor:"expiryDate",children:"Data de Validade"}),f.jsx("input",{type:"date",name:"expiryDate",id:"expiryDate",value:i.expiryDate||"",onChange:p,className:"input-style"})]})]}),f.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[f.jsxs("div",{children:[f.jsx("label",{htmlFor:"quantity",children:"Quantidade"}),f.jsx("input",{type:"number",name:"quantity",id:"quantity",value:i.quantity,onChange:p,required:!0,min:"0",className:"input-style"})]}),f.jsxs("div",{children:[f.jsx("label",{htmlFor:"threshold",children:"Limite Mnimo (Alerta)"}),f.jsx("input",{type:"number",name:"threshold",id:"threshold",value:i.threshold,onChange:p,required:!0,min:"0",className:"input-style"})]})]}),f.jsxs("div",{children:[f.jsx("label",{htmlFor:"location",children:"Localizao"}),f.jsx("input",{type:"text",name:"location",id:"location",value:i.location,onChange:p,required:!0,className:"input-style"})]}),f.jsxs("div",{className:"flex justify-end gap-4 pt-4 mt-6 border-t dark:border-gray-600",children:[f.jsx("button",{type:"button",onClick:e,disabled:s,className:"btn-secondary",children:"Cancelar"}),f.jsx("button",{type:"submit",disabled:s,className:"btn-primary",children:s?"Salvando...":"Salvar Alteraes"})]})]}),f.jsx("style",{children:".input-style { background-color: #F9FAFB; border: 1px solid #D1D5DB; color: #111827; font-size: 0.875rem; border-radius: 0.5rem; display: block; width: 100%; padding: 0.625rem; } .dark .input-style { background-color: #374151; border-color: #4B5563; color: white; } label { display: block; margin-bottom: 0.5rem; font-size: 0.875rem; font-weight: 500; } .btn-primary, .btn-secondary { padding: 0.5rem 1rem; border-radius:0.5rem; font-weight: 500; } .btn-primary { background-color:rgb(var(--color-primary-600)); color:white; } .btn-secondary { background-color:#e5e7eb; color:#1f2937; } .dark .btn-secondary { background-color:#4b5563; color:#e5e7eb; } button:disabled { opacity: 0.5; }"})]})}):null},h1e=({isOpen:t,onClose:e,onConfirm:n,item:r})=>{const[i,a]=N.useState("ENTRADA"),[s,l]=N.useState(1),[c,h]=N.useState(""),[p,g]=N.useState(!1),[x,b]=N.useState(null),C=async A=>{if(A.preventDefault(),b(null),s<=0){b("A quantidade deve ser maior que zero.");return}if((i==="SAIDA"||i==="TRANSFERENCIA")&&r.quantity<s){b(`Estoque insuficiente. Disponvel: ${r.quantity}`);return}if(i==="TRANSFERENCIA"&&!c){b("Informe o local de destino para a transferncia.");return}g(!0);try{await n(r.id,i,s,c),e()}catch(D){b(D.message||"Erro ao registrar movimentao.")}finally{g(!1)}};return t?f.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-60 z-50 flex justify-center items-center p-4",children:f.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-xl p-6 w-full max-w-sm",children:[f.jsx("h2",{className:"text-xl font-bold mb-2 dark:text-white",children:"Movimentar Estoque"}),f.jsxs("p",{className:"text-sm text-gray-500 dark:text-gray-400 mb-4",children:["Item: ",f.jsx("strong",{children:r.name})," (Atual: ",r.quantity,")"]}),f.jsxs("form",{onSubmit:C,className:"space-y-4",children:[x&&f.jsx("div",{className:"bg-red-100 p-3 rounded text-red-700 text-sm",children:x}),f.jsxs("div",{children:[f.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Tipo de Movimentao"}),f.jsxs("select",{value:i,onChange:A=>a(A.target.value),className:"w-full p-2 border rounded-md dark:bg-gray-700 dark:border-gray-600 dark:text-white",children:[f.jsx("option",{value:"ENTRADA",children:"Entrada (Abastecimento)"}),f.jsx("option",{value:"SAIDA",children:"Sada (Baixa/Consumo)"}),f.jsx("option",{value:"TRANSFERENCIA",children:"Transferncia"})]})]}),f.jsxs("div",{children:[f.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Quantidade"}),f.jsx("input",{type:"number",value:s,onChange:A=>l(Number(A.target.value)),min:"1",className:"w-full p-2 border rounded-md dark:bg-gray-700 dark:border-gray-600 dark:text-white"})]}),i==="TRANSFERENCIA"&&f.jsxs("div",{children:[f.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Local de Destino"}),f.jsx("input",{type:"text",value:c,onChange:A=>h(A.target.value),placeholder:"Ex: Armazm B",className:"w-full p-2 border rounded-md dark:bg-gray-700 dark:border-gray-600 dark:text-white"})]}),f.jsxs("div",{className:"flex justify-end gap-4 pt-4 border-t dark:border-gray-700",children:[f.jsx("button",{type:"button",onClick:e,className:"px-4 py-2 text-sm bg-gray-100 hover:bg-gray-200 rounded-md dark:bg-gray-700 dark:text-white",children:"Cancelar"}),f.jsx("button",{type:"submit",disabled:p,className:"px-4 py-2 text-sm bg-primary-600 hover:bg-primary-700 text-white rounded-md disabled:opacity-50",children:p?"Processando...":"Confirmar"})]})]})]})}):null},m1e=({isOpen:t,onClose:e,item:n})=>{if(!t)return null;const r=n.movementHistory?[...n.movementHistory].sort((i,a)=>new Date(a.date).getTime()-new Date(i.date).getTime()):[];return f.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-60 z-50 flex justify-center items-center p-4",children:f.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-xl p-6 w-full max-w-2xl max-h-[80vh] flex flex-col",children:[f.jsxs("div",{className:"flex justify-between items-center mb-4 border-b dark:border-gray-700 pb-2",children:[f.jsx("h2",{className:"text-xl font-bold dark:text-white",children:"Histrico de Movimentao"}),f.jsx("button",{onClick:e,className:"text-gray-500 hover:text-gray-700 text-2xl",children:""})]}),f.jsxs("p",{className:"mb-4 text-gray-600 dark:text-gray-300",children:["Item: ",f.jsx("strong",{children:n.name})]}),f.jsx("div",{className:"overflow-y-auto flex-1",children:r.length===0?f.jsx("p",{className:"text-center text-gray-500",children:"Nenhum histrico registrado."}):f.jsxs("table",{className:"w-full text-sm text-left text-gray-500 dark:text-gray-400",children:[f.jsx("thead",{className:"text-xs text-gray-700 uppercase bg-gray-50 dark:bg-gray-700 dark:text-gray-400 sticky top-0",children:f.jsxs("tr",{children:[f.jsx("th",{className:"px-4 py-2",children:"Data"}),f.jsx("th",{className:"px-4 py-2",children:"Ao"}),f.jsx("th",{className:"px-4 py-2 text-center",children:"Qtd"}),f.jsx("th",{className:"px-4 py-2",children:"Usurio"}),f.jsx("th",{className:"px-4 py-2",children:"Detalhes"})]})}),f.jsx("tbody",{children:r.map((i,a)=>f.jsxs("tr",{className:"border-b dark:border-gray-700 hover:bg-gray-50 dark:hover:bg-gray-600",children:[f.jsx("td",{className:"px-4 py-2 whitespace-nowrap",children:new Date(i.date).toLocaleString("pt-BR")}),f.jsx("td",{className:"px-4 py-2",children:f.jsx("span",{className:`px-2 py-0.5 rounded text-xs font-bold ${i.type==="ENTRADA"?"bg-green-100 text-green-800":i.type==="SAIDA"?"bg-red-100 text-red-800":"bg-blue-100 text-blue-800"}`,children:i.type})}),f.jsx("td",{className:"px-4 py-2 text-center font-mono",children:i.quantity}),f.jsx("td",{className:"px-4 py-2",children:i.user}),f.jsx("td",{className:"px-4 py-2 text-xs",children:i.type==="TRANSFERENCIA"?f.jsxs("span",{children:[i.origin,"  ",i.destination]}):i.reason||"-"})]},i.id||a))})]})})]})})},C8=({isOpen:t,onClose:e,onSave:n,initialItem:r})=>{const[i,a]=N.useState([]),[s,l]=N.useState(""),[c,h]=N.useState(null),[p,g]=N.useState(!1);N.useEffect(()=>{t&&(a(r?[{id:1,name:r.name,quantity:r.threshold>0?r.threshold:1}]:[{id:1,name:"",quantity:1}]),l(""),h(null))},[r,t]);const x=(j,O,q)=>{a($=>$.map(H=>H.id===j?{...H,[O]:q}:H))},b=()=>a(j=>[...j,{id:Date.now(),name:"",quantity:1}]),C=j=>{i.length>1&&a(O=>O.filter(q=>q.id!==j))},A=j=>{const O=j.target.files?j.target.files[0]:null;if(O&&!FN(O)){alert("O arquivo  muito grande (Mx 1MB)."),j.target.value="";return}h(O)},D=async j=>{j.preventDefault(),g(!0);const O=i.map(({name:q,quantity:$})=>({name:q,quantity:Number($)})).filter(q=>q.name&&q.quantity>0);O.length>0&&await n(O,s,c),g(!1),e()},R=()=>{a([]),l(""),h(null),e()};return t?f.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-60 z-50 flex justify-center items-center p-4",children:f.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-xl p-6 w-full max-w-2xl",onClick:j=>j.stopPropagation(),children:[f.jsx("h2",{className:"text-xl font-bold text-gray-900 dark:text-white mb-4",children:"Nova Requisio de Compra"}),f.jsxs("form",{onSubmit:D,className:"space-y-4",children:[f.jsxs("div",{children:[f.jsx("label",{className:"block mb-1 text-sm font-medium dark:text-gray-200",children:"Itens"}),i.map(j=>f.jsxs("div",{className:"grid grid-cols-12 gap-2 items-center mb-2",children:[f.jsx("div",{className:"col-span-8",children:f.jsx("input",{type:"text",placeholder:"Nome do Item",value:j.name,onChange:O=>x(j.id,"name",O.target.value),required:!0,className:"input-style"})}),f.jsx("div",{className:"col-span-3",children:f.jsx("input",{type:"number",placeholder:"Qtd.",value:j.quantity,onChange:O=>x(j.id,"quantity",O.target.value),min:"1",required:!0,className:"input-style"})}),f.jsx("div",{className:"col-span-1",children:f.jsx("button",{type:"button",onClick:()=>C(j.id),className:"text-red-500 font-bold text-xl disabled:opacity-50",disabled:i.length<=1,children:""})})]},j.id)),f.jsx("button",{type:"button",onClick:b,className:"text-sm text-primary-600 hover:underline",children:"+ Adicionar outro item"})]}),f.jsxs("div",{children:[f.jsx("label",{htmlFor:"justification",className:"block mb-1 text-sm font-medium dark:text-gray-200",children:"Justificativa (Opcional)"}),f.jsx("textarea",{id:"justification",value:s,onChange:j=>l(j.target.value),rows:2,className:"input-style",placeholder:"Ex: Estoque baixo, novos projetos, etc."})]}),f.jsxs("div",{children:[f.jsx("label",{htmlFor:"attachment",className:"block mb-1 text-sm font-medium dark:text-gray-200",children:"Anexo (Opcional - Mx 1MB)"}),f.jsx("input",{type:"file",id:"attachment",onChange:A,className:"input-style file-input"}),f.jsx("p",{className:"mt-1 text-xs text-gray-500 dark:text-gray-400",children:"Anexe uma cotao, especificao ou outro documento relevante."})]}),f.jsxs("div",{className:"flex justify-end gap-4 pt-4 border-t dark:border-gray-600",children:[f.jsx("button",{type:"button",onClick:R,disabled:p,className:"btn-secondary",children:"Cancelar"}),f.jsx("button",{type:"submit",disabled:p,className:"btn-primary",children:p?"Enviando...":"Enviar Requisio"})]})]}),f.jsx("style",{children:".input-style{width:100%;padding:0.625rem;border-radius:0.5rem;border:1px solid #D1D5DB; background-color:#F9FAFB; color: #111827;}.dark .input-style{background-color:#374151;border-color:#4B5563;color:white;} .file-input::file-selector-button{font-semibold;background-color:#eef2ff;color:#4338ca;border:0;padding:.25rem .5rem;border-radius:.25rem;cursor:pointer;margin-right:.5rem;font-size:0.75rem}.dark .file-input::file-selector-button{background-color:#312e81;color:#c7d2fe;} .btn-primary{background-color:rgb(var(--color-primary-600));color:white; padding:0.5rem 1rem;border-radius:0.5rem;}.btn-secondary{background-color:#e5e7eb;color:#1f2937;padding:0.5rem 1rem;border-radius:0.5rem;}.dark .btn-secondary{background-color:#4b5563;color:#e5e7eb;} button:disabled { opacity: 0.5;}"})]})}):null},p1e=({setCurrentPage:t})=>{const{stockItems:e,addStockItem:n,updateStockItem:r,deleteStockItem:i,addPurchaseRequisition:a,registerStockMovement:s,isLoading:l,error:c}=Zt(),{user:h}=$s(),{branding:p}=Kd(),[g,x]=N.useState(""),[b,C]=N.useState(!1),[A,D]=N.useState(!1),[R,j]=N.useState(!1),[O,q]=N.useState(!1),[$,H]=N.useState(!1),[U,z]=N.useState(!1),[B,Z]=N.useState(null),[K,J]=N.useState(null),[G,Se]=N.useState(null),Oe=N.useMemo(()=>{const be=g.toLowerCase();return e.filter(Ce=>Ce.name.toLowerCase().includes(be)||Ce.sku.toLowerCase().includes(be)||Ce.location.toLowerCase().includes(be))},[e,g]),ee=be=>{Z(be),D(!0)},re=be=>{J(be),j(!0)},le=be=>{Z(be),H(!0)},Ne=be=>{Z(be),z(!0)},Pe=async()=>{K&&(await i(K),j(!1),J(null))},X=be=>{Se(be),q(!0)},ue=async be=>{if(!(h!=null&&h.name))return;const Ce={requesterName:h.name,requestDate:new Date().toISOString(),items:be,status:Jn.PENDING};await a(Ce)};return f.jsxs("div",{className:"p-4 md:p-8 space-y-6",children:[f.jsxs("div",{className:"flex flex-col md:flex-row justify-between items-start md:items-center",children:[f.jsx("p",{className:"text-gray-500 dark:text-gray-400",children:"Gerencie peas e consumveis para manuteno."}),f.jsxs("div",{className:"flex items-center space-x-2 mt-4 md:mt-0",children:[f.jsxs("button",{onClick:()=>t("stockReconciliation"),className:"btn btn-secondary",children:[f.jsx(c1,{className:"w-5 h-5 mr-2"}),"Contagem"]}),f.jsxs("button",{onClick:()=>DSe(Oe,p),className:"btn btn-secondary",children:[f.jsx(ix,{className:"w-5 h-5 mr-2"}),"CSV"]}),f.jsxs("button",{onClick:()=>C(!0),className:"btn btn-primary",children:[f.jsx(Ba,{className:"w-5 h-5 mr-2"}),"Adicionar Item"]})]})]}),c&&f.jsx("div",{className:"bg-red-100 border-l-4 border-red-500 text-red-700 p-4",role:"alert",children:f.jsx("p",{children:c})}),l?f.jsx("div",{className:"flex justify-center items-center h-64",children:f.jsx("div",{className:"animate-spin rounded-full h-16 w-16 border-t-2 border-b-2 border-primary-500"})}):f.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-xl shadow-lg p-6",children:[f.jsxs("div",{className:"mb-4",children:[f.jsx("label",{htmlFor:"searchFilter",className:"block mb-2 text-sm font-medium text-gray-900 dark:text-white",children:"Buscar Item"}),f.jsx("input",{type:"text",id:"searchFilter",value:g,onChange:be=>x(be.target.value),className:"bg-gray-50 border border-gray-300 text-gray-900 text-sm rounded-lg focus:ring-primary-500 focus:border-primary-500 block w-full p-2.5 dark:bg-gray-700 dark:border-gray-600 dark:placeholder-gray-400 dark:text-white",placeholder:"Buscar por nome, SKU ou localizao..."})]}),f.jsx(c1e,{items:Oe,onEdit:ee,onDelete:re,onRequestPurchase:X,onMove:le,onHistory:Ne})]}),f.jsx(d1e,{isOpen:b,onClose:()=>C(!1),onSave:n}),A&&B&&f.jsx(f1e,{isOpen:A,onClose:()=>D(!1),onSave:r,item:B}),$&&B&&f.jsx(h1e,{isOpen:$,onClose:()=>H(!1),item:B,onConfirm:s}),U&&B&&f.jsx(m1e,{isOpen:U,onClose:()=>z(!1),item:B}),R&&f.jsx(ym,{isOpen:R,onClose:()=>j(!1),onConfirm:Pe,title:"Confirmar Excluso",message:"Tem certeza de que deseja excluir este item do estoque? Esta ao no pode ser desfeita."}),f.jsx(C8,{isOpen:O,onClose:()=>q(!1),onSave:ue,initialItem:G}),f.jsx("style",{children:".btn{display:inline-flex;align-items:center;justify-content:center;padding:0.5rem 1rem;font-weight:500;border-radius:0.5rem;transition:background-color .2s}.btn-primary{background-color:rgb(var(--color-primary-600));color:#fff}.btn-primary:hover{background-color:rgb(var(--color-primary-700))}.btn-secondary{background-color:#e5e7eb;color:#1f2937}.btn-secondary:hover{background-color:#d1d5db}.dark .btn-secondary{background-color:#4b5563;color:#e5e7eb}.dark .btn-secondary:hover{background-color:#6b7280}"})]})},J4=["#0088FE","#00C49F","#FFBB28","#FF8042","#8884d8","#ff4d4d"],pS=[{id:"all",name:"Consolidado (Todas)",balance:0},{id:"acc1",name:"Banco Inter",balance:45200.5},{id:"acc2",name:"Ita Empresas",balance:12800},{id:"acc3",name:"Caixa Econmica",balance:3500}],g1e=({invoices:t,contracts:e,employees:n})=>{var g;const{expenses:r}=Zt(),[i,a]=N.useState("all"),s=pS.slice(1).reduce((x,b)=>x+b.balance,0),l=N.useMemo(()=>{const x=new Date().getMonth(),b=new Date().getFullYear(),C=t.filter(q=>new Date(q.issueDate).getMonth()===x&&new Date(q.issueDate).getFullYear()===b&&q.status===Xn.PAID).reduce((q,$)=>q+$.total,0),A=t.filter(q=>q.status===Xn.PENDING||q.status===Xn.OVERDUE).reduce((q,$)=>q+$.total,0),D=e.filter(q=>q.status===Va.ACTIVE).reduce((q,$)=>q+$.monthlyValue,0),R=n.filter(q=>q.status==="Ativo").reduce((q,$)=>q+$.salary,0),j=D+R,O=e.filter(q=>q.status===Va.ACTIVE).length;return{monthlyRevenue:C,accountsReceivable:A,fixedCosts:j,activeContracts:O}},[t,e,n]),c=N.useMemo(()=>{var D;const x=[],b=new Date;b.setHours(0,0,0,0);let C=i==="all"?s:((D=pS.find(R=>R.id===i))==null?void 0:D.balance)||0;const A=i==="all"?1:.4;for(let R=-15;R<=30;R++){const j=new Date(b);j.setDate(b.getDate()+R);const O=j.toISOString().split("T")[0],q=R>0,$=R===0;let H=0,U=0;if(q){H=t.filter(B=>B.status===Xn.PENDING&&B.dueDate===O).reduce((B,Z)=>B+Z.total,0)*A,U=r.filter(B=>(B.status===Li.OPEN||B.status===Li.PARTIAL)&&B.dueDate===O).reduce((B,Z)=>B+Z.remainingValue,0)*A;const z=l.fixedCosts/30*A;U+=z}else H=t.filter(z=>z.status===Xn.PAID&&z.dueDate===O).reduce((z,B)=>z+B.total,0)*A,U=r.filter(z=>z.status===Li.PAID&&z.dueDate===O).reduce((z,B)=>z+B.totalValue,0)*A;q&&(C+=H-U),x.push({date:O,displayDate:j.toLocaleDateString("pt-BR",{day:"2-digit",month:"2-digit"}),type:q?"Projetado":"Realizado",Entradas:H,Sadas:U*-1,SaldoAcumulado:q?C:null,isToday:$})}return x},[t,r,l.fixedCosts,i,s]),h=N.useMemo(()=>{const x=[],b=Array.from({length:6},(A,D)=>{const R=new Date;return R.setMonth(R.getMonth()-D),{month:R.getMonth(),year:R.getFullYear(),name:R.toLocaleString("default",{month:"short"})}}).reverse(),C=n.filter(A=>A.status==="Ativo").reduce((A,D)=>A+D.salary,0);return b.forEach(A=>{const D=t.filter(O=>new Date(O.issueDate).getMonth()===A.month&&new Date(O.issueDate).getFullYear()===A.year&&O.status===Xn.PAID).reduce((O,q)=>O+q.total,0),j=e.filter(O=>O.status===Va.ACTIVE&&new Date(O.startDate)<=new Date(A.year,A.month,1)).reduce((O,q)=>O+q.monthlyValue,0)+C;x.push({name:A.name,Faturamento:D,Custos:j})}),x},[t,e,n]),p=N.useMemo(()=>{const x=e.filter(C=>C.status===Va.ACTIVE).reduce((C,A)=>(C[A.category]=(C[A.category]||0)+A.monthlyValue,C),{}),b=n.filter(C=>C.status==="Ativo").reduce((C,A)=>C+A.salary,0);return b>0&&(x["Folha de Pagamento"]=b),Object.entries(x).map(([C,A])=>({name:C,value:A}))},[e,n]);return f.jsxs("div",{className:"space-y-6",children:[f.jsxs("div",{className:"bg-white dark:bg-gray-800 p-4 rounded-xl shadow-sm border border-gray-200 dark:border-gray-700 flex flex-col sm:flex-row justify-between items-center",children:[f.jsxs("div",{className:"flex items-center mb-4 sm:mb-0",children:[f.jsx("div",{className:"p-2 bg-blue-100 dark:bg-blue-900 rounded-lg mr-3",children:f.jsx(kC,{className:"w-6 h-6 text-blue-600 dark:text-blue-300"})}),f.jsxs("div",{children:[f.jsx("h3",{className:"text-sm font-medium text-gray-500 dark:text-gray-400",children:"Saldo Atual Consolidado"}),f.jsx("p",{className:"text-2xl font-bold text-gray-900 dark:text-white",children:ht(s)})]})]}),f.jsxs("div",{className:"flex items-center space-x-4",children:[f.jsx("label",{className:"text-sm font-medium text-gray-700 dark:text-gray-300",children:"Filtrar Conta:"}),f.jsx("select",{value:i,onChange:x=>a(x.target.value),className:"bg-gray-50 border border-gray-300 text-gray-900 text-sm rounded-lg focus:ring-primary-500 focus:border-primary-500 block p-2.5 dark:bg-gray-700 dark:border-gray-600 dark:placeholder-gray-400 dark:text-white",children:pS.map(x=>f.jsx("option",{value:x.id,children:x.name},x.id))})]})]}),f.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6",children:[f.jsx(Vs,{title:"Faturamento (Ms Atual)",value:ht(l.monthlyRevenue),icon:f.jsx(ax,{className:"w-8 h-8 text-white"}),color:"bg-green-500"}),f.jsx(Vs,{title:"Custos Fixos (Contratos + RH)",value:ht(l.fixedCosts),icon:f.jsx(ch,{className:"w-8 h-8 text-white"}),color:"bg-red-500"}),f.jsx(Vs,{title:"A Receber (Pendente)",value:ht(l.accountsReceivable),icon:f.jsx(ax,{className:"w-8 h-8 text-white"}),color:"bg-yellow-500"}),f.jsx(Vs,{title:"Contratos Ativos",value:String(l.activeContracts),icon:f.jsx(ch,{className:"w-8 h-8 text-white"}),color:"bg-blue-500"})]}),f.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-xl shadow-lg p-6 h-[450px]",children:[f.jsxs("div",{className:"flex items-center justify-between mb-4",children:[f.jsxs("div",{className:"flex items-center",children:[f.jsx(jC,{className:"w-6 h-6 text-primary-600 mr-2"}),f.jsx("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white",children:"Fluxo de Caixa: Realizado vs. Projetado"})]}),f.jsxs("div",{className:"flex space-x-4 text-xs",children:[f.jsxs("span",{className:"flex items-center",children:[f.jsx("span",{className:"w-3 h-3 bg-green-500 mr-1 rounded-sm opacity-50"})," Realizado"]}),f.jsxs("span",{className:"flex items-center",children:[f.jsx("span",{className:"w-3 h-3 bg-green-500 mr-1 rounded-sm"})," Projetado"]})]})]}),f.jsx(Lp,{width:"100%",height:"90%",children:f.jsxs(y8,{data:c,margin:{top:10,right:30,left:0,bottom:0},children:[f.jsx(yg,{strokeDasharray:"3 3",vertical:!1}),f.jsx(xg,{dataKey:"displayDate"}),f.jsx(mh,{yAxisId:"left",tickFormatter:x=>`R$${x/1e3}k`}),f.jsx(mh,{yAxisId:"right",orientation:"right",tickFormatter:x=>`R$${x/1e3}k`}),f.jsx(Vp,{formatter:(x,b)=>[ht(Math.abs(x)),b],labelFormatter:x=>`Data: ${x}`}),f.jsx(fh,{}),f.jsx(G7,{x:(g=c.find(x=>x.isToday))==null?void 0:g.displayDate,stroke:"red",strokeDasharray:"3 3",label:"HOJE",yAxisId:"left"}),f.jsx(Ku,{yAxisId:"left",dataKey:"Entradas",fill:"#22c55e",stackId:"a",barSize:20,fillOpacity:.8}),f.jsx(Ku,{yAxisId:"left",dataKey:"Sadas",fill:"#ef4444",stackId:"a",barSize:20,fillOpacity:.8}),f.jsx(Sb,{yAxisId:"right",type:"monotone",dataKey:"SaldoAcumulado",stroke:"#3b82f6",strokeWidth:3,dot:!1,name:"Saldo Projetado"})]})})]}),f.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[f.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-xl shadow-lg p-6 h-96",children:[f.jsx("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white mb-4",children:"Histrico: Faturamento vs. Custos"}),f.jsx(Lp,{width:"100%",height:"100%",children:f.jsxs(g8,{data:h,margin:{top:5,right:20,left:-10,bottom:20},children:[f.jsx(yg,{strokeDasharray:"3 3",vertical:!1}),f.jsx(xg,{dataKey:"name"}),f.jsx(mh,{tickFormatter:x=>`R$${x/1e3}k`}),f.jsx(Vp,{formatter:x=>ht(x)}),f.jsx(fh,{}),f.jsx(Ku,{dataKey:"Faturamento",fill:"#16a34a"}),f.jsx(Ku,{dataKey:"Custos",fill:"#dc2626"})]})})]}),f.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-xl shadow-lg p-6 h-96",children:[f.jsx("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white mb-4",children:"Despesas por Categoria"}),f.jsx(Lp,{width:"100%",height:"100%",children:f.jsxs(uSe,{children:[f.jsx(k7,{data:p,cx:"50%",cy:"50%",labelLine:!1,outerRadius:80,fill:"#8884d8",dataKey:"value",nameKey:"name",children:p.map((x,b)=>f.jsx(cy,{fill:J4[b%J4.length]},`cell-${b}`))}),f.jsx(Vp,{formatter:x=>ht(x)}),f.jsx(fh,{})]})})]})]})]})},y1e=(t,e)=>{const n=window.open("","_blank");if(!n)return;const r=c=>{if(!c)return"";const h=new Date(c),p=h.getTimezoneOffset()*6e4;return new Date(h.getTime()+p).toLocaleDateString("pt-BR")},i=e.address||{street:"",number:"",neighborhood:"",city:"",state:"",zipCode:""},a=e.bankInfo||{bankName:"",agency:"",accountNumber:"",pixKey:""},s=e.logoUrl?`<img src="${e.logoUrl}" style="max-width: 180px; max-height: 80px; margin-bottom: 10px; object-fit: contain;" alt="Logo" />`:`<h2 style="font-size: 16px; font-weight: bold; margin-bottom: 2px;">${e.companyName.toUpperCase()}</h2>`,l=`
    <!DOCTYPE html>
    <html>
    <head>
      <title>Nota Fatura - ${t.invoiceNumber}</title>
      <style>
        @page { size: A4; margin: 10mm; }
        body { font-family: Arial, sans-serif; margin: 0; padding: 0; -webkit-print-color-adjust: exact; color: #000; }
        .container { width: 100%; max-width: 800px; margin: 0 auto; border: 2px solid #000; box-sizing: border-box; }
        .row { display: flex; border-bottom: 1px solid #000; width: 100%; }
        .col { padding: 5px; box-sizing: border-box; }
        .border-right { border-right: 1px solid #000; }
        .header-left { flex: 6; padding: 10px; }
        .header-right { flex: 4; padding: 10px; text-align: center; display: flex; flex-direction: column; justify-content: space-between; }
        h1, h2, h3, p { margin: 0; }
        .label { font-weight: bold; font-size: 10px; margin-right: 4px; }
        .value { font-size: 11px; }
        .table-header { font-weight: bold; font-size: 10px; border-bottom: 1px solid #000; background-color: #f0f0f0; }
        .table-row { font-size: 11px; }
        .table-cell { padding: 4px; border-right: 1px solid #000; }
        .last-cell { border-right: none; }
        .footer-stub { padding: 10px; font-size: 11px; width: 100%; box-sizing: border-box; }
        .signature-line { border-top: 1px solid #000; margin-top: 30px; padding-top: 2px; font-size: 10px; text-align: center; }
        
        .info-row { display: flex; align-items: center; margin-bottom: 2px; font-size: 11px; }
        .info-col { display: flex; align-items: center; margin-right: 10px; }
        
        table { width: 100%; border-collapse: collapse; }
      </style>
    </head>
    <body>
      <div class="container">
        <!-- Header -->
        <div class="row">
          <div class="header-left border-right">
            ${s}
            <h3 style="font-size: 14px; margin-bottom: 8px; font-weight: normal;">${e.companyName.toUpperCase()} SERVIOS E CONSULTORIA</h3>
            
            <div class="info-row">
                <span class="label">CNPJ:</span> <span class="value">${e.cnpj||"00.000.000/0000-00"}</span>
                <span class="label" style="margin-left: 10px;">INSC. EST.:</span> <span class="value">${e.stateRegistration||"ISENTO"}</span>
            </div>
            <div class="info-row">
                <span class="label">INSCRIO MUNICIPAL:</span> <span class="value">${e.municipalRegistration||"-"}</span>
            </div>
            
            <div style="margin-top: 8px;">
                <p class="value" style="font-weight: bold;">${i.street}, ${i.number} ${i.neighborhood?"- "+i.neighborhood:""}</p>
                <p class="value" style="font-weight: bold;">CEP: ${i.zipCode} - ${i.city.toUpperCase()} - ${i.state.toUpperCase()}</p>
            </div>
          </div>
          <div class="header-right">
            <h3 style="font-size: 14px; font-weight: bold;">NOTA FATURA DE LOCAO</h3>
            <h2 style="font-size: 24px; margin: 5px 0;">N ${String(t.invoiceNumber).padStart(6,"0")}</h2>
            <div style="text-align: left; font-size: 11px; width: 100%;">
                <div style="display: flex; justify-content: space-between; margin-bottom: 4px;">
                    <span><strong>DATA DE EMISSO:</strong></span>
                    <span>${r(t.issueDate)}</span>
                </div>
                <div style="display: flex; justify-content: space-between;">
                    <span><strong>DATA LIMITE:</strong></span>
                    <span>${r(t.dueDate)}</span>
                </div>
            </div>
          </div>
        </div>

        <!-- Client -->
        <div class="row" style="display: block; padding: 5px;">
            <div class="info-row">
                <span class="label" style="width: 60px;">CLIENTE:</span>
                <span class="value" style="border-bottom: 1px solid #ccc; flex: 1;">${t.clientName}</span>
            </div>
            <div class="info-row">
                <span class="label" style="width: 60px;">ENDEREO:</span>
                <span class="value" style="border-bottom: 1px solid #ccc; flex: 1;"> - </span>
            </div>
            <div style="display: flex; justify-content: space-between; font-size: 11px; margin-bottom: 2px;">
                <div style="display: flex; align-items: center; flex: 2;">
                    <span class="label" style="width: 60px;">MUNICPIO:</span>
                    <span class="value" style="border-bottom: 1px solid #ccc; flex: 1;"> - </span>
                </div>
                <div style="display: flex; align-items: center; flex: 1; margin-left: 10px;">
                    <span class="label">CEP:</span>
                    <span class="value" style="border-bottom: 1px solid #ccc; flex: 1;"> - </span>
                </div>
                 <div style="display: flex; align-items: center; margin-left: 10px;">
                    <span class="label">EST:</span>
                    <span class="value" style="border-bottom: 1px solid #ccc; width: 30px;"> - </span>
                </div>
            </div>
            <div style="display: flex; justify-content: space-between; font-size: 11px;">
                 <div style="display: flex; align-items: center; flex: 1;">
                    <span class="label" style="width: 60px;">CNPJ/CPF:</span>
                    <span class="value" style="border-bottom: 1px solid #ccc; flex: 1;"> - </span>
                </div>
            </div>
        </div>

        <!-- Contract & Payment -->
        <div class="row">
            <div class="col border-right" style="flex: 1;">
                <span class="label">NMERO DO CONTRATO:</span>
            </div>
            <div class="col" style="flex: 1;">
                <span class="label">FORMA DE PAGAMENTO:</span>
            </div>
        </div>

        <!-- Observations -->
        <div class="row" style="height: 100px; display: block; position: relative;">
             <span class="label" style="position: absolute; top: 5px; left: 5px;">OBS</span>
             <div style="display: flex; justify-content: space-between; padding: 15px 40px 5px 40px; font-size: 12px;">
                <div>
                    <p style="margin-bottom: 15px;">REF. ${new Date(t.issueDate).toLocaleString("pt-BR",{month:"long"})}</p>
                    ${a.pixKey?`<p>Pagamento via PIX: ${a.pixKey}</p>`:""}
                </div>
                <div>
                    <p>${a.bankName?a.bankName:"Banco: -"}</p>
                    <p>Agncia: ${a.agency||"-"}</p>
                    <p style="margin-top: 15px;">C. C: ${a.accountNumber||"-"}</p>
                </div>
             </div>
        </div>

        <!-- Items -->
        <div class="row" style="display: block; border-bottom: none;">
            <table style="width: 100%; border-collapse: collapse;">
                <thead>
                    <tr class="table-header">
                        <th class="table-cell" style="width: 50px; text-align: center;">CDIGO</th>
                        <th class="table-cell" style="text-align: left;">DESCRIO</th>
                        <th class="table-cell" style="width: 60px; text-align: center;">QUANT.</th>
                        <th class="table-cell" style="width: 100px; text-align: right;">VALOR UNIT.</th>
                        <th class="table-cell last-cell" style="width: 100px; text-align: right;">VALOR TOTAL</th>
                    </tr>
                </thead>
                <tbody>
                    ${t.items.map((c,h)=>`
                        <tr class="table-row" style="border-bottom: 1px solid #ccc;">
                            <td class="table-cell" style="text-align: center;">${h+1}</td>
                            <td class="table-cell">${c.description}</td>
                            <td class="table-cell" style="text-align: center;">${c.quantity}</td>
                            <td class="table-cell" style="text-align: right;">${ht(c.unitPrice)}</td>
                            <td class="table-cell last-cell" style="text-align: right;">${ht(c.total)}</td>
                        </tr>
                    `).join("")}
                    <!-- Minimum Height Filler -->
                    <tr style="height: 120px;">
                        <td class="table-cell"></td>
                        <td class="table-cell"></td>
                        <td class="table-cell"></td>
                        <td class="table-cell"></td>
                        <td class="table-cell last-cell"></td>
                    </tr>
                </tbody>
                <tfoot>
                    <tr style="border-top: 2px solid #000; font-weight: bold; font-size: 14px;">
                        <td colspan="4" class="table-cell" style="text-align: right; padding: 8px;">TOTAL</td>
                        <td class="table-cell last-cell" style="text-align: right; padding: 8px;">${ht(t.total)}</td>
                    </tr>
                </tfoot>
            </table>
        </div>

        <!-- Footer -->
        <div class="row" style="border-top: 2px solid #000; border-bottom: none; display: block;">
            <div class="footer-stub">
                <p style="margin-bottom: 25px;">Recebi(emos) de ${e.companyName.toUpperCase()} os servios constantes desta Nota Fatura de Locao</p>
                <div style="display: flex; gap: 20px; align-items: flex-end;">
                    <div style="flex: 1;">
                        <div class="signature-line">Data de Recebimento</div>
                    </div>
                    <div style="flex: 2;">
                         <div class="signature-line">Identificao e Assinatura do Recebedor</div>
                    </div>
                </div>
            </div>
        </div>

      </div>
      <script>
        window.onload = function() { setTimeout(function(){ window.print(); }, 500); }
      <\/script>
    </body>
    </html>
  `;n.document.write(l),n.document.close()},v1e=t=>`px-2 py-1 text-xs font-medium rounded-full inline-block ${{[Xn.PAID]:"bg-green-100 text-green-800 dark:bg-green-900 dark:text-green-300",[Xn.PENDING]:"bg-yellow-100 text-yellow-800 dark:bg-yellow-900 dark:text-yellow-300",[Xn.OVERDUE]:"bg-red-100 text-red-800 dark:bg-red-900 dark:text-red-300",[Xn.CANCELED]:"bg-gray-100 text-gray-800 dark:bg-gray-700 dark:text-gray-300"}[t]}`,x1e=({invoices:t})=>{const{branding:e}=Kd();return f.jsx("div",{className:"bg-white dark:bg-gray-800 rounded-xl shadow-lg p-6",children:f.jsxs("div",{className:"overflow-x-auto",children:[f.jsxs("table",{className:"w-full text-sm text-left text-gray-500 dark:text-gray-400",children:[f.jsx("thead",{className:"text-xs text-gray-700 uppercase bg-gray-50 dark:bg-gray-700 dark:text-gray-400",children:f.jsxs("tr",{children:[f.jsx("th",{scope:"col",className:"px-6 py-3",children:"N da Nota"}),f.jsx("th",{scope:"col",className:"px-6 py-3",children:"Cliente"}),f.jsx("th",{scope:"col",className:"px-6 py-3",children:"Data de Emisso"}),f.jsx("th",{scope:"col",className:"px-6 py-3",children:"Data de Vencimento"}),f.jsx("th",{scope:"col",className:"px-6 py-3 text-right",children:"Total"}),f.jsx("th",{scope:"col",className:"px-6 py-3 text-center",children:"Status"}),f.jsx("th",{scope:"col",className:"px-6 py-3 text-center",children:"Aes"})]})}),f.jsx("tbody",{children:t.map(n=>f.jsxs("tr",{className:"border-b dark:border-gray-700 hover:bg-gray-50 dark:hover:bg-gray-600",children:[f.jsxs("td",{className:"px-6 py-4 font-mono",children:["#",String(n.invoiceNumber).padStart(6,"0")]}),f.jsx("th",{scope:"row",className:"px-6 py-4 font-medium text-gray-900 dark:text-white",children:n.clientName}),f.jsx("td",{className:"px-6 py-4",children:Bn(n.issueDate)}),f.jsx("td",{className:"px-6 py-4",children:Bn(n.dueDate)}),f.jsx("td",{className:"px-6 py-4 text-right font-semibold",children:ht(n.total)}),f.jsx("td",{className:"px-6 py-4 text-center",children:f.jsx("span",{className:v1e(n.status),children:n.status})}),f.jsx("td",{className:"px-6 py-4 text-center flex justify-center space-x-2",children:f.jsxs("button",{onClick:()=>y1e(n,e),className:"font-medium text-blue-600 hover:text-blue-800 flex items-center",title:"Imprimir Nota Fatura",children:[f.jsx(ch,{className:"w-4 h-4 mr-1"}),"Imprimir/PDF"]})})]},n.id))})]}),t.length===0&&f.jsx("p",{className:"text-center py-10 text-gray-500",children:"Nenhuma nota fiscal encontrada."})]})})},_1e=t=>`px-2 py-1 text-xs font-medium rounded-full inline-block ${{[Va.ACTIVE]:"bg-green-100 text-green-800 dark:bg-green-900 dark:text-green-300",[Va.EXPIRED]:"bg-gray-100 text-gray-800 dark:bg-gray-700 dark:text-gray-300",[Va.CANCELED]:"bg-red-100 text-red-800 dark:bg-red-900 dark:text-red-300"}[t]}`,b1e=({contracts:t,onEdit:e,onDelete:n})=>{const{suppliers:r}=Zt(),i=a=>{var s;return((s=r.find(l=>l.id===a))==null?void 0:s.name)||"N/A"};return f.jsx("div",{className:"bg-white dark:bg-gray-800 rounded-xl shadow-lg p-6",children:f.jsxs("div",{className:"overflow-x-auto",children:[f.jsxs("table",{className:"w-full text-sm text-left text-gray-500 dark:text-gray-400",children:[f.jsx("thead",{className:"text-xs text-gray-700 uppercase bg-gray-50 dark:bg-gray-700 dark:text-gray-400",children:f.jsxs("tr",{children:[f.jsx("th",{scope:"col",className:"px-6 py-3",children:"Nome do Contrato"}),f.jsx("th",{scope:"col",className:"px-6 py-3",children:"Fornecedor"}),f.jsx("th",{scope:"col",className:"px-6 py-3",children:"Categoria"}),f.jsx("th",{scope:"col",className:"px-6 py-3 text-right",children:"Valor Mensal"}),f.jsx("th",{scope:"col",className:"px-6 py-3",children:"Vigncia"}),f.jsx("th",{scope:"col",className:"px-6 py-3 text-center",children:"Status"}),f.jsx("th",{scope:"col",className:"px-6 py-3 text-center",children:"Aes"})]})}),f.jsx("tbody",{children:t.map(a=>f.jsxs("tr",{className:"border-b dark:border-gray-700 hover:bg-gray-50 dark:hover:bg-gray-600",children:[f.jsx("th",{scope:"row",className:"px-6 py-4 font-medium text-gray-900 dark:text-white",children:a.name}),f.jsx("td",{className:"px-6 py-4",children:i(a.supplierId)}),f.jsx("td",{className:"px-6 py-4",children:a.category}),f.jsx("td",{className:"px-6 py-4 text-right font-semibold",children:ht(a.monthlyValue)}),f.jsxs("td",{className:"px-6 py-4",children:[Bn(a.startDate)," - ",Bn(a.endDate)]}),f.jsx("td",{className:"px-6 py-4 text-center",children:f.jsx("span",{className:_1e(a.status),children:a.status})}),f.jsxs("td",{className:"px-6 py-4 text-center space-x-2",children:[f.jsx("button",{onClick:()=>e(a),className:"font-medium text-yellow-600 hover:underline",children:"Editar"}),f.jsx("button",{onClick:()=>n(a),className:"font-medium text-red-600 hover:underline",children:"Excluir"})]})]},a.id))})]}),t.length===0&&f.jsx("p",{className:"text-center py-10 text-gray-500",children:"Nenhum contrato encontrado."})]})})},w1e=({isOpen:t,onClose:e,expense:n,onPay:r})=>{const[i,a]=N.useState(n.remainingValue),[s,l]=N.useState(n.paymentMethod||""),[c,h]=N.useState(new Date().toISOString().split("T")[0]),[p,g]=N.useState(!1),[x,b]=N.useState(null);N.useEffect(()=>{a(n.remainingValue),l(n.paymentMethod||"")},[n]);const C=async A=>{if(A.preventDefault(),!s){b("Regra 2.1.1: Obrigatrio selecionar uma forma de pagamento para baixar o ttulo.");return}if(i<=0||i>n.remainingValue){b("Valor invlido.");return}g(!0);try{await r(n.id,i,s,c),e()}catch{b("Erro ao processar pagamento.")}finally{g(!1)}};return t?f.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-60 z-50 flex justify-center items-center p-4",children:f.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-xl p-6 w-full max-w-md",children:[f.jsx("h2",{className:"text-xl font-bold mb-4 dark:text-white",children:"Baixar Ttulo"}),f.jsxs("p",{className:"text-sm text-gray-500 dark:text-gray-400 mb-4",children:[n.description," - Venc: ",new Date(n.dueDate).toLocaleDateString("pt-BR")]}),f.jsxs("form",{onSubmit:C,className:"space-y-4",children:[x&&f.jsx("div",{className:"bg-red-100 p-3 rounded text-red-700 text-sm",children:x}),f.jsxs("div",{children:[f.jsx("label",{className:"dark:text-gray-300",children:"Valor a Pagar (R$)"}),f.jsx("input",{type:"number",value:i,onChange:A=>a(Number(A.target.value)),max:n.remainingValue,step:"0.01",className:"input-style font-bold"}),f.jsxs("p",{className:"text-xs text-gray-500 mt-1",children:["Restante atual: ",ht(n.remainingValue)]})]}),f.jsxs("div",{children:[f.jsx("label",{className:"dark:text-gray-300",children:"Forma de Pagamento"}),f.jsxs("select",{value:s,onChange:A=>l(A.target.value),required:!0,className:"input-style",children:[f.jsx("option",{value:"",children:"Selecione..."}),f.jsx("option",{value:"Boleto",children:"Boleto Bancrio"}),f.jsx("option",{value:"PIX",children:"PIX"}),f.jsx("option",{value:"Transferncia",children:"Transferncia"}),f.jsx("option",{value:"Carto de Crdito",children:"Carto de Crdito"}),f.jsx("option",{value:"Dinheiro",children:"Dinheiro"})]})]}),f.jsxs("div",{children:[f.jsx("label",{className:"dark:text-gray-300",children:"Data do Pagamento"}),f.jsx("input",{type:"date",value:c,onChange:A=>h(A.target.value),required:!0,className:"input-style"})]}),f.jsxs("div",{className:"flex justify-end gap-4 pt-4 border-t dark:border-gray-700",children:[f.jsx("button",{type:"button",onClick:e,className:"btn-secondary",children:"Cancelar"}),f.jsx("button",{type:"submit",disabled:p,className:"btn-primary bg-green-600 hover:bg-green-700",children:p?"Processando...":"Confirmar Baixa"})]})]}),f.jsx("style",{children:".input-style{width:100%;padding:0.5rem;border-radius:0.5rem;border:1px solid #ccc;}.dark .input-style{background-color:#374151;border-color:#4B5563;color:white;}.btn-primary{color:white;padding:0.5rem 1rem;border-radius:0.5rem;}.btn-secondary{background-color:#e5e7eb;color:#333;padding:0.5rem 1rem;border-radius:0.5rem;}.dark .btn-secondary{background-color:#4b5563;color:#e5e7eb;}"})]})}):null},E1e=({expenses:t})=>{const{deleteExpense:e,settleExpense:n,suppliers:r}=Zt(),[i,a]=N.useState(null),[s,l]=N.useState(!1),c=x=>{var b;return((b=r.find(C=>C.id===x))==null?void 0:b.name)||"Fornecedor Diverso"},h=(x,b)=>{if(new Date(b)<new Date&&x!==Li.PAID)return f.jsxs("span",{className:"px-2 py-1 text-xs font-medium rounded-full inline-flex items-center bg-red-100 text-red-800 dark:bg-red-900 dark:text-red-300",children:[f.jsx(Ro,{className:"w-3 h-3 mr-1"})," Vencido"]});const A={[Li.PAID]:"bg-green-100 text-green-800 dark:bg-green-900 dark:text-green-300",[Li.OPEN]:"bg-yellow-100 text-yellow-800 dark:bg-yellow-900 dark:text-yellow-300",[Li.PARTIAL]:"bg-blue-100 text-blue-800 dark:bg-blue-900 dark:text-blue-300",[Li.OVERDUE]:"bg-red-100 text-red-800 dark:bg-red-900 dark:text-red-300"};return f.jsx("span",{className:`px-2 py-1 text-xs font-medium rounded-full inline-block ${A[x]}`,children:x})},p=x=>{a(x),l(!0)},g=async x=>{if(confirm("Tem certeza que deseja excluir este ttulo?"))try{await e(x)}catch(b){alert(b.message)}};return f.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-xl shadow-lg p-6",children:[f.jsx("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white mb-4",children:"Contas a Pagar"}),f.jsxs("div",{className:"overflow-x-auto",children:[f.jsxs("table",{className:"w-full text-sm text-left text-gray-500 dark:text-gray-400",children:[f.jsx("thead",{className:"text-xs text-gray-700 uppercase bg-gray-50 dark:bg-gray-700 dark:text-gray-400",children:f.jsxs("tr",{children:[f.jsx("th",{scope:"col",className:"px-6 py-3",children:"Vencimento"}),f.jsx("th",{scope:"col",className:"px-6 py-3",children:"Descrio"}),f.jsx("th",{scope:"col",className:"px-6 py-3",children:"Fornecedor"}),f.jsx("th",{scope:"col",className:"px-6 py-3",children:"Categoria"}),f.jsx("th",{scope:"col",className:"px-6 py-3 text-right",children:"Valor Total"}),f.jsx("th",{scope:"col",className:"px-6 py-3 text-right",children:"A Pagar"}),f.jsx("th",{scope:"col",className:"px-6 py-3 text-center",children:"Status"}),f.jsx("th",{scope:"col",className:"px-6 py-3 text-center",children:"Aes"})]})}),f.jsx("tbody",{children:t.map(x=>f.jsxs("tr",{className:"border-b dark:border-gray-700 hover:bg-gray-50 dark:hover:bg-gray-600",children:[f.jsx("td",{className:"px-6 py-4 font-mono",children:Bn(x.dueDate)}),f.jsxs("th",{scope:"row",className:"px-6 py-4 font-medium text-gray-900 dark:text-white",children:[x.description,x.totalInstallments&&x.totalInstallments>1&&f.jsxs("span",{className:"ml-2 text-xs text-gray-500",children:["(",x.installmentNumber,"/",x.totalInstallments,")"]})]}),f.jsx("td",{className:"px-6 py-4",children:c(x.supplierId)}),f.jsx("td",{className:"px-6 py-4",children:x.category}),f.jsx("td",{className:"px-6 py-4 text-right",children:ht(x.totalValue)}),f.jsx("td",{className:"px-6 py-4 text-right font-bold text-red-600 dark:text-red-400",children:ht(x.remainingValue)}),f.jsx("td",{className:"px-6 py-4 text-center",children:h(x.status,x.dueDate)}),f.jsxs("td",{className:"px-6 py-4 text-center space-x-2",children:[x.status!==Li.PAID&&f.jsx("button",{onClick:()=>p(x),className:"font-medium text-green-600 hover:underline",children:"Baixar"}),f.jsx("button",{onClick:()=>g(x.id),className:`font-medium text-red-600 hover:underline ${x.isReconciled?"opacity-50 cursor-not-allowed":""}`,title:x.isReconciled?"Ttulo conciliado no pode ser excludo":"Excluir ttulo",children:"Excluir"})]})]},x.id))})]}),t.length===0&&f.jsx("p",{className:"text-center py-10 text-gray-500",children:"Nenhuma conta a pagar cadastrada."})]}),i&&f.jsx(w1e,{isOpen:s,onClose:()=>l(!1),expense:i,onPay:n})]})},T1e=()=>{const t=new Date;return[{id:"tx1",date:t.toISOString().split("T")[0],description:"PGTO FORNECEDOR DIV",amount:-1250,status:yi.PENDING},{id:"tx2",date:t.toISOString().split("T")[0],description:"RECEBIMENTO CLIENTE A",amount:1500,status:yi.PENDING},{id:"tx3",date:new Date(t.setDate(t.getDate()-1)).toISOString().split("T")[0],description:"TARIFAS BANCARIAS",amount:-45.9,status:yi.PENDING},{id:"tx4",date:new Date(t.setDate(t.getDate()-2)).toISOString().split("T")[0],description:"TRANSF DOC EXTRA",amount:-500,status:yi.PENDING}]},S1e=()=>{const{invoices:t,expenses:e,updateInvoice:n,updateExpense:r}=Zt(),[i,a]=N.useState([]),[s,l]=N.useState(!1),c=()=>{l(!0),setTimeout(()=>{a(T1e()),l(!1)},800)},h=()=>{const x=i.map(b=>{if(b.status===yi.MATCHED)return b;let C=yi.REVIEW,A,D;if(b.amount>0){const R=t.find(j=>{const O=Math.abs(j.total-b.amount)<.05,q=j.dueDate===b.date||j.issueDate===b.date;return O&&(q||j.clientName.toUpperCase().includes("CLIENTE"))});R&&(C=yi.MATCHED,A=R.id,D="Invoice")}else{const R=Math.abs(b.amount),j=e.find(O=>{const q=Math.abs(O.totalValue-R)<.05||Math.abs(O.remainingValue-R)<.05,$=O.dueDate===b.date,H=b.description.includes(O.description.toUpperCase())||O.supplierId&&b.description.includes("FORNECEDOR");return q&&($||H)});j&&(C=yi.MATCHED,A=j.id,D="Expense")}return{...b,status:C,matchId:A,matchType:D}});a(x)},p=async x=>{if(!(x.status!==yi.MATCHED||!x.matchId||!x.matchType))try{if(x.matchType==="Invoice")await n(x.matchId,{status:Xn.PAID});else if(x.matchType==="Expense"){const b=e.find(C=>C.id===x.matchId);b&&await r(b.tenantId,{...b,status:Li.PAID,amountPaid:b.totalValue,remainingValue:0,isReconciled:!0})}a(b=>b.filter(C=>C.id!==x.id))}catch(b){console.error("Error finalizing reconciliation",b),alert("Erro ao conciliar item.")}},g=x=>{switch(x){case yi.MATCHED:return f.jsx(R_,{className:"w-5 h-5 text-green-500"});case yi.REVIEW:return f.jsx(Ro,{className:"w-5 h-5 text-orange-500"});default:return f.jsx(k_,{className:"w-5 h-5 text-gray-400"})}};return f.jsxs("div",{className:"space-y-6",children:[f.jsxs("div",{className:"bg-white dark:bg-gray-800 p-6 rounded-xl shadow-lg",children:[f.jsxs("div",{className:"flex justify-between items-center mb-6",children:[f.jsxs("div",{children:[f.jsxs("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white flex items-center",children:[f.jsx(EO,{className:"w-6 h-6 mr-2 text-primary-600"})," Conciliao Bancria"]}),f.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:"Importe extratos (OFX/CSV) e concilie com seus lanamentos."})]}),f.jsxs("div",{className:"space-x-2",children:[f.jsx("button",{onClick:c,disabled:i.length>0,className:"btn-secondary",children:s?"Importando...":"Importar Extrato (Simulao)"}),f.jsx("button",{onClick:h,disabled:i.length===0,className:"btn-primary",children:"Processar Match"})]})]}),i.length>0?f.jsx("div",{className:"overflow-x-auto border rounded-lg dark:border-gray-700",children:f.jsxs("table",{className:"w-full text-sm text-left text-gray-500 dark:text-gray-400",children:[f.jsx("thead",{className:"text-xs text-gray-700 uppercase bg-gray-50 dark:bg-gray-700 dark:text-gray-400",children:f.jsxs("tr",{children:[f.jsx("th",{className:"px-4 py-3 text-center",children:"Status"}),f.jsx("th",{className:"px-4 py-3",children:"Data"}),f.jsx("th",{className:"px-4 py-3",children:"Descrio (Banco)"}),f.jsx("th",{className:"px-4 py-3 text-right",children:"Valor"}),f.jsx("th",{className:"px-4 py-3",children:"Correspondncia Sugerida"}),f.jsx("th",{className:"px-4 py-3 text-center",children:"Ao"})]})}),f.jsx("tbody",{children:i.map(x=>f.jsxs("tr",{className:`border-b dark:border-gray-700 ${x.status===yi.MATCHED?"bg-green-50 dark:bg-green-900/20":x.status===yi.REVIEW?"bg-orange-50 dark:bg-orange-900/20":"bg-white dark:bg-gray-800"}`,children:[f.jsx("td",{className:"px-4 py-3 text-center flex justify-center items-center",title:x.status,children:g(x.status)}),f.jsx("td",{className:"px-4 py-3",children:Bn(x.date)}),f.jsx("td",{className:"px-4 py-3 font-medium text-gray-900 dark:text-white",children:x.description}),f.jsx("td",{className:`px-4 py-3 text-right font-bold ${x.amount>0?"text-green-600":"text-red-600"}`,children:ht(x.amount)}),f.jsx("td",{className:"px-4 py-3",children:x.matchId?f.jsxs("span",{className:"text-xs font-medium bg-white border border-gray-200 px-2 py-1 rounded dark:bg-gray-700 dark:border-gray-600",children:[x.matchType,": ",x.matchId]}):f.jsx("span",{className:"text-xs text-gray-400 italic",children:"Nenhuma correspondncia exata"})}),f.jsxs("td",{className:"px-4 py-3 text-center",children:[x.status===yi.MATCHED&&f.jsx("button",{onClick:()=>p(x),className:"text-primary-600 hover:underline font-medium",children:"Confirmar"}),x.status===yi.REVIEW&&f.jsx("button",{className:"text-orange-600 hover:underline font-medium",children:"Resolver"})]})]},x.id))})]})}):f.jsxs("div",{className:"text-center py-16 bg-gray-50 dark:bg-gray-700/30 rounded-lg border-2 border-dashed border-gray-300 dark:border-gray-600",children:[f.jsx(EO,{className:"mx-auto h-12 w-12 text-gray-400"}),f.jsx("p",{className:"mt-2 text-sm text-gray-500 dark:text-gray-400",children:'Nenhum extrato importado. Clique em "Importar" para comear.'})]})]}),f.jsx("style",{children:".btn-secondary{padding:0.5rem 1rem;border-radius:0.5rem;background-color:#e5e7eb;color:#374151;font-weight:500;}.dark .btn-secondary{background-color:#4b5563;color:#e5e7eb;}.btn-primary{padding:0.5rem 1rem;border-radius:0.5rem;background-color:rgb(var(--color-primary-600));color:white;font-weight:500;}"})]})},A1e=({isOpen:t,onClose:e,onSave:n})=>{const[r,i]=N.useState(""),[a,s]=N.useState(new Date().toISOString().split("T")[0]),[l,c]=N.useState(new Date(new Date().setDate(new Date().getDate()+30)).toISOString().split("T")[0]),[h,p]=N.useState([{id:`item-${Date.now()}`,description:"",quantity:1,unitPrice:0,total:0}]),[g,x]=N.useState(!1),[b,C]=N.useState(!1),[A,D]=N.useState(null);N.useEffect(()=>{h.reduce((H,U)=>H+U.total,0)},[h]);const R=(H,U,z)=>{p(B=>B.map(Z=>{if(Z.id===H){const K={...Z,[U]:z};return(U==="quantity"||U==="unitPrice")&&(K.total=(Number(K.quantity)||0)*(Number(K.unitPrice)||0)),K}return Z}))},j=()=>p([...h,{id:`item-${Date.now()}`,description:"",quantity:1,unitPrice:0,total:0}]),O=H=>p(h.filter(U=>U.id!==H)),q=()=>h.reduce((H,U)=>H+U.total,0),$=async H=>{if(H.preventDefault(),D(null),C(!0),await new Promise(B=>setTimeout(B,1e3)),r.length<3){D("Erro de Validao: Nome do cliente invlido ou cadastro incompleto."),C(!1);return}C(!1),x(!0);const U=q(),z={clientName:r,issueDate:a,dueDate:l,items:h,total:U,status:Xn.PENDING};await n(z),x(!1),e()};return t?f.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-60 z-50 flex justify-center items-center p-4",children:f.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-xl p-6 w-full max-w-3xl max-h-[90vh] flex flex-col",children:[f.jsx("h2",{className:"text-xl font-bold mb-4 dark:text-white",children:"Gerar Nova Nota Fiscal"}),f.jsxs("form",{onSubmit:$,className:"flex-grow overflow-y-auto space-y-4 pr-2",children:[A&&f.jsx("div",{className:"bg-red-100 border-l-4 border-red-500 text-red-700 p-3 text-sm",children:A}),f.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[f.jsxs("div",{children:[f.jsx("label",{className:"dark:text-gray-300",children:"Cliente"}),f.jsx("input",{type:"text",value:r,onChange:H=>i(H.target.value),required:!0,className:"input-style",placeholder:"Nome ou Razo Social"})]}),f.jsxs("div",{children:[f.jsx("label",{className:"dark:text-gray-300",children:"Data de Emisso"}),f.jsx("input",{type:"date",value:a,onChange:H=>s(H.target.value),required:!0,className:"input-style"})]}),f.jsxs("div",{children:[f.jsx("label",{className:"dark:text-gray-300",children:"Data de Vencimento"}),f.jsx("input",{type:"date",value:l,onChange:H=>c(H.target.value),required:!0,className:"input-style"})]})]}),f.jsx("hr",{className:"my-4 dark:border-gray-700"}),f.jsx("h3",{className:"font-semibold dark:text-white",children:"Itens da Nota Fiscal"}),h.map(H=>f.jsxs("div",{className:"grid grid-cols-12 gap-2 items-center",children:[f.jsx("div",{className:"col-span-5",children:f.jsx("input",{type:"text",placeholder:"Descrio",value:H.description,onChange:U=>R(H.id,"description",U.target.value),required:!0,className:"input-style"})}),f.jsx("div",{className:"col-span-2",children:f.jsx("input",{type:"number",placeholder:"Qtd.",value:H.quantity,onChange:U=>R(H.id,"quantity",U.target.value),min:"1",required:!0,className:"input-style"})}),f.jsx("div",{className:"col-span-2",children:f.jsx("input",{type:"number",placeholder:"Preo Unit.",value:H.unitPrice,onChange:U=>R(H.id,"unitPrice",U.target.value),min:"0",step:"0.01",required:!0,className:"input-style"})}),f.jsxs("div",{className:"col-span-2 text-right font-medium dark:text-gray-200",children:["R$ ",H.total.toFixed(2)]}),f.jsx("div",{className:"col-span-1",children:f.jsx("button",{type:"button",onClick:()=>O(H.id),className:"text-red-500 hover:text-red-700",children:""})})]},H.id)),f.jsx("button",{type:"button",onClick:j,className:"btn-secondary btn-sm",children:"Adicionar Item"}),f.jsxs("div",{className:"text-right text-xl font-bold mt-4 dark:text-white",children:["Total: R$ ",q().toFixed(2)]})]}),f.jsxs("div",{className:"flex justify-end gap-4 pt-4 mt-auto border-t dark:border-gray-700",children:[f.jsx("button",{type:"button",onClick:e,disabled:g||b,className:"btn-secondary",children:"Cancelar"}),f.jsx("button",{type:"submit",onClick:$,disabled:g||b,className:"btn-primary",children:b?"Validando dados...":g?"Emitindo...":"Emitir Cobrana"})]}),f.jsx("style",{children:"label{display:block;margin-bottom:0.5rem;font-size:0.875rem;font-weight:500;}.input-style{width:100%;padding:0.5rem;border-radius:0.5rem;border:1px solid #ccc;}.dark .input-style{background-color:#374151;border-color:#4B5563;color:white;}button{padding:0.5rem 1rem;border-radius:0.5rem;}.btn-primary{background-color:rgb(var(--color-primary-600));color:white;}.btn-secondary{background-color:#e5e7eb;color:#333;}.dark .btn-secondary{background-color:#4b5563;color:#e5e7eb;}.btn-sm{padding:0.25rem 0.75rem;}"})]})}):null},C1e=({isOpen:t,onClose:e,onSave:n})=>{const{suppliers:r}=Zt(),i={name:"",supplierId:"",category:"",startDate:"",endDate:"",monthlyValue:0,status:Va.ACTIVE},[a,s]=N.useState(i),[l,c]=N.useState(!1),h=x=>{const{name:b,value:C}=x.target;s(A=>({...A,[b]:b==="monthlyValue"?parseFloat(C):C}))},p=async x=>{x.preventDefault(),c(!0),await n(a),c(!1),e()},g=()=>{s(i),e()};return t?f.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-60 z-50 flex justify-center items-center p-4",children:f.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-xl p-6 w-full max-w-lg",children:[f.jsx("h2",{className:"text-xl font-bold mb-4",children:"Adicionar Novo Contrato"}),f.jsxs("form",{onSubmit:p,className:"space-y-4",children:[f.jsxs("div",{children:[f.jsx("label",{children:"Nome do Contrato"}),f.jsx("input",{type:"text",name:"name",value:a.name,onChange:h,required:!0,className:"input-style"})]}),f.jsxs("div",{children:[f.jsx("label",{children:"Fornecedor"}),f.jsxs("select",{name:"supplierId",value:a.supplierId,onChange:h,required:!0,className:"input-style",children:[f.jsx("option",{value:"",children:"Selecione"}),r.map(x=>f.jsx("option",{value:x.id,children:x.name},x.id))]})]}),f.jsxs("div",{children:[f.jsx("label",{children:"Categoria"}),f.jsx("input",{type:"text",name:"category",value:a.category,onChange:h,required:!0,className:"input-style"})]}),f.jsxs("div",{children:[f.jsx("label",{children:"Valor Mensal (R$)"}),f.jsx("input",{type:"number",name:"monthlyValue",value:a.monthlyValue,onChange:h,required:!0,className:"input-style"})]}),f.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[f.jsxs("div",{children:[f.jsx("label",{children:"Data de Incio"}),f.jsx("input",{type:"date",name:"startDate",value:a.startDate,onChange:h,required:!0,className:"input-style"})]}),f.jsxs("div",{children:[f.jsx("label",{children:"Data de Fim"}),f.jsx("input",{type:"date",name:"endDate",value:a.endDate,onChange:h,required:!0,className:"input-style"})]})]}),f.jsxs("div",{children:[f.jsx("label",{children:"Status"}),f.jsx("select",{name:"status",value:a.status,onChange:h,required:!0,className:"input-style",children:Object.values(Va).map(x=>f.jsx("option",{value:x,children:x},x))})]}),f.jsxs("div",{className:"flex justify-end gap-4 pt-4",children:[f.jsx("button",{type:"button",onClick:g,className:"btn-secondary",children:"Cancelar"}),f.jsx("button",{type:"submit",disabled:l,className:"btn-primary",children:l?"Salvando...":"Salvar Contrato"})]})]}),f.jsx("style",{children:"label{display:block;margin-bottom:0.5rem;}.input-style{width:100%;padding:0.5rem;border-radius:0.5rem;border:1px solid #ccc;}button{padding:0.5rem 1rem;border-radius:0.5rem;}.btn-primary{background-color:rgb(var(--color-primary-600));color:white;}.btn-secondary{background-color:#eee;color:#333;}"})]})}):null},I1e=({isOpen:t,onClose:e,onSave:n})=>{const{suppliers:r}=Zt(),i={tenantId:"",description:"",supplierId:"",category:"",issueDate:new Date().toISOString().split("T")[0],dueDate:new Date().toISOString().split("T")[0],totalValue:0,installments:1,paymentMethod:""},[a,s]=N.useState(i),[l,c]=N.useState(!1),h=x=>{const{name:b,value:C}=x.target;s(A=>({...A,[b]:["totalValue","installments"].includes(b)?parseFloat(C):C}))},p=async x=>{x.preventDefault(),c(!0),await n(a),c(!1),g()},g=()=>{s(i),e()};return t?f.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-60 z-50 flex justify-center items-center p-4",children:f.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-xl p-6 w-full max-w-lg",children:[f.jsx("h2",{className:"text-xl font-bold mb-4 dark:text-white",children:"Nova Conta a Pagar"}),f.jsxs("form",{onSubmit:p,className:"space-y-4",children:[f.jsxs("div",{children:[f.jsx("label",{className:"dark:text-gray-300",children:"Descrio"}),f.jsx("input",{type:"text",name:"description",value:a.description,onChange:h,required:!0,className:"input-style"})]}),f.jsxs("div",{children:[f.jsx("label",{className:"dark:text-gray-300",children:"Fornecedor"}),f.jsxs("select",{name:"supplierId",value:a.supplierId,onChange:h,required:!0,className:"input-style",children:[f.jsx("option",{value:"",children:"Selecione"}),r.map(x=>f.jsx("option",{value:x.id,children:x.name},x.id))]})]}),f.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[f.jsxs("div",{children:[f.jsx("label",{className:"dark:text-gray-300",children:"Categoria"}),f.jsx("input",{type:"text",name:"category",value:a.category,onChange:h,required:!0,className:"input-style",placeholder:"Ex: Manuteno"})]}),f.jsxs("div",{children:[f.jsx("label",{className:"dark:text-gray-300",children:"Valor Total (R$)"}),f.jsx("input",{type:"number",name:"totalValue",value:a.totalValue,onChange:h,required:!0,className:"input-style",step:"0.01"})]})]}),f.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[f.jsxs("div",{children:[f.jsx("label",{className:"dark:text-gray-300",children:"Data de Emisso"}),f.jsx("input",{type:"date",name:"issueDate",value:a.issueDate,onChange:h,required:!0,className:"input-style"})]}),f.jsxs("div",{children:[f.jsx("label",{className:"dark:text-gray-300",children:"1 Vencimento"}),f.jsx("input",{type:"date",name:"dueDate",value:a.dueDate,onChange:h,required:!0,className:"input-style"})]})]}),f.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[f.jsxs("div",{children:[f.jsx("label",{className:"dark:text-gray-300",children:"N de Parcelas"}),f.jsx("input",{type:"number",name:"installments",value:a.installments,onChange:h,min:"1",max:"60",required:!0,className:"input-style"}),f.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Regra 2.1.1: Gera ttulos vinculados."})]}),f.jsxs("div",{children:[f.jsx("label",{className:"dark:text-gray-300",children:"Forma de Pagamento (Opcional)"}),f.jsxs("select",{name:"paymentMethod",value:a.paymentMethod,onChange:h,className:"input-style",children:[f.jsx("option",{value:"",children:"Selecione..."}),f.jsx("option",{value:"Boleto",children:"Boleto Bancrio"}),f.jsx("option",{value:"PIX",children:"PIX"}),f.jsx("option",{value:"Transferncia",children:"Transferncia"}),f.jsx("option",{value:"Carto de Crdito",children:"Carto de Crdito"})]})]})]}),f.jsxs("div",{className:"flex justify-end gap-4 pt-4 border-t dark:border-gray-700",children:[f.jsx("button",{type:"button",onClick:g,className:"btn-secondary",children:"Cancelar"}),f.jsx("button",{type:"submit",disabled:l,className:"btn-primary",children:l?"Salvando...":"Salvar Ttulo(s)"})]})]}),f.jsx("style",{children:"label{display:block;margin-bottom:0.5rem;font-size:0.875rem;font-weight:500;}.input-style{width:100%;padding:0.5rem;border-radius:0.5rem;border:1px solid #ccc;}.dark .input-style{background-color:#374151;border-color:#4B5563;color:white;}.btn-primary{background-color:rgb(var(--color-primary-600));color:white;padding:0.5rem 1rem;border-radius:0.5rem;}.btn-secondary{background-color:#e5e7eb;color:#333;padding:0.5rem 1rem;border-radius:0.5rem;}.dark .btn-secondary{background-color:#4b5563;color:#e5e7eb;}"})]})}):null},N1e=({isOpen:t,onClose:e,onSave:n,contract:r})=>{const{suppliers:i}=Zt(),[a,s]=N.useState(r),[l,c]=N.useState(!1);N.useEffect(()=>{s({...r,startDate:r.startDate.split("T")[0],endDate:r.endDate.split("T")[0]})},[r]);const h=g=>{const{name:x,value:b}=g.target;s(C=>({...C,[x]:x==="monthlyValue"?parseFloat(b):b}))},p=async g=>{g.preventDefault(),c(!0),await n(r.id,a),c(!1),e()};return t?f.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-60 z-50 flex justify-center items-center p-4",children:f.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-xl p-6 w-full max-w-lg",children:[f.jsx("h2",{className:"text-xl font-bold mb-4",children:"Editar Contrato"}),f.jsxs("form",{onSubmit:p,className:"space-y-4",children:[f.jsxs("div",{children:[f.jsx("label",{children:"Nome"}),f.jsx("input",{type:"text",name:"name",value:a.name,onChange:h,required:!0,className:"input-style"})]}),f.jsxs("div",{children:[f.jsx("label",{children:"Fornecedor"}),f.jsxs("select",{name:"supplierId",value:a.supplierId,onChange:h,required:!0,className:"input-style",children:[f.jsx("option",{value:"",children:"Selecione"}),i.map(g=>f.jsx("option",{value:g.id,children:g.name},g.id))]})]}),f.jsxs("div",{children:[f.jsx("label",{children:"Valor Mensal (R$)"}),f.jsx("input",{type:"number",name:"monthlyValue",value:a.monthlyValue,onChange:h,required:!0,className:"input-style"})]}),f.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[f.jsxs("div",{children:[f.jsx("label",{children:"Incio"}),f.jsx("input",{type:"date",name:"startDate",value:a.startDate,onChange:h,required:!0,className:"input-style"})]}),f.jsxs("div",{children:[f.jsx("label",{children:"Fim"}),f.jsx("input",{type:"date",name:"endDate",value:a.endDate,onChange:h,required:!0,className:"input-style"})]})]}),f.jsxs("div",{children:[f.jsx("label",{children:"Status"}),f.jsx("select",{name:"status",value:a.status,onChange:h,required:!0,className:"input-style",children:Object.values(Va).map(g=>f.jsx("option",{value:g,children:g},g))})]}),f.jsxs("div",{className:"flex justify-end gap-4 pt-4",children:[f.jsx("button",{type:"button",onClick:e,className:"btn-secondary",children:"Cancelar"}),f.jsx("button",{type:"submit",disabled:l,className:"btn-primary",children:l?"Salvando...":"Salvar Alteraes"})]})]}),f.jsx("style",{children:"label{display:block;margin-bottom:0.5rem;}.input-style{width:100%;padding:0.5rem;border-radius:0.5rem;border:1px solid #ccc;}button{padding:0.5rem 1rem;border-radius:0.5rem;}.btn-primary{background-color:rgb(var(--color-primary-600));color:white;}.btn-secondary{background-color:#eee;color:#333;}"})]})}):null},P1e=()=>{const{invoices:t,contracts:e,employees:n,expenses:r,addInvoice:i,addContract:a,updateContract:s,deleteContract:l,addExpense:c}=Zt(),[h,p]=N.useState("dashboard"),[g,x]=N.useState(!1),[b,C]=N.useState(!1),[A,D]=N.useState(!1),[R,j]=N.useState(!1),[O,q]=N.useState(!1),[$,H]=N.useState(null),U=K=>{H(K),j(!0)},z=K=>{H(K),q(!0)},B=async()=>{$&&(await l($.id),q(!1),H(null))},Z=({tabName:K,label:J})=>f.jsx("button",{onClick:()=>p(K),className:`${h===K?"border-primary-500 text-primary-600 dark:text-primary-400":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300 dark:text-gray-400"} whitespace-nowrap py-4 px-1 border-b-2 font-medium text-sm`,children:J});return f.jsxs("div",{className:"p-4 md:p-8 space-y-6",children:[f.jsx("div",{className:"border-b border-gray-200 dark:border-gray-700",children:f.jsxs("nav",{className:"-mb-px flex space-x-8 overflow-x-auto","aria-label":"Tabs",children:[f.jsx(Z,{tabName:"dashboard",label:"Viso Geral"}),f.jsx(Z,{tabName:"expenses",label:"Contas a Pagar"}),f.jsx(Z,{tabName:"invoices",label:"Contas a Receber"}),f.jsx(Z,{tabName:"contracts",label:"Contratos"}),f.jsx(Z,{tabName:"reconciliation",label:"Conciliao"})]})}),f.jsxs("div",{className:"flex justify-end space-x-2",children:[h==="invoices"&&f.jsxs("button",{onClick:()=>x(!0),className:"btn btn-primary",children:[f.jsx(Ba,{className:"w-5 h-5 mr-2"}),"Gerar Nota Fiscal"]}),h==="contracts"&&f.jsxs("button",{onClick:()=>C(!0),className:"btn btn-primary",children:[f.jsx(Ba,{className:"w-5 h-5 mr-2"}),"Adicionar Contrato"]}),h==="expenses"&&f.jsxs("button",{onClick:()=>D(!0),className:"btn btn-primary",children:[f.jsx(Ba,{className:"w-5 h-5 mr-2"}),"Nova Conta"]})]}),f.jsxs("div",{children:[h==="dashboard"&&f.jsx(g1e,{invoices:t,contracts:e,employees:n}),h==="expenses"&&f.jsx(E1e,{expenses:r}),h==="invoices"&&f.jsx(x1e,{invoices:t}),h==="contracts"&&f.jsx(b1e,{contracts:e,onEdit:U,onDelete:z}),h==="reconciliation"&&f.jsx(S1e,{})]}),f.jsx(A1e,{isOpen:g,onClose:()=>x(!1),onSave:i}),f.jsx(C1e,{isOpen:b,onClose:()=>C(!1),onSave:a}),f.jsx(I1e,{isOpen:A,onClose:()=>D(!1),onSave:c}),$&&f.jsx(N1e,{isOpen:R,onClose:()=>j(!1),onSave:s,contract:$}),$&&f.jsx(ym,{isOpen:O,onClose:()=>q(!1),onConfirm:B,title:"Excluir Contrato",message:`Tem certeza que deseja excluir o contrato "${$.name}"?`}),f.jsx("style",{children:".btn {display:inline-flex;align-items:center;justify-content:center;padding:0.5rem 1rem;font-weight:500;border-radius:0.5rem;transition:background-color .2s}.btn-primary {background-color:rgb(var(--color-primary-600));color:#fff}.btn-primary:hover {background-color:rgb(var(--color-primary-700))}"})]})},D1e=({documents:t,onEdit:e,onDelete:n,viewMode:r="grid"})=>{const i=s=>{if(!s)return null;const l=new Date,h=new Date(s).getTime()-l.getTime(),p=Math.ceil(h/(1e3*60*60*24));return p<0?f.jsxs("span",{className:"inline-flex items-center px-2 py-0.5 rounded text-xs font-medium bg-red-100 text-red-800 dark:bg-red-900 dark:text-red-300",children:[f.jsx(Ro,{className:"w-3 h-3 mr-1"})," Vencido"]}):p<=30?f.jsxs("span",{className:"inline-flex items-center px-2 py-0.5 rounded text-xs font-medium bg-yellow-100 text-yellow-800 dark:bg-yellow-900 dark:text-yellow-300",children:[f.jsx(Ro,{className:"w-3 h-3 mr-1"})," Vence em ",p," dias"]}):f.jsxs("span",{className:"inline-flex items-center px-2 py-0.5 rounded text-xs font-medium bg-green-100 text-green-800 dark:bg-green-900 dark:text-green-300",children:[f.jsx(R_,{className:"w-3 h-3 mr-1"})," Vlido"]})},a=s=>{s.fileUrl?TSe(s.fileUrl,s.fileName||s.name):alert("Este documento no possui arquivo anexado.")};return t.length===0?f.jsxs("div",{className:"text-center text-gray-500 py-20 bg-gray-50 dark:bg-gray-800/50 rounded-lg border-2 border-dashed border-gray-300 dark:border-gray-700",children:[f.jsx(ch,{className:"w-12 h-12 mx-auto text-gray-400 mb-3"}),f.jsx("p",{children:"Nenhum documento encontrado com os filtros atuais."})]}):r==="list"?f.jsx("div",{className:"overflow-x-auto rounded-lg border border-gray-200 dark:border-gray-700",children:f.jsxs("table",{className:"w-full text-sm text-left text-gray-500 dark:text-gray-400",children:[f.jsx("thead",{className:"text-xs text-gray-700 uppercase bg-gray-50 dark:bg-gray-700 dark:text-gray-400",children:f.jsxs("tr",{children:[f.jsx("th",{scope:"col",className:"px-6 py-3",children:"Documento"}),f.jsx("th",{scope:"col",className:"px-6 py-3",children:"Categoria"}),f.jsx("th",{scope:"col",className:"px-6 py-3",children:"Tags"}),f.jsx("th",{scope:"col",className:"px-6 py-3",children:"Status"}),f.jsx("th",{scope:"col",className:"px-6 py-3",children:"Upload"}),f.jsx("th",{scope:"col",className:"px-6 py-3 text-center",children:"Aes"})]})}),f.jsx("tbody",{children:t.map(s=>f.jsxs("tr",{className:"bg-white border-b dark:bg-gray-800 dark:border-gray-700 hover:bg-gray-50 dark:hover:bg-gray-600",children:[f.jsxs("th",{scope:"row",className:"px-6 py-4 font-medium text-gray-900 dark:text-white flex items-center",children:[f.jsx("div",{className:"p-2 bg-primary-50 dark:bg-primary-900/20 rounded mr-3 text-primary-600",children:f.jsx(ch,{className:"w-5 h-5"})}),f.jsxs("div",{children:[f.jsx("p",{children:s.name}),s.fileName&&f.jsx("p",{className:"text-xs text-gray-400 font-normal",children:s.fileName})]})]}),f.jsx("td",{className:"px-6 py-4",children:s.category}),f.jsx("td",{className:"px-6 py-4",children:f.jsxs("div",{className:"flex flex-wrap gap-1",children:[s.tags.slice(0,2).map(l=>f.jsx("span",{className:"text-xs bg-gray-100 dark:bg-gray-700 px-2 py-0.5 rounded text-gray-600 dark:text-gray-300 border border-gray-200 dark:border-gray-600",children:l},l)),s.tags.length>2&&f.jsxs("span",{className:"text-xs text-gray-500",children:["+",s.tags.length-2]})]})}),f.jsx("td",{className:"px-6 py-4",children:i(s.expiryDate)}),f.jsx("td",{className:"px-6 py-4",children:Bn(s.uploadDate)}),f.jsxs("td",{className:"px-6 py-4 text-center space-x-2",children:[f.jsx("button",{onClick:()=>a(s),className:"text-gray-500 hover:text-primary-600",title:"Baixar Arquivo",children:f.jsx(ix,{className:"w-4 h-4"})}),f.jsx("button",{onClick:()=>n(s),className:"text-gray-500 hover:text-red-600",title:"Excluir",children:""})]})]},s.id))})]})}):f.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-6",children:t.map(s=>f.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-xl shadow-sm hover:shadow-md transition-all p-4 flex flex-col justify-between border border-gray-200 dark:border-gray-700 group",children:[f.jsxs("div",{children:[f.jsxs("div",{className:"flex justify-between items-start mb-3",children:[f.jsx("div",{className:"p-3 bg-primary-50 dark:bg-primary-900/20 rounded-lg text-primary-600",children:f.jsx(ch,{className:"w-8 h-8"})}),f.jsxs("div",{className:"flex space-x-1 opacity-0 group-hover:opacity-100 transition-opacity",children:[f.jsx("button",{onClick:()=>a(s),className:"p-1.5 hover:bg-gray-100 dark:hover:bg-gray-700 rounded text-gray-500",title:"Baixar",children:f.jsx(ix,{className:"w-4 h-4"})}),f.jsx("button",{onClick:()=>n(s),className:"p-1.5 hover:bg-red-50 dark:hover:bg-red-900/20 rounded text-red-500",title:"Excluir",children:""})]})]}),f.jsx("h3",{className:"font-semibold text-gray-900 dark:text-white truncate mb-1",title:s.name,children:s.name}),f.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400 mb-3",children:s.category}),f.jsx("div",{className:"mb-3",children:i(s.expiryDate)}),f.jsx("div",{className:"flex flex-wrap gap-1 mb-3 h-12 overflow-hidden content-start",children:s.tags.map(l=>f.jsx("span",{className:"text-[10px] bg-gray-100 dark:bg-gray-700 px-2 py-0.5 rounded-full text-gray-600 dark:text-gray-300 border border-gray-200 dark:border-gray-600",children:l},l))})]}),f.jsxs("div",{className:"pt-3 border-t dark:border-gray-700 flex justify-between items-center mt-auto",children:[f.jsx("span",{className:"text-xs text-gray-400",children:new Date(s.uploadDate).toLocaleDateString()}),s.fileUrl&&f.jsx("button",{onClick:()=>a(s),className:"text-xs font-medium text-primary-600 hover:underline",children:"Baixar Anexo"})]})]},s.id))})},R1e=({isOpen:t,onClose:e,onSave:n})=>{const[r,i]=N.useState(""),[a,s]=N.useState(""),[l,c]=N.useState(""),[h,p]=N.useState(""),[g,x]=N.useState(null),[b,C]=N.useState(!1),[A,D]=N.useState(null),R=q=>{const $=q.target.files?q.target.files[0]:null;if($){if(!FN($,2)){D("O arquivo deve ter no mximo 2MB."),x(null),q.target.value="";return}D(null),x($),r||i($.name)}},j=async q=>{q.preventDefault(),C(!0),D(null);let $="",H="",U="";if(g)try{$=await UN(g),H=g.type,U=g.name}catch{D("Erro ao processar o arquivo."),C(!1);return}const z={name:r,category:a,tags:l.split(",").map(B=>B.trim()).filter(Boolean),uploadDate:new Date().toISOString(),...h&&{expiryDate:h},...g&&{fileUrl:$,mimeType:H,fileName:U}};try{await n(z),O()}catch{D("Falha ao salvar documento.")}finally{C(!1)}},O=()=>{i(""),s(""),c(""),p(""),x(null),D(null),e()};return t?f.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-60 z-50 flex justify-center items-center p-4",children:f.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-xl p-6 w-full max-w-lg",onClick:q=>q.stopPropagation(),children:[f.jsx("h2",{className:"text-xl font-bold mb-4 dark:text-white",children:"Adicionar Documento Corporativo"}),f.jsxs("form",{onSubmit:j,className:"space-y-4",children:[A&&f.jsx("div",{className:"bg-red-100 text-red-700 p-3 rounded text-sm",children:A}),f.jsxs("div",{children:[f.jsx("label",{className:"label-style",children:"Arquivo do Documento (Max 2MB)"}),f.jsx("input",{type:"file",onChange:R,className:"input-style file-input",required:!0}),f.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Contratos, Certides, Manuais, etc."})]}),f.jsxs("div",{children:[f.jsx("label",{className:"label-style",children:"Nome de Exibio"}),f.jsx("input",{type:"text",value:r,onChange:q=>i(q.target.value),required:!0,className:"input-style",placeholder:"Ex: Contrato Social"})]}),f.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[f.jsxs("div",{children:[f.jsx("label",{className:"label-style",children:"Categoria"}),f.jsxs("select",{value:a,onChange:q=>s(q.target.value),required:!0,className:"input-style",children:[f.jsx("option",{value:"",children:"Selecione..."}),f.jsx("option",{value:"Contratos",children:"Contratos"}),f.jsx("option",{value:"Fiscal",children:"Fiscal/Tributrio"}),f.jsx("option",{value:"RH",children:"Recursos Humanos"}),f.jsx("option",{value:"Tcnico",children:"Manuais Tcnicos"}),f.jsx("option",{value:"Legal",children:"Legal/Jurdico"}),f.jsx("option",{value:"Outros",children:"Outros"})]})]}),f.jsxs("div",{children:[f.jsx("label",{className:"label-style",children:"Validade (Opcional)"}),f.jsx("input",{type:"date",value:h,onChange:q=>p(q.target.value),className:"input-style"})]})]}),f.jsxs("div",{children:[f.jsx("label",{className:"label-style",children:"Tags (separadas por vrgula)"}),f.jsx("input",{type:"text",value:l,onChange:q=>c(q.target.value),className:"input-style",placeholder:"Ex: importante, matriz, 2025"})]}),f.jsxs("div",{className:"flex justify-end gap-4 pt-4 border-t dark:border-gray-700",children:[f.jsx("button",{type:"button",onClick:O,className:"btn-secondary",children:"Cancelar"}),f.jsx("button",{type:"submit",disabled:b,className:"btn-primary",children:b?"Enviando...":"Salvar Documento"})]})]}),f.jsx("style",{children:`
            .label-style{display:block;margin-bottom:0.5rem;font-size:0.875rem;font-weight:500; color: #374151;} .dark .label-style {color: #d1d5db;}
            .input-style{width:100%;padding:0.5rem;border-radius:0.5rem;border:1px solid #D1D5DB;background-color:#F9FAFB; color: #111827;} .dark .input-style {background-color: #374151; border-color: #4b5563; color: white;}
            .file-input::file-selector-button{font-weight:600;background-color:#e0e7ff;color:#4338ca;border:0;padding:0.25rem 0.75rem;border-radius:0.25rem;cursor:pointer;margin-right:0.75rem;font-size:0.875rem;} .dark .file-input::file-selector-button{background-color:#312e81;color:#c7d2fe;}
            .btn-primary{background-color:rgb(var(--color-primary-600));color:white;padding:0.5rem 1rem;border-radius:0.5rem;font-weight:500;}
            .btn-secondary{background-color:#e5e7eb;color:#374151;padding:0.5rem 1rem;border-radius:0.5rem;font-weight:500;} .dark .btn-secondary{background-color:#4b5563;color:#e5e7eb;}
            button:disabled{opacity:0.6;}
        `})]})}):null},k1e=({isOpen:t,onClose:e,onSave:n,document:r})=>{const[i,a]=N.useState(""),[s,l]=N.useState(""),[c,h]=N.useState(""),[p,g]=N.useState(""),[x,b]=N.useState(!1);N.useEffect(()=>{r&&(a(r.name),l(r.category),h(r.tags.join(", ")),g(r.expiryDate?r.expiryDate.split("T")[0]:""))},[r]);const C=async A=>{A.preventDefault(),b(!0);const D={name:i,category:s,tags:c.split(",").map(R=>R.trim()).filter(Boolean),...p&&{expiryDate:p}};await n(r.id,D),b(!1),e()};return t?f.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-60 z-50 flex justify-center items-center p-4",children:f.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-xl p-6 w-full max-w-lg",children:[f.jsx("h2",{className:"text-xl font-bold mb-4",children:"Editar Documento"}),f.jsxs("form",{onSubmit:C,className:"space-y-4",children:[f.jsxs("div",{children:[f.jsx("label",{children:"Nome"}),f.jsx("input",{type:"text",value:i,onChange:A=>a(A.target.value),required:!0,className:"input-style"})]}),f.jsxs("div",{children:[f.jsx("label",{children:"Categoria"}),f.jsx("input",{type:"text",value:s,onChange:A=>l(A.target.value),required:!0,className:"input-style"})]}),f.jsxs("div",{children:[f.jsx("label",{children:"Tags"}),f.jsx("input",{type:"text",value:c,onChange:A=>h(A.target.value),className:"input-style"})]}),f.jsxs("div",{children:[f.jsx("label",{children:"Expirao"}),f.jsx("input",{type:"date",value:p,onChange:A=>g(A.target.value),className:"input-style"})]}),f.jsxs("div",{className:"flex justify-end gap-4 pt-4",children:[f.jsx("button",{type:"button",onClick:e,className:"btn-secondary",children:"Cancelar"}),f.jsx("button",{type:"submit",disabled:x,className:"btn-primary",children:x?"Salvando...":"Salvar Alteraes"})]})]}),f.jsx("style",{children:"label{display:block;margin-bottom:0.5rem;}.input-style{width:100%;padding:0.5rem;border-radius:0.5rem;border:1px solid #ccc;}button{padding:0.5rem 1rem;border-radius:0.5rem;}.btn-primary{background-color:rgb(var(--color-primary-600));color:white;}.btn-secondary{background-color:#eee;color:#333;}"})]})}):null},M1e=()=>{const{companyDocuments:t,addCompanyDocument:e,updateCompanyDocument:n,deleteCompanyDocument:r}=Zt(),[i,a]=N.useState(""),[s,l]=N.useState(""),[c,h]=N.useState("all"),[p,g]=N.useState("grid"),[x,b]=N.useState(!1),[C,A]=N.useState(!1),[D,R]=N.useState(!1),[j,O]=N.useState(null),q=N.useMemo(()=>Array.from(new Set(t.map(B=>B.category))).sort(),[t]),$=N.useMemo(()=>{const B=new Date;return t.filter(Z=>{const K=i===""||Z.name.toLowerCase().includes(i.toLowerCase())||Z.tags.some(Se=>Se.toLowerCase().includes(i.toLowerCase())),J=s===""||Z.category===s;let G=!0;if(c!=="all")if(!Z.expiryDate)G=c==="valid";else{const Oe=new Date(Z.expiryDate).getTime()-B.getTime(),ee=Math.ceil(Oe/(1e3*60*60*24));c==="expired"?G=ee<0:c==="expiring"?G=ee>=0&&ee<=30:c==="valid"&&(G=ee>0)}return K&&J&&G})},[t,i,s,c]),H=B=>{O(B),A(!0)},U=B=>{O(B),R(!0)},z=async()=>{j&&(await r(j.id),R(!1),O(null))};return f.jsxs("div",{className:"p-4 md:p-8 space-y-6",children:[f.jsxs("div",{className:"flex flex-col md:flex-row justify-between items-center gap-4",children:[f.jsxs("div",{children:[f.jsx("h1",{className:"text-3xl font-bold text-gray-800 dark:text-white",children:"Documentos Corporativos"}),f.jsx("p",{className:"text-gray-500 dark:text-gray-400",children:"Centralize contratos, manuais e certides da empresa."})]}),f.jsxs("button",{onClick:()=>b(!0),className:"btn btn-primary flex items-center shrink-0",children:[f.jsx(Ba,{className:"w-5 h-5 mr-2"}),"Adicionar Documento"]})]}),f.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-xl shadow-lg p-6",children:[f.jsxs("div",{className:"flex flex-col lg:flex-row justify-between items-center gap-4 mb-6",children:[f.jsxs("div",{className:"flex-1 w-full grid grid-cols-1 sm:grid-cols-3 gap-4",children:[f.jsx("input",{type:"text",placeholder:"Buscar por nome ou tag...",value:i,onChange:B=>a(B.target.value),className:"input-style"}),f.jsxs("select",{value:s,onChange:B=>l(B.target.value),className:"input-style",children:[f.jsx("option",{value:"",children:"Todas as Categorias"}),q.map(B=>f.jsx("option",{value:B,children:B},B))]}),f.jsxs("select",{value:c,onChange:B=>h(B.target.value),className:"input-style",children:[f.jsx("option",{value:"all",children:"Todos os Status"}),f.jsx("option",{value:"valid",children:"Vlidos"}),f.jsx("option",{value:"expiring",children:"A Vencer (30 dias)"}),f.jsx("option",{value:"expired",children:"Vencidos"})]})]}),f.jsxs("div",{className:"flex items-center bg-gray-100 dark:bg-gray-700 rounded-lg p-1 border dark:border-gray-600 shrink-0",children:[f.jsx("button",{onClick:()=>g("grid"),className:`p-2 rounded-md transition-colors ${p==="grid"?"bg-white dark:bg-gray-600 shadow text-primary-600 dark:text-white":"text-gray-500 dark:text-gray-400 hover:text-gray-700"}`,title:"Visualizao em Grade",children:f.jsx(Rse,{className:"w-5 h-5"})}),f.jsx("button",{onClick:()=>g("list"),className:`p-2 rounded-md transition-colors ${p==="list"?"bg-white dark:bg-gray-600 shadow text-primary-600 dark:text-white":"text-gray-500 dark:text-gray-400 hover:text-gray-700"}`,title:"Visualizao em Lista",children:f.jsx(sF,{className:"w-5 h-5"})})]})]}),f.jsx(D1e,{documents:$,onEdit:H,onDelete:U,viewMode:p})]}),f.jsx(R1e,{isOpen:x,onClose:()=>b(!1),onSave:e}),j&&f.jsx(k1e,{isOpen:C,onClose:()=>A(!1),onSave:n,document:j}),j&&f.jsx(ym,{isOpen:D,onClose:()=>R(!1),onConfirm:z,title:"Excluir Documento",message:`Tem certeza que deseja excluir "${j.name}"?`}),f.jsx("style",{children:".btn{display:inline-flex;align-items:center;justify-content:center;padding:0.5rem 1rem;border-radius:0.5rem;font-weight:500;transition:background-color 0.2s;}.btn-primary{background-color:rgb(var(--color-primary-600));color:white;}.btn-primary:hover{background-color:rgb(var(--color-primary-700))}.input-style{width:100%;padding:0.625rem;border-radius:0.5rem;border:1px solid #D1D5DB;background-color:#F9FAFB;color:#111827;font-size:0.875rem;}.dark .input-style{background-color:#374151;border-color:#4B5563;color:white;}"})]})},O1e=t=>`px-2 py-1 text-xs font-medium rounded-full inline-block ${{[Jn.PENDING]:"bg-yellow-100 text-yellow-800 dark:bg-yellow-900 dark:text-yellow-300",[Jn.APPROVED]:"bg-blue-100 text-blue-800 dark:bg-blue-900 dark:text-blue-300",[Jn.REJECTED]:"bg-red-100 text-red-800 dark:bg-red-900 dark:text-red-300",[Jn.ORDERED]:"bg-green-100 text-green-800 dark:bg-green-900 dark:text-green-300",[Jn.RFQ_CREATED]:"bg-indigo-100 text-indigo-800 dark:bg-indigo-900 dark:text-indigo-300",[Jn.CANCELED]:"bg-gray-100 text-gray-800 dark:bg-gray-700 dark:text-gray-300"}[t]}`,j1e=({requisitions:t,onView:e})=>f.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-xl shadow-lg p-6",children:[f.jsx("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white mb-4",children:"Requisies de Compra"}),f.jsxs("div",{className:"overflow-x-auto",children:[f.jsxs("table",{className:"w-full text-sm text-left text-gray-500 dark:text-gray-400",children:[f.jsx("thead",{className:"text-xs text-gray-700 uppercase bg-gray-50 dark:bg-gray-700 dark:text-gray-400",children:f.jsxs("tr",{children:[f.jsx("th",{scope:"col",className:"px-6 py-3",children:"Data"}),f.jsx("th",{scope:"col",className:"px-6 py-3",children:"Solicitante"}),f.jsx("th",{scope:"col",className:"px-6 py-3",children:"Itens"}),f.jsx("th",{scope:"col",className:"px-6 py-3 text-center",children:"Status"}),f.jsx("th",{scope:"col",className:"px-6 py-3 text-center",children:"Aes"})]})}),f.jsx("tbody",{children:t.map(n=>f.jsxs("tr",{className:"border-b dark:border-gray-700 hover:bg-gray-50 dark:hover:bg-gray-600",children:[f.jsx("td",{className:"px-6 py-4",children:Bn(n.requestDate)}),f.jsx("td",{className:"px-6 py-4 font-medium text-gray-900 dark:text-white",children:n.requesterName}),f.jsx("td",{className:"px-6 py-4 truncate max-w-sm",title:n.items.map(r=>`${r.quantity}x ${r.description}`).join(", "),children:n.items.map(r=>`${r.quantity}x ${r.description}`).join(", ")}),f.jsx("td",{className:"px-6 py-4 text-center",children:f.jsx("span",{className:O1e(n.status),children:n.status})}),f.jsx("td",{className:"px-6 py-4 text-center",children:f.jsx("button",{onClick:()=>e(n),className:"font-medium text-primary-600 hover:underline",children:"Visualizar"})})]},n.id))})]}),t.length===0&&f.jsx("p",{className:"text-center py-10 text-gray-500 dark:text-gray-400",children:"Nenhuma requisio de compra encontrada."})]})]}),L1e=t=>`px-2 py-1 text-xs font-medium rounded-full inline-block ${{[sh.DRAFT]:"bg-gray-100 text-gray-800",[sh.SENT]:"bg-blue-100 text-blue-800",[sh.CLOSED]:"bg-green-100 text-green-800"}[t]}`,V1e=({rfqs:t,onView:e})=>f.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-xl shadow-lg p-6",children:[f.jsx("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white mb-4",children:"Cotaes (RFQs)"}),f.jsxs("div",{className:"overflow-x-auto",children:[f.jsxs("table",{className:"w-full text-sm text-left text-gray-500 dark:text-gray-400",children:[f.jsx("thead",{className:"text-xs text-gray-700 uppercase bg-gray-50 dark:bg-gray-700 dark:text-gray-400",children:f.jsxs("tr",{children:[f.jsx("th",{scope:"col",className:"px-6 py-3",children:"Data de Criao"}),f.jsx("th",{scope:"col",className:"px-6 py-3",children:"Itens"}),f.jsx("th",{scope:"col",className:"px-6 py-3 text-center",children:"Cotaes Recebidas"}),f.jsx("th",{scope:"col",className:"px-6 py-3 text-center",children:"Status"}),f.jsx("th",{scope:"col",className:"px-6 py-3 text-center",children:"Aes"})]})}),f.jsx("tbody",{children:t.map(n=>f.jsxs("tr",{className:"border-b dark:border-gray-700 hover:bg-gray-50 dark:hover:bg-gray-600",children:[f.jsx("td",{className:"px-6 py-4 font-medium text-gray-900 dark:text-white",children:Bn(n.creationDate)}),f.jsx("td",{className:"px-6 py-4 truncate max-w-sm",title:n.items.map(r=>`${r.quantity}x ${r.description}`).join(", "),children:n.items.map(r=>`${r.quantity}x ${r.description}`).join(", ")}),f.jsxs("td",{className:"px-6 py-4 text-center",children:[n.quotes.length," / ",n.sentToSupplierIds.length]}),f.jsx("td",{className:"px-6 py-4 text-center",children:f.jsx("span",{className:L1e(n.status),children:n.status})}),f.jsx("td",{className:"px-6 py-4 text-center",children:f.jsx("button",{onClick:()=>e(n),className:"font-medium text-primary-600 hover:underline",children:"Analisar Cotaes"})})]},n.id))})]}),t.length===0&&f.jsx("p",{className:"text-center py-10 text-gray-500 dark:text-gray-400",children:"Nenhuma cotao encontrada."})]})]}),U1e=t=>`px-2 py-1 text-xs font-medium rounded-full inline-block ${{[Eo.PENDING]:"bg-gray-100 text-gray-800 dark:bg-gray-700 dark:text-gray-300",[Eo.SENT]:"bg-blue-100 text-blue-800 dark:bg-blue-900 dark:text-blue-300",[Eo.PARTIALLY_RECEIVED]:"bg-yellow-100 text-yellow-800 dark:bg-yellow-900 dark:text-yellow-300",[Eo.RECEIVED]:"bg-green-100 text-green-800 dark:bg-green-900 dark:text-green-300",[Eo.CANCELED]:"bg-red-100 text-red-800 dark:bg-red-900 dark:text-red-300"}[t]}`,F1e=({orders:t,onView:e})=>{const{suppliers:n}=Zt(),r=i=>{var a;return((a=n.find(s=>s.id===i))==null?void 0:a.name)||"Desconhecido"};return f.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-xl shadow-lg p-6",children:[f.jsx("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white mb-4",children:"Ordens de Compra"}),f.jsxs("div",{className:"overflow-x-auto",children:[f.jsxs("table",{className:"w-full text-sm text-left text-gray-500 dark:text-gray-400",children:[f.jsx("thead",{className:"text-xs text-gray-700 uppercase bg-gray-50 dark:bg-gray-700 dark:text-gray-400",children:f.jsxs("tr",{children:[f.jsx("th",{scope:"col",className:"px-6 py-3",children:"Data do Pedido"}),f.jsx("th",{scope:"col",className:"px-6 py-3",children:"Fornecedor"}),f.jsx("th",{scope:"col",className:"px-6 py-3",children:"Itens"}),f.jsx("th",{scope:"col",className:"px-6 py-3 text-right",children:"Valor Total"}),f.jsx("th",{scope:"col",className:"px-6 py-3 text-center",children:"Status"}),f.jsx("th",{scope:"col",className:"px-6 py-3 text-center",children:"Aes"})]})}),f.jsx("tbody",{children:t.map(i=>f.jsxs("tr",{className:"border-b dark:border-gray-700 hover:bg-gray-50 dark:hover:bg-gray-600",children:[f.jsx("td",{className:"px-6 py-4",children:Bn(i.orderDate)}),f.jsx("td",{className:"px-6 py-4 font-medium text-gray-900 dark:text-white",children:r(i.supplierId)}),f.jsx("td",{className:"px-6 py-4 truncate max-w-sm",title:i.items.map(a=>`${a.quantity}x ${a.description}`).join(", "),children:i.items.map(a=>`${a.quantity}x ${a.description}`).join(", ")}),f.jsx("td",{className:"px-6 py-4 text-right",children:ht(i.totalValue)}),f.jsx("td",{className:"px-6 py-4 text-center",children:f.jsx("span",{className:U1e(i.status),children:i.status})}),f.jsx("td",{className:"px-6 py-4 text-center",children:f.jsx("button",{onClick:()=>e(i),className:"font-medium text-primary-600 hover:underline",children:"Ver Detalhes"})})]},i.id))})]}),t.length===0&&f.jsx("p",{className:"text-center py-10 text-gray-500 dark:text-gray-400",children:"Nenhuma ordem de compra encontrada."})]})]})},B1e=({isOpen:t,onClose:e,requisition:n,onUpdateRequisition:r,onCreateRFQ:i,onCreateOrder:a,suppliers:s})=>{const[l,c]=N.useState(!1),[h,p]=N.useState("details"),[g,x]=N.useState([]),[b,C]=N.useState(""),[A,D]=N.useState(0),[R,j]=N.useState(!1),[O,q]=N.useState(null),[$,H]=N.useState(""),U=ee=>{ee===Jn.REJECTED||ee===Jn.CANCELED?(q(ee),j(!0)):B(ee)},z=async()=>{if(!$.trim()){alert("Regra 2.2.1: O motivo  obrigatrio para rejeio ou cancelamento.");return}O&&(c(!0),await r({...n,status:O,cancellationReason:$}),c(!1),e())},B=async ee=>{c(!0),await r({...n,status:ee}),c(!1),e()},Z=async ee=>{if(ee.preventDefault(),g.length===0)return;c(!0);const re={requisitionId:n.id,creationDate:new Date().toISOString(),sentToSupplierIds:g,items:n.items,status:sh.SENT,quotes:[]};await i(re),await r({...n,status:Jn.RFQ_CREATED}),c(!1),e()},K=async ee=>{ee.preventDefault(),c(!0);const re={requisitionId:n.id,supplierId:b,orderDate:new Date().toISOString(),items:n.items.map(le=>({...le,unitPrice:0,totalPrice:0})),totalValue:A,status:Eo.PENDING,receivedItems:[]};await a(re),await r({...n,status:Jn.ORDERED}),c(!1),e()},J=()=>{j(!1),H(""),q(null),e()};if(!t)return null;const G=n.status===Jn.PENDING,Se=n.status===Jn.APPROVED,Oe=()=>R?f.jsxs("div",{className:"space-y-4",children:[f.jsx("h3",{className:"font-semibold text-lg text-red-600 dark:text-red-400",children:O===Jn.REJECTED?"Rejeitar Requisio":"Cancelar Requisio"}),f.jsx("p",{className:"text-sm",children:"Por favor, informe o motivo obrigatrio (Regra 2.2.1):"}),f.jsx("textarea",{className:"w-full p-2 border rounded-md dark:bg-gray-700 dark:border-gray-600 dark:text-white",rows:4,placeholder:"Descreva o motivo...",value:$,onChange:ee=>H(ee.target.value)}),f.jsxs("div",{className:"flex justify-end gap-4 pt-4 border-t dark:border-gray-600",children:[f.jsx("button",{type:"button",onClick:()=>j(!1),className:"btn-secondary",children:"Voltar"}),f.jsx("button",{type:"button",onClick:z,disabled:l,className:"btn-danger",children:"Confirmar"})]})]}):h==="create_rfq"?f.jsxs("form",{onSubmit:Z,className:"space-y-4",children:[f.jsx("h3",{className:"font-semibold text-lg",children:"Gerar Cotao (RFQ)"}),f.jsx("p",{className:"text-sm",children:"Selecione os fornecedores para os quais a cotao ser enviada."}),f.jsx("div",{className:"max-h-48 overflow-y-auto border rounded-md p-2 space-y-2",children:s.map(ee=>f.jsxs("div",{children:[f.jsx("input",{type:"checkbox",id:`supplier-${ee.id}`,value:ee.id,onChange:re=>{re.target.checked?x(le=>[...le,ee.id]):x(le=>le.filter(Ne=>Ne!==ee.id))}}),f.jsxs("label",{htmlFor:`supplier-${ee.id}`,className:"ml-2",children:[ee.name," (",ee.category,")"]})]},ee.id))}),f.jsxs("div",{className:"flex justify-end gap-4 pt-4 border-t dark:border-gray-600",children:[f.jsx("button",{type:"button",onClick:()=>p("details"),className:"btn-secondary",children:"Voltar"}),f.jsx("button",{type:"submit",disabled:l||g.length===0,className:"btn-primary",children:"Enviar Cotao"})]})]}):h==="create_po"?f.jsxs("form",{onSubmit:K,className:"space-y-4",children:[f.jsx("h3",{className:"font-semibold text-lg",children:"Gerar Ordem de Compra Direta"}),f.jsxs("div",{children:[f.jsx("label",{children:"Fornecedor"}),f.jsxs("select",{value:b,onChange:ee=>C(ee.target.value),required:!0,className:"input-style",children:[f.jsx("option",{value:"",children:"Selecione"}),s.map(ee=>f.jsx("option",{value:ee.id,children:ee.name},ee.id))]})]}),f.jsxs("div",{children:[f.jsx("label",{children:"Valor Total do Pedido (R$)"}),f.jsx("input",{type:"number",value:A,onChange:ee=>D(Number(ee.target.value)),required:!0,min:"0",step:"0.01",className:"input-style"})]}),f.jsxs("div",{className:"flex justify-end gap-4 pt-4 border-t dark:border-gray-600",children:[f.jsx("button",{type:"button",onClick:()=>p("details"),className:"btn-secondary",children:"Voltar"}),f.jsx("button",{type:"submit",disabled:l,className:"btn-primary",children:"Criar Pedido"})]})]}):f.jsxs("div",{className:"space-y-4",children:[f.jsxs("p",{children:[f.jsx("strong",{children:"Solicitante:"})," ",n.requesterName]}),f.jsxs("p",{children:[f.jsx("strong",{children:"Data:"})," ",Bn(n.requestDate)]}),n.justification&&f.jsxs("p",{children:[f.jsx("strong",{children:"Justificativa:"})," ",n.justification]}),n.attachmentName&&f.jsxs("p",{children:[f.jsx("strong",{children:"Anexo:"}),f.jsx("a",{href:n.attachmentUrl||"#",target:"_blank",rel:"noopener noreferrer",className:"text-primary-600 hover:underline ml-2",children:n.attachmentName})]}),n.cancellationReason&&f.jsxs("div",{className:"p-3 bg-red-50 dark:bg-red-900/20 border border-red-200 dark:border-red-800 rounded-md",children:[f.jsx("p",{className:"text-red-800 dark:text-red-300 font-semibold text-sm",children:"Motivo do Cancelamento/Rejeio:"}),f.jsx("p",{className:"text-red-700 dark:text-red-200 text-sm",children:n.cancellationReason})]}),f.jsx("p",{children:f.jsx("strong",{children:"Itens:"})}),f.jsx("ul",{className:"list-disc list-inside bg-gray-50 dark:bg-gray-700 p-3 rounded",children:n.items.map((ee,re)=>f.jsxs("li",{children:[ee.quantity,"x ",ee.description]},re))}),f.jsxs("p",{children:[f.jsx("strong",{children:"Status:"})," ",n.status]}),G&&f.jsxs("div",{className:"flex justify-end gap-4 pt-4 border-t dark:border-gray-600",children:[f.jsx("button",{onClick:()=>U(Jn.CANCELED),disabled:l,className:"btn-secondary text-red-600 border-red-200 hover:bg-red-50",children:"Cancelar"}),f.jsx("button",{onClick:()=>U(Jn.REJECTED),disabled:l,className:"btn-danger",children:"Rejeitar"}),f.jsx("button",{onClick:()=>B(Jn.APPROVED),disabled:l,className:"btn-success",children:"Aprovar"})]}),Se&&f.jsxs("div",{className:"flex flex-col sm:flex-row justify-end gap-4 pt-4 border-t dark:border-gray-600",children:[f.jsx("button",{onClick:()=>p("create_rfq"),className:"btn-secondary",children:"Gerar Cotao (RFQ)"}),f.jsx("button",{onClick:()=>p("create_po"),className:"btn-primary",children:"Gerar Ordem de Compra Direta"})]}),!G&&!Se&&f.jsx("div",{className:"flex justify-end pt-4 border-t dark:border-gray-600",children:f.jsx("button",{onClick:J,className:"btn-secondary",children:"Fechar"})})]});return f.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-60 z-50 flex justify-center items-center p-4",children:f.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-xl p-6 w-full max-w-xl",children:[f.jsxs("div",{className:"flex justify-between items-center mb-4",children:[f.jsx("h2",{className:"text-xl font-bold",children:"Revisar Requisio"}),f.jsx("button",{onClick:J,children:""})]}),Oe(),f.jsx("style",{children:".input-style{width:100%;padding:0.5rem;border-radius:0.5rem;border:1px solid #ccc;}.btn-danger{background-color:#dc2626;color:white;}.btn-success{background-color:#16a34a;color:white;}.btn-primary{background-color:rgb(var(--color-primary-600));color:white;}.btn-secondary{background-color:#e5e7eb;color:#1f2937;}.dark .btn-secondary{background-color:#4b5563;color:#e5e7eb;}button{padding:0.5rem 1rem;border-radius:0.5rem;}"})]})})},z1e=({isOpen:t,onClose:e,rfq:n,suppliers:r,onUpdateRFQ:i,onCreateOrder:a,onUpdateRequisition:s,requisition:l})=>{const[c,h]=N.useState(!1),[p,g]=N.useState(!1),[x,b]=N.useState({supplierId:"",items:n.items.map(R=>({...R,unitPrice:0,totalPrice:0}))}),C=(R,j)=>{const O=[...x.items];O[R].unitPrice=j,O[R].totalPrice=j*O[R].quantity,b(q=>({...q,items:O}))},A=async R=>{R.preventDefault();const j=r.find(H=>H.id===x.supplierId);if(!j)return;const O=x.items.reduce((H,U)=>H+(U.totalPrice||0),0),q={id:`quote-${Date.now()}`,supplierId:x.supplierId,supplierName:j.name,quoteDate:new Date().toISOString(),validUntil:new Date(Date.now()+10080*60*1e3).toISOString(),items:x.items,totalValue:O},$={...n,quotes:[...n.quotes,q]};await i($),g(!1),b({supplierId:"",items:n.items.map(H=>({...H,unitPrice:0,totalPrice:0}))})},D=async R=>{h(!0);const j={requisitionId:n.requisitionId,supplierId:R.supplierId,orderDate:new Date().toISOString(),items:R.items,totalValue:R.totalValue,status:Eo.PENDING,receivedItems:[]};await a(j),l&&await s({...l,status:Jn.ORDERED}),await i({...n,status:sh.CLOSED}),h(!1),e()};return t?f.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-60 z-50 flex justify-center items-center p-4",children:f.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-xl p-6 w-full max-w-4xl max-h-[90vh] flex flex-col",onClick:R=>R.stopPropagation(),children:[f.jsxs("div",{className:"flex justify-between items-center mb-4",children:[f.jsx("h2",{className:"text-xl font-bold",children:"Analisar Cotao (RFQ)"}),f.jsx("button",{onClick:e,children:""})]}),f.jsxs("div",{className:"overflow-y-auto space-y-6",children:[f.jsxs("div",{children:[f.jsx("h3",{className:"font-semibold mb-2",children:"Itens Solicitados"}),f.jsx("ul",{className:"list-disc list-inside bg-gray-50 dark:bg-gray-700/50 p-3 rounded",children:n.items.map((R,j)=>f.jsxs("li",{children:[R.quantity,"x ",R.description]},j))})]}),f.jsxs("div",{children:[f.jsx("h3",{className:"font-semibold mb-2",children:"Cotaes Recebidas"}),f.jsxs("div",{className:"space-y-4",children:[n.quotes.sort((R,j)=>R.totalValue-j.totalValue).map(R=>f.jsxs("div",{className:"border rounded-lg p-4 bg-gray-50 dark:bg-gray-700/50",children:[f.jsxs("div",{className:"flex justify-between items-start",children:[f.jsxs("div",{children:[f.jsx("p",{className:"font-bold text-lg",children:R.supplierName}),f.jsxs("p",{className:"text-sm",children:["Total: ",f.jsx("span",{className:"font-bold text-primary-600",children:ht(R.totalValue)})]})]}),f.jsx("button",{onClick:()=>D(R),disabled:c,className:"btn-primary btn-sm",children:"Selecionar Vencedor e Gerar Pedido"})]}),f.jsxs("details",{className:"text-xs mt-2",children:[f.jsx("summary",{children:"Ver detalhes"}),f.jsx("ul",{className:"mt-1",children:R.items.map((j,O)=>f.jsxs("li",{children:[j.quantity,"x ",j.description," @ ",ht(j.unitPrice||0)]},O))})]})]},R.id)),n.quotes.length===0&&f.jsx("p",{className:"text-sm text-center p-4",children:"Nenhuma cotao recebida ainda."})]})]}),!p&&f.jsx("button",{onClick:()=>g(!0),className:"btn-secondary",children:"Simular Recebimento de Cotao"}),p&&f.jsxs("form",{onSubmit:A,className:"space-y-4 pt-4 border-t",children:[f.jsx("h3",{className:"font-semibold",children:"Nova Cotao"}),f.jsxs("div",{children:[f.jsx("label",{children:"Fornecedor"}),f.jsxs("select",{value:x.supplierId,onChange:R=>b(j=>({...j,supplierId:R.target.value})),required:!0,className:"input-style",children:[f.jsx("option",{value:"",children:"Selecione"}),r.filter(R=>!n.quotes.find(j=>j.supplierId===R.id)).map(R=>f.jsx("option",{value:R.id,children:R.name},R.id))]})]}),x.items.map((R,j)=>f.jsxs("div",{className:"grid grid-cols-2 gap-4 items-center",children:[f.jsxs("p",{children:[R.quantity,"x ",R.description]}),f.jsxs("div",{children:[f.jsx("label",{className:"text-xs",children:"Preo Unitrio (R$)"}),f.jsx("input",{type:"number",value:R.unitPrice,onChange:O=>C(j,Number(O.target.value)),required:!0,min:"0",step:"0.01",className:"input-style"})]})]},j)),f.jsxs("div",{className:"flex justify-end gap-2",children:[f.jsx("button",{type:"button",onClick:()=>g(!1),className:"btn-secondary",children:"Cancelar"}),f.jsx("button",{type:"submit",className:"btn-primary",children:"Adicionar Cotao"})]})]})]}),f.jsx("style",{children:".input-style{width:100%;padding:0.5rem;border-radius:0.5rem;border:1px solid #ccc;}.btn-primary{background-color:rgb(var(--color-primary-600));color:white;}.btn-secondary{background-color:#eee;color:#333;}.dark .btn-secondary{background-color:#4b5563;color:#e5e7eb;}button{padding:0.5rem 1rem;border-radius:0.5rem;font-weight:500;}.btn-sm{padding:0.25rem 0.5rem;font-size:0.875rem;}"})]})}):null},q1e=({isOpen:t,onClose:e,order:n,onSave:r})=>{const i=N.useMemo(()=>{const g=new Map;return n.items.forEach(x=>{const b=n.receivedItems.filter(A=>A.description===x.description).reduce((A,D)=>A+D.quantityReceived,0),C=x.quantity-b;g.set(x.description,C)}),g},[n]),[a,s]=N.useState(i),[l,c]=N.useState(!1),h=(g,x)=>{const b=parseInt(x,10);s(new Map(a.set(g,isNaN(b)?0:b)))},p=async()=>{c(!0);const g=Array.from(a.entries()).filter(([,x])=>x>0).map(([x,b])=>{const C=n.items.find(A=>A.description===x);return{description:x,quantityReceived:b,stockItemId:C==null?void 0:C.stockItemId}});await r(n.id,g),c(!1),e()};return t?f.jsxs("div",{className:"fixed inset-0 bg-black bg-opacity-70 z-50 flex justify-center items-center p-4",children:[f.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-xl p-6 w-full max-w-2xl",onClick:g=>g.stopPropagation(),children:[f.jsx("h2",{className:"text-xl font-bold mb-4",children:"Receber Itens do Pedido"}),f.jsx("div",{className:"space-y-3",children:n.items.map(g=>{const x=n.receivedItems.filter(C=>C.description===g.description).reduce((C,A)=>C+A.quantityReceived,0),b=g.quantity-x;return b<=0?null:f.jsxs("div",{className:"grid grid-cols-3 gap-4 items-center",children:[f.jsxs("span",{children:[g.description," (Pedido: ",g.quantity,", Restante: ",b,")"]}),f.jsx("input",{type:"number",value:a.get(g.description)||0,onChange:C=>h(g.description,C.target.value),max:b,min:"0",className:"input-style"})]},g.description)})}),f.jsxs("div",{className:"flex justify-end gap-4 pt-4 mt-4 border-t",children:[f.jsx("button",{onClick:e,disabled:l,className:"btn-secondary",children:"Cancelar"}),f.jsx("button",{onClick:p,disabled:l,className:"btn-primary",children:l?"Processando...":"Confirmar Recebimento"})]})]}),f.jsx("style",{children:".input-style{width:100%;padding:0.5rem;border-radius:0.5rem;border:1px solid #ccc;}.btn-primary{background-color:rgb(var(--color-primary-600));color:white;padding:0.5rem 1rem;}.btn-secondary{background-color:#eee;color:#333;padding:0.5rem 1rem;}"})]}):null},H1e=({isOpen:t,onClose:e,order:n,onReceiveItems:r})=>{const[i,a]=N.useState(!1);if(!t)return null;const s=n.items.reduce((h,p)=>h+p.quantity,0),l=n.receivedItems.reduce((h,p)=>h+p.quantityReceived,0),c=n.status!=="Recebido"&&n.status!=="Cancelado";return f.jsxs(f.Fragment,{children:[f.jsxs("div",{className:"fixed inset-0 bg-black bg-opacity-60 z-50 flex justify-center items-center p-4",children:[f.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-xl p-6 w-full max-w-3xl max-h-[90vh] flex flex-col",onClick:h=>h.stopPropagation(),children:[f.jsxs("div",{className:"flex justify-between items-center mb-4 border-b pb-3",children:[f.jsx("h2",{className:"text-xl font-bold",children:"Detalhes da Ordem de Compra"}),f.jsx("button",{onClick:e,children:""})]}),f.jsxs("div",{className:"overflow-y-auto space-y-4",children:[f.jsxs("div",{className:"grid grid-cols-2 gap-4 text-sm",children:[f.jsxs("p",{children:[f.jsx("strong",{children:"Data:"})," ",Bn(n.orderDate)]}),f.jsxs("p",{children:[f.jsx("strong",{children:"Status:"})," ",n.status]}),f.jsxs("p",{children:[f.jsx("strong",{children:"Total:"})," ",ht(n.totalValue)]}),f.jsxs("p",{children:[f.jsx("strong",{children:"Entrega Prevista:"})," ",n.expectedDeliveryDate?Bn(n.expectedDeliveryDate):"N/A"]})]}),f.jsxs("div",{children:[f.jsxs("h3",{className:"font-semibold mt-4",children:["Itens Pedidos (",s,")"]}),f.jsx("ul",{className:"list-disc list-inside bg-gray-50 dark:bg-gray-700/50 p-3 rounded mt-2 text-sm",children:n.items.map((h,p)=>f.jsxs("li",{children:[h.quantity,"x ",h.description]},p))})]}),f.jsxs("div",{children:[f.jsxs("h3",{className:"font-semibold mt-4",children:["Itens Recebidos (",l,")"]}),n.receivedItems.length>0?f.jsx("ul",{className:"list-disc list-inside bg-gray-50 dark:bg-gray-700/50 p-3 rounded mt-2 text-sm",children:n.receivedItems.map((h,p)=>f.jsxs("li",{children:[Bn(h.receivedDate),": ",h.quantityReceived,"x ",h.description]},p))}):f.jsx("p",{className:"text-sm text-gray-500 mt-2",children:"Nenhum item recebido ainda."})]})]}),f.jsxs("div",{className:"flex justify-end gap-4 pt-4 mt-auto border-t",children:[c&&f.jsx("button",{onClick:()=>a(!0),className:"btn-primary",children:"Receber Itens"}),f.jsx("button",{onClick:e,className:"btn-secondary",children:"Fechar"})]})]}),f.jsx("style",{children:"button{padding:0.5rem 1rem;border-radius:0.5rem;font-weight:500;}.btn-primary{background-color:rgb(var(--color-primary-600));color:white;}.btn-secondary{background-color:#e5e7eb;color:#1f2937;}.dark .btn-secondary{background-color:#4b5563;color:#e5e7eb;}"})]}),c&&f.jsx(q1e,{isOpen:i,onClose:()=>a(!1),order:n,onSave:r})]})},G1e=()=>{const{purchaseRequisitions:t,rfqs:e,purchaseOrders:n,addPurchaseRequisition:r,updatePurchaseRequisition:i,addRequestForQuotation:a,updateRequestForQuotation:s,addPurchaseOrder:l,receiveOrderItems:c,suppliers:h}=Zt(),{user:p}=$s(),[g,x]=N.useState("requisitions"),[b,C]=N.useState(!1),[A,D]=N.useState(!1),[R,j]=N.useState(!1),[O,q]=N.useState(!1),[$,H]=N.useState(null),[U,z]=N.useState(null),[B,Z]=N.useState(null),K=async(ee,re,le)=>{if(!(p!=null&&p.name))return;let Ne="";if(le)try{Ne=await UN(le)}catch(X){console.error("Failed to convert attachment",X)}const Pe={requesterName:p.name,requestDate:new Date().toISOString(),items:ee.map(X=>({description:X.name,quantity:X.quantity})),status:Jn.PENDING,...re&&{justification:re},...le&&{attachmentName:le.name,attachmentUrl:Ne}};await r(Pe)},J=ee=>{H(ee),D(!0)},G=ee=>{z(ee),j(!0)},Se=ee=>{Z(ee),q(!0)},Oe=({tabName:ee,label:re})=>f.jsx("button",{onClick:()=>x(ee),className:`${g===ee?"border-primary-500 text-primary-600 dark:border-primary-400 dark:text-primary-400":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300 dark:hover:border-gray-500"} whitespace-nowrap py-4 px-1 border-b-2 font-medium text-sm`,children:re});return f.jsxs("div",{className:"p-4 md:p-8 space-y-6",children:[f.jsxs("div",{className:"flex flex-col md:flex-row justify-between items-start md:items-center",children:[f.jsx("p",{className:"text-gray-500 dark:text-gray-400",children:"Gerencie requisies, cotaes e ordens de compra."}),f.jsxs("button",{onClick:()=>C(!0),className:"btn btn-primary",children:[f.jsx(Ba,{className:"w-5 h-5 mr-2"}),"Nova Requisio de Compra"]})]}),f.jsx("div",{className:"border-b border-gray-200 dark:border-gray-700",children:f.jsxs("nav",{className:"-mb-px flex space-x-8","aria-label":"Tabs",children:[f.jsx(Oe,{tabName:"requisitions",label:"Requisies"}),f.jsx(Oe,{tabName:"rfqs",label:"Cotaes (RFQ)"}),f.jsx(Oe,{tabName:"orders",label:"Ordens de Compra"})]})}),f.jsxs("div",{children:[g==="requisitions"&&f.jsx(j1e,{requisitions:t,onView:J}),g==="rfqs"&&f.jsx(V1e,{rfqs:e,onView:G}),g==="orders"&&f.jsx(F1e,{orders:n,onView:Se})]}),f.jsx(C8,{isOpen:b,onClose:()=>C(!1),onSave:K}),$&&f.jsx(B1e,{isOpen:A,onClose:()=>D(!1),requisition:$,onUpdateRequisition:i,onCreateRFQ:a,onCreateOrder:l,suppliers:h}),U&&f.jsx(z1e,{isOpen:R,onClose:()=>j(!1),rfq:U,suppliers:h,onUpdateRFQ:s,onCreateOrder:l,onUpdateRequisition:i,requisition:t.find(ee=>ee.id===U.requisitionId)}),B&&f.jsx(H1e,{isOpen:O,onClose:()=>q(!1),order:B,onReceiveItems:c}),f.jsx("style",{children:".btn {display:inline-flex;align-items:center;justify-content:center;padding:0.5rem 1rem;font-weight:500;border-radius:0.5rem;transition:background-color .2s}.btn-primary {background-color:rgb(var(--color-primary-600));color:#fff}.btn-primary:hover {background-color:rgb(var(--color-primary-700))}"})]})},$1e=["admin","manager","user"],K1e={admin:"Administradores",manager:"Gerentes",user:"Usurios"},W1e=({users:t,onEdit:e,onDelete:n})=>{const r=N.useMemo(()=>{const i={admin:[],manager:[],user:[]};return t.forEach(a=>{i[a.role]&&i[a.role].push(a)}),i},[t]);return f.jsx("div",{className:"space-y-8",children:$1e.map(i=>{const a=r[i];return a.length===0?null:f.jsxs("div",{children:[f.jsxs("h2",{className:"text-xl font-semibold text-gray-800 dark:text-white mb-4 pb-2 border-b border-gray-200 dark:border-gray-700",children:[K1e[i]," ",f.jsxs("span",{className:"text-base font-normal text-gray-500 dark:text-gray-400",children:["(",a.length,")"]})]}),f.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-6",children:a.map(s=>f.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-xl shadow-lg p-5 flex flex-col justify-between border border-transparent hover:border-primary-500 transition-all",children:[f.jsxs("div",{children:[f.jsx("h3",{className:"text-lg font-bold text-gray-900 dark:text-white truncate",children:s.name}),f.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400 truncate",children:s.email}),s.status==="invited"&&f.jsx("span",{className:"mt-2 inline-block bg-yellow-100 text-yellow-800 text-xs font-medium px-2.5 py-0.5 rounded-full dark:bg-yellow-900 dark:text-yellow-300",children:"Pendente"})]}),(e||n)&&f.jsxs("div",{className:"flex justify-end gap-3 mt-4 pt-4 border-t border-gray-100 dark:border-gray-700",children:[e&&f.jsx("button",{onClick:()=>e(s),className:"text-sm font-medium text-yellow-600 hover:underline",children:"Editar"}),n&&f.jsx("button",{onClick:()=>n(s),className:"text-sm font-medium text-red-600 hover:underline",children:"Remover"})]})]},s.uid))})]},i)})})},Y1e=({isOpen:t,onClose:e,onSave:n})=>{const[r,i]=N.useState(""),[a,s]=N.useState(""),[l,c]=N.useState("user"),[h,p]=N.useState(!1),[g,x]=N.useState(null),[b,C]=N.useState(null),A=async R=>{if(R.preventDefault(),!r||!a){x("Nome e e-mail so obrigatrios.");return}p(!0),x(null);try{await n({name:r,email:a,role:l}),C(`Convite registrado para ${a}.`),setTimeout(()=>{D()},2500)}catch(j){console.error(j),x("Falha ao registrar convite."),p(!1)}},D=()=>{i(""),s(""),c("user"),x(null),C(null),p(!1),e()};return t?f.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-60 z-50 flex justify-center items-center p-4",children:f.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-xl p-6 w-full max-w-lg",children:[f.jsx("h2",{className:"text-xl font-bold mb-4 text-gray-900 dark:text-white",children:"Convidar Novo Usurio"}),b?f.jsxs("div",{className:"text-center py-6",children:[f.jsx("div",{className:"w-16 h-16 bg-green-100 rounded-full flex items-center justify-center mx-auto mb-4",children:f.jsx("svg",{className:"w-8 h-8 text-green-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:f.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M5 13l4 4L19 7"})})}),f.jsx("h3",{className:"text-lg font-medium text-gray-900 dark:text-white",children:"Convite Registrado!"}),f.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400 mt-2",children:b}),f.jsx("p",{className:"text-xs text-gray-400 mt-4",children:"Fechando janelas..."})]}):f.jsxs("form",{onSubmit:A,className:"space-y-4",children:[g&&f.jsx("div",{className:"bg-red-100 p-3 rounded text-red-700 text-sm",children:g}),f.jsx("div",{className:"bg-blue-50 dark:bg-blue-900/30 p-3 rounded-md border border-blue-100 dark:border-blue-800",children:f.jsxs("p",{className:"text-xs text-blue-800 dark:text-blue-200",children:[f.jsx("strong",{children:"Nota de Demonstrao:"})," O sistema registrar o convite no banco de dados. Como este  um ambiente de demonstrao, o e-mail real no ser disparado. O usurio poder acessar o sistema criando uma conta com este e-mail."]})}),f.jsxs("div",{children:[f.jsx("label",{htmlFor:"name",className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Nome Completo"}),f.jsx("input",{type:"text",id:"name",value:r,onChange:R=>i(R.target.value),required:!0,className:"input-style"})]}),f.jsxs("div",{children:[f.jsx("label",{htmlFor:"email",className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"E-mail"}),f.jsx("input",{type:"email",id:"email",value:a,onChange:R=>s(R.target.value),required:!0,className:"input-style"})]}),f.jsxs("div",{children:[f.jsx("label",{htmlFor:"role",className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Funo"}),f.jsxs("select",{id:"role",value:l,onChange:R=>c(R.target.value),required:!0,className:"input-style",children:[f.jsx("option",{value:"user",children:"Usurio (Visualizar)"}),f.jsx("option",{value:"manager",children:"Gerente (Editar/Aprovar)"}),f.jsx("option",{value:"admin",children:"Administrador (Acesso Total)"})]})]}),f.jsxs("div",{className:"flex justify-end gap-4 pt-4",children:[f.jsx("button",{type:"button",onClick:D,disabled:h,className:"btn-secondary",children:"Cancelar"}),f.jsx("button",{type:"submit",disabled:h,className:"btn-primary",children:h?"Processando...":"Gerar Convite"})]})]}),f.jsx("style",{children:`
            .input-style{width:100%;padding:0.625rem;border-radius:0.5rem;border:1px solid #D1D5DB; background-color: #fff; color: #1f2937;}
            .dark .input-style{background-color:#374151;border-color:#4B5563;color:white;}
            .btn-primary{padding:0.5rem 1rem;border-radius:0.5rem;font-weight:500;background-color:rgb(var(--color-primary-600));color:white;}
            .btn-secondary{padding:0.5rem 1rem;border-radius:0.5rem;font-weight:500;background-color:#e5e7eb;color:#1f2937;}
            .dark .btn-secondary{background-color:#4b5563;color:#e5e7eb;}
            button:disabled{opacity:0.5;}
        `})]})}):null},Z1e=({isOpen:t,onClose:e,user:n,onSave:r})=>{const[i,a]=N.useState(n.role),[s,l]=N.useState(!1);N.useEffect(()=>{a(n.role)},[n]);const c=async h=>{h.preventDefault(),l(!0),await r(n.uid,i),l(!1),e()};return t?f.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-60 z-50 flex justify-center items-center p-4",children:f.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-xl p-6 w-full max-w-lg",children:[f.jsx("h2",{className:"text-xl font-bold mb-4",children:"Editar Funo do Usurio"}),f.jsxs("form",{onSubmit:c,className:"space-y-4",children:[f.jsxs("p",{children:[f.jsx("strong",{children:"Usurio:"})," ",n.name||n.email]}),f.jsxs("div",{children:[f.jsx("label",{htmlFor:"role",children:"Funo"}),f.jsxs("select",{id:"role",value:i,onChange:h=>a(h.target.value),required:!0,className:"input-style",children:[f.jsx("option",{value:"user",children:"Usurio"}),f.jsx("option",{value:"manager",children:"Gerente"}),f.jsx("option",{value:"admin",children:"Administrador"})]})]}),f.jsxs("div",{className:"flex justify-end gap-4 pt-4",children:[f.jsx("button",{type:"button",onClick:e,disabled:s,className:"btn-secondary",children:"Cancelar"}),f.jsx("button",{type:"submit",disabled:s,className:"btn-primary",children:s?"Salvando...":"Salvar Alteraes"})]})]}),f.jsx("style",{children:"label{display:block;margin-bottom:0.5rem;font-weight:500;}.input-style{width:100%;padding:0.625rem;border-radius:0.5rem;border:1px solid #D1D5DB;}.btn-primary,.btn-secondary{padding:0.5rem 1rem;border-radius:0.5rem;font-weight:500;}.btn-primary{background-color:rgb(var(--color-primary-600));color:white;}.btn-secondary{background-color:#e5e7eb;color:#1f2937;}.dark .btn-secondary{background-color:#4b5563;color:#e5e7eb;}button:disabled{opacity:0.5;}"})]})}):null},J1e=()=>{const{users:t,isLoading:e,error:n,inviteUser:r,updateUserRole:i,deleteUser:a}=Zt(),{user:s}=$s(),[l,c]=N.useState(!1),[h,p]=N.useState(!1),[g,x]=N.useState(!1),[b,C]=N.useState(null),A=O=>{C(O),p(!0)},D=O=>{C(O),x(!0)},R=async()=>{b&&(await a(b.uid),x(!1),C(null))},j=(s==null?void 0:s.role)==="admin";return f.jsxs("div",{className:"p-4 md:p-8 space-y-6",children:[f.jsxs("div",{className:"flex flex-col md:flex-row justify-between items-start md:items-center",children:[f.jsxs("div",{children:[f.jsx("h1",{className:"text-3xl font-bold text-gray-800 dark:text-white",children:"Organograma e Usurios"}),f.jsx("p",{className:"text-gray-500 dark:text-gray-400",children:"Gerencie os membros e as permisses da sua equipe."})]}),j&&f.jsxs("button",{onClick:()=>c(!0),className:"btn btn-primary mt-4 md:mt-0",children:[f.jsx(Ba,{className:"w-5 h-5 mr-2"}),"Convidar Usurio"]})]}),n&&f.jsx("div",{className:"bg-red-100 border-l-4 border-red-500 text-red-700 p-4",role:"alert",children:f.jsx("p",{children:n})}),e?f.jsx("div",{className:"flex justify-center items-center h-64",children:f.jsx("div",{className:"animate-spin rounded-full h-16 w-16 border-t-2 border-b-2 border-primary-500"})}):f.jsx(W1e,{users:t,onEdit:j?A:void 0,onDelete:j?D:void 0}),j&&f.jsxs(f.Fragment,{children:[f.jsx(Y1e,{isOpen:l,onClose:()=>c(!1),onSave:r}),b&&f.jsx(Z1e,{isOpen:h,onClose:()=>p(!1),user:b,onSave:i}),b&&f.jsx(ym,{isOpen:g,onClose:()=>x(!1),onConfirm:R,title:"Remover Usurio",message:`Tem certeza que deseja remover ${b.name||b.email} da equipe?`})]}),f.jsx("style",{children:".btn {display:inline-flex;align-items:center;justify-content:center;padding:0.5rem 1rem;font-weight:500;border-radius:0.5rem;transition:background-color .2s}.btn-primary {background-color:rgb(var(--color-primary-600));color:#fff}.btn-primary:hover {background-color:rgb(var(--color-primary-700))}"})]})},Q1e=({isOpen:t,onClose:e,onSave:n})=>{const r={title:"",clientName:"",value:0,stage:"Lead",probability:10,expectedCloseDate:"",owner:""},[i,a]=N.useState(r),[s,l]=N.useState(!1),c=p=>{const{name:g,value:x}=p.target;a(b=>({...b,[g]:g==="value"||g==="probability"?Number(x):x}))},h=async p=>{p.preventDefault(),l(!0),await n(i),a(r),l(!1),e()};return t?f.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-60 z-50 flex justify-center items-center p-4",children:f.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-xl p-6 w-full max-w-md",children:[f.jsx("h2",{className:"text-xl font-bold mb-4 dark:text-white",children:"Novo Negcio"}),f.jsxs("form",{onSubmit:h,className:"space-y-4",children:[f.jsxs("div",{children:[f.jsx("label",{className:"dark:text-gray-300",children:"Ttulo"}),f.jsx("input",{type:"text",name:"title",value:i.title,onChange:c,required:!0,className:"input-style"})]}),f.jsxs("div",{children:[f.jsx("label",{className:"dark:text-gray-300",children:"Cliente"}),f.jsx("input",{type:"text",name:"clientName",value:i.clientName,onChange:c,required:!0,className:"input-style"})]}),f.jsxs("div",{children:[f.jsx("label",{className:"dark:text-gray-300",children:"Valor (R$)"}),f.jsx("input",{type:"number",name:"value",value:i.value,onChange:c,required:!0,className:"input-style"})]}),f.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[f.jsxs("div",{children:[f.jsx("label",{className:"dark:text-gray-300",children:"Estgio"}),f.jsxs("select",{name:"stage",value:i.stage,onChange:c,className:"input-style",children:[f.jsx("option",{children:"Lead"}),f.jsx("option",{children:"Qualificado"}),f.jsx("option",{children:"Proposta"}),f.jsx("option",{children:"Negociao"}),f.jsx("option",{children:"Fechado"})]})]}),f.jsxs("div",{children:[f.jsx("label",{className:"dark:text-gray-300",children:"Probabilidade (%)"}),f.jsx("input",{type:"number",name:"probability",value:i.probability,onChange:c,className:"input-style"})]})]}),f.jsxs("div",{children:[f.jsx("label",{className:"dark:text-gray-300",children:"Fechamento Previsto"}),f.jsx("input",{type:"date",name:"expectedCloseDate",value:i.expectedCloseDate,onChange:c,required:!0,className:"input-style"})]}),f.jsxs("div",{children:[f.jsx("label",{className:"dark:text-gray-300",children:"Responsvel"}),f.jsx("input",{type:"text",name:"owner",value:i.owner,onChange:c,required:!0,className:"input-style"})]}),f.jsxs("div",{className:"flex justify-end gap-4 pt-4",children:[f.jsx("button",{type:"button",onClick:e,className:"btn-secondary",children:"Cancelar"}),f.jsx("button",{type:"submit",disabled:s,className:"btn-primary",children:s?"Salvando...":"Salvar"})]})]}),f.jsx("style",{children:".input-style{width:100%;padding:0.5rem;border-radius:0.5rem;border:1px solid #ccc;}.dark .input-style{background-color:#374151;border-color:#4B5563;color:white;}.btn-primary{background-color:rgb(var(--color-primary-600));color:white;padding:0.5rem 1rem;border-radius:0.5rem;}.btn-secondary{background-color:#e5e7eb;color:#333;padding:0.5rem 1rem;border-radius:0.5rem;}.dark .btn-secondary{background-color:#4b5563;color:#e5e7eb;}"})]})}):null},qv=["Lead","Qualificado","Proposta","Negociao","Fechado"],X1e=()=>{const{deals:t,addDeal:e,updateDeal:n,addSalesOrder:r}=Zt(),[i,a]=N.useState([]),[s,l]=N.useState(!1),[c,h]=N.useState({show:!1,message:""});N.useEffect(()=>{a(t)},[t]);const p=C=>{switch(C){case"Lead":return"border-gray-400 bg-gray-50 dark:bg-gray-700/50";case"Qualificado":return"border-blue-400 bg-blue-50 dark:bg-blue-900/20";case"Proposta":return"border-yellow-400 bg-yellow-50 dark:bg-yellow-900/20";case"Negociao":return"border-orange-400 bg-orange-50 dark:bg-orange-900/20";case"Fechado":return"border-green-400 bg-green-50 dark:bg-green-900/20";default:return"border-gray-200"}},g=async(C,A)=>{const D=i.findIndex(z=>z.id===C);if(D===-1)return;const R=i[D],j=qv.indexOf(R.stage);let O=A==="next"?j+1:j-1;if(O<0||O>=qv.length)return;const q=qv[O];let $=R.probability;q==="Lead"&&($=10),q==="Qualificado"&&($=30),q==="Proposta"&&($=60),q==="Negociao"&&($=80),q==="Fechado"&&($=100);const H={...R,stage:q,probability:$},U=[...i];if(U[D]=H,a(U),await n(H),q==="Fechado"&&R.stage!=="Fechado"){try{await r({customerName:R.clientName,date:new Date().toISOString(),total:R.value,status:"Aberto",items:[{description:R.title,quantity:1,unitPrice:R.value}]}),h({show:!0,message:`Regra 4.3 Aplicada: Pedido de venda gerado automaticamente para ${R.clientName}!`})}catch(z){console.error("Failed to auto-generate sales order",z),h({show:!0,message:"Erro ao gerar pedido automtico."})}setTimeout(()=>h({show:!1,message:""}),4e3)}},x=i.reduce((C,A)=>C+(A.stage!=="Fechado"?A.value:0),0),b=i.reduce((C,A)=>C+(A.stage!=="Fechado"?A.value*(A.probability/100):0),0);return f.jsxs("div",{className:"p-4 md:p-8 space-y-6 h-[calc(100vh-64px)] flex flex-col",children:[f.jsxs("div",{className:"flex justify-between items-end",children:[f.jsxs("div",{children:[f.jsx("h1",{className:"text-3xl font-bold text-gray-800 dark:text-white",children:"Pipeline de Vendas (CRM)"}),f.jsx("p",{className:"text-gray-500 dark:text-gray-400",children:"Gesto de pipeline de vendas e oportunidades."}),f.jsxs("div",{className:"flex gap-4 mt-2",children:[f.jsxs("div",{className:"text-sm",children:[f.jsx("span",{className:"text-gray-500",children:"Pipeline Total:"})," ",f.jsx("span",{className:"font-bold text-gray-800 dark:text-white",children:ht(x)})]}),f.jsxs("div",{className:"text-sm",children:[f.jsx("span",{className:"text-gray-500",children:"Ponderado:"})," ",f.jsx("span",{className:"font-bold text-primary-600",children:ht(b)})]})]})]}),f.jsxs("button",{onClick:()=>l(!0),className:"btn-primary flex items-center",children:[f.jsx(Ba,{className:"w-5 h-5 mr-2"})," Novo Negcio"]})]}),f.jsx("div",{className:"flex gap-4 overflow-x-auto pb-4 h-full",children:qv.map(C=>{const A=i.filter(R=>R.stage===C),D=A.reduce((R,j)=>R+j.value,0);return f.jsxs("div",{className:"min-w-[280px] w-full max-w-xs flex flex-col bg-gray-100 dark:bg-gray-800 rounded-lg p-2",children:[f.jsxs("div",{className:`p-3 mb-3 border-b-4 ${p(C).split(" ")[0]} rounded-t-md bg-white dark:bg-gray-700 shadow-sm`,children:[f.jsxs("h3",{className:"font-bold text-gray-700 dark:text-white flex justify-between",children:[C,f.jsx("span",{className:"bg-gray-200 dark:bg-gray-600 text-xs px-2 py-1 rounded-full",children:A.length})]}),f.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400 mt-1",children:ht(D)})]}),f.jsx("div",{className:"flex-1 overflow-y-auto space-y-3 custom-scrollbar px-1",children:A.map(R=>f.jsxs("div",{className:"bg-white dark:bg-gray-700 p-4 rounded-md shadow-sm hover:shadow-md transition-shadow border border-gray-200 dark:border-gray-600 group",children:[f.jsx("h4",{className:"font-semibold text-gray-900 dark:text-white mb-1",children:R.title}),f.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-300 mb-2",children:R.clientName}),f.jsxs("div",{className:"flex justify-between items-center text-xs text-gray-500 dark:text-gray-400 mb-3",children:[f.jsxs("span",{className:"flex items-center",children:[f.jsx(ax,{className:"w-3 h-3 mr-1"}),ht(R.value)]}),f.jsx("span",{children:R.owner})]}),f.jsx("div",{className:"w-full bg-gray-200 rounded-full h-1.5 dark:bg-gray-600 mb-3",children:f.jsx("div",{className:"bg-primary-600 h-1.5 rounded-full",style:{width:`${R.probability}%`}})}),f.jsxs("div",{className:"flex justify-between mt-2 opacity-0 group-hover:opacity-100 transition-opacity",children:[f.jsx("button",{onClick:()=>g(R.id,"prev"),disabled:C==="Lead",className:"text-xs text-gray-500 hover:text-primary-600 disabled:opacity-30",children:" Voltar"}),f.jsxs("button",{onClick:()=>g(R.id,"next"),disabled:C==="Fechado",className:"text-xs text-primary-600 font-semibold hover:text-primary-800 disabled:opacity-30",children:[C==="Negociao"?"Fechar & Gerar Pedido":"Avanar"," "]})]})]},R.id))})]},C)})}),f.jsx(Q1e,{isOpen:s,onClose:()=>l(!1),onSave:e}),f.jsx(S8,{isOpen:c.show,message:c.message,type:"success",onClose:()=>h({show:!1,message:""})}),f.jsx("style",{children:".btn-primary{display:inline-flex;align-items:center;padding:0.5rem 1rem;border-radius:0.5rem;font-weight:500;background-color:rgb(var(--color-primary-600));color:white;transition:background-color .2s}.btn-primary:hover{background-color:rgb(var(--color-primary-700))}"})]})},eAe=({isOpen:t,onClose:e,onSave:n})=>{const r={name:"",client:"",status:"Planejamento",progress:0,startDate:"",endDate:"",budget:0,manager:""},[i,a]=N.useState(r),[s,l]=N.useState(!1),c=p=>{const{name:g,value:x}=p.target;a(b=>({...b,[g]:["progress","budget"].includes(g)?Number(x):x}))},h=async p=>{p.preventDefault(),l(!0),await n(i),l(!1),e()};return t?f.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-60 z-50 flex justify-center items-center p-4",children:f.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-xl p-6 w-full max-w-lg",children:[f.jsx("h2",{className:"text-xl font-bold mb-4 dark:text-white",children:"Novo Projeto"}),f.jsxs("form",{onSubmit:h,className:"space-y-4",children:[f.jsxs("div",{children:[f.jsx("label",{className:"dark:text-gray-300",children:"Nome do Projeto"}),f.jsx("input",{type:"text",name:"name",value:i.name,onChange:c,required:!0,className:"input-style"})]}),f.jsxs("div",{children:[f.jsx("label",{className:"dark:text-gray-300",children:"Cliente"}),f.jsx("input",{type:"text",name:"client",value:i.client,onChange:c,required:!0,className:"input-style"})]}),f.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[f.jsxs("div",{children:[f.jsx("label",{className:"dark:text-gray-300",children:"Incio"}),f.jsx("input",{type:"date",name:"startDate",value:i.startDate,onChange:c,required:!0,className:"input-style"})]}),f.jsxs("div",{children:[f.jsx("label",{className:"dark:text-gray-300",children:"Fim Previsto"}),f.jsx("input",{type:"date",name:"endDate",value:i.endDate,onChange:c,required:!0,className:"input-style"})]})]}),f.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[f.jsxs("div",{children:[f.jsx("label",{className:"dark:text-gray-300",children:"Oramento (R$)"}),f.jsx("input",{type:"number",name:"budget",value:i.budget,onChange:c,required:!0,className:"input-style"})]}),f.jsxs("div",{children:[f.jsx("label",{className:"dark:text-gray-300",children:"Gerente"}),f.jsx("input",{type:"text",name:"manager",value:i.manager,onChange:c,required:!0,className:"input-style"})]})]}),f.jsxs("div",{children:[f.jsx("label",{className:"dark:text-gray-300",children:"Status Inicial"}),f.jsxs("select",{name:"status",value:i.status,onChange:c,className:"input-style",children:[f.jsx("option",{children:"Planejamento"}),f.jsx("option",{children:"Em Andamento"}),f.jsx("option",{children:"Concludo"}),f.jsx("option",{children:"Atrasado"})]})]}),f.jsxs("div",{className:"flex justify-end gap-4 pt-4",children:[f.jsx("button",{type:"button",onClick:e,className:"btn-secondary",children:"Cancelar"}),f.jsx("button",{type:"submit",disabled:s,className:"btn-primary",children:s?"Salvando...":"Salvar"})]})]}),f.jsx("style",{children:".input-style{width:100%;padding:0.5rem;border-radius:0.5rem;border:1px solid #ccc;}.dark .input-style{background-color:#374151;border-color:#4B5563;color:white;}.btn-primary{background-color:rgb(var(--color-primary-600));color:white;padding:0.5rem 1rem;border-radius:0.5rem;}.btn-secondary{background-color:#e5e7eb;color:#333;padding:0.5rem 1rem;border-radius:0.5rem;}.dark .btn-secondary{background-color:#4b5563;color:#e5e7eb;}"})]})}):null},tAe=()=>{const{projects:t,addProject:e}=Zt(),[n,r]=N.useState(!1),i=a=>{switch(a){case"Concludo":return"bg-green-100 text-green-800 dark:bg-green-900 dark:text-green-300";case"Em Andamento":return"bg-blue-100 text-blue-800 dark:bg-blue-900 dark:text-blue-300";case"Planejamento":return"bg-gray-100 text-gray-800 dark:bg-gray-700 dark:text-gray-300";case"Atrasado":return"bg-red-100 text-red-800 dark:bg-red-900 dark:text-red-300";default:return"bg-gray-100 text-gray-800"}};return f.jsxs("div",{className:"p-4 md:p-8 space-y-6",children:[f.jsxs("div",{className:"flex justify-between items-center",children:[f.jsxs("div",{children:[f.jsx("h1",{className:"text-3xl font-bold text-gray-800 dark:text-white",children:"Gesto de Projetos"}),f.jsx("p",{className:"text-gray-500 dark:text-gray-400",children:"Acompanhe cronogramas, oramentos e entregas."})]}),f.jsxs("button",{onClick:()=>r(!0),className:"btn-primary flex items-center",children:[f.jsx(Ba,{className:"w-5 h-5 mr-2"})," Novo Projeto"]})]}),f.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[f.jsxs("div",{className:"bg-white dark:bg-gray-800 p-6 rounded-xl shadow-lg border-l-4 border-blue-500",children:[f.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:"Projetos Ativos"}),f.jsx("p",{className:"text-3xl font-bold text-gray-900 dark:text-white",children:t.filter(a=>a.status==="Em Andamento").length})]}),f.jsxs("div",{className:"bg-white dark:bg-gray-800 p-6 rounded-xl shadow-lg border-l-4 border-green-500",children:[f.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:"Concludos"}),f.jsx("p",{className:"text-3xl font-bold text-gray-900 dark:text-white",children:t.filter(a=>a.status==="Concludo").length})]}),f.jsxs("div",{className:"bg-white dark:bg-gray-800 p-6 rounded-xl shadow-lg border-l-4 border-red-500",children:[f.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:"Atrasados"}),f.jsx("p",{className:"text-3xl font-bold text-gray-900 dark:text-white",children:t.filter(a=>a.status==="Atrasado").length})]})]}),f.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-xl shadow-lg p-6",children:[f.jsx("h3",{className:"text-lg font-semibold mb-4 text-gray-900 dark:text-white",children:"Cronograma de Projetos"}),f.jsx("div",{className:"space-y-6",children:t.length===0?f.jsx("p",{className:"text-center text-gray-500",children:"Nenhum projeto cadastrado."}):t.map(a=>f.jsxs("div",{className:"border-b dark:border-gray-700 pb-4 last:border-0",children:[f.jsxs("div",{className:"flex flex-col md:flex-row justify-between mb-2",children:[f.jsxs("div",{children:[f.jsx("h4",{className:"font-bold text-gray-900 dark:text-white text-lg",children:a.name}),f.jsxs("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:["Cliente: ",a.client," | Gerente: ",a.manager]})]}),f.jsxs("div",{className:"text-right mt-2 md:mt-0",children:[f.jsx("span",{className:`px-3 py-1 rounded-full text-xs font-medium ${i(a.status)}`,children:a.status}),f.jsxs("p",{className:"text-sm mt-1 text-gray-600 dark:text-gray-400",children:[Bn(a.startDate)," - ",Bn(a.endDate)]})]})]}),f.jsxs("div",{className:"relative pt-1",children:[f.jsxs("div",{className:"flex mb-2 items-center justify-between",children:[f.jsx("div",{children:f.jsx("span",{className:"text-xs font-semibold inline-block py-1 px-2 uppercase rounded-full text-primary-600 bg-primary-200 dark:bg-primary-900 dark:text-primary-300",children:"Progresso"})}),f.jsx("div",{className:"text-right",children:f.jsxs("span",{className:"text-xs font-semibold inline-block text-primary-600 dark:text-primary-400",children:[a.progress,"%"]})})]}),f.jsx("div",{className:"overflow-hidden h-2 mb-4 text-xs flex rounded bg-primary-200 dark:bg-gray-700",children:f.jsx("div",{style:{width:`${a.progress}%`},className:"shadow-none flex flex-col text-center whitespace-nowrap text-white justify-center bg-primary-500 transition-all duration-500"})})]}),f.jsx("div",{className:"flex justify-between items-center text-sm",children:f.jsxs("div",{className:"flex space-x-4",children:[f.jsxs("span",{className:"flex items-center text-gray-600 dark:text-gray-400",children:[f.jsx(k_,{className:"w-4 h-4 mr-1"})," ",Math.max(0,Math.ceil((new Date(a.endDate).getTime()-new Date().getTime())/(1e3*3600*24)))," dias restantes"]}),f.jsxs("span",{className:"flex items-center text-gray-600 dark:text-gray-400",children:["Oramento: ",ht(a.budget)]})]})})]},a.id))})]}),f.jsx(eAe,{isOpen:n,onClose:()=>r(!1),onSave:e}),f.jsx("style",{children:".btn-primary{display:inline-flex;align-items:center;padding:0.5rem 1rem;border-radius:0.5rem;font-weight:500;background-color:rgb(var(--color-primary-600));color:white;transition:background-color .2s}.btn-primary:hover{background-color:rgb(var(--color-primary-700))}"})]})},nAe=({isOpen:t,onClose:e,onSave:n})=>{const r={name:"",role:"",department:"",email:"",admissionDate:"",salary:0,status:"Ativo"},[i,a]=N.useState(r),[s,l]=N.useState(!1),c=p=>{const{name:g,value:x}=p.target;a(b=>({...b,[g]:g==="salary"?Number(x):x}))},h=async p=>{p.preventDefault(),l(!0);const g=`https://ui-avatars.com/api/?name=${encodeURIComponent(i.name)}&background=random`;await n({...i,avatarUrl:g}),l(!1),e()};return t?f.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-60 z-50 flex justify-center items-center p-4",children:f.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-xl p-6 w-full max-w-lg",children:[f.jsx("h2",{className:"text-xl font-bold mb-4 text-gray-900 dark:text-white",children:"Novo Colaborador"}),f.jsxs("form",{onSubmit:h,className:"space-y-4",children:[f.jsxs("div",{children:[f.jsx("label",{className:"label-style",children:"Nome Completo"}),f.jsx("input",{type:"text",name:"name",value:i.name,onChange:c,required:!0,className:"input-style"})]}),f.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[f.jsxs("div",{children:[f.jsx("label",{className:"label-style",children:"Cargo"}),f.jsx("input",{type:"text",name:"role",value:i.role,onChange:c,required:!0,className:"input-style"})]}),f.jsxs("div",{children:[f.jsx("label",{className:"label-style",children:"Departamento"}),f.jsx("input",{type:"text",name:"department",value:i.department,onChange:c,required:!0,className:"input-style"})]})]}),f.jsxs("div",{children:[f.jsx("label",{className:"label-style",children:"E-mail Corporativo"}),f.jsx("input",{type:"email",name:"email",value:i.email,onChange:c,required:!0,className:"input-style"})]}),f.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[f.jsxs("div",{children:[f.jsx("label",{className:"label-style",children:"Data de Admisso"}),f.jsx("input",{type:"date",name:"admissionDate",value:i.admissionDate,onChange:c,required:!0,className:"input-style"})]}),f.jsxs("div",{children:[f.jsx("label",{className:"label-style",children:"Salrio Base (R$)"}),f.jsx("input",{type:"number",name:"salary",value:i.salary,onChange:c,required:!0,className:"input-style"})]})]}),f.jsxs("div",{className:"flex justify-end gap-4 pt-4 border-t border-gray-200 dark:border-gray-700",children:[f.jsx("button",{type:"button",onClick:e,className:"btn-secondary",children:"Cancelar"}),f.jsx("button",{type:"submit",disabled:s,className:"btn-primary",children:s?"Salvando...":"Salvar"})]})]}),f.jsx("style",{children:`
            .label-style { display: block; margin-bottom: 0.5rem; font-weight: 600; font-size: 0.875rem; color: #111827; }
            .dark .label-style { color: #D1D5DB; }
            .input-style { width: 100%; padding: 0.5rem; border-radius: 0.5rem; border: 1px solid #D1D5DB; background-color: #fff; color: #111827; }
            .dark .input-style { background-color: #374151; border-color: #4B5563; color: white; }
            .btn-primary { background-color: rgb(var(--color-primary-600)); color: white; padding: 0.5rem 1rem; border-radius: 0.5rem; font-weight: 500; }
            .btn-secondary { background-color: #e5e7eb; color: #1f2937; padding: 0.5rem 1rem; border-radius: 0.5rem; font-weight: 500; }
            .dark .btn-secondary { background-color: #4b5563; color: #e5e7eb; }
        `})]})}):null},rAe=()=>{const{employees:t,addEmployee:e}=Zt(),[n,r]=N.useState(!1);return f.jsxs("div",{className:"p-4 md:p-8 space-y-6",children:[f.jsxs("div",{className:"flex justify-between items-center",children:[f.jsxs("div",{children:[f.jsx("h1",{className:"text-3xl font-bold text-gray-800 dark:text-white",children:"Recursos Humanos"}),f.jsx("p",{className:"text-gray-600 dark:text-gray-400",children:"Gesto de colaboradores, folha e frias."})]}),f.jsxs("button",{onClick:()=>r(!0),className:"btn-primary flex items-center",children:[f.jsx(Ba,{className:"w-5 h-5 mr-2"})," Novo Colaborador"]})]}),f.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:t.length===0?f.jsx("p",{className:"text-gray-600 dark:text-gray-400 col-span-3 text-center",children:"Nenhum colaborador cadastrado."}):t.map(i=>f.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-xl shadow-md hover:shadow-lg transition-shadow p-6 flex items-start space-x-4 border border-gray-200 dark:border-gray-700",children:[f.jsx("img",{src:i.avatarUrl||"https://ui-avatars.com/api/?background=random",alt:i.name,className:"w-16 h-16 rounded-full object-cover border-2 border-gray-200 dark:border-gray-600"}),f.jsxs("div",{className:"flex-1 min-w-0",children:[f.jsxs("div",{className:"flex justify-between items-start",children:[f.jsx("h3",{className:"text-lg font-bold text-gray-900 dark:text-white truncate",children:i.name}),f.jsx("span",{className:`text-xs px-2 py-1 rounded-full font-semibold ${i.status==="Ativo"?"bg-green-100 text-green-800":i.status==="Frias"?"bg-yellow-100 text-yellow-800":"bg-red-100 text-red-800"}`,children:i.status})]}),f.jsx("p",{className:"text-sm text-primary-700 dark:text-primary-400 font-bold mt-1",children:i.role}),f.jsx("p",{className:"text-xs text-gray-600 dark:text-gray-400 mb-2",children:i.department}),f.jsxs("div",{className:"mt-3 pt-3 border-t border-gray-200 dark:border-gray-700 grid grid-cols-2 gap-2 text-xs",children:[f.jsxs("div",{children:[f.jsx("p",{className:"text-gray-600 dark:text-gray-400",children:"Admisso"}),f.jsx("p",{className:"font-medium text-gray-900 dark:text-gray-200",children:Bn(i.admissionDate)})]}),f.jsxs("div",{children:[f.jsx("p",{className:"text-gray-600 dark:text-gray-400",children:"Salrio"}),f.jsx("p",{className:"font-medium text-gray-900 dark:text-gray-200",children:ht(i.salary)})]})]}),f.jsxs("div",{className:"mt-4 flex justify-end space-x-2",children:[f.jsx("button",{className:"text-xs text-gray-700 hover:text-primary-700 dark:text-gray-300 dark:hover:text-primary-400 font-medium border border-gray-300 dark:border-gray-600 px-2 py-1 rounded hover:bg-gray-50 dark:hover:bg-gray-700",children:"Perfil"}),f.jsx("button",{className:"text-xs text-gray-700 hover:text-primary-700 dark:text-gray-300 dark:hover:text-primary-400 font-medium border border-gray-300 dark:border-gray-600 px-2 py-1 rounded hover:bg-gray-50 dark:hover:bg-gray-700",children:"Holerite"})]})]})]},i.id))}),f.jsx(nAe,{isOpen:n,onClose:()=>r(!1),onSave:e}),f.jsx("style",{children:".btn-primary{display:inline-flex;align-items:center;padding:0.5rem 1rem;border-radius:0.5rem;font-weight:500;background-color:rgb(var(--color-primary-600));color:white;transition:background-color .2s}.btn-primary:hover{background-color:rgb(var(--color-primary-700))}"})]})},iAe=()=>{const{invoices:t}=Zt(),{branding:e}=Kd(),[n,r]=N.useState(0),[i,a]=N.useState("simples"),[s,l]=N.useState({icms:0,pis:0,cofins:0,ipi:0,iss:0,total:0});N.useEffect(()=>{const h=t.filter(p=>p.status===Xn.PAID).reduce((p,g)=>p+g.total,0);h>0&&n===0&&r(h)},[t]),N.useEffect(()=>{let h=0,p=0,g=0,x=0,b=0;if(i==="simples"){const q=n*.06;l({icms:0,pis:0,cofins:0,ipi:0,iss:0,total:q});return}i==="lucro_presumido"?(p=.0065,g=.03,b=.05):i==="lucro_real"&&(p=.0165,g=.076,h=.18,x=.05);const C=n*p,A=n*g,D=n*h,R=n*x,j=n*b;l({icms:D,pis:C,cofins:A,ipi:R,iss:j,total:D+C+A+R+j})},[n,i]);const c=()=>{if(t.length===0){alert("Sem dados para exportar.");return}let h="data:text/csv;charset=utf-8,";h+=`RELATRIO FISCAL (SIMULAO SPED) - ${e.companyName}
`,h+=`Numero,Data Emissao,Cliente,Valor Total,Status,Impostos Estimados (Simples)
`,t.forEach(x=>{const b=x.total*.06,C=[x.invoiceNumber,x.issueDate.split("T")[0],`"${x.clientName}"`,x.total.toFixed(2),x.status,b.toFixed(2)].join(",");h+=C+`
`});const p=encodeURI(h),g=document.createElement("a");g.setAttribute("href",p),g.setAttribute("download","sped_fiscal_export.csv"),document.body.appendChild(g),g.click(),document.body.removeChild(g)};return f.jsxs("div",{className:"p-4 md:p-8 space-y-6",children:[f.jsxs("div",{className:"flex justify-between items-center",children:[f.jsxs("div",{children:[f.jsx("h1",{className:"text-3xl font-bold text-gray-800 dark:text-white",children:"Gesto Fiscal & Tributria"}),f.jsx("p",{className:"text-gray-500 dark:text-gray-400",children:"Apurao automtica de impostos e emisso de documentos fiscais."})]}),f.jsx("div",{className:"flex space-x-2",children:f.jsx("button",{onClick:c,className:"btn-secondary",children:"Exportar SPED (CSV)"})})]}),f.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-xl shadow-lg p-6 border-l-4 border-primary-600",children:[f.jsxs("h3",{className:"text-lg font-semibold mb-4 text-gray-900 dark:text-white flex items-center",children:[f.jsx(lF,{className:"w-5 h-5 mr-2"})," Motor de Clculo de Impostos (Simulador)"]}),f.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6 mb-6",children:[f.jsxs("div",{children:[f.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Faturamento Base (R$)"}),f.jsx("input",{type:"number",value:n,onChange:h=>r(Number(h.target.value)),className:"w-full p-2 border rounded-md dark:bg-gray-700 dark:border-gray-600 dark:text-white"}),f.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Sugerido com base nas faturas pagas."})]}),f.jsxs("div",{children:[f.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Regime Tributrio"}),f.jsxs("select",{value:i,onChange:h=>a(h.target.value),className:"w-full p-2 border rounded-md dark:bg-gray-700 dark:border-gray-600 dark:text-white",children:[f.jsx("option",{value:"simples",children:"Simples Nacional"}),f.jsx("option",{value:"lucro_presumido",children:"Lucro Presumido (Servios)"}),f.jsx("option",{value:"lucro_real",children:"Lucro Real (Indstria/Comrcio)"})]})]}),f.jsx("div",{className:"flex flex-col justify-end",children:f.jsxs("div",{className:"bg-gray-100 dark:bg-gray-700 p-3 rounded-md text-right",children:[f.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:"Total de Impostos Estimado"}),f.jsx("p",{className:"text-xl font-bold text-red-600 dark:text-red-400",children:ht(s.total)})]})})]}),f.jsx("div",{className:"grid grid-cols-2 md:grid-cols-5 gap-4 text-sm",children:i!=="simples"?f.jsxs(f.Fragment,{children:[f.jsxs("div",{className:"p-2 bg-gray-50 dark:bg-gray-700 rounded",children:["ICMS: ",f.jsx("strong",{children:ht(s.icms)})]}),f.jsxs("div",{className:"p-2 bg-gray-50 dark:bg-gray-700 rounded",children:["PIS: ",f.jsx("strong",{children:ht(s.pis)})]}),f.jsxs("div",{className:"p-2 bg-gray-50 dark:bg-gray-700 rounded",children:["COFINS: ",f.jsx("strong",{children:ht(s.cofins)})]}),f.jsxs("div",{className:"p-2 bg-gray-50 dark:bg-gray-700 rounded",children:["IPI: ",f.jsx("strong",{children:ht(s.ipi)})]}),f.jsxs("div",{className:"p-2 bg-gray-50 dark:bg-gray-700 rounded",children:["ISS: ",f.jsx("strong",{children:ht(s.iss)})]})]}):f.jsx("div",{className:"col-span-5 p-2 bg-blue-50 dark:bg-blue-900/30 rounded text-blue-800 dark:text-blue-200",children:"Clculo unificado via DAS (Documento de Arrecadao do Simples Nacional)."})})]}),f.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-xl shadow-lg p-6",children:[f.jsx("h3",{className:"text-lg font-semibold mb-4 dark:text-white",children:"Notas Fiscais Recentes (NFe / NFSe)"}),f.jsxs("div",{className:"overflow-x-auto",children:[f.jsxs("table",{className:"w-full text-sm text-left text-gray-500 dark:text-gray-400",children:[f.jsx("thead",{className:"text-xs text-gray-700 uppercase bg-gray-50 dark:bg-gray-700 dark:text-gray-400",children:f.jsxs("tr",{children:[f.jsx("th",{className:"px-6 py-3",children:"Nmero"}),f.jsx("th",{className:"px-6 py-3",children:"Tipo"}),f.jsx("th",{className:"px-6 py-3",children:"Destinatrio"}),f.jsx("th",{className:"px-6 py-3",children:"Emisso"}),f.jsx("th",{className:"px-6 py-3 text-right",children:"Valor"}),f.jsx("th",{className:"px-6 py-3 text-center",children:"Status"}),f.jsx("th",{className:"px-6 py-3 text-center",children:"Aes"})]})}),f.jsx("tbody",{children:t.map(h=>f.jsxs("tr",{className:"border-b dark:border-gray-700 hover:bg-gray-50 dark:hover:bg-gray-700",children:[f.jsxs("td",{className:"px-6 py-4 font-mono",children:["#",String(h.invoiceNumber).padStart(6,"0")]}),f.jsx("td",{className:"px-6 py-4",children:"NFe (Sada)"}),f.jsx("td",{className:"px-6 py-4",children:h.clientName}),f.jsx("td",{className:"px-6 py-4",children:Bn(h.issueDate)}),f.jsx("td",{className:"px-6 py-4 text-right",children:ht(h.total)}),f.jsx("td",{className:"px-6 py-4 text-center",children:f.jsx("span",{className:`text-xs px-2 py-1 rounded-full ${h.status===Xn.PAID?"bg-green-100 text-green-800":"bg-yellow-100 text-yellow-800"}`,children:h.status===Xn.PAID?"Autorizada":"Processando"})}),f.jsx("td",{className:"px-6 py-4 text-center text-primary-600 cursor-pointer hover:underline",children:"XML/PDF"})]},h.id))})]}),t.length===0&&f.jsx("p",{className:"text-center text-gray-500 p-4",children:"Nenhuma nota fiscal emitida."})]})]}),f.jsx("style",{children:".btn-primary{padding:0.5rem 1rem;border-radius:0.5rem;background-color:rgb(var(--color-primary-600));color:white;font-weight:500;}.btn-secondary{padding:0.5rem 1rem;border-radius:0.5rem;background-color:#e5e7eb;color:#374151;font-weight:500;}.dark .btn-secondary{background-color:#4b5563;color:#e5e7eb;}"})]})},aAe=()=>{const{salesOrders:t,updateSalesOrderStatus:e}=Zt(),[n,r]=N.useState([]);N.useEffect(()=>{r(t)},[t]);const i=s=>{switch(s){case"Faturado":return"bg-green-100 text-green-800 dark:bg-green-900 dark:text-green-300";case"Entregue":return"bg-blue-100 text-blue-800 dark:bg-blue-900 dark:text-blue-300";case"Aberto":return"bg-yellow-100 text-yellow-800 dark:bg-yellow-900 dark:text-yellow-300";default:return"bg-gray-100"}},a=async(s,l)=>{await e(s,l)};return f.jsxs("div",{className:"p-4 md:p-8 space-y-6",children:[f.jsxs("div",{className:"flex justify-between items-center",children:[f.jsxs("div",{children:[f.jsx("h1",{className:"text-3xl font-bold text-gray-800 dark:text-white",children:"Pedidos de Venda"}),f.jsx("p",{className:"text-gray-500 dark:text-gray-400",children:"Gesto comercial e faturamento (Integrao CRM)."})]}),f.jsxs("button",{className:"btn-primary flex items-center",children:[f.jsx(Ba,{className:"w-5 h-5 mr-2"})," Novo Pedido"]})]}),f.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-xl shadow-lg p-6",children:[f.jsxs("table",{className:"w-full text-sm text-left text-gray-500 dark:text-gray-400",children:[f.jsx("thead",{className:"text-xs text-gray-700 uppercase bg-gray-50 dark:bg-gray-700 dark:text-gray-400",children:f.jsxs("tr",{children:[f.jsx("th",{className:"px-6 py-3",children:"Data"}),f.jsx("th",{className:"px-6 py-3",children:"Cliente"}),f.jsx("th",{className:"px-6 py-3",children:"Itens"}),f.jsx("th",{className:"px-6 py-3 text-right",children:"Total"}),f.jsx("th",{className:"px-6 py-3 text-center",children:"Status"}),f.jsx("th",{className:"px-6 py-3 text-center",children:"Aes"})]})}),f.jsx("tbody",{children:n.map(s=>f.jsxs("tr",{className:"border-b dark:border-gray-700 hover:bg-gray-50 dark:hover:bg-gray-700",children:[f.jsx("td",{className:"px-6 py-4",children:Bn(s.date)}),f.jsx("td",{className:"px-6 py-4 font-medium text-gray-900 dark:text-white",children:s.customerName}),f.jsx("td",{className:"px-6 py-4 truncate max-w-xs",children:s.items.map(l=>`${l.quantity}x ${l.description}`).join(", ")}),f.jsx("td",{className:"px-6 py-4 text-right",children:ht(s.total)}),f.jsx("td",{className:"px-6 py-4 text-center",children:f.jsx("span",{className:`text-xs px-2 py-1 rounded-full font-medium ${i(s.status)}`,children:s.status})}),f.jsxs("td",{className:"px-6 py-4 text-center",children:[s.status==="Aberto"&&f.jsx("button",{onClick:()=>a(s.id,"Faturado"),className:"text-blue-600 hover:underline mr-3 font-medium",children:"Faturar"}),s.status==="Faturado"&&f.jsx("button",{onClick:()=>a(s.id,"Entregue"),className:"text-green-600 hover:underline mr-3 font-medium",children:"Entregar"})]})]},s.id))})]}),n.length===0&&f.jsxs("div",{className:"text-center py-10 text-gray-500",children:[f.jsx("p",{children:"Nenhum pedido de venda encontrado."}),f.jsx("p",{className:"text-xs mt-2 text-gray-400",children:"Dica: Feche negcios no CRM para gerar pedidos automaticamente."})]})]}),f.jsx("style",{children:".btn-primary{display:inline-flex;align-items:center;padding:0.5rem 1rem;border-radius:0.5rem;font-weight:500;background-color:rgb(var(--color-primary-600));color:white;transition:background-color .2s}.btn-primary:hover{background-color:rgb(var(--color-primary-700))}"})]})},sAe=()=>{const[t,e]=N.useState("dashboard"),{logOut:n}=$s(),{assets:r,stockItems:i}=Zt(),a=N.useMemo(()=>eF(r,30),[r,i]),s={dashboard:"Viso Geral & BI",assets:"Gesto de Ativos",maintenance:"Manuteno & Predio",settings:"Configuraes do Sistema",suppliers:"Gesto de Fornecedores",stock:"Controle de Estoque",purchasing:"Gesto de Compras",financial:"Gesto Financeira",documents:"Documentos Corporativos",users:"Usurios & Permisses",crm:"CRM & Pipeline",projects:"Gesto de Projetos",hr:"Recursos Humanos",fiscal:"Fiscal & Tributrio",sales:"Pedidos de Venda"},l=()=>{switch(t){case"dashboard":return f.jsx(Y4,{});case"assets":return f.jsx(QSe,{});case"maintenance":return f.jsx(e1e,{});case"settings":return f.jsx(a1e,{});case"suppliers":return f.jsx(u1e,{});case"stock":return f.jsx(p1e,{setCurrentPage:c=>e(c)});case"purchasing":return f.jsx(G1e,{});case"financial":return f.jsx(P1e,{});case"documents":return f.jsx(M1e,{});case"users":return f.jsx(J1e,{});case"crm":return f.jsx(X1e,{});case"projects":return f.jsx(tAe,{});case"hr":return f.jsx(rAe,{});case"fiscal":return f.jsx(iAe,{});case"sales":return f.jsx(aAe,{});default:return f.jsx(Y4,{})}};return f.jsx($se,{currentPage:t,setCurrentPage:e,onLogout:n,notifications:a,pageTitle:s[t],children:l()})};function oAe(){const{user:t,isLoading:e}=$s();return e?f.jsx("div",{className:"flex justify-center items-center h-screen bg-gray-100 dark:bg-gray-900",children:f.jsx("div",{className:"animate-spin rounded-full h-16 w-16 border-t-2 border-b-2 border-primary-500"})}):t?f.jsx(gse,{children:f.jsx(sAe,{})}):f.jsx(jse,{})}function lAe(){return f.jsx(t1e,{children:f.jsx(yQ,{children:f.jsx(Hse,{children:f.jsx(oAe,{})})})})}const I8=document.getElementById("root");if(!I8)throw new Error("Could not find root element to mount to");const uAe=iH.createRoot(I8);uAe.render(f.jsx(gh.StrictMode,{children:f.jsx(lAe,{})}));
